
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for Building Vitals/Building-Vitals/build/js/echarts-vendor-xTKhTmAz.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../index.html">All files</a> / <a href="index.html">Building Vitals/Building-Vitals/build/js</a> echarts-vendor-xTKhTmAz.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >var extendStatics$1=function(d,b){return(extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&amp;&amp;(d2[p]=b2[p])})(d,b)};function __extends$1(d,b){if("function"!=typeof b&amp;&amp;null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics$1(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var Browser=function(){return function Browser2(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}}(),env=new(function(){return function Env2(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window}}());"object"==typeof wx&amp;&amp;"function"==typeof wx.getSystemInfoSync?(env.wxa=!0,env.touchEventsSupported=!0):"undefined"==typeof document&amp;&amp;"undefined"!=typeof self?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):function detect(ua,env2){var browser=env2.browser,firefox=ua.match(/Firefox\/([\d.]+)/),ie=ua.match(/MSIE\s([\d.]+)/)||ua.match(/Trident\/.+?rv:(([\d.]+))/),edge=ua.match(/Edge?\/([\d.]+)/),weChat=/micromessenger/i.test(ua);firefox&amp;&amp;(browser.firefox=!0,browser.version=firefox[1]);ie&amp;&amp;(browser.ie=!0,browser.version=ie[1]);edge&amp;&amp;(browser.edge=!0,browser.version=edge[1],browser.newEdge=+edge[1].split(".")[0]&gt;18);weChat&amp;&amp;(browser.weChat=!0);env2.svgSupported="undefined"!=typeof SVGRect,env2.touchEventsSupported="ontouchstart"in window&amp;&amp;!browser.ie&amp;&amp;!browser.edge,env2.pointerEventsSupported="onpointerdown"in window&amp;&amp;(browser.edge||browser.ie&amp;&amp;+browser.version&gt;=11),env2.domSupported="undefined"!=typeof document;var style=document.documentElement.style;env2.transform3dSupported=(browser.ie&amp;&amp;"transition"in style||browser.edge||"WebKitCSSMatrix"in window&amp;&amp;"m11"in new WebKitCSSMatrix||"MozPerspective"in style)&amp;&amp;!("OTransition"in style),env2.transformSupported=env2.transform3dSupported||browser.ie&amp;&amp;+browser.version&gt;=9}(navigator.userAgent,env);var DEFAULT_FONT="12px sans-serif";var DEFAULT_TEXT_WIDTH_MAP=function getTextWidthMap(mapStr){var map2={};if("undefined"==typeof JSON)return map2;for(var i=0;i&lt;mapStr.length;i++){var char=String.fromCharCode(i+32),size=(mapStr.charCodeAt(i)-20)/100;map2[char]=size}return map2}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),platformApi={createCanvas:function(){return"undefined"!=typeof document&amp;&amp;document.createElement("canvas")},measureText:function(){var _ctx,_cachedFont;return function(text,font){if(!_ctx){var canvas=platformApi.createCanvas();_ctx=canvas&amp;&amp;canvas.getContext("2d")}if(_ctx)return _cachedFont!==font&amp;&amp;(_cachedFont=_ctx.font=font||DEFAULT_FONT),_ctx.measureText(text);text=text||"";var res=/((?:\d+)?\.?\d*)px/.exec(font=font||DEFAULT_FONT),fontSize=res&amp;&amp;+res[1]||12,width=0;if(font.indexOf("mono")&gt;=0)width=fontSize*text.length;else for(var i=0;i&lt;text.length;i++){var preCalcWidth=DEFAULT_TEXT_WIDTH_MAP[text[i]];width+=null==preCalcWidth?fontSize:preCalcWidth*fontSize}return{width:width}}}(),loadImage:function(src,onload,onerror){var image=new Image;return image.onload=onload,image.onerror=onerror,image.src=src,image}};function setPlatformAPI(newPlatformApis){for(var key in platformApi)newPlatformApis[key]&amp;&amp;(platformApi[key]=newPlatformApis[key])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(obj,val){return obj["[object "+val+"]"]=!0,obj},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(obj,val){return obj["[object "+val+"Array]"]=!0,obj},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=function(){}.constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,idStart=2311;function guid(){return idStart++}function logError(){for(var args=[],_i=0;_i&lt;arguments.length;_i++)args[_i]=arguments[_i];"undefined"!=typeof console&amp;&amp;console.error.apply(console,args)}function clone$4(source){if(null==source||"object"!=typeof source)return source;var result=source,typeStr=objToString.call(source);if("[object Array]"===typeStr){if(!isPrimitive(source)){result=[];for(var i=0,len2=source.length;i&lt;len2;i++)result[i]=clone$4(source[i])}}else if(TYPED_ARRAY[typeStr]){if(!isPrimitive(source)){var Ctor=source.constructor;if(Ctor.from)result=Ctor.from(source);else{result=new Ctor(source.length);for(i=0,len2=source.length;i&lt;len2;i++)result[i]=source[i]}}}else if(!BUILTIN_OBJECT[typeStr]&amp;&amp;!isPrimitive(source)&amp;&amp;!isDom(source))for(var key in result={},source)source.hasOwnProperty(key)&amp;&amp;"__proto__"!==key&amp;&amp;(result[key]=clone$4(source[key]));return result}function merge(target,source,overwrite){if(!isObject$3(source)||!isObject$3(target))return overwrite?clone$4(source):target;for(var key in source)if(source.hasOwnProperty(key)&amp;&amp;"__proto__"!==key){var targetProp=target[key],sourceProp=source[key];!isObject$3(sourceProp)||!isObject$3(targetProp)||isArray$1(sourceProp)||isArray$1(targetProp)||isDom(sourceProp)||isDom(targetProp)||isBuiltInObject(sourceProp)||isBuiltInObject(targetProp)||isPrimitive(sourceProp)||isPrimitive(targetProp)?!overwrite&amp;&amp;key in target||(target[key]=clone$4(source[key])):merge(targetProp,sourceProp,overwrite)}return target}function mergeAll(targetAndSources,overwrite){for(var result=targetAndSources[0],i=1,len2=targetAndSources.length;i&lt;len2;i++)result=merge(result,targetAndSources[i],overwrite);return result}function extend(target,source){if(Object.assign)Object.assign(target,source);else for(var key in source)source.hasOwnProperty(key)&amp;&amp;"__proto__"!==key&amp;&amp;(target[key]=source[key]);return target}function defaults(target,source,overlay){for(var keysArr=keys(source),i=0,len2=keysArr.length;i&lt;len2;i++){var key=keysArr[i];(overlay?null!=source[key]:null==target[key])&amp;&amp;(target[key]=source[key])}return target}var createCanvas=platformApi.createCanvas;function indexOf(array,value){if(array){if(array.indexOf)return array.indexOf(value);for(var i=0,len2=array.length;i&lt;len2;i++)if(array[i]===value)return i}return-1}function inherits(clazz,baseClazz){var clazzPrototype=clazz.prototype;function F(){}for(var prop in F.prototype=baseClazz.prototype,clazz.prototype=new F,clazzPrototype)clazzPrototype.hasOwnProperty(prop)&amp;&amp;(clazz.prototype[prop]=clazzPrototype[prop]);clazz.prototype.constructor=clazz,clazz.superClass=baseClazz}function mixin(target,source,override){if(target="prototype"in target?target.prototype:target,source="prototype"in source?source.prototype:source,Object.getOwnPropertyNames)for(var keyList=Object.getOwnPropertyNames(source),i=0;i&lt;keyList.length;i++){var key=keyList[i];"constructor"!==key&amp;&amp;(override?null!=source[key]:null==target[key])&amp;&amp;(target[key]=source[key])}else defaults(target,source,override)}function isArrayLike(data){return!!data&amp;&amp;("string"!=typeof data&amp;&amp;"number"==typeof data.length)}function each$f(arr,cb,context){if(arr&amp;&amp;cb)if(arr.forEach&amp;&amp;arr.forEach===nativeForEach)arr.forEach(cb,context);else if(arr.length===+arr.length)for(var i=0,len2=arr.length;i&lt;len2;i++)cb.call(context,arr[i],i,arr);else for(var key in arr)arr.hasOwnProperty(key)&amp;&amp;cb.call(context,arr[key],key,arr)}function map$1(arr,cb,context){if(!arr)return[];if(!cb)return slice(arr);if(arr.map&amp;&amp;arr.map===nativeMap)return arr.map(cb,context);for(var result=[],i=0,len2=arr.length;i&lt;len2;i++)result.push(cb.call(context,arr[i],i,arr));return result}function reduce(arr,cb,memo,context){if(arr&amp;&amp;cb){for(var i=0,len2=arr.length;i&lt;len2;i++)memo=cb.call(context,memo,arr[i],i,arr);return memo}}function filter(arr,cb,context){if(!arr)return[];if(!cb)return slice(arr);if(arr.filter&amp;&amp;arr.filter===nativeFilter)return arr.filter(cb,context);for(var result=[],i=0,len2=arr.length;i&lt;len2;i++)cb.call(context,arr[i],i,arr)&amp;&amp;result.push(arr[i]);return result}function find(arr,cb,context){if(arr&amp;&amp;cb)for(var i=0,len2=arr.length;i&lt;len2;i++)if(cb.call(context,arr[i],i,arr))return arr[i]}function keys(obj){if(!obj)return[];if(Object.keys)return Object.keys(obj);var keyList=[];for(var key in obj)obj.hasOwnProperty(key)&amp;&amp;keyList.push(key);return keyList}var bind$1=protoFunction&amp;&amp;isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):function bindPolyfill(func,context){for(var args=[],_i=2;_i&lt;arguments.length;_i++)args[_i-2]=arguments[_i];return function(){return func.apply(context,args.concat(nativeSlice.call(arguments)))}};function curry$1(func){for(var args=[],_i=1;_i&lt;arguments.length;_i++)args[_i-1]=arguments[_i];return function(){return func.apply(this,args.concat(nativeSlice.call(arguments)))}}function isArray$1(value){return Array.isArray?Array.isArray(value):"[object Array]"===objToString.call(value)}function isFunction(value){return"function"==typeof value}function isString(value){return"string"==typeof value}function isStringSafe(value){return"[object String]"===objToString.call(value)}function isNumber(value){return"number"==typeof value}function isObject$3(value){var type=typeof value;return"function"===type||!!value&amp;&amp;"object"===type}function isBuiltInObject(value){return!!BUILTIN_OBJECT[objToString.call(value)]}function isTypedArray(value){return!!TYPED_ARRAY[objToString.call(value)]}function isDom(value){return"object"==typeof value&amp;&amp;"number"==typeof value.nodeType&amp;&amp;"object"==typeof value.ownerDocument}function isGradientObject(value){return null!=value.colorStops}function isImagePatternObject(value){return null!=value.image}function isRegExp(value){return"[object RegExp]"===objToString.call(value)}function eqNaN(value){return value!=value}function retrieve(){for(var args=[],_i=0;_i&lt;arguments.length;_i++)args[_i]=arguments[_i];for(var i=0,len2=args.length;i&lt;len2;i++)if(null!=args[i])return args[i]}function retrieve2(value0,value1){return null!=value0?value0:value1}function retrieve3(value0,value1,value2){return null!=value0?value0:null!=value1?value1:value2}function slice(arr){for(var args=[],_i=1;_i&lt;arguments.length;_i++)args[_i-1]=arguments[_i];return nativeSlice.apply(arr,args)}function normalizeCssArray$1(val){if("number"==typeof val)return[val,val,val,val];var len2=val.length;return 2===len2?[val[0],val[1],val[0],val[1]]:3===len2?[val[0],val[1],val[2],val[1]]:val}function assert(condition,message){if(!condition)throw new Error(message)}function trim$1(str){return null==str?null:"function"==typeof str.trim?str.trim():str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(obj){obj[primitiveKey]=!0}function isPrimitive(obj){return obj[primitiveKey]}var MapPolyfill=function(){function MapPolyfill2(){this.data={}}return MapPolyfill2.prototype.delete=function(key){var existed=this.has(key);return existed&amp;&amp;delete this.data[key],existed},MapPolyfill2.prototype.has=function(key){return this.data.hasOwnProperty(key)},MapPolyfill2.prototype.get=function(key){return this.data[key]},MapPolyfill2.prototype.set=function(key,value){return this.data[key]=value,this},MapPolyfill2.prototype.keys=function(){return keys(this.data)},MapPolyfill2.prototype.forEach=function(callback){var data=this.data;for(var key in data)data.hasOwnProperty(key)&amp;&amp;callback(data[key],key)},MapPolyfill2}(),isNativeMapSupported="function"==typeof Map;var HashMap=function(){function HashMap2(obj){var isArr=isArray$1(obj);this.data=function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}();var thisMap=this;function visit(value,key){isArr?thisMap.set(value,key):thisMap.set(key,value)}obj instanceof HashMap2?obj.each(visit):obj&amp;&amp;each$f(obj,visit)}return HashMap2.prototype.hasKey=function(key){return this.data.has(key)},HashMap2.prototype.get=function(key){return this.data.get(key)},HashMap2.prototype.set=function(key,value){return this.data.set(key,value),value},HashMap2.prototype.each=function(cb,context){this.data.forEach(function(value,key){cb.call(context,value,key)})},HashMap2.prototype.keys=function(){var keys2=this.data.keys();return isNativeMapSupported?Array.from(keys2):keys2},HashMap2.prototype.removeKey=function(key){this.data.delete(key)},HashMap2}();function createHashMap(obj){return new HashMap(obj)}function concatArray(a,b){for(var newArray=new a.constructor(a.length+b.length),i=0;i&lt;a.length;i++)newArray[i]=a[i];var offset=a.length;for(i=0;i&lt;b.length;i++)newArray[i+offset]=b[i];return newArray}function createObject(proto2,properties){var obj;if(Object.create)obj=Object.create(proto2);else{var StyleCtor=function(){};StyleCtor.prototype=proto2,obj=new StyleCtor}return properties&amp;&amp;extend(obj,properties),obj}function disableUserSelect(dom){var domStyle=dom.style;domStyle.webkitUserSelect="none",domStyle.userSelect="none",domStyle.webkitTapHighlightColor="rgba(0,0,0,0)",domStyle["-webkit-touch-callout"]="none"}function hasOwn(own,prop){return own.hasOwnProperty(prop)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap:HashMap,RADIAN_TO_DEGREE:RADIAN_TO_DEGREE,assert:assert,bind:bind$1,clone:clone$4,concatArray:concatArray,createCanvas:createCanvas,createHashMap:createHashMap,createObject:createObject,curry:curry$1,defaults:defaults,disableUserSelect:disableUserSelect,each:each$f,eqNaN:eqNaN,extend:extend,filter:filter,find:find,guid:guid,hasOwn:hasOwn,indexOf:indexOf,inherits:inherits,isArray:isArray$1,isArrayLike:isArrayLike,isBuiltInObject:isBuiltInObject,isDom:isDom,isFunction:isFunction,isGradientObject:isGradientObject,isImagePatternObject:isImagePatternObject,isNumber:isNumber,isObject:isObject$3,isPrimitive:isPrimitive,isRegExp:isRegExp,isString:isString,isStringSafe:isStringSafe,isTypedArray:isTypedArray,keys:keys,logError:logError,map:map$1,merge:merge,mergeAll:mergeAll,mixin:mixin,noop:noop,normalizeCssArray:normalizeCssArray$1,reduce:reduce,retrieve:retrieve,retrieve2:retrieve2,retrieve3:retrieve3,setAsPrimitive:setAsPrimitive,slice:slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&amp;&amp;(d2[p]=b2[p])})(d,b)};function __extends(d,b){if("function"!=typeof b&amp;&amp;null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function create$2(x,y){return null==x&amp;&amp;(x=0),null==y&amp;&amp;(y=0),[x,y]}function copy$1(out2,v){return out2[0]=v[0],out2[1]=v[1],out2}function clone$3(v){return[v[0],v[1]]}function set$1(out2,a,b){return out2[0]=a,out2[1]=b,out2}function add(out2,v12,v22){return out2[0]=v12[0]+v22[0],out2[1]=v12[1]+v22[1],out2}function scaleAndAdd$1(out2,v12,v22,a){return out2[0]=v12[0]+v22[0]*a,out2[1]=v12[1]+v22[1]*a,out2}function sub(out2,v12,v22){return out2[0]=v12[0]-v22[0],out2[1]=v12[1]-v22[1],out2}function len(v){return Math.sqrt(lenSquare(v))}var length=len;function lenSquare(v){return v[0]*v[0]+v[1]*v[1]}var lengthSquare=lenSquare;function scale$2(out2,v,s){return out2[0]=v[0]*s,out2[1]=v[1]*s,out2}function normalize$3(out2,v){var d=len(v);return 0===d?(out2[0]=0,out2[1]=0):(out2[0]=v[0]/d,out2[1]=v[1]/d),out2}function distance(v12,v22){return Math.sqrt((v12[0]-v22[0])*(v12[0]-v22[0])+(v12[1]-v22[1])*(v12[1]-v22[1]))}var dist$1=distance;function distanceSquare(v12,v22){return(v12[0]-v22[0])*(v12[0]-v22[0])+(v12[1]-v22[1])*(v12[1]-v22[1])}var distSquare=distanceSquare;function lerp$1(out2,v12,v22,t){return out2[0]=v12[0]+t*(v22[0]-v12[0]),out2[1]=v12[1]+t*(v22[1]-v12[1]),out2}function applyTransform$1(out2,v,m2){var x=v[0],y=v[1];return out2[0]=m2[0]*x+m2[2]*y+m2[4],out2[1]=m2[1]*x+m2[3]*y+m2[5],out2}function min$1(out2,v12,v22){return out2[0]=Math.min(v12[0],v22[0]),out2[1]=Math.min(v12[1],v22[1]),out2}function max$1(out2,v12,v22){return out2[0]=Math.max(v12[0],v22[0]),out2[1]=Math.max(v12[1],v22[1]),out2}const vector=Object.freeze(Object.defineProperty({__proto__:null,add:add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$1,create:create$2,dist:dist$1,distSquare:distSquare,distance:distance,distanceSquare:distanceSquare,div:function div(out2,v12,v22){return out2[0]=v12[0]/v22[0],out2[1]=v12[1]/v22[1],out2},dot:function dot(v12,v22){return v12[0]*v22[0]+v12[1]*v22[1]},len:len,lenSquare:lenSquare,length:length,lengthSquare:lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:function mul$1(out2,v12,v22){return out2[0]=v12[0]*v22[0],out2[1]=v12[1]*v22[1],out2},negate:function negate(out2,v){return out2[0]=-v[0],out2[1]=-v[1],out2},normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub:sub},Symbol.toStringTag,{value:"Module"}));var Param=function(){return function Param2(target,e2){this.target=target,this.topTarget=e2&amp;&amp;e2.topTarget}}(),Draggable=function(){function Draggable2(handler){this.handler=handler,handler.on("mousedown",this._dragStart,this),handler.on("mousemove",this._drag,this),handler.on("mouseup",this._dragEnd,this)}return Draggable2.prototype._dragStart=function(e2){for(var draggingTarget=e2.target;draggingTarget&amp;&amp;!draggingTarget.draggable;)draggingTarget=draggingTarget.parent||draggingTarget.__hostTarget;draggingTarget&amp;&amp;(this._draggingTarget=draggingTarget,draggingTarget.dragging=!0,this._x=e2.offsetX,this._y=e2.offsetY,this.handler.dispatchToElement(new Param(draggingTarget,e2),"dragstart",e2.event))},Draggable2.prototype._drag=function(e2){var draggingTarget=this._draggingTarget;if(draggingTarget){var x=e2.offsetX,y=e2.offsetY,dx=x-this._x,dy=y-this._y;this._x=x,this._y=y,draggingTarget.drift(dx,dy,e2),this.handler.dispatchToElement(new Param(draggingTarget,e2),"drag",e2.event);var dropTarget=this.handler.findHover(x,y,draggingTarget).target,lastDropTarget=this._dropTarget;this._dropTarget=dropTarget,draggingTarget!==dropTarget&amp;&amp;(lastDropTarget&amp;&amp;dropTarget!==lastDropTarget&amp;&amp;this.handler.dispatchToElement(new Param(lastDropTarget,e2),"dragleave",e2.event),dropTarget&amp;&amp;dropTarget!==lastDropTarget&amp;&amp;this.handler.dispatchToElement(new Param(dropTarget,e2),"dragenter",e2.event))}},Draggable2.prototype._dragEnd=function(e2){var draggingTarget=this._draggingTarget;draggingTarget&amp;&amp;(draggingTarget.dragging=!1),this.handler.dispatchToElement(new Param(draggingTarget,e2),"dragend",e2.event),this._dropTarget&amp;&amp;this.handler.dispatchToElement(new Param(this._dropTarget,e2),"drop",e2.event),this._draggingTarget=null,this._dropTarget=null},Draggable2}(),Eventful=function(){function Eventful2(eventProcessors){eventProcessors&amp;&amp;(this._$eventProcessor=eventProcessors)}return Eventful2.prototype.on=function(event,query,handler,context){this._$handlers||(this._$handlers={});var _h=this._$handlers;if("function"==typeof query&amp;&amp;(context=handler,handler=query,query=null),!handler||!event)return this;var eventProcessor=this._$eventProcessor;null!=query&amp;&amp;eventProcessor&amp;&amp;eventProcessor.normalizeQuery&amp;&amp;(query=eventProcessor.normalizeQuery(query)),_h[event]||(_h[event]=[]);for(var i=0;i&lt;_h[event].length;i++)if(_h[event][i].h===handler)return this;var wrap={h:handler,query:query,ctx:context||this,callAtLast:handler.zrEventfulCallAtLast},lastIndex=_h[event].length-1,lastWrap=_h[event][lastIndex];return lastWrap&amp;&amp;lastWrap.callAtLast?_h[event].splice(lastIndex,0,wrap):_h[event].push(wrap),this},Eventful2.prototype.isSilent=function(eventName){var _h=this._$handlers;return!_h||!_h[eventName]||!_h[eventName].length},Eventful2.prototype.off=function(eventType,handler){var _h=this._$handlers;if(!_h)return this;if(!eventType)return this._$handlers={},this;if(handler){if(_h[eventType]){for(var newList=[],i=0,l=_h[eventType].length;i&lt;l;i++)_h[eventType][i].h!==handler&amp;&amp;newList.push(_h[eventType][i]);_h[eventType]=newList}_h[eventType]&amp;&amp;0===_h[eventType].length&amp;&amp;delete _h[eventType]}else delete _h[eventType];return this},Eventful2.prototype.trigger=function(eventType){for(var args=[],_i=1;_i&lt;arguments.length;_i++)args[_i-1]=arguments[_i];if(!this._$handlers)return this;var _h=this._$handlers[eventType],eventProcessor=this._$eventProcessor;if(_h)for(var argLen=args.length,len2=_h.length,i=0;i&lt;len2;i++){var hItem=_h[i];if(!eventProcessor||!eventProcessor.filter||null==hItem.query||eventProcessor.filter(eventType,hItem.query))switch(argLen){case 0:hItem.h.call(hItem.ctx);break;case 1:hItem.h.call(hItem.ctx,args[0]);break;case 2:hItem.h.call(hItem.ctx,args[0],args[1]);break;default:hItem.h.apply(hItem.ctx,args)}}return eventProcessor&amp;&amp;eventProcessor.afterTrigger&amp;&amp;eventProcessor.afterTrigger(eventType),this},Eventful2.prototype.triggerWithContext=function(type){for(var args=[],_i=1;_i&lt;arguments.length;_i++)args[_i-1]=arguments[_i];if(!this._$handlers)return this;var _h=this._$handlers[type],eventProcessor=this._$eventProcessor;if(_h)for(var argLen=args.length,ctx=args[argLen-1],len2=_h.length,i=0;i&lt;len2;i++){var hItem=_h[i];if(!eventProcessor||!eventProcessor.filter||null==hItem.query||eventProcessor.filter(type,hItem.query))switch(argLen){case 0:hItem.h.call(ctx);break;case 1:hItem.h.call(ctx,args[0]);break;case 2:hItem.h.call(ctx,args[0],args[1]);break;default:hItem.h.apply(ctx,args.slice(1,argLen-1))}}return eventProcessor&amp;&amp;eventProcessor.afterTrigger&amp;&amp;eventProcessor.afterTrigger(type),this},Eventful2}(),LN2=Math.log(2);function determinant(rows,rank,rowStart,rowMask,colMask,detCache){var cacheKey=rowMask+"-"+colMask,fullRank=rows.length;if(detCache.hasOwnProperty(cacheKey))return detCache[cacheKey];if(1===rank){var colStart=Math.round(Math.log((1&lt;&lt;fullRank)-1&amp;~colMask)/LN2);return rows[rowStart][colStart]}for(var subRowMask=rowMask|1&lt;&lt;rowStart,subRowStart=rowStart+1;rowMask&amp;1&lt;&lt;subRowStart;)subRowStart++;for(var sum2=0,j=0,colLocalIdx=0;j&lt;fullRank;j++){var colTag=1&lt;&lt;j;colTag&amp;colMask||(sum2+=(colLocalIdx%2?-1:1)*rows[rowStart][j]*determinant(rows,rank-1,subRowStart,subRowMask,colMask|colTag,detCache),colLocalIdx++)}return detCache[cacheKey]=sum2,sum2}function buildTransformer(src,dest){var mA=[[src[0],src[1],1,0,0,0,-dest[0]*src[0],-dest[0]*src[1]],[0,0,0,src[0],src[1],1,-dest[1]*src[0],-dest[1]*src[1]],[src[2],src[3],1,0,0,0,-dest[2]*src[2],-dest[2]*src[3]],[0,0,0,src[2],src[3],1,-dest[3]*src[2],-dest[3]*src[3]],[src[4],src[5],1,0,0,0,-dest[4]*src[4],-dest[4]*src[5]],[0,0,0,src[4],src[5],1,-dest[5]*src[4],-dest[5]*src[5]],[src[6],src[7],1,0,0,0,-dest[6]*src[6],-dest[6]*src[7]],[0,0,0,src[6],src[7],1,-dest[7]*src[6],-dest[7]*src[7]]],detCache={},det=determinant(mA,8,0,0,0,detCache);if(0!==det){for(var vh=[],i=0;i&lt;8;i++)for(var j=0;j&lt;8;j++)null==vh[j]&amp;&amp;(vh[j]=0),vh[j]+=((i+j)%2?-1:1)*determinant(mA,7,0===i?1:0,1&lt;&lt;i,1&lt;&lt;j,detCache)/det*dest[i];return function(out2,srcPointX,srcPointY){var pk=srcPointX*vh[6]+srcPointY*vh[7]+1;out2[0]=(srcPointX*vh[0]+srcPointY*vh[1]+vh[2])/pk,out2[1]=(srcPointX*vh[3]+srcPointY*vh[4]+vh[5])/pk}}}var _calcOut$1=[];function transformCoordWithViewport(out2,el,inX,inY,inverse){if(el.getBoundingClientRect&amp;&amp;env.domSupported&amp;&amp;!isCanvasEl(el)){var saved=el.___zrEVENTSAVED||(el.___zrEVENTSAVED={}),markers=function prepareCoordMarkers(el,saved){var markers=saved.markers;if(markers)return markers;markers=saved.markers=[];for(var propLR=["left","right"],propTB=["top","bottom"],i=0;i&lt;4;i++){var marker=document.createElement("div"),idxLR=i%2,idxTB=(i&gt;&gt;1)%2;marker.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",propLR[idxLR]+":0",propTB[idxTB]+":0",propLR[1-idxLR]+":auto",propTB[1-idxTB]+":auto",""].join("!important;"),el.appendChild(marker),markers.push(marker)}return markers}(el,saved),transformer=function preparePointerTransformer(markers,saved,inverse){for(var transformerName=inverse?"invTrans":"trans",transformer=saved[transformerName],oldSrcCoords=saved.srcCoords,srcCoords=[],destCoords=[],oldCoordTheSame=!0,i=0;i&lt;4;i++){var rect=markers[i].getBoundingClientRect(),ii=2*i,x=rect.left,y=rect.top;srcCoords.push(x,y),oldCoordTheSame=oldCoordTheSame&amp;&amp;oldSrcCoords&amp;&amp;x===oldSrcCoords[ii]&amp;&amp;y===oldSrcCoords[ii+1],destCoords.push(markers[i].offsetLeft,markers[i].offsetTop)}return oldCoordTheSame&amp;&amp;transformer?transformer:(saved.srcCoords=srcCoords,saved[transformerName]=inverse?buildTransformer(destCoords,srcCoords):buildTransformer(srcCoords,destCoords))}(markers,saved,inverse);if(transformer)return transformer(out2,inX,inY),!0}return!1}function isCanvasEl(el){return"CANVAS"===el.nodeName.toUpperCase()}var replaceReg=/([&amp;&lt;&gt;"'])/g,replaceMap={"&amp;":"&amp;amp;","&lt;":"&amp;lt;","&gt;":"&amp;gt;",'"':"&amp;quot;","'":"&amp;#39;"};function encodeHTML(source){return null==source?"":(source+"").replace(replaceReg,function(str,c){return replaceMap[c]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&amp;&amp;+env.browser.version.split(".")[0]&lt;39;function clientToLocal(el,e2,out2,calculate){return out2=out2||{},calculate?calculateZrXY(el,e2,out2):firefoxNotSupportOffsetXY&amp;&amp;null!=e2.layerX&amp;&amp;e2.layerX!==e2.offsetX?(out2.zrX=e2.layerX,out2.zrY=e2.layerY):null!=e2.offsetX?(out2.zrX=e2.offsetX,out2.zrY=e2.offsetY):calculateZrXY(el,e2,out2),out2}function calculateZrXY(el,e2,out2){if(env.domSupported&amp;&amp;el.getBoundingClientRect){var ex=e2.clientX,ey=e2.clientY;if(isCanvasEl(el)){var box2=el.getBoundingClientRect();return out2.zrX=ex-box2.left,void(out2.zrY=ey-box2.top)}if(transformCoordWithViewport(_calcOut,el,ex,ey))return out2.zrX=_calcOut[0],void(out2.zrY=_calcOut[1])}out2.zrX=out2.zrY=0}function getNativeEvent(e2){return e2||window.event}function normalizeEvent(el,e2,calculate){if(null!=(e2=getNativeEvent(e2)).zrX)return e2;var eventType=e2.type;if(eventType&amp;&amp;eventType.indexOf("touch")&gt;=0){var touch="touchend"!==eventType?e2.targetTouches[0]:e2.changedTouches[0];touch&amp;&amp;clientToLocal(el,touch,e2,calculate)}else{clientToLocal(el,e2,e2,calculate);var wheelDelta=function getWheelDeltaMayPolyfill(e2){var rawWheelDelta=e2.wheelDelta;if(rawWheelDelta)return rawWheelDelta;var deltaX=e2.deltaX,deltaY=e2.deltaY;if(null==deltaX||null==deltaY)return rawWheelDelta;return 3*(0!==deltaY?Math.abs(deltaY):Math.abs(deltaX))*(deltaY&gt;0?-1:deltaY&lt;0?1:deltaX&gt;0?-1:1)}(e2);e2.zrDelta=wheelDelta?wheelDelta/120:-(e2.detail||0)/3}var button=e2.button;return null==e2.which&amp;&amp;void 0!==button&amp;&amp;MOUSE_EVENT_REG.test(e2.type)&amp;&amp;(e2.which=1&amp;button?1:2&amp;button?3:4&amp;button?2:0),e2}function addEventListener(el,name,handler,opt){el.addEventListener(name,handler,opt)}function removeEventListener(el,name,handler,opt){el.removeEventListener(name,handler,opt)}var stop=function(e2){e2.preventDefault(),e2.stopPropagation(),e2.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(e2){return 2===e2.which||3===e2.which}var GestureMgr=function(){function GestureMgr2(){this._track=[]}return GestureMgr2.prototype.recognize=function(event,target,root){return this._doTrack(event,target,root),this._recognize(event)},GestureMgr2.prototype.clear=function(){return this._track.length=0,this},GestureMgr2.prototype._doTrack=function(event,target,root){var touches=event.touches;if(touches){for(var trackItem={points:[],touches:[],target:target,event:event},i=0,len2=touches.length;i&lt;len2;i++){var touch=touches[i],pos=clientToLocal(root,touch,{});trackItem.points.push([pos.zrX,pos.zrY]),trackItem.touches.push(touch)}this._track.push(trackItem)}},GestureMgr2.prototype._recognize=function(event){for(var eventName in recognizers)if(recognizers.hasOwnProperty(eventName)){var gestureInfo=recognizers[eventName](this._track,event);if(gestureInfo)return gestureInfo}},GestureMgr2}();function dist(pointPair){var dx=pointPair[1][0]-pointPair[0][0],dy=pointPair[1][1]-pointPair[0][1];return Math.sqrt(dx*dx+dy*dy)}var recognizers={pinch:function(tracks,event){var trackLen=tracks.length;if(trackLen){var pinchEnd=(tracks[trackLen-1]||{}).points,pinchPre=(tracks[trackLen-2]||{}).points||pinchEnd;if(pinchPre&amp;&amp;pinchPre.length&gt;1&amp;&amp;pinchEnd&amp;&amp;pinchEnd.length&gt;1){var pinchScale=dist(pinchEnd)/dist(pinchPre);!isFinite(pinchScale)&amp;&amp;(pinchScale=1),event.pinchScale=pinchScale;var pinchCenter=function center$1(pointPair){return[(pointPair[0][0]+pointPair[1][0])/2,(pointPair[0][1]+pointPair[1][1])/2]}(pinchEnd);return event.pinchX=pinchCenter[0],event.pinchY=pinchCenter[1],{type:"pinch",target:tracks[0].target,event:event}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(out2){return out2[0]=1,out2[1]=0,out2[2]=0,out2[3]=1,out2[4]=0,out2[5]=0,out2}function copy(out2,m2){return out2[0]=m2[0],out2[1]=m2[1],out2[2]=m2[2],out2[3]=m2[3],out2[4]=m2[4],out2[5]=m2[5],out2}function mul(out2,m1,m2){var out0=m1[0]*m2[0]+m1[2]*m2[1],out1=m1[1]*m2[0]+m1[3]*m2[1],out22=m1[0]*m2[2]+m1[2]*m2[3],out3=m1[1]*m2[2]+m1[3]*m2[3],out4=m1[0]*m2[4]+m1[2]*m2[5]+m1[4],out5=m1[1]*m2[4]+m1[3]*m2[5]+m1[5];return out2[0]=out0,out2[1]=out1,out2[2]=out22,out2[3]=out3,out2[4]=out4,out2[5]=out5,out2}function translate(out2,a,v){return out2[0]=a[0],out2[1]=a[1],out2[2]=a[2],out2[3]=a[3],out2[4]=a[4]+v[0],out2[5]=a[5]+v[1],out2}function rotate(out2,a,rad,pivot){void 0===pivot&amp;&amp;(pivot=[0,0]);var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],st=Math.sin(rad),ct=Math.cos(rad);return out2[0]=aa*ct+ab*st,out2[1]=-aa*st+ab*ct,out2[2]=ac*ct+ad*st,out2[3]=-ac*st+ct*ad,out2[4]=ct*(atx-pivot[0])+st*(aty-pivot[1])+pivot[0],out2[5]=ct*(aty-pivot[1])-st*(atx-pivot[0])+pivot[1],out2}function scale$1(out2,a,v){var vx=v[0],vy=v[1];return out2[0]=a[0]*vx,out2[1]=a[1]*vy,out2[2]=a[2]*vx,out2[3]=a[3]*vy,out2[4]=a[4]*vx,out2[5]=a[5]*vy,out2}function invert(out2,a){var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],det=aa*ad-ab*ac;return det?(det=1/det,out2[0]=ad*det,out2[1]=-ab*det,out2[2]=-ac*det,out2[3]=aa*det,out2[4]=(ac*aty-ad*atx)*det,out2[5]=(ab*atx-aa*aty)*det,out2):null}function clone$2(a){var b=[1,0,0,1,0,0];return copy(b,a),b}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy:copy,create:create$1,identity:identity,invert:invert,mul:mul,rotate:rotate,scale:scale$1,translate:translate},Symbol.toStringTag,{value:"Module"}));var Point=function(){function Point2(x,y){this.x=x||0,this.y=y||0}return Point2.prototype.copy=function(other){return this.x=other.x,this.y=other.y,this},Point2.prototype.clone=function(){return new Point2(this.x,this.y)},Point2.prototype.set=function(x,y){return this.x=x,this.y=y,this},Point2.prototype.equal=function(other){return other.x===this.x&amp;&amp;other.y===this.y},Point2.prototype.add=function(other){return this.x+=other.x,this.y+=other.y,this},Point2.prototype.scale=function(scalar){this.x*=scalar,this.y*=scalar},Point2.prototype.scaleAndAdd=function(other,scalar){this.x+=other.x*scalar,this.y+=other.y*scalar},Point2.prototype.sub=function(other){return this.x-=other.x,this.y-=other.y,this},Point2.prototype.dot=function(other){return this.x*other.x+this.y*other.y},Point2.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Point2.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},Point2.prototype.normalize=function(){var len2=this.len();return this.x/=len2,this.y/=len2,this},Point2.prototype.distance=function(other){var dx=this.x-other.x,dy=this.y-other.y;return Math.sqrt(dx*dx+dy*dy)},Point2.prototype.distanceSquare=function(other){var dx=this.x-other.x,dy=this.y-other.y;return dx*dx+dy*dy},Point2.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},Point2.prototype.transform=function(m2){if(m2){var x=this.x,y=this.y;return this.x=m2[0]*x+m2[2]*y+m2[4],this.y=m2[1]*x+m2[3]*y+m2[5],this}},Point2.prototype.toArray=function(out2){return out2[0]=this.x,out2[1]=this.y,out2},Point2.prototype.fromArray=function(input){this.x=input[0],this.y=input[1]},Point2.set=function(p,x,y){p.x=x,p.y=y},Point2.copy=function(p,p2){p.x=p2.x,p.y=p2.y},Point2.len=function(p){return Math.sqrt(p.x*p.x+p.y*p.y)},Point2.lenSquare=function(p){return p.x*p.x+p.y*p.y},Point2.dot=function(p0,p1){return p0.x*p1.x+p0.y*p1.y},Point2.add=function(out2,p0,p1){out2.x=p0.x+p1.x,out2.y=p0.y+p1.y},Point2.sub=function(out2,p0,p1){out2.x=p0.x-p1.x,out2.y=p0.y-p1.y},Point2.scale=function(out2,p0,scalar){out2.x=p0.x*scalar,out2.y=p0.y*scalar},Point2.scaleAndAdd=function(out2,p0,p1,scalar){out2.x=p0.x+p1.x*scalar,out2.y=p0.y+p1.y*scalar},Point2.lerp=function(out2,p0,p1,t){var onet=1-t;out2.x=onet*p0.x+t*p1.x,out2.y=onet*p0.y+t*p1.y},Point2}(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function BoundingRect2(x,y,width,height){width&lt;0&amp;&amp;(x+=width,width=-width),height&lt;0&amp;&amp;(y+=height,height=-height),this.x=x,this.y=y,this.width=width,this.height=height}return BoundingRect2.prototype.union=function(other){var x=mathMin$a(other.x,this.x),y=mathMin$a(other.y,this.y);isFinite(this.x)&amp;&amp;isFinite(this.width)?this.width=mathMax$a(other.x+other.width,this.x+this.width)-x:this.width=other.width,isFinite(this.y)&amp;&amp;isFinite(this.height)?this.height=mathMax$a(other.y+other.height,this.y+this.height)-y:this.height=other.height,this.x=x,this.y=y},BoundingRect2.prototype.applyTransform=function(m2){BoundingRect2.applyTransform(this,this,m2)},BoundingRect2.prototype.calculateTransform=function(b){var a=this,sx=b.width/a.width,sy=b.height/a.height,m2=[1,0,0,1,0,0];return translate(m2,m2,[-a.x,-a.y]),scale$1(m2,m2,[sx,sy]),translate(m2,m2,[b.x,b.y]),m2},BoundingRect2.prototype.intersect=function(b,mtv){if(!b)return!1;b instanceof BoundingRect2||(b=BoundingRect2.create(b));var a=this,ax0=a.x,ax1=a.x+a.width,ay0=a.y,ay1=a.y+a.height,bx0=b.x,bx1=b.x+b.width,by0=b.y,by1=b.y+b.height,overlap=!(ax1&lt;bx0||bx1&lt;ax0||ay1&lt;by0||by1&lt;ay0);if(mtv){var dMin=1/0,dMax=0,d0=Math.abs(ax1-bx0),d1=Math.abs(bx1-ax0),d2=Math.abs(ay1-by0),d3=Math.abs(by1-ay0),dx=Math.min(d0,d1),dy=Math.min(d2,d3);ax1&lt;bx0||bx1&lt;ax0?dx&gt;dMax&amp;&amp;(dMax=dx,d0&lt;d1?Point.set(maxTv$1,-d0,0):Point.set(maxTv$1,d1,0)):dx&lt;dMin&amp;&amp;(dMin=dx,d0&lt;d1?Point.set(minTv$1,d0,0):Point.set(minTv$1,-d1,0)),ay1&lt;by0||by1&lt;ay0?dy&gt;dMax&amp;&amp;(dMax=dy,d2&lt;d3?Point.set(maxTv$1,0,-d2):Point.set(maxTv$1,0,d3)):dx&lt;dMin&amp;&amp;(dMin=dx,d2&lt;d3?Point.set(minTv$1,0,d2):Point.set(minTv$1,0,-d3))}return mtv&amp;&amp;Point.copy(mtv,overlap?minTv$1:maxTv$1),overlap},BoundingRect2.prototype.contain=function(x,y){return x&gt;=this.x&amp;&amp;x&lt;=this.x+this.width&amp;&amp;y&gt;=this.y&amp;&amp;y&lt;=this.y+this.height},BoundingRect2.prototype.clone=function(){return new BoundingRect2(this.x,this.y,this.width,this.height)},BoundingRect2.prototype.copy=function(other){BoundingRect2.copy(this,other)},BoundingRect2.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},BoundingRect2.prototype.isFinite=function(){return isFinite(this.x)&amp;&amp;isFinite(this.y)&amp;&amp;isFinite(this.width)&amp;&amp;isFinite(this.height)},BoundingRect2.prototype.isZero=function(){return 0===this.width||0===this.height},BoundingRect2.create=function(rect){return new BoundingRect2(rect.x,rect.y,rect.width,rect.height)},BoundingRect2.copy=function(target,source){target.x=source.x,target.y=source.y,target.width=source.width,target.height=source.height},BoundingRect2.applyTransform=function(target,source,m2){if(m2){if(m2[1]&lt;1e-5&amp;&amp;m2[1]&gt;-1e-5&amp;&amp;m2[2]&lt;1e-5&amp;&amp;m2[2]&gt;-1e-5){var sx=m2[0],sy=m2[3],tx=m2[4],ty=m2[5];return target.x=source.x*sx+tx,target.y=source.y*sy+ty,target.width=source.width*sx,target.height=source.height*sy,target.width&lt;0&amp;&amp;(target.x+=target.width,target.width=-target.width),void(target.height&lt;0&amp;&amp;(target.y+=target.height,target.height=-target.height))}lt.x=lb.x=source.x,lt.y=rt.y=source.y,rb.x=rt.x=source.x+source.width,rb.y=lb.y=source.y+source.height,lt.transform(m2),rt.transform(m2),rb.transform(m2),lb.transform(m2),target.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),target.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var maxX=mathMax$a(lt.x,rb.x,lb.x,rt.x),maxY=mathMax$a(lt.y,rb.y,lb.y,rt.y);target.width=maxX-target.x,target.height=maxY-target.y}else target!==source&amp;&amp;BoundingRect2.copy(target,source)},BoundingRect2}();function stopEvent(){stop(this.event)}var EmptyProxy=function(_super){function EmptyProxy2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.handler=null,_this}return __extends(EmptyProxy2,_super),EmptyProxy2.prototype.dispose=function(){},EmptyProxy2.prototype.setCursor=function(){},EmptyProxy2}(Eventful),HoveredResult=function(){return function HoveredResult2(x,y){this.x=x,this.y=y}}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(_super){function Handler2(storage2,painter,proxy,painterRoot,pointerSize){var _this=_super.call(this)||this;return _this._hovered=new HoveredResult(0,0),_this.storage=storage2,_this.painter=painter,_this.painterRoot=painterRoot,_this._pointerSize=pointerSize,proxy=proxy||new EmptyProxy,_this.proxy=null,_this.setHandlerProxy(proxy),_this._draggingMgr=new Draggable(_this),_this}return __extends(Handler2,_super),Handler2.prototype.setHandlerProxy=function(proxy){this.proxy&amp;&amp;this.proxy.dispose(),proxy&amp;&amp;(each$f(handlerNames,function(name){proxy.on&amp;&amp;proxy.on(name,this[name],this)},this),proxy.handler=this),this.proxy=proxy},Handler2.prototype.mousemove=function(event){var x=event.zrX,y=event.zrY,isOutside=isOutsideBoundary(this,x,y),lastHovered=this._hovered,lastHoveredTarget=lastHovered.target;lastHoveredTarget&amp;&amp;!lastHoveredTarget.__zr&amp;&amp;(lastHoveredTarget=(lastHovered=this.findHover(lastHovered.x,lastHovered.y)).target);var hovered=this._hovered=isOutside?new HoveredResult(x,y):this.findHover(x,y),hoveredTarget=hovered.target,proxy=this.proxy;proxy.setCursor&amp;&amp;proxy.setCursor(hoveredTarget?hoveredTarget.cursor:"default"),lastHoveredTarget&amp;&amp;hoveredTarget!==lastHoveredTarget&amp;&amp;this.dispatchToElement(lastHovered,"mouseout",event),this.dispatchToElement(hovered,"mousemove",event),hoveredTarget&amp;&amp;hoveredTarget!==lastHoveredTarget&amp;&amp;this.dispatchToElement(hovered,"mouseover",event)},Handler2.prototype.mouseout=function(event){var eventControl=event.zrEventControl;"only_globalout"!==eventControl&amp;&amp;this.dispatchToElement(this._hovered,"mouseout",event),"no_globalout"!==eventControl&amp;&amp;this.trigger("globalout",{type:"globalout",event:event})},Handler2.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},Handler2.prototype.dispatch=function(eventName,eventArgs){var handler=this[eventName];handler&amp;&amp;handler.call(this,eventArgs)},Handler2.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},Handler2.prototype.setCursorStyle=function(cursorStyle){var proxy=this.proxy;proxy.setCursor&amp;&amp;proxy.setCursor(cursorStyle)},Handler2.prototype.dispatchToElement=function(targetInfo,eventName,event){var el=(targetInfo=targetInfo||{}).target;if(!el||!el.silent){for(var eventKey="on"+eventName,eventPacket=function makeEventPacket(eveType,targetInfo,event){return{type:eveType,event:event,target:targetInfo.target,topTarget:targetInfo.topTarget,cancelBubble:!1,offsetX:event.zrX,offsetY:event.zrY,gestureEvent:event.gestureEvent,pinchX:event.pinchX,pinchY:event.pinchY,pinchScale:event.pinchScale,wheelDelta:event.zrDelta,zrByTouch:event.zrByTouch,which:event.which,stop:stopEvent}}(eventName,targetInfo,event);el&amp;&amp;(el[eventKey]&amp;&amp;(eventPacket.cancelBubble=!!el[eventKey].call(el,eventPacket)),el.trigger(eventName,eventPacket),el=el.__hostTarget?el.__hostTarget:el.parent,!eventPacket.cancelBubble););eventPacket.cancelBubble||(this.trigger(eventName,eventPacket),this.painter&amp;&amp;this.painter.eachOtherLayer&amp;&amp;this.painter.eachOtherLayer(function(layer){"function"==typeof layer[eventKey]&amp;&amp;layer[eventKey].call(layer,eventPacket),layer.trigger&amp;&amp;layer.trigger(eventName,eventPacket)}))}},Handler2.prototype.findHover=function(x,y,exclude){var list=this.storage.getDisplayList(),out2=new HoveredResult(x,y);if(setHoverTarget(list,out2,x,y,exclude),this._pointerSize&amp;&amp;!out2.target){for(var candidates=[],pointerSize=this._pointerSize,targetSizeHalf=pointerSize/2,pointerRect=new BoundingRect(x-targetSizeHalf,y-targetSizeHalf,pointerSize,pointerSize),i=list.length-1;i&gt;=0;i--){var el=list[i];el===exclude||el.ignore||el.ignoreCoarsePointer||el.parent&amp;&amp;el.parent.ignoreCoarsePointer||(tmpRect$1.copy(el.getBoundingRect()),el.transform&amp;&amp;tmpRect$1.applyTransform(el.transform),tmpRect$1.intersect(pointerRect)&amp;&amp;candidates.push(el))}if(candidates.length)for(var thetaStep=Math.PI/12,PI22=2*Math.PI,r=0;r&lt;targetSizeHalf;r+=4)for(var theta=0;theta&lt;PI22;theta+=thetaStep){if(setHoverTarget(candidates,out2,x+r*Math.cos(theta),y+r*Math.sin(theta),exclude),out2.target)return out2}}return out2},Handler2.prototype.processGesture=function(event,stage){this._gestureMgr||(this._gestureMgr=new GestureMgr);var gestureMgr=this._gestureMgr;"start"===stage&amp;&amp;gestureMgr.clear();var gestureInfo=gestureMgr.recognize(event,this.findHover(event.zrX,event.zrY,null).target,this.proxy.dom);if("end"===stage&amp;&amp;gestureMgr.clear(),gestureInfo){var type=gestureInfo.type;event.gestureEvent=type;var res=new HoveredResult;res.target=gestureInfo.target,this.dispatchToElement(res,type,gestureInfo.event)}},Handler2}(Eventful);function isHover(displayable,x,y){if(displayable[displayable.rectHover?"rectContain":"contain"](x,y)){for(var el=displayable,isSilent=void 0,ignoreClip=!1;el;){if(el.ignoreClip&amp;&amp;(ignoreClip=!0),!ignoreClip){var clipPath=el.getClipPath();if(clipPath&amp;&amp;!clipPath.contain(x,y))return!1}el.silent&amp;&amp;(isSilent=!0);var hostEl=el.__hostTarget;el=hostEl||el.parent}return!isSilent||"silent"}return!1}function setHoverTarget(list,out2,x,y,exclude){for(var i=list.length-1;i&gt;=0;i--){var el=list[i],hoverCheckResult=void 0;if(el!==exclude&amp;&amp;!el.ignore&amp;&amp;(hoverCheckResult=isHover(el,x,y))&amp;&amp;(!out2.topTarget&amp;&amp;(out2.topTarget=el),"silent"!==hoverCheckResult)){out2.target=el;break}}}function isOutsideBoundary(handlerInstance,x,y){var painter=handlerInstance.painter;return x&lt;0||x&gt;painter.getWidth()||y&lt;0||y&gt;painter.getHeight()}each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){Handler.prototype[name]=function(event){var hovered,hoveredTarget,x=event.zrX,y=event.zrY,isOutside=isOutsideBoundary(this,x,y);if("mouseup"===name&amp;&amp;isOutside||(hoveredTarget=(hovered=this.findHover(x,y)).target),"mousedown"===name)this._downEl=hoveredTarget,this._downPoint=[event.zrX,event.zrY],this._upEl=hoveredTarget;else if("mouseup"===name)this._upEl=hoveredTarget;else if("click"===name){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[event.zrX,event.zrY])&gt;4)return;this._downPoint=null}this.dispatchToElement(hovered,name,event)}});function makeAscendingRun(array,lo,hi,compare2){var runHi=lo+1;if(runHi===hi)return 1;if(compare2(array[runHi++],array[lo])&lt;0){for(;runHi&lt;hi&amp;&amp;compare2(array[runHi],array[runHi-1])&lt;0;)runHi++;!function reverseRun(array,lo,hi){hi--;for(;lo&lt;hi;){var t=array[lo];array[lo++]=array[hi],array[hi--]=t}}(array,lo,runHi)}else for(;runHi&lt;hi&amp;&amp;compare2(array[runHi],array[runHi-1])&gt;=0;)runHi++;return runHi-lo}function binaryInsertionSort(array,lo,hi,start2,compare2){for(start2===lo&amp;&amp;start2++;start2&lt;hi;start2++){for(var mid,pivot=array[start2],left=lo,right=start2;left&lt;right;)compare2(pivot,array[mid=left+right&gt;&gt;&gt;1])&lt;0?right=mid:left=mid+1;var n=start2-left;switch(n){case 3:array[left+3]=array[left+2];case 2:array[left+2]=array[left+1];case 1:array[left+1]=array[left];break;default:for(;n&gt;0;)array[left+n]=array[left+n-1],n--}array[left]=pivot}}function gallopLeft(value,array,start2,length2,hint,compare2){var lastOffset=0,maxOffset=0,offset=1;if(compare2(value,array[start2+hint])&gt;0){for(maxOffset=length2-hint;offset&lt;maxOffset&amp;&amp;compare2(value,array[start2+hint+offset])&gt;0;)lastOffset=offset,(offset=1+(offset&lt;&lt;1))&lt;=0&amp;&amp;(offset=maxOffset);offset&gt;maxOffset&amp;&amp;(offset=maxOffset),lastOffset+=hint,offset+=hint}else{for(maxOffset=hint+1;offset&lt;maxOffset&amp;&amp;compare2(value,array[start2+hint-offset])&lt;=0;)lastOffset=offset,(offset=1+(offset&lt;&lt;1))&lt;=0&amp;&amp;(offset=maxOffset);offset&gt;maxOffset&amp;&amp;(offset=maxOffset);var tmp=lastOffset;lastOffset=hint-offset,offset=hint-tmp}for(lastOffset++;lastOffset&lt;offset;){var m2=lastOffset+(offset-lastOffset&gt;&gt;&gt;1);compare2(value,array[start2+m2])&gt;0?lastOffset=m2+1:offset=m2}return offset}function gallopRight(value,array,start2,length2,hint,compare2){var lastOffset=0,maxOffset=0,offset=1;if(compare2(value,array[start2+hint])&lt;0){for(maxOffset=hint+1;offset&lt;maxOffset&amp;&amp;compare2(value,array[start2+hint-offset])&lt;0;)lastOffset=offset,(offset=1+(offset&lt;&lt;1))&lt;=0&amp;&amp;(offset=maxOffset);offset&gt;maxOffset&amp;&amp;(offset=maxOffset);var tmp=lastOffset;lastOffset=hint-offset,offset=hint-tmp}else{for(maxOffset=length2-hint;offset&lt;maxOffset&amp;&amp;compare2(value,array[start2+hint+offset])&gt;=0;)lastOffset=offset,(offset=1+(offset&lt;&lt;1))&lt;=0&amp;&amp;(offset=maxOffset);offset&gt;maxOffset&amp;&amp;(offset=maxOffset),lastOffset+=hint,offset+=hint}for(lastOffset++;lastOffset&lt;offset;){var m2=lastOffset+(offset-lastOffset&gt;&gt;&gt;1);compare2(value,array[start2+m2])&lt;0?offset=m2:lastOffset=m2+1}return offset}function TimSort(array,compare2){var runStart,runLength,minGallop=7,stackSize=0,tmp=[];function mergeAt(i){var start1=runStart[i],length1=runLength[i],start2=runStart[i+1],length2=runLength[i+1];runLength[i]=length1+length2,i===stackSize-3&amp;&amp;(runStart[i+1]=runStart[i+2],runLength[i+1]=runLength[i+2]),stackSize--;var k=gallopRight(array[start2],array,start1,length1,0,compare2);start1+=k,0!==(length1-=k)&amp;&amp;0!==(length2=gallopLeft(array[start1+length1-1],array,start2,length2,length2-1,compare2))&amp;&amp;(length1&lt;=length2?function mergeLow(start1,length1,start2,length2){var i=0;for(i=0;i&lt;length1;i++)tmp[i]=array[start1+i];var cursor1=0,cursor2=start2,dest=start1;if(array[dest++]=array[cursor2++],0===--length2){for(i=0;i&lt;length1;i++)array[dest+i]=tmp[cursor1+i];return}if(1===length1){for(i=0;i&lt;length2;i++)array[dest+i]=array[cursor2+i];return void(array[dest+length2]=tmp[cursor1])}var count1,count2,exit,_minGallop=minGallop;for(;;){count1=0,count2=0,exit=!1;do{if(compare2(array[cursor2],tmp[cursor1])&lt;0){if(array[dest++]=array[cursor2++],count2++,count1=0,0===--length2){exit=!0;break}}else if(array[dest++]=tmp[cursor1++],count1++,count2=0,1===--length1){exit=!0;break}}while((count1|count2)&lt;_minGallop);if(exit)break;do{if(0!==(count1=gallopRight(array[cursor2],tmp,cursor1,length1,0,compare2))){for(i=0;i&lt;count1;i++)array[dest+i]=tmp[cursor1+i];if(dest+=count1,cursor1+=count1,(length1-=count1)&lt;=1){exit=!0;break}}if(array[dest++]=array[cursor2++],0===--length2){exit=!0;break}if(0!==(count2=gallopLeft(tmp[cursor1],array,cursor2,length2,0,compare2))){for(i=0;i&lt;count2;i++)array[dest+i]=array[cursor2+i];if(dest+=count2,cursor2+=count2,0===(length2-=count2)){exit=!0;break}}if(array[dest++]=tmp[cursor1++],1===--length1){exit=!0;break}_minGallop--}while(count1&gt;=7||count2&gt;=7);if(exit)break;_minGallop&lt;0&amp;&amp;(_minGallop=0),_minGallop+=2}if((minGallop=_minGallop)&lt;1&amp;&amp;(minGallop=1),1===length1){for(i=0;i&lt;length2;i++)array[dest+i]=array[cursor2+i];array[dest+length2]=tmp[cursor1]}else{if(0===length1)throw new Error;for(i=0;i&lt;length1;i++)array[dest+i]=tmp[cursor1+i]}}(start1,length1,start2,length2):function mergeHigh(start1,length1,start2,length2){var i=0;for(i=0;i&lt;length2;i++)tmp[i]=array[start2+i];var cursor1=start1+length1-1,cursor2=length2-1,dest=start2+length2-1,customCursor=0,customDest=0;if(array[dest--]=array[cursor1--],0===--length1){for(customCursor=dest-(length2-1),i=0;i&lt;length2;i++)array[customCursor+i]=tmp[i];return}if(1===length2){for(customDest=(dest-=length1)+1,customCursor=(cursor1-=length1)+1,i=length1-1;i&gt;=0;i--)array[customDest+i]=array[customCursor+i];return void(array[dest]=tmp[cursor2])}var _minGallop=minGallop;for(;;){var count1=0,count2=0,exit=!1;do{if(compare2(tmp[cursor2],array[cursor1])&lt;0){if(array[dest--]=array[cursor1--],count1++,count2=0,0===--length1){exit=!0;break}}else if(array[dest--]=tmp[cursor2--],count2++,count1=0,1===--length2){exit=!0;break}}while((count1|count2)&lt;_minGallop);if(exit)break;do{if(0!==(count1=length1-gallopRight(tmp[cursor2],array,start1,length1,length1-1,compare2))){for(length1-=count1,customDest=(dest-=count1)+1,customCursor=(cursor1-=count1)+1,i=count1-1;i&gt;=0;i--)array[customDest+i]=array[customCursor+i];if(0===length1){exit=!0;break}}if(array[dest--]=tmp[cursor2--],1===--length2){exit=!0;break}if(0!==(count2=length2-gallopLeft(array[cursor1],tmp,0,length2,length2-1,compare2))){for(length2-=count2,customDest=(dest-=count2)+1,customCursor=(cursor2-=count2)+1,i=0;i&lt;count2;i++)array[customDest+i]=tmp[customCursor+i];if(length2&lt;=1){exit=!0;break}}if(array[dest--]=array[cursor1--],0===--length1){exit=!0;break}_minGallop--}while(count1&gt;=7||count2&gt;=7);if(exit)break;_minGallop&lt;0&amp;&amp;(_minGallop=0),_minGallop+=2}(minGallop=_minGallop)&lt;1&amp;&amp;(minGallop=1);if(1===length2){for(customDest=(dest-=length1)+1,customCursor=(cursor1-=length1)+1,i=length1-1;i&gt;=0;i--)array[customDest+i]=array[customCursor+i];array[dest]=tmp[cursor2]}else{if(0===length2)throw new Error;for(customCursor=dest-(length2-1),i=0;i&lt;length2;i++)array[customCursor+i]=tmp[i]}}(start1,length1,start2,length2))}return runStart=[],runLength=[],{mergeRuns:function mergeRuns(){for(;stackSize&gt;1;){var n=stackSize-2;if(n&gt;=1&amp;&amp;runLength[n-1]&lt;=runLength[n]+runLength[n+1]||n&gt;=2&amp;&amp;runLength[n-2]&lt;=runLength[n]+runLength[n-1])runLength[n-1]&lt;runLength[n+1]&amp;&amp;n--;else if(runLength[n]&gt;runLength[n+1])break;mergeAt(n)}},forceMergeRuns:function forceMergeRuns(){for(;stackSize&gt;1;){var n=stackSize-2;n&gt;0&amp;&amp;runLength[n-1]&lt;runLength[n+1]&amp;&amp;n--,mergeAt(n)}},pushRun:function pushRun(_runStart,_runLength){runStart[stackSize]=_runStart,runLength[stackSize]=_runLength,stackSize+=1}}}function sort$2(array,compare2,lo,hi){lo||(lo=0),hi||(hi=array.length);var remaining=hi-lo;if(!(remaining&lt;2)){var runLength=0;if(remaining&lt;32)binaryInsertionSort(array,lo,hi,lo+(runLength=makeAscendingRun(array,lo,hi,compare2)),compare2);else{var ts=TimSort(array,compare2),minRun=function minRunLength(n){for(var r=0;n&gt;=32;)r|=1&amp;n,n&gt;&gt;=1;return n+r}(remaining);do{if((runLength=makeAscendingRun(array,lo,hi,compare2))&lt;minRun){var force=remaining;force&gt;minRun&amp;&amp;(force=minRun),binaryInsertionSort(array,lo,lo+force,lo+runLength,compare2),runLength=force}ts.pushRun(lo,runLength),ts.mergeRuns(),remaining-=runLength,lo+=runLength}while(0!==remaining);ts.forceMergeRuns()}}}var invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(a,b){return a.zlevel===b.zlevel?a.z===b.z?a.z2-b.z2:a.z-b.z:a.zlevel-b.zlevel}var requestAnimationFrame,Storage=function(){function Storage2(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return Storage2.prototype.traverse=function(cb,context){for(var i=0;i&lt;this._roots.length;i++)this._roots[i].traverse(cb,context)},Storage2.prototype.getDisplayList=function(update,includeIgnore){includeIgnore=includeIgnore||!1;var displayList=this._displayList;return!update&amp;&amp;displayList.length||this.updateDisplayList(includeIgnore),displayList},Storage2.prototype.updateDisplayList=function(includeIgnore){this._displayListLen=0;for(var roots2=this._roots,displayList=this._displayList,i=0,len2=roots2.length;i&lt;len2;i++)this._updateAndAddDisplayable(roots2[i],null,includeIgnore);displayList.length=this._displayListLen,sort$2(displayList,shapeCompareFunc)},Storage2.prototype._updateAndAddDisplayable=function(el,clipPaths,includeIgnore){if(!el.ignore||includeIgnore){el.beforeUpdate(),el.update(),el.afterUpdate();var userSetClipPath=el.getClipPath();if(el.ignoreClip)clipPaths=null;else if(userSetClipPath){clipPaths=clipPaths?clipPaths.slice():[];for(var currentClipPath=userSetClipPath,parentClipPath=el;currentClipPath;)currentClipPath.parent=parentClipPath,currentClipPath.updateTransform(),clipPaths.push(currentClipPath),parentClipPath=currentClipPath,currentClipPath=currentClipPath.getClipPath()}if(el.childrenRef){for(var children=el.childrenRef(),i=0;i&lt;children.length;i++){var child=children[i];el.__dirty&amp;&amp;(child.__dirty|=1),this._updateAndAddDisplayable(child,clipPaths,includeIgnore)}el.__dirty=0}else{var disp=el;clipPaths&amp;&amp;clipPaths.length?disp.__clipPaths=clipPaths:disp.__clipPaths&amp;&amp;disp.__clipPaths.length&gt;0&amp;&amp;(disp.__clipPaths=[]),isNaN(disp.z)&amp;&amp;(logInvalidZError(),disp.z=0),isNaN(disp.z2)&amp;&amp;(logInvalidZError(),disp.z2=0),isNaN(disp.zlevel)&amp;&amp;(logInvalidZError(),disp.zlevel=0),this._displayList[this._displayListLen++]=disp}var decalEl=el.getDecalElement&amp;&amp;el.getDecalElement();decalEl&amp;&amp;this._updateAndAddDisplayable(decalEl,clipPaths,includeIgnore);var textGuide=el.getTextGuideLine();textGuide&amp;&amp;this._updateAndAddDisplayable(textGuide,clipPaths,includeIgnore);var textEl=el.getTextContent();textEl&amp;&amp;this._updateAndAddDisplayable(textEl,clipPaths,includeIgnore)}},Storage2.prototype.addRoot=function(el){el.__zr&amp;&amp;el.__zr.storage===this||this._roots.push(el)},Storage2.prototype.delRoot=function(el){if(el instanceof Array)for(var i=0,l=el.length;i&lt;l;i++)this.delRoot(el[i]);else{var idx=indexOf(this._roots,el);idx&gt;=0&amp;&amp;this._roots.splice(idx,1)}},Storage2.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},Storage2.prototype.getRoots=function(){return this._roots},Storage2.prototype.dispose=function(){this._displayList=null,this._roots=null},Storage2}();requestAnimationFrame=env.hasGlobalWindow&amp;&amp;(window.requestAnimationFrame&amp;&amp;window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&amp;&amp;window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(func){return setTimeout(func,16)};var easingFuncs={linear:function(k){return k},quadraticIn:function(k){return k*k},quadraticOut:function(k){return k*(2-k)},quadraticInOut:function(k){return(k*=2)&lt;1?.5*k*k:-.5*(--k*(k-2)-1)},cubicIn:function(k){return k*k*k},cubicOut:function(k){return--k*k*k+1},cubicInOut:function(k){return(k*=2)&lt;1?.5*k*k*k:.5*((k-=2)*k*k+2)},quarticIn:function(k){return k*k*k*k},quarticOut:function(k){return 1- --k*k*k*k},quarticInOut:function(k){return(k*=2)&lt;1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)},quinticIn:function(k){return k*k*k*k*k},quinticOut:function(k){return--k*k*k*k*k+1},quinticInOut:function(k){return(k*=2)&lt;1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2)},sinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},sinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},sinusoidalInOut:function(k){return.5*(1-Math.cos(Math.PI*k))},exponentialIn:function(k){return 0===k?0:Math.pow(1024,k-1)},exponentialOut:function(k){return 1===k?1:1-Math.pow(2,-10*k)},exponentialInOut:function(k){return 0===k?0:1===k?1:(k*=2)&lt;1?.5*Math.pow(1024,k-1):.5*(2-Math.pow(2,-10*(k-1)))},circularIn:function(k){return 1-Math.sqrt(1-k*k)},circularOut:function(k){return Math.sqrt(1- --k*k)},circularInOut:function(k){return(k*=2)&lt;1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1)},elasticIn:function(k){var s,a=.1;return 0===k?0:1===k?1:(!a||a&lt;1?(a=1,s=.1):s=.4*Math.asin(1/a)/(2*Math.PI),-a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/.4))},elasticOut:function(k){var s,a=.1;return 0===k?0:1===k?1:(!a||a&lt;1?(a=1,s=.1):s=.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/.4)+1)},elasticInOut:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a&lt;1?(a=1,s=.1):s=p*Math.asin(1/a)/(2*Math.PI),(k*=2)&lt;1?a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*-.5:a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*.5+1)},backIn:function(k){var s=1.70158;return k*k*((s+1)*k-s)},backOut:function(k){var s=1.70158;return--k*k*((s+1)*k+s)+1},backInOut:function(k){var s=2.5949095;return(k*=2)&lt;1?k*k*((s+1)*k-s)*.5:.5*((k-=2)*k*((s+1)*k+s)+2)},bounceIn:function(k){return 1-easingFuncs.bounceOut(1-k)},bounceOut:function(k){return k&lt;1/2.75?7.5625*k*k:k&lt;2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k&lt;2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375},bounceInOut:function(k){return k&lt;.5?.5*easingFuncs.bounceIn(2*k):.5*easingFuncs.bounceOut(2*k-1)+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(val){return val&gt;-1e-8&amp;&amp;val&lt;1e-8}function isNotAroundZero$1(val){return val&gt;1e-8||val&lt;-1e-8}function cubicAt(p0,p1,p2,p3,t){var onet=1-t;return onet*onet*(onet*p0+3*t*p1)+t*t*(t*p3+3*onet*p2)}function cubicDerivativeAt(p0,p1,p2,p3,t){var onet=1-t;return 3*(((p1-p0)*onet+2*(p2-p1)*t)*onet+(p3-p2)*t*t)}function cubicRootAt(p0,p1,p2,p3,val,roots2){var a=p3+3*(p1-p2)-p0,b=3*(p2-2*p1+p0),c=3*(p1-p0),d=p0-val,A=b*b-3*a*c,B=b*c-9*a*d,C=c*c-3*b*d,n=0;if(isAroundZero$1(A)&amp;&amp;isAroundZero$1(B)){if(isAroundZero$1(b))roots2[0]=0;else(t1=-c/b)&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(roots2[n++]=t1)}else{var disc=B*B-4*A*C;if(isAroundZero$1(disc)){var K=B/A,t2=-K/2;(t1=-b/a+K)&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(roots2[n++]=t1),t2&gt;=0&amp;&amp;t2&lt;=1&amp;&amp;(roots2[n++]=t2)}else if(disc&gt;0){var discSqrt=mathSqrt$3(disc),Y1=A*b+1.5*a*(-B+discSqrt),Y2=A*b+1.5*a*(-B-discSqrt);(t1=(-b-((Y1=Y1&lt;0?-mathPow$2(-Y1,ONE_THIRD):mathPow$2(Y1,ONE_THIRD))+(Y2=Y2&lt;0?-mathPow$2(-Y2,ONE_THIRD):mathPow$2(Y2,ONE_THIRD))))/(3*a))&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(roots2[n++]=t1)}else{var T=(2*A*b-3*a*B)/(2*mathSqrt$3(A*A*A)),theta=Math.acos(T)/3,ASqrt=mathSqrt$3(A),tmp=Math.cos(theta),t1=(-b-2*ASqrt*tmp)/(3*a),t3=(t2=(-b+ASqrt*(tmp+THREE_SQRT*Math.sin(theta)))/(3*a),(-b+ASqrt*(tmp-THREE_SQRT*Math.sin(theta)))/(3*a));t1&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(roots2[n++]=t1),t2&gt;=0&amp;&amp;t2&lt;=1&amp;&amp;(roots2[n++]=t2),t3&gt;=0&amp;&amp;t3&lt;=1&amp;&amp;(roots2[n++]=t3)}}return n}function cubicExtrema(p0,p1,p2,p3,extrema2){var b=6*p2-12*p1+6*p0,a=9*p1+3*p3-3*p0-9*p2,c=3*p1-3*p0,n=0;if(isAroundZero$1(a)){if(isNotAroundZero$1(b))(t1=-c/b)&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(extrema2[n++]=t1)}else{var disc=b*b-4*a*c;if(isAroundZero$1(disc))extrema2[0]=-b/(2*a);else if(disc&gt;0){var t1,discSqrt=mathSqrt$3(disc),t2=(-b-discSqrt)/(2*a);(t1=(-b+discSqrt)/(2*a))&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(extrema2[n++]=t1),t2&gt;=0&amp;&amp;t2&lt;=1&amp;&amp;(extrema2[n++]=t2)}}return n}function cubicSubdivide(p0,p1,p2,p3,t,out2){var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p23=(p3-p2)*t+p2,p012=(p12-p01)*t+p01,p123=(p23-p12)*t+p12,p0123=(p123-p012)*t+p012;out2[0]=p0,out2[1]=p01,out2[2]=p012,out2[3]=p0123,out2[4]=p0123,out2[5]=p123,out2[6]=p23,out2[7]=p3}function cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,out2){var t,prev,next,d1,d2,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t&lt;1;_t+=.05)_v1[0]=cubicAt(x0,x1,x2,x3,_t),_v1[1]=cubicAt(y0,y1,y2,y3,_t),(d1=distSquare(_v0,_v1))&lt;d&amp;&amp;(t=_t,d=d1);d=1/0;for(var i=0;i&lt;32&amp;&amp;!(interval&lt;1e-4);i++)prev=t-interval,next=t+interval,_v1[0]=cubicAt(x0,x1,x2,x3,prev),_v1[1]=cubicAt(y0,y1,y2,y3,prev),d1=distSquare(_v1,_v0),prev&gt;=0&amp;&amp;d1&lt;d?(t=prev,d=d1):(_v2[0]=cubicAt(x0,x1,x2,x3,next),_v2[1]=cubicAt(y0,y1,y2,y3,next),d2=distSquare(_v2,_v0),next&lt;=1&amp;&amp;d2&lt;d?(t=next,d=d2):interval*=.5);return out2&amp;&amp;(out2[0]=cubicAt(x0,x1,x2,x3,t),out2[1]=cubicAt(y0,y1,y2,y3,t)),mathSqrt$3(d)}function cubicLength(x0,y0,x1,y1,x2,y2,x3,y3,iteration){for(var px=x0,py=y0,d=0,step=1/iteration,i=1;i&lt;=iteration;i++){var t=i*step,x=cubicAt(x0,x1,x2,x3,t),y=cubicAt(y0,y1,y2,y3,t),dx=x-px,dy=y-py;d+=Math.sqrt(dx*dx+dy*dy),px=x,py=y}return d}function quadraticAt$1(p0,p1,p2,t){var onet=1-t;return onet*(onet*p0+2*t*p1)+t*t*p2}function quadraticDerivativeAt(p0,p1,p2,t){return 2*((1-t)*(p1-p0)+t*(p2-p1))}function quadraticExtremum(p0,p1,p2){var divider=p0+p2-2*p1;return 0===divider?.5:(p0-p1)/divider}function quadraticSubdivide(p0,p1,p2,t,out2){var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p012=(p12-p01)*t+p01;out2[0]=p0,out2[1]=p01,out2[2]=p012,out2[3]=p012,out2[4]=p12,out2[5]=p2}function quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,out2){var t,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t&lt;1;_t+=.05){_v1[0]=quadraticAt$1(x0,x1,x2,_t),_v1[1]=quadraticAt$1(y0,y1,y2,_t),(d1=distSquare(_v0,_v1))&lt;d&amp;&amp;(t=_t,d=d1)}d=1/0;for(var i=0;i&lt;32&amp;&amp;!(interval&lt;1e-4);i++){var prev=t-interval,next=t+interval;_v1[0]=quadraticAt$1(x0,x1,x2,prev),_v1[1]=quadraticAt$1(y0,y1,y2,prev);var d1=distSquare(_v1,_v0);if(prev&gt;=0&amp;&amp;d1&lt;d)t=prev,d=d1;else{_v2[0]=quadraticAt$1(x0,x1,x2,next),_v2[1]=quadraticAt$1(y0,y1,y2,next);var d2=distSquare(_v2,_v0);next&lt;=1&amp;&amp;d2&lt;d?(t=next,d=d2):interval*=.5}}return out2&amp;&amp;(out2[0]=quadraticAt$1(x0,x1,x2,t),out2[1]=quadraticAt$1(y0,y1,y2,t)),mathSqrt$3(d)}function quadraticLength(x0,y0,x1,y1,x2,y2,iteration){for(var px=x0,py=y0,d=0,step=1/iteration,i=1;i&lt;=iteration;i++){var t=i*step,x=quadraticAt$1(x0,x1,x2,t),y=quadraticAt$1(y0,y1,y2,t),dx=x-px,dy=y-py;d+=Math.sqrt(dx*dx+dy*dy),px=x,py=y}return d}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(cubicEasingStr){var cubic=cubicEasingStr&amp;&amp;regexp.exec(cubicEasingStr);if(cubic){var points2=cubic[1].split(","),a_1=+trim$1(points2[0]),b_1=+trim$1(points2[1]),c_1=+trim$1(points2[2]),d_1=+trim$1(points2[3]);if(isNaN(a_1+b_1+c_1+d_1))return;var roots_1=[];return function(p){return p&lt;=0?0:p&gt;=1?1:cubicRootAt(0,a_1,c_1,1,p,roots_1)&amp;&amp;cubicAt(0,b_1,d_1,1,roots_1[0])}}}var Clip=function(){function Clip2(opts){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=opts.life||1e3,this._delay=opts.delay||0,this.loop=opts.loop||!1,this.onframe=opts.onframe||noop,this.ondestroy=opts.ondestroy||noop,this.onrestart=opts.onrestart||noop,opts.easing&amp;&amp;this.setEasing(opts.easing)}return Clip2.prototype.step=function(globalTime,deltaTime){if(this._inited||(this._startTime=globalTime+this._delay,this._inited=!0),!this._paused){var life=this._life,elapsedTime=globalTime-this._startTime-this._pausedTime,percent=elapsedTime/life;percent&lt;0&amp;&amp;(percent=0),percent=Math.min(percent,1);var easingFunc=this.easingFunc,schedule=easingFunc?easingFunc(percent):percent;if(this.onframe(schedule),1===percent){if(!this.loop)return!0;var remainder=elapsedTime%life;this._startTime=globalTime-remainder,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=deltaTime},Clip2.prototype.pause=function(){this._paused=!0},Clip2.prototype.resume=function(){this._paused=!1},Clip2.prototype.setEasing=function(easing){this.easing=easing,this.easingFunc=isFunction(easing)?easing:easingFuncs[easing]||createCubicEasingFunc(easing)},Clip2}(),Entry=function(){return function Entry2(val){this.value=val}}(),LinkedList=function(){function LinkedList2(){this._len=0}return LinkedList2.prototype.insert=function(val){var entry=new Entry(val);return this.insertEntry(entry),entry},LinkedList2.prototype.insertEntry=function(entry){this.head?(this.tail.next=entry,entry.prev=this.tail,entry.next=null,this.tail=entry):this.head=this.tail=entry,this._len++},LinkedList2.prototype.remove=function(entry){var prev=entry.prev,next=entry.next;prev?prev.next=next:this.head=next,next?next.prev=prev:this.tail=prev,entry.next=entry.prev=null,this._len--},LinkedList2.prototype.len=function(){return this._len},LinkedList2.prototype.clear=function(){this.head=this.tail=null,this._len=0},LinkedList2}(),LRU=function(){function LRU2(maxSize){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=maxSize}return LRU2.prototype.put=function(key,value){var list=this._list,map2=this._map,removed=null;if(null==map2[key]){var len2=list.len(),entry=this._lastRemovedEntry;if(len2&gt;=this._maxSize&amp;&amp;len2&gt;0){var leastUsedEntry=list.head;list.remove(leastUsedEntry),delete map2[leastUsedEntry.key],removed=leastUsedEntry.value,this._lastRemovedEntry=leastUsedEntry}entry?entry.value=value:entry=new Entry(value),entry.key=key,list.insertEntry(entry),map2[key]=entry}return removed},LRU2.prototype.get=function(key){var entry=this._map[key],list=this._list;if(null!=entry)return entry!==list.tail&amp;&amp;(list.remove(entry),list.insertEntry(entry)),entry.value},LRU2.prototype.clear=function(){this._list.clear(),this._map={}},LRU2.prototype.len=function(){return this._list.len()},LRU2}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(i){return(i=Math.round(i))&lt;0?0:i&gt;255?255:i}function clampCssFloat(f){return f&lt;0?0:f&gt;1?1:f}function parseCssInt(val){var str=val;return str.length&amp;&amp;"%"===str.charAt(str.length-1)?clampCssByte(parseFloat(str)/100*255):clampCssByte(parseInt(str,10))}function parseCssFloat(val){var str=val;return str.length&amp;&amp;"%"===str.charAt(str.length-1)?clampCssFloat(parseFloat(str)/100):clampCssFloat(parseFloat(str))}function cssHueToRgb(m1,m2,h){return h&lt;0?h+=1:h&gt;1&amp;&amp;(h-=1),6*h&lt;1?m1+(m2-m1)*h*6:2*h&lt;1?m2:3*h&lt;2?m1+(m2-m1)*(2/3-h)*6:m1}function lerpNumber(a,b,p){return a+(b-a)*p}function setRgba(out2,r,g,b,a){return out2[0]=r,out2[1]=g,out2[2]=b,out2[3]=a,out2}function copyRgba(out2,a){return out2[0]=a[0],out2[1]=a[1],out2[2]=a[2],out2[3]=a[3],out2}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(colorStr,rgbaArr){lastRemovedArr&amp;&amp;copyRgba(lastRemovedArr,rgbaArr),lastRemovedArr=colorCache.put(colorStr,lastRemovedArr||rgbaArr.slice())}function parse(colorStr,rgbaArr){if(colorStr){rgbaArr=rgbaArr||[];var cached=colorCache.get(colorStr);if(cached)return copyRgba(rgbaArr,cached);var str=(colorStr+="").replace(/ /g,"").toLowerCase();if(str in kCSSColorTable)return copyRgba(rgbaArr,kCSSColorTable[str]),putToCache(colorStr,rgbaArr),rgbaArr;var iv,strLen=str.length;if("#"===str.charAt(0))return 4===strLen||5===strLen?(iv=parseInt(str.slice(1,4),16))&gt;=0&amp;&amp;iv&lt;=4095?(setRgba(rgbaArr,(3840&amp;iv)&gt;&gt;4|(3840&amp;iv)&gt;&gt;8,240&amp;iv|(240&amp;iv)&gt;&gt;4,15&amp;iv|(15&amp;iv)&lt;&lt;4,5===strLen?parseInt(str.slice(4),16)/15:1),putToCache(colorStr,rgbaArr),rgbaArr):void setRgba(rgbaArr,0,0,0,1):7===strLen||9===strLen?(iv=parseInt(str.slice(1,7),16))&gt;=0&amp;&amp;iv&lt;=16777215?(setRgba(rgbaArr,(16711680&amp;iv)&gt;&gt;16,(65280&amp;iv)&gt;&gt;8,255&amp;iv,9===strLen?parseInt(str.slice(7),16)/255:1),putToCache(colorStr,rgbaArr),rgbaArr):void setRgba(rgbaArr,0,0,0,1):void 0;var op=str.indexOf("("),ep=str.indexOf(")");if(-1!==op&amp;&amp;ep+1===strLen){var fname=str.substr(0,op),params=str.substr(op+1,ep-(op+1)).split(","),alpha=1;switch(fname){case"rgba":if(4!==params.length)return 3===params.length?setRgba(rgbaArr,+params[0],+params[1],+params[2],1):setRgba(rgbaArr,0,0,0,1);alpha=parseCssFloat(params.pop());case"rgb":return params.length&gt;=3?(setRgba(rgbaArr,parseCssInt(params[0]),parseCssInt(params[1]),parseCssInt(params[2]),3===params.length?alpha:parseCssFloat(params[3])),putToCache(colorStr,rgbaArr),rgbaArr):void setRgba(rgbaArr,0,0,0,1);case"hsla":return 4!==params.length?void setRgba(rgbaArr,0,0,0,1):(params[3]=parseCssFloat(params[3]),hsla2rgba(params,rgbaArr),putToCache(colorStr,rgbaArr),rgbaArr);case"hsl":return 3!==params.length?void setRgba(rgbaArr,0,0,0,1):(hsla2rgba(params,rgbaArr),putToCache(colorStr,rgbaArr),rgbaArr);default:return}}setRgba(rgbaArr,0,0,0,1)}}function hsla2rgba(hsla,rgba){var h=(parseFloat(hsla[0])%360+360)%360/360,s=parseCssFloat(hsla[1]),l=parseCssFloat(hsla[2]),m2=l&lt;=.5?l*(s+1):l+s-l*s,m1=2*l-m2;return setRgba(rgba=rgba||[],clampCssByte(255*cssHueToRgb(m1,m2,h+1/3)),clampCssByte(255*cssHueToRgb(m1,m2,h)),clampCssByte(255*cssHueToRgb(m1,m2,h-1/3)),1),4===hsla.length&amp;&amp;(rgba[3]=hsla[3]),rgba}function lift(color2,level){var colorArr=parse(color2);if(colorArr){for(var i=0;i&lt;3;i++)colorArr[i]=level&lt;0?colorArr[i]*(1-level)|0:(255-colorArr[i])*level+colorArr[i]|0,colorArr[i]&gt;255?colorArr[i]=255:colorArr[i]&lt;0&amp;&amp;(colorArr[i]=0);return stringify(colorArr,4===colorArr.length?"rgba":"rgb")}}function fastLerp(normalizedValue,colors,out2){if(colors&amp;&amp;colors.length&amp;&amp;normalizedValue&gt;=0&amp;&amp;normalizedValue&lt;=1){out2=out2||[];var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=colors[leftIndex],rightColor=colors[rightIndex],dv=value-leftIndex;return out2[0]=clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv)),out2[1]=clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv)),out2[2]=clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv)),out2[3]=clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv)),out2}}var fastMapToColor=fastLerp;function lerp(normalizedValue,colors,fullOutput){if(colors&amp;&amp;colors.length&amp;&amp;normalizedValue&gt;=0&amp;&amp;normalizedValue&lt;=1){var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=parse(colors[leftIndex]),rightColor=parse(colors[rightIndex]),dv=value-leftIndex,color2=stringify([clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv)),clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv)),clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv)),clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv))],"rgba");return fullOutput?{color:color2,leftIndex:leftIndex,rightIndex:rightIndex,value:value}:color2}}var mapToColor=lerp;function modifyHSL(color2,h,s,l){var colorArr=parse(color2);if(color2)return colorArr=function rgba2hsla(rgba){if(rgba){var H,S,R=rgba[0]/255,G=rgba[1]/255,B=rgba[2]/255,vMin=Math.min(R,G,B),vMax=Math.max(R,G,B),delta=vMax-vMin,L=(vMax+vMin)/2;if(0===delta)H=0,S=0;else{S=L&lt;.5?delta/(vMax+vMin):delta/(2-vMax-vMin);var deltaR=((vMax-R)/6+delta/2)/delta,deltaG=((vMax-G)/6+delta/2)/delta,deltaB=((vMax-B)/6+delta/2)/delta;R===vMax?H=deltaB-deltaG:G===vMax?H=1/3+deltaR-deltaB:B===vMax&amp;&amp;(H=2/3+deltaG-deltaR),H&lt;0&amp;&amp;(H+=1),H&gt;1&amp;&amp;(H-=1)}var hsla=[360*H,S,L];return null!=rgba[3]&amp;&amp;hsla.push(rgba[3]),hsla}}(colorArr),null!=h&amp;&amp;(colorArr[0]=function clampCssAngle(i){return(i=Math.round(i))&lt;0?0:i&gt;360?360:i}(h)),null!=s&amp;&amp;(colorArr[1]=parseCssFloat(s)),null!=l&amp;&amp;(colorArr[2]=parseCssFloat(l)),stringify(hsla2rgba(colorArr),"rgba")}function modifyAlpha(color2,alpha){var colorArr=parse(color2);if(colorArr&amp;&amp;null!=alpha)return colorArr[3]=clampCssFloat(alpha),stringify(colorArr,"rgba")}function stringify(arrColor,type){if(arrColor&amp;&amp;arrColor.length){var colorStr=arrColor[0]+","+arrColor[1]+","+arrColor[2];return"rgba"!==type&amp;&amp;"hsva"!==type&amp;&amp;"hsla"!==type||(colorStr+=","+arrColor[3]),type+"("+colorStr+")"}}function lum(color2,backgroundLum){var arr=parse(color2);return arr?(.299*arr[0]+.587*arr[1]+.114*arr[2])*arr[3]/255+(1-arr[3])*backgroundLum:0}var liftedColorCache=new LRU(100);function liftColor(color2){if(isString(color2)){var liftedColor=liftedColorCache.get(color2);return liftedColor||(liftedColor=lift(color2,-.1),liftedColorCache.put(color2,liftedColor)),liftedColor}if(isGradientObject(color2)){var ret=extend({},color2);return ret.colorStops=map$1(color2.colorStops,function(stop2){return{offset:stop2.offset,color:lift(stop2.color,-.1)}}),ret}return color2}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp:fastLerp,fastMapToColor:fastMapToColor,lerp:lerp,lift:lift,liftColor:liftColor,lum:lum,mapToColor:mapToColor,modifyAlpha:modifyAlpha,modifyHSL:modifyHSL,parse:parse,random:function random(){return stringify([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")},stringify:stringify,toHex:function toHex(color2){var colorArr=parse(color2);if(colorArr)return((1&lt;&lt;24)+(colorArr[0]&lt;&lt;16)+(colorArr[1]&lt;&lt;8)+ +colorArr[2]).toString(16).slice(1)}},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(color2){var opacity;if(color2&amp;&amp;"transparent"!==color2){if("string"==typeof color2&amp;&amp;color2.indexOf("rgba")&gt;-1){var arr=parse(color2);arr&amp;&amp;(color2="rgb("+arr[0]+","+arr[1]+","+arr[2]+")",opacity=arr[3])}}else color2="none";return{color:color2,opacity:null==opacity?1:opacity}}function isAroundZero(transform2){return transform2&lt;1e-4&amp;&amp;transform2&gt;-1e-4}function round3(transform2){return mathRound$1(1e3*transform2)/1e3}function round4(transform2){return mathRound$1(1e4*transform2)/1e4}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function isImagePattern(val){return val&amp;&amp;!!val.image}function isPattern(val){return isImagePattern(val)||function isSVGPattern(val){return val&amp;&amp;!!val.svgElement}(val)}function isLinearGradient(val){return"linear"===val.type}function isRadialGradient(val){return"radial"===val.type}function isGradient(val){return val&amp;&amp;("linear"===val.type||"radial"===val.type)}function getIdURL(id){return"url(#"+id+")"}function getPathPrecision(el){var scale2=el.getGlobalScale(),size=Math.max(scale2[0],scale2[1]);return Math.max(Math.ceil(Math.log(size)/Math.log(10)),1)}function getSRTTransformString(transform2){var x=transform2.x||0,y=transform2.y||0,rotation=(transform2.rotation||0)*RADIAN_TO_DEGREE,scaleX=retrieve2(transform2.scaleX,1),scaleY=retrieve2(transform2.scaleY,1),skewX=transform2.skewX||0,skewY=transform2.skewY||0,res=[];return(x||y)&amp;&amp;res.push("translate("+x+"px,"+y+"px)"),rotation&amp;&amp;res.push("rotate("+rotation+")"),1===scaleX&amp;&amp;1===scaleY||res.push("scale("+scaleX+","+scaleY+")"),(skewX||skewY)&amp;&amp;res.push("skew("+mathRound$1(skewX*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(skewY*RADIAN_TO_DEGREE)+"deg)"),res.join(" ")}var encodeBase64=env.hasGlobalWindow&amp;&amp;isFunction(window.btoa)?function(str){return window.btoa(unescape(encodeURIComponent(str)))}:"undefined"!=typeof Buffer?function(str){return Buffer.from(str).toString("base64")}:function(str){return null},arraySlice=Array.prototype.slice;function interpolateNumber$1(p0,p1,percent){return(p1-p0)*percent+p0}function interpolate1DArray(out2,p0,p1,percent){for(var len2=p0.length,i=0;i&lt;len2;i++)out2[i]=interpolateNumber$1(p0[i],p1[i],percent);return out2}function add1DArray(out2,p0,p1,sign){for(var len2=p0.length,i=0;i&lt;len2;i++)out2[i]=p0[i]+p1[i]*sign;return out2}function add2DArray(out2,p0,p1,sign){for(var len2=p0.length,len22=len2&amp;&amp;p0[0].length,i=0;i&lt;len2;i++){out2[i]||(out2[i]=[]);for(var j=0;j&lt;len22;j++)out2[i][j]=p0[i][j]+p1[i][j]*sign}return out2}function fillColorStops(val0,val1){for(var len0=val0.length,len1=val1.length,shorterArr=len0&gt;len1?val1:val0,shorterLen=Math.min(len0,len1),last=shorterArr[shorterLen-1]||{color:[0,0,0,0],offset:0},i=shorterLen;i&lt;Math.max(len0,len1);i++)shorterArr.push({offset:last.offset,color:last.color.slice()})}function fillArray(val0,val1,arrDim){var arr0=val0,arr1=val1;if(arr0.push&amp;&amp;arr1.push){var arr0Len=arr0.length,arr1Len=arr1.length;if(arr0Len!==arr1Len)if(arr0Len&gt;arr1Len)arr0.length=arr1Len;else for(var i=arr0Len;i&lt;arr1Len;i++)arr0.push(1===arrDim?arr1[i]:arraySlice.call(arr1[i]));var len2=arr0[0]&amp;&amp;arr0[0].length;for(i=0;i&lt;arr0.length;i++)if(1===arrDim)isNaN(arr0[i])&amp;&amp;(arr0[i]=arr1[i]);else for(var j=0;j&lt;len2;j++)isNaN(arr0[i][j])&amp;&amp;(arr0[i][j]=arr1[i][j])}}function cloneValue(value){if(isArrayLike(value)){var len2=value.length;if(isArrayLike(value[0])){for(var ret=[],i=0;i&lt;len2;i++)ret.push(arraySlice.call(value[i]));return ret}return arraySlice.call(value)}return value}function rgba2String(rgba){return rgba[0]=Math.floor(rgba[0])||0,rgba[1]=Math.floor(rgba[1])||0,rgba[2]=Math.floor(rgba[2])||0,rgba[3]=null==rgba[3]?1:rgba[3],"rgba("+rgba.join(",")+")"}function isGradientValueType(valType){return 4===valType||5===valType}function isArrayValueType(valType){return 1===valType||2===valType}var tmpRgba=[0,0,0,0],Track=function(){function Track2(propName){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=propName}return Track2.prototype.isFinished=function(){return this._finished},Track2.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&amp;&amp;this._additiveTrack.setFinished()},Track2.prototype.needsAnimate=function(){return this.keyframes.length&gt;=1},Track2.prototype.getAdditiveTrack=function(){return this._additiveTrack},Track2.prototype.addKeyframe=function(time2,rawValue,easing){this._needsSort=!0;var keyframes=this.keyframes,len2=keyframes.length,discrete=!1,valType=6,value=rawValue;if(isArrayLike(rawValue)){var arrayDim=function guessArrayDim(value){return isArrayLike(value&amp;&amp;value[0])?2:1}(rawValue);valType=arrayDim,(1===arrayDim&amp;&amp;!isNumber(rawValue[0])||2===arrayDim&amp;&amp;!isNumber(rawValue[0][0]))&amp;&amp;(discrete=!0)}else if(isNumber(rawValue)&amp;&amp;!eqNaN(rawValue))valType=0;else if(isString(rawValue))if(isNaN(+rawValue)){var colorArray=parse(rawValue);colorArray&amp;&amp;(value=colorArray,valType=3)}else valType=0;else if(isGradientObject(rawValue)){var parsedGradient=extend({},value);parsedGradient.colorStops=map$1(rawValue.colorStops,function(colorStop){return{offset:colorStop.offset,color:parse(colorStop.color)}}),isLinearGradient(rawValue)?valType=4:isRadialGradient(rawValue)&amp;&amp;(valType=5),value=parsedGradient}0===len2?this.valType=valType:valType===this.valType&amp;&amp;6!==valType||(discrete=!0),this.discrete=this.discrete||discrete;var kf={time:time2,value:value,rawValue:rawValue,percent:0};return easing&amp;&amp;(kf.easing=easing,kf.easingFunc=isFunction(easing)?easing:easingFuncs[easing]||createCubicEasingFunc(easing)),keyframes.push(kf),kf},Track2.prototype.prepare=function(maxTime,additiveTrack){var kfs=this.keyframes;this._needsSort&amp;&amp;kfs.sort(function(a,b){return a.time-b.time});for(var valType=this.valType,kfsLen=kfs.length,lastKf=kfs[kfsLen-1],isDiscrete=this.discrete,isArr=isArrayValueType(valType),isGradient2=isGradientValueType(valType),i=0;i&lt;kfsLen;i++){var kf=kfs[i],value=kf.value,lastValue=lastKf.value;kf.percent=kf.time/maxTime,isDiscrete||(isArr&amp;&amp;i!==kfsLen-1?fillArray(value,lastValue,valType):isGradient2&amp;&amp;fillColorStops(value.colorStops,lastValue.colorStops))}if(!isDiscrete&amp;&amp;5!==valType&amp;&amp;additiveTrack&amp;&amp;this.needsAnimate()&amp;&amp;additiveTrack.needsAnimate()&amp;&amp;valType===additiveTrack.valType&amp;&amp;!additiveTrack._finished){this._additiveTrack=additiveTrack;var startValue=kfs[0].value;for(i=0;i&lt;kfsLen;i++)0===valType?kfs[i].additiveValue=kfs[i].value-startValue:3===valType?kfs[i].additiveValue=add1DArray([],kfs[i].value,startValue,-1):isArrayValueType(valType)&amp;&amp;(kfs[i].additiveValue=1===valType?add1DArray([],kfs[i].value,startValue,-1):add2DArray([],kfs[i].value,startValue,-1))}},Track2.prototype.step=function(target,percent){if(!this._finished){this._additiveTrack&amp;&amp;this._additiveTrack._finished&amp;&amp;(this._additiveTrack=null);var frameIdx,frame,nextFrame,isAdditive=null!=this._additiveTrack,valueKey=isAdditive?"additiveValue":"value",valType=this.valType,keyframes=this.keyframes,kfsNum=keyframes.length,propName=this.propName,isValueColor=3===valType,lastFrame=this._lastFr,mathMin2=Math.min;if(1===kfsNum)frame=nextFrame=keyframes[0];else{if(percent&lt;0)frameIdx=0;else if(percent&lt;this._lastFrP){for(frameIdx=mathMin2(lastFrame+1,kfsNum-1);frameIdx&gt;=0&amp;&amp;!(keyframes[frameIdx].percent&lt;=percent);frameIdx--);frameIdx=mathMin2(frameIdx,kfsNum-2)}else{for(frameIdx=lastFrame;frameIdx&lt;kfsNum&amp;&amp;!(keyframes[frameIdx].percent&gt;percent);frameIdx++);frameIdx=mathMin2(frameIdx-1,kfsNum-2)}nextFrame=keyframes[frameIdx+1],frame=keyframes[frameIdx]}if(frame&amp;&amp;nextFrame){this._lastFr=frameIdx,this._lastFrP=percent;var interval=nextFrame.percent-frame.percent,w=0===interval?1:mathMin2((percent-frame.percent)/interval,1);nextFrame.easingFunc&amp;&amp;(w=nextFrame.easingFunc(w));var targetArr=isAdditive?this._additiveValue:isValueColor?tmpRgba:target[propName];if(!isArrayValueType(valType)&amp;&amp;!isValueColor||targetArr||(targetArr=this._additiveValue=[]),this.discrete)target[propName]=w&lt;1?frame.rawValue:nextFrame.rawValue;else if(isArrayValueType(valType))1===valType?interpolate1DArray(targetArr,frame[valueKey],nextFrame[valueKey],w):function interpolate2DArray(out2,p0,p1,percent){for(var len2=p0.length,len22=len2&amp;&amp;p0[0].length,i=0;i&lt;len2;i++){out2[i]||(out2[i]=[]);for(var j=0;j&lt;len22;j++)out2[i][j]=interpolateNumber$1(p0[i][j],p1[i][j],percent)}return out2}(targetArr,frame[valueKey],nextFrame[valueKey],w);else if(isGradientValueType(valType)){var val=frame[valueKey],nextVal_1=nextFrame[valueKey],isLinearGradient_1=4===valType;target[propName]={type:isLinearGradient_1?"linear":"radial",x:interpolateNumber$1(val.x,nextVal_1.x,w),y:interpolateNumber$1(val.y,nextVal_1.y,w),colorStops:map$1(val.colorStops,function(colorStop,idx){var nextColorStop=nextVal_1.colorStops[idx];return{offset:interpolateNumber$1(colorStop.offset,nextColorStop.offset,w),color:rgba2String(interpolate1DArray([],colorStop.color,nextColorStop.color,w))}}),global:nextVal_1.global},isLinearGradient_1?(target[propName].x2=interpolateNumber$1(val.x2,nextVal_1.x2,w),target[propName].y2=interpolateNumber$1(val.y2,nextVal_1.y2,w)):target[propName].r=interpolateNumber$1(val.r,nextVal_1.r,w)}else if(isValueColor)interpolate1DArray(targetArr,frame[valueKey],nextFrame[valueKey],w),isAdditive||(target[propName]=rgba2String(targetArr));else{var value=interpolateNumber$1(frame[valueKey],nextFrame[valueKey],w);isAdditive?this._additiveValue=value:target[propName]=value}isAdditive&amp;&amp;this._addToTarget(target)}}},Track2.prototype._addToTarget=function(target){var valType=this.valType,propName=this.propName,additiveValue=this._additiveValue;0===valType?target[propName]=target[propName]+additiveValue:3===valType?(parse(target[propName],tmpRgba),add1DArray(tmpRgba,tmpRgba,additiveValue,1),target[propName]=rgba2String(tmpRgba)):1===valType?add1DArray(target[propName],target[propName],additiveValue,1):2===valType&amp;&amp;add2DArray(target[propName],target[propName],additiveValue,1)},Track2}(),Animator=function(){function Animator2(target,loop,allowDiscreteAnimation,additiveTo){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=target,this._loop=loop,loop&amp;&amp;additiveTo?logError("Can' use additive animation on looped animation."):(this._additiveAnimators=additiveTo,this._allowDiscrete=allowDiscreteAnimation)}return Animator2.prototype.getMaxTime=function(){return this._maxTime},Animator2.prototype.getDelay=function(){return this._delay},Animator2.prototype.getLoop=function(){return this._loop},Animator2.prototype.getTarget=function(){return this._target},Animator2.prototype.changeTarget=function(target){this._target=target},Animator2.prototype.when=function(time2,props,easing){return this.whenWithKeys(time2,props,keys(props),easing)},Animator2.prototype.whenWithKeys=function(time2,props,propNames,easing){for(var tracks=this._tracks,i=0;i&lt;propNames.length;i++){var propName=propNames[i],track=tracks[propName];if(!track){track=tracks[propName]=new Track(propName);var initialValue=void 0,additiveTrack=this._getAdditiveTrack(propName);if(additiveTrack){var addtiveTrackKfs=additiveTrack.keyframes,lastFinalKf=addtiveTrackKfs[addtiveTrackKfs.length-1];initialValue=lastFinalKf&amp;&amp;lastFinalKf.value,3===additiveTrack.valType&amp;&amp;initialValue&amp;&amp;(initialValue=rgba2String(initialValue))}else initialValue=this._target[propName];if(null==initialValue)continue;time2&gt;0&amp;&amp;track.addKeyframe(0,cloneValue(initialValue),easing),this._trackKeys.push(propName)}track.addKeyframe(time2,cloneValue(props[propName]),easing)}return this._maxTime=Math.max(this._maxTime,time2),this},Animator2.prototype.pause=function(){this._clip.pause(),this._paused=!0},Animator2.prototype.resume=function(){this._clip.resume(),this._paused=!1},Animator2.prototype.isPaused=function(){return!!this._paused},Animator2.prototype.duration=function(duration){return this._maxTime=duration,this._force=!0,this},Animator2.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var doneList=this._doneCbs;if(doneList)for(var len2=doneList.length,i=0;i&lt;len2;i++)doneList[i].call(this)},Animator2.prototype._abortedCallback=function(){this._setTracksFinished();var animation=this.animation,abortedList=this._abortedCbs;if(animation&amp;&amp;animation.removeClip(this._clip),this._clip=null,abortedList)for(var i=0;i&lt;abortedList.length;i++)abortedList[i].call(this)},Animator2.prototype._setTracksFinished=function(){for(var tracks=this._tracks,tracksKeys=this._trackKeys,i=0;i&lt;tracksKeys.length;i++)tracks[tracksKeys[i]].setFinished()},Animator2.prototype._getAdditiveTrack=function(trackName){var additiveTrack,additiveAnimators=this._additiveAnimators;if(additiveAnimators)for(var i=0;i&lt;additiveAnimators.length;i++){var track=additiveAnimators[i].getTrack(trackName);track&amp;&amp;(additiveTrack=track)}return additiveTrack},Animator2.prototype.start=function(easing){if(!(this._started&gt;0)){this._started=1;for(var self2=this,tracks=[],maxTime=this._maxTime||0,i=0;i&lt;this._trackKeys.length;i++){var propName=this._trackKeys[i],track=this._tracks[propName],additiveTrack=this._getAdditiveTrack(propName),kfs=track.keyframes,kfsNum=kfs.length;if(track.prepare(maxTime,additiveTrack),track.needsAnimate())if(!this._allowDiscrete&amp;&amp;track.discrete){var lastKf=kfs[kfsNum-1];lastKf&amp;&amp;(self2._target[track.propName]=lastKf.rawValue),track.setFinished()}else tracks.push(track)}if(tracks.length||this._force){var clip2=new Clip({life:maxTime,loop:this._loop,delay:this._delay||0,onframe:function(percent){self2._started=2;var additiveAnimators=self2._additiveAnimators;if(additiveAnimators){for(var stillHasAdditiveAnimator=!1,i2=0;i2&lt;additiveAnimators.length;i2++)if(additiveAnimators[i2]._clip){stillHasAdditiveAnimator=!0;break}stillHasAdditiveAnimator||(self2._additiveAnimators=null)}for(i2=0;i2&lt;tracks.length;i2++)tracks[i2].step(self2._target,percent);var onframeList=self2._onframeCbs;if(onframeList)for(i2=0;i2&lt;onframeList.length;i2++)onframeList[i2](self2._target,percent)},ondestroy:function(){self2._doneCallback()}});this._clip=clip2,this.animation&amp;&amp;this.animation.addClip(clip2),easing&amp;&amp;clip2.setEasing(easing)}else this._doneCallback();return this}},Animator2.prototype.stop=function(forwardToLast){if(this._clip){var clip2=this._clip;forwardToLast&amp;&amp;clip2.onframe(1),this._abortedCallback()}},Animator2.prototype.delay=function(time2){return this._delay=time2,this},Animator2.prototype.during=function(cb){return cb&amp;&amp;(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(cb)),this},Animator2.prototype.done=function(cb){return cb&amp;&amp;(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(cb)),this},Animator2.prototype.aborted=function(cb){return cb&amp;&amp;(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(cb)),this},Animator2.prototype.getClip=function(){return this._clip},Animator2.prototype.getTrack=function(propName){return this._tracks[propName]},Animator2.prototype.getTracks=function(){var _this=this;return map$1(this._trackKeys,function(key){return _this._tracks[key]})},Animator2.prototype.stopTracks=function(propNames,forwardToLast){if(!propNames.length||!this._clip)return!0;for(var tracks=this._tracks,tracksKeys=this._trackKeys,i=0;i&lt;propNames.length;i++){var track=tracks[propNames[i]];track&amp;&amp;!track.isFinished()&amp;&amp;(forwardToLast?track.step(this._target,1):1===this._started&amp;&amp;track.step(this._target,0),track.setFinished())}var allAborted=!0;for(i=0;i&lt;tracksKeys.length;i++)if(!tracks[tracksKeys[i]].isFinished()){allAborted=!1;break}return allAborted&amp;&amp;this._abortedCallback(),allAborted},Animator2.prototype.saveTo=function(target,trackKeys,firstOrLast){if(target){trackKeys=trackKeys||this._trackKeys;for(var i=0;i&lt;trackKeys.length;i++){var propName=trackKeys[i],track=this._tracks[propName];if(track&amp;&amp;!track.isFinished()){var kfs=track.keyframes,kf=kfs[firstOrLast?0:kfs.length-1];kf&amp;&amp;(target[propName]=cloneValue(kf.rawValue))}}}},Animator2.prototype.__changeFinalValue=function(finalProps,trackKeys){trackKeys=trackKeys||keys(finalProps);for(var i=0;i&lt;trackKeys.length;i++){var propName=trackKeys[i],track=this._tracks[propName];if(track){var kfs=track.keyframes;if(kfs.length&gt;1){var lastKf=kfs.pop();track.addKeyframe(lastKf.time,finalProps[propName]),track.prepare(this._maxTime,track.getAdditiveTrack())}}}},Animator2}();function getTime(){return(new Date).getTime()}var mouseHandlerNames,pointerEventNameMap,Animation=function(_super){function Animation2(opts){var _this=_super.call(this)||this;return _this._running=!1,_this._time=0,_this._pausedTime=0,_this._pauseStart=0,_this._paused=!1,opts=opts||{},_this.stage=opts.stage||{},_this}return __extends(Animation2,_super),Animation2.prototype.addClip=function(clip2){clip2.animation&amp;&amp;this.removeClip(clip2),this._head?(this._tail.next=clip2,clip2.prev=this._tail,clip2.next=null,this._tail=clip2):this._head=this._tail=clip2,clip2.animation=this},Animation2.prototype.addAnimator=function(animator){animator.animation=this;var clip2=animator.getClip();clip2&amp;&amp;this.addClip(clip2)},Animation2.prototype.removeClip=function(clip2){if(clip2.animation){var prev=clip2.prev,next=clip2.next;prev?prev.next=next:this._head=next,next?next.prev=prev:this._tail=prev,clip2.next=clip2.prev=clip2.animation=null}},Animation2.prototype.removeAnimator=function(animator){var clip2=animator.getClip();clip2&amp;&amp;this.removeClip(clip2),animator.animation=null},Animation2.prototype.update=function(notTriggerFrameAndStageUpdate){for(var time2=getTime()-this._pausedTime,delta=time2-this._time,clip2=this._head;clip2;){var nextClip=clip2.next;clip2.step(time2,delta)?(clip2.ondestroy(),this.removeClip(clip2),clip2=nextClip):clip2=nextClip}this._time=time2,notTriggerFrameAndStageUpdate||(this.trigger("frame",delta),this.stage.update&amp;&amp;this.stage.update())},Animation2.prototype._startLoop=function(){var self2=this;this._running=!0,requestAnimationFrame(function step(){self2._running&amp;&amp;(requestAnimationFrame(step),!self2._paused&amp;&amp;self2.update())})},Animation2.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},Animation2.prototype.stop=function(){this._running=!1},Animation2.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},Animation2.prototype.resume=function(){this._paused&amp;&amp;(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},Animation2.prototype.clear=function(){for(var clip2=this._head;clip2;){var nextClip=clip2.next;clip2.prev=clip2.next=clip2.animation=null,clip2=nextClip}this._head=this._tail=null},Animation2.prototype.isFinished=function(){return null==this._head},Animation2.prototype.animate=function(target,options){options=options||{},this.start();var animator=new Animator(target,options.loop);return this.addAnimator(animator),animator},Animation2}(Eventful),globalEventSupported=env.domSupported,localNativeListenerNames=(pointerEventNameMap={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:mouseHandlerNames=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:map$1(mouseHandlerNames,function(name){var nm=name.replace("mouse","pointer");return pointerEventNameMap.hasOwnProperty(nm)?nm:name})}),globalNativeListenerNames_mouse=["mousemove","mouseup"],globalNativeListenerNames_pointer=["pointermove","pointerup"],wheelEventSupported=!1;function isPointerFromTouch(event){var pointerType=event.pointerType;return"pen"===pointerType||"touch"===pointerType}function markTouch(event){event&amp;&amp;(event.zrByTouch=!0)}function isLocalEl(instance,el){for(var elTmp=el,isLocal=!1;elTmp&amp;&amp;9!==elTmp.nodeType&amp;&amp;!(isLocal=elTmp.domBelongToZr||elTmp!==el&amp;&amp;elTmp===instance.painterRoot);)elTmp=elTmp.parentNode;return isLocal}var FakeGlobalEvent=function(){return function FakeGlobalEvent2(instance,event){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=event.type,this.target=this.currentTarget=instance.dom,this.pointerType=event.pointerType,this.clientX=event.clientX,this.clientY=event.clientY}}(),localDOMHandlers={mousedown:function(event){event=normalizeEvent(this.dom,event),this.__mayPointerCapture=[event.zrX,event.zrY],this.trigger("mousedown",event)},mousemove:function(event){event=normalizeEvent(this.dom,event);var downPoint=this.__mayPointerCapture;!downPoint||event.zrX===downPoint[0]&amp;&amp;event.zrY===downPoint[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",event)},mouseup:function(event){event=normalizeEvent(this.dom,event),this.__togglePointerCapture(!1),this.trigger("mouseup",event)},mouseout:function(event){isLocalEl(this,(event=normalizeEvent(this.dom,event)).toElement||event.relatedTarget)||(this.__pointerCapturing&amp;&amp;(event.zrEventControl="no_globalout"),this.trigger("mouseout",event))},wheel:function(event){wheelEventSupported=!0,event=normalizeEvent(this.dom,event),this.trigger("mousewheel",event)},mousewheel:function(event){wheelEventSupported||(event=normalizeEvent(this.dom,event),this.trigger("mousewheel",event))},touchstart:function(event){markTouch(event=normalizeEvent(this.dom,event)),this.__lastTouchMoment=new Date,this.handler.processGesture(event,"start"),localDOMHandlers.mousemove.call(this,event),localDOMHandlers.mousedown.call(this,event)},touchmove:function(event){markTouch(event=normalizeEvent(this.dom,event)),this.handler.processGesture(event,"change"),localDOMHandlers.mousemove.call(this,event)},touchend:function(event){markTouch(event=normalizeEvent(this.dom,event)),this.handler.processGesture(event,"end"),localDOMHandlers.mouseup.call(this,event),+new Date-+this.__lastTouchMoment&lt;300&amp;&amp;localDOMHandlers.click.call(this,event)},pointerdown:function(event){localDOMHandlers.mousedown.call(this,event)},pointermove:function(event){isPointerFromTouch(event)||localDOMHandlers.mousemove.call(this,event)},pointerup:function(event){localDOMHandlers.mouseup.call(this,event)},pointerout:function(event){isPointerFromTouch(event)||localDOMHandlers.mouseout.call(this,event)}};each$f(["click","dblclick","contextmenu"],function(name){localDOMHandlers[name]=function(event){event=normalizeEvent(this.dom,event),this.trigger(name,event)}});var globalDOMHandlers={pointermove:function(event){isPointerFromTouch(event)||globalDOMHandlers.mousemove.call(this,event)},pointerup:function(event){globalDOMHandlers.mouseup.call(this,event)},mousemove:function(event){this.trigger("mousemove",event)},mouseup:function(event){var pointerCaptureReleasing=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",event),pointerCaptureReleasing&amp;&amp;(event.zrEventControl="only_globalout",this.trigger("mouseout",event))}};function mountLocalDOMEventListeners(instance,scope){var domHandlers=scope.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(nativeEventName){mountSingleDOMEventListener(scope,nativeEventName,function(event){domHandlers[nativeEventName].call(instance,event)})}):(env.touchEventsSupported&amp;&amp;each$f(localNativeListenerNames.touch,function(nativeEventName){mountSingleDOMEventListener(scope,nativeEventName,function(event){domHandlers[nativeEventName].call(instance,event),function setTouchTimer(scope){scope.touching=!0,null!=scope.touchTimer&amp;&amp;(clearTimeout(scope.touchTimer),scope.touchTimer=null),scope.touchTimer=setTimeout(function(){scope.touching=!1,scope.touchTimer=null},700)}(scope)})}),each$f(localNativeListenerNames.mouse,function(nativeEventName){mountSingleDOMEventListener(scope,nativeEventName,function(event){event=getNativeEvent(event),scope.touching||domHandlers[nativeEventName].call(instance,event)})}))}function mountGlobalDOMEventListeners(instance,scope){function mount(nativeEventName){mountSingleDOMEventListener(scope,nativeEventName,function nativeEventListener(event){event=getNativeEvent(event),isLocalEl(instance,event.target)||(event=function normalizeGlobalEvent(instance,event){return normalizeEvent(instance.dom,new FakeGlobalEvent(instance,event),!0)}(instance,event),scope.domHandlers[nativeEventName].call(instance,event))},{capture:!0})}env.pointerEventsSupported?each$f(globalNativeListenerNames_pointer,mount):env.touchEventsSupported||each$f(globalNativeListenerNames_mouse,mount)}function mountSingleDOMEventListener(scope,nativeEventName,listener,opt){scope.mounted[nativeEventName]=listener,scope.listenerOpts[nativeEventName]=opt,addEventListener(scope.domTarget,nativeEventName,listener,opt)}function unmountDOMEventListeners(scope){var mounted=scope.mounted;for(var nativeEventName in mounted)mounted.hasOwnProperty(nativeEventName)&amp;&amp;removeEventListener(scope.domTarget,nativeEventName,mounted[nativeEventName],scope.listenerOpts[nativeEventName]);scope.mounted={}}var DOMHandlerScope=function(){return function DOMHandlerScope2(domTarget,domHandlers){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=domTarget,this.domHandlers=domHandlers}}(),HandlerDomProxy=function(_super){function HandlerDomProxy2(dom,painterRoot){var _this=_super.call(this)||this;return _this.__pointerCapturing=!1,_this.dom=dom,_this.painterRoot=painterRoot,_this._localHandlerScope=new DOMHandlerScope(dom,localDOMHandlers),globalEventSupported&amp;&amp;(_this._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(_this,_this._localHandlerScope),_this}return __extends(HandlerDomProxy2,_super),HandlerDomProxy2.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&amp;&amp;unmountDOMEventListeners(this._globalHandlerScope)},HandlerDomProxy2.prototype.setCursor=function(cursorStyle){this.dom.style&amp;&amp;(this.dom.style.cursor=cursorStyle||"default")},HandlerDomProxy2.prototype.__togglePointerCapture=function(isPointerCapturing){if(this.__mayPointerCapture=null,globalEventSupported&amp;&amp;+this.__pointerCapturing^+isPointerCapturing){this.__pointerCapturing=isPointerCapturing;var globalHandlerScope=this._globalHandlerScope;isPointerCapturing?mountGlobalDOMEventListeners(this,globalHandlerScope):unmountDOMEventListeners(globalHandlerScope)}},HandlerDomProxy2}(Eventful),dpr=1;env.hasGlobalWindow&amp;&amp;(dpr=Math.max(window.devicePixelRatio||window.screen&amp;&amp;window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,mIdentity=identity;function isNotAroundZero(val){return val&gt;5e-5||val&lt;-5e-5}var scaleTmp=[],tmpTransform=[],originTransform=[1,0,0,1,0,0],abs=Math.abs,Transformable=function(){function Transformable2(){}var proto2;return Transformable2.prototype.getLocalTransform=function(m2){return Transformable2.getLocalTransform(this,m2)},Transformable2.prototype.setPosition=function(arr){this.x=arr[0],this.y=arr[1]},Transformable2.prototype.setScale=function(arr){this.scaleX=arr[0],this.scaleY=arr[1]},Transformable2.prototype.setSkew=function(arr){this.skewX=arr[0],this.skewY=arr[1]},Transformable2.prototype.setOrigin=function(arr){this.originX=arr[0],this.originY=arr[1]},Transformable2.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},Transformable2.prototype.updateTransform=function(){var parentTransform=this.parent&amp;&amp;this.parent.transform,needLocalTransform=this.needLocalTransform(),m2=this.transform;needLocalTransform||parentTransform?(m2=m2||[1,0,0,1,0,0],needLocalTransform?this.getLocalTransform(m2):mIdentity(m2),parentTransform&amp;&amp;(needLocalTransform?mul(m2,parentTransform,m2):copy(m2,parentTransform)),this.transform=m2,this._resolveGlobalScaleRatio(m2)):m2&amp;&amp;(mIdentity(m2),this.invTransform=null)},Transformable2.prototype._resolveGlobalScaleRatio=function(m2){var globalScaleRatio=this.globalScaleRatio;if(null!=globalScaleRatio&amp;&amp;1!==globalScaleRatio){this.getGlobalScale(scaleTmp);var relX=scaleTmp[0]&lt;0?-1:1,relY=scaleTmp[1]&lt;0?-1:1,sx=((scaleTmp[0]-relX)*globalScaleRatio+relX)/scaleTmp[0]||0,sy=((scaleTmp[1]-relY)*globalScaleRatio+relY)/scaleTmp[1]||0;m2[0]*=sx,m2[1]*=sx,m2[2]*=sy,m2[3]*=sy}this.invTransform=this.invTransform||[1,0,0,1,0,0],invert(this.invTransform,m2)},Transformable2.prototype.getComputedTransform=function(){for(var transformNode=this,ancestors=[];transformNode;)ancestors.push(transformNode),transformNode=transformNode.parent;for(;transformNode=ancestors.pop();)transformNode.updateTransform();return this.transform},Transformable2.prototype.setLocalTransform=function(m2){if(m2){var sx=m2[0]*m2[0]+m2[1]*m2[1],sy=m2[2]*m2[2]+m2[3]*m2[3],rotation=Math.atan2(m2[1],m2[0]),shearX=Math.PI/2+rotation-Math.atan2(m2[3],m2[2]);sy=Math.sqrt(sy)*Math.cos(shearX),sx=Math.sqrt(sx),this.skewX=shearX,this.skewY=0,this.rotation=-rotation,this.x=+m2[4],this.y=+m2[5],this.scaleX=sx,this.scaleY=sy,this.originX=0,this.originY=0}},Transformable2.prototype.decomposeTransform=function(){if(this.transform){var parent=this.parent,m2=this.transform;parent&amp;&amp;parent.transform&amp;&amp;(parent.invTransform=parent.invTransform||[1,0,0,1,0,0],mul(tmpTransform,parent.invTransform,m2),m2=tmpTransform);var ox=this.originX,oy=this.originY;(ox||oy)&amp;&amp;(originTransform[4]=ox,originTransform[5]=oy,mul(tmpTransform,m2,originTransform),tmpTransform[4]-=ox,tmpTransform[5]-=oy,m2=tmpTransform),this.setLocalTransform(m2)}},Transformable2.prototype.getGlobalScale=function(out2){var m2=this.transform;return out2=out2||[],m2?(out2[0]=Math.sqrt(m2[0]*m2[0]+m2[1]*m2[1]),out2[1]=Math.sqrt(m2[2]*m2[2]+m2[3]*m2[3]),m2[0]&lt;0&amp;&amp;(out2[0]=-out2[0]),m2[3]&lt;0&amp;&amp;(out2[1]=-out2[1]),out2):(out2[0]=1,out2[1]=1,out2)},Transformable2.prototype.transformCoordToLocal=function(x,y){var v22=[x,y],invTransform=this.invTransform;return invTransform&amp;&amp;applyTransform$1(v22,v22,invTransform),v22},Transformable2.prototype.transformCoordToGlobal=function(x,y){var v22=[x,y],transform2=this.transform;return transform2&amp;&amp;applyTransform$1(v22,v22,transform2),v22},Transformable2.prototype.getLineScale=function(){var m2=this.transform;return m2&amp;&amp;abs(m2[0]-1)&gt;1e-10&amp;&amp;abs(m2[3]-1)&gt;1e-10?Math.sqrt(abs(m2[0]*m2[3]-m2[2]*m2[1])):1},Transformable2.prototype.copyTransform=function(source){copyTransform(this,source)},Transformable2.getLocalTransform=function(target,m2){m2=m2||[];var ox=target.originX||0,oy=target.originY||0,sx=target.scaleX,sy=target.scaleY,ax=target.anchorX,ay=target.anchorY,rotation=target.rotation||0,x=target.x,y=target.y,skewX=target.skewX?Math.tan(target.skewX):0,skewY=target.skewY?Math.tan(-target.skewY):0;if(ox||oy||ax||ay){var dx=ox+ax,dy=oy+ay;m2[4]=-dx*sx-skewX*dy*sy,m2[5]=-dy*sy-skewY*dx*sx}else m2[4]=m2[5]=0;return m2[0]=sx,m2[3]=sy,m2[1]=skewY*sx,m2[2]=skewX*sy,rotation&amp;&amp;rotate(m2,m2,rotation),m2[4]+=ox+x,m2[5]+=oy+y,m2},Transformable2.initDefaultProps=((proto2=Transformable2.prototype).scaleX=proto2.scaleY=proto2.globalScaleRatio=1,void(proto2.x=proto2.y=proto2.originX=proto2.originY=proto2.skewX=proto2.skewY=proto2.rotation=proto2.anchorX=proto2.anchorY=0)),Transformable2}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(target,source){for(var i=0;i&lt;TRANSFORMABLE_PROPS.length;i++){var propName=TRANSFORMABLE_PROPS[i];target[propName]=source[propName]}}var textWidthCache={};function getWidth(text,font){var cacheOfFont=textWidthCache[font=font||DEFAULT_FONT];cacheOfFont||(cacheOfFont=textWidthCache[font]=new LRU(500));var width=cacheOfFont.get(text);return null==width&amp;&amp;(width=platformApi.measureText(text,font).width,cacheOfFont.put(text,width)),width}function innerGetBoundingRect(text,font,textAlign,textBaseline){var width=getWidth(text,font),height=getLineHeight(font),x=adjustTextX(0,width,textAlign),y=adjustTextY(0,height,textBaseline);return new BoundingRect(x,y,width,height)}function getBoundingRect(text,font,textAlign,textBaseline){var textLines=((text||"")+"").split("\n");if(1===textLines.length)return innerGetBoundingRect(textLines[0],font,textAlign,textBaseline);for(var uniondRect=new BoundingRect(0,0,0,0),i=0;i&lt;textLines.length;i++){var rect=innerGetBoundingRect(textLines[i],font,textAlign,textBaseline);0===i?uniondRect.copy(rect):uniondRect.union(rect)}return uniondRect}function adjustTextX(x,width,textAlign){return"right"===textAlign?x-=width:"center"===textAlign&amp;&amp;(x-=width/2),x}function adjustTextY(y,height,verticalAlign){return"middle"===verticalAlign?y-=height/2:"bottom"===verticalAlign&amp;&amp;(y-=height),y}function getLineHeight(font){return getWidth("国",font)}function parsePercent$1(value,maxValue){return"string"==typeof value?value.lastIndexOf("%")&gt;=0?parseFloat(value)/100*maxValue:parseFloat(value):value}function calculateTextPosition(out2,opts,rect){var textPosition=opts.position||"inside",distance2=null!=opts.distance?opts.distance:5,height=rect.height,width=rect.width,halfHeight=height/2,x=rect.x,y=rect.y,textAlign="left",textVerticalAlign="top";if(textPosition instanceof Array)x+=parsePercent$1(textPosition[0],rect.width),y+=parsePercent$1(textPosition[1],rect.height),textAlign=null,textVerticalAlign=null;else switch(textPosition){case"left":x-=distance2,y+=halfHeight,textAlign="right",textVerticalAlign="middle";break;case"right":x+=distance2+width,y+=halfHeight,textVerticalAlign="middle";break;case"top":x+=width/2,y-=distance2,textAlign="center",textVerticalAlign="bottom";break;case"bottom":x+=width/2,y+=height+distance2,textAlign="center";break;case"inside":x+=width/2,y+=halfHeight,textAlign="center",textVerticalAlign="middle";break;case"insideLeft":x+=distance2,y+=halfHeight,textVerticalAlign="middle";break;case"insideRight":x+=width-distance2,y+=halfHeight,textAlign="right",textVerticalAlign="middle";break;case"insideTop":x+=width/2,y+=distance2,textAlign="center";break;case"insideBottom":x+=width/2,y+=height-distance2,textAlign="center",textVerticalAlign="bottom";break;case"insideTopLeft":x+=distance2,y+=distance2;break;case"insideTopRight":x+=width-distance2,y+=distance2,textAlign="right";break;case"insideBottomLeft":x+=distance2,y+=height-distance2,textVerticalAlign="bottom";break;case"insideBottomRight":x+=width-distance2,y+=height-distance2,textAlign="right",textVerticalAlign="bottom"}return(out2=out2||{}).x=x,out2.y=y,out2.align=textAlign,out2.verticalAlign=textVerticalAlign,out2}var PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(obj,key){return obj[key]=!0,obj},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element=function(){function Element2(props){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(props)}return Element2.prototype._init=function(props){this.attr(props)},Element2.prototype.drift=function(dx,dy,e2){switch(this.draggable){case"horizontal":dy=0;break;case"vertical":dx=0}var m2=this.transform;m2||(m2=this.transform=[1,0,0,1,0,0]),m2[4]+=dx,m2[5]+=dy,this.decomposeTransform(),this.markRedraw()},Element2.prototype.beforeUpdate=function(){},Element2.prototype.afterUpdate=function(){},Element2.prototype.update=function(){this.updateTransform(),this.__dirty&amp;&amp;this.updateInnerText()},Element2.prototype.updateInnerText=function(forceUpdate){var textEl=this._textContent;if(textEl&amp;&amp;(!textEl.ignore||forceUpdate)){this.textConfig||(this.textConfig={});var textConfig=this.textConfig,isLocal=textConfig.local,innerTransformable=textEl.innerTransformable,textAlign=void 0,textVerticalAlign=void 0,textStyleChanged=!1;innerTransformable.parent=isLocal?this:null;var innerOrigin=!1;if(innerTransformable.copyTransform(textEl),null!=textConfig.position){var layoutRect=tmpBoundingRect;textConfig.layoutRect?layoutRect.copy(textConfig.layoutRect):layoutRect.copy(this.getBoundingRect()),isLocal||layoutRect.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,textConfig,layoutRect):calculateTextPosition(tmpTextPosCalcRes,textConfig,layoutRect),innerTransformable.x=tmpTextPosCalcRes.x,innerTransformable.y=tmpTextPosCalcRes.y,textAlign=tmpTextPosCalcRes.align,textVerticalAlign=tmpTextPosCalcRes.verticalAlign;var textOrigin=textConfig.origin;if(textOrigin&amp;&amp;null!=textConfig.rotation){var relOriginX=void 0,relOriginY=void 0;"center"===textOrigin?(relOriginX=.5*layoutRect.width,relOriginY=.5*layoutRect.height):(relOriginX=parsePercent$1(textOrigin[0],layoutRect.width),relOriginY=parsePercent$1(textOrigin[1],layoutRect.height)),innerOrigin=!0,innerTransformable.originX=-innerTransformable.x+relOriginX+(isLocal?0:layoutRect.x),innerTransformable.originY=-innerTransformable.y+relOriginY+(isLocal?0:layoutRect.y)}}null!=textConfig.rotation&amp;&amp;(innerTransformable.rotation=textConfig.rotation);var textOffset=textConfig.offset;textOffset&amp;&amp;(innerTransformable.x+=textOffset[0],innerTransformable.y+=textOffset[1],innerOrigin||(innerTransformable.originX=-textOffset[0],innerTransformable.originY=-textOffset[1]));var isInside=null==textConfig.inside?"string"==typeof textConfig.position&amp;&amp;textConfig.position.indexOf("inside")&gt;=0:textConfig.inside,innerTextDefaultStyle=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),textFill=void 0,textStroke=void 0,autoStroke=void 0;isInside&amp;&amp;this.canBeInsideText()?(textFill=textConfig.insideFill,textStroke=textConfig.insideStroke,null!=textFill&amp;&amp;"auto"!==textFill||(textFill=this.getInsideTextFill()),null!=textStroke&amp;&amp;"auto"!==textStroke||(textStroke=this.getInsideTextStroke(textFill),autoStroke=!0)):(textFill=textConfig.outsideFill,textStroke=textConfig.outsideStroke,null!=textFill&amp;&amp;"auto"!==textFill||(textFill=this.getOutsideFill()),null!=textStroke&amp;&amp;"auto"!==textStroke||(textStroke=this.getOutsideStroke(textFill),autoStroke=!0)),(textFill=textFill||"#000")===innerTextDefaultStyle.fill&amp;&amp;textStroke===innerTextDefaultStyle.stroke&amp;&amp;autoStroke===innerTextDefaultStyle.autoStroke&amp;&amp;textAlign===innerTextDefaultStyle.align&amp;&amp;textVerticalAlign===innerTextDefaultStyle.verticalAlign||(textStyleChanged=!0,innerTextDefaultStyle.fill=textFill,innerTextDefaultStyle.stroke=textStroke,innerTextDefaultStyle.autoStroke=autoStroke,innerTextDefaultStyle.align=textAlign,innerTextDefaultStyle.verticalAlign=textVerticalAlign,textEl.setDefaultTextStyle(innerTextDefaultStyle)),textEl.__dirty|=1,textStyleChanged&amp;&amp;textEl.dirtyStyle(!0)}},Element2.prototype.canBeInsideText=function(){return!0},Element2.prototype.getInsideTextFill=function(){return"#fff"},Element2.prototype.getInsideTextStroke=function(textFill){return"#000"},Element2.prototype.getOutsideFill=function(){return this.__zr&amp;&amp;this.__zr.isDarkMode()?"#ccc":"#333"},Element2.prototype.getOutsideStroke=function(textFill){var backgroundColor2=this.__zr&amp;&amp;this.__zr.getBackgroundColor(),colorArr="string"==typeof backgroundColor2&amp;&amp;parse(backgroundColor2);colorArr||(colorArr=[255,255,255,1]);for(var alpha=colorArr[3],isDark=this.__zr.isDarkMode(),i=0;i&lt;3;i++)colorArr[i]=colorArr[i]*alpha+(isDark?0:255)*(1-alpha);return colorArr[3]=1,stringify(colorArr,"rgba")},Element2.prototype.traverse=function(cb,context){},Element2.prototype.attrKV=function(key,value){"textConfig"===key?this.setTextConfig(value):"textContent"===key?this.setTextContent(value):"clipPath"===key?this.setClipPath(value):"extra"===key?(this.extra=this.extra||{},extend(this.extra,value)):this[key]=value},Element2.prototype.hide=function(){this.ignore=!0,this.markRedraw()},Element2.prototype.show=function(){this.ignore=!1,this.markRedraw()},Element2.prototype.attr=function(keyOrObj,value){if("string"==typeof keyOrObj)this.attrKV(keyOrObj,value);else if(isObject$3(keyOrObj))for(var keysArr=keys(keyOrObj),i=0;i&lt;keysArr.length;i++){var key=keysArr[i];this.attrKV(key,keyOrObj[key])}return this.markRedraw(),this},Element2.prototype.saveCurrentToNormalState=function(toState){this._innerSaveToNormal(toState);for(var normalState=this._normalState,i=0;i&lt;this.animators.length;i++){var animator=this.animators[i],fromStateTransition=animator.__fromStateTransition;if(!(animator.getLoop()||fromStateTransition&amp;&amp;"__zr_normal__"!==fromStateTransition)){var targetName=animator.targetName,target=targetName?normalState[targetName]:normalState;animator.saveTo(target)}}},Element2.prototype._innerSaveToNormal=function(toState){var normalState=this._normalState;normalState||(normalState=this._normalState={}),toState.textConfig&amp;&amp;!normalState.textConfig&amp;&amp;(normalState.textConfig=this.textConfig),this._savePrimaryToNormal(toState,normalState,PRIMARY_STATES_KEYS$1)},Element2.prototype._savePrimaryToNormal=function(toState,normalState,primaryKeys){for(var i=0;i&lt;primaryKeys.length;i++){var key=primaryKeys[i];null==toState[key]||key in normalState||(normalState[key]=this[key])}},Element2.prototype.hasState=function(){return this.currentStates.length&gt;0},Element2.prototype.getState=function(name){return this.states[name]},Element2.prototype.ensureState=function(name){var states=this.states;return states[name]||(states[name]={}),states[name]},Element2.prototype.clearStates=function(noAnimation){this.useState("__zr_normal__",!1,noAnimation)},Element2.prototype.useState=function(stateName,keepCurrentStates,noAnimation,forceUseHoverLayer){var toNormalState="__zr_normal__"===stateName;if(this.hasState()||!toNormalState){var currentStates=this.currentStates,animationCfg=this.stateTransition;if(!(indexOf(currentStates,stateName)&gt;=0)||!keepCurrentStates&amp;&amp;1!==currentStates.length){var state;if(this.stateProxy&amp;&amp;!toNormalState&amp;&amp;(state=this.stateProxy(stateName)),state||(state=this.states&amp;&amp;this.states[stateName]),state||toNormalState){toNormalState||this.saveCurrentToNormalState(state);var useHoverLayer=!!(state&amp;&amp;state.hoverLayer||forceUseHoverLayer);useHoverLayer&amp;&amp;this._toggleHoverLayerFlag(!0),this._applyStateObj(stateName,state,this._normalState,keepCurrentStates,!noAnimation&amp;&amp;!this.__inHover&amp;&amp;animationCfg&amp;&amp;animationCfg.duration&gt;0,animationCfg);var textContent=this._textContent,textGuide=this._textGuide;return textContent&amp;&amp;textContent.useState(stateName,keepCurrentStates,noAnimation,useHoverLayer),textGuide&amp;&amp;textGuide.useState(stateName,keepCurrentStates,noAnimation,useHoverLayer),toNormalState?(this.currentStates=[],this._normalState={}):keepCurrentStates?this.currentStates.push(stateName):this.currentStates=[stateName],this._updateAnimationTargets(),this.markRedraw(),!useHoverLayer&amp;&amp;this.__inHover&amp;&amp;(this._toggleHoverLayerFlag(!1),this.__dirty&amp;=-2),state}logError("State "+stateName+" not exists.")}}},Element2.prototype.useStates=function(states,noAnimation,forceUseHoverLayer){if(states.length){var stateObjects=[],currentStates=this.currentStates,len2=states.length,notChange=len2===currentStates.length;if(notChange)for(var i=0;i&lt;len2;i++)if(states[i]!==currentStates[i]){notChange=!1;break}if(notChange)return;for(i=0;i&lt;len2;i++){var stateName=states[i],stateObj=void 0;this.stateProxy&amp;&amp;(stateObj=this.stateProxy(stateName,states)),stateObj||(stateObj=this.states[stateName]),stateObj&amp;&amp;stateObjects.push(stateObj)}var lastStateObj=stateObjects[len2-1],useHoverLayer=!!(lastStateObj&amp;&amp;lastStateObj.hoverLayer||forceUseHoverLayer);useHoverLayer&amp;&amp;this._toggleHoverLayerFlag(!0);var mergedState=this._mergeStates(stateObjects),animationCfg=this.stateTransition;this.saveCurrentToNormalState(mergedState),this._applyStateObj(states.join(","),mergedState,this._normalState,!1,!noAnimation&amp;&amp;!this.__inHover&amp;&amp;animationCfg&amp;&amp;animationCfg.duration&gt;0,animationCfg);var textContent=this._textContent,textGuide=this._textGuide;textContent&amp;&amp;textContent.useStates(states,noAnimation,useHoverLayer),textGuide&amp;&amp;textGuide.useStates(states,noAnimation,useHoverLayer),this._updateAnimationTargets(),this.currentStates=states.slice(),this.markRedraw(),!useHoverLayer&amp;&amp;this.__inHover&amp;&amp;(this._toggleHoverLayerFlag(!1),this.__dirty&amp;=-2)}else this.clearStates()},Element2.prototype.isSilent=function(){for(var isSilent=this.silent,ancestor=this.parent;!isSilent&amp;&amp;ancestor;){if(ancestor.silent){isSilent=!0;break}ancestor=ancestor.parent}return isSilent},Element2.prototype._updateAnimationTargets=function(){for(var i=0;i&lt;this.animators.length;i++){var animator=this.animators[i];animator.targetName&amp;&amp;animator.changeTarget(this[animator.targetName])}},Element2.prototype.removeState=function(state){var idx=indexOf(this.currentStates,state);if(idx&gt;=0){var currentStates=this.currentStates.slice();currentStates.splice(idx,1),this.useStates(currentStates)}},Element2.prototype.replaceState=function(oldState,newState,forceAdd){var currentStates=this.currentStates.slice(),idx=indexOf(currentStates,oldState),newStateExists=indexOf(currentStates,newState)&gt;=0;idx&gt;=0?newStateExists?currentStates.splice(idx,1):currentStates[idx]=newState:forceAdd&amp;&amp;!newStateExists&amp;&amp;currentStates.push(newState),this.useStates(currentStates)},Element2.prototype.toggleState=function(state,enable){enable?this.useState(state,!0):this.removeState(state)},Element2.prototype._mergeStates=function(states){for(var mergedTextConfig,mergedState={},i=0;i&lt;states.length;i++){var state=states[i];extend(mergedState,state),state.textConfig&amp;&amp;extend(mergedTextConfig=mergedTextConfig||{},state.textConfig)}return mergedTextConfig&amp;&amp;(mergedState.textConfig=mergedTextConfig),mergedState},Element2.prototype._applyStateObj=function(stateName,state,normalState,keepCurrentStates,transition,animationCfg){var needsRestoreToNormal=!(state&amp;&amp;keepCurrentStates);state&amp;&amp;state.textConfig?(this.textConfig=extend({},keepCurrentStates?this.textConfig:normalState.textConfig),extend(this.textConfig,state.textConfig)):needsRestoreToNormal&amp;&amp;normalState.textConfig&amp;&amp;(this.textConfig=normalState.textConfig);for(var transitionTarget={},hasTransition=!1,i=0;i&lt;PRIMARY_STATES_KEYS$1.length;i++){var key=PRIMARY_STATES_KEYS$1[i],propNeedsTransition=transition&amp;&amp;DEFAULT_ANIMATABLE_MAP[key];state&amp;&amp;null!=state[key]?propNeedsTransition?(hasTransition=!0,transitionTarget[key]=state[key]):this[key]=state[key]:needsRestoreToNormal&amp;&amp;null!=normalState[key]&amp;&amp;(propNeedsTransition?(hasTransition=!0,transitionTarget[key]=normalState[key]):this[key]=normalState[key])}if(!transition)for(i=0;i&lt;this.animators.length;i++){var animator=this.animators[i],targetName=animator.targetName;animator.getLoop()||animator.__changeFinalValue(targetName?(state||normalState)[targetName]:state||normalState)}hasTransition&amp;&amp;this._transitionState(stateName,transitionTarget,animationCfg)},Element2.prototype._attachComponent=function(componentEl){if((!componentEl.__zr||componentEl.__hostTarget)&amp;&amp;componentEl!==this){var zr=this.__zr;zr&amp;&amp;componentEl.addSelfToZr(zr),componentEl.__zr=zr,componentEl.__hostTarget=this}},Element2.prototype._detachComponent=function(componentEl){componentEl.__zr&amp;&amp;componentEl.removeSelfFromZr(componentEl.__zr),componentEl.__zr=null,componentEl.__hostTarget=null},Element2.prototype.getClipPath=function(){return this._clipPath},Element2.prototype.setClipPath=function(clipPath){this._clipPath&amp;&amp;this._clipPath!==clipPath&amp;&amp;this.removeClipPath(),this._attachComponent(clipPath),this._clipPath=clipPath,this.markRedraw()},Element2.prototype.removeClipPath=function(){var clipPath=this._clipPath;clipPath&amp;&amp;(this._detachComponent(clipPath),this._clipPath=null,this.markRedraw())},Element2.prototype.getTextContent=function(){return this._textContent},Element2.prototype.setTextContent=function(textEl){var previousTextContent=this._textContent;previousTextContent!==textEl&amp;&amp;(previousTextContent&amp;&amp;previousTextContent!==textEl&amp;&amp;this.removeTextContent(),textEl.innerTransformable=new Transformable,this._attachComponent(textEl),this._textContent=textEl,this.markRedraw())},Element2.prototype.setTextConfig=function(cfg){this.textConfig||(this.textConfig={}),extend(this.textConfig,cfg),this.markRedraw()},Element2.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},Element2.prototype.removeTextContent=function(){var textEl=this._textContent;textEl&amp;&amp;(textEl.innerTransformable=null,this._detachComponent(textEl),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},Element2.prototype.getTextGuideLine=function(){return this._textGuide},Element2.prototype.setTextGuideLine=function(guideLine){this._textGuide&amp;&amp;this._textGuide!==guideLine&amp;&amp;this.removeTextGuideLine(),this._attachComponent(guideLine),this._textGuide=guideLine,this.markRedraw()},Element2.prototype.removeTextGuideLine=function(){var textGuide=this._textGuide;textGuide&amp;&amp;(this._detachComponent(textGuide),this._textGuide=null,this.markRedraw())},Element2.prototype.markRedraw=function(){this.__dirty|=1;var zr=this.__zr;zr&amp;&amp;(this.__inHover?zr.refreshHover():zr.refresh()),this.__hostTarget&amp;&amp;this.__hostTarget.markRedraw()},Element2.prototype.dirty=function(){this.markRedraw()},Element2.prototype._toggleHoverLayerFlag=function(inHover){this.__inHover=inHover;var textContent=this._textContent,textGuide=this._textGuide;textContent&amp;&amp;(textContent.__inHover=inHover),textGuide&amp;&amp;(textGuide.__inHover=inHover)},Element2.prototype.addSelfToZr=function(zr){if(this.__zr!==zr){this.__zr=zr;var animators=this.animators;if(animators)for(var i=0;i&lt;animators.length;i++)zr.animation.addAnimator(animators[i]);this._clipPath&amp;&amp;this._clipPath.addSelfToZr(zr),this._textContent&amp;&amp;this._textContent.addSelfToZr(zr),this._textGuide&amp;&amp;this._textGuide.addSelfToZr(zr)}},Element2.prototype.removeSelfFromZr=function(zr){if(this.__zr){this.__zr=null;var animators=this.animators;if(animators)for(var i=0;i&lt;animators.length;i++)zr.animation.removeAnimator(animators[i]);this._clipPath&amp;&amp;this._clipPath.removeSelfFromZr(zr),this._textContent&amp;&amp;this._textContent.removeSelfFromZr(zr),this._textGuide&amp;&amp;this._textGuide.removeSelfFromZr(zr)}},Element2.prototype.animate=function(key,loop,allowDiscreteAnimation){var target=key?this[key]:this,animator=new Animator(target,loop,allowDiscreteAnimation);return key&amp;&amp;(animator.targetName=key),this.addAnimator(animator,key),animator},Element2.prototype.addAnimator=function(animator,key){var zr=this.__zr,el=this;animator.during(function(){el.updateDuringAnimation(key)}).done(function(){var animators=el.animators,idx=indexOf(animators,animator);idx&gt;=0&amp;&amp;animators.splice(idx,1)}),this.animators.push(animator),zr&amp;&amp;zr.animation.addAnimator(animator),zr&amp;&amp;zr.wakeUp()},Element2.prototype.updateDuringAnimation=function(key){this.markRedraw()},Element2.prototype.stopAnimation=function(scope,forwardToLast){for(var animators=this.animators,len2=animators.length,leftAnimators=[],i=0;i&lt;len2;i++){var animator=animators[i];scope&amp;&amp;scope!==animator.scope?leftAnimators.push(animator):animator.stop(forwardToLast)}return this.animators=leftAnimators,this},Element2.prototype.animateTo=function(target,cfg,animationProps){animateTo(this,target,cfg,animationProps)},Element2.prototype.animateFrom=function(target,cfg,animationProps){animateTo(this,target,cfg,animationProps,!0)},Element2.prototype._transitionState=function(stateName,target,cfg,animationProps){for(var animators=animateTo(this,target,cfg,animationProps),i=0;i&lt;animators.length;i++)animators[i].__fromStateTransition=stateName},Element2.prototype.getBoundingRect=function(){return null},Element2.prototype.getPaintRect=function(){return null},Element2.initDefaultProps=function(){var elProto=Element2.prototype;function createLegacyProperty(key,privateKey,xKey,yKey){function enhanceArray(self2,pos){Object.defineProperty(pos,0,{get:function(){return self2[xKey]},set:function(val){self2[xKey]=val}}),Object.defineProperty(pos,1,{get:function(){return self2[yKey]},set:function(val){self2[yKey]=val}})}Object.defineProperty(elProto,key,{get:function(){this[privateKey]||enhanceArray(this,this[privateKey]=[]);return this[privateKey]},set:function(pos){this[xKey]=pos[0],this[yKey]=pos[1],this[privateKey]=pos,enhanceArray(this,pos)}})}elProto.type="element",elProto.name="",elProto.ignore=elProto.silent=elProto.isGroup=elProto.draggable=elProto.dragging=elProto.ignoreClip=elProto.__inHover=!1,elProto.__dirty=1,Object.defineProperty&amp;&amp;(createLegacyProperty("position","_legacyPos","x","y"),createLegacyProperty("scale","_legacyScale","scaleX","scaleY"),createLegacyProperty("origin","_legacyOrigin","originX","originY"))}(),Element2}();function animateTo(animatable,target,cfg,animationProps,reverse2){var animators=[];animateToShallow(animatable,"",animatable,target,cfg=cfg||{},animationProps,animators,reverse2);var finishCount=animators.length,doneHappened=!1,cfgDone=cfg.done,cfgAborted=cfg.aborted,doneCb=function(){doneHappened=!0,--finishCount&lt;=0&amp;&amp;(doneHappened?cfgDone&amp;&amp;cfgDone():cfgAborted&amp;&amp;cfgAborted())},abortedCb=function(){--finishCount&lt;=0&amp;&amp;(doneHappened?cfgDone&amp;&amp;cfgDone():cfgAborted&amp;&amp;cfgAborted())};finishCount||cfgDone&amp;&amp;cfgDone(),animators.length&gt;0&amp;&amp;cfg.during&amp;&amp;animators[0].during(function(target2,percent){cfg.during(percent)});for(var i=0;i&lt;animators.length;i++){var animator=animators[i];doneCb&amp;&amp;animator.done(doneCb),abortedCb&amp;&amp;animator.aborted(abortedCb),cfg.force&amp;&amp;animator.duration(cfg.duration),animator.start(cfg.easing)}return animators}function copyArrShallow(source,target,len2){for(var i=0;i&lt;len2;i++)source[i]=target[i]}function copyValue(target,source,key){if(isArrayLike(source[key]))if(isArrayLike(target[key])||(target[key]=[]),isTypedArray(source[key])){var len2=source[key].length;target[key].length!==len2&amp;&amp;(target[key]=new source[key].constructor(len2),copyArrShallow(target[key],source[key],len2))}else{var sourceArr=source[key],targetArr=target[key],len0=sourceArr.length;if(function is2DArray(value){return isArrayLike(value[0])}(sourceArr))for(var len1=sourceArr[0].length,i=0;i&lt;len0;i++)targetArr[i]?copyArrShallow(targetArr[i],sourceArr[i],len1):targetArr[i]=Array.prototype.slice.call(sourceArr[i]);else copyArrShallow(targetArr,sourceArr,len0);targetArr.length=sourceArr.length}else target[key]=source[key]}function animateToShallow(animatable,topKey,animateObj,target,cfg,animationProps,animators,reverse2){for(var targetKeys=keys(target),duration=cfg.duration,delay=cfg.delay,additive=cfg.additive,setToFinal=cfg.setToFinal,animateAll=!isObject$3(animationProps),existsAnimators=animatable.animators,animationKeys=[],k=0;k&lt;targetKeys.length;k++){var innerKey=targetKeys[k],targetVal=target[innerKey];if(null!=targetVal&amp;&amp;null!=animateObj[innerKey]&amp;&amp;(animateAll||animationProps[innerKey]))if(!isObject$3(targetVal)||isArrayLike(targetVal)||isGradientObject(targetVal))animationKeys.push(innerKey);else{if(topKey){reverse2||(animateObj[innerKey]=targetVal,animatable.updateDuringAnimation(topKey));continue}animateToShallow(animatable,innerKey,animateObj[innerKey],targetVal,cfg,animationProps&amp;&amp;animationProps[innerKey],animators,reverse2)}else reverse2||(animateObj[innerKey]=targetVal,animatable.updateDuringAnimation(topKey),animationKeys.push(innerKey))}var keyLen=animationKeys.length;if(!additive&amp;&amp;keyLen)for(var i=0;i&lt;existsAnimators.length;i++){if((animator=existsAnimators[i]).targetName===topKey)if(animator.stopTracks(animationKeys)){var idx=indexOf(existsAnimators,animator);existsAnimators.splice(idx,1)}}if(cfg.force||(animationKeys=filter(animationKeys,function(key){return!function isValueSame(val1,val2){return val1===val2||isArrayLike(val1)&amp;&amp;isArrayLike(val2)&amp;&amp;function is1DArraySame(arr0,arr1){var len2=arr0.length;if(len2!==arr1.length)return!1;for(var i=0;i&lt;len2;i++)if(arr0[i]!==arr1[i])return!1;return!0}(val1,val2)}(target[key],animateObj[key])}),keyLen=animationKeys.length),keyLen&gt;0||cfg.force&amp;&amp;!animators.length){var animator,revertedSource=void 0,reversedTarget=void 0,sourceClone=void 0;if(reverse2){reversedTarget={},setToFinal&amp;&amp;(revertedSource={});for(i=0;i&lt;keyLen;i++){reversedTarget[innerKey=animationKeys[i]]=animateObj[innerKey],setToFinal?revertedSource[innerKey]=target[innerKey]:animateObj[innerKey]=target[innerKey]}}else if(setToFinal){sourceClone={};for(i=0;i&lt;keyLen;i++){sourceClone[innerKey=animationKeys[i]]=cloneValue(animateObj[innerKey]),copyValue(animateObj,target,innerKey)}}(animator=new Animator(animateObj,!1,!1,additive?filter(existsAnimators,function(animator2){return animator2.targetName===topKey}):null)).targetName=topKey,cfg.scope&amp;&amp;(animator.scope=cfg.scope),setToFinal&amp;&amp;revertedSource&amp;&amp;animator.whenWithKeys(0,revertedSource,animationKeys),sourceClone&amp;&amp;animator.whenWithKeys(0,sourceClone,animationKeys),animator.whenWithKeys(null==duration?500:duration,reverse2?reversedTarget:target,animationKeys).delay(delay||0),animatable.addAnimator(animator,topKey),animators.push(animator)}}mixin(Element,Eventful),mixin(Element,Transformable);var Group$3=function(_super){function Group2(opts){var _this=_super.call(this)||this;return _this.isGroup=!0,_this._children=[],_this.attr(opts),_this}return __extends(Group2,_super),Group2.prototype.childrenRef=function(){return this._children},Group2.prototype.children=function(){return this._children.slice()},Group2.prototype.childAt=function(idx){return this._children[idx]},Group2.prototype.childOfName=function(name){for(var children=this._children,i=0;i&lt;children.length;i++)if(children[i].name===name)return children[i]},Group2.prototype.childCount=function(){return this._children.length},Group2.prototype.add=function(child){return child&amp;&amp;child!==this&amp;&amp;child.parent!==this&amp;&amp;(this._children.push(child),this._doAdd(child)),this},Group2.prototype.addBefore=function(child,nextSibling2){if(child&amp;&amp;child!==this&amp;&amp;child.parent!==this&amp;&amp;nextSibling2&amp;&amp;nextSibling2.parent===this){var children=this._children,idx=children.indexOf(nextSibling2);idx&gt;=0&amp;&amp;(children.splice(idx,0,child),this._doAdd(child))}return this},Group2.prototype.replace=function(oldChild,newChild){var idx=indexOf(this._children,oldChild);return idx&gt;=0&amp;&amp;this.replaceAt(newChild,idx),this},Group2.prototype.replaceAt=function(child,index){var children=this._children,old=children[index];if(child&amp;&amp;child!==this&amp;&amp;child.parent!==this&amp;&amp;child!==old){children[index]=child,old.parent=null;var zr=this.__zr;zr&amp;&amp;old.removeSelfFromZr(zr),this._doAdd(child)}return this},Group2.prototype._doAdd=function(child){child.parent&amp;&amp;child.parent.remove(child),child.parent=this;var zr=this.__zr;zr&amp;&amp;zr!==child.__zr&amp;&amp;child.addSelfToZr(zr),zr&amp;&amp;zr.refresh()},Group2.prototype.remove=function(child){var zr=this.__zr,children=this._children,idx=indexOf(children,child);return idx&lt;0||(children.splice(idx,1),child.parent=null,zr&amp;&amp;child.removeSelfFromZr(zr),zr&amp;&amp;zr.refresh()),this},Group2.prototype.removeAll=function(){for(var children=this._children,zr=this.__zr,i=0;i&lt;children.length;i++){var child=children[i];zr&amp;&amp;child.removeSelfFromZr(zr),child.parent=null}return children.length=0,this},Group2.prototype.eachChild=function(cb,context){for(var children=this._children,i=0;i&lt;children.length;i++){var child=children[i];cb.call(context,child,i)}return this},Group2.prototype.traverse=function(cb,context){for(var i=0;i&lt;this._children.length;i++){var child=this._children[i],stopped=cb.call(context,child);child.isGroup&amp;&amp;!stopped&amp;&amp;child.traverse(cb,context)}return this},Group2.prototype.addSelfToZr=function(zr){_super.prototype.addSelfToZr.call(this,zr);for(var i=0;i&lt;this._children.length;i++){this._children[i].addSelfToZr(zr)}},Group2.prototype.removeSelfFromZr=function(zr){_super.prototype.removeSelfFromZr.call(this,zr);for(var i=0;i&lt;this._children.length;i++){this._children[i].removeSelfFromZr(zr)}},Group2.prototype.getBoundingRect=function(includeChildren){for(var tmpRect2=new BoundingRect(0,0,0,0),children=includeChildren||this._children,tmpMat=[],rect=null,i=0;i&lt;children.length;i++){var child=children[i];if(!child.ignore&amp;&amp;!child.invisible){var childRect=child.getBoundingRect(),transform2=child.getLocalTransform(tmpMat);transform2?(BoundingRect.applyTransform(tmpRect2,childRect,transform2),(rect=rect||tmpRect2.clone()).union(tmpRect2)):(rect=rect||childRect.clone()).union(childRect)}}return rect||tmpRect2},Group2}(Element);Group$3.prototype.type="group";var painterCtors={},instances$1={};var ssrDataGetter,ZRender=function(){function ZRender2(id,dom,opts){var _this=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,opts=opts||{},this.dom=dom,this.id=id;var storage2=new Storage,rendererType=opts.renderer||"canvas";painterCtors[rendererType]||(rendererType=keys(painterCtors)[0]),opts.useDirtyRect=null!=opts.useDirtyRect&amp;&amp;opts.useDirtyRect;var painter=new painterCtors[rendererType](dom,storage2,opts,id),ssrMode=opts.ssr||painter.ssrOnly;this.storage=storage2,this.painter=painter;var pointerSize,handlerProxy=env.node||env.worker||ssrMode?null:new HandlerDomProxy(painter.getViewportRoot(),painter.root),useCoarsePointer=opts.useCoarsePointer;(null==useCoarsePointer||"auto"===useCoarsePointer?env.touchEventsSupported:!!useCoarsePointer)&amp;&amp;(pointerSize=retrieve2(opts.pointerSize,44)),this.handler=new Handler(storage2,painter,handlerProxy,painter.root,pointerSize),this.animation=new Animation({stage:{update:ssrMode?null:function(){return _this._flush(!0)}}}),ssrMode||this.animation.start()}return ZRender2.prototype.add=function(el){!this._disposed&amp;&amp;el&amp;&amp;(this.storage.addRoot(el),el.addSelfToZr(this),this.refresh())},ZRender2.prototype.remove=function(el){!this._disposed&amp;&amp;el&amp;&amp;(this.storage.delRoot(el),el.removeSelfFromZr(this),this.refresh())},ZRender2.prototype.configLayer=function(zLevel,config){this._disposed||(this.painter.configLayer&amp;&amp;this.painter.configLayer(zLevel,config),this.refresh())},ZRender2.prototype.setBackgroundColor=function(backgroundColor2){this._disposed||(this.painter.setBackgroundColor&amp;&amp;this.painter.setBackgroundColor(backgroundColor2),this.refresh(),this._backgroundColor=backgroundColor2,this._darkMode=function isDarkMode(backgroundColor2){if(!backgroundColor2)return!1;if("string"==typeof backgroundColor2)return lum(backgroundColor2,1)&lt;.4;if(backgroundColor2.colorStops){for(var colorStops=backgroundColor2.colorStops,totalLum=0,len2=colorStops.length,i=0;i&lt;len2;i++)totalLum+=lum(colorStops[i].color,1);return(totalLum/=len2)&lt;.4}return!1}(backgroundColor2))},ZRender2.prototype.getBackgroundColor=function(){return this._backgroundColor},ZRender2.prototype.setDarkMode=function(darkMode){this._darkMode=darkMode},ZRender2.prototype.isDarkMode=function(){return this._darkMode},ZRender2.prototype.refreshImmediately=function(fromInside){this._disposed||(fromInside||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},ZRender2.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},ZRender2.prototype.flush=function(){this._disposed||this._flush(!1)},ZRender2.prototype._flush=function(fromInside){var triggerRendered,start2=getTime();this._needsRefresh&amp;&amp;(triggerRendered=!0,this.refreshImmediately(fromInside)),this._needsRefreshHover&amp;&amp;(triggerRendered=!0,this.refreshHoverImmediately());var end2=getTime();triggerRendered?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:end2-start2})):this._sleepAfterStill&gt;0&amp;&amp;(this._stillFrameAccum++,this._stillFrameAccum&gt;this._sleepAfterStill&amp;&amp;this.animation.stop())},ZRender2.prototype.setSleepAfterStill=function(stillFramesCount){this._sleepAfterStill=stillFramesCount},ZRender2.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},ZRender2.prototype.refreshHover=function(){this._needsRefreshHover=!0},ZRender2.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&amp;&amp;"canvas"===this.painter.getType()&amp;&amp;this.painter.refreshHover())},ZRender2.prototype.resize=function(opts){this._disposed||(opts=opts||{},this.painter.resize(opts.width,opts.height),this.handler.resize())},ZRender2.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},ZRender2.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},ZRender2.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},ZRender2.prototype.setCursorStyle=function(cursorStyle){this._disposed||this.handler.setCursorStyle(cursorStyle)},ZRender2.prototype.findHover=function(x,y){if(!this._disposed)return this.handler.findHover(x,y)},ZRender2.prototype.on=function(eventName,eventHandler,context){return this._disposed||this.handler.on(eventName,eventHandler,context),this},ZRender2.prototype.off=function(eventName,eventHandler){this._disposed||this.handler.off(eventName,eventHandler)},ZRender2.prototype.trigger=function(eventName,event){this._disposed||this.handler.trigger(eventName,event)},ZRender2.prototype.clear=function(){if(!this._disposed){for(var roots2=this.storage.getRoots(),i=0;i&lt;roots2.length;i++)roots2[i]instanceof Group$3&amp;&amp;roots2[i].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},ZRender2.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,function delInstance(id){delete instances$1[id]}(this.id))},ZRender2}();function init$2(dom,opts){var zr=new ZRender(guid(),dom,opts);return instances$1[zr.id]=zr,zr}function registerPainter(name,Ctor){painterCtors[name]=Ctor}function getElementSSRData(el){if("function"==typeof ssrDataGetter)return ssrDataGetter(el)}function registerSSRDataGetter(getter){ssrDataGetter=getter}const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:function dispose$1(zr){zr.dispose()},disposeAll:function disposeAll(){for(var key in instances$1)instances$1.hasOwnProperty(key)&amp;&amp;instances$1[key].dispose();instances$1={}},getElementSSRData:getElementSSRData,getInstance:function getInstance(id){return instances$1[id]},init:init$2,registerPainter:registerPainter,registerSSRDataGetter:registerSSRDataGetter,version:"5.6.1"},Symbol.toStringTag,{value:"Module"}));function linearMap$2(val,domain,range,clamp2){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1],subDomain=d1-d0,subRange=r1-r0;if(0===subDomain)return 0===subRange?r0:(r0+r1)/2;if(clamp2)if(subDomain&gt;0){if(val&lt;=d0)return r0;if(val&gt;=d1)return r1}else{if(val&gt;=d0)return r0;if(val&lt;=d1)return r1}else{if(val===d0)return r0;if(val===d1)return r1}return(val-d0)/subDomain*subRange+r0}function parsePercent(percent,all){switch(percent){case"center":case"middle":percent="50%";break;case"left":case"top":percent="0%";break;case"right":case"bottom":percent="100%"}return isString(percent)?function _trim(str){return str.replace(/^\s+|\s+$/g,"")}(percent).match(/%$/)?parseFloat(percent)/100*all:parseFloat(percent):null==percent?NaN:+percent}function round$3(x,precision,returnStr){return null==precision&amp;&amp;(precision=10),precision=Math.min(Math.max(0,precision),20),x=(+x).toFixed(precision),returnStr?x:+x}function asc$2(arr){return arr.sort(function(a,b){return a-b}),arr}function getPrecision(val){if(val=+val,isNaN(val))return 0;if(val&gt;1e-14)for(var e2=1,i=0;i&lt;15;i++,e2*=10)if(Math.round(val*e2)/e2===val)return i;return getPrecisionSafe(val)}function getPrecisionSafe(val){var str=val.toString().toLowerCase(),eIndex=str.indexOf("e"),exp=eIndex&gt;0?+str.slice(eIndex+1):0,significandPartLen=eIndex&gt;0?eIndex:str.length,dotIndex=str.indexOf("."),decimalPartLen=dotIndex&lt;0?0:significandPartLen-1-dotIndex;return Math.max(0,decimalPartLen-exp)}function getPixelPrecision(dataExtent,pixelExtent){var log=Math.log,LN10=Math.LN10,dataQuantity=Math.floor(log(dataExtent[1]-dataExtent[0])/LN10),sizeQuantity=Math.round(log(Math.abs(pixelExtent[1]-pixelExtent[0]))/LN10),precision=Math.min(Math.max(-dataQuantity+sizeQuantity,0),20);return isFinite(precision)?precision:20}function getPercentSeats(valueList,precision){var sum2=reduce(valueList,function(acc,val){return acc+(isNaN(val)?0:val)},0);if(0===sum2)return[];for(var digits=Math.pow(10,precision),votesPerQuota=map$1(valueList,function(val){return(isNaN(val)?0:val)/sum2*digits*100}),targetSeats=100*digits,seats=map$1(votesPerQuota,function(votes){return Math.floor(votes)}),currentSum=reduce(seats,function(acc,val){return acc+val},0),remainder=map$1(votesPerQuota,function(votes,idx){return votes-seats[idx]});currentSum&lt;targetSeats;){for(var max3=Number.NEGATIVE_INFINITY,maxId=null,i=0,len2=remainder.length;i&lt;len2;++i)remainder[i]&gt;max3&amp;&amp;(max3=remainder[i],maxId=i);++seats[maxId],remainder[maxId]=0,++currentSum}return map$1(seats,function(seat){return seat/digits})}function addSafe(val0,val1){var maxPrecision=Math.max(getPrecision(val0),getPrecision(val1)),sum2=val0+val1;return maxPrecision&gt;20?sum2:round$3(sum2,maxPrecision)}function remRadian(radian){var pi2=2*Math.PI;return(radian%pi2+pi2)%pi2}function isRadianAroundZero(val){return val&gt;-1e-4&amp;&amp;val&lt;1e-4}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(value){if(value instanceof Date)return value;if(isString(value)){var match=TIME_REG.exec(value);if(!match)return new Date(NaN);if(match[8]){var hour=+match[4]||0;return"Z"!==match[8].toUpperCase()&amp;&amp;(hour-=+match[8].slice(0,3)),new Date(Date.UTC(+match[1],+(match[2]||1)-1,+match[3]||1,hour,+(match[5]||0),+match[6]||0,match[7]?+match[7].substring(0,3):0))}return new Date(+match[1],+(match[2]||1)-1,+match[3]||1,+match[4]||0,+(match[5]||0),+match[6]||0,match[7]?+match[7].substring(0,3):0)}return null==value?new Date(NaN):new Date(Math.round(value))}function quantity(val){return Math.pow(10,quantityExponent(val))}function quantityExponent(val){if(0===val)return 0;var exp=Math.floor(Math.log(val)/Math.LN10);return val/Math.pow(10,exp)&gt;=10&amp;&amp;exp++,exp}function nice(val,round2){var exponent=quantityExponent(val),exp10=Math.pow(10,exponent),f=val/exp10;return val=(round2?f&lt;1.5?1:f&lt;2.5?2:f&lt;4?3:f&lt;7?5:10:f&lt;1?1:f&lt;2?2:f&lt;3?3:f&lt;5?5:10)*exp10,exponent&gt;=-20?+val.toFixed(exponent&lt;0?-exponent:0):val}function quantile(ascArr,p){var H=(ascArr.length-1)*p+1,h=Math.floor(H),v=+ascArr[h-1],e2=H-h;return e2?v+e2*(ascArr[h]-v):v}function reformIntervals(list){list.sort(function(a,b){return littleThan2(a,b,0)?-1:1});for(var curr=-1/0,currClose=1,i=0;i&lt;list.length;){for(var interval=list[i].interval,close_1=list[i].close,lg=0;lg&lt;2;lg++)interval[lg]&lt;=curr&amp;&amp;(interval[lg]=curr,close_1[lg]=lg?1:1-currClose),curr=interval[lg],currClose=close_1[lg];interval[0]===interval[1]&amp;&amp;close_1[0]*close_1[1]!==1?list.splice(i,1):i++}return list;function littleThan2(a,b,lg2){return a.interval[lg2]&lt;b.interval[lg2]||a.interval[lg2]===b.interval[lg2]&amp;&amp;(a.close[lg2]-b.close[lg2]===(lg2?-1:1)||!lg2&amp;&amp;littleThan2(a,b,1))}}function numericToNumber(val){var valFloat=parseFloat(val);return valFloat==val&amp;&amp;(0!==valFloat||!isString(val)||val.indexOf("x")&lt;=0)?valFloat:NaN}function isNumeric(val){return!isNaN(numericToNumber(val))}function getRandomIdBase(){return Math.round(9*Math.random())}function getGreatestCommonDividor(a,b){return 0===b?a:getGreatestCommonDividor(b,a%b)}function getLeastCommonMultiple(a,b){return null==a?b:null==b?a:a*b/getGreatestCommonDividor(a,b)}function throwError(msg){throw new Error(msg)}function interpolateNumber(p0,p1,percent){return(p1-p0)*percent+p0}function normalizeToArray(value){return value instanceof Array?value:null==value?[]:[value]}function defaultEmphasis(opt,key,subOpts){if(opt){opt[key]=opt[key]||{},opt.emphasis=opt.emphasis||{},opt.emphasis[key]=opt.emphasis[key]||{};for(var i=0,len2=subOpts.length;i&lt;len2;i++){var subOptName=subOpts[i];!opt.emphasis[key].hasOwnProperty(subOptName)&amp;&amp;opt[key].hasOwnProperty(subOptName)&amp;&amp;(opt.emphasis[key][subOptName]=opt[key][subOptName])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(dataItem){return!isObject$3(dataItem)||isArray$1(dataItem)||dataItem instanceof Date?dataItem:dataItem.value}function isDataItemOption(dataItem){return isObject$3(dataItem)&amp;&amp;!(dataItem instanceof Array)}function mappingToExists(existings,newCmptOptions,mode){var isNormalMergeMode="normalMerge"===mode,isReplaceMergeMode="replaceMerge"===mode,isReplaceAllMode="replaceAll"===mode;existings=existings||[],newCmptOptions=(newCmptOptions||[]).slice();var existingIdIdxMap=createHashMap();each$f(newCmptOptions,function(cmptOption,index){isObject$3(cmptOption)||(newCmptOptions[index]=null)});var result=function prepareResult(existings,existingIdIdxMap,mode){var result=[];if("replaceAll"===mode)return result;for(var index=0;index&lt;existings.length;index++){var existing=existings[index];existing&amp;&amp;null!=existing.id&amp;&amp;existingIdIdxMap.set(existing.id,index),result.push({existing:"replaceMerge"===mode||isComponentIdInternal(existing)?null:existing,newOption:null,keyInfo:null,brandNew:null})}return result}(existings,existingIdIdxMap,mode);return(isNormalMergeMode||isReplaceMergeMode)&amp;&amp;function mappingById(result,existings,existingIdIdxMap,newCmptOptions){each$f(newCmptOptions,function(cmptOption,index){if(cmptOption&amp;&amp;null!=cmptOption.id){var optionId=makeComparableKey(cmptOption.id),existingIdx=existingIdIdxMap.get(optionId);if(null!=existingIdx){var resultItem=result[existingIdx];assert(!resultItem.newOption,'Duplicated option on id "'+optionId+'".'),resultItem.newOption=cmptOption,resultItem.existing=existings[existingIdx],newCmptOptions[index]=null}}})}(result,existings,existingIdIdxMap,newCmptOptions),isNormalMergeMode&amp;&amp;function mappingByName(result,newCmptOptions){each$f(newCmptOptions,function(cmptOption,index){if(cmptOption&amp;&amp;null!=cmptOption.name)for(var i=0;i&lt;result.length;i++){var existing=result[i].existing;if(!result[i].newOption&amp;&amp;existing&amp;&amp;(null==existing.id||null==cmptOption.id)&amp;&amp;!isComponentIdInternal(cmptOption)&amp;&amp;!isComponentIdInternal(existing)&amp;&amp;keyExistAndEqual("name",existing,cmptOption))return result[i].newOption=cmptOption,void(newCmptOptions[index]=null)}})}(result,newCmptOptions),isNormalMergeMode||isReplaceMergeMode?function mappingByIndex(result,newCmptOptions,brandNew){each$f(newCmptOptions,function(cmptOption){if(cmptOption){for(var resultItem,nextIdx=0;(resultItem=result[nextIdx])&amp;&amp;(resultItem.newOption||isComponentIdInternal(resultItem.existing)||resultItem.existing&amp;&amp;null!=cmptOption.id&amp;&amp;!keyExistAndEqual("id",cmptOption,resultItem.existing));)nextIdx++;resultItem?(resultItem.newOption=cmptOption,resultItem.brandNew=brandNew):result.push({newOption:cmptOption,brandNew:brandNew,existing:null,keyInfo:null}),nextIdx++}})}(result,newCmptOptions,isReplaceMergeMode):isReplaceAllMode&amp;&amp;function mappingInReplaceAllMode(result,newCmptOptions){each$f(newCmptOptions,function(cmptOption){result.push({newOption:cmptOption,brandNew:!0,existing:null,keyInfo:null})})}(result,newCmptOptions),function makeIdAndName(mapResult){var idMap=createHashMap();each$f(mapResult,function(item){var existing=item.existing;existing&amp;&amp;idMap.set(existing.id,item)}),each$f(mapResult,function(item){var opt=item.newOption;assert(!opt||null==opt.id||!idMap.get(opt.id)||idMap.get(opt.id)===item,"id duplicates: "+(opt&amp;&amp;opt.id)),opt&amp;&amp;null!=opt.id&amp;&amp;idMap.set(opt.id,item),!item.keyInfo&amp;&amp;(item.keyInfo={})}),each$f(mapResult,function(item,index){var existing=item.existing,opt=item.newOption,keyInfo=item.keyInfo;if(isObject$3(opt)){if(keyInfo.name=null!=opt.name?makeComparableKey(opt.name):existing?existing.name:"series\0"+index,existing)keyInfo.id=makeComparableKey(existing.id);else if(null!=opt.id)keyInfo.id=makeComparableKey(opt.id);else{var idNum=0;do{keyInfo.id="\0"+keyInfo.name+"\0"+idNum++}while(idMap.get(keyInfo.id))}idMap.set(keyInfo.id,item)}})}(result),result}function keyExistAndEqual(attr,obj1,obj2){var key1=convertOptionIdName(obj1[attr],null),key2=convertOptionIdName(obj2[attr],null);return null!=key1&amp;&amp;null!=key2&amp;&amp;key1===key2}function makeComparableKey(val){return convertOptionIdName(val,"")}function convertOptionIdName(idOrName,defaultValue){return null==idOrName?defaultValue:isString(idOrName)?idOrName:isNumber(idOrName)||isStringSafe(idOrName)?idOrName+"":defaultValue}function isNameSpecified(componentModel){var name=componentModel.name;return!(!name||!name.indexOf("series\0"))}function isComponentIdInternal(cmptOption){return cmptOption&amp;&amp;null!=cmptOption.id&amp;&amp;0===makeComparableKey(cmptOption.id).indexOf("\0_ec_\0")}function queryDataIndex(data,payload){return null!=payload.dataIndexInside?payload.dataIndexInside:null!=payload.dataIndex?isArray$1(payload.dataIndex)?map$1(payload.dataIndex,function(value){return data.indexOfRawIndex(value)}):data.indexOfRawIndex(payload.dataIndex):null!=payload.name?isArray$1(payload.name)?map$1(payload.name,function(value){return data.indexOfName(value)}):data.indexOfName(payload.name):void 0}function makeInner(){var key="__ec_inner_"+innerUniqueIndex++;return function(hostObj){return hostObj[key]||(hostObj[key]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(ecModel,finderInput,opt){var _a2=preParseFinder(finderInput,opt),mainTypeSpecified=_a2.mainTypeSpecified,queryOptionMap=_a2.queryOptionMap,result=_a2.others,defaultMainType=opt?opt.defaultMainType:null;return!mainTypeSpecified&amp;&amp;defaultMainType&amp;&amp;queryOptionMap.set(defaultMainType,{}),queryOptionMap.each(function(queryOption,mainType){var queryResult=queryReferringComponents(ecModel,mainType,queryOption,{useDefault:defaultMainType===mainType,enableAll:!opt||null==opt.enableAll||opt.enableAll,enableNone:!opt||null==opt.enableNone||opt.enableNone});result[mainType+"Models"]=queryResult.models,result[mainType+"Model"]=queryResult.models[0]}),result}function preParseFinder(finderInput,opt){var finder;if(isString(finderInput)){var obj={};obj[finderInput+"Index"]=0,finder=obj}else finder=finderInput;var queryOptionMap=createHashMap(),others={},mainTypeSpecified=!1;return each$f(finder,function(value,key){if("dataIndex"!==key&amp;&amp;"dataIndexInside"!==key){var parsedKey=key.match(/^(\w+)(Index|Id|Name)$/)||[],mainType=parsedKey[1],queryType=(parsedKey[2]||"").toLowerCase();if(mainType&amp;&amp;queryType&amp;&amp;!(opt&amp;&amp;opt.includeMainTypes&amp;&amp;indexOf(opt.includeMainTypes,mainType)&lt;0))mainTypeSpecified=mainTypeSpecified||!!mainType,(queryOptionMap.get(mainType)||queryOptionMap.set(mainType,{}))[queryType]=value}else others[key]=value}),{mainTypeSpecified:mainTypeSpecified,queryOptionMap:queryOptionMap,others:others}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(ecModel,mainType,userOption,opt){opt=opt||SINGLE_REFERRING;var indexOption=userOption.index,idOption=userOption.id,nameOption=userOption.name,result={models:null,specified:null!=indexOption||null!=idOption||null!=nameOption};if(!result.specified){var firstCmpt=void 0;return result.models=opt.useDefault&amp;&amp;(firstCmpt=ecModel.getComponent(mainType))?[firstCmpt]:[],result}return"none"===indexOption||!1===indexOption?(assert(opt.enableNone,'`"none"` or `false` is not a valid value on index option.'),result.models=[],result):("all"===indexOption&amp;&amp;(assert(opt.enableAll,'`"all"` is not a valid value on index option.'),indexOption=idOption=nameOption=null),result.models=ecModel.queryComponents({mainType:mainType,index:indexOption,id:idOption,name:nameOption}),result)}function setAttribute(dom,key,value){dom.setAttribute?dom.setAttribute(key,value):dom[key]=value}function groupData(array,getKey2){var buckets=createHashMap(),keys2=[];return each$f(array,function(item){var key=getKey2(item);(buckets.get(key)||(keys2.push(key),buckets.set(key,[]))).push(item)}),{keys:keys2,buckets:buckets}}function interpolateRawValues(data,precision,sourceValue,targetValue,percent){var isAutoPrecision=null==precision||"auto"===precision;if(null==targetValue)return targetValue;if(isNumber(targetValue))return round$3(value=interpolateNumber(sourceValue||0,targetValue,percent),isAutoPrecision?Math.max(getPrecision(sourceValue||0),getPrecision(targetValue)):precision);if(isString(targetValue))return percent&lt;1?sourceValue:targetValue;for(var interpolated=[],leftArr=sourceValue,rightArr=targetValue,length_1=Math.max(leftArr?leftArr.length:0,rightArr.length),i=0;i&lt;length_1;++i){var info=data.getDimensionInfo(i);if(info&amp;&amp;"ordinal"===info.type)interpolated[i]=(percent&lt;1&amp;&amp;leftArr?leftArr:rightArr)[i];else{var leftVal=leftArr&amp;&amp;leftArr[i]?leftArr[i]:0,rightVal=rightArr[i],value=interpolateNumber(leftVal,rightVal,percent);interpolated[i]=round$3(value,isAutoPrecision?Math.max(getPrecision(leftVal),getPrecision(rightVal)):precision)}}return interpolated}var IS_CONTAINER="___EC__COMPONENT__CONTAINER___";function parseClassType(componentType){var ret={main:"",sub:""};if(componentType){var typeArr=componentType.split(".");ret.main=typeArr[0]||"",ret.sub=typeArr[1]||""}return ret}function enableClassExtend(rootClz,mandatoryMethods){rootClz.$constructor=rootClz,rootClz.extend=function(proto2){var ExtendedClass,superClass=this;return!function isESClass(fn){return isFunction(fn)&amp;&amp;/^class\s/.test(Function.prototype.toString.call(fn))}(superClass)?(ExtendedClass=function(){(proto2.$constructor||superClass).apply(this,arguments)},inherits(ExtendedClass,this)):ExtendedClass=function(_super){function class_1(){return _super.apply(this,arguments)||this}return __extends$1(class_1,_super),class_1}(superClass),extend(ExtendedClass.prototype,proto2),ExtendedClass.___EC__EXTENDED_CLASS___=!0,ExtendedClass.extend=this.extend,ExtendedClass.superCall=superCall,ExtendedClass.superApply=superApply,ExtendedClass.superClass=superClass,ExtendedClass}}function mountExtend(SubClz,SupperClz){SubClz.extend=SupperClz.extend}var classBase=Math.round(10*Math.random());function superCall(context,methodName){for(var args=[],_i=2;_i&lt;arguments.length;_i++)args[_i-2]=arguments[_i];return this.superClass.prototype[methodName].apply(context,args)}function superApply(context,methodName,args){return this.superClass.prototype[methodName].apply(context,args)}function enableClassManagement(target){var storage2={};target.registerClass=function(clz){var componentFullType=clz.type||clz.prototype.type;if(componentFullType){!function checkClassType(componentType){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType),'componentType "'+componentType+'" illegal')}(componentFullType),clz.prototype.type=componentFullType;var componentTypeInfo=parseClassType(componentFullType);if(componentTypeInfo.sub){if(componentTypeInfo.sub!==IS_CONTAINER){var container=function makeContainer(componentTypeInfo){var container=storage2[componentTypeInfo.main];container&amp;&amp;container[IS_CONTAINER]||((container=storage2[componentTypeInfo.main]={})[IS_CONTAINER]=!0);return container}(componentTypeInfo);container[componentTypeInfo.sub]=clz}}else storage2[componentTypeInfo.main]=clz}return clz},target.getClass=function(mainType,subType,throwWhenNotFound){var clz=storage2[mainType];if(clz&amp;&amp;clz[IS_CONTAINER]&amp;&amp;(clz=subType?clz[subType]:null),throwWhenNotFound&amp;&amp;!clz)throw new Error(subType?"Component "+mainType+"."+(subType||"")+" is used but not imported.":mainType+".type should be specified.");return clz},target.getClassesByMainType=function(componentType){var componentTypeInfo=parseClassType(componentType),result=[],obj=storage2[componentTypeInfo.main];return obj&amp;&amp;obj[IS_CONTAINER]?each$f(obj,function(o,type){type!==IS_CONTAINER&amp;&amp;result.push(o)}):result.push(obj),result},target.hasClass=function(componentType){var componentTypeInfo=parseClassType(componentType);return!!storage2[componentTypeInfo.main]},target.getAllClassMainTypes=function(){var types=[];return each$f(storage2,function(obj,type){types.push(type)}),types},target.hasSubTypes=function(componentType){var componentTypeInfo=parseClassType(componentType),obj=storage2[componentTypeInfo.main];return obj&amp;&amp;obj[IS_CONTAINER]}}function makeStyleMapper(properties,ignoreParent){for(var i=0;i&lt;properties.length;i++)properties[i][1]||(properties[i][1]=properties[i][0]);return ignoreParent=ignoreParent||!1,function(model,excludes,includes){for(var style={},i2=0;i2&lt;properties.length;i2++){var propName=properties[i2][1];if(!(excludes&amp;&amp;indexOf(excludes,propName)&gt;=0||includes&amp;&amp;indexOf(includes,propName)&lt;0)){var val=model.getShallow(propName,ignoreParent);null!=val&amp;&amp;(style[properties[i2][0]]=val)}}return style}}var getAreaStyle=makeStyleMapper([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),AreaStyleMixin=function(){function AreaStyleMixin2(){}return AreaStyleMixin2.prototype.getAreaStyle=function(excludes,includes){return getAreaStyle(this,excludes,includes)},AreaStyleMixin2}(),globalImageCache=new LRU(50);function findExistImage(newImageOrSrc){if("string"==typeof newImageOrSrc){var cachedImgObj=globalImageCache.get(newImageOrSrc);return cachedImgObj&amp;&amp;cachedImgObj.image}return newImageOrSrc}function createOrUpdateImage(newImageOrSrc,image,hostEl,onload,cbPayload){if(newImageOrSrc){if("string"==typeof newImageOrSrc){if(image&amp;&amp;image.__zrImageSrc===newImageOrSrc||!hostEl)return image;var cachedImgObj=globalImageCache.get(newImageOrSrc),pendingWrap={hostEl:hostEl,cb:onload,cbPayload:cbPayload};return cachedImgObj?!isImageReady(image=cachedImgObj.image)&amp;&amp;cachedImgObj.pending.push(pendingWrap):((image=platformApi.loadImage(newImageOrSrc,imageOnLoad,imageOnLoad)).__zrImageSrc=newImageOrSrc,globalImageCache.put(newImageOrSrc,image.__cachedImgObj={image:image,pending:[pendingWrap]})),image}return newImageOrSrc}return image}function imageOnLoad(){var cachedImgObj=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var i=0;i&lt;cachedImgObj.pending.length;i++){var pendingWrap=cachedImgObj.pending[i],cb=pendingWrap.cb;cb&amp;&amp;cb(this,pendingWrap.cbPayload),pendingWrap.hostEl.dirty()}cachedImgObj.pending.length=0}function isImageReady(image){return image&amp;&amp;image.width&amp;&amp;image.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText2(out2,text,containerWidth,font,ellipsis,options){if(!containerWidth)return out2.text="",void(out2.isTruncated=!1);var textLines=(text+"").split("\n");options=prepareTruncateOptions(containerWidth,font,ellipsis,options);for(var isTruncated=!1,truncateOut={},i=0,len2=textLines.length;i&lt;len2;i++)truncateSingleLine(truncateOut,textLines[i],options),textLines[i]=truncateOut.textLine,isTruncated=isTruncated||truncateOut.isTruncated;out2.text=textLines.join("\n"),out2.isTruncated=isTruncated}function prepareTruncateOptions(containerWidth,font,ellipsis,options){var preparedOpts=extend({},options=options||{});preparedOpts.font=font,ellipsis=retrieve2(ellipsis,"..."),preparedOpts.maxIterations=retrieve2(options.maxIterations,2);var minChar=preparedOpts.minChar=retrieve2(options.minChar,0);preparedOpts.cnCharWidth=getWidth("国",font);var ascCharWidth=preparedOpts.ascCharWidth=getWidth("a",font);preparedOpts.placeholder=retrieve2(options.placeholder,"");for(var contentWidth=containerWidth=Math.max(0,containerWidth-1),i=0;i&lt;minChar&amp;&amp;contentWidth&gt;=ascCharWidth;i++)contentWidth-=ascCharWidth;var ellipsisWidth=getWidth(ellipsis,font);return ellipsisWidth&gt;contentWidth&amp;&amp;(ellipsis="",ellipsisWidth=0),contentWidth=containerWidth-ellipsisWidth,preparedOpts.ellipsis=ellipsis,preparedOpts.ellipsisWidth=ellipsisWidth,preparedOpts.contentWidth=contentWidth,preparedOpts.containerWidth=containerWidth,preparedOpts}function truncateSingleLine(out2,textLine,options){var containerWidth=options.containerWidth,font=options.font,contentWidth=options.contentWidth;if(!containerWidth)return out2.textLine="",void(out2.isTruncated=!1);var lineWidth=getWidth(textLine,font);if(lineWidth&lt;=containerWidth)return out2.textLine=textLine,void(out2.isTruncated=!1);for(var j=0;;j++){if(lineWidth&lt;=contentWidth||j&gt;=options.maxIterations){textLine+=options.ellipsis;break}var subLength=0===j?estimateLength(textLine,contentWidth,options.ascCharWidth,options.cnCharWidth):lineWidth&gt;0?Math.floor(textLine.length*contentWidth/lineWidth):0;lineWidth=getWidth(textLine=textLine.substr(0,subLength),font)}""===textLine&amp;&amp;(textLine=options.placeholder),out2.textLine=textLine,out2.isTruncated=!0}function estimateLength(text,contentWidth,ascCharWidth,cnCharWidth){for(var width=0,i=0,len2=text.length;i&lt;len2&amp;&amp;width&lt;contentWidth;i++){var charCode=text.charCodeAt(i);width+=0&lt;=charCode&amp;&amp;charCode&lt;=127?ascCharWidth:cnCharWidth}return i}var RichTextToken=function(){return function RichTextToken2(){}}(),RichTextLine=function(){return function RichTextLine2(tokens){this.tokens=[],tokens&amp;&amp;(this.tokens=tokens)}}(),RichTextContentBlock=function(){return function RichTextContentBlock2(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}}();function pushTokens(block,str,style,wrapInfo,styleName){var strLines,linesWidths,isEmptyStr=""===str,tokenStyle=styleName&amp;&amp;style.rich[styleName]||{},lines=block.lines,font=tokenStyle.font||style.font,newLine=!1;if(wrapInfo){var tokenPadding=tokenStyle.padding,tokenPaddingH=tokenPadding?tokenPadding[1]+tokenPadding[3]:0;if(null!=tokenStyle.width&amp;&amp;"auto"!==tokenStyle.width){var outerWidth_1=parsePercent$1(tokenStyle.width,wrapInfo.width)+tokenPaddingH;lines.length&gt;0&amp;&amp;outerWidth_1+wrapInfo.accumWidth&gt;wrapInfo.width&amp;&amp;(strLines=str.split("\n"),newLine=!0),wrapInfo.accumWidth=outerWidth_1}else{var res=wrapText(str,font,wrapInfo.width,wrapInfo.breakAll,wrapInfo.accumWidth);wrapInfo.accumWidth=res.accumWidth+tokenPaddingH,linesWidths=res.linesWidths,strLines=res.lines}}else strLines=str.split("\n");for(var i=0;i&lt;strLines.length;i++){var text=strLines[i],token=new RichTextToken;if(token.styleName=styleName,token.text=text,token.isLineHolder=!text&amp;&amp;!isEmptyStr,"number"==typeof tokenStyle.width?token.width=tokenStyle.width:token.width=linesWidths?linesWidths[i]:getWidth(text,font),i||newLine)lines.push(new RichTextLine([token]));else{var tokens=(lines[lines.length-1]||(lines[0]=new RichTextLine)).tokens,tokensLen=tokens.length;1===tokensLen&amp;&amp;tokens[0].isLineHolder?tokens[0]=token:(text||!tokensLen||isEmptyStr)&amp;&amp;tokens.push(token)}}}var breakCharMap=reduce(",&amp;?/;] ".split(""),function(obj,ch){return obj[ch]=!0,obj},{});function isWordBreakChar(ch){return!function isAlphabeticLetter(ch){var code=ch.charCodeAt(0);return code&gt;=32&amp;&amp;code&lt;=591||code&gt;=880&amp;&amp;code&lt;=4351||code&gt;=4608&amp;&amp;code&lt;=5119||code&gt;=7680&amp;&amp;code&lt;=8303}(ch)||!!breakCharMap[ch]}function wrapText(text,font,lineWidth,isBreakAll,lastAccumWidth){for(var lines=[],linesWidths=[],line="",currentWord="",currentWordWidth=0,accumWidth=0,i=0;i&lt;text.length;i++){var ch=text.charAt(i);if("\n"!==ch){var chWidth=getWidth(ch,font),inWord=!isBreakAll&amp;&amp;!isWordBreakChar(ch);(lines.length?accumWidth+chWidth&gt;lineWidth:lastAccumWidth+accumWidth+chWidth&gt;lineWidth)?accumWidth?(line||currentWord)&amp;&amp;(inWord?(line||(line=currentWord,currentWord="",accumWidth=currentWordWidth=0),lines.push(line),linesWidths.push(accumWidth-currentWordWidth),currentWord+=ch,line="",accumWidth=currentWordWidth+=chWidth):(currentWord&amp;&amp;(line+=currentWord,currentWord="",currentWordWidth=0),lines.push(line),linesWidths.push(accumWidth),line=ch,accumWidth=chWidth)):inWord?(lines.push(currentWord),linesWidths.push(currentWordWidth),currentWord=ch,currentWordWidth=chWidth):(lines.push(ch),linesWidths.push(chWidth)):(accumWidth+=chWidth,inWord?(currentWord+=ch,currentWordWidth+=chWidth):(currentWord&amp;&amp;(line+=currentWord,currentWord="",currentWordWidth=0),line+=ch))}else currentWord&amp;&amp;(line+=currentWord,accumWidth+=currentWordWidth),lines.push(line),linesWidths.push(accumWidth),line="",currentWord="",currentWordWidth=0,accumWidth=0}return lines.length||line||(line=text,currentWord="",currentWordWidth=0),currentWord&amp;&amp;(line+=currentWord),line&amp;&amp;(lines.push(line),linesWidths.push(accumWidth)),1===lines.length&amp;&amp;(accumWidth+=lastAccumWidth),{accumWidth:accumWidth,lines:lines,linesWidths:linesWidths}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(10*Math.random()),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(_super){function Displayable2(props){return _super.call(this,props)||this}var dispProto;return __extends(Displayable2,_super),Displayable2.prototype._init=function(props){for(var keysArr=keys(props),i=0;i&lt;keysArr.length;i++){var key=keysArr[i];"style"===key?this.useStyle(props[key]):_super.prototype.attrKV.call(this,key,props[key])}this.style||this.useStyle({})},Displayable2.prototype.beforeBrush=function(){},Displayable2.prototype.afterBrush=function(){},Displayable2.prototype.innerBeforeBrush=function(){},Displayable2.prototype.innerAfterBrush=function(){},Displayable2.prototype.shouldBePainted=function(viewWidth,viewHeight,considerClipPath,considerAncestors){var m2=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&amp;&amp;function isDisplayableCulled(el,width,height){tmpRect.copy(el.getBoundingRect()),el.transform&amp;&amp;tmpRect.applyTransform(el.transform);return viewRect.width=width,viewRect.height=height,!tmpRect.intersect(viewRect)}(this,viewWidth,viewHeight)||m2&amp;&amp;!m2[0]&amp;&amp;!m2[3])return!1;if(considerClipPath&amp;&amp;this.__clipPaths)for(var i=0;i&lt;this.__clipPaths.length;++i)if(this.__clipPaths[i].isZeroArea())return!1;if(considerAncestors&amp;&amp;this.parent)for(var parent_1=this.parent;parent_1;){if(parent_1.ignore)return!1;parent_1=parent_1.parent}return!0},Displayable2.prototype.contain=function(x,y){return this.rectContain(x,y)},Displayable2.prototype.traverse=function(cb,context){cb.call(context,this)},Displayable2.prototype.rectContain=function(x,y){var coord=this.transformCoordToLocal(x,y);return this.getBoundingRect().contain(coord[0],coord[1])},Displayable2.prototype.getPaintRect=function(){var rect=this._paintRect;if(!this._paintRect||this.__dirty){var transform2=this.transform,elRect=this.getBoundingRect(),style=this.style,shadowSize=style.shadowBlur||0,shadowOffsetX=style.shadowOffsetX||0,shadowOffsetY=style.shadowOffsetY||0;rect=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),transform2?BoundingRect.applyTransform(rect,elRect,transform2):rect.copy(elRect),(shadowSize||shadowOffsetX||shadowOffsetY)&amp;&amp;(rect.width+=2*shadowSize+Math.abs(shadowOffsetX),rect.height+=2*shadowSize+Math.abs(shadowOffsetY),rect.x=Math.min(rect.x,rect.x+shadowOffsetX-shadowSize),rect.y=Math.min(rect.y,rect.y+shadowOffsetY-shadowSize));var tolerance=this.dirtyRectTolerance;rect.isZero()||(rect.x=Math.floor(rect.x-tolerance),rect.y=Math.floor(rect.y-tolerance),rect.width=Math.ceil(rect.width+1+2*tolerance),rect.height=Math.ceil(rect.height+1+2*tolerance))}return rect},Displayable2.prototype.setPrevPaintRect=function(paintRect){paintRect?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(paintRect)):this._prevPaintRect=null},Displayable2.prototype.getPrevPaintRect=function(){return this._prevPaintRect},Displayable2.prototype.animateStyle=function(loop){return this.animate("style",loop)},Displayable2.prototype.updateDuringAnimation=function(targetKey){"style"===targetKey?this.dirtyStyle():this.markRedraw()},Displayable2.prototype.attrKV=function(key,value){"style"!==key?_super.prototype.attrKV.call(this,key,value):this.style?this.setStyle(value):this.useStyle(value)},Displayable2.prototype.setStyle=function(keyOrObj,value){return"string"==typeof keyOrObj?this.style[keyOrObj]=value:extend(this.style,keyOrObj),this.dirtyStyle(),this},Displayable2.prototype.dirtyStyle=function(notRedraw){notRedraw||this.markRedraw(),this.__dirty|=2,this._rect&amp;&amp;(this._rect=null)},Displayable2.prototype.dirty=function(){this.dirtyStyle()},Displayable2.prototype.styleChanged=function(){return!!(2&amp;this.__dirty)},Displayable2.prototype.styleUpdated=function(){this.__dirty&amp;=-3},Displayable2.prototype.createStyle=function(obj){return createObject(DEFAULT_COMMON_STYLE,obj)},Displayable2.prototype.useStyle=function(obj){obj[STYLE_MAGIC_KEY]||(obj=this.createStyle(obj)),this.__inHover?this.__hoverStyle=obj:this.style=obj,this.dirtyStyle()},Displayable2.prototype.isStyleObject=function(obj){return obj[STYLE_MAGIC_KEY]},Displayable2.prototype._innerSaveToNormal=function(toState){_super.prototype._innerSaveToNormal.call(this,toState);var normalState=this._normalState;toState.style&amp;&amp;!normalState.style&amp;&amp;(normalState.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(toState,normalState,PRIMARY_STATES_KEYS)},Displayable2.prototype._applyStateObj=function(stateName,state,normalState,keepCurrentStates,transition,animationCfg){_super.prototype._applyStateObj.call(this,stateName,state,normalState,keepCurrentStates,transition,animationCfg);var targetStyle,needsRestoreToNormal=!(state&amp;&amp;keepCurrentStates);if(state&amp;&amp;state.style?transition?keepCurrentStates?targetStyle=state.style:(targetStyle=this._mergeStyle(this.createStyle(),normalState.style),this._mergeStyle(targetStyle,state.style)):(targetStyle=this._mergeStyle(this.createStyle(),keepCurrentStates?this.style:normalState.style),this._mergeStyle(targetStyle,state.style)):needsRestoreToNormal&amp;&amp;(targetStyle=normalState.style),targetStyle)if(transition){var sourceStyle=this.style;if(this.style=this.createStyle(needsRestoreToNormal?{}:sourceStyle),needsRestoreToNormal)for(var changedKeys=keys(sourceStyle),i=0;i&lt;changedKeys.length;i++){(key=changedKeys[i])in targetStyle&amp;&amp;(targetStyle[key]=targetStyle[key],this.style[key]=sourceStyle[key])}var targetKeys=keys(targetStyle);for(i=0;i&lt;targetKeys.length;i++){var key=targetKeys[i];this.style[key]=this.style[key]}this._transitionState(stateName,{style:targetStyle},animationCfg,this.getAnimationStyleProps())}else this.useStyle(targetStyle);var statesKeys=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS;for(i=0;i&lt;statesKeys.length;i++){key=statesKeys[i];state&amp;&amp;null!=state[key]?this[key]=state[key]:needsRestoreToNormal&amp;&amp;null!=normalState[key]&amp;&amp;(this[key]=normalState[key])}},Displayable2.prototype._mergeStates=function(states){for(var mergedStyle,mergedState=_super.prototype._mergeStates.call(this,states),i=0;i&lt;states.length;i++){var state=states[i];state.style&amp;&amp;(mergedStyle=mergedStyle||{},this._mergeStyle(mergedStyle,state.style))}return mergedStyle&amp;&amp;(mergedState.style=mergedStyle),mergedState},Displayable2.prototype._mergeStyle=function(targetStyle,sourceStyle){return extend(targetStyle,sourceStyle),targetStyle},Displayable2.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},Displayable2.initDefaultProps=((dispProto=Displayable2.prototype).type="displayable",dispProto.invisible=!1,dispProto.z=0,dispProto.z2=0,dispProto.zlevel=0,dispProto.culling=!1,dispProto.cursor="pointer",dispProto.rectHover=!1,dispProto.incremental=!1,dispProto._rect=null,dispProto.dirtyRectTolerance=0,void(dispProto.__dirty=3)),Displayable2}(Element),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=2*Math.PI,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(points2,min3,max3){if(0!==points2.length){for(var p=points2[0],left=p[0],right=p[0],top=p[1],bottom=p[1],i=1;i&lt;points2.length;i++)p=points2[i],left=mathMin$9(left,p[0]),right=mathMax$9(right,p[0]),top=mathMin$9(top,p[1]),bottom=mathMax$9(bottom,p[1]);min3[0]=left,min3[1]=top,max3[0]=right,max3[1]=bottom}}function fromLine(x0,y0,x1,y1,min3,max3){min3[0]=mathMin$9(x0,x1),min3[1]=mathMin$9(y0,y1),max3[0]=mathMax$9(x0,x1),max3[1]=mathMax$9(y0,y1)}var xDim=[],yDim=[];function fromCubic(x0,y0,x1,y1,x2,y2,x3,y3,min3,max3){var cubicExtrema$1=cubicExtrema,cubicAt$1=cubicAt,n=cubicExtrema$1(x0,x1,x2,x3,xDim);min3[0]=1/0,min3[1]=1/0,max3[0]=-1/0,max3[1]=-1/0;for(var i=0;i&lt;n;i++){var x=cubicAt$1(x0,x1,x2,x3,xDim[i]);min3[0]=mathMin$9(x,min3[0]),max3[0]=mathMax$9(x,max3[0])}n=cubicExtrema$1(y0,y1,y2,y3,yDim);for(i=0;i&lt;n;i++){var y=cubicAt$1(y0,y1,y2,y3,yDim[i]);min3[1]=mathMin$9(y,min3[1]),max3[1]=mathMax$9(y,max3[1])}min3[0]=mathMin$9(x0,min3[0]),max3[0]=mathMax$9(x0,max3[0]),min3[0]=mathMin$9(x3,min3[0]),max3[0]=mathMax$9(x3,max3[0]),min3[1]=mathMin$9(y0,min3[1]),max3[1]=mathMax$9(y0,max3[1]),min3[1]=mathMin$9(y3,min3[1]),max3[1]=mathMax$9(y3,max3[1])}function fromQuadratic(x0,y0,x1,y1,x2,y2,min3,max3){var quadraticExtremum$1=quadraticExtremum,quadraticAt2=quadraticAt$1,tx=mathMax$9(mathMin$9(quadraticExtremum$1(x0,x1,x2),1),0),ty=mathMax$9(mathMin$9(quadraticExtremum$1(y0,y1,y2),1),0),x=quadraticAt2(x0,x1,x2,tx),y=quadraticAt2(y0,y1,y2,ty);min3[0]=mathMin$9(x0,x2,x),min3[1]=mathMin$9(y0,y2,y),max3[0]=mathMax$9(x0,x2,x),max3[1]=mathMax$9(y0,y2,y)}function fromArc(x,y,rx,ry,startAngle,endAngle,anticlockwise,min3,max3){var vec2Min=min$1,vec2Max=max$1,diff=Math.abs(startAngle-endAngle);if(diff%PI2$8&lt;1e-4&amp;&amp;diff&gt;1e-4)return min3[0]=x-rx,min3[1]=y-ry,max3[0]=x+rx,void(max3[1]=y+ry);if(start[0]=mathCos$4(startAngle)*rx+x,start[1]=mathSin$4(startAngle)*ry+y,end[0]=mathCos$4(endAngle)*rx+x,end[1]=mathSin$4(endAngle)*ry+y,vec2Min(min3,start,end),vec2Max(max3,start,end),(startAngle%=PI2$8)&lt;0&amp;&amp;(startAngle+=PI2$8),(endAngle%=PI2$8)&lt;0&amp;&amp;(endAngle+=PI2$8),startAngle&gt;endAngle&amp;&amp;!anticlockwise?endAngle+=PI2$8:startAngle&lt;endAngle&amp;&amp;anticlockwise&amp;&amp;(startAngle+=PI2$8),anticlockwise){var tmp=endAngle;endAngle=startAngle,startAngle=tmp}for(var angle=0;angle&lt;endAngle;angle+=Math.PI/2)angle&gt;startAngle&amp;&amp;(extremity[0]=mathCos$4(angle)*rx+x,extremity[1]=mathSin$4(angle)*ry+y,vec2Min(min3,extremity,min3),vec2Max(max3,extremity,max3))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=2*PI$8,hasTypedArray="undefined"!=typeof Float32Array,tmpAngles=[];function modPI2(radian){return Math.round(radian/PI$8*1e8)/1e8%2*PI$8}function normalizeArcAngles(angles,anticlockwise){var newStartAngle=modPI2(angles[0]);newStartAngle&lt;0&amp;&amp;(newStartAngle+=PI2$7);var delta=newStartAngle-angles[0],newEndAngle=angles[1];newEndAngle+=delta,!anticlockwise&amp;&amp;newEndAngle-newStartAngle&gt;=PI2$7?newEndAngle=newStartAngle+PI2$7:anticlockwise&amp;&amp;newStartAngle-newEndAngle&gt;=PI2$7?newEndAngle=newStartAngle-PI2$7:!anticlockwise&amp;&amp;newStartAngle&gt;newEndAngle?newEndAngle=newStartAngle+(PI2$7-modPI2(newStartAngle-newEndAngle)):anticlockwise&amp;&amp;newStartAngle&lt;newEndAngle&amp;&amp;(newEndAngle=newStartAngle-(PI2$7-modPI2(newEndAngle-newStartAngle))),angles[0]=newStartAngle,angles[1]=newEndAngle}var PathProxy=function(){function PathProxy2(notSaveData){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,notSaveData&amp;&amp;(this._saveData=!1),this._saveData&amp;&amp;(this.data=[])}var proto2;return PathProxy2.prototype.increaseVersion=function(){this._version++},PathProxy2.prototype.getVersion=function(){return this._version},PathProxy2.prototype.setScale=function(sx,sy,segmentIgnoreThreshold){(segmentIgnoreThreshold=segmentIgnoreThreshold||0)&gt;0&amp;&amp;(this._ux=mathAbs$2(segmentIgnoreThreshold/devicePixelRatio/sx)||0,this._uy=mathAbs$2(segmentIgnoreThreshold/devicePixelRatio/sy)||0)},PathProxy2.prototype.setDPR=function(dpr2){this.dpr=dpr2},PathProxy2.prototype.setContext=function(ctx){this._ctx=ctx},PathProxy2.prototype.getContext=function(){return this._ctx},PathProxy2.prototype.beginPath=function(){return this._ctx&amp;&amp;this._ctx.beginPath(),this.reset(),this},PathProxy2.prototype.reset=function(){this._saveData&amp;&amp;(this._len=0),this._pathSegLen&amp;&amp;(this._pathSegLen=null,this._pathLen=0),this._version++},PathProxy2.prototype.moveTo=function(x,y){return this._drawPendingPt(),this.addData(CMD$4.M,x,y),this._ctx&amp;&amp;this._ctx.moveTo(x,y),this._x0=x,this._y0=y,this._xi=x,this._yi=y,this},PathProxy2.prototype.lineTo=function(x,y){var dx=mathAbs$2(x-this._xi),dy=mathAbs$2(y-this._yi),exceedUnit=dx&gt;this._ux||dy&gt;this._uy;if(this.addData(CMD$4.L,x,y),this._ctx&amp;&amp;exceedUnit&amp;&amp;this._ctx.lineTo(x,y),exceedUnit)this._xi=x,this._yi=y,this._pendingPtDist=0;else{var d2=dx*dx+dy*dy;d2&gt;this._pendingPtDist&amp;&amp;(this._pendingPtX=x,this._pendingPtY=y,this._pendingPtDist=d2)}return this},PathProxy2.prototype.bezierCurveTo=function(x1,y1,x2,y2,x3,y3){return this._drawPendingPt(),this.addData(CMD$4.C,x1,y1,x2,y2,x3,y3),this._ctx&amp;&amp;this._ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3),this._xi=x3,this._yi=y3,this},PathProxy2.prototype.quadraticCurveTo=function(x1,y1,x2,y2){return this._drawPendingPt(),this.addData(CMD$4.Q,x1,y1,x2,y2),this._ctx&amp;&amp;this._ctx.quadraticCurveTo(x1,y1,x2,y2),this._xi=x2,this._yi=y2,this},PathProxy2.prototype.arc=function(cx,cy,r,startAngle,endAngle,anticlockwise){this._drawPendingPt(),tmpAngles[0]=startAngle,tmpAngles[1]=endAngle,normalizeArcAngles(tmpAngles,anticlockwise),startAngle=tmpAngles[0];var delta=(endAngle=tmpAngles[1])-startAngle;return this.addData(CMD$4.A,cx,cy,r,r,startAngle,delta,0,anticlockwise?0:1),this._ctx&amp;&amp;this._ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise),this._xi=mathCos$3(endAngle)*r+cx,this._yi=mathSin$3(endAngle)*r+cy,this},PathProxy2.prototype.arcTo=function(x1,y1,x2,y2,radius){return this._drawPendingPt(),this._ctx&amp;&amp;this._ctx.arcTo(x1,y1,x2,y2,radius),this},PathProxy2.prototype.rect=function(x,y,w,h){return this._drawPendingPt(),this._ctx&amp;&amp;this._ctx.rect(x,y,w,h),this.addData(CMD$4.R,x,y,w,h),this},PathProxy2.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var ctx=this._ctx,x0=this._x0,y0=this._y0;return ctx&amp;&amp;ctx.closePath(),this._xi=x0,this._yi=y0,this},PathProxy2.prototype.fill=function(ctx){ctx&amp;&amp;ctx.fill(),this.toStatic()},PathProxy2.prototype.stroke=function(ctx){ctx&amp;&amp;ctx.stroke(),this.toStatic()},PathProxy2.prototype.len=function(){return this._len},PathProxy2.prototype.setData=function(data){var len2=data.length;this.data&amp;&amp;this.data.length===len2||!hasTypedArray||(this.data=new Float32Array(len2));for(var i=0;i&lt;len2;i++)this.data[i]=data[i];this._len=len2},PathProxy2.prototype.appendPath=function(path){path instanceof Array||(path=[path]);for(var len2=path.length,appendSize=0,offset=this._len,i=0;i&lt;len2;i++)appendSize+=path[i].len();hasTypedArray&amp;&amp;this.data instanceof Float32Array&amp;&amp;(this.data=new Float32Array(offset+appendSize));for(i=0;i&lt;len2;i++)for(var appendPathData=path[i].data,k=0;k&lt;appendPathData.length;k++)this.data[offset++]=appendPathData[k];this._len=offset},PathProxy2.prototype.addData=function(cmd,a,b,c,d,e2,f,g,h){if(this._saveData){var data=this.data;this._len+arguments.length&gt;data.length&amp;&amp;(this._expandData(),data=this.data);for(var i=0;i&lt;arguments.length;i++)data[this._len++]=arguments[i]}},PathProxy2.prototype._drawPendingPt=function(){this._pendingPtDist&gt;0&amp;&amp;(this._ctx&amp;&amp;this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},PathProxy2.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var newData=[],i=0;i&lt;this._len;i++)newData[i]=this.data[i];this.data=newData}},PathProxy2.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var data=this.data;data instanceof Array&amp;&amp;(data.length=this._len,hasTypedArray&amp;&amp;this._len&gt;11&amp;&amp;(this.data=new Float32Array(data)))}},PathProxy2.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var i,data=this.data,xi=0,yi=0,x0=0,y0=0;for(i=0;i&lt;this._len;){var cmd=data[i++],isFirst=1===i;switch(isFirst&amp;&amp;(x0=xi=data[i],y0=yi=data[i+1]),cmd){case CMD$4.M:xi=x0=data[i++],yi=y0=data[i++],min2[0]=x0,min2[1]=y0,max2[0]=x0,max2[1]=y0;break;case CMD$4.L:fromLine(xi,yi,data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD$4.C:fromCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD$4.Q:fromQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD$4.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++],endAngle=data[i++]+startAngle;i+=1;var anticlockwise=!data[i++];isFirst&amp;&amp;(x0=mathCos$3(startAngle)*rx+cx,y0=mathSin$3(startAngle)*ry+cy),fromArc(cx,cy,rx,ry,startAngle,endAngle,anticlockwise,min2,max2),xi=mathCos$3(endAngle)*rx+cx,yi=mathSin$3(endAngle)*ry+cy;break;case CMD$4.R:fromLine(x0=xi=data[i++],y0=yi=data[i++],x0+data[i++],y0+data[i++],min2,max2);break;case CMD$4.Z:xi=x0,yi=y0}min$1(min,min,min2),max$1(max,max,max2)}return 0===i&amp;&amp;(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},PathProxy2.prototype._calculateLength=function(){var data=this.data,len2=this._len,ux=this._ux,uy=this._uy,xi=0,yi=0,x0=0,y0=0;this._pathSegLen||(this._pathSegLen=[]);for(var pathSegLen=this._pathSegLen,pathTotalLen=0,segCount=0,i=0;i&lt;len2;){var cmd=data[i++],isFirst=1===i;isFirst&amp;&amp;(x0=xi=data[i],y0=yi=data[i+1]);var l=-1;switch(cmd){case CMD$4.M:xi=x0=data[i++],yi=y0=data[i++];break;case CMD$4.L:var x2=data[i++],dy=(y2=data[i++])-yi;(mathAbs$2(dx=x2-xi)&gt;ux||mathAbs$2(dy)&gt;uy||i===len2-1)&amp;&amp;(l=Math.sqrt(dx*dx+dy*dy),xi=x2,yi=y2);break;case CMD$4.C:var x1=data[i++],y1=data[i++],y2=(x2=data[i++],data[i++]),x3=data[i++],y3=data[i++];l=cubicLength(xi,yi,x1,y1,x2,y2,x3,y3,10),xi=x3,yi=y3;break;case CMD$4.Q:l=quadraticLength(xi,yi,x1=data[i++],y1=data[i++],x2=data[i++],y2=data[i++],10),xi=x2,yi=y2;break;case CMD$4.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++],delta=data[i++],endAngle=delta+startAngle;i+=1,isFirst&amp;&amp;(x0=mathCos$3(startAngle)*rx+cx,y0=mathSin$3(startAngle)*ry+cy),l=mathMax$8(rx,ry)*mathMin$8(PI2$7,Math.abs(delta)),xi=mathCos$3(endAngle)*rx+cx,yi=mathSin$3(endAngle)*ry+cy;break;case CMD$4.R:x0=xi=data[i++],y0=yi=data[i++],l=2*data[i++]+2*data[i++];break;case CMD$4.Z:var dx=x0-xi;dy=y0-yi;l=Math.sqrt(dx*dx+dy*dy),xi=x0,yi=y0}l&gt;=0&amp;&amp;(pathSegLen[segCount++]=l,pathTotalLen+=l)}return this._pathLen=pathTotalLen,pathTotalLen},PathProxy2.prototype.rebuildPath=function(ctx,percent){var x0,y0,xi,yi,x,y,pathSegLen,displayedLength,pendingPtX,pendingPtY,d=this.data,ux=this._ux,uy=this._uy,len2=this._len,drawPart=percent&lt;1,accumLength=0,segCount=0,pendingPtDist=0;if(!drawPart||(this._pathSegLen||this._calculateLength(),pathSegLen=this._pathSegLen,displayedLength=percent*this._pathLen))lo:for(var i=0;i&lt;len2;){var cmd=d[i++],isFirst=1===i;switch(isFirst&amp;&amp;(x0=xi=d[i],y0=yi=d[i+1]),cmd!==CMD$4.L&amp;&amp;pendingPtDist&gt;0&amp;&amp;(ctx.lineTo(pendingPtX,pendingPtY),pendingPtDist=0),cmd){case CMD$4.M:x0=xi=d[i++],y0=yi=d[i++],ctx.moveTo(xi,yi);break;case CMD$4.L:x=d[i++],y=d[i++];var dx=mathAbs$2(x-xi),dy=mathAbs$2(y-yi);if(dx&gt;ux||dy&gt;uy){if(drawPart){if(accumLength+(l=pathSegLen[segCount++])&gt;displayedLength){var t=(displayedLength-accumLength)/l;ctx.lineTo(xi*(1-t)+x*t,yi*(1-t)+y*t);break lo}accumLength+=l}ctx.lineTo(x,y),xi=x,yi=y,pendingPtDist=0}else{var d2=dx*dx+dy*dy;d2&gt;pendingPtDist&amp;&amp;(pendingPtX=x,pendingPtY=y,pendingPtDist=d2)}break;case CMD$4.C:var x1=d[i++],y1=d[i++],x2=d[i++],y2=d[i++],x3=d[i++],y3=d[i++];if(drawPart){if(accumLength+(l=pathSegLen[segCount++])&gt;displayedLength){cubicSubdivide(xi,x1,x2,x3,t=(displayedLength-accumLength)/l,tmpOutX),cubicSubdivide(yi,y1,y2,y3,t,tmpOutY),ctx.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break lo}accumLength+=l}ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3),xi=x3,yi=y3;break;case CMD$4.Q:x1=d[i++],y1=d[i++],x2=d[i++],y2=d[i++];if(drawPart){if(accumLength+(l=pathSegLen[segCount++])&gt;displayedLength){quadraticSubdivide(xi,x1,x2,t=(displayedLength-accumLength)/l,tmpOutX),quadraticSubdivide(yi,y1,y2,t,tmpOutY),ctx.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break lo}accumLength+=l}ctx.quadraticCurveTo(x1,y1,x2,y2),xi=x2,yi=y2;break;case CMD$4.A:var cx=d[i++],cy=d[i++],rx=d[i++],ry=d[i++],startAngle=d[i++],delta=d[i++],psi=d[i++],anticlockwise=!d[i++],r=rx&gt;ry?rx:ry,isEllipse=mathAbs$2(rx-ry)&gt;.001,endAngle=startAngle+delta,breakBuild=!1;if(drawPart)accumLength+(l=pathSegLen[segCount++])&gt;displayedLength&amp;&amp;(endAngle=startAngle+delta*(displayedLength-accumLength)/l,breakBuild=!0),accumLength+=l;if(isEllipse&amp;&amp;ctx.ellipse?ctx.ellipse(cx,cy,rx,ry,psi,startAngle,endAngle,anticlockwise):ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise),breakBuild)break lo;isFirst&amp;&amp;(x0=mathCos$3(startAngle)*rx+cx,y0=mathSin$3(startAngle)*ry+cy),xi=mathCos$3(endAngle)*rx+cx,yi=mathSin$3(endAngle)*ry+cy;break;case CMD$4.R:x0=xi=d[i],y0=yi=d[i+1],x=d[i++],y=d[i++];var width=d[i++],height=d[i++];if(drawPart){if(accumLength+(l=pathSegLen[segCount++])&gt;displayedLength){var d_1=displayedLength-accumLength;ctx.moveTo(x,y),ctx.lineTo(x+mathMin$8(d_1,width),y),(d_1-=width)&gt;0&amp;&amp;ctx.lineTo(x+width,y+mathMin$8(d_1,height)),(d_1-=height)&gt;0&amp;&amp;ctx.lineTo(x+mathMax$8(width-d_1,0),y+height),(d_1-=width)&gt;0&amp;&amp;ctx.lineTo(x,y+mathMax$8(height-d_1,0));break lo}accumLength+=l}ctx.rect(x,y,width,height);break;case CMD$4.Z:if(drawPart){var l;if(accumLength+(l=pathSegLen[segCount++])&gt;displayedLength){t=(displayedLength-accumLength)/l;ctx.lineTo(xi*(1-t)+x0*t,yi*(1-t)+y0*t);break lo}accumLength+=l}ctx.closePath(),xi=x0,yi=y0}}},PathProxy2.prototype.clone=function(){var newProxy=new PathProxy2,data=this.data;return newProxy.data=data.slice?data.slice():Array.prototype.slice.call(data),newProxy._len=this._len,newProxy},PathProxy2.CMD=CMD$4,PathProxy2.initDefaultProps=((proto2=PathProxy2.prototype)._saveData=!0,proto2._ux=0,proto2._uy=0,proto2._pendingPtDist=0,void(proto2._version=0)),PathProxy2}();function containStroke$4(x0,y0,x1,y1,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth,_a2=0;if(y&gt;y0+_l&amp;&amp;y&gt;y1+_l||y&lt;y0-_l&amp;&amp;y&lt;y1-_l||x&gt;x0+_l&amp;&amp;x&gt;x1+_l||x&lt;x0-_l&amp;&amp;x&lt;x1-_l)return!1;if(x0===x1)return Math.abs(x-x0)&lt;=_l/2;var tmp=(_a2=(y0-y1)/(x0-x1))*x-y+(x0*y1-x1*y0)/(x0-x1);return tmp*tmp/(_a2*_a2+1)&lt;=_l/2*_l/2}function containStroke$3(x0,y0,x1,y1,x2,y2,x3,y3,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth;return!(y&gt;y0+_l&amp;&amp;y&gt;y1+_l&amp;&amp;y&gt;y2+_l&amp;&amp;y&gt;y3+_l||y&lt;y0-_l&amp;&amp;y&lt;y1-_l&amp;&amp;y&lt;y2-_l&amp;&amp;y&lt;y3-_l||x&gt;x0+_l&amp;&amp;x&gt;x1+_l&amp;&amp;x&gt;x2+_l&amp;&amp;x&gt;x3+_l||x&lt;x0-_l&amp;&amp;x&lt;x1-_l&amp;&amp;x&lt;x2-_l&amp;&amp;x&lt;x3-_l)&amp;&amp;cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,null)&lt;=_l/2}function containStroke$2(x0,y0,x1,y1,x2,y2,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth;return!(y&gt;y0+_l&amp;&amp;y&gt;y1+_l&amp;&amp;y&gt;y2+_l||y&lt;y0-_l&amp;&amp;y&lt;y1-_l&amp;&amp;y&lt;y2-_l||x&gt;x0+_l&amp;&amp;x&gt;x1+_l&amp;&amp;x&gt;x2+_l||x&lt;x0-_l&amp;&amp;x&lt;x1-_l&amp;&amp;x&lt;x2-_l)&amp;&amp;quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,null)&lt;=_l/2}var PI2$6=2*Math.PI;function normalizeRadian(angle){return(angle%=PI2$6)&lt;0&amp;&amp;(angle+=PI2$6),angle}var PI2$5=2*Math.PI;function containStroke$1(cx,cy,r,startAngle,endAngle,anticlockwise,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth;x-=cx,y-=cy;var d=Math.sqrt(x*x+y*y);if(d-_l&gt;r||d+_l&lt;r)return!1;if(Math.abs(startAngle-endAngle)%PI2$5&lt;1e-4)return!0;if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle),endAngle=normalizeRadian(tmp)}else startAngle=normalizeRadian(startAngle),endAngle=normalizeRadian(endAngle);startAngle&gt;endAngle&amp;&amp;(endAngle+=PI2$5);var angle=Math.atan2(y,x);return angle&lt;0&amp;&amp;(angle+=PI2$5),angle&gt;=startAngle&amp;&amp;angle&lt;=endAngle||angle+PI2$5&gt;=startAngle&amp;&amp;angle+PI2$5&lt;=endAngle}function windingLine(x0,y0,x1,y1,x,y){if(y&gt;y0&amp;&amp;y&gt;y1||y&lt;y0&amp;&amp;y&lt;y1)return 0;if(y1===y0)return 0;var t=(y-y0)/(y1-y0),dir3=y1&lt;y0?1:-1;1!==t&amp;&amp;0!==t||(dir3=y1&lt;y0?.5:-.5);var x_=t*(x1-x0)+x0;return x_===x?1/0:x_&gt;x?dir3:0}var CMD$3=PathProxy.CMD,PI2$4=2*Math.PI;var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var tmp=extrema[0];extrema[0]=extrema[1],extrema[1]=tmp}function windingCubic(x0,y0,x1,y1,x2,y2,x3,y3,x,y){if(y&gt;y0&amp;&amp;y&gt;y1&amp;&amp;y&gt;y2&amp;&amp;y&gt;y3||y&lt;y0&amp;&amp;y&lt;y1&amp;&amp;y&lt;y2&amp;&amp;y&lt;y3)return 0;var nRoots=cubicRootAt(y0,y1,y2,y3,y,roots);if(0===nRoots)return 0;for(var w=0,nExtrema=-1,y0_=void 0,y1_=void 0,i=0;i&lt;nRoots;i++){var t=roots[i],unit=0===t||1===t?.5:1;cubicAt(x0,x1,x2,x3,t)&lt;x||(nExtrema&lt;0&amp;&amp;(nExtrema=cubicExtrema(y0,y1,y2,y3,extrema),extrema[1]&lt;extrema[0]&amp;&amp;nExtrema&gt;1&amp;&amp;swapExtrema(),y0_=cubicAt(y0,y1,y2,y3,extrema[0]),nExtrema&gt;1&amp;&amp;(y1_=cubicAt(y0,y1,y2,y3,extrema[1]))),2===nExtrema?t&lt;extrema[0]?w+=y0_&lt;y0?unit:-unit:t&lt;extrema[1]?w+=y1_&lt;y0_?unit:-unit:w+=y3&lt;y1_?unit:-unit:t&lt;extrema[0]?w+=y0_&lt;y0?unit:-unit:w+=y3&lt;y0_?unit:-unit)}return w}function windingQuadratic(x0,y0,x1,y1,x2,y2,x,y){if(y&gt;y0&amp;&amp;y&gt;y1&amp;&amp;y&gt;y2||y&lt;y0&amp;&amp;y&lt;y1&amp;&amp;y&lt;y2)return 0;var nRoots=function quadraticRootAt(p0,p1,p2,val,roots2){var a=p0-2*p1+p2,b=2*(p1-p0),c=p0-val,n=0;if(isAroundZero$1(a))isNotAroundZero$1(b)&amp;&amp;(t1=-c/b)&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(roots2[n++]=t1);else{var disc=b*b-4*a*c;if(isAroundZero$1(disc))(t1=-b/(2*a))&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(roots2[n++]=t1);else if(disc&gt;0){var t1,discSqrt=mathSqrt$3(disc),t2=(-b-discSqrt)/(2*a);(t1=(-b+discSqrt)/(2*a))&gt;=0&amp;&amp;t1&lt;=1&amp;&amp;(roots2[n++]=t1),t2&gt;=0&amp;&amp;t2&lt;=1&amp;&amp;(roots2[n++]=t2)}}return n}(y0,y1,y2,y,roots);if(0===nRoots)return 0;var t=quadraticExtremum(y0,y1,y2);if(t&gt;=0&amp;&amp;t&lt;=1){for(var w=0,y_=quadraticAt$1(y0,y1,y2,t),i=0;i&lt;nRoots;i++){var unit=0===roots[i]||1===roots[i]?.5:1;quadraticAt$1(x0,x1,x2,roots[i])&lt;x||(roots[i]&lt;t?w+=y_&lt;y0?unit:-unit:w+=y2&lt;y_?unit:-unit)}return w}unit=0===roots[0]||1===roots[0]?.5:1;return quadraticAt$1(x0,x1,x2,roots[0])&lt;x?0:y2&lt;y0?unit:-unit}function windingArc(cx,cy,r,startAngle,endAngle,anticlockwise,x,y){if((y-=cy)&gt;r||y&lt;-r)return 0;var tmp=Math.sqrt(r*r-y*y);roots[0]=-tmp,roots[1]=tmp;var dTheta=Math.abs(startAngle-endAngle);if(dTheta&lt;1e-4)return 0;if(dTheta&gt;=PI2$4-1e-4){startAngle=0,endAngle=PI2$4;var dir3=anticlockwise?1:-1;return x&gt;=roots[0]+cx&amp;&amp;x&lt;=roots[1]+cx?dir3:0}if(startAngle&gt;endAngle){var tmp_1=startAngle;startAngle=endAngle,endAngle=tmp_1}startAngle&lt;0&amp;&amp;(startAngle+=PI2$4,endAngle+=PI2$4);for(var w=0,i=0;i&lt;2;i++){var x_=roots[i];if(x_+cx&gt;x){var angle=Math.atan2(y,x_);dir3=anticlockwise?1:-1;angle&lt;0&amp;&amp;(angle=PI2$4+angle),(angle&gt;=startAngle&amp;&amp;angle&lt;=endAngle||angle+PI2$4&gt;=startAngle&amp;&amp;angle+PI2$4&lt;=endAngle)&amp;&amp;(angle&gt;Math.PI/2&amp;&amp;angle&lt;1.5*Math.PI&amp;&amp;(dir3=-dir3),w+=dir3)}}return w}function containPath(path,lineWidth,isStroke,x,y){for(var x1,y1,data=path.data,len2=path.len(),w=0,xi=0,yi=0,x0=0,y0=0,i=0;i&lt;len2;){var cmd=data[i++],isFirst=1===i;switch(cmd===CMD$3.M&amp;&amp;i&gt;1&amp;&amp;(isStroke||(w+=windingLine(xi,yi,x0,y0,x,y))),isFirst&amp;&amp;(x0=xi=data[i],y0=yi=data[i+1]),cmd){case CMD$3.M:xi=x0=data[i++],yi=y0=data[i++];break;case CMD$3.L:if(isStroke){if(containStroke$4(xi,yi,data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingLine(xi,yi,data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD$3.C:if(isStroke){if(containStroke$3(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD$3.Q:if(isStroke){if(containStroke$2(xi,yi,data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD$3.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],theta=data[i++],dTheta=data[i++];i+=1;var anticlockwise=!!(1-data[i++]);x1=Math.cos(theta)*rx+cx,y1=Math.sin(theta)*ry+cy,isFirst?(x0=x1,y0=y1):w+=windingLine(xi,yi,x1,y1,x,y);var _x=(x-cx)*ry/rx+cx;if(isStroke){if(containStroke$1(cx,cy,ry,theta,theta+dTheta,anticlockwise,lineWidth,_x,y))return!0}else w+=windingArc(cx,cy,ry,theta,theta+dTheta,anticlockwise,_x,y);xi=Math.cos(theta+dTheta)*rx+cx,yi=Math.sin(theta+dTheta)*ry+cy;break;case CMD$3.R:if(x0=xi=data[i++],y0=yi=data[i++],x1=x0+data[i++],y1=y0+data[i++],isStroke){if(containStroke$4(x0,y0,x1,y0,lineWidth,x,y)||containStroke$4(x1,y0,x1,y1,lineWidth,x,y)||containStroke$4(x1,y1,x0,y1,lineWidth,x,y)||containStroke$4(x0,y1,x0,y0,lineWidth,x,y))return!0}else w+=windingLine(x1,y0,x1,y1,x,y),w+=windingLine(x0,y1,x0,y0,x,y);break;case CMD$3.Z:if(isStroke){if(containStroke$4(xi,yi,x0,y0,lineWidth,x,y))return!0}else w+=windingLine(xi,yi,x0,y0,x,y);xi=x0,yi=y0}}return isStroke||function isAroundEqual$1(a,b){return Math.abs(a-b)&lt;1e-4}(yi,y0)||(w+=windingLine(xi,yi,x0,y0,x,y)||0),0!==w}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(_super){function Path2(opts){return _super.call(this,opts)||this}var pathProto;return __extends(Path2,_super),Path2.prototype.update=function(){var _this=this;_super.prototype.update.call(this);var style=this.style;if(style.decal){var decalEl=this._decalEl=this._decalEl||new Path2;decalEl.buildPath===Path2.prototype.buildPath&amp;&amp;(decalEl.buildPath=function(ctx){_this.buildPath(ctx,_this.shape)}),decalEl.silent=!0;var decalElStyle=decalEl.style;for(var key in style)decalElStyle[key]!==style[key]&amp;&amp;(decalElStyle[key]=style[key]);decalElStyle.fill=style.fill?style.decal:null,decalElStyle.decal=null,decalElStyle.shadowColor=null,style.strokeFirst&amp;&amp;(decalElStyle.stroke=null);for(var i=0;i&lt;pathCopyParams.length;++i)decalEl[pathCopyParams[i]]=this[pathCopyParams[i]];decalEl.__dirty|=1}else this._decalEl&amp;&amp;(this._decalEl=null)},Path2.prototype.getDecalElement=function(){return this._decalEl},Path2.prototype._init=function(props){var keysArr=keys(props);this.shape=this.getDefaultShape();var defaultStyle=this.getDefaultStyle();defaultStyle&amp;&amp;this.useStyle(defaultStyle);for(var i=0;i&lt;keysArr.length;i++){var key=keysArr[i],value=props[key];"style"===key?this.style?extend(this.style,value):this.useStyle(value):"shape"===key?extend(this.shape,value):_super.prototype.attrKV.call(this,key,value)}this.style||this.useStyle({})},Path2.prototype.getDefaultStyle=function(){return null},Path2.prototype.getDefaultShape=function(){return{}},Path2.prototype.canBeInsideText=function(){return this.hasFill()},Path2.prototype.getInsideTextFill=function(){var pathFill=this.style.fill;if("none"!==pathFill){if(isString(pathFill)){var fillLum=lum(pathFill,0);return fillLum&gt;.5?"#333":fillLum&gt;.2?"#eee":"#ccc"}if(pathFill)return"#ccc"}return"#333"},Path2.prototype.getInsideTextStroke=function(textFill){var pathFill=this.style.fill;if(isString(pathFill)){var zr=this.__zr;if(!(!zr||!zr.isDarkMode())===lum(textFill,0)&lt;.4)return pathFill}},Path2.prototype.buildPath=function(ctx,shapeCfg,inBatch){},Path2.prototype.pathUpdated=function(){this.__dirty&amp;=-5},Path2.prototype.getUpdatedPathProxy=function(inBatch){return!this.path&amp;&amp;this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,inBatch),this.path},Path2.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},Path2.prototype.hasStroke=function(){var style=this.style,stroke=style.stroke;return!(null==stroke||"none"===stroke||!(style.lineWidth&gt;0))},Path2.prototype.hasFill=function(){var fill=this.style.fill;return null!=fill&amp;&amp;"none"!==fill},Path2.prototype.getBoundingRect=function(){var rect=this._rect,style=this.style,needsUpdateRect=!rect;if(needsUpdateRect){var firstInvoke=!1;this.path||(firstInvoke=!0,this.createPathProxy());var path=this.path;(firstInvoke||4&amp;this.__dirty)&amp;&amp;(path.beginPath(),this.buildPath(path,this.shape,!1),this.pathUpdated()),rect=path.getBoundingRect()}if(this._rect=rect,this.hasStroke()&amp;&amp;this.path&amp;&amp;this.path.len()&gt;0){var rectStroke=this._rectStroke||(this._rectStroke=rect.clone());if(this.__dirty||needsUpdateRect){rectStroke.copy(rect);var lineScale=style.strokeNoScale?this.getLineScale():1,w=style.lineWidth;if(!this.hasFill()){var strokeContainThreshold=this.strokeContainThreshold;w=Math.max(w,null==strokeContainThreshold?4:strokeContainThreshold)}lineScale&gt;1e-10&amp;&amp;(rectStroke.width+=w/lineScale,rectStroke.height+=w/lineScale,rectStroke.x-=w/lineScale/2,rectStroke.y-=w/lineScale/2)}return rectStroke}return rect},Path2.prototype.contain=function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect(),style=this.style;if(x=localPos[0],y=localPos[1],rect.contain(x,y)){var pathProxy=this.path;if(this.hasStroke()){var lineWidth=style.lineWidth,lineScale=style.strokeNoScale?this.getLineScale():1;if(lineScale&gt;1e-10&amp;&amp;(this.hasFill()||(lineWidth=Math.max(lineWidth,this.strokeContainThreshold)),function containStroke(pathProxy,lineWidth,x,y){return containPath(pathProxy,lineWidth,!0,x,y)}(pathProxy,lineWidth/lineScale,x,y)))return!0}if(this.hasFill())return function contain$2(pathProxy,x,y){return containPath(pathProxy,0,!1,x,y)}(pathProxy,x,y)}return!1},Path2.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&amp;&amp;(this._rect=null),this._decalEl&amp;&amp;this._decalEl.dirtyShape(),this.markRedraw()},Path2.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},Path2.prototype.animateShape=function(loop){return this.animate("shape",loop)},Path2.prototype.updateDuringAnimation=function(targetKey){"style"===targetKey?this.dirtyStyle():"shape"===targetKey?this.dirtyShape():this.markRedraw()},Path2.prototype.attrKV=function(key,value){"shape"===key?this.setShape(value):_super.prototype.attrKV.call(this,key,value)},Path2.prototype.setShape=function(keyOrObj,value){var shape=this.shape;return shape||(shape=this.shape={}),"string"==typeof keyOrObj?shape[keyOrObj]=value:extend(shape,keyOrObj),this.dirtyShape(),this},Path2.prototype.shapeChanged=function(){return!!(4&amp;this.__dirty)},Path2.prototype.createStyle=function(obj){return createObject(DEFAULT_PATH_STYLE,obj)},Path2.prototype._innerSaveToNormal=function(toState){_super.prototype._innerSaveToNormal.call(this,toState);var normalState=this._normalState;toState.shape&amp;&amp;!normalState.shape&amp;&amp;(normalState.shape=extend({},this.shape))},Path2.prototype._applyStateObj=function(stateName,state,normalState,keepCurrentStates,transition,animationCfg){_super.prototype._applyStateObj.call(this,stateName,state,normalState,keepCurrentStates,transition,animationCfg);var targetShape,needsRestoreToNormal=!(state&amp;&amp;keepCurrentStates);if(state&amp;&amp;state.shape?transition?keepCurrentStates?targetShape=state.shape:(targetShape=extend({},normalState.shape),extend(targetShape,state.shape)):(targetShape=extend({},keepCurrentStates?this.shape:normalState.shape),extend(targetShape,state.shape)):needsRestoreToNormal&amp;&amp;(targetShape=normalState.shape),targetShape)if(transition){this.shape=extend({},this.shape);for(var targetShapePrimaryProps={},shapeKeys=keys(targetShape),i=0;i&lt;shapeKeys.length;i++){var key=shapeKeys[i];"object"==typeof targetShape[key]?this.shape[key]=targetShape[key]:targetShapePrimaryProps[key]=targetShape[key]}this._transitionState(stateName,{shape:targetShapePrimaryProps},animationCfg)}else this.shape=targetShape,this.dirtyShape()},Path2.prototype._mergeStates=function(states){for(var mergedShape,mergedState=_super.prototype._mergeStates.call(this,states),i=0;i&lt;states.length;i++){var state=states[i];state.shape&amp;&amp;(mergedShape=mergedShape||{},this._mergeStyle(mergedShape,state.shape))}return mergedShape&amp;&amp;(mergedState.shape=mergedShape),mergedState},Path2.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},Path2.prototype.isZeroArea=function(){return!1},Path2.extend=function(defaultProps){var Sub=function(_super2){function Sub2(opts){var _this=_super2.call(this,opts)||this;return defaultProps.init&amp;&amp;defaultProps.init.call(_this,opts),_this}return __extends(Sub2,_super2),Sub2.prototype.getDefaultStyle=function(){return clone$4(defaultProps.style)},Sub2.prototype.getDefaultShape=function(){return clone$4(defaultProps.shape)},Sub2}(Path2);for(var key in defaultProps)"function"==typeof defaultProps[key]&amp;&amp;(Sub.prototype[key]=defaultProps[key]);return Sub},Path2.initDefaultProps=((pathProto=Path2.prototype).type="path",pathProto.strokeContainThreshold=5,pathProto.segmentIgnoreThreshold=0,pathProto.subPixelOptimize=!1,pathProto.autoBatch=!1,void(pathProto.__dirty=7)),Path2}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(_super){function TSpan2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends(TSpan2,_super),TSpan2.prototype.hasStroke=function(){var style=this.style,stroke=style.stroke;return null!=stroke&amp;&amp;"none"!==stroke&amp;&amp;style.lineWidth&gt;0},TSpan2.prototype.hasFill=function(){var fill=this.style.fill;return null!=fill&amp;&amp;"none"!==fill},TSpan2.prototype.createStyle=function(obj){return createObject(DEFAULT_TSPAN_STYLE,obj)},TSpan2.prototype.setBoundingRect=function(rect){this._rect=rect},TSpan2.prototype.getBoundingRect=function(){var style=this.style;if(!this._rect){var text=style.text;null!=text?text+="":text="";var rect=getBoundingRect(text,style.font,style.textAlign,style.textBaseline);if(rect.x+=style.x||0,rect.y+=style.y||0,this.hasStroke()){var w=style.lineWidth;rect.x-=w/2,rect.y-=w/2,rect.width+=w,rect.height+=w}this._rect=rect}return this._rect},TSpan2.initDefaultProps=void(TSpan2.prototype.dirtyRectTolerance=10),TSpan2}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};var ZRImage=function(_super){function ZRImage2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends(ZRImage2,_super),ZRImage2.prototype.createStyle=function(obj){return createObject(DEFAULT_IMAGE_STYLE,obj)},ZRImage2.prototype._getSize=function(dim){var style=this.style,size=style[dim];if(null!=size)return size;var imageSource=function isImageLike$1(source){return!!(source&amp;&amp;"string"!=typeof source&amp;&amp;source.width&amp;&amp;source.height)}(style.image)?style.image:this.__image;if(!imageSource)return 0;var otherDim="width"===dim?"height":"width",otherDimSize=style[otherDim];return null==otherDimSize?imageSource[dim]:imageSource[dim]/imageSource[otherDim]*otherDimSize},ZRImage2.prototype.getWidth=function(){return this._getSize("width")},ZRImage2.prototype.getHeight=function(){return this._getSize("height")},ZRImage2.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},ZRImage2.prototype.getBoundingRect=function(){var style=this.style;return this._rect||(this._rect=new BoundingRect(style.x||0,style.y||0,this.getWidth(),this.getHeight())),this._rect},ZRImage2}(Displayable);ZRImage.prototype.type="image";var round$2=Math.round;function subPixelOptimizeLine$1(outputShape,inputShape,style){if(inputShape){var x1=inputShape.x1,x2=inputShape.x2,y1=inputShape.y1,y2=inputShape.y2;outputShape.x1=x1,outputShape.x2=x2,outputShape.y1=y1,outputShape.y2=y2;var lineWidth=style&amp;&amp;style.lineWidth;return lineWidth?(round$2(2*x1)===round$2(2*x2)&amp;&amp;(outputShape.x1=outputShape.x2=subPixelOptimize$1(x1,lineWidth,!0)),round$2(2*y1)===round$2(2*y2)&amp;&amp;(outputShape.y1=outputShape.y2=subPixelOptimize$1(y1,lineWidth,!0)),outputShape):outputShape}}function subPixelOptimizeRect$1(outputShape,inputShape,style){if(inputShape){var originX=inputShape.x,originY=inputShape.y,originWidth=inputShape.width,originHeight=inputShape.height;outputShape.x=originX,outputShape.y=originY,outputShape.width=originWidth,outputShape.height=originHeight;var lineWidth=style&amp;&amp;style.lineWidth;return lineWidth?(outputShape.x=subPixelOptimize$1(originX,lineWidth,!0),outputShape.y=subPixelOptimize$1(originY,lineWidth,!0),outputShape.width=Math.max(subPixelOptimize$1(originX+originWidth,lineWidth,!1)-outputShape.x,0===originWidth?0:1),outputShape.height=Math.max(subPixelOptimize$1(originY+originHeight,lineWidth,!1)-outputShape.y,0===originHeight?0:1),outputShape):outputShape}}function subPixelOptimize$1(position2,lineWidth,positiveOrNegative){if(!lineWidth)return position2;var doubledPosition=round$2(2*position2);return(doubledPosition+round$2(lineWidth))%2==0?doubledPosition/2:(doubledPosition+(positiveOrNegative?1:-1))/2}var RectShape=function(){return function RectShape2(){this.x=0,this.y=0,this.width=0,this.height=0}}(),subPixelOptimizeOutputShape$1={},Rect$2=function(_super){function Rect2(opts){return _super.call(this,opts)||this}return __extends(Rect2,_super),Rect2.prototype.getDefaultShape=function(){return new RectShape},Rect2.prototype.buildPath=function(ctx,shape){var x,y,width,height;if(this.subPixelOptimize){var optimizedShape=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,shape,this.style);x=optimizedShape.x,y=optimizedShape.y,width=optimizedShape.width,height=optimizedShape.height,optimizedShape.r=shape.r,shape=optimizedShape}else x=shape.x,y=shape.y,width=shape.width,height=shape.height;shape.r?function buildPath$2(ctx,shape){var r1,r2,r3,r4,total,x=shape.x,y=shape.y,width=shape.width,height=shape.height,r=shape.r;width&lt;0&amp;&amp;(x+=width,width=-width),height&lt;0&amp;&amp;(y+=height,height=-height),"number"==typeof r?r1=r2=r3=r4=r:r instanceof Array?1===r.length?r1=r2=r3=r4=r[0]:2===r.length?(r1=r3=r[0],r2=r4=r[1]):3===r.length?(r1=r[0],r2=r4=r[1],r3=r[2]):(r1=r[0],r2=r[1],r3=r[2],r4=r[3]):r1=r2=r3=r4=0,r1+r2&gt;width&amp;&amp;(r1*=width/(total=r1+r2),r2*=width/total),r3+r4&gt;width&amp;&amp;(r3*=width/(total=r3+r4),r4*=width/total),r2+r3&gt;height&amp;&amp;(r2*=height/(total=r2+r3),r3*=height/total),r1+r4&gt;height&amp;&amp;(r1*=height/(total=r1+r4),r4*=height/total),ctx.moveTo(x+r1,y),ctx.lineTo(x+width-r2,y),0!==r2&amp;&amp;ctx.arc(x+width-r2,y+r2,r2,-Math.PI/2,0),ctx.lineTo(x+width,y+height-r3),0!==r3&amp;&amp;ctx.arc(x+width-r3,y+height-r3,r3,0,Math.PI/2),ctx.lineTo(x+r4,y+height),0!==r4&amp;&amp;ctx.arc(x+r4,y+height-r4,r4,Math.PI/2,Math.PI),ctx.lineTo(x,y+r1),0!==r1&amp;&amp;ctx.arc(x+r1,y+r1,r1,Math.PI,1.5*Math.PI)}(ctx,shape):ctx.rect(x,y,width,height)},Rect2.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},Rect2}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(_super){function ZRText2(opts){var _this=_super.call(this)||this;return _this.type="text",_this._children=[],_this._defaultStyle=DEFAULT_RICH_TEXT_COLOR,_this.attr(opts),_this}return __extends(ZRText2,_super),ZRText2.prototype.childrenRef=function(){return this._children},ZRText2.prototype.update=function(){_super.prototype.update.call(this),this.styleChanged()&amp;&amp;this._updateSubTexts();for(var i=0;i&lt;this._children.length;i++){var child=this._children[i];child.zlevel=this.zlevel,child.z=this.z,child.z2=this.z2,child.culling=this.culling,child.cursor=this.cursor,child.invisible=this.invisible}},ZRText2.prototype.updateTransform=function(){var innerTransformable=this.innerTransformable;innerTransformable?(innerTransformable.updateTransform(),innerTransformable.transform&amp;&amp;(this.transform=innerTransformable.transform)):_super.prototype.updateTransform.call(this)},ZRText2.prototype.getLocalTransform=function(m2){var innerTransformable=this.innerTransformable;return innerTransformable?innerTransformable.getLocalTransform(m2):_super.prototype.getLocalTransform.call(this,m2)},ZRText2.prototype.getComputedTransform=function(){return this.__hostTarget&amp;&amp;(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),_super.prototype.getComputedTransform.call(this)},ZRText2.prototype._updateSubTexts=function(){this._childCursor=0,function normalizeTextStyle(style){return normalizeStyle(style),each$f(style.rich,normalizeStyle),style}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},ZRText2.prototype.addSelfToZr=function(zr){_super.prototype.addSelfToZr.call(this,zr);for(var i=0;i&lt;this._children.length;i++)this._children[i].__zr=zr},ZRText2.prototype.removeSelfFromZr=function(zr){_super.prototype.removeSelfFromZr.call(this,zr);for(var i=0;i&lt;this._children.length;i++)this._children[i].__zr=null},ZRText2.prototype.getBoundingRect=function(){if(this.styleChanged()&amp;&amp;this._updateSubTexts(),!this._rect){for(var tmpRect2=new BoundingRect(0,0,0,0),children=this._children,tmpMat=[],rect=null,i=0;i&lt;children.length;i++){var child=children[i],childRect=child.getBoundingRect(),transform2=child.getLocalTransform(tmpMat);transform2?(tmpRect2.copy(childRect),tmpRect2.applyTransform(transform2),(rect=rect||tmpRect2.clone()).union(tmpRect2)):(rect=rect||childRect.clone()).union(childRect)}this._rect=rect||tmpRect2}return this._rect},ZRText2.prototype.setDefaultTextStyle=function(defaultTextStyle){this._defaultStyle=defaultTextStyle||DEFAULT_RICH_TEXT_COLOR},ZRText2.prototype.setTextContent=function(textContent){},ZRText2.prototype._mergeStyle=function(targetStyle,sourceStyle){if(!sourceStyle)return targetStyle;var sourceRich=sourceStyle.rich,targetRich=targetStyle.rich||sourceRich&amp;&amp;{};return extend(targetStyle,sourceStyle),sourceRich&amp;&amp;targetRich?(this._mergeRich(targetRich,sourceRich),targetStyle.rich=targetRich):targetRich&amp;&amp;(targetStyle.rich=targetRich),targetStyle},ZRText2.prototype._mergeRich=function(targetRich,sourceRich){for(var richNames=keys(sourceRich),i=0;i&lt;richNames.length;i++){var richName=richNames[i];targetRich[richName]=targetRich[richName]||{},extend(targetRich[richName],sourceRich[richName])}},ZRText2.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},ZRText2.prototype._getOrCreateChild=function(Ctor){var child=this._children[this._childCursor];return child&amp;&amp;child instanceof Ctor||(child=new Ctor),this._children[this._childCursor++]=child,child.__zr=this.__zr,child.parent=this,child},ZRText2.prototype._updatePlainTexts=function(){var style=this.style,textFont=style.font||DEFAULT_FONT,textPadding=style.padding,contentBlock=function parsePlainText(text,style){null!=text&amp;&amp;(text+="");var lines,overflow=style.overflow,padding=style.padding,font=style.font,truncate="truncate"===overflow,calculatedLineHeight=getLineHeight(font),lineHeight=retrieve2(style.lineHeight,calculatedLineHeight),bgColorDrawn=!!style.backgroundColor,truncateLineOverflow="truncate"===style.lineOverflow,isTruncated=!1,width=style.width,contentHeight=(lines=null==width||"break"!==overflow&amp;&amp;"breakAll"!==overflow?text?text.split("\n"):[]:text?wrapText(text,style.font,width,"breakAll"===overflow,0).lines:[]).length*lineHeight,height=retrieve2(style.height,contentHeight);if(contentHeight&gt;height&amp;&amp;truncateLineOverflow){var lineCount=Math.floor(height/lineHeight);isTruncated=isTruncated||lines.length&gt;lineCount,lines=lines.slice(0,lineCount)}if(text&amp;&amp;truncate&amp;&amp;null!=width)for(var options=prepareTruncateOptions(width,font,style.ellipsis,{minChar:style.truncateMinChar,placeholder:style.placeholder}),singleOut={},i=0;i&lt;lines.length;i++)truncateSingleLine(singleOut,lines[i],options),lines[i]=singleOut.textLine,isTruncated=isTruncated||singleOut.isTruncated;var outerHeight=height,contentWidth=0;for(i=0;i&lt;lines.length;i++)contentWidth=Math.max(getWidth(lines[i],font),contentWidth);null==width&amp;&amp;(width=contentWidth);var outerWidth=contentWidth;return padding&amp;&amp;(outerHeight+=padding[0]+padding[2],outerWidth+=padding[1]+padding[3],width+=padding[1]+padding[3]),bgColorDrawn&amp;&amp;(outerWidth=width),{lines:lines,height:height,outerWidth:outerWidth,outerHeight:outerHeight,lineHeight:lineHeight,calculatedLineHeight:calculatedLineHeight,contentWidth:contentWidth,contentHeight:contentHeight,width:width,isTruncated:isTruncated}}(getStyleText(style),style),needDrawBg=needDrawBackground(style),bgColorDrawn=!!style.backgroundColor,outerHeight=contentBlock.outerHeight,outerWidth=contentBlock.outerWidth,contentWidth=contentBlock.contentWidth,textLines=contentBlock.lines,lineHeight=contentBlock.lineHeight,defaultStyle=this._defaultStyle;this.isTruncated=!!contentBlock.isTruncated;var baseX=style.x||0,baseY=style.y||0,textAlign=style.align||defaultStyle.align||"left",verticalAlign=style.verticalAlign||defaultStyle.verticalAlign||"top",textX=baseX,textY=adjustTextY(baseY,contentBlock.contentHeight,verticalAlign);if(needDrawBg||textPadding){var boxX=adjustTextX(baseX,outerWidth,textAlign),boxY=adjustTextY(baseY,outerHeight,verticalAlign);needDrawBg&amp;&amp;this._renderBackground(style,style,boxX,boxY,outerWidth,outerHeight)}textY+=lineHeight/2,textPadding&amp;&amp;(textX=getTextXForPadding(baseX,textAlign,textPadding),"top"===verticalAlign?textY+=textPadding[0]:"bottom"===verticalAlign&amp;&amp;(textY-=textPadding[2]));for(var defaultLineWidth=0,useDefaultFill=!1,textFill=(getFill("fill"in style?style.fill:(useDefaultFill=!0,defaultStyle.fill))),textStroke=(getStroke("stroke"in style?style.stroke:bgColorDrawn||defaultStyle.autoStroke&amp;&amp;!useDefaultFill?null:(defaultLineWidth=2,defaultStyle.stroke))),hasShadow2=style.textShadowBlur&gt;0,fixedBoundingRect=null!=style.width&amp;&amp;("truncate"===style.overflow||"break"===style.overflow||"breakAll"===style.overflow),calculatedLineHeight=contentBlock.calculatedLineHeight,i=0;i&lt;textLines.length;i++){var el=this._getOrCreateChild(TSpan),subElStyle=el.createStyle();el.useStyle(subElStyle),subElStyle.text=textLines[i],subElStyle.x=textX,subElStyle.y=textY,subElStyle.textAlign=textAlign,subElStyle.textBaseline="middle",subElStyle.opacity=style.opacity,subElStyle.strokeFirst=!0,hasShadow2&amp;&amp;(subElStyle.shadowBlur=style.textShadowBlur||0,subElStyle.shadowColor=style.textShadowColor||"transparent",subElStyle.shadowOffsetX=style.textShadowOffsetX||0,subElStyle.shadowOffsetY=style.textShadowOffsetY||0),subElStyle.stroke=textStroke,subElStyle.fill=textFill,textStroke&amp;&amp;(subElStyle.lineWidth=style.lineWidth||defaultLineWidth,subElStyle.lineDash=style.lineDash,subElStyle.lineDashOffset=style.lineDashOffset||0),subElStyle.font=textFont,setSeparateFont(subElStyle,style),textY+=lineHeight,fixedBoundingRect&amp;&amp;el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x,contentWidth,subElStyle.textAlign),adjustTextY(subElStyle.y,calculatedLineHeight,subElStyle.textBaseline),contentWidth,calculatedLineHeight))}},ZRText2.prototype._updateRichTexts=function(){var style=this.style,contentBlock=function parseRichText(text,style){var contentBlock=new RichTextContentBlock;if(null!=text&amp;&amp;(text+=""),!text)return contentBlock;for(var result,topWidth=style.width,topHeight=style.height,overflow=style.overflow,wrapInfo="break"!==overflow&amp;&amp;"breakAll"!==overflow||null==topWidth?null:{width:topWidth,accumWidth:0,breakAll:"breakAll"===overflow},lastIndex=STYLE_REG.lastIndex=0;null!=(result=STYLE_REG.exec(text));){var matchedIndex=result.index;matchedIndex&gt;lastIndex&amp;&amp;pushTokens(contentBlock,text.substring(lastIndex,matchedIndex),style,wrapInfo),pushTokens(contentBlock,result[2],style,wrapInfo,result[1]),lastIndex=STYLE_REG.lastIndex}lastIndex&lt;text.length&amp;&amp;pushTokens(contentBlock,text.substring(lastIndex,text.length),style,wrapInfo);var pendingList=[],calculatedHeight=0,calculatedWidth=0,stlPadding=style.padding,truncate="truncate"===overflow,truncateLine="truncate"===style.lineOverflow,tmpTruncateOut={};function finishLine(line2,lineWidth2,lineHeight2){line2.width=lineWidth2,line2.lineHeight=lineHeight2,calculatedHeight+=lineHeight2,calculatedWidth=Math.max(calculatedWidth,lineWidth2)}outer:for(var i=0;i&lt;contentBlock.lines.length;i++){for(var line=contentBlock.lines[i],lineHeight=0,lineWidth=0,j=0;j&lt;line.tokens.length;j++){var tokenStyle=(token=line.tokens[j]).styleName&amp;&amp;style.rich[token.styleName]||{},textPadding=token.textPadding=tokenStyle.padding,paddingH=textPadding?textPadding[1]+textPadding[3]:0,font=token.font=tokenStyle.font||style.font;token.contentHeight=getLineHeight(font);var tokenHeight=retrieve2(tokenStyle.height,token.contentHeight);if(token.innerHeight=tokenHeight,textPadding&amp;&amp;(tokenHeight+=textPadding[0]+textPadding[2]),token.height=tokenHeight,token.lineHeight=retrieve3(tokenStyle.lineHeight,style.lineHeight,tokenHeight),token.align=tokenStyle&amp;&amp;tokenStyle.align||style.align,token.verticalAlign=tokenStyle&amp;&amp;tokenStyle.verticalAlign||"middle",truncateLine&amp;&amp;null!=topHeight&amp;&amp;calculatedHeight+token.lineHeight&gt;topHeight){var originalLength=contentBlock.lines.length;j&gt;0?(line.tokens=line.tokens.slice(0,j),finishLine(line,lineWidth,lineHeight),contentBlock.lines=contentBlock.lines.slice(0,i+1)):contentBlock.lines=contentBlock.lines.slice(0,i),contentBlock.isTruncated=contentBlock.isTruncated||contentBlock.lines.length&lt;originalLength;break outer}var styleTokenWidth=tokenStyle.width,tokenWidthNotSpecified=null==styleTokenWidth||"auto"===styleTokenWidth;if("string"==typeof styleTokenWidth&amp;&amp;"%"===styleTokenWidth.charAt(styleTokenWidth.length-1))token.percentWidth=styleTokenWidth,pendingList.push(token),token.contentWidth=getWidth(token.text,font);else{if(tokenWidthNotSpecified){var textBackgroundColor=tokenStyle.backgroundColor,bgImg=textBackgroundColor&amp;&amp;textBackgroundColor.image;bgImg&amp;&amp;isImageReady(bgImg=findExistImage(bgImg))&amp;&amp;(token.width=Math.max(token.width,bgImg.width*tokenHeight/bgImg.height))}var remainTruncWidth=truncate&amp;&amp;null!=topWidth?topWidth-lineWidth:null;null!=remainTruncWidth&amp;&amp;remainTruncWidth&lt;token.width?!tokenWidthNotSpecified||remainTruncWidth&lt;paddingH?(token.text="",token.width=token.contentWidth=0):(truncateText2(tmpTruncateOut,token.text,remainTruncWidth-paddingH,font,style.ellipsis,{minChar:style.truncateMinChar}),token.text=tmpTruncateOut.text,contentBlock.isTruncated=contentBlock.isTruncated||tmpTruncateOut.isTruncated,token.width=token.contentWidth=getWidth(token.text,font)):token.contentWidth=getWidth(token.text,font)}token.width+=paddingH,lineWidth+=token.width,tokenStyle&amp;&amp;(lineHeight=Math.max(lineHeight,token.lineHeight))}finishLine(line,lineWidth,lineHeight)}for(contentBlock.outerWidth=contentBlock.width=retrieve2(topWidth,calculatedWidth),contentBlock.outerHeight=contentBlock.height=retrieve2(topHeight,calculatedHeight),contentBlock.contentHeight=calculatedHeight,contentBlock.contentWidth=calculatedWidth,stlPadding&amp;&amp;(contentBlock.outerWidth+=stlPadding[1]+stlPadding[3],contentBlock.outerHeight+=stlPadding[0]+stlPadding[2]),i=0;i&lt;pendingList.length;i++){var token,percentWidth=(token=pendingList[i]).percentWidth;token.width=parseInt(percentWidth,10)/100*contentBlock.width}return contentBlock}(getStyleText(style),style),contentWidth=contentBlock.width,outerWidth=contentBlock.outerWidth,outerHeight=contentBlock.outerHeight,textPadding=style.padding,baseX=style.x||0,baseY=style.y||0,defaultStyle=this._defaultStyle,textAlign=style.align||defaultStyle.align,verticalAlign=style.verticalAlign||defaultStyle.verticalAlign;this.isTruncated=!!contentBlock.isTruncated;var boxX=adjustTextX(baseX,outerWidth,textAlign),boxY=adjustTextY(baseY,outerHeight,verticalAlign),xLeft=boxX,lineTop=boxY;textPadding&amp;&amp;(xLeft+=textPadding[3],lineTop+=textPadding[0]);var xRight=xLeft+contentWidth;needDrawBackground(style)&amp;&amp;this._renderBackground(style,style,boxX,boxY,outerWidth,outerHeight);for(var bgColorDrawn=!!style.backgroundColor,i=0;i&lt;contentBlock.lines.length;i++){for(var line=contentBlock.lines[i],tokens=line.tokens,tokenCount=tokens.length,lineHeight=line.lineHeight,remainedWidth=line.width,leftIndex=0,lineXLeft=xLeft,lineXRight=xRight,rightIndex=tokenCount-1,token=void 0;leftIndex&lt;tokenCount&amp;&amp;(!(token=tokens[leftIndex]).align||"left"===token.align);)this._placeToken(token,style,lineHeight,lineTop,lineXLeft,"left",bgColorDrawn),remainedWidth-=token.width,lineXLeft+=token.width,leftIndex++;for(;rightIndex&gt;=0&amp;&amp;"right"===(token=tokens[rightIndex]).align;)this._placeToken(token,style,lineHeight,lineTop,lineXRight,"right",bgColorDrawn),remainedWidth-=token.width,lineXRight-=token.width,rightIndex--;for(lineXLeft+=(contentWidth-(lineXLeft-xLeft)-(xRight-lineXRight)-remainedWidth)/2;leftIndex&lt;=rightIndex;)token=tokens[leftIndex],this._placeToken(token,style,lineHeight,lineTop,lineXLeft+token.width/2,"center",bgColorDrawn),lineXLeft+=token.width,leftIndex++;lineTop+=lineHeight}},ZRText2.prototype._placeToken=function(token,style,lineHeight,lineTop,x,textAlign,parentBgColorDrawn){var tokenStyle=style.rich[token.styleName]||{};tokenStyle.text=token.text;var verticalAlign=token.verticalAlign,y=lineTop+lineHeight/2;"top"===verticalAlign?y=lineTop+token.height/2:"bottom"===verticalAlign&amp;&amp;(y=lineTop+lineHeight-token.height/2),!token.isLineHolder&amp;&amp;needDrawBackground(tokenStyle)&amp;&amp;this._renderBackground(tokenStyle,style,"right"===textAlign?x-token.width:"center"===textAlign?x-token.width/2:x,y-token.height/2,token.width,token.height);var bgColorDrawn=!!tokenStyle.backgroundColor,textPadding=token.textPadding;textPadding&amp;&amp;(x=getTextXForPadding(x,textAlign,textPadding),y-=token.height/2-textPadding[0]-token.innerHeight/2);var el=this._getOrCreateChild(TSpan),subElStyle=el.createStyle();el.useStyle(subElStyle);var defaultStyle=this._defaultStyle,useDefaultFill=!1,defaultLineWidth=0,textFill=getFill("fill"in tokenStyle?tokenStyle.fill:"fill"in style?style.fill:(useDefaultFill=!0,defaultStyle.fill)),textStroke=getStroke("stroke"in tokenStyle?tokenStyle.stroke:"stroke"in style?style.stroke:bgColorDrawn||parentBgColorDrawn||defaultStyle.autoStroke&amp;&amp;!useDefaultFill?null:(defaultLineWidth=2,defaultStyle.stroke)),hasShadow2=tokenStyle.textShadowBlur&gt;0||style.textShadowBlur&gt;0;subElStyle.text=token.text,subElStyle.x=x,subElStyle.y=y,hasShadow2&amp;&amp;(subElStyle.shadowBlur=tokenStyle.textShadowBlur||style.textShadowBlur||0,subElStyle.shadowColor=tokenStyle.textShadowColor||style.textShadowColor||"transparent",subElStyle.shadowOffsetX=tokenStyle.textShadowOffsetX||style.textShadowOffsetX||0,subElStyle.shadowOffsetY=tokenStyle.textShadowOffsetY||style.textShadowOffsetY||0),subElStyle.textAlign=textAlign,subElStyle.textBaseline="middle",subElStyle.font=token.font||DEFAULT_FONT,subElStyle.opacity=retrieve3(tokenStyle.opacity,style.opacity,1),setSeparateFont(subElStyle,tokenStyle),textStroke&amp;&amp;(subElStyle.lineWidth=retrieve3(tokenStyle.lineWidth,style.lineWidth,defaultLineWidth),subElStyle.lineDash=retrieve2(tokenStyle.lineDash,style.lineDash),subElStyle.lineDashOffset=style.lineDashOffset||0,subElStyle.stroke=textStroke),textFill&amp;&amp;(subElStyle.fill=textFill);var textWidth=token.contentWidth,textHeight=token.contentHeight;el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x,textWidth,subElStyle.textAlign),adjustTextY(subElStyle.y,textHeight,subElStyle.textBaseline),textWidth,textHeight))},ZRText2.prototype._renderBackground=function(style,topStyle,x,y,width,height){var rectEl,imgEl,rectStyle,textBackgroundColor=style.backgroundColor,textBorderWidth=style.borderWidth,textBorderColor=style.borderColor,isImageBg=textBackgroundColor&amp;&amp;textBackgroundColor.image,isPlainOrGradientBg=textBackgroundColor&amp;&amp;!isImageBg,textBorderRadius=style.borderRadius,self2=this;if(isPlainOrGradientBg||style.lineHeight||textBorderWidth&amp;&amp;textBorderColor){(rectEl=this._getOrCreateChild(Rect$2)).useStyle(rectEl.createStyle()),rectEl.style.fill=null;var rectShape=rectEl.shape;rectShape.x=x,rectShape.y=y,rectShape.width=width,rectShape.height=height,rectShape.r=textBorderRadius,rectEl.dirtyShape()}if(isPlainOrGradientBg)(rectStyle=rectEl.style).fill=textBackgroundColor||null,rectStyle.fillOpacity=retrieve2(style.fillOpacity,1);else if(isImageBg){(imgEl=this._getOrCreateChild(ZRImage)).onload=function(){self2.dirtyStyle()};var imgStyle=imgEl.style;imgStyle.image=textBackgroundColor.image,imgStyle.x=x,imgStyle.y=y,imgStyle.width=width,imgStyle.height=height}textBorderWidth&amp;&amp;textBorderColor&amp;&amp;((rectStyle=rectEl.style).lineWidth=textBorderWidth,rectStyle.stroke=textBorderColor,rectStyle.strokeOpacity=retrieve2(style.strokeOpacity,1),rectStyle.lineDash=style.borderDash,rectStyle.lineDashOffset=style.borderDashOffset||0,rectEl.strokeContainThreshold=0,rectEl.hasFill()&amp;&amp;rectEl.hasStroke()&amp;&amp;(rectStyle.strokeFirst=!0,rectStyle.lineWidth*=2));var commonStyle=(rectEl||imgEl).style;commonStyle.shadowBlur=style.shadowBlur||0,commonStyle.shadowColor=style.shadowColor||"transparent",commonStyle.shadowOffsetX=style.shadowOffsetX||0,commonStyle.shadowOffsetY=style.shadowOffsetY||0,commonStyle.opacity=retrieve3(style.opacity,topStyle.opacity,1)},ZRText2.makeFont=function(style){var font="";return hasSeparateFont(style)&amp;&amp;(font=[style.fontStyle,style.fontWeight,parseFontSize(style.fontSize),style.fontFamily||"sans-serif"].join(" ")),font&amp;&amp;trim$1(font)||style.textFont||style.font},ZRText2}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(fontSize){return"string"!=typeof fontSize||-1===fontSize.indexOf("px")&amp;&amp;-1===fontSize.indexOf("rem")&amp;&amp;-1===fontSize.indexOf("em")?isNaN(+fontSize)?"12px":fontSize+"px":fontSize}function setSeparateFont(targetStyle,sourceStyle){for(var i=0;i&lt;FONT_PARTS.length;i++){var fontProp=FONT_PARTS[i],val=sourceStyle[fontProp];null!=val&amp;&amp;(targetStyle[fontProp]=val)}}function hasSeparateFont(style){return null!=style.fontSize||style.fontFamily||style.fontWeight}function normalizeStyle(style){if(style){style.font=ZRText.makeFont(style);var textAlign=style.align;"middle"===textAlign&amp;&amp;(textAlign="center"),style.align=null==textAlign||VALID_TEXT_ALIGN[textAlign]?textAlign:"left";var verticalAlign=style.verticalAlign;"center"===verticalAlign&amp;&amp;(verticalAlign="middle"),style.verticalAlign=null==verticalAlign||VALID_TEXT_VERTICAL_ALIGN[verticalAlign]?verticalAlign:"top",style.padding&amp;&amp;(style.padding=normalizeCssArray$1(style.padding))}}function getStroke(stroke,lineWidth){return null==stroke||lineWidth&lt;=0||"transparent"===stroke||"none"===stroke?null:stroke.image||stroke.colorStops?"#000":stroke}function getFill(fill){return null==fill||"none"===fill?null:fill.image||fill.colorStops?"#000":fill}function getTextXForPadding(x,textAlign,textPadding){return"right"===textAlign?x-textPadding[1]:"center"===textAlign?x+textPadding[3]/2-textPadding[1]/2:x+textPadding[3]}function getStyleText(style){var text=style.text;return null!=text&amp;&amp;(text+=""),text}function needDrawBackground(style){return!!(style.backgroundColor||style.lineHeight||style.borderWidth&amp;&amp;style.borderColor)}var getECData=makeInner(),setCommonECData=function(seriesIndex,dataType,dataIdx,el){if(el){var ecData=getECData(el);ecData.dataIndex=dataIdx,ecData.dataType=dataType,ecData.seriesIndex=seriesIndex,ecData.ssrType="chart","group"===el.type&amp;&amp;el.traverse(function(child){var childECData=getECData(child);childECData.seriesIndex=seriesIndex,childECData.dataIndex=dataIdx,childECData.dataType=dataType,childECData.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"];function hasFillOrStroke(fillOrStroke){return null!=fillOrStroke&amp;&amp;"none"!==fillOrStroke}function doChangeHoverState(el,stateName,hoverStateEnum){el.onHoverStateChange&amp;&amp;(el.hoverState||0)!==hoverStateEnum&amp;&amp;el.onHoverStateChange(stateName),el.hoverState=hoverStateEnum}function singleEnterEmphasis(el){doChangeHoverState(el,"emphasis",2)}function singleLeaveEmphasis(el){2===el.hoverState&amp;&amp;doChangeHoverState(el,"normal",0)}function singleEnterBlur(el){doChangeHoverState(el,"blur",1)}function singleLeaveBlur(el){1===el.hoverState&amp;&amp;doChangeHoverState(el,"normal",0)}function singleEnterSelect(el){el.selected=!0}function singleLeaveSelect(el){el.selected=!1}function updateElementState(el,updater,commonParam){updater(el,commonParam)}function traverseUpdateState(el,updater,commonParam){updateElementState(el,updater,commonParam),el.isGroup&amp;&amp;el.traverse(function(child){updateElementState(child,updater,commonParam)})}function setStatesFlag(el,stateName){switch(stateName){case"emphasis":el.hoverState=2;break;case"normal":el.hoverState=0;break;case"blur":el.hoverState=1;break;case"select":el.selected=!0}}function elementStateProxy(stateName,targetStates){var state=this.states[stateName];if(this.style){if("emphasis"===stateName)return function createEmphasisDefaultState(el,stateName,targetStates,state){var hasSelect=targetStates&amp;&amp;indexOf(targetStates,"select")&gt;=0,cloned=!1;if(el instanceof Path){var store=getSavedStates(el),fromFill=hasSelect&amp;&amp;store.selectFill||store.normalFill,fromStroke=hasSelect&amp;&amp;store.selectStroke||store.normalStroke;if(hasFillOrStroke(fromFill)||hasFillOrStroke(fromStroke)){var emphasisStyle=(state=state||{}).style||{};"inherit"===emphasisStyle.fill?(cloned=!0,state=extend({},state),(emphasisStyle=extend({},emphasisStyle)).fill=fromFill):!hasFillOrStroke(emphasisStyle.fill)&amp;&amp;hasFillOrStroke(fromFill)?(cloned=!0,state=extend({},state),(emphasisStyle=extend({},emphasisStyle)).fill=liftColor(fromFill)):!hasFillOrStroke(emphasisStyle.stroke)&amp;&amp;hasFillOrStroke(fromStroke)&amp;&amp;(cloned||(state=extend({},state),emphasisStyle=extend({},emphasisStyle)),emphasisStyle.stroke=liftColor(fromStroke)),state.style=emphasisStyle}}if(state&amp;&amp;null==state.z2){cloned||(state=extend({},state));var z2EmphasisLift=el.z2EmphasisLift;state.z2=el.z2+(null!=z2EmphasisLift?z2EmphasisLift:10)}return state}(this,0,targetStates,state);if("blur"===stateName)return function createBlurDefaultState(el,stateName,state){var hasBlur=indexOf(el.currentStates,stateName)&gt;=0,currentOpacity=el.style.opacity,fromState=hasBlur?null:function getFromStateStyle(el,props,toStateName,defaultValue){for(var style=el.style,fromState={},i=0;i&lt;props.length;i++){var propName=props[i],val=style[propName];fromState[propName]=null==val?defaultValue&amp;&amp;defaultValue[propName]:val}for(i=0;i&lt;el.animators.length;i++){var animator=el.animators[i];animator.__fromStateTransition&amp;&amp;animator.__fromStateTransition.indexOf(toStateName)&lt;0&amp;&amp;"style"===animator.targetName&amp;&amp;animator.saveTo(fromState,props)}return fromState}(el,["opacity"],stateName,{opacity:1}),blurStyle=(state=state||{}).style||{};return null==blurStyle.opacity&amp;&amp;(state=extend({},state),blurStyle=extend({opacity:hasBlur?currentOpacity:.1*fromState.opacity},blurStyle),state.style=blurStyle),state}(this,stateName,state);if("select"===stateName)return function createSelectDefaultState(el,stateName,state){if(state&amp;&amp;null==state.z2){state=extend({},state);var z2SelectLift=el.z2SelectLift;state.z2=el.z2+(null!=z2SelectLift?z2SelectLift:9)}return state}(this,0,state)}return state}function setDefaultStateProxy(el){el.stateProxy=elementStateProxy;var textContent=el.getTextContent(),textGuide=el.getTextGuideLine();textContent&amp;&amp;(textContent.stateProxy=elementStateProxy),textGuide&amp;&amp;(textGuide.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(el,e2){!shouldSilent(el,e2)&amp;&amp;!el.__highByOuter&amp;&amp;traverseUpdateState(el,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(el,e2){!shouldSilent(el,e2)&amp;&amp;!el.__highByOuter&amp;&amp;traverseUpdateState(el,singleLeaveEmphasis)}function enterEmphasis(el,highlightDigit){el.__highByOuter|=1&lt;&lt;(highlightDigit||0),traverseUpdateState(el,singleEnterEmphasis)}function leaveEmphasis(el,highlightDigit){!(el.__highByOuter&amp;=~(1&lt;&lt;(highlightDigit||0)))&amp;&amp;traverseUpdateState(el,singleLeaveEmphasis)}function enterBlur(el){traverseUpdateState(el,singleEnterBlur)}function leaveBlur(el){traverseUpdateState(el,singleLeaveBlur)}function enterSelect(el){traverseUpdateState(el,singleEnterSelect)}function leaveSelect(el){traverseUpdateState(el,singleLeaveSelect)}function shouldSilent(el,e2){return el.__highDownSilentOnTouch&amp;&amp;e2.zrByTouch}function allLeaveBlur(api){var model=api.getModel(),leaveBlurredSeries=[],allComponentViews=[];model.eachComponent(function(componentType,componentModel){var componentStates=getComponentStates(componentModel),isSeries2="series"===componentType,view=isSeries2?api.getViewOfSeriesModel(componentModel):api.getViewOfComponentModel(componentModel);!isSeries2&amp;&amp;allComponentViews.push(view),componentStates.isBlured&amp;&amp;(view.group.traverse(function(child){singleLeaveBlur(child)}),isSeries2&amp;&amp;leaveBlurredSeries.push(componentModel)),componentStates.isBlured=!1}),each$f(allComponentViews,function(view){view&amp;&amp;view.toggleBlurSeries&amp;&amp;view.toggleBlurSeries(leaveBlurredSeries,!1,model)})}function blurSeries(targetSeriesIndex,focus,blurScope,api){var ecModel=api.getModel();function leaveBlurOfIndices(data,dataIndices){for(var i=0;i&lt;dataIndices.length;i++){var itemEl=data.getItemGraphicEl(dataIndices[i]);itemEl&amp;&amp;leaveBlur(itemEl)}}if(blurScope=blurScope||"coordinateSystem",null!=targetSeriesIndex&amp;&amp;focus&amp;&amp;"none"!==focus){var targetSeriesModel=ecModel.getSeriesByIndex(targetSeriesIndex),targetCoordSys=targetSeriesModel.coordinateSystem;targetCoordSys&amp;&amp;targetCoordSys.master&amp;&amp;(targetCoordSys=targetCoordSys.master);var blurredSeries=[];ecModel.eachSeries(function(seriesModel){var sameSeries=targetSeriesModel===seriesModel,coordSys=seriesModel.coordinateSystem;if(coordSys&amp;&amp;coordSys.master&amp;&amp;(coordSys=coordSys.master),!("series"===blurScope&amp;&amp;!sameSeries||"coordinateSystem"===blurScope&amp;&amp;!(coordSys&amp;&amp;targetCoordSys?coordSys===targetCoordSys:sameSeries)||"series"===focus&amp;&amp;sameSeries)){if(api.getViewOfSeriesModel(seriesModel).group.traverse(function(child){child.__highByOuter&amp;&amp;sameSeries&amp;&amp;"self"===focus||singleEnterBlur(child)}),isArrayLike(focus))leaveBlurOfIndices(seriesModel.getData(),focus);else if(isObject$3(focus))for(var dataTypes=keys(focus),d=0;d&lt;dataTypes.length;d++)leaveBlurOfIndices(seriesModel.getData(dataTypes[d]),focus[dataTypes[d]]);blurredSeries.push(seriesModel),getComponentStates(seriesModel).isBlured=!0}}),ecModel.eachComponent(function(componentType,componentModel){if("series"!==componentType){var view=api.getViewOfComponentModel(componentModel);view&amp;&amp;view.toggleBlurSeries&amp;&amp;view.toggleBlurSeries(blurredSeries,!0,ecModel)}})}}function blurComponent(componentMainType,componentIndex,api){if(null!=componentMainType&amp;&amp;null!=componentIndex){var componentModel=api.getModel().getComponent(componentMainType,componentIndex);if(componentModel){getComponentStates(componentModel).isBlured=!0;var view=api.getViewOfComponentModel(componentModel);view&amp;&amp;view.focusBlurEnabled&amp;&amp;view.group.traverse(function(child){singleEnterBlur(child)})}}}function findComponentHighDownDispatchers(componentMainType,componentIndex,name,api){var ret={focusSelf:!1,dispatchers:null};if(null==componentMainType||"series"===componentMainType||null==componentIndex||null==name)return ret;var componentModel=api.getModel().getComponent(componentMainType,componentIndex);if(!componentModel)return ret;var view=api.getViewOfComponentModel(componentModel);if(!view||!view.findHighDownDispatchers)return ret;for(var focusSelf,dispatchers=view.findHighDownDispatchers(name),i=0;i&lt;dispatchers.length;i++)if("self"===getECData(dispatchers[i]).focus){focusSelf=!0;break}return{focusSelf:focusSelf,dispatchers:dispatchers}}function updateSeriesElementSelection(seriesModel){each$f(seriesModel.getAllData(),function(_a2){var data=_a2.data,type=_a2.type;data.eachItemGraphicEl(function(el,idx){seriesModel.isSelected(idx,type)?enterSelect(el):leaveSelect(el)})})}function getAllSelectedIndices(ecModel){var ret=[];return ecModel.eachSeries(function(seriesModel){each$f(seriesModel.getAllData(),function(_a2){_a2.data;var type=_a2.type,dataIndices=seriesModel.getSelectedDataIndices();if(dataIndices.length&gt;0){var item={dataIndex:dataIndices,seriesIndex:seriesModel.seriesIndex};null!=type&amp;&amp;(item.dataType=type),ret.push(item)}})}),ret}function enableHoverEmphasis(el,focus,blurScope){setAsHighDownDispatcher(el,!0),traverseUpdateState(el,setDefaultStateProxy),enableHoverFocus(el,focus,blurScope)}function toggleHoverEmphasis(el,focus,blurScope,isDisabled){isDisabled?function disableHoverEmphasis(el){setAsHighDownDispatcher(el,!1)}(el):enableHoverEmphasis(el,focus,blurScope)}function enableHoverFocus(el,focus,blurScope){var ecData=getECData(el);null!=focus?(ecData.focus=focus,ecData.blurScope=blurScope):ecData.focus&amp;&amp;(ecData.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(el,itemModel,styleType,getter){styleType=styleType||"itemStyle";for(var i=0;i&lt;OTHER_STATES.length;i++){var stateName=OTHER_STATES[i],model=itemModel.getModel([stateName,styleType]);el.ensureState(stateName).style=getter?getter(model):model[defaultStyleGetterMap[styleType]]()}}function setAsHighDownDispatcher(el,asDispatcher){var disable=!1===asDispatcher,extendedEl=el;el.highDownSilentOnTouch&amp;&amp;(extendedEl.__highDownSilentOnTouch=el.highDownSilentOnTouch),disable&amp;&amp;!extendedEl.__highDownDispatcher||(extendedEl.__highByOuter=extendedEl.__highByOuter||0,extendedEl.__highDownDispatcher=!disable)}function isHighDownDispatcher(el){return!(!el||!el.__highDownDispatcher)}function isSelectChangePayload(payload){var payloadType=payload.type;return"select"===payloadType||"unselect"===payloadType||"toggleSelect"===payloadType}function isHighDownPayload(payload){var payloadType=payload.type;return"highlight"===payloadType||"downplay"===payloadType}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(path,m2){if(m2){var cmd,nPoint,i,j,k,p,data=path.data,len2=path.len(),M=CMD$2.M,C=CMD$2.C,L=CMD$2.L,R=CMD$2.R,A=CMD$2.A,Q=CMD$2.Q;for(i=0,j=0;i&lt;len2;){switch(cmd=data[i++],j=i,nPoint=0,cmd){case M:case L:nPoint=1;break;case C:nPoint=3;break;case Q:nPoint=2;break;case A:var x=m2[4],y=m2[5],sx=mathSqrt$2(m2[0]*m2[0]+m2[1]*m2[1]),sy=mathSqrt$2(m2[2]*m2[2]+m2[3]*m2[3]),angle=mathAtan2(-m2[1]/sy,m2[0]/sx);data[i]*=sx,data[i++]+=x,data[i]*=sy,data[i++]+=y,data[i++]*=sx,data[i++]*=sy,data[i++]+=angle,data[i++]+=angle,j=i+=2;break;case R:p[0]=data[i++],p[1]=data[i++],applyTransform$1(p,p,m2),data[j++]=p[0],data[j++]=p[1],p[0]+=data[i++],p[1]+=data[i++],applyTransform$1(p,p,m2),data[j++]=p[0],data[j++]=p[1]}for(k=0;k&lt;nPoint;k++){var p_1=points$2[k];p_1[0]=data[i++],p_1[1]=data[i++],applyTransform$1(p_1,p_1,m2),data[j++]=p_1[0],data[j++]=p_1[1]}}path.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])}function vRatio(u,v){return(u[0]*v[0]+u[1]*v[1])/(vMag(u)*vMag(v))}function vAngle(u,v){return(u[0]*v[1]&lt;u[1]*v[0]?-1:1)*Math.acos(vRatio(u,v))}function processArc(x1,y1,x2,y2,fa,fs,rx,ry,psiDeg,cmd,path){var psi=psiDeg*(PI$7/180),xp=mathCos$2(psi)*(x1-x2)/2+mathSin$2(psi)*(y1-y2)/2,yp=-1*mathSin$2(psi)*(x1-x2)/2+mathCos$2(psi)*(y1-y2)/2,lambda=xp*xp/(rx*rx)+yp*yp/(ry*ry);lambda&gt;1&amp;&amp;(rx*=mathSqrt$1(lambda),ry*=mathSqrt$1(lambda));var f=(fa===fs?-1:1)*mathSqrt$1((rx*rx*(ry*ry)-rx*rx*(yp*yp)-ry*ry*(xp*xp))/(rx*rx*(yp*yp)+ry*ry*(xp*xp)))||0,cxp=f*rx*yp/ry,cyp=f*-ry*xp/rx,cx=(x1+x2)/2+mathCos$2(psi)*cxp-mathSin$2(psi)*cyp,cy=(y1+y2)/2+mathSin$2(psi)*cxp+mathCos$2(psi)*cyp,theta=vAngle([1,0],[(xp-cxp)/rx,(yp-cyp)/ry]),u=[(xp-cxp)/rx,(yp-cyp)/ry],v=[(-1*xp-cxp)/rx,(-1*yp-cyp)/ry],dTheta=vAngle(u,v);if(vRatio(u,v)&lt;=-1&amp;&amp;(dTheta=PI$7),vRatio(u,v)&gt;=1&amp;&amp;(dTheta=0),dTheta&lt;0){var n=Math.round(dTheta/PI$7*1e6)/1e6;dTheta=2*PI$7+n%2*PI$7}path.addData(cmd,cx,cy,rx,ry,theta,dTheta,psi,fs)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;var SVGPath=function(_super){function SVGPath2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends(SVGPath2,_super),SVGPath2.prototype.applyTransform=function(m2){},SVGPath2}(Path);function isPathProxy(path){return null!=path.setData}function createPathOptions(str,opts){var pathProxy=function createPathProxyFromString(data){var path=new PathProxy;if(!data)return path;var prevCmd,cpx=0,cpy=0,subpathX=cpx,subpathY=cpy,CMD2=PathProxy.CMD,cmdList=data.match(commandReg);if(!cmdList)return path;for(var l=0;l&lt;cmdList.length;l++){for(var cmdText=cmdList[l],cmdStr=cmdText.charAt(0),cmd=void 0,p=cmdText.match(numberReg$1)||[],pLen=p.length,i=0;i&lt;pLen;i++)p[i]=parseFloat(p[i]);for(var off=0;off&lt;pLen;){var ctlPtx=void 0,ctlPty=void 0,rx=void 0,ry=void 0,psi=void 0,fa=void 0,fs=void 0,x1=cpx,y1=cpy,len2=void 0,pathData=void 0;switch(cmdStr){case"l":cpx+=p[off++],cpy+=p[off++],cmd=CMD2.L,path.addData(cmd,cpx,cpy);break;case"L":cpx=p[off++],cpy=p[off++],cmd=CMD2.L,path.addData(cmd,cpx,cpy);break;case"m":cpx+=p[off++],cpy+=p[off++],cmd=CMD2.M,path.addData(cmd,cpx,cpy),subpathX=cpx,subpathY=cpy,cmdStr="l";break;case"M":cpx=p[off++],cpy=p[off++],cmd=CMD2.M,path.addData(cmd,cpx,cpy),subpathX=cpx,subpathY=cpy,cmdStr="L";break;case"h":cpx+=p[off++],cmd=CMD2.L,path.addData(cmd,cpx,cpy);break;case"H":cpx=p[off++],cmd=CMD2.L,path.addData(cmd,cpx,cpy);break;case"v":cpy+=p[off++],cmd=CMD2.L,path.addData(cmd,cpx,cpy);break;case"V":cpy=p[off++],cmd=CMD2.L,path.addData(cmd,cpx,cpy);break;case"C":cmd=CMD2.C,path.addData(cmd,p[off++],p[off++],p[off++],p[off++],p[off++],p[off++]),cpx=p[off-2],cpy=p[off-1];break;case"c":cmd=CMD2.C,path.addData(cmd,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy),cpx+=p[off-2],cpy+=p[off-1];break;case"S":ctlPtx=cpx,ctlPty=cpy,len2=path.len(),pathData=path.data,prevCmd===CMD2.C&amp;&amp;(ctlPtx+=cpx-pathData[len2-4],ctlPty+=cpy-pathData[len2-3]),cmd=CMD2.C,x1=p[off++],y1=p[off++],cpx=p[off++],cpy=p[off++],path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"s":ctlPtx=cpx,ctlPty=cpy,len2=path.len(),pathData=path.data,prevCmd===CMD2.C&amp;&amp;(ctlPtx+=cpx-pathData[len2-4],ctlPty+=cpy-pathData[len2-3]),cmd=CMD2.C,x1=cpx+p[off++],y1=cpy+p[off++],cpx+=p[off++],cpy+=p[off++],path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"Q":x1=p[off++],y1=p[off++],cpx=p[off++],cpy=p[off++],cmd=CMD2.Q,path.addData(cmd,x1,y1,cpx,cpy);break;case"q":x1=p[off++]+cpx,y1=p[off++]+cpy,cpx+=p[off++],cpy+=p[off++],cmd=CMD2.Q,path.addData(cmd,x1,y1,cpx,cpy);break;case"T":ctlPtx=cpx,ctlPty=cpy,len2=path.len(),pathData=path.data,prevCmd===CMD2.Q&amp;&amp;(ctlPtx+=cpx-pathData[len2-4],ctlPty+=cpy-pathData[len2-3]),cpx=p[off++],cpy=p[off++],cmd=CMD2.Q,path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"t":ctlPtx=cpx,ctlPty=cpy,len2=path.len(),pathData=path.data,prevCmd===CMD2.Q&amp;&amp;(ctlPtx+=cpx-pathData[len2-4],ctlPty+=cpy-pathData[len2-3]),cpx+=p[off++],cpy+=p[off++],cmd=CMD2.Q,path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"A":rx=p[off++],ry=p[off++],psi=p[off++],fa=p[off++],fs=p[off++],processArc(x1=cpx,y1=cpy,cpx=p[off++],cpy=p[off++],fa,fs,rx,ry,psi,cmd=CMD2.A,path);break;case"a":rx=p[off++],ry=p[off++],psi=p[off++],fa=p[off++],fs=p[off++],processArc(x1=cpx,y1=cpy,cpx+=p[off++],cpy+=p[off++],fa,fs,rx,ry,psi,cmd=CMD2.A,path)}}"z"!==cmdStr&amp;&amp;"Z"!==cmdStr||(cmd=CMD2.Z,path.addData(cmd),cpx=subpathX,cpy=subpathY),prevCmd=cmd}return path.toStatic(),path}(str),innerOpts=extend({},opts);return innerOpts.buildPath=function(path){if(isPathProxy(path)){path.setData(pathProxy.data),(ctx=path.getContext())&amp;&amp;path.rebuildPath(ctx,1)}else{var ctx=path;pathProxy.rebuildPath(ctx,1)}},innerOpts.applyTransform=function(m2){transformPath(pathProxy,m2),this.dirtyShape()},innerOpts}function createFromString(str,opts){return new SVGPath(createPathOptions(str,opts))}function clonePath(sourcePath,opts){opts=opts||{};var path=new Path;return sourcePath.shape&amp;&amp;path.setShape(sourcePath.shape),path.setStyle(sourcePath.style),opts.bakeTransform?transformPath(path.path,sourcePath.getComputedTransform()):opts.toLocal?path.setLocalTransform(sourcePath.getComputedTransform()):path.copyTransform(sourcePath),path.buildPath=sourcePath.buildPath,path.applyTransform=path.applyTransform,path.z=sourcePath.z,path.z2=sourcePath.z2,path.zlevel=sourcePath.zlevel,path}var CircleShape=function(){return function CircleShape2(){this.cx=0,this.cy=0,this.r=0}}(),Circle=function(_super){function Circle2(opts){return _super.call(this,opts)||this}return __extends(Circle2,_super),Circle2.prototype.getDefaultShape=function(){return new CircleShape},Circle2.prototype.buildPath=function(ctx,shape){ctx.moveTo(shape.cx+shape.r,shape.cy),ctx.arc(shape.cx,shape.cy,shape.r,0,2*Math.PI)},Circle2}(Path);Circle.prototype.type="circle";var EllipseShape=function(){return function EllipseShape2(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}}(),Ellipse=function(_super){function Ellipse2(opts){return _super.call(this,opts)||this}return __extends(Ellipse2,_super),Ellipse2.prototype.getDefaultShape=function(){return new EllipseShape},Ellipse2.prototype.buildPath=function(ctx,shape){var k=.5522848,x=shape.cx,y=shape.cy,a=shape.rx,b=shape.ry,ox=a*k,oy=b*k;ctx.moveTo(x-a,y),ctx.bezierCurveTo(x-a,y-oy,x-ox,y-b,x,y-b),ctx.bezierCurveTo(x+ox,y-b,x+a,y-oy,x+a,y),ctx.bezierCurveTo(x+a,y+oy,x+ox,y+b,x,y+b),ctx.bezierCurveTo(x-ox,y+b,x-a,y+oy,x-a,y),ctx.closePath()},Ellipse2}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=2*PI$6,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function computeCornerTangents(x0,y0,x1,y1,radius,cr,clockwise){var x01=x0-x1,y01=y0-y1,lo=(clockwise?cr:-cr)/mathSqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=radius-cr,s=x11*y10-x10*y11,d=(dy&lt;0?-1:1)*mathSqrt(mathMax$7(0,r*r*d2-s*s)),cx0=(s*dy-dx*d)/d2,cy0=(-s*dx-dy*d)/d2,cx1=(s*dy+dx*d)/d2,cy1=(-s*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0&gt;dx1*dx1+dy1*dy1&amp;&amp;(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x0:-ox,y0:-oy,x1:cx0*(radius/r-1),y1:cy0*(radius/r-1)}}function buildPath$1(ctx,shape){var _a2,radius=mathMax$7(shape.r,0),innerRadius=mathMax$7(shape.r0||0,0),hasRadius=radius&gt;0;if(hasRadius||innerRadius&gt;0){if(hasRadius||(radius=innerRadius,innerRadius=0),innerRadius&gt;radius){var tmp=radius;radius=innerRadius,innerRadius=tmp}var startAngle=shape.startAngle,endAngle=shape.endAngle;if(!isNaN(startAngle)&amp;&amp;!isNaN(endAngle)){var cx=shape.cx,cy=shape.cy,clockwise=!!shape.clockwise,arc=mathAbs$1(endAngle-startAngle),mod=arc&gt;PI2$3&amp;&amp;arc%PI2$3;if(mod&gt;e&amp;&amp;(arc=mod),radius&gt;e)if(arc&gt;PI2$3-e)ctx.moveTo(cx+radius*mathCos$1(startAngle),cy+radius*mathSin$1(startAngle)),ctx.arc(cx,cy,radius,startAngle,endAngle,!clockwise),innerRadius&gt;e&amp;&amp;(ctx.moveTo(cx+innerRadius*mathCos$1(endAngle),cy+innerRadius*mathSin$1(endAngle)),ctx.arc(cx,cy,innerRadius,endAngle,startAngle,clockwise));else{var icrStart=void 0,icrEnd=void 0,ocrStart=void 0,ocrEnd=void 0,ocrs=void 0,ocre=void 0,icrs=void 0,icre=void 0,ocrMax=void 0,icrMax=void 0,limitedOcrMax=void 0,limitedIcrMax=void 0,xre=void 0,yre=void 0,xirs=void 0,yirs=void 0,xrs=radius*mathCos$1(startAngle),yrs=radius*mathSin$1(startAngle),xire=innerRadius*mathCos$1(endAngle),yire=innerRadius*mathSin$1(endAngle),hasArc=arc&gt;e;if(hasArc){var cornerRadius=shape.cornerRadius;cornerRadius&amp;&amp;(icrStart=(_a2=function normalizeCornerRadius(cr){var arr;if(isArray$1(cr)){var len2=cr.length;if(!len2)return cr;arr=1===len2?[cr[0],cr[0],0,0]:2===len2?[cr[0],cr[0],cr[1],cr[1]]:3===len2?cr.concat(cr[2]):cr}else arr=[cr,cr,cr,cr];return arr}(cornerRadius))[0],icrEnd=_a2[1],ocrStart=_a2[2],ocrEnd=_a2[3]);var halfRd=mathAbs$1(radius-innerRadius)/2;if(ocrs=mathMin$7(halfRd,ocrStart),ocre=mathMin$7(halfRd,ocrEnd),icrs=mathMin$7(halfRd,icrStart),icre=mathMin$7(halfRd,icrEnd),limitedOcrMax=ocrMax=mathMax$7(ocrs,ocre),limitedIcrMax=icrMax=mathMax$7(icrs,icre),(ocrMax&gt;e||icrMax&gt;e)&amp;&amp;(xre=radius*mathCos$1(endAngle),yre=radius*mathSin$1(endAngle),xirs=innerRadius*mathCos$1(startAngle),yirs=innerRadius*mathSin$1(startAngle),arc&lt;PI$6)){var it_1=function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var dx10=x1-x0,dy10=y1-y0,dx32=x3-x2,dy32=y3-y2,t=dy32*dx10-dx32*dy10;if(!(t*t&lt;e))return[x0+(t=(dx32*(y0-y2)-dy32*(x0-x2))/t)*dx10,y0+t*dy10]}(xrs,yrs,xirs,yirs,xre,yre,xire,yire);if(it_1){var x0=xrs-it_1[0],y0=yrs-it_1[1],x1=xre-it_1[0],y1=yre-it_1[1],a=1/mathSin$1(mathACos((x0*x1+y0*y1)/(mathSqrt(x0*x0+y0*y0)*mathSqrt(x1*x1+y1*y1)))/2),b=mathSqrt(it_1[0]*it_1[0]+it_1[1]*it_1[1]);limitedOcrMax=mathMin$7(ocrMax,(radius-b)/(a+1)),limitedIcrMax=mathMin$7(icrMax,(innerRadius-b)/(a-1))}}}if(hasArc)if(limitedOcrMax&gt;e){var crStart=mathMin$7(ocrStart,limitedOcrMax),crEnd=mathMin$7(ocrEnd,limitedOcrMax),ct0=computeCornerTangents(xirs,yirs,xrs,yrs,radius,crStart,clockwise),ct1=computeCornerTangents(xre,yre,xire,yire,radius,crEnd,clockwise);ctx.moveTo(cx+ct0.cx+ct0.x0,cy+ct0.cy+ct0.y0),limitedOcrMax&lt;ocrMax&amp;&amp;crStart===crEnd?ctx.arc(cx+ct0.cx,cy+ct0.cy,limitedOcrMax,mathATan2(ct0.y0,ct0.x0),mathATan2(ct1.y0,ct1.x0),!clockwise):(crStart&gt;0&amp;&amp;ctx.arc(cx+ct0.cx,cy+ct0.cy,crStart,mathATan2(ct0.y0,ct0.x0),mathATan2(ct0.y1,ct0.x1),!clockwise),ctx.arc(cx,cy,radius,mathATan2(ct0.cy+ct0.y1,ct0.cx+ct0.x1),mathATan2(ct1.cy+ct1.y1,ct1.cx+ct1.x1),!clockwise),crEnd&gt;0&amp;&amp;ctx.arc(cx+ct1.cx,cy+ct1.cy,crEnd,mathATan2(ct1.y1,ct1.x1),mathATan2(ct1.y0,ct1.x0),!clockwise))}else ctx.moveTo(cx+xrs,cy+yrs),ctx.arc(cx,cy,radius,startAngle,endAngle,!clockwise);else ctx.moveTo(cx+xrs,cy+yrs);if(innerRadius&gt;e&amp;&amp;hasArc)if(limitedIcrMax&gt;e){crStart=mathMin$7(icrStart,limitedIcrMax),ct0=computeCornerTangents(xire,yire,xre,yre,innerRadius,-(crEnd=mathMin$7(icrEnd,limitedIcrMax)),clockwise),ct1=computeCornerTangents(xrs,yrs,xirs,yirs,innerRadius,-crStart,clockwise);ctx.lineTo(cx+ct0.cx+ct0.x0,cy+ct0.cy+ct0.y0),limitedIcrMax&lt;icrMax&amp;&amp;crStart===crEnd?ctx.arc(cx+ct0.cx,cy+ct0.cy,limitedIcrMax,mathATan2(ct0.y0,ct0.x0),mathATan2(ct1.y0,ct1.x0),!clockwise):(crEnd&gt;0&amp;&amp;ctx.arc(cx+ct0.cx,cy+ct0.cy,crEnd,mathATan2(ct0.y0,ct0.x0),mathATan2(ct0.y1,ct0.x1),!clockwise),ctx.arc(cx,cy,innerRadius,mathATan2(ct0.cy+ct0.y1,ct0.cx+ct0.x1),mathATan2(ct1.cy+ct1.y1,ct1.cx+ct1.x1),clockwise),crStart&gt;0&amp;&amp;ctx.arc(cx+ct1.cx,cy+ct1.cy,crStart,mathATan2(ct1.y1,ct1.x1),mathATan2(ct1.y0,ct1.x0),!clockwise))}else ctx.lineTo(cx+xire,cy+yire),ctx.arc(cx,cy,innerRadius,endAngle,startAngle,clockwise);else ctx.lineTo(cx+xire,cy+yire)}else ctx.moveTo(cx,cy);ctx.closePath()}}}var SectorShape=function(){return function SectorShape2(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0}}(),Sector=function(_super){function Sector2(opts){return _super.call(this,opts)||this}return __extends(Sector2,_super),Sector2.prototype.getDefaultShape=function(){return new SectorShape},Sector2.prototype.buildPath=function(ctx,shape){buildPath$1(ctx,shape)},Sector2.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},Sector2}(Path);Sector.prototype.type="sector";var RingShape=function(){return function RingShape2(){this.cx=0,this.cy=0,this.r=0,this.r0=0}}(),Ring=function(_super){function Ring2(opts){return _super.call(this,opts)||this}return __extends(Ring2,_super),Ring2.prototype.getDefaultShape=function(){return new RingShape},Ring2.prototype.buildPath=function(ctx,shape){var x=shape.cx,y=shape.cy,PI22=2*Math.PI;ctx.moveTo(x+shape.r,y),ctx.arc(x,y,shape.r,0,PI22,!1),ctx.moveTo(x+shape.r0,y),ctx.arc(x,y,shape.r0,0,PI22,!0)},Ring2}(Path);function buildPath(ctx,shape,closePath){var smooth=shape.smooth,points2=shape.points;if(points2&amp;&amp;points2.length&gt;=2){if(smooth){var controlPoints=function smoothBezier(points2,smooth,isLoop,constraint){var prevPoint,nextPoint,min3,max3,cps=[],v=[],v12=[],v22=[];if(constraint){min3=[1/0,1/0],max3=[-1/0,-1/0];for(var i=0,len2=points2.length;i&lt;len2;i++)min$1(min3,min3,points2[i]),max$1(max3,max3,points2[i]);min$1(min3,min3,constraint[0]),max$1(max3,max3,constraint[1])}for(i=0,len2=points2.length;i&lt;len2;i++){var point=points2[i];if(isLoop)prevPoint=points2[i?i-1:len2-1],nextPoint=points2[(i+1)%len2];else{if(0===i||i===len2-1){cps.push(clone$3(points2[i]));continue}prevPoint=points2[i-1],nextPoint=points2[i+1]}sub(v,nextPoint,prevPoint),scale$2(v,v,smooth);var d0=distance(point,prevPoint),d1=distance(point,nextPoint),sum2=d0+d1;0!==sum2&amp;&amp;(d0/=sum2,d1/=sum2),scale$2(v12,v,-d0),scale$2(v22,v,d1);var cp0=add([],point,v12),cp1=add([],point,v22);constraint&amp;&amp;(max$1(cp0,cp0,min3),min$1(cp0,cp0,max3),max$1(cp1,cp1,min3),min$1(cp1,cp1,max3)),cps.push(cp0),cps.push(cp1)}return isLoop&amp;&amp;cps.push(cps.shift()),cps}(points2,smooth,closePath,shape.smoothConstraint);ctx.moveTo(points2[0][0],points2[0][1]);for(var len2=points2.length,i=0;i&lt;(closePath?len2:len2-1);i++){var cp1=controlPoints[2*i],cp2=controlPoints[2*i+1],p=points2[(i+1)%len2];ctx.bezierCurveTo(cp1[0],cp1[1],cp2[0],cp2[1],p[0],p[1])}}else{ctx.moveTo(points2[0][0],points2[0][1]);i=1;for(var l=points2.length;i&lt;l;i++)ctx.lineTo(points2[i][0],points2[i][1])}closePath&amp;&amp;ctx.closePath()}}Ring.prototype.type="ring";var PolygonShape=function(){return function PolygonShape2(){this.points=null,this.smooth=0,this.smoothConstraint=null}}(),Polygon=function(_super){function Polygon2(opts){return _super.call(this,opts)||this}return __extends(Polygon2,_super),Polygon2.prototype.getDefaultShape=function(){return new PolygonShape},Polygon2.prototype.buildPath=function(ctx,shape){buildPath(ctx,shape,!0)},Polygon2}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){return function PolylineShape2(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}}(),Polyline$1=function(_super){function Polyline2(opts){return _super.call(this,opts)||this}return __extends(Polyline2,_super),Polyline2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},Polyline2.prototype.getDefaultShape=function(){return new PolylineShape},Polyline2.prototype.buildPath=function(ctx,shape){buildPath(ctx,shape,!1)},Polyline2}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){return function LineShape2(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}}(),Line$1=function(_super){function Line2(opts){return _super.call(this,opts)||this}return __extends(Line2,_super),Line2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},Line2.prototype.getDefaultShape=function(){return new LineShape},Line2.prototype.buildPath=function(ctx,shape){var x1,y1,x2,y2;if(this.subPixelOptimize){var optimizedShape=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,shape,this.style);x1=optimizedShape.x1,y1=optimizedShape.y1,x2=optimizedShape.x2,y2=optimizedShape.y2}else x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2;var percent=shape.percent;0!==percent&amp;&amp;(ctx.moveTo(x1,y1),percent&lt;1&amp;&amp;(x2=x1*(1-percent)+x2*percent,y2=y1*(1-percent)+y2*percent),ctx.lineTo(x2,y2))},Line2.prototype.pointAt=function(p){var shape=this.shape;return[shape.x1*(1-p)+shape.x2*p,shape.y1*(1-p)+shape.y2*p]},Line2}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){return function BezierCurveShape2(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}}();function someVectorAt(shape,t,isTangent){var cpx2=shape.cpx2,cpy2=shape.cpy2;return null!=cpx2||null!=cpy2?[(isTangent?cubicDerivativeAt:cubicAt)(shape.x1,shape.cpx1,shape.cpx2,shape.x2,t),(isTangent?cubicDerivativeAt:cubicAt)(shape.y1,shape.cpy1,shape.cpy2,shape.y2,t)]:[(isTangent?quadraticDerivativeAt:quadraticAt$1)(shape.x1,shape.cpx1,shape.x2,t),(isTangent?quadraticDerivativeAt:quadraticAt$1)(shape.y1,shape.cpy1,shape.y2,t)]}var BezierCurve=function(_super){function BezierCurve2(opts){return _super.call(this,opts)||this}return __extends(BezierCurve2,_super),BezierCurve2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},BezierCurve2.prototype.getDefaultShape=function(){return new BezierCurveShape},BezierCurve2.prototype.buildPath=function(ctx,shape){var x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2,cpx1=shape.cpx1,cpy1=shape.cpy1,cpx2=shape.cpx2,cpy2=shape.cpy2,percent=shape.percent;0!==percent&amp;&amp;(ctx.moveTo(x1,y1),null==cpx2||null==cpy2?(percent&lt;1&amp;&amp;(quadraticSubdivide(x1,cpx1,x2,percent,out),cpx1=out[1],x2=out[2],quadraticSubdivide(y1,cpy1,y2,percent,out),cpy1=out[1],y2=out[2]),ctx.quadraticCurveTo(cpx1,cpy1,x2,y2)):(percent&lt;1&amp;&amp;(cubicSubdivide(x1,cpx1,cpx2,x2,percent,out),cpx1=out[1],cpx2=out[2],x2=out[3],cubicSubdivide(y1,cpy1,cpy2,y2,percent,out),cpy1=out[1],cpy2=out[2],y2=out[3]),ctx.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,x2,y2)))},BezierCurve2.prototype.pointAt=function(t){return someVectorAt(this.shape,t,!1)},BezierCurve2.prototype.tangentAt=function(t){var p=someVectorAt(this.shape,t,!0);return normalize$3(p,p)},BezierCurve2}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){return function ArcShape2(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}}(),Arc=function(_super){function Arc2(opts){return _super.call(this,opts)||this}return __extends(Arc2,_super),Arc2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},Arc2.prototype.getDefaultShape=function(){return new ArcShape},Arc2.prototype.buildPath=function(ctx,shape){var x=shape.cx,y=shape.cy,r=Math.max(shape.r,0),startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,unitX=Math.cos(startAngle),unitY=Math.sin(startAngle);ctx.moveTo(unitX*r+x,unitY*r+y),ctx.arc(x,y,r,startAngle,endAngle,!clockwise)},Arc2}(Path);Arc.prototype.type="arc";var CompoundPath=function(_super){function CompoundPath2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="compound",_this}return __extends(CompoundPath2,_super),CompoundPath2.prototype._updatePathDirty=function(){for(var paths=this.shape.paths,dirtyPath=this.shapeChanged(),i=0;i&lt;paths.length;i++)dirtyPath=dirtyPath||paths[i].shapeChanged();dirtyPath&amp;&amp;this.dirtyShape()},CompoundPath2.prototype.beforeBrush=function(){this._updatePathDirty();for(var paths=this.shape.paths||[],scale2=this.getGlobalScale(),i=0;i&lt;paths.length;i++)paths[i].path||paths[i].createPathProxy(),paths[i].path.setScale(scale2[0],scale2[1],paths[i].segmentIgnoreThreshold)},CompoundPath2.prototype.buildPath=function(ctx,shape){for(var paths=shape.paths||[],i=0;i&lt;paths.length;i++)paths[i].buildPath(ctx,paths[i].shape,!0)},CompoundPath2.prototype.afterBrush=function(){for(var paths=this.shape.paths||[],i=0;i&lt;paths.length;i++)paths[i].pathUpdated()},CompoundPath2.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},CompoundPath2}(Path),Gradient=function(){function Gradient2(colorStops){this.colorStops=colorStops||[]}return Gradient2.prototype.addColorStop=function(offset,color2){this.colorStops.push({offset:offset,color:color2})},Gradient2}(),LinearGradient=function(_super){function LinearGradient2(x,y,x2,y2,colorStops,globalCoord){var _this=_super.call(this,colorStops)||this;return _this.x=null==x?0:x,_this.y=null==y?0:y,_this.x2=null==x2?1:x2,_this.y2=null==y2?0:y2,_this.type="linear",_this.global=globalCoord||!1,_this}return __extends(LinearGradient2,_super),LinearGradient2}(Gradient),RadialGradient=function(_super){function RadialGradient2(x,y,r,colorStops,globalCoord){var _this=_super.call(this,colorStops)||this;return _this.x=null==x?.5:x,_this.y=null==y?.5:y,_this.r=null==r?.5:r,_this.type="radial",_this.global=globalCoord||!1,_this}return __extends(RadialGradient2,_super),RadialGradient2}(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function OrientedBoundingRect2(rect,transform2){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i&lt;4;i++)this._corners[i]=new Point;for(i=0;i&lt;2;i++)this._axes[i]=new Point;rect&amp;&amp;this.fromBoundingRect(rect,transform2)}return OrientedBoundingRect2.prototype.fromBoundingRect=function(rect,transform2){var corners=this._corners,axes=this._axes,x=rect.x,y=rect.y,x2=x+rect.width,y2=y+rect.height;if(corners[0].set(x,y),corners[1].set(x2,y),corners[2].set(x2,y2),corners[3].set(x,y2),transform2)for(var i=0;i&lt;4;i++)corners[i].transform(transform2);Point.sub(axes[0],corners[1],corners[0]),Point.sub(axes[1],corners[3],corners[0]),axes[0].normalize(),axes[1].normalize();for(i=0;i&lt;2;i++)this._origin[i]=axes[i].dot(corners[0])},OrientedBoundingRect2.prototype.intersect=function(other,mtv){var overlapped=!0,noMtv=!mtv;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,other,minTv,maxTv,noMtv,1)&amp;&amp;(overlapped=!1,noMtv)||!this._intersectCheckOneSide(other,this,minTv,maxTv,noMtv,-1)&amp;&amp;(overlapped=!1,noMtv)||noMtv||Point.copy(mtv,overlapped?minTv:maxTv),overlapped},OrientedBoundingRect2.prototype._intersectCheckOneSide=function(self2,other,minTv2,maxTv2,noMtv,inverse){for(var overlapped=!0,i=0;i&lt;2;i++){var axis=this._axes[i];if(this._getProjMinMaxOnAxis(i,self2._corners,extent),this._getProjMinMaxOnAxis(i,other._corners,extent2),extent[1]&lt;extent2[0]||extent[0]&gt;extent2[1]){if(overlapped=!1,noMtv)return overlapped;var dist0=Math.abs(extent2[0]-extent[1]),dist1=Math.abs(extent[0]-extent2[1]);Math.min(dist0,dist1)&gt;maxTv2.len()&amp;&amp;(dist0&lt;dist1?Point.scale(maxTv2,axis,-dist0*inverse):Point.scale(maxTv2,axis,dist1*inverse))}else if(minTv2){dist0=Math.abs(extent2[0]-extent[1]),dist1=Math.abs(extent[0]-extent2[1]);Math.min(dist0,dist1)&lt;minTv2.len()&amp;&amp;(dist0&lt;dist1?Point.scale(minTv2,axis,dist0*inverse):Point.scale(minTv2,axis,-dist1*inverse))}}return overlapped},OrientedBoundingRect2.prototype._getProjMinMaxOnAxis=function(dim,corners,out2){for(var axis=this._axes[dim],origin=this._origin,proj=corners[0].dot(axis)+origin[dim],min3=proj,max3=proj,i=1;i&lt;corners.length;i++){var proj_1=corners[i].dot(axis)+origin[dim];min3=Math.min(proj_1,min3),max3=Math.max(proj_1,max3)}out2[0]=min3,out2[1]=max3},OrientedBoundingRect2}(),m=[],IncrementalDisplayable=function(_super){function IncrementalDisplayable2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.notClear=!0,_this.incremental=!0,_this._displayables=[],_this._temporaryDisplayables=[],_this._cursor=0,_this}return __extends(IncrementalDisplayable2,_super),IncrementalDisplayable2.prototype.traverse=function(cb,context){cb.call(context,this)},IncrementalDisplayable2.prototype.useStyle=function(){this.style={}},IncrementalDisplayable2.prototype.getCursor=function(){return this._cursor},IncrementalDisplayable2.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},IncrementalDisplayable2.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},IncrementalDisplayable2.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},IncrementalDisplayable2.prototype.addDisplayable=function(displayable,notPersistent){notPersistent?this._temporaryDisplayables.push(displayable):this._displayables.push(displayable),this.markRedraw()},IncrementalDisplayable2.prototype.addDisplayables=function(displayables,notPersistent){notPersistent=notPersistent||!1;for(var i=0;i&lt;displayables.length;i++)this.addDisplayable(displayables[i],notPersistent)},IncrementalDisplayable2.prototype.getDisplayables=function(){return this._displayables},IncrementalDisplayable2.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},IncrementalDisplayable2.prototype.eachPendingDisplayable=function(cb){for(var i=this._cursor;i&lt;this._displayables.length;i++)cb&amp;&amp;cb(this._displayables[i]);for(i=0;i&lt;this._temporaryDisplayables.length;i++)cb&amp;&amp;cb(this._temporaryDisplayables[i])},IncrementalDisplayable2.prototype.update=function(){this.updateTransform();for(var i=this._cursor;i&lt;this._displayables.length;i++){(displayable=this._displayables[i]).parent=this,displayable.update(),displayable.parent=null}for(i=0;i&lt;this._temporaryDisplayables.length;i++){var displayable;(displayable=this._temporaryDisplayables[i]).parent=this,displayable.update(),displayable.parent=null}},IncrementalDisplayable2.prototype.getBoundingRect=function(){if(!this._rect){for(var rect=new BoundingRect(1/0,1/0,-1/0,-1/0),i=0;i&lt;this._displayables.length;i++){var displayable=this._displayables[i],childRect=displayable.getBoundingRect().clone();displayable.needLocalTransform()&amp;&amp;childRect.applyTransform(displayable.getLocalTransform(m)),rect.union(childRect)}this._rect=rect}return this._rect},IncrementalDisplayable2.prototype.contain=function(x,y){var localPos=this.transformCoordToLocal(x,y);if(this.getBoundingRect().contain(localPos[0],localPos[1]))for(var i=0;i&lt;this._displayables.length;i++){if(this._displayables[i].contain(x,y))return!0}return!1},IncrementalDisplayable2}(Displayable),transitionStore=makeInner();function getAnimationConfig(animationType,animatableModel,dataIndex,extraOpts,extraDelayParams){var animationPayload;if(animatableModel&amp;&amp;animatableModel.ecModel){var updatePayload=animatableModel.ecModel.getUpdatePayload();animationPayload=updatePayload&amp;&amp;updatePayload.animation}var isUpdate="update"===animationType;if(animatableModel&amp;&amp;animatableModel.isAnimationEnabled()){var duration=void 0,easing=void 0,delay=void 0;return extraOpts?(duration=retrieve2(extraOpts.duration,200),easing=retrieve2(extraOpts.easing,"cubicOut"),delay=0):(duration=animatableModel.getShallow(isUpdate?"animationDurationUpdate":"animationDuration"),easing=animatableModel.getShallow(isUpdate?"animationEasingUpdate":"animationEasing"),delay=animatableModel.getShallow(isUpdate?"animationDelayUpdate":"animationDelay")),animationPayload&amp;&amp;(null!=animationPayload.duration&amp;&amp;(duration=animationPayload.duration),null!=animationPayload.easing&amp;&amp;(easing=animationPayload.easing),null!=animationPayload.delay&amp;&amp;(delay=animationPayload.delay)),isFunction(delay)&amp;&amp;(delay=delay(dataIndex,extraDelayParams)),isFunction(duration)&amp;&amp;(duration=duration(dataIndex)),{duration:duration||0,delay:delay,easing:easing}}return null}function animateOrSetProps(animationType,el,props,animatableModel,dataIndex,cb,during){var removeOpt,isFrom=!1;isFunction(dataIndex)?(during=cb,cb=dataIndex,dataIndex=null):isObject$3(dataIndex)&amp;&amp;(cb=dataIndex.cb,during=dataIndex.during,isFrom=dataIndex.isFrom,removeOpt=dataIndex.removeOpt,dataIndex=dataIndex.dataIndex);var isRemove="leave"===animationType;isRemove||el.stopAnimation("leave");var animationConfig=getAnimationConfig(animationType,animatableModel,dataIndex,isRemove?removeOpt||{}:null,animatableModel&amp;&amp;animatableModel.getAnimationDelayParams?animatableModel.getAnimationDelayParams(el,dataIndex):null);if(animationConfig&amp;&amp;animationConfig.duration&gt;0){var animateConfig={duration:animationConfig.duration,delay:animationConfig.delay||0,easing:animationConfig.easing,done:cb,force:!!cb||!!during,setToFinal:!isRemove,scope:animationType,during:during};isFrom?el.animateFrom(props,animateConfig):el.animateTo(props,animateConfig)}else el.stopAnimation(),!isFrom&amp;&amp;el.attr(props),during&amp;&amp;during(1),cb&amp;&amp;cb()}function updateProps$1(el,props,animatableModel,dataIndex,cb,during){animateOrSetProps("update",el,props,animatableModel,dataIndex,cb,during)}function initProps(el,props,animatableModel,dataIndex,cb,during){animateOrSetProps("enter",el,props,animatableModel,dataIndex,cb,during)}function isElementRemoved(el){if(!el.__zr)return!0;for(var i=0;i&lt;el.animators.length;i++){if("leave"===el.animators[i].scope)return!0}return!1}function removeElement(el,props,animatableModel,dataIndex,cb,during){isElementRemoved(el)||animateOrSetProps("leave",el,props,animatableModel,dataIndex,cb,during)}function fadeOutDisplayable(el,animatableModel,dataIndex,done){el.removeTextContent(),el.removeTextGuideLine(),removeElement(el,{style:{opacity:0}},animatableModel,dataIndex,done)}function removeElementWithFadeOut(el,animatableModel,dataIndex){function doRemove(){el.parent&amp;&amp;el.parent.remove(el)}el.isGroup?el.traverse(function(disp){disp.isGroup||fadeOutDisplayable(disp,animatableModel,dataIndex,doRemove)}):fadeOutDisplayable(el,animatableModel,dataIndex,doRemove)}function saveOldStyle(el){transitionStore(el).oldStyle=el.style}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(opts){return Path.extend(opts)}var extendPathFromString=function extendFromString(str,defaultOpts){var innerOpts=createPathOptions(str,defaultOpts);return function(_super){function Sub2(opts){var _this=_super.call(this,opts)||this;return _this.applyTransform=innerOpts.applyTransform,_this.buildPath=innerOpts.buildPath,_this}return __extends(Sub2,_super),Sub2}(SVGPath)};function extendPath(pathData,opts){return extendPathFromString(pathData,opts)}function registerShape(name,ShapeClass){_customShapeMap[name]=ShapeClass}function getShapeClass(name){if(_customShapeMap.hasOwnProperty(name))return _customShapeMap[name]}function makePath(pathData,opts,rect,layout2){var path=createFromString(pathData,opts);return rect&amp;&amp;("center"===layout2&amp;&amp;(rect=centerGraphic(rect,path.getBoundingRect())),resizePath(path,rect)),path}function makeImage(imageUrl,rect,layout2){var zrImg=new ZRImage({style:{image:imageUrl,x:rect.x,y:rect.y,width:rect.width,height:rect.height},onload:function(img){if("center"===layout2){var boundingRect={width:img.width,height:img.height};zrImg.setStyle(centerGraphic(rect,boundingRect))}}});return zrImg}function centerGraphic(rect,boundingRect){var height,aspect=boundingRect.width/boundingRect.height,width=rect.height*aspect;return height=width&lt;=rect.width?rect.height:(width=rect.width)/aspect,{x:rect.x+rect.width/2-width/2,y:rect.y+rect.height/2-height/2,width:width,height:height}}var mergePath=function mergePath$1(pathEls,opts){for(var pathList=[],len2=pathEls.length,i=0;i&lt;len2;i++){var pathEl=pathEls[i];pathList.push(pathEl.getUpdatedPathProxy(!0))}var pathBundle=new Path(opts);return pathBundle.createPathProxy(),pathBundle.buildPath=function(path){if(isPathProxy(path)){path.appendPath(pathList);var ctx=path.getContext();ctx&amp;&amp;path.rebuildPath(ctx,1)}},pathBundle};function resizePath(path,rect){if(path.applyTransform){var m2=path.getBoundingRect().calculateTransform(rect);path.applyTransform(m2)}}function subPixelOptimizeLine(shape,lineWidth){return subPixelOptimizeLine$1(shape,shape,{lineWidth:lineWidth}),shape}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(target,ancestor){for(var mat=identity([]);target&amp;&amp;target!==ancestor;)mul(mat,target.getLocalTransform(),mat),target=target.parent;return mat}function applyTransform(target,transform2,invert$1){return transform2&amp;&amp;!isArrayLike(transform2)&amp;&amp;(transform2=Transformable.getLocalTransform(transform2)),invert$1&amp;&amp;(transform2=invert([],transform2)),applyTransform$1([],target,transform2)}function transformDirection(direction,transform2,invert2){var hBase=0===transform2[4]||0===transform2[5]||0===transform2[0]?1:Math.abs(2*transform2[4]/transform2[0]),vBase=0===transform2[4]||0===transform2[5]||0===transform2[2]?1:Math.abs(2*transform2[4]/transform2[2]),vertex=["left"===direction?-hBase:"right"===direction?hBase:0,"top"===direction?-vBase:"bottom"===direction?vBase:0];return vertex=applyTransform(vertex,transform2,invert2),Math.abs(vertex[0])&gt;Math.abs(vertex[1])?vertex[0]&gt;0?"right":"left":vertex[1]&gt;0?"bottom":"top"}function isNotGroup(el){return!el.isGroup}function groupTransition(g1,g2,animatableModel){if(g1&amp;&amp;g2){var elMap1=function getElMap(g){var elMap={};return g.traverse(function(el){isNotGroup(el)&amp;&amp;el.anid&amp;&amp;(elMap[el.anid]=el)}),elMap}(g1);g2.traverse(function(el){if(isNotGroup(el)&amp;&amp;el.anid){var oldEl=elMap1[el.anid];if(oldEl){var newProp=getAnimatableProps(el);el.attr(getAnimatableProps(oldEl)),updateProps$1(el,newProp,animatableModel,getECData(el).dataIndex)}}})}function getAnimatableProps(el){var obj={x:el.x,y:el.y,rotation:el.rotation};return function isPath$1(el){return null!=el.shape}(el)&amp;&amp;(obj.shape=extend({},el.shape)),obj}}function clipPointsByRect(points2,rect){return map$1(points2,function(point){var x=point[0];x=mathMax$6(x,rect.x),x=mathMin$6(x,rect.x+rect.width);var y=point[1];return y=mathMax$6(y,rect.y),[x,y=mathMin$6(y,rect.y+rect.height)]})}function clipRectByRect(targetRect,rect){var x=mathMax$6(targetRect.x,rect.x),x2=mathMin$6(targetRect.x+targetRect.width,rect.x+rect.width),y=mathMax$6(targetRect.y,rect.y),y2=mathMin$6(targetRect.y+targetRect.height,rect.y+rect.height);if(x2&gt;=x&amp;&amp;y2&gt;=y)return{x:x,y:y,width:x2-x,height:y2-y}}function createIcon(iconStr,opt,rect){var innerOpts=extend({rectHover:!0},opt),style=innerOpts.style={strokeNoScale:!0};if(rect=rect||{x:-1,y:-1,width:2,height:2},iconStr)return 0===iconStr.indexOf("image://")?(style.image=iconStr.slice(8),defaults(style,rect),new ZRImage(innerOpts)):makePath(iconStr.replace("path://",""),innerOpts,rect,"center")}function linePolygonIntersect(a1x,a1y,a2x,a2y,points2){for(var i=0,p2=points2[points2.length-1];i&lt;points2.length;i++){var p=points2[i];if(lineLineIntersect$1(a1x,a1y,a2x,a2y,p[0],p[1],p2[0],p2[1]))return!0;p2=p}}function lineLineIntersect$1(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){var mx=a2x-a1x,my=a2y-a1y,nx=b2x-b1x,ny=b2y-b1y,nmCrossProduct=crossProduct2d$1(nx,ny,mx,my);if(function nearZero(val){return val&lt;=1e-6&amp;&amp;val&gt;=-1e-6}(nmCrossProduct))return!1;var b1a1x=a1x-b1x,b1a1y=a1y-b1y,q=crossProduct2d$1(b1a1x,b1a1y,mx,my)/nmCrossProduct;if(q&lt;0||q&gt;1)return!1;var p=crossProduct2d$1(b1a1x,b1a1y,nx,ny)/nmCrossProduct;return!(p&lt;0||p&gt;1)}function crossProduct2d$1(x1,y1,x2,y2){return x1*y2-x2*y1}function setTooltipConfig(opt){var itemTooltipOption=opt.itemTooltipOption,componentModel=opt.componentModel,itemName=opt.itemName,itemTooltipOptionObj=isString(itemTooltipOption)?{formatter:itemTooltipOption}:itemTooltipOption,mainType=componentModel.mainType,componentIndex=componentModel.componentIndex,formatterParams={componentType:mainType,name:itemName,$vars:["name"]};formatterParams[mainType+"Index"]=componentIndex;var formatterParamsExtra=opt.formatterParamsExtra;formatterParamsExtra&amp;&amp;each$f(keys(formatterParamsExtra),function(key){hasOwn(formatterParams,key)||(formatterParams[key]=formatterParamsExtra[key],formatterParams.$vars.push(key))});var ecData=getECData(opt.el);ecData.componentMainType=mainType,ecData.componentIndex=componentIndex,ecData.tooltipConfig={name:itemName,option:defaults({content:itemName,encodeHTMLContent:!0,formatterParams:formatterParams},itemTooltipOptionObj)}}function traverseElement(el,cb){var stopped;el.isGroup&amp;&amp;(stopped=cb(el)),stopped||el.traverse(cb)}function traverseElements(els,cb){if(els)if(isArray$1(els))for(var i=0;i&lt;els.length;i++)traverseElement(els[i],cb);else traverseElement(els,cb)}registerShape("circle",Circle),registerShape("ellipse",Ellipse),registerShape("sector",Sector),registerShape("ring",Ring),registerShape("polygon",Polygon),registerShape("polyline",Polyline$1),registerShape("rect",Rect$2),registerShape("line",Line$1),registerShape("bezierCurve",BezierCurve),registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc:Arc,BezierCurve:BezierCurve,BoundingRect:BoundingRect,Circle:Circle,CompoundPath:CompoundPath,Ellipse:Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable:IncrementalDisplayable,Line:Line$1,LinearGradient:LinearGradient,OrientedBoundingRect:OrientedBoundingRect,Path:Path,Point:Point,Polygon:Polygon,Polyline:Polyline$1,RadialGradient:RadialGradient,Rect:Rect$2,Ring:Ring,Sector:Sector,Text:ZRText,applyTransform:applyTransform,clipPointsByRect:clipPointsByRect,clipRectByRect:clipRectByRect,createIcon:createIcon,extendPath:extendPath,extendShape:extendShape,getShapeClass:getShapeClass,getTransform:getTransform$1,groupTransition:groupTransition,initProps:initProps,isElementRemoved:isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect:linePolygonIntersect,makeImage:makeImage,makePath:makePath,mergePath:mergePath,registerShape:registerShape,removeElement:removeElement,removeElementWithFadeOut:removeElementWithFadeOut,resizePath:resizePath,setTooltipConfig:setTooltipConfig,subPixelOptimize:subPixelOptimize,subPixelOptimizeLine:subPixelOptimizeLine,subPixelOptimizeRect:function subPixelOptimizeRect(param){return subPixelOptimizeRect$1(param.shape,param.shape,param.style),param},transformDirection:transformDirection,traverseElements:traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(label,labelTexts){for(var i=0;i&lt;SPECIAL_STATES.length;i++){var stateName=SPECIAL_STATES[i],text=labelTexts[stateName],state=label.ensureState(stateName);state.style=state.style||{},state.style.text=text}var oldStates=label.currentStates.slice();label.clearStates(!0),label.setStyle({text:labelTexts.normal}),label.useStates(oldStates,!0)}function getLabelText(opt,stateModels,interpolatedValue){var baseText,labelFetcher=opt.labelFetcher,labelDataIndex=opt.labelDataIndex,labelDimIndex=opt.labelDimIndex,normalModel=stateModels.normal;labelFetcher&amp;&amp;(baseText=labelFetcher.getFormattedLabel(labelDataIndex,"normal",null,labelDimIndex,normalModel&amp;&amp;normalModel.get("formatter"),null!=interpolatedValue?{interpolatedValue:interpolatedValue}:null)),null==baseText&amp;&amp;(baseText=isFunction(opt.defaultText)?opt.defaultText(labelDataIndex,opt,interpolatedValue):opt.defaultText);for(var statesText={normal:baseText},i=0;i&lt;SPECIAL_STATES.length;i++){var stateName=SPECIAL_STATES[i],stateModel=stateModels[stateName];statesText[stateName]=retrieve2(labelFetcher?labelFetcher.getFormattedLabel(labelDataIndex,stateName,null,labelDimIndex,stateModel&amp;&amp;stateModel.get("formatter")):null,baseText)}return statesText}function setLabelStyle(targetEl,labelStatesModels,opt,stateSpecified){opt=opt||EMPTY_OBJ;for(var isSetOnText=targetEl instanceof ZRText,needsCreateText=!1,i=0;i&lt;DISPLAY_STATES.length;i++){if((stateModel=labelStatesModels[DISPLAY_STATES[i]])&amp;&amp;stateModel.getShallow("show")){needsCreateText=!0;break}}var textContent=isSetOnText?targetEl:targetEl.getTextContent();if(needsCreateText){isSetOnText||(textContent||(textContent=new ZRText,targetEl.setTextContent(textContent)),targetEl.stateProxy&amp;&amp;(textContent.stateProxy=targetEl.stateProxy));var labelStatesTexts=getLabelText(opt,labelStatesModels),normalModel=labelStatesModels.normal,showNormal=!!normalModel.getShallow("show"),normalStyle=createTextStyle$1(normalModel,stateSpecified&amp;&amp;stateSpecified.normal,opt,!1,!isSetOnText);normalStyle.text=labelStatesTexts.normal,isSetOnText||targetEl.setTextConfig(createTextConfig(normalModel,opt,!1));for(i=0;i&lt;SPECIAL_STATES.length;i++){var stateModel,stateName=SPECIAL_STATES[i];if(stateModel=labelStatesModels[stateName]){var stateObj=textContent.ensureState(stateName),stateShow=!!retrieve2(stateModel.getShallow("show"),showNormal);if(stateShow!==showNormal&amp;&amp;(stateObj.ignore=!stateShow),stateObj.style=createTextStyle$1(stateModel,stateSpecified&amp;&amp;stateSpecified[stateName],opt,!0,!isSetOnText),stateObj.style.text=labelStatesTexts[stateName],!isSetOnText)targetEl.ensureState(stateName).textConfig=createTextConfig(stateModel,opt,!0)}}textContent.silent=!!normalModel.getShallow("silent"),null!=textContent.style.x&amp;&amp;(normalStyle.x=textContent.style.x),null!=textContent.style.y&amp;&amp;(normalStyle.y=textContent.style.y),textContent.ignore=!showNormal,textContent.useStyle(normalStyle),textContent.dirty(),opt.enableTextSetter&amp;&amp;(labelInner(textContent).setLabelText=function(interpolatedValue){var labelStatesTexts2=getLabelText(opt,labelStatesModels,interpolatedValue);setLabelText(textContent,labelStatesTexts2)})}else textContent&amp;&amp;(textContent.ignore=!0);targetEl.dirty()}function getLabelStatesModels(itemModel,labelName){labelName=labelName||"label";for(var statesModels={normal:itemModel.getModel(labelName)},i=0;i&lt;SPECIAL_STATES.length;i++){var stateName=SPECIAL_STATES[i];statesModels[stateName]=itemModel.getModel([stateName,labelName])}return statesModels}function createTextStyle$1(textStyleModel,specifiedTextStyle,opt,isNotNormal,isAttached){var textStyle={};return function setTextStyleCommon(textStyle,textStyleModel,opt,isNotNormal,isAttached){opt=opt||EMPTY_OBJ;var richResult,ecModel=textStyleModel.ecModel,globalTextStyle=ecModel&amp;&amp;ecModel.option.textStyle,richItemNames=function getRichItemNames(textStyleModel){var richItemNameMap;for(;textStyleModel&amp;&amp;textStyleModel!==textStyleModel.ecModel;){var rich=(textStyleModel.option||EMPTY_OBJ).rich;if(rich){richItemNameMap=richItemNameMap||{};for(var richKeys=keys(rich),i=0;i&lt;richKeys.length;i++){richItemNameMap[richKeys[i]]=1}}textStyleModel=textStyleModel.parentModel}return richItemNameMap}(textStyleModel);if(richItemNames)for(var name_1 in richResult={},richItemNames)if(richItemNames.hasOwnProperty(name_1)){var richTextStyle=textStyleModel.getModel(["rich",name_1]);setTokenTextStyle(richResult[name_1]={},richTextStyle,globalTextStyle,opt,isNotNormal,isAttached,!1,!0)}richResult&amp;&amp;(textStyle.rich=richResult);var overflow=textStyleModel.get("overflow");overflow&amp;&amp;(textStyle.overflow=overflow);var margin=textStyleModel.get("minMargin");null!=margin&amp;&amp;(textStyle.margin=margin);setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isNotNormal,isAttached,!0,!1)}(textStyle,textStyleModel,opt,isNotNormal,isAttached),specifiedTextStyle&amp;&amp;extend(textStyle,specifiedTextStyle),textStyle}function createTextConfig(textStyleModel,opt,isNotNormal){opt=opt||{};var labelPosition,textConfig={},labelRotate=textStyleModel.getShallow("rotate"),labelDistance=retrieve2(textStyleModel.getShallow("distance"),isNotNormal?null:5),labelOffset=textStyleModel.getShallow("offset");return"outside"===(labelPosition=textStyleModel.getShallow("position")||(isNotNormal?null:"inside"))&amp;&amp;(labelPosition=opt.defaultOutsidePosition||"top"),null!=labelPosition&amp;&amp;(textConfig.position=labelPosition),null!=labelOffset&amp;&amp;(textConfig.offset=labelOffset),null!=labelRotate&amp;&amp;(labelRotate*=Math.PI/180,textConfig.rotation=labelRotate),null!=labelDistance&amp;&amp;(textConfig.distance=labelDistance),textConfig.outsideFill="inherit"===textStyleModel.get("color")?opt.inheritColor||null:"auto",textConfig}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isNotNormal,isAttached,isBlock,inRich){globalTextStyle=!isNotNormal&amp;&amp;globalTextStyle||EMPTY_OBJ;var inheritColor=opt&amp;&amp;opt.inheritColor,fillColor=textStyleModel.getShallow("color"),strokeColor=textStyleModel.getShallow("textBorderColor"),opacity=retrieve2(textStyleModel.getShallow("opacity"),globalTextStyle.opacity);"inherit"!==fillColor&amp;&amp;"auto"!==fillColor||(fillColor=inheritColor||null),"inherit"!==strokeColor&amp;&amp;"auto"!==strokeColor||(strokeColor=inheritColor||null),isAttached||(fillColor=fillColor||globalTextStyle.color,strokeColor=strokeColor||globalTextStyle.textBorderColor),null!=fillColor&amp;&amp;(textStyle.fill=fillColor),null!=strokeColor&amp;&amp;(textStyle.stroke=strokeColor);var textBorderWidth=retrieve2(textStyleModel.getShallow("textBorderWidth"),globalTextStyle.textBorderWidth);null!=textBorderWidth&amp;&amp;(textStyle.lineWidth=textBorderWidth);var textBorderType=retrieve2(textStyleModel.getShallow("textBorderType"),globalTextStyle.textBorderType);null!=textBorderType&amp;&amp;(textStyle.lineDash=textBorderType);var textBorderDashOffset=retrieve2(textStyleModel.getShallow("textBorderDashOffset"),globalTextStyle.textBorderDashOffset);null!=textBorderDashOffset&amp;&amp;(textStyle.lineDashOffset=textBorderDashOffset),isNotNormal||null!=opacity||inRich||(opacity=opt&amp;&amp;opt.defaultOpacity),null!=opacity&amp;&amp;(textStyle.opacity=opacity),isNotNormal||isAttached||null==textStyle.fill&amp;&amp;opt.inheritColor&amp;&amp;(textStyle.fill=opt.inheritColor);for(var i=0;i&lt;TEXT_PROPS_WITH_GLOBAL.length;i++){var key=TEXT_PROPS_WITH_GLOBAL[i];null!=(val=retrieve2(textStyleModel.getShallow(key),globalTextStyle[key]))&amp;&amp;(textStyle[key]=val)}for(i=0;i&lt;TEXT_PROPS_SELF.length;i++){key=TEXT_PROPS_SELF[i];null!=(val=textStyleModel.getShallow(key))&amp;&amp;(textStyle[key]=val)}if(null==textStyle.verticalAlign){var baseline=textStyleModel.getShallow("baseline");null!=baseline&amp;&amp;(textStyle.verticalAlign=baseline)}if(!isBlock||!opt.disableBox){for(i=0;i&lt;TEXT_PROPS_BOX.length;i++){var val;key=TEXT_PROPS_BOX[i];null!=(val=textStyleModel.getShallow(key))&amp;&amp;(textStyle[key]=val)}var borderType=textStyleModel.getShallow("borderType");null!=borderType&amp;&amp;(textStyle.borderDash=borderType),"auto"!==textStyle.backgroundColor&amp;&amp;"inherit"!==textStyle.backgroundColor||!inheritColor||(textStyle.backgroundColor=inheritColor),"auto"!==textStyle.borderColor&amp;&amp;"inherit"!==textStyle.borderColor||!inheritColor||(textStyle.borderColor=inheritColor)}}function getFont(opt,ecModel){var gTextStyleModel=ecModel&amp;&amp;ecModel.getModel("textStyle");return trim$1([opt.fontStyle||gTextStyleModel&amp;&amp;gTextStyleModel.getShallow("fontStyle")||"",opt.fontWeight||gTextStyleModel&amp;&amp;gTextStyleModel.getShallow("fontWeight")||"",(opt.fontSize||gTextStyleModel&amp;&amp;gTextStyleModel.getShallow("fontSize")||12)+"px",opt.fontFamily||gTextStyleModel&amp;&amp;gTextStyleModel.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(label,labelStatesModels,value,getDefaultText){if(label){var obj=labelInner(label);obj.prevValue=obj.value,obj.value=value;var normalLabelModel=labelStatesModels.normal;obj.valueAnimation=normalLabelModel.get("valueAnimation"),obj.valueAnimation&amp;&amp;(obj.precision=normalLabelModel.get("precision"),obj.defaultInterpolatedText=getDefaultText,obj.statesModels=labelStatesModels)}}function animateLabelValue(textEl,dataIndex,data,animatableModel,labelFetcher){var labelInnerStore=labelInner(textEl);if(labelInnerStore.valueAnimation&amp;&amp;labelInnerStore.prevValue!==labelInnerStore.value){var defaultInterpolatedText=labelInnerStore.defaultInterpolatedText,currValue=retrieve2(labelInnerStore.interpolatedValue,labelInnerStore.prevValue),targetValue=labelInnerStore.value;textEl.percent=0,(null==labelInnerStore.prevValue?initProps:updateProps$1)(textEl,{percent:1},animatableModel,dataIndex,null,function during(percent){var interpolated=interpolateRawValues(data,labelInnerStore.precision,currValue,targetValue,percent);labelInnerStore.interpolatedValue=1===percent?null:interpolated;var labelText=getLabelText({labelDataIndex:dataIndex,labelFetcher:labelFetcher,defaultText:defaultInterpolatedText?defaultInterpolatedText(interpolated):interpolated+""},labelInnerStore.statesModels,interpolated);setLabelText(textEl,labelText)})}}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function TextStyleMixin2(){}return TextStyleMixin2.prototype.getTextColor=function(isEmphasis){var ecModel=this.ecModel;return this.getShallow("color")||(!isEmphasis&amp;&amp;ecModel?ecModel.get(PATH_COLOR):null)},TextStyleMixin2.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},TextStyleMixin2.prototype.getTextRect=function(text){for(var style={text:text,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i&lt;textStyleParams.length;i++)style[textStyleParams[i]]=this.getShallow(textStyleParams[i]);return tmpText.useStyle(style),tmpText.update(),tmpText.getBoundingRect()},TextStyleMixin2}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function LineStyleMixin2(){}return LineStyleMixin2.prototype.getLineStyle=function(excludes){return getLineStyle(this,excludes)},LineStyleMixin2}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function ItemStyleMixin2(){}return ItemStyleMixin2.prototype.getItemStyle=function(excludes,includes){return getItemStyle(this,excludes,includes)},ItemStyleMixin2}(),Model=function(){function Model2(option,parentModel,ecModel){this.parentModel=parentModel,this.ecModel=ecModel,this.option=option}return Model2.prototype.init=function(option,parentModel,ecModel){},Model2.prototype.mergeOption=function(option,ecModel){merge(this.option,option,!0)},Model2.prototype.get=function(path,ignoreParent){return null==path?this.option:this._doGet(this.parsePath(path),!ignoreParent&amp;&amp;this.parentModel)},Model2.prototype.getShallow=function(key,ignoreParent){var option=this.option,val=null==option?option:option[key];if(null==val&amp;&amp;!ignoreParent){var parentModel=this.parentModel;parentModel&amp;&amp;(val=parentModel.getShallow(key))}return val},Model2.prototype.getModel=function(path,parentModel){var hasPath=null!=path,pathFinal=hasPath?this.parsePath(path):null;return new Model2(hasPath?this._doGet(pathFinal):this.option,parentModel=parentModel||this.parentModel&amp;&amp;this.parentModel.getModel(this.resolveParentPath(pathFinal)),this.ecModel)},Model2.prototype.isEmpty=function(){return null==this.option},Model2.prototype.restoreData=function(){},Model2.prototype.clone=function(){return new(0,this.constructor)(clone$4(this.option))},Model2.prototype.parsePath=function(path){return"string"==typeof path?path.split("."):path},Model2.prototype.resolveParentPath=function(path){return path},Model2.prototype.isAnimationEnabled=function(){if(!env.node&amp;&amp;this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},Model2.prototype._doGet=function(pathArr,parentModel){var obj=this.option;if(!pathArr)return obj;for(var i=0;i&lt;pathArr.length&amp;&amp;(!pathArr[i]||null!=(obj=obj&amp;&amp;"object"==typeof obj?obj[pathArr[i]]:null));i++);return null==obj&amp;&amp;parentModel&amp;&amp;(obj=parentModel._doGet(this.resolveParentPath(pathArr),parentModel.parentModel)),obj},Model2}();enableClassExtend(Model),function enableClassCheck(target){var classAttr=["__\0is_clz",classBase++].join("_");target.prototype[classAttr]=!0,target.isInstance=function(obj){return!(!obj||!obj[classAttr])}}(Model),mixin(Model,LineStyleMixin),mixin(Model,ItemStyleMixin),mixin(Model,AreaStyleMixin),mixin(Model,TextStyleMixin);var base=Math.round(10*Math.random());function getUID(type){return[type||"",base++].join("_")}function inheritDefaultOption(superOption,subOption){return merge(merge({},superOption,!0),subOption,!0)}var localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported&amp;&amp;(document.documentElement.lang||navigator.language||navigator.browserLanguage||"EN").toUpperCase().indexOf("ZH")&gt;-1?"ZH":"EN";function registerLocale(locale,localeObj){locale=locale.toUpperCase(),localeModels[locale]=new Model(localeObj),localeStorage[locale]=localeObj}function getLocaleModel(lang){return localeModels[lang]}registerLocale("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),registerLocale("ZH",{time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}});var defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:"{yyyy}-{MM}-{dd}",hour:"{yyyy}-{MM}-{dd} "+defaultLeveledFormatter.hour,minute:"{yyyy}-{MM}-{dd} "+defaultLeveledFormatter.minute,second:"{yyyy}-{MM}-{dd} "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(str,len2){return"0000".substr(0,len2-(str+="").length)+str}function getPrimaryTimeUnit(timeUnit){switch(timeUnit){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return timeUnit}}function isPrimaryTimeUnit(timeUnit){return timeUnit===getPrimaryTimeUnit(timeUnit)}function format$1(time2,template,isUTC,lang){var date=parseDate(time2),y=date[fullYearGetterName(isUTC)](),M=date[monthGetterName(isUTC)]()+1,q=Math.floor((M-1)/3)+1,d=date[dateGetterName(isUTC)](),e2=date["get"+(isUTC?"UTC":"")+"Day"](),H=date[hoursGetterName(isUTC)](),h=(H-1)%12+1,m2=date[minutesGetterName(isUTC)](),s=date[secondsGetterName(isUTC)](),S=date[millisecondsGetterName(isUTC)](),a=H&gt;=12?"pm":"am",A=a.toUpperCase(),timeModel=(lang instanceof Model?lang:getLocaleModel(lang||SYSTEM_LANG)||function getDefaultLocaleModel(){return localeModels.EN}()).getModel("time"),month=timeModel.get("month"),monthAbbr=timeModel.get("monthAbbr"),dayOfWeek=timeModel.get("dayOfWeek"),dayOfWeekAbbr=timeModel.get("dayOfWeekAbbr");return(template||"").replace(/{a}/g,a+"").replace(/{A}/g,A+"").replace(/{yyyy}/g,y+"").replace(/{yy}/g,pad(y%100+"",2)).replace(/{Q}/g,q+"").replace(/{MMMM}/g,month[M-1]).replace(/{MMM}/g,monthAbbr[M-1]).replace(/{MM}/g,pad(M,2)).replace(/{M}/g,M+"").replace(/{dd}/g,pad(d,2)).replace(/{d}/g,d+"").replace(/{eeee}/g,dayOfWeek[e2]).replace(/{ee}/g,dayOfWeekAbbr[e2]).replace(/{e}/g,e2+"").replace(/{HH}/g,pad(H,2)).replace(/{H}/g,H+"").replace(/{hh}/g,pad(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,pad(m2,2)).replace(/{m}/g,m2+"").replace(/{ss}/g,pad(s,2)).replace(/{s}/g,s+"").replace(/{SSS}/g,pad(S,3)).replace(/{S}/g,S+"")}function getUnitFromValue(value,isUTC){var date=parseDate(value),M=date[monthGetterName(isUTC)]()+1,d=date[dateGetterName(isUTC)](),h=date[hoursGetterName(isUTC)](),m2=date[minutesGetterName(isUTC)](),s=date[secondsGetterName(isUTC)](),isSecond=0===date[millisecondsGetterName(isUTC)](),isMinute=isSecond&amp;&amp;0===s,isHour=isMinute&amp;&amp;0===m2,isDay=isHour&amp;&amp;0===h,isMonth=isDay&amp;&amp;1===d;return isMonth&amp;&amp;1===M?"year":isMonth?"month":isDay?"day":isHour?"hour":isMinute?"minute":isSecond?"second":"millisecond"}function getUnitValue(value,unit,isUTC){var date=isNumber(value)?parseDate(value):value;switch(unit=unit||getUnitFromValue(value,isUTC)){case"year":return date[fullYearGetterName(isUTC)]();case"half-year":return date[monthGetterName(isUTC)]()&gt;=6?1:0;case"quarter":return Math.floor((date[monthGetterName(isUTC)]()+1)/4);case"month":return date[monthGetterName(isUTC)]();case"day":return date[dateGetterName(isUTC)]();case"half-day":return date[hoursGetterName(isUTC)]()/24;case"hour":return date[hoursGetterName(isUTC)]();case"minute":return date[minutesGetterName(isUTC)]();case"second":return date[secondsGetterName(isUTC)]();case"millisecond":return date[millisecondsGetterName(isUTC)]()}}function fullYearGetterName(isUTC){return isUTC?"getUTCFullYear":"getFullYear"}function monthGetterName(isUTC){return isUTC?"getUTCMonth":"getMonth"}function dateGetterName(isUTC){return isUTC?"getUTCDate":"getDate"}function hoursGetterName(isUTC){return isUTC?"getUTCHours":"getHours"}function minutesGetterName(isUTC){return isUTC?"getUTCMinutes":"getMinutes"}function secondsGetterName(isUTC){return isUTC?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(isUTC){return isUTC?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(isUTC){return isUTC?"setUTCFullYear":"setFullYear"}function monthSetterName(isUTC){return isUTC?"setUTCMonth":"setMonth"}function dateSetterName(isUTC){return isUTC?"setUTCDate":"setDate"}function hoursSetterName(isUTC){return isUTC?"setUTCHours":"setHours"}function minutesSetterName(isUTC){return isUTC?"setUTCMinutes":"setMinutes"}function secondsSetterName(isUTC){return isUTC?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(isUTC){return isUTC?"setUTCMilliseconds":"setMilliseconds"}function addCommas(x){if(!isNumeric(x))return isString(x)?x:"-";var parts=(x+"").split(".");return parts[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(parts.length&gt;1?"."+parts[1]:"")}function toCamelCase(str,upperCaseFirst){return str=(str||"").toLowerCase().replace(/-(.)/g,function(match,group1){return group1.toUpperCase()}),upperCaseFirst&amp;&amp;str&amp;&amp;(str=str.charAt(0).toUpperCase()+str.slice(1)),str}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(value,valueType,useUTC){function stringToUserReadable(str){return str&amp;&amp;trim$1(str)?str:"-"}function isNumberUserReadable(num){return!(null==num||isNaN(num)||!isFinite(num))}var isTypeTime="time"===valueType,isValueDate=value instanceof Date;if(isTypeTime||isValueDate){var date=isTypeTime?parseDate(value):value;if(!isNaN(+date))return format$1(date,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",useUTC);if(isValueDate)return"-"}if("ordinal"===valueType)return isStringSafe(value)?stringToUserReadable(value):isNumber(value)&amp;&amp;isNumberUserReadable(value)?value+"":"-";var numericResult=numericToNumber(value);return isNumberUserReadable(numericResult)?addCommas(numericResult):isStringSafe(value)?stringToUserReadable(value):"boolean"==typeof value?value+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(varName,seriesIdx){return"{"+varName+(null==seriesIdx?"":seriesIdx)+"}"};function formatTpl(tpl,paramsList,encode){isArray$1(paramsList)||(paramsList=[paramsList]);var seriesLen=paramsList.length;if(!seriesLen)return"";for(var $vars=paramsList[0].$vars||[],i=0;i&lt;$vars.length;i++){var alias=TPL_VAR_ALIAS[i];tpl=tpl.replace(wrapVar(alias),wrapVar(alias,0))}for(var seriesIdx=0;seriesIdx&lt;seriesLen;seriesIdx++)for(var k=0;k&lt;$vars.length;k++){var val=paramsList[seriesIdx][$vars[k]];tpl=tpl.replace(wrapVar(TPL_VAR_ALIAS[k],seriesIdx),encode?encodeHTML(val):val)}return tpl}function getTooltipMarker(inOpt,extraCssText){var opt=isString(inOpt)?{color:inOpt,extraCssText:extraCssText}:inOpt||{},color2=opt.color,type=opt.type;extraCssText=opt.extraCssText;var renderMode=opt.renderMode||"html";return color2?"html"===renderMode?"subItem"===type?'&lt;span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(color2)+";"+(extraCssText||"")+'"&gt;&lt;/span&gt;':'&lt;span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(color2)+";"+(extraCssText||"")+'"&gt;&lt;/span&gt;':{renderMode:renderMode,content:"{"+(opt.markerId||"markerX")+"|}  ",style:"subItem"===type?{width:4,height:4,borderRadius:2,backgroundColor:color2}:{width:10,height:10,borderRadius:5,backgroundColor:color2}}:""}function formatTime(tpl,value,isUTC){"week"!==tpl&amp;&amp;"month"!==tpl&amp;&amp;"quarter"!==tpl&amp;&amp;"half-year"!==tpl&amp;&amp;"year"!==tpl||(tpl="MM-dd\nyyyy");var date=parseDate(value),getUTC=isUTC?"getUTC":"get",y=date[getUTC+"FullYear"](),M=date[getUTC+"Month"]()+1,d=date[getUTC+"Date"](),h=date[getUTC+"Hours"](),m2=date[getUTC+"Minutes"](),s=date[getUTC+"Seconds"](),S=date[getUTC+"Milliseconds"]();return tpl=tpl.replace("MM",pad(M,2)).replace("M",M).replace("yyyy",y).replace("yy",pad(y%100+"",2)).replace("dd",pad(d,2)).replace("d",d).replace("hh",pad(h,2)).replace("h",h).replace("mm",pad(m2,2)).replace("m",m2).replace("ss",pad(s,2)).replace("s",s).replace("SSS",pad(S,3))}function convertToColorString(color2,defaultColor){return defaultColor=defaultColor||"transparent",isString(color2)?color2:isObject$3(color2)&amp;&amp;color2.colorStops&amp;&amp;(color2.colorStops[0]||{}).color||defaultColor}function windowOpen(link,target){if("_blank"===target||"blank"===target){var blank=window.open();blank.opener=null,blank.location.href=link}else window.open(link,target)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(orient,group,gap,maxWidth,maxHeight){var x=0,y=0;null==maxWidth&amp;&amp;(maxWidth=1/0),null==maxHeight&amp;&amp;(maxHeight=1/0);var currentLineMaxSize=0;group.eachChild(function(child,idx){var nextX,nextY,rect=child.getBoundingRect(),nextChild=group.childAt(idx+1),nextChildRect=nextChild&amp;&amp;nextChild.getBoundingRect();if("horizontal"===orient){var moveX=rect.width+(nextChildRect?-nextChildRect.x+rect.x:0);(nextX=x+moveX)&gt;maxWidth||child.newline?(x=0,nextX=moveX,y+=currentLineMaxSize+gap,currentLineMaxSize=rect.height):currentLineMaxSize=Math.max(currentLineMaxSize,rect.height)}else{var moveY=rect.height+(nextChildRect?-nextChildRect.y+rect.y:0);(nextY=y+moveY)&gt;maxHeight||child.newline?(x+=currentLineMaxSize+gap,y=0,nextY=moveY,currentLineMaxSize=rect.width):currentLineMaxSize=Math.max(currentLineMaxSize,rect.width)}child.newline||(child.x=x,child.y=y,child.markRedraw(),"horizontal"===orient?x=nextX+gap:y=nextY+gap)})}var box=boxLayout;function getLayoutRect(positionInfo,containerRect,margin){margin=normalizeCssArray(margin||0);var containerWidth=containerRect.width,containerHeight=containerRect.height,left=parsePercent(positionInfo.left,containerWidth),top=parsePercent(positionInfo.top,containerHeight),right=parsePercent(positionInfo.right,containerWidth),bottom=parsePercent(positionInfo.bottom,containerHeight),width=parsePercent(positionInfo.width,containerWidth),height=parsePercent(positionInfo.height,containerHeight),verticalMargin=margin[2]+margin[0],horizontalMargin=margin[1]+margin[3],aspect=positionInfo.aspect;switch(isNaN(width)&amp;&amp;(width=containerWidth-right-horizontalMargin-left),isNaN(height)&amp;&amp;(height=containerHeight-bottom-verticalMargin-top),null!=aspect&amp;&amp;(isNaN(width)&amp;&amp;isNaN(height)&amp;&amp;(aspect&gt;containerWidth/containerHeight?width=.8*containerWidth:height=.8*containerHeight),isNaN(width)&amp;&amp;(width=aspect*height),isNaN(height)&amp;&amp;(height=width/aspect)),isNaN(left)&amp;&amp;(left=containerWidth-right-width-horizontalMargin),isNaN(top)&amp;&amp;(top=containerHeight-bottom-height-verticalMargin),positionInfo.left||positionInfo.right){case"center":left=containerWidth/2-width/2-margin[3];break;case"right":left=containerWidth-width-horizontalMargin}switch(positionInfo.top||positionInfo.bottom){case"middle":case"center":top=containerHeight/2-height/2-margin[0];break;case"bottom":top=containerHeight-height-verticalMargin}left=left||0,top=top||0,isNaN(width)&amp;&amp;(width=containerWidth-horizontalMargin-left-(right||0)),isNaN(height)&amp;&amp;(height=containerHeight-verticalMargin-top-(bottom||0));var rect=new BoundingRect(left+margin[3],top+margin[0],width,height);return rect.margin=margin,rect}function positionElement(el,positionInfo,containerRect,margin,opt,out2){var rect,h=!opt||!opt.hv||opt.hv[0],v=!opt||!opt.hv||opt.hv[1],boundingMode=opt&amp;&amp;opt.boundingMode||"all";if((out2=out2||el).x=el.x,out2.y=el.y,!h&amp;&amp;!v)return!1;if("raw"===boundingMode)rect="group"===el.type?new BoundingRect(0,0,+positionInfo.width||0,+positionInfo.height||0):el.getBoundingRect();else if(rect=el.getBoundingRect(),el.needLocalTransform()){var transform2=el.getLocalTransform();(rect=rect.clone()).applyTransform(transform2)}var layoutRect=getLayoutRect(defaults({width:rect.width,height:rect.height},positionInfo),containerRect,margin),dx=h?layoutRect.x-rect.x:0,dy=v?layoutRect.y-rect.y:0;return"raw"===boundingMode?(out2.x=dx,out2.y=dy):(out2.x+=dx,out2.y+=dy),out2===el&amp;&amp;el.markRedraw(),!0}function fetchLayoutMode(ins){var layoutMode=ins.layoutMode||ins.constructor.layoutMode;return isObject$3(layoutMode)?layoutMode:layoutMode?{type:layoutMode}:null}function mergeLayoutParam(targetOption,newOption,opt){var ignoreSize=opt&amp;&amp;opt.ignoreSize;!isArray$1(ignoreSize)&amp;&amp;(ignoreSize=[ignoreSize,ignoreSize]);var hResult=merge2(HV_NAMES[0],0),vResult=merge2(HV_NAMES[1],1);function merge2(names,hvIdx){var newParams={},newValueCount=0,merged={},mergedValueCount=0;if(each$e(names,function(name){merged[name]=targetOption[name]}),each$e(names,function(name){hasProp(newOption,name)&amp;&amp;(newParams[name]=merged[name]=newOption[name]),hasValue(newParams,name)&amp;&amp;newValueCount++,hasValue(merged,name)&amp;&amp;mergedValueCount++}),ignoreSize[hvIdx])return hasValue(newOption,names[1])?merged[names[2]]=null:hasValue(newOption,names[2])&amp;&amp;(merged[names[1]]=null),merged;if(2!==mergedValueCount&amp;&amp;newValueCount){if(newValueCount&gt;=2)return newParams;for(var i=0;i&lt;names.length;i++){var name_1=names[i];if(!hasProp(newParams,name_1)&amp;&amp;hasProp(targetOption,name_1)){newParams[name_1]=targetOption[name_1];break}}return newParams}return merged}function hasProp(obj,name){return obj.hasOwnProperty(name)}function hasValue(obj,name){return null!=obj[name]&amp;&amp;"auto"!==obj[name]}function copy2(names,target,source){each$e(names,function(name){target[name]=source[name]})}copy2(HV_NAMES[0],targetOption,hResult),copy2(HV_NAMES[1],targetOption,vResult)}function getLayoutParams(source){return copyLayoutParams({},source)}function copyLayoutParams(target,source){return source&amp;&amp;target&amp;&amp;each$e(LOCATION_PARAMS,function(name){source.hasOwnProperty(name)&amp;&amp;(target[name]=source[name])}),target}curry$1(boxLayout,"vertical"),curry$1(boxLayout,"horizontal");var inner$l=makeInner(),ComponentModel=function(_super){function ComponentModel2(option,parentModel,ecModel){var _this=_super.call(this,option,parentModel,ecModel)||this;return _this.uid=getUID("ec_cpt_model"),_this}var proto2;return __extends$1(ComponentModel2,_super),ComponentModel2.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel)},ComponentModel2.prototype.mergeDefaultAndTheme=function(option,ecModel){var layoutMode=fetchLayoutMode(this),inputPositionParams=layoutMode?getLayoutParams(option):{};merge(option,ecModel.getTheme().get(this.mainType)),merge(option,this.getDefaultOption()),layoutMode&amp;&amp;mergeLayoutParam(option,inputPositionParams,layoutMode)},ComponentModel2.prototype.mergeOption=function(option,ecModel){merge(this.option,option,!0);var layoutMode=fetchLayoutMode(this);layoutMode&amp;&amp;mergeLayoutParam(this.option,option,layoutMode)},ComponentModel2.prototype.optionUpdated=function(newCptOption,isInit){},ComponentModel2.prototype.getDefaultOption=function(){var ctor=this.constructor;if(!function isExtendedClass(clz){return!(!clz||!clz.___EC__EXTENDED_CLASS___)}(ctor))return ctor.defaultOption;var fields=inner$l(this);if(!fields.defaultOption){for(var optList=[],clz=ctor;clz;){var opt=clz.prototype.defaultOption;opt&amp;&amp;optList.push(opt),clz=clz.superClass}for(var defaultOption2={},i=optList.length-1;i&gt;=0;i--)defaultOption2=merge(defaultOption2,optList[i],!0);fields.defaultOption=defaultOption2}return fields.defaultOption},ComponentModel2.prototype.getReferringComponents=function(mainType,opt){var indexKey=mainType+"Index",idKey=mainType+"Id";return queryReferringComponents(this.ecModel,mainType,{index:this.get(indexKey,!0),id:this.get(idKey,!0)},opt)},ComponentModel2.prototype.getBoxLayoutParams=function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}},ComponentModel2.prototype.getZLevelKey=function(){return""},ComponentModel2.prototype.setZLevel=function(zlevel){this.option.zlevel=zlevel},ComponentModel2.protoInitialize=((proto2=ComponentModel2.prototype).type="component",proto2.id="",proto2.name="",proto2.mainType="",proto2.subType="",void(proto2.componentIndex=0)),ComponentModel2}(Model);mountExtend(ComponentModel,Model),enableClassManagement(ComponentModel),function enableSubTypeDefaulter(target){var subTypeDefaulters={};target.registerSubTypeDefaulter=function(componentType,defaulter){var componentTypeInfo=parseClassType(componentType);subTypeDefaulters[componentTypeInfo.main]=defaulter},target.determineSubType=function(componentType,option){var type=option.type;if(!type){var componentTypeMain=parseClassType(componentType).main;target.hasSubTypes(componentType)&amp;&amp;subTypeDefaulters[componentTypeMain]&amp;&amp;(type=subTypeDefaulters[componentTypeMain](option))}return type}}(ComponentModel),function enableTopologicalTravel(entity,dependencyGetter){function createDependencyGraphItem(graph,name){return graph[name]||(graph[name]={predecessor:[],successor:[]}),graph[name]}entity.topologicalTravel=function(targetNameList,fullNameList,callback,context){if(targetNameList.length){var result=function makeDepndencyGraph(fullNameList){var graph={},noEntryList=[];return each$f(fullNameList,function(name){var thisItem=createDependencyGraphItem(graph,name),availableDeps=function getAvailableDependencies(originalDeps,fullNameList){var availableDeps=[];return each$f(originalDeps,function(dep){indexOf(fullNameList,dep)&gt;=0&amp;&amp;availableDeps.push(dep)}),availableDeps}(thisItem.originalDeps=dependencyGetter(name),fullNameList);thisItem.entryCount=availableDeps.length,0===thisItem.entryCount&amp;&amp;noEntryList.push(name),each$f(availableDeps,function(dependentName){indexOf(thisItem.predecessor,dependentName)&lt;0&amp;&amp;thisItem.predecessor.push(dependentName);var thatItem=createDependencyGraphItem(graph,dependentName);indexOf(thatItem.successor,dependentName)&lt;0&amp;&amp;thatItem.successor.push(name)})}),{graph:graph,noEntryList:noEntryList}}(fullNameList),graph=result.graph,noEntryList=result.noEntryList,targetNameSet={};for(each$f(targetNameList,function(name){targetNameSet[name]=!0});noEntryList.length;){var currComponentType=noEntryList.pop(),currVertex=graph[currComponentType],isInTargetNameSet=!!targetNameSet[currComponentType];isInTargetNameSet&amp;&amp;(callback.call(context,currComponentType,currVertex.originalDeps.slice()),delete targetNameSet[currComponentType]),each$f(currVertex.successor,isInTargetNameSet?removeEdgeAndAdd:removeEdge)}each$f(targetNameSet,function(){throw new Error("")})}function removeEdge(succComponentType){graph[succComponentType].entryCount--,0===graph[succComponentType].entryCount&amp;&amp;noEntryList.push(succComponentType)}function removeEdgeAndAdd(succComponentType){targetNameSet[succComponentType]=!0,removeEdge(succComponentType)}}}(ComponentModel,function getDependencies(componentType){var deps=[];each$f(ComponentModel.getClassesByMainType(componentType),function(clz){deps=deps.concat(clz.dependencies||clz.prototype.dependencies||[])}),deps=map$1(deps,function(type){return parseClassType(type).main}),"dataset"!==componentType&amp;&amp;indexOf(deps,"dataset")&lt;=0&amp;&amp;deps.unshift("dataset");return deps});var platform="";"undefined"!=typeof navigator&amp;&amp;(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),BE_ORDINAL_Must=1,BE_ORDINAL_Might=2,BE_ORDINAL_Not=3,innerGlobalModel=makeInner();function makeSeriesEncodeForAxisCoordSys(coordDimensions,seriesModel,source){var encode={},datasetModel=querySeriesUpstreamDatasetModel(seriesModel);if(!datasetModel||!coordDimensions)return encode;var baseCategoryDimIndex,categoryWayValueDimStart,encodeItemName=[],encodeSeriesName=[],ecModel=seriesModel.ecModel,datasetMap=innerGlobalModel(ecModel).datasetMap,key=datasetModel.uid+"_"+source.seriesLayoutBy;each$f(coordDimensions=coordDimensions.slice(),function(coordDimInfoLoose,coordDimIdx){var coordDimInfo=isObject$3(coordDimInfoLoose)?coordDimInfoLoose:coordDimensions[coordDimIdx]={name:coordDimInfoLoose};"ordinal"===coordDimInfo.type&amp;&amp;null==baseCategoryDimIndex&amp;&amp;(baseCategoryDimIndex=coordDimIdx,categoryWayValueDimStart=getDataDimCountOnCoordDim(coordDimInfo)),encode[coordDimInfo.name]=[]});var datasetRecord=datasetMap.get(key)||datasetMap.set(key,{categoryWayDim:categoryWayValueDimStart,valueWayDim:0});function pushDim(dimIdxArr,idxFrom,idxCount){for(var i=0;i&lt;idxCount;i++)dimIdxArr.push(idxFrom+i)}function getDataDimCountOnCoordDim(coordDimInfo){var dimsDef=coordDimInfo.dimsDef;return dimsDef?dimsDef.length:1}return each$f(coordDimensions,function(coordDimInfo,coordDimIdx){var coordDimName=coordDimInfo.name,count2=getDataDimCountOnCoordDim(coordDimInfo);if(null==baseCategoryDimIndex){var start2=datasetRecord.valueWayDim;pushDim(encode[coordDimName],start2,count2),pushDim(encodeSeriesName,start2,count2),datasetRecord.valueWayDim+=count2}else if(baseCategoryDimIndex===coordDimIdx)pushDim(encode[coordDimName],0,count2),pushDim(encodeItemName,0,count2);else{start2=datasetRecord.categoryWayDim;pushDim(encode[coordDimName],start2,count2),pushDim(encodeSeriesName,start2,count2),datasetRecord.categoryWayDim+=count2}}),encodeItemName.length&amp;&amp;(encode.itemName=encodeItemName),encodeSeriesName.length&amp;&amp;(encode.seriesName=encodeSeriesName),encode}function makeSeriesEncodeForNameBased(seriesModel,source,dimCount){var encode={};if(!querySeriesUpstreamDatasetModel(seriesModel))return encode;var potentialNameDimIndex,sourceFormat=source.sourceFormat,dimensionsDefine=source.dimensionsDefine;"objectRows"!==sourceFormat&amp;&amp;"keyedColumns"!==sourceFormat||each$f(dimensionsDefine,function(dim,idx){"name"===(isObject$3(dim)?dim.name:dim)&amp;&amp;(potentialNameDimIndex=idx)});var idxResult=function(){for(var idxRes0={},idxRes1={},guessRecords=[],i=0,len2=Math.min(5,dimCount);i&lt;len2;i++){var guessResult=doGuessOrdinal(source.data,sourceFormat,source.seriesLayoutBy,dimensionsDefine,source.startIndex,i);guessRecords.push(guessResult);var isPureNumber=guessResult===BE_ORDINAL_Not;if(isPureNumber&amp;&amp;null==idxRes0.v&amp;&amp;i!==potentialNameDimIndex&amp;&amp;(idxRes0.v=i),(null==idxRes0.n||idxRes0.n===idxRes0.v||!isPureNumber&amp;&amp;guessRecords[idxRes0.n]===BE_ORDINAL_Not)&amp;&amp;(idxRes0.n=i),fulfilled(idxRes0)&amp;&amp;guessRecords[idxRes0.n]!==BE_ORDINAL_Not)return idxRes0;isPureNumber||(guessResult===BE_ORDINAL_Might&amp;&amp;null==idxRes1.v&amp;&amp;i!==potentialNameDimIndex&amp;&amp;(idxRes1.v=i),null!=idxRes1.n&amp;&amp;idxRes1.n!==idxRes1.v||(idxRes1.n=i))}function fulfilled(idxResult2){return null!=idxResult2.v&amp;&amp;null!=idxResult2.n}return fulfilled(idxRes0)?idxRes0:fulfilled(idxRes1)?idxRes1:null}();if(idxResult){encode.value=[idxResult.v];var nameDimIndex=null!=potentialNameDimIndex?potentialNameDimIndex:idxResult.n;encode.itemName=[nameDimIndex],encode.seriesName=[nameDimIndex]}return encode}function querySeriesUpstreamDatasetModel(seriesModel){if(!seriesModel.get("data",!0))return queryReferringComponents(seriesModel.ecModel,"dataset",{index:seriesModel.get("datasetIndex",!0),id:seriesModel.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function guessOrdinal(source,dimIndex){return doGuessOrdinal(source.data,source.sourceFormat,source.seriesLayoutBy,source.dimensionsDefine,source.startIndex,dimIndex)}function doGuessOrdinal(data,sourceFormat,seriesLayoutBy,dimensionsDefine,startIndex,dimIndex){var result,dimName,dimType;if(isTypedArray(data))return BE_ORDINAL_Not;if(dimensionsDefine){var dimDefItem=dimensionsDefine[dimIndex];isObject$3(dimDefItem)?(dimName=dimDefItem.name,dimType=dimDefItem.type):isString(dimDefItem)&amp;&amp;(dimName=dimDefItem)}if(null!=dimType)return"ordinal"===dimType?BE_ORDINAL_Must:BE_ORDINAL_Not;if("arrayRows"===sourceFormat){var dataArrayRows=data;if("row"===seriesLayoutBy){for(var sample=dataArrayRows[dimIndex],i=0;i&lt;(sample||[]).length&amp;&amp;i&lt;5;i++)if(null!=(result=detectValue(sample[startIndex+i])))return result}else for(i=0;i&lt;dataArrayRows.length&amp;&amp;i&lt;5;i++){var row=dataArrayRows[startIndex+i];if(row&amp;&amp;null!=(result=detectValue(row[dimIndex])))return result}}else if("objectRows"===sourceFormat){var dataObjectRows=data;if(!dimName)return BE_ORDINAL_Not;for(i=0;i&lt;dataObjectRows.length&amp;&amp;i&lt;5;i++){if((item=dataObjectRows[i])&amp;&amp;null!=(result=detectValue(item[dimName])))return result}}else if("keyedColumns"===sourceFormat){if(!dimName)return BE_ORDINAL_Not;if(!(sample=data[dimName])||isTypedArray(sample))return BE_ORDINAL_Not;for(i=0;i&lt;sample.length&amp;&amp;i&lt;5;i++)if(null!=(result=detectValue(sample[i])))return result}else if("original"===sourceFormat){var dataOriginal=data;for(i=0;i&lt;dataOriginal.length&amp;&amp;i&lt;5;i++){var item,val=getDataItemValue(item=dataOriginal[i]);if(!isArray$1(val))return BE_ORDINAL_Not;if(null!=(result=detectValue(val[dimIndex])))return result}}function detectValue(val2){var beStr=isString(val2);return null!=val2&amp;&amp;Number.isFinite(Number(val2))&amp;&amp;""!==val2?beStr?BE_ORDINAL_Might:BE_ORDINAL_Not:beStr&amp;&amp;"-"!==val2?BE_ORDINAL_Must:void 0}return BE_ORDINAL_Not}var internalOptionCreatorMap=createHashMap();var reCreateSeriesIndices,assertSeriesInitialized,initBase,innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function PaletteMixin2(){}return PaletteMixin2.prototype.getColorFromPalette=function(name,scope,requestNum){var defaultPalette=normalizeToArray(this.get("color",!0)),layeredPalette=this.get("colorLayer",!0);return getFromPalette(this,innerColor,defaultPalette,layeredPalette,name,scope,requestNum)},PaletteMixin2.prototype.clearColorPalette=function(){!function clearPalette(that,inner2){inner2(that).paletteIdx=0,inner2(that).paletteNameMap={}}(this,innerColor)},PaletteMixin2}();function getDecalFromPalette(ecModel,name,scope,requestNum){var defaultDecals=normalizeToArray(ecModel.get(["aria","decal","decals"]));return getFromPalette(ecModel,innerDecal,defaultDecals,null,name,scope,requestNum)}function getFromPalette(that,inner2,defaultPalette,layeredPalette,name,scope,requestNum){var scopeFields=inner2(scope=scope||that),paletteIdx=scopeFields.paletteIdx||0,paletteNameMap=scopeFields.paletteNameMap=scopeFields.paletteNameMap||{};if(paletteNameMap.hasOwnProperty(name))return paletteNameMap[name];var palette=null!=requestNum&amp;&amp;layeredPalette?function getNearestPalette(palettes,requestColorNum){for(var paletteNum=palettes.length,i=0;i&lt;paletteNum;i++)if(palettes[i].length&gt;requestColorNum)return palettes[i];return palettes[paletteNum-1]}(layeredPalette,requestNum):defaultPalette;if((palette=palette||defaultPalette)&amp;&amp;palette.length){var pickedPaletteItem=palette[paletteIdx];return name&amp;&amp;(paletteNameMap[name]=pickedPaletteItem),scopeFields.paletteIdx=(paletteIdx+1)%palette.length,pickedPaletteItem}}var GlobalModel=function(_super){function GlobalModel2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(GlobalModel2,_super),GlobalModel2.prototype.init=function(option,parentModel,ecModel,theme2,locale,optionManager){theme2=theme2||{},this.option=null,this._theme=new Model(theme2),this._locale=new Model(locale),this._optionManager=optionManager},GlobalModel2.prototype.setOption=function(option,opts,optionPreprocessorFuncs2){var innerOpt=normalizeSetOptionInput(opts);this._optionManager.setOption(option,optionPreprocessorFuncs2,innerOpt),this._resetOption(null,innerOpt)},GlobalModel2.prototype.resetOption=function(type,opt){return this._resetOption(type,normalizeSetOptionInput(opt))},GlobalModel2.prototype._resetOption=function(type,opt){var optionChanged=!1,optionManager=this._optionManager;if(!type||"recreate"===type){var baseOption=optionManager.mountOption("recreate"===type);this.option&amp;&amp;"recreate"!==type?(this.restoreData(),this._mergeOption(baseOption,opt)):initBase(this,baseOption),optionChanged=!0}if("timeline"!==type&amp;&amp;"media"!==type||this.restoreData(),!type||"recreate"===type||"timeline"===type){var timelineOption=optionManager.getTimelineOption(this);timelineOption&amp;&amp;(optionChanged=!0,this._mergeOption(timelineOption,opt))}if(!type||"recreate"===type||"media"===type){var mediaOptions=optionManager.getMediaOption(this);mediaOptions.length&amp;&amp;each$f(mediaOptions,function(mediaOption){optionChanged=!0,this._mergeOption(mediaOption,opt)},this)}return optionChanged},GlobalModel2.prototype.mergeOption=function(option){this._mergeOption(option,null)},GlobalModel2.prototype._mergeOption=function(newOption,opt){var option=this.option,componentsMap=this._componentsMap,componentsCount=this._componentsCount,newCmptTypes=[],newCmptTypeMap=createHashMap(),replaceMergeMainTypeMap=opt&amp;&amp;opt.replaceMergeMainTypeMap;!function resetSourceDefaulter(ecModel){innerGlobalModel(ecModel).datasetMap=createHashMap()}(this),each$f(newOption,function(componentOption,mainType){null!=componentOption&amp;&amp;(ComponentModel.hasClass(mainType)?mainType&amp;&amp;(newCmptTypes.push(mainType),newCmptTypeMap.set(mainType,!0)):option[mainType]=null==option[mainType]?clone$4(componentOption):merge(option[mainType],componentOption,!0))}),replaceMergeMainTypeMap&amp;&amp;replaceMergeMainTypeMap.each(function(val,mainTypeInReplaceMerge){ComponentModel.hasClass(mainTypeInReplaceMerge)&amp;&amp;!newCmptTypeMap.get(mainTypeInReplaceMerge)&amp;&amp;(newCmptTypes.push(mainTypeInReplaceMerge),newCmptTypeMap.set(mainTypeInReplaceMerge,!0))}),ComponentModel.topologicalTravel(newCmptTypes,ComponentModel.getAllClassMainTypes(),function visitComponent(mainType){var newCmptOptionList=function concatInternalOptions(ecModel,mainType,newCmptOptionList){var internalOptionCreator=internalOptionCreatorMap.get(mainType);if(!internalOptionCreator)return newCmptOptionList;var internalOptions=internalOptionCreator(ecModel);return internalOptions?newCmptOptionList.concat(internalOptions):newCmptOptionList}(this,mainType,normalizeToArray(newOption[mainType])),oldCmptList=componentsMap.get(mainType),mergeMode=oldCmptList?replaceMergeMainTypeMap&amp;&amp;replaceMergeMainTypeMap.get(mainType)?"replaceMerge":"normalMerge":"replaceAll",mappingResult=mappingToExists(oldCmptList,newCmptOptionList,mergeMode);(function setComponentTypeToKeyInfo(mappingResult,mainType,componentModelCtor){each$f(mappingResult,function(item){var newOption=item.newOption;isObject$3(newOption)&amp;&amp;(item.keyInfo.mainType=mainType,item.keyInfo.subType=function determineSubType(mainType,newCmptOption,existComponent,componentModelCtor){return newCmptOption.type?newCmptOption.type:existComponent?existComponent.subType:componentModelCtor.determineSubType(mainType,newCmptOption)}(mainType,newOption,item.existing,componentModelCtor))})})(mappingResult,mainType,ComponentModel),option[mainType]=null,componentsMap.set(mainType,null),componentsCount.set(mainType,0);var tooltipExists,optionsByMainType=[],cmptsByMainType=[],cmptsCountByMainType=0;each$f(mappingResult,function(resultItem,index){var componentModel=resultItem.existing,newCmptOption=resultItem.newOption;if(newCmptOption){var isSeriesType="series"===mainType,ComponentModelClass=ComponentModel.getClass(mainType,resultItem.keyInfo.subType,!isSeriesType);if(!ComponentModelClass)return;if("tooltip"===mainType){if(tooltipExists)return;tooltipExists=!0}if(componentModel&amp;&amp;componentModel.constructor===ComponentModelClass)componentModel.name=resultItem.keyInfo.name,componentModel.mergeOption(newCmptOption,this),componentModel.optionUpdated(newCmptOption,!1);else{var extraOpt=extend({componentIndex:index},resultItem.keyInfo);extend(componentModel=new ComponentModelClass(newCmptOption,this,this,extraOpt),extraOpt),resultItem.brandNew&amp;&amp;(componentModel.__requireNewView=!0),componentModel.init(newCmptOption,this,this),componentModel.optionUpdated(null,!0)}}else componentModel&amp;&amp;(componentModel.mergeOption({},this),componentModel.optionUpdated({},!1));componentModel?(optionsByMainType.push(componentModel.option),cmptsByMainType.push(componentModel),cmptsCountByMainType++):(optionsByMainType.push(void 0),cmptsByMainType.push(void 0))},this),option[mainType]=optionsByMainType,componentsMap.set(mainType,cmptsByMainType),componentsCount.set(mainType,cmptsCountByMainType),"series"===mainType&amp;&amp;reCreateSeriesIndices(this)},this),this._seriesIndices||reCreateSeriesIndices(this)},GlobalModel2.prototype.getOption=function(){var option=clone$4(this.option);return each$f(option,function(optInMainType,mainType){if(ComponentModel.hasClass(mainType)){for(var opts=normalizeToArray(optInMainType),realLen=opts.length,metNonInner=!1,i=realLen-1;i&gt;=0;i--)opts[i]&amp;&amp;!isComponentIdInternal(opts[i])?metNonInner=!0:(opts[i]=null,!metNonInner&amp;&amp;realLen--);opts.length=realLen,option[mainType]=opts}}),delete option["\0_ec_inner"],option},GlobalModel2.prototype.getTheme=function(){return this._theme},GlobalModel2.prototype.getLocaleModel=function(){return this._locale},GlobalModel2.prototype.setUpdatePayload=function(payload){this._payload=payload},GlobalModel2.prototype.getUpdatePayload=function(){return this._payload},GlobalModel2.prototype.getComponent=function(mainType,idx){var list=this._componentsMap.get(mainType);if(list){var cmpt=list[idx||0];if(cmpt)return cmpt;if(null==idx)for(var i=0;i&lt;list.length;i++)if(list[i])return list[i]}},GlobalModel2.prototype.queryComponents=function(condition){var mainType=condition.mainType;if(!mainType)return[];var result,index=condition.index,id=condition.id,name=condition.name,cmpts=this._componentsMap.get(mainType);return cmpts&amp;&amp;cmpts.length?(null!=index?(result=[],each$f(normalizeToArray(index),function(idx){cmpts[idx]&amp;&amp;result.push(cmpts[idx])})):result=null!=id?queryByIdOrName("id",id,cmpts):null!=name?queryByIdOrName("name",name,cmpts):filter(cmpts,function(cmpt){return!!cmpt}),filterBySubType(result,condition)):[]},GlobalModel2.prototype.findComponents=function(condition){var query=condition.query,mainType=condition.mainType,queryCond=function getQueryCond(q){var indexAttr=mainType+"Index",idAttr=mainType+"Id",nameAttr=mainType+"Name";return!q||null==q[indexAttr]&amp;&amp;null==q[idAttr]&amp;&amp;null==q[nameAttr]?null:{mainType:mainType,index:q[indexAttr],id:q[idAttr],name:q[nameAttr]}}(query);return function doFilter(res){return condition.filter?filter(res,condition.filter):res}(filterBySubType(queryCond?this.queryComponents(queryCond):filter(this._componentsMap.get(mainType),function(cmpt){return!!cmpt}),condition))},GlobalModel2.prototype.eachComponent=function(mainType,cb,context){var componentsMap=this._componentsMap;if(isFunction(mainType)){var ctxForAll_1=cb,cbForAll_1=mainType;componentsMap.each(function(cmpts2,componentType){for(var i2=0;cmpts2&amp;&amp;i2&lt;cmpts2.length;i2++){var cmpt2=cmpts2[i2];cmpt2&amp;&amp;cbForAll_1.call(ctxForAll_1,componentType,cmpt2,cmpt2.componentIndex)}})}else for(var cmpts=isString(mainType)?componentsMap.get(mainType):isObject$3(mainType)?this.findComponents(mainType):null,i=0;cmpts&amp;&amp;i&lt;cmpts.length;i++){var cmpt=cmpts[i];cmpt&amp;&amp;cb.call(context,cmpt,cmpt.componentIndex)}},GlobalModel2.prototype.getSeriesByName=function(name){var nameStr=convertOptionIdName(name,null);return filter(this._componentsMap.get("series"),function(oneSeries){return!!oneSeries&amp;&amp;null!=nameStr&amp;&amp;oneSeries.name===nameStr})},GlobalModel2.prototype.getSeriesByIndex=function(seriesIndex){return this._componentsMap.get("series")[seriesIndex]},GlobalModel2.prototype.getSeriesByType=function(subType){return filter(this._componentsMap.get("series"),function(oneSeries){return!!oneSeries&amp;&amp;oneSeries.subType===subType})},GlobalModel2.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(oneSeries){return!!oneSeries})},GlobalModel2.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},GlobalModel2.prototype.eachSeries=function(cb,context){assertSeriesInitialized(this),each$f(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.get("series")[rawSeriesIndex];cb.call(context,series,rawSeriesIndex)},this)},GlobalModel2.prototype.eachRawSeries=function(cb,context){each$f(this._componentsMap.get("series"),function(series){series&amp;&amp;cb.call(context,series,series.componentIndex)})},GlobalModel2.prototype.eachSeriesByType=function(subType,cb,context){assertSeriesInitialized(this),each$f(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.get("series")[rawSeriesIndex];series.subType===subType&amp;&amp;cb.call(context,series,rawSeriesIndex)},this)},GlobalModel2.prototype.eachRawSeriesByType=function(subType,cb,context){return each$f(this.getSeriesByType(subType),cb,context)},GlobalModel2.prototype.isSeriesFiltered=function(seriesModel){return assertSeriesInitialized(this),null==this._seriesIndicesMap.get(seriesModel.componentIndex)},GlobalModel2.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},GlobalModel2.prototype.filterSeries=function(cb,context){assertSeriesInitialized(this);var newSeriesIndices=[];each$f(this._seriesIndices,function(seriesRawIdx){var series=this._componentsMap.get("series")[seriesRawIdx];cb.call(context,series,seriesRawIdx)&amp;&amp;newSeriesIndices.push(seriesRawIdx)},this),this._seriesIndices=newSeriesIndices,this._seriesIndicesMap=createHashMap(newSeriesIndices)},GlobalModel2.prototype.restoreData=function(payload){reCreateSeriesIndices(this);var componentsMap=this._componentsMap,componentTypes=[];componentsMap.each(function(components,componentType){ComponentModel.hasClass(componentType)&amp;&amp;componentTypes.push(componentType)}),ComponentModel.topologicalTravel(componentTypes,ComponentModel.getAllClassMainTypes(),function(componentType){each$f(componentsMap.get(componentType),function(component){!component||"series"===componentType&amp;&amp;function isNotTargetSeries(seriesModel,payload){if(payload){var index=payload.seriesIndex,id=payload.seriesId,name_1=payload.seriesName;return null!=index&amp;&amp;seriesModel.componentIndex!==index||null!=id&amp;&amp;seriesModel.id!==id||null!=name_1&amp;&amp;seriesModel.name!==name_1}}(component,payload)||component.restoreData()})})},GlobalModel2.internalField=(reCreateSeriesIndices=function(ecModel){var seriesIndices=ecModel._seriesIndices=[];each$f(ecModel._componentsMap.get("series"),function(series){series&amp;&amp;seriesIndices.push(series.componentIndex)}),ecModel._seriesIndicesMap=createHashMap(seriesIndices)},assertSeriesInitialized=function(ecModel){},void(initBase=function(ecModel,baseOption){ecModel.option={},ecModel.option["\0_ec_inner"]=1,ecModel._componentsMap=createHashMap({series:[]}),ecModel._componentsCount=createHashMap();var airaOption=baseOption.aria;isObject$3(airaOption)&amp;&amp;null==airaOption.enabled&amp;&amp;(airaOption.enabled=!0),function mergeTheme(option,theme2){var notMergeColorLayer=option.color&amp;&amp;!option.colorLayer;each$f(theme2,function(themeItem,name){"colorLayer"===name&amp;&amp;notMergeColorLayer||ComponentModel.hasClass(name)||("object"==typeof themeItem?option[name]=option[name]?merge(option[name],themeItem,!1):clone$4(themeItem):null==option[name]&amp;&amp;(option[name]=themeItem))})}(baseOption,ecModel._theme.option),merge(baseOption,globalDefault,!1),ecModel._mergeOption(baseOption,null)})),GlobalModel2}(Model);function queryByIdOrName(attr,idOrName,cmpts){if(isArray$1(idOrName)){var keyMap_1=createHashMap();return each$f(idOrName,function(idOrNameItem){null!=idOrNameItem&amp;&amp;(null!=convertOptionIdName(idOrNameItem,null)&amp;&amp;keyMap_1.set(idOrNameItem,!0))}),filter(cmpts,function(cmpt){return cmpt&amp;&amp;keyMap_1.get(cmpt[attr])})}var idName_1=convertOptionIdName(idOrName,null);return filter(cmpts,function(cmpt){return cmpt&amp;&amp;null!=idName_1&amp;&amp;cmpt[attr]===idName_1})}function filterBySubType(components,condition){return condition.hasOwnProperty("subType")?filter(components,function(cmpt){return cmpt&amp;&amp;cmpt.subType===condition.subType}):components}function normalizeSetOptionInput(opts){var replaceMergeMainTypeMap=createHashMap();return opts&amp;&amp;each$f(normalizeToArray(opts.replaceMerge),function(mainType){replaceMergeMainTypeMap.set(mainType,!0)}),{replaceMergeMainTypeMap:replaceMergeMainTypeMap}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){return function ExtensionAPI2(ecInstance){each$f(availableMethods,function(methodName){this[methodName]=bind$1(ecInstance[methodName],ecInstance)},this)}}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function CoordinateSystemManager2(){this._coordinateSystems=[]}return CoordinateSystemManager2.prototype.create=function(ecModel,api){var coordinateSystems=[];each$f(coordinateSystemCreators,function(creator,type){var list=creator.create(ecModel,api);coordinateSystems=coordinateSystems.concat(list||[])}),this._coordinateSystems=coordinateSystems},CoordinateSystemManager2.prototype.update=function(ecModel,api){each$f(this._coordinateSystems,function(coordSys){coordSys.update&amp;&amp;coordSys.update(ecModel,api)})},CoordinateSystemManager2.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},CoordinateSystemManager2.register=function(type,creator){coordinateSystemCreators[type]=creator},CoordinateSystemManager2.get=function(type){return coordinateSystemCreators[type]},CoordinateSystemManager2}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function OptionManager2(api){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=api}return OptionManager2.prototype.setOption=function(rawOption,optionPreprocessorFuncs2,opt){rawOption&amp;&amp;(each$f(normalizeToArray(rawOption.series),function(series){series&amp;&amp;series.data&amp;&amp;isTypedArray(series.data)&amp;&amp;setAsPrimitive(series.data)}),each$f(normalizeToArray(rawOption.dataset),function(dataset){dataset&amp;&amp;dataset.source&amp;&amp;isTypedArray(dataset.source)&amp;&amp;setAsPrimitive(dataset.source)})),rawOption=clone$4(rawOption);var optionBackup=this._optionBackup,newParsedOption=function parseRawOption(rawOption,optionPreprocessorFuncs2,isNew){var mediaDefault,baseOption,mediaList=[],declaredBaseOption=rawOption.baseOption,timelineOnRoot=rawOption.timeline,timelineOptionsOnRoot=rawOption.options,mediaOnRoot=rawOption.media,hasMedia=!!rawOption.media,hasTimeline=!!(timelineOptionsOnRoot||timelineOnRoot||declaredBaseOption&amp;&amp;declaredBaseOption.timeline);declaredBaseOption?(baseOption=declaredBaseOption).timeline||(baseOption.timeline=timelineOnRoot):((hasTimeline||hasMedia)&amp;&amp;(rawOption.options=rawOption.media=null),baseOption=rawOption);hasMedia&amp;&amp;isArray$1(mediaOnRoot)&amp;&amp;each$f(mediaOnRoot,function(singleMedia){singleMedia&amp;&amp;singleMedia.option&amp;&amp;(singleMedia.query?mediaList.push(singleMedia):mediaDefault||(mediaDefault=singleMedia))});function doPreprocess(option){each$f(optionPreprocessorFuncs2,function(preProcess){preProcess(option,isNew)})}return doPreprocess(baseOption),each$f(timelineOptionsOnRoot,function(option){return doPreprocess(option)}),each$f(mediaList,function(media){return doPreprocess(media.option)}),{baseOption:baseOption,timelineOptions:timelineOptionsOnRoot||[],mediaDefault:mediaDefault,mediaList:mediaList}}(rawOption,optionPreprocessorFuncs2,!optionBackup);this._newBaseOption=newParsedOption.baseOption,optionBackup?(newParsedOption.timelineOptions.length&amp;&amp;(optionBackup.timelineOptions=newParsedOption.timelineOptions),newParsedOption.mediaList.length&amp;&amp;(optionBackup.mediaList=newParsedOption.mediaList),newParsedOption.mediaDefault&amp;&amp;(optionBackup.mediaDefault=newParsedOption.mediaDefault)):this._optionBackup=newParsedOption},OptionManager2.prototype.mountOption=function(isRecreate){var optionBackup=this._optionBackup;return this._timelineOptions=optionBackup.timelineOptions,this._mediaList=optionBackup.mediaList,this._mediaDefault=optionBackup.mediaDefault,this._currentMediaIndices=[],clone$4(isRecreate?optionBackup.baseOption:this._newBaseOption)},OptionManager2.prototype.getTimelineOption=function(ecModel){var option,timelineOptions=this._timelineOptions;if(timelineOptions.length){var timelineModel=ecModel.getComponent("timeline");timelineModel&amp;&amp;(option=clone$4(timelineOptions[timelineModel.getCurrentIndex()]))}return option},OptionManager2.prototype.getMediaOption=function(ecModel){var ecWidth=this._api.getWidth(),ecHeight=this._api.getHeight(),mediaList=this._mediaList,mediaDefault=this._mediaDefault,indices=[],result=[];if(!mediaList.length&amp;&amp;!mediaDefault)return result;for(var i=0,len2=mediaList.length;i&lt;len2;i++)applyMediaQuery(mediaList[i].query,ecWidth,ecHeight)&amp;&amp;indices.push(i);return!indices.length&amp;&amp;mediaDefault&amp;&amp;(indices=[-1]),indices.length&amp;&amp;!function indicesEquals(indices1,indices2){return indices1.join(",")===indices2.join(",")}(indices,this._currentMediaIndices)&amp;&amp;(result=map$1(indices,function(index){return clone$4(-1===index?mediaDefault.option:mediaList[index].option)})),this._currentMediaIndices=indices,result},OptionManager2}();function applyMediaQuery(query,ecWidth,ecHeight){var realMap={width:ecWidth,height:ecHeight,aspectratio:ecWidth/ecHeight},applicable=!0;return each$f(query,function(value,attr){var matched=attr.match(QUERY_REG);if(matched&amp;&amp;matched[1]&amp;&amp;matched[2]){var operator=matched[1],realAttr=matched[2].toLowerCase();(function compare(real,expect,operator){return"min"===operator?real&gt;=expect:"max"===operator?real&lt;=expect:real===expect})(realMap[realAttr],value,operator)||(applicable=!1)}}),applicable}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(opt){var itemStyleOpt=opt&amp;&amp;opt.itemStyle;if(itemStyleOpt)for(var i=0,len2=POSSIBLE_STYLES.length;i&lt;len2;i++){var styleName=POSSIBLE_STYLES[i],normalItemStyleOpt=itemStyleOpt.normal,emphasisItemStyleOpt=itemStyleOpt.emphasis;normalItemStyleOpt&amp;&amp;normalItemStyleOpt[styleName]&amp;&amp;(opt[styleName]=opt[styleName]||{},opt[styleName].normal?merge(opt[styleName].normal,normalItemStyleOpt[styleName]):opt[styleName].normal=normalItemStyleOpt[styleName],normalItemStyleOpt[styleName]=null),emphasisItemStyleOpt&amp;&amp;emphasisItemStyleOpt[styleName]&amp;&amp;(opt[styleName]=opt[styleName]||{},opt[styleName].emphasis?merge(opt[styleName].emphasis,emphasisItemStyleOpt[styleName]):opt[styleName].emphasis=emphasisItemStyleOpt[styleName],emphasisItemStyleOpt[styleName]=null)}}function convertNormalEmphasis(opt,optType,useExtend){if(opt&amp;&amp;opt[optType]&amp;&amp;(opt[optType].normal||opt[optType].emphasis)){var normalOpt=opt[optType].normal,emphasisOpt=opt[optType].emphasis;normalOpt&amp;&amp;(useExtend?(opt[optType].normal=opt[optType].emphasis=null,defaults(opt[optType],normalOpt)):opt[optType]=normalOpt),emphasisOpt&amp;&amp;(opt.emphasis=opt.emphasis||{},opt.emphasis[optType]=emphasisOpt,emphasisOpt.focus&amp;&amp;(opt.emphasis.focus=emphasisOpt.focus),emphasisOpt.blurScope&amp;&amp;(opt.emphasis.blurScope=emphasisOpt.blurScope))}}function removeEC3NormalStatus(opt){convertNormalEmphasis(opt,"itemStyle"),convertNormalEmphasis(opt,"lineStyle"),convertNormalEmphasis(opt,"areaStyle"),convertNormalEmphasis(opt,"label"),convertNormalEmphasis(opt,"labelLine"),convertNormalEmphasis(opt,"upperLabel"),convertNormalEmphasis(opt,"edgeLabel")}function compatTextStyle(opt,propName){var labelOptSingle=isObject$2(opt)&amp;&amp;opt[propName],textStyle=isObject$2(labelOptSingle)&amp;&amp;labelOptSingle.textStyle;if(textStyle)for(var i=0,len2=TEXT_STYLE_OPTIONS.length;i&lt;len2;i++){var textPropName=TEXT_STYLE_OPTIONS[i];textStyle.hasOwnProperty(textPropName)&amp;&amp;(labelOptSingle[textPropName]=textStyle[textPropName])}}function compatEC3CommonStyles(opt){opt&amp;&amp;(removeEC3NormalStatus(opt),compatTextStyle(opt,"label"),opt.emphasis&amp;&amp;compatTextStyle(opt.emphasis,"label"))}function toArr(o){return isArray$1(o)?o:o?[o]:[]}function toObj(o){return(isArray$1(o)?o[0]:o)||{}}function globalCompatStyle(option,isTheme){each$d(toArr(option.series),function(seriesOpt){isObject$2(seriesOpt)&amp;&amp;function processSeries(seriesOpt){if(isObject$2(seriesOpt)){compatEC2ItemStyle(seriesOpt),removeEC3NormalStatus(seriesOpt),compatTextStyle(seriesOpt,"label"),compatTextStyle(seriesOpt,"upperLabel"),compatTextStyle(seriesOpt,"edgeLabel"),seriesOpt.emphasis&amp;&amp;(compatTextStyle(seriesOpt.emphasis,"label"),compatTextStyle(seriesOpt.emphasis,"upperLabel"),compatTextStyle(seriesOpt.emphasis,"edgeLabel"));var markPoint=seriesOpt.markPoint;markPoint&amp;&amp;(compatEC2ItemStyle(markPoint),compatEC3CommonStyles(markPoint));var markLine=seriesOpt.markLine;markLine&amp;&amp;(compatEC2ItemStyle(markLine),compatEC3CommonStyles(markLine));var markArea=seriesOpt.markArea;markArea&amp;&amp;compatEC3CommonStyles(markArea);var data=seriesOpt.data;if("graph"===seriesOpt.type){data=data||seriesOpt.nodes;var edgeData=seriesOpt.links||seriesOpt.edges;if(edgeData&amp;&amp;!isTypedArray(edgeData))for(var i=0;i&lt;edgeData.length;i++)compatEC3CommonStyles(edgeData[i]);each$f(seriesOpt.categories,function(opt){removeEC3NormalStatus(opt)})}if(data&amp;&amp;!isTypedArray(data))for(i=0;i&lt;data.length;i++)compatEC3CommonStyles(data[i]);if((markPoint=seriesOpt.markPoint)&amp;&amp;markPoint.data){var mpData=markPoint.data;for(i=0;i&lt;mpData.length;i++)compatEC3CommonStyles(mpData[i])}if((markLine=seriesOpt.markLine)&amp;&amp;markLine.data){var mlData=markLine.data;for(i=0;i&lt;mlData.length;i++)isArray$1(mlData[i])?(compatEC3CommonStyles(mlData[i][0]),compatEC3CommonStyles(mlData[i][1])):compatEC3CommonStyles(mlData[i])}"gauge"===seriesOpt.type?(compatTextStyle(seriesOpt,"axisLabel"),compatTextStyle(seriesOpt,"title"),compatTextStyle(seriesOpt,"detail")):"treemap"===seriesOpt.type?(convertNormalEmphasis(seriesOpt.breadcrumb,"itemStyle"),each$f(seriesOpt.levels,function(opt){removeEC3NormalStatus(opt)})):"tree"===seriesOpt.type&amp;&amp;removeEC3NormalStatus(seriesOpt.leaves)}}(seriesOpt)});var axes=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];isTheme&amp;&amp;axes.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(axes,function(axisName){each$d(toArr(option[axisName]),function(axisOpt){axisOpt&amp;&amp;(compatTextStyle(axisOpt,"axisLabel"),compatTextStyle(axisOpt.axisPointer,"label"))})}),each$d(toArr(option.parallel),function(parallelOpt){var parallelAxisDefault=parallelOpt&amp;&amp;parallelOpt.parallelAxisDefault;compatTextStyle(parallelAxisDefault,"axisLabel"),compatTextStyle(parallelAxisDefault&amp;&amp;parallelAxisDefault.axisPointer,"label")}),each$d(toArr(option.calendar),function(calendarOpt){convertNormalEmphasis(calendarOpt,"itemStyle"),compatTextStyle(calendarOpt,"dayLabel"),compatTextStyle(calendarOpt,"monthLabel"),compatTextStyle(calendarOpt,"yearLabel")}),each$d(toArr(option.radar),function(radarOpt){compatTextStyle(radarOpt,"name"),radarOpt.name&amp;&amp;null==radarOpt.axisName&amp;&amp;(radarOpt.axisName=radarOpt.name,delete radarOpt.name),null!=radarOpt.nameGap&amp;&amp;null==radarOpt.axisNameGap&amp;&amp;(radarOpt.axisNameGap=radarOpt.nameGap,delete radarOpt.nameGap)}),each$d(toArr(option.geo),function(geoOpt){isObject$2(geoOpt)&amp;&amp;(compatEC3CommonStyles(geoOpt),each$d(toArr(geoOpt.regions),function(regionObj){compatEC3CommonStyles(regionObj)}))}),each$d(toArr(option.timeline),function(timelineOpt){compatEC3CommonStyles(timelineOpt),convertNormalEmphasis(timelineOpt,"label"),convertNormalEmphasis(timelineOpt,"itemStyle"),convertNormalEmphasis(timelineOpt,"controlStyle",!0);var data=timelineOpt.data;isArray$1(data)&amp;&amp;each$f(data,function(item){isObject$3(item)&amp;&amp;(convertNormalEmphasis(item,"label"),convertNormalEmphasis(item,"itemStyle"))})}),each$d(toArr(option.toolbox),function(toolboxOpt){convertNormalEmphasis(toolboxOpt,"iconStyle"),each$d(toolboxOpt.feature,function(featureOpt){convertNormalEmphasis(featureOpt,"iconStyle")})}),compatTextStyle(toObj(option.axisPointer),"label"),compatTextStyle(toObj(option.tooltip).axisPointer,"label")}function compatLayoutProperties(option){option&amp;&amp;each$f(LAYOUT_PROPERTIES,function(prop){prop[0]in option&amp;&amp;!(prop[1]in option)&amp;&amp;(option[prop[1]]=option[prop[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(option){var itemStyle=option&amp;&amp;option.itemStyle;if(itemStyle)for(var i=0;i&lt;BAR_ITEM_STYLE_MAP.length;i++){var oldName=BAR_ITEM_STYLE_MAP[i][1],newName=BAR_ITEM_STYLE_MAP[i][0];null!=itemStyle[oldName]&amp;&amp;(itemStyle[newName]=itemStyle[oldName])}}function compatPieLabel(option){option&amp;&amp;"edge"===option.alignTo&amp;&amp;null!=option.margin&amp;&amp;null==option.edgeDistance&amp;&amp;(option.edgeDistance=option.margin)}function compatSunburstState(option){option&amp;&amp;option.downplay&amp;&amp;!option.blur&amp;&amp;(option.blur=option.downplay)}function traverseTree(data,cb){if(data)for(var i=0;i&lt;data.length;i++)cb(data[i]),data[i]&amp;&amp;traverseTree(data[i].children,cb)}function globalBackwardCompat(option,isTheme){globalCompatStyle(option,isTheme),option.series=normalizeToArray(option.series),each$f(option.series,function(seriesOpt){if(isObject$3(seriesOpt)){var seriesType2=seriesOpt.type;if("line"===seriesType2)null!=seriesOpt.clipOverflow&amp;&amp;(seriesOpt.clip=seriesOpt.clipOverflow);else if("pie"===seriesType2||"gauge"===seriesType2){if(null!=seriesOpt.clockWise&amp;&amp;(seriesOpt.clockwise=seriesOpt.clockWise),compatPieLabel(seriesOpt.label),(data=seriesOpt.data)&amp;&amp;!isTypedArray(data))for(var i=0;i&lt;data.length;i++)compatPieLabel(data[i]);null!=seriesOpt.hoverOffset&amp;&amp;(seriesOpt.emphasis=seriesOpt.emphasis||{},(seriesOpt.emphasis.scaleSize=null)&amp;&amp;(seriesOpt.emphasis.scaleSize=seriesOpt.hoverOffset))}else if("gauge"===seriesType2){var pointerColor=function get(opt,path){for(var pathArr=path.split(","),obj=opt,i=0;i&lt;pathArr.length&amp;&amp;null!=(obj=obj&amp;&amp;obj[pathArr[i]]);i++);return obj}(seriesOpt,"pointer.color");null!=pointerColor&amp;&amp;function set(opt,path,val,overwrite){for(var key,pathArr=path.split(","),obj=opt,i=0;i&lt;pathArr.length-1;i++)null==obj[key=pathArr[i]]&amp;&amp;(obj[key]={}),obj=obj[key];null==obj[pathArr[i]]&amp;&amp;(obj[pathArr[i]]=val)}(seriesOpt,"itemStyle.color",pointerColor)}else if("bar"===seriesType2){var data;if(compatBarItemStyle(seriesOpt),compatBarItemStyle(seriesOpt.backgroundStyle),compatBarItemStyle(seriesOpt.emphasis),(data=seriesOpt.data)&amp;&amp;!isTypedArray(data))for(i=0;i&lt;data.length;i++)"object"==typeof data[i]&amp;&amp;(compatBarItemStyle(data[i]),compatBarItemStyle(data[i]&amp;&amp;data[i].emphasis))}else if("sunburst"===seriesType2){var highlightPolicy=seriesOpt.highlightPolicy;highlightPolicy&amp;&amp;(seriesOpt.emphasis=seriesOpt.emphasis||{},seriesOpt.emphasis.focus||(seriesOpt.emphasis.focus=highlightPolicy)),compatSunburstState(seriesOpt),traverseTree(seriesOpt.data,compatSunburstState)}else"graph"===seriesType2||"sankey"===seriesType2?function compatGraphFocus(option){option&amp;&amp;null!=option.focusNodeAdjacency&amp;&amp;(option.emphasis=option.emphasis||{},null==option.emphasis.focus&amp;&amp;(option.emphasis.focus="adjacency"))}(seriesOpt):"map"===seriesType2&amp;&amp;(seriesOpt.mapType&amp;&amp;!seriesOpt.map&amp;&amp;(seriesOpt.map=seriesOpt.mapType),seriesOpt.mapLocation&amp;&amp;defaults(seriesOpt,seriesOpt.mapLocation));null!=seriesOpt.hoverAnimation&amp;&amp;(seriesOpt.emphasis=seriesOpt.emphasis||{},seriesOpt.emphasis&amp;&amp;null==seriesOpt.emphasis.scale&amp;&amp;(seriesOpt.emphasis.scale=seriesOpt.hoverAnimation)),compatLayoutProperties(seriesOpt)}}),option.dataRange&amp;&amp;(option.visualMap=option.dataRange),each$f(COMPATITABLE_COMPONENTS,function(componentName){var options=option[componentName];options&amp;&amp;(isArray$1(options)||(options=[options]),each$f(options,function(option2){compatLayoutProperties(option2)}))})}function calculateStack(stackInfoList){each$f(stackInfoList,function(targetStackInfo,idxInStack){var resultVal=[],resultNaN=[NaN,NaN],dims=[targetStackInfo.stackResultDimension,targetStackInfo.stackedOverDimension],targetData=targetStackInfo.data,isStackedByIndex=targetStackInfo.isStackedByIndex,stackStrategy=targetStackInfo.seriesModel.get("stackStrategy")||"samesign";targetData.modify(dims,function(v0,v12,dataIndex){var byValue,stackedDataRawIndex,sum2=targetData.get(targetStackInfo.stackedDimension,dataIndex);if(isNaN(sum2))return resultNaN;isStackedByIndex?stackedDataRawIndex=targetData.getRawIndex(dataIndex):byValue=targetData.get(targetStackInfo.stackedByDimension,dataIndex);for(var stackedOver=NaN,j=idxInStack-1;j&gt;=0;j--){var stackInfo=stackInfoList[j];if(isStackedByIndex||(stackedDataRawIndex=stackInfo.data.rawIndexOf(stackInfo.stackedByDimension,byValue)),stackedDataRawIndex&gt;=0){var val=stackInfo.data.getByRawIndex(stackInfo.stackResultDimension,stackedDataRawIndex);if("all"===stackStrategy||"positive"===stackStrategy&amp;&amp;val&gt;0||"negative"===stackStrategy&amp;&amp;val&lt;0||"samesign"===stackStrategy&amp;&amp;sum2&gt;=0&amp;&amp;val&gt;0||"samesign"===stackStrategy&amp;&amp;sum2&lt;=0&amp;&amp;val&lt;0){sum2=addSafe(sum2,val),stackedOver=val;break}}}return resultVal[0]=sum2,resultVal[1]=stackedOver,resultVal})})}var _a,_b,_c,providerMethods,mountMethods,SourceImpl=function(){return function SourceImpl2(fields){this.data=fields.data||("keyedColumns"===fields.sourceFormat?{}:[]),this.sourceFormat=fields.sourceFormat||"unknown",this.seriesLayoutBy=fields.seriesLayoutBy||"column",this.startIndex=fields.startIndex||0,this.dimensionsDetectedCount=fields.dimensionsDetectedCount,this.metaRawOption=fields.metaRawOption;var dimensionsDefine=this.dimensionsDefine=fields.dimensionsDefine;if(dimensionsDefine)for(var i=0;i&lt;dimensionsDefine.length;i++){var dim=dimensionsDefine[i];null==dim.type&amp;&amp;guessOrdinal(this,i)===BE_ORDINAL_Must&amp;&amp;(dim.type="ordinal")}}}();function isSourceInstance(val){return val instanceof SourceImpl}function createSource(sourceData,thisMetaRawOption,sourceFormat){sourceFormat=sourceFormat||detectSourceFormat(sourceData);var seriesLayoutBy=thisMetaRawOption.seriesLayoutBy,determined=function determineSourceDimensions(data,sourceFormat,seriesLayoutBy,sourceHeader,dimensionsDefine){var dimensionsDetectedCount,startIndex;if(!data)return{dimensionsDefine:normalizeDimensionsOption(dimensionsDefine),startIndex:startIndex,dimensionsDetectedCount:dimensionsDetectedCount};if("arrayRows"===sourceFormat){var dataArrayRows=data;"auto"===sourceHeader||null==sourceHeader?arrayRowsTravelFirst(function(val){null!=val&amp;&amp;"-"!==val&amp;&amp;(isString(val)?null==startIndex&amp;&amp;(startIndex=1):startIndex=0)},seriesLayoutBy,dataArrayRows,10):startIndex=isNumber(sourceHeader)?sourceHeader:sourceHeader?1:0,dimensionsDefine||1!==startIndex||(dimensionsDefine=[],arrayRowsTravelFirst(function(val,index){dimensionsDefine[index]=null!=val?val+"":""},seriesLayoutBy,dataArrayRows,1/0)),dimensionsDetectedCount=dimensionsDefine?dimensionsDefine.length:"row"===seriesLayoutBy?dataArrayRows.length:dataArrayRows[0]?dataArrayRows[0].length:null}else if("objectRows"===sourceFormat)dimensionsDefine||(dimensionsDefine=function objectRowsCollectDimensions(data){var obj,firstIndex=0;for(;firstIndex&lt;data.length&amp;&amp;!(obj=data[firstIndex++]););if(obj)return keys(obj)}(data));else if("keyedColumns"===sourceFormat)dimensionsDefine||(dimensionsDefine=[],each$f(data,function(colArr,key){dimensionsDefine.push(key)}));else if("original"===sourceFormat){var value0=getDataItemValue(data[0]);dimensionsDetectedCount=isArray$1(value0)&amp;&amp;value0.length||1}return{startIndex:startIndex,dimensionsDefine:normalizeDimensionsOption(dimensionsDefine),dimensionsDetectedCount:dimensionsDetectedCount}}(sourceData,sourceFormat,seriesLayoutBy,thisMetaRawOption.sourceHeader,thisMetaRawOption.dimensions);return new SourceImpl({data:sourceData,sourceFormat:sourceFormat,seriesLayoutBy:seriesLayoutBy,dimensionsDefine:determined.dimensionsDefine,startIndex:determined.startIndex,dimensionsDetectedCount:determined.dimensionsDetectedCount,metaRawOption:clone$4(thisMetaRawOption)})}function createSourceFromSeriesDataOption(data){return new SourceImpl({data:data,sourceFormat:isTypedArray(data)?"typedArray":"original"})}function detectSourceFormat(data){var sourceFormat="unknown";if(isTypedArray(data))sourceFormat="typedArray";else if(isArray$1(data)){0===data.length&amp;&amp;(sourceFormat="arrayRows");for(var i=0,len2=data.length;i&lt;len2;i++){var item=data[i];if(null!=item){if(isArray$1(item)||isTypedArray(item)){sourceFormat="arrayRows";break}if(isObject$3(item)){sourceFormat="objectRows";break}}}}else if(isObject$3(data))for(var key in data)if(hasOwn(data,key)&amp;&amp;isArrayLike(data[key])){sourceFormat="keyedColumns";break}return sourceFormat}function normalizeDimensionsOption(dimensionsDefine){if(dimensionsDefine){var nameMap=createHashMap();return map$1(dimensionsDefine,function(rawItem,index){var item={name:(rawItem=isObject$3(rawItem)?rawItem:{name:rawItem}).name,displayName:rawItem.displayName,type:rawItem.type};if(null==item.name)return item;item.name+="",null==item.displayName&amp;&amp;(item.displayName=item.name);var exist=nameMap.get(item.name);return exist?item.name+="-"+exist.count++:nameMap.set(item.name,{count:1}),item})}}function arrayRowsTravelFirst(cb,seriesLayoutBy,data,maxLoop){if("row"===seriesLayoutBy)for(var i=0;i&lt;data.length&amp;&amp;i&lt;maxLoop;i++)cb(data[i]?data[i][0]:null,i);else{var value0=data[0]||[];for(i=0;i&lt;value0.length&amp;&amp;i&lt;maxLoop;i++)cb(value0[i],i)}}function shouldRetrieveDataByName(source){var sourceFormat=source.sourceFormat;return"objectRows"===sourceFormat||"keyedColumns"===sourceFormat}var DefaultDataProvider=function(){function DefaultDataProvider2(sourceParam,dimSize){var source=isSourceInstance(sourceParam)?sourceParam:createSourceFromSeriesDataOption(sourceParam);this._source=source;var data=this._data=source.data;"typedArray"===source.sourceFormat&amp;&amp;(this._offset=0,this._dimSize=dimSize,this._data=data),mountMethods(this,data,source)}var proto2;return DefaultDataProvider2.prototype.getSource=function(){return this._source},DefaultDataProvider2.prototype.count=function(){return 0},DefaultDataProvider2.prototype.getItem=function(idx,out2){},DefaultDataProvider2.prototype.appendData=function(newData){},DefaultDataProvider2.prototype.clean=function(){},DefaultDataProvider2.protoInitialize=((proto2=DefaultDataProvider2.prototype).pure=!1,void(proto2.persistent=!0)),DefaultDataProvider2.internalField=function(){var _a2;mountMethods=function(provider,data,source){var sourceFormat=source.sourceFormat,seriesLayoutBy=source.seriesLayoutBy,startIndex=source.startIndex,dimsDef=source.dimensionsDefine;if(extend(provider,providerMethods[getMethodMapKey(sourceFormat,seriesLayoutBy)]),"typedArray"===sourceFormat)provider.getItem=getItemForTypedArray,provider.count=countForTypedArray,provider.fillStorage=fillStorageForTypedArray;else{var rawItemGetter=getRawSourceItemGetter(sourceFormat,seriesLayoutBy);provider.getItem=bind$1(rawItemGetter,null,data,startIndex,dimsDef);var rawCounter=getRawSourceDataCounter(sourceFormat,seriesLayoutBy);provider.count=bind$1(rawCounter,null,data,startIndex,dimsDef)}};var getItemForTypedArray=function(idx,out2){idx-=this._offset,out2=out2||[];for(var data=this._data,dimSize=this._dimSize,offset=dimSize*idx,i=0;i&lt;dimSize;i++)out2[i]=data[offset+i];return out2},fillStorageForTypedArray=function(start2,end2,storage2,extent3){for(var data=this._data,dimSize=this._dimSize,dim=0;dim&lt;dimSize;dim++){for(var dimExtent=extent3[dim],min3=null==dimExtent[0]?1/0:dimExtent[0],max3=null==dimExtent[1]?-1/0:dimExtent[1],count2=end2-start2,arr=storage2[dim],i=0;i&lt;count2;i++){var val=data[i*dimSize+dim];arr[start2+i]=val,val&lt;min3&amp;&amp;(min3=val),val&gt;max3&amp;&amp;(max3=val)}dimExtent[0]=min3,dimExtent[1]=max3}},countForTypedArray=function(){return this._data?this._data.length/this._dimSize:0};function appendDataSimply(newData){for(var i=0;i&lt;newData.length;i++)this._data.push(newData[i])}(_a2={}).arrayRows_column={pure:!0,appendData:appendDataSimply},_a2.arrayRows_row={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},_a2.objectRows={pure:!0,appendData:appendDataSimply},_a2.keyedColumns={pure:!0,appendData:function(newData){var data=this._data;each$f(newData,function(newCol,key){for(var oldCol=data[key]||(data[key]=[]),i=0;i&lt;(newCol||[]).length;i++)oldCol.push(newCol[i])})}},_a2.original={appendData:appendDataSimply},_a2.typedArray={persistent:!1,pure:!0,appendData:function(newData){this._data=newData},clean:function(){this._offset+=this.count(),this._data=null}},providerMethods=_a2}(),DefaultDataProvider2}(),getItemSimply=function(rawData,startIndex,dimsDef,idx){return rawData[idx]},rawSourceItemGetterMap=((_a={}).arrayRows_column=function(rawData,startIndex,dimsDef,idx){return rawData[idx+startIndex]},_a.arrayRows_row=function(rawData,startIndex,dimsDef,idx,out2){idx+=startIndex;for(var item=out2||[],data=rawData,i=0;i&lt;data.length;i++){var row=data[i];item[i]=row?row[idx]:null}return item},_a.objectRows=getItemSimply,_a.keyedColumns=function(rawData,startIndex,dimsDef,idx,out2){for(var item=out2||[],i=0;i&lt;dimsDef.length;i++){var col=rawData[dimsDef[i].name];item[i]=col?col[idx]:null}return item},_a.original=getItemSimply,_a);function getRawSourceItemGetter(sourceFormat,seriesLayoutBy){return rawSourceItemGetterMap[getMethodMapKey(sourceFormat,seriesLayoutBy)]}var countSimply=function(rawData,startIndex,dimsDef){return rawData.length},rawSourceDataCounterMap=((_b={}).arrayRows_column=function(rawData,startIndex,dimsDef){return Math.max(0,rawData.length-startIndex)},_b.arrayRows_row=function(rawData,startIndex,dimsDef){var row=rawData[0];return row?Math.max(0,row.length-startIndex):0},_b.objectRows=countSimply,_b.keyedColumns=function(rawData,startIndex,dimsDef){var col=rawData[dimsDef[0].name];return col?col.length:0},_b.original=countSimply,_b);function getRawSourceDataCounter(sourceFormat,seriesLayoutBy){return rawSourceDataCounterMap[getMethodMapKey(sourceFormat,seriesLayoutBy)]}var getRawValueSimply=function(dataItem,dimIndex,property){return dataItem[dimIndex]},rawSourceValueGetterMap=((_c={}).arrayRows=getRawValueSimply,_c.objectRows=function(dataItem,dimIndex,property){return dataItem[property]},_c.keyedColumns=getRawValueSimply,_c.original=function(dataItem,dimIndex,property){var value=getDataItemValue(dataItem);return value instanceof Array?value[dimIndex]:value},_c.typedArray=getRawValueSimply,_c);function getRawSourceValueGetter(sourceFormat){return rawSourceValueGetterMap[sourceFormat]}function getMethodMapKey(sourceFormat,seriesLayoutBy){return"arrayRows"===sourceFormat?sourceFormat+"_"+seriesLayoutBy:sourceFormat}function retrieveRawValue(data,dataIndex,dim){if(data){var dataItem=data.getRawDataItem(dataIndex);if(null!=dataItem){var store=data.getStore(),sourceFormat=store.getSource().sourceFormat;if(null!=dim){var dimIndex=data.getDimensionIndex(dim),property=store.getDimensionProperty(dimIndex);return getRawSourceValueGetter(sourceFormat)(dataItem,dimIndex,property)}var result=dataItem;return"original"===sourceFormat&amp;&amp;(result=getDataItemValue(dataItem)),result}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function DataFormatMixin2(){}return DataFormatMixin2.prototype.getDataParams=function(dataIndex,dataType){var data=this.getData(dataType),rawValue=this.getRawValue(dataIndex,dataType),rawDataIndex=data.getRawIndex(dataIndex),name=data.getName(dataIndex),itemOpt=data.getRawDataItem(dataIndex),style=data.getItemVisual(dataIndex,"style"),color2=style&amp;&amp;style[data.getItemVisual(dataIndex,"drawType")||"fill"],borderColor=style&amp;&amp;style.stroke,mainType=this.mainType,isSeries2="series"===mainType,userOutput=data.userOutput&amp;&amp;data.userOutput.get();return{componentType:mainType,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:isSeries2?this.subType:null,seriesIndex:this.seriesIndex,seriesId:isSeries2?this.id:null,seriesName:isSeries2?this.name:null,name:name,dataIndex:rawDataIndex,data:itemOpt,dataType:dataType,value:rawValue,color:color2,borderColor:borderColor,dimensionNames:userOutput?userOutput.fullDimensions:null,encode:userOutput?userOutput.encode:null,$vars:["seriesName","name","value"]}},DataFormatMixin2.prototype.getFormattedLabel=function(dataIndex,status,dataType,labelDimIndex,formatter,extendParams){status=status||"normal";var data=this.getData(dataType),params=this.getDataParams(dataIndex,dataType);(extendParams&amp;&amp;(params.value=extendParams.interpolatedValue),null!=labelDimIndex&amp;&amp;isArray$1(params.value)&amp;&amp;(params.value=params.value[labelDimIndex]),formatter)||(formatter=data.getItemModel(dataIndex).get("normal"===status?["label","formatter"]:[status,"label","formatter"]));return isFunction(formatter)?(params.status=status,params.dimensionIndex=labelDimIndex,formatter(params)):isString(formatter)?formatTpl(formatter,params).replace(DIMENSION_LABEL_REG,function(origin,dimStr){var len2=dimStr.length,dimLoose=dimStr;"["===dimLoose.charAt(0)&amp;&amp;"]"===dimLoose.charAt(len2-1)&amp;&amp;(dimLoose=+dimLoose.slice(1,len2-1));var val=retrieveRawValue(data,dataIndex,dimLoose);if(extendParams&amp;&amp;isArray$1(extendParams.interpolatedValue)){var dimIndex=data.getDimensionIndex(dimLoose);dimIndex&gt;=0&amp;&amp;(val=extendParams.interpolatedValue[dimIndex])}return null!=val?val+"":""}):void 0},DataFormatMixin2.prototype.getRawValue=function(idx,dataType){return retrieveRawValue(this.getData(dataType),idx)},DataFormatMixin2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){},DataFormatMixin2}();function normalizeTooltipFormatResult(result){var markupText,markupFragment;return isObject$3(result)?result.type&amp;&amp;(markupFragment=result):markupText=result,{text:markupText,frag:markupFragment}}function createTask(define){return new Task(define)}var Task=function(){function Task2(define){define=define||{},this._reset=define.reset,this._plan=define.plan,this._count=define.count,this._onDirty=define.onDirty,this._dirty=!0}return Task2.prototype.perform=function(performArgs){var planResult,upTask=this._upstream,skip=performArgs&amp;&amp;performArgs.skip;if(this._dirty&amp;&amp;upTask){var context=this.context;context.data=context.outputData=upTask.context.outputData}this.__pipeline&amp;&amp;(this.__pipeline.currentTask=this),this._plan&amp;&amp;!skip&amp;&amp;(planResult=this._plan(this.context));var forceFirstProgress,lastModBy=normalizeModBy(this._modBy),lastModDataCount=this._modDataCount||0,modBy=normalizeModBy(performArgs&amp;&amp;performArgs.modBy),modDataCount=performArgs&amp;&amp;performArgs.modDataCount||0;function normalizeModBy(val){return!(val&gt;=1)&amp;&amp;(val=1),val}lastModBy===modBy&amp;&amp;lastModDataCount===modDataCount||(planResult="reset"),(this._dirty||"reset"===planResult)&amp;&amp;(this._dirty=!1,forceFirstProgress=this._doReset(skip)),this._modBy=modBy,this._modDataCount=modDataCount;var step=performArgs&amp;&amp;performArgs.step;if(this._dueEnd=upTask?upTask._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var start2=this._dueIndex,end2=Math.min(null!=step?this._dueIndex+step:1/0,this._dueEnd);if(!skip&amp;&amp;(forceFirstProgress||start2&lt;end2)){var progress=this._progress;if(isArray$1(progress))for(var i=0;i&lt;progress.length;i++)this._doProgress(progress[i],start2,end2,modBy,modDataCount);else this._doProgress(progress,start2,end2,modBy,modDataCount)}this._dueIndex=end2;var outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:end2;this._outputDueEnd=outputDueEnd}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},Task2.prototype.dirty=function(){this._dirty=!0,this._onDirty&amp;&amp;this._onDirty(this.context)},Task2.prototype._doProgress=function(progress,start2,end2,modBy,modDataCount){iterator.reset(start2,end2,modBy,modDataCount),this._callingProgress=progress,this._callingProgress({start:start2,end:end2,count:end2-start2,next:iterator.next},this.context)},Task2.prototype._doReset=function(skip){var progress,forceFirstProgress;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!skip&amp;&amp;this._reset&amp;&amp;((progress=this._reset(this.context))&amp;&amp;progress.progress&amp;&amp;(forceFirstProgress=progress.forceFirstProgress,progress=progress.progress),isArray$1(progress)&amp;&amp;!progress.length&amp;&amp;(progress=null)),this._progress=progress,this._modBy=this._modDataCount=null;var downstream=this._downstream;return downstream&amp;&amp;downstream.dirty(),forceFirstProgress},Task2.prototype.unfinished=function(){return this._progress&amp;&amp;this._dueIndex&lt;this._dueEnd},Task2.prototype.pipe=function(downTask){(this._downstream!==downTask||this._dirty)&amp;&amp;(this._downstream=downTask,downTask._upstream=this,downTask.dirty())},Task2.prototype.dispose=function(){this._disposed||(this._upstream&amp;&amp;(this._upstream._downstream=null),this._downstream&amp;&amp;(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},Task2.prototype.getUpstream=function(){return this._upstream},Task2.prototype.getDownstream=function(){return this._downstream},Task2.prototype.setOutputEnd=function(end2){this._outputDueEnd=this._settedOutputEnd=end2},Task2}(),iterator=function(){var end2,current,modBy,modDataCount,winCount,it={reset:function(s,e2,sStep,sCount){current=s,end2=e2,modBy=sStep,modDataCount=sCount,winCount=Math.ceil(modDataCount/modBy),it.next=modBy&gt;1&amp;&amp;modDataCount&gt;0?modNext:sequentialNext}};return it;function sequentialNext(){return current&lt;end2?current++:null}function modNext(){var dataIndex=current%winCount*modBy+Math.ceil(current/winCount),result=current&gt;=end2?null:dataIndex&lt;modDataCount?dataIndex:current;return current++,result}}();function parseDataValue(value,opt){var dimType=opt&amp;&amp;opt.type;return"ordinal"===dimType?value:("time"!==dimType||isNumber(value)||null==value||"-"===value||(value=+parseDate(value)),null==value||""===value?NaN:Number(value))}var valueParserMap=createHashMap({number:function(val){return parseFloat(val)},time:function(val){return+parseDate(val)},trim:function(val){return isString(val)?trim$1(val):val}});function getRawValueParser(type){return valueParserMap.get(type)}var ORDER_COMPARISON_OP_MAP={lt:function(lval,rval){return lval&lt;rval},lte:function(lval,rval){return lval&lt;=rval},gt:function(lval,rval){return lval&gt;rval},gte:function(lval,rval){return lval&gt;=rval}},FilterOrderComparator=function(){function FilterOrderComparator2(op,rval){if(!isNumber(rval)){throwError("")}this._opFn=ORDER_COMPARISON_OP_MAP[op],this._rvalFloat=numericToNumber(rval)}return FilterOrderComparator2.prototype.evaluate=function(lval){return isNumber(lval)?this._opFn(lval,this._rvalFloat):this._opFn(numericToNumber(lval),this._rvalFloat)},FilterOrderComparator2}(),SortOrderComparator=function(){function SortOrderComparator2(order,incomparable){var isDesc="desc"===order;this._resultLT=isDesc?1:-1,null==incomparable&amp;&amp;(incomparable=isDesc?"min":"max"),this._incomparable="min"===incomparable?-1/0:1/0}return SortOrderComparator2.prototype.evaluate=function(lval,rval){var lvalFloat=isNumber(lval)?lval:numericToNumber(lval),rvalFloat=isNumber(rval)?rval:numericToNumber(rval),lvalNotNumeric=isNaN(lvalFloat),rvalNotNumeric=isNaN(rvalFloat);if(lvalNotNumeric&amp;&amp;(lvalFloat=this._incomparable),rvalNotNumeric&amp;&amp;(rvalFloat=this._incomparable),lvalNotNumeric&amp;&amp;rvalNotNumeric){var lvalIsStr=isString(lval),rvalIsStr=isString(rval);lvalIsStr&amp;&amp;(lvalFloat=rvalIsStr?lval:0),rvalIsStr&amp;&amp;(rvalFloat=lvalIsStr?rval:0)}return lvalFloat&lt;rvalFloat?this._resultLT:lvalFloat&gt;rvalFloat?-this._resultLT:0},SortOrderComparator2}(),FilterEqualityComparator=function(){function FilterEqualityComparator2(isEq,rval){this._rval=rval,this._isEQ=isEq,this._rvalTypeof=typeof rval,this._rvalFloat=numericToNumber(rval)}return FilterEqualityComparator2.prototype.evaluate=function(lval){var eqResult=lval===this._rval;if(!eqResult){var lvalTypeof=typeof lval;lvalTypeof===this._rvalTypeof||"number"!==lvalTypeof&amp;&amp;"number"!==this._rvalTypeof||(eqResult=numericToNumber(lval)===this._rvalFloat)}return this._isEQ?eqResult:!eqResult},FilterEqualityComparator2}();function createFilterComparator(op,rval){return"eq"===op||"ne"===op?new FilterEqualityComparator("eq"===op,rval):hasOwn(ORDER_COMPARISON_OP_MAP,op)?new FilterOrderComparator(op,rval):null}var ExternalSource=function(){function ExternalSource2(){}return ExternalSource2.prototype.getRawData=function(){throw new Error("not supported")},ExternalSource2.prototype.getRawDataItem=function(dataIndex){throw new Error("not supported")},ExternalSource2.prototype.cloneRawData=function(){},ExternalSource2.prototype.getDimensionInfo=function(dim){},ExternalSource2.prototype.cloneAllDimensionInfo=function(){},ExternalSource2.prototype.count=function(){},ExternalSource2.prototype.retrieveValue=function(dataIndex,dimIndex){},ExternalSource2.prototype.retrieveValueFromItem=function(dataItem,dimIndex){},ExternalSource2.prototype.convertValue=function(rawVal,dimInfo){return parseDataValue(rawVal,dimInfo)},ExternalSource2}();function getRawData(upstream){if(!isSupportedSourceFormat(upstream.sourceFormat)){throwError("")}return upstream.data}function cloneRawData(upstream){var sourceFormat=upstream.sourceFormat,data=upstream.data;if(!isSupportedSourceFormat(sourceFormat)){throwError("")}if("arrayRows"===sourceFormat){for(var result=[],i=0,len2=data.length;i&lt;len2;i++)result.push(data[i].slice());return result}if("objectRows"===sourceFormat){for(result=[],i=0,len2=data.length;i&lt;len2;i++)result.push(extend({},data[i]));return result}}function getDimensionInfo(dimensions,dimsByName,dim){if(null!=dim)return isNumber(dim)||!isNaN(dim)&amp;&amp;!hasOwn(dimsByName,dim)?dimensions[dim]:hasOwn(dimsByName,dim)?dimsByName[dim]:void 0}function cloneAllDimensionInfo(dimensions){return clone$4(dimensions)}var externalTransformMap=createHashMap();function applySingleDataTransform(transOption,upSourceList,infoForPrint,pipeIndex){upSourceList.length||throwError(""),isObject$3(transOption)||throwError("");var transType=transOption.type,externalTransform=externalTransformMap.get(transType);externalTransform||throwError("");var extUpSourceList=map$1(upSourceList,function(upSource){return function createExternalSource(internalSource,externalTransform){var extSource=new ExternalSource,data=internalSource.data,sourceFormat=extSource.sourceFormat=internalSource.sourceFormat,sourceHeaderCount=internalSource.startIndex;"column"!==internalSource.seriesLayoutBy&amp;&amp;throwError("");var dimensions=[],dimsByName={},dimsDef=internalSource.dimensionsDefine;if(dimsDef)each$f(dimsDef,function(dimDef,idx){var name=dimDef.name,dimDefExt={index:idx,name:name,displayName:dimDef.displayName};dimensions.push(dimDefExt),null!=name&amp;&amp;(hasOwn(dimsByName,name)&amp;&amp;throwError(""),dimsByName[name]=dimDefExt)});else for(var i=0;i&lt;internalSource.dimensionsDetectedCount;i++)dimensions.push({index:i});var rawItemGetter=getRawSourceItemGetter(sourceFormat,"column");externalTransform.__isBuiltIn&amp;&amp;(extSource.getRawDataItem=function(dataIndex){return rawItemGetter(data,sourceHeaderCount,dimensions,dataIndex)},extSource.getRawData=bind$1(getRawData,null,internalSource)),extSource.cloneRawData=bind$1(cloneRawData,null,internalSource);var rawCounter=getRawSourceDataCounter(sourceFormat,"column");extSource.count=bind$1(rawCounter,null,data,sourceHeaderCount,dimensions);var rawValueGetter=getRawSourceValueGetter(sourceFormat);extSource.retrieveValue=function(dataIndex,dimIndex){var rawItem=rawItemGetter(data,sourceHeaderCount,dimensions,dataIndex);return retrieveValueFromItem(rawItem,dimIndex)};var retrieveValueFromItem=extSource.retrieveValueFromItem=function(dataItem,dimIndex){if(null!=dataItem){var dimDef=dimensions[dimIndex];return dimDef?rawValueGetter(dataItem,dimIndex,dimDef.name):void 0}};return extSource.getDimensionInfo=bind$1(getDimensionInfo,null,dimensions,dimsByName),extSource.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,dimensions),extSource}(upSource,externalTransform)});return map$1(normalizeToArray(externalTransform.transform({upstream:extUpSourceList[0],upstreamList:extUpSourceList,config:clone$4(transOption.config)})),function(result,resultIndex){var resultMetaRawOption;isObject$3(result)||throwError(""),result.data||throwError(""),isSupportedSourceFormat(detectSourceFormat(result.data))||throwError("");var firstUpSource=upSourceList[0];if(firstUpSource&amp;&amp;0===resultIndex&amp;&amp;!result.dimensions){var startIndex=firstUpSource.startIndex;startIndex&amp;&amp;(result.data=firstUpSource.data.slice(0,startIndex).concat(result.data)),resultMetaRawOption={seriesLayoutBy:"column",sourceHeader:startIndex,dimensions:firstUpSource.metaRawOption.dimensions}}else resultMetaRawOption={seriesLayoutBy:"column",sourceHeader:0,dimensions:result.dimensions};return createSource(result.data,resultMetaRawOption,null)})}function isSupportedSourceFormat(sourceFormat){return"arrayRows"===sourceFormat||"objectRows"===sourceFormat}var defaultDimValueGetters,CtorUint32Array="undefined"==typeof Uint32Array?Array:Uint32Array,CtorUint16Array="undefined"==typeof Uint16Array?Array:Uint16Array,CtorInt32Array$1="undefined"==typeof Int32Array?Array:Int32Array,CtorFloat64Array="undefined"==typeof Float64Array?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array};function getIndicesCtor(rawCount){return rawCount&gt;65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(originalChunk){var Ctor=originalChunk.constructor;return Ctor===Array?originalChunk.slice():new Ctor(originalChunk)}function prepareStore(store,dimIdx,dimType,end2,append){var DataCtor=dataCtors[dimType||"float"];if(append){var oldStore=store[dimIdx],oldLen=oldStore&amp;&amp;oldStore.length;if(oldLen!==end2){for(var newStore=new DataCtor(end2),j=0;j&lt;oldLen;j++)newStore[j]=oldStore[j];store[dimIdx]=newStore}}else store[dimIdx]=new DataCtor(end2)}var DataStore=function(){function DataStore2(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return DataStore2.prototype.initData=function(provider,inputDimensions,dimValueGetter){this._provider=provider,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var source=provider.getSource(),defaultGetter=this.defaultDimValueGetter=defaultDimValueGetters[source.sourceFormat];this._dimValueGetter=dimValueGetter||defaultGetter,this._rawExtent=[],shouldRetrieveDataByName(source),this._dimensions=map$1(inputDimensions,function(dim){return{type:dim.type,property:dim.property}}),this._initDataFromProvider(0,provider.count())},DataStore2.prototype.getProvider=function(){return this._provider},DataStore2.prototype.getSource=function(){return this._provider.getSource()},DataStore2.prototype.ensureCalculationDimension=function(dimName,type){var calcDimNameToIdx=this._calcDimNameToIdx,dimensions=this._dimensions,calcDimIdx=calcDimNameToIdx.get(dimName);if(null!=calcDimIdx){if(dimensions[calcDimIdx].type===type)return calcDimIdx}else calcDimIdx=dimensions.length;return dimensions[calcDimIdx]={type:type},calcDimNameToIdx.set(dimName,calcDimIdx),this._chunks[calcDimIdx]=new dataCtors[type||"float"](this._rawCount),this._rawExtent[calcDimIdx]=[1/0,-1/0],calcDimIdx},DataStore2.prototype.collectOrdinalMeta=function(dimIdx,ordinalMeta){var chunk=this._chunks[dimIdx],dim=this._dimensions[dimIdx],rawExtents=this._rawExtent,offset=dim.ordinalOffset||0,len2=chunk.length;0===offset&amp;&amp;(rawExtents[dimIdx]=[1/0,-1/0]);for(var dimRawExtent=rawExtents[dimIdx],i=offset;i&lt;len2;i++){var val=chunk[i]=ordinalMeta.parseAndCollect(chunk[i]);isNaN(val)||(dimRawExtent[0]=Math.min(val,dimRawExtent[0]),dimRawExtent[1]=Math.max(val,dimRawExtent[1]))}dim.ordinalMeta=ordinalMeta,dim.ordinalOffset=len2,dim.type="ordinal"},DataStore2.prototype.getOrdinalMeta=function(dimIdx){return this._dimensions[dimIdx].ordinalMeta},DataStore2.prototype.getDimensionProperty=function(dimIndex){var item=this._dimensions[dimIndex];return item&amp;&amp;item.property},DataStore2.prototype.appendData=function(data){var provider=this._provider,start2=this.count();provider.appendData(data);var end2=provider.count();return provider.persistent||(end2+=start2),start2&lt;end2&amp;&amp;this._initDataFromProvider(start2,end2,!0),[start2,end2]},DataStore2.prototype.appendValues=function(values,minFillLen){for(var chunks=this._chunks,dimensions=this._dimensions,dimLen=dimensions.length,rawExtent=this._rawExtent,start2=this.count(),end2=start2+Math.max(values.length,minFillLen||0),i=0;i&lt;dimLen;i++){prepareStore(chunks,i,(dim=dimensions[i]).type,end2,!0)}for(var emptyDataItem=[],idx=start2;idx&lt;end2;idx++)for(var sourceIdx=idx-start2,dimIdx=0;dimIdx&lt;dimLen;dimIdx++){var dim=dimensions[dimIdx],val=defaultDimValueGetters.arrayRows.call(this,values[sourceIdx]||emptyDataItem,dim.property,sourceIdx,dimIdx);chunks[dimIdx][idx]=val;var dimRawExtent=rawExtent[dimIdx];val&lt;dimRawExtent[0]&amp;&amp;(dimRawExtent[0]=val),val&gt;dimRawExtent[1]&amp;&amp;(dimRawExtent[1]=val)}return this._rawCount=this._count=end2,{start:start2,end:end2}},DataStore2.prototype._initDataFromProvider=function(start2,end2,append){for(var provider=this._provider,chunks=this._chunks,dimensions=this._dimensions,dimLen=dimensions.length,rawExtent=this._rawExtent,dimNames=map$1(dimensions,function(dim2){return dim2.property}),i=0;i&lt;dimLen;i++){var dim=dimensions[i];rawExtent[i]||(rawExtent[i]=getInitialExtent()),prepareStore(chunks,i,dim.type,end2,append)}if(provider.fillStorage)provider.fillStorage(start2,end2,chunks,rawExtent);else for(var dataItem=[],idx=start2;idx&lt;end2;idx++){dataItem=provider.getItem(idx,dataItem);for(var dimIdx=0;dimIdx&lt;dimLen;dimIdx++){var dimStorage=chunks[dimIdx],val=this._dimValueGetter(dataItem,dimNames[dimIdx],idx,dimIdx);dimStorage[idx]=val;var dimRawExtent=rawExtent[dimIdx];val&lt;dimRawExtent[0]&amp;&amp;(dimRawExtent[0]=val),val&gt;dimRawExtent[1]&amp;&amp;(dimRawExtent[1]=val)}}!provider.persistent&amp;&amp;provider.clean&amp;&amp;provider.clean(),this._rawCount=this._count=end2,this._extent=[]},DataStore2.prototype.count=function(){return this._count},DataStore2.prototype.get=function(dim,idx){if(!(idx&gt;=0&amp;&amp;idx&lt;this._count))return NaN;var dimStore=this._chunks[dim];return dimStore?dimStore[this.getRawIndex(idx)]:NaN},DataStore2.prototype.getValues=function(dimensions,idx){var values=[],dimArr=[];if(null==idx){idx=dimensions,dimensions=[];for(var i=0;i&lt;this._dimensions.length;i++)dimArr.push(i)}else dimArr=dimensions;i=0;for(var len2=dimArr.length;i&lt;len2;i++)values.push(this.get(dimArr[i],idx));return values},DataStore2.prototype.getByRawIndex=function(dim,rawIdx){if(!(rawIdx&gt;=0&amp;&amp;rawIdx&lt;this._rawCount))return NaN;var dimStore=this._chunks[dim];return dimStore?dimStore[rawIdx]:NaN},DataStore2.prototype.getSum=function(dim){var sum2=0;if(this._chunks[dim])for(var i=0,len2=this.count();i&lt;len2;i++){var value=this.get(dim,i);isNaN(value)||(sum2+=value)}return sum2},DataStore2.prototype.getMedian=function(dim){var dimDataArray=[];this.each([dim],function(val){isNaN(val)||dimDataArray.push(val)});var sortedDimDataArray=dimDataArray.sort(function(a,b){return a-b}),len2=this.count();return 0===len2?0:len2%2==1?sortedDimDataArray[(len2-1)/2]:(sortedDimDataArray[len2/2]+sortedDimDataArray[len2/2-1])/2},DataStore2.prototype.indexOfRawIndex=function(rawIndex){if(rawIndex&gt;=this._rawCount||rawIndex&lt;0)return-1;if(!this._indices)return rawIndex;var indices=this._indices,rawDataIndex=indices[rawIndex];if(null!=rawDataIndex&amp;&amp;rawDataIndex&lt;this._count&amp;&amp;rawDataIndex===rawIndex)return rawIndex;for(var left=0,right=this._count-1;left&lt;=right;){var mid=(left+right)/2|0;if(indices[mid]&lt;rawIndex)left=mid+1;else{if(!(indices[mid]&gt;rawIndex))return mid;right=mid-1}}return-1},DataStore2.prototype.indicesOfNearest=function(dim,value,maxDistance){var dimData=this._chunks[dim],nearestIndices=[];if(!dimData)return nearestIndices;null==maxDistance&amp;&amp;(maxDistance=1/0);for(var minDist=1/0,minDiff=-1,nearestIndicesLen=0,i=0,len2=this.count();i&lt;len2;i++){var diff=value-dimData[this.getRawIndex(i)],dist2=Math.abs(diff);dist2&lt;=maxDistance&amp;&amp;((dist2&lt;minDist||dist2===minDist&amp;&amp;diff&gt;=0&amp;&amp;minDiff&lt;0)&amp;&amp;(minDist=dist2,minDiff=diff,nearestIndicesLen=0),diff===minDiff&amp;&amp;(nearestIndices[nearestIndicesLen++]=i))}return nearestIndices.length=nearestIndicesLen,nearestIndices},DataStore2.prototype.getIndices=function(){var newIndices,indices=this._indices;if(indices){var Ctor=indices.constructor,thisCount=this._count;if(Ctor===Array){newIndices=new Ctor(thisCount);for(var i=0;i&lt;thisCount;i++)newIndices[i]=indices[i]}else newIndices=new Ctor(indices.buffer,0,thisCount)}else{newIndices=new(Ctor=getIndicesCtor(this._rawCount))(this.count());for(i=0;i&lt;newIndices.length;i++)newIndices[i]=i}return newIndices},DataStore2.prototype.filter=function(dims,cb){if(!this._count)return this;for(var newStore=this.clone(),count2=newStore.count(),newIndices=new(getIndicesCtor(newStore._rawCount))(count2),value=[],dimSize=dims.length,offset=0,dim0=dims[0],chunks=newStore._chunks,i=0;i&lt;count2;i++){var keep=void 0,rawIdx=newStore.getRawIndex(i);if(0===dimSize)keep=cb(i);else if(1===dimSize){keep=cb(chunks[dim0][rawIdx],i)}else{for(var k=0;k&lt;dimSize;k++)value[k]=chunks[dims[k]][rawIdx];value[k]=i,keep=cb.apply(null,value)}keep&amp;&amp;(newIndices[offset++]=rawIdx)}return offset&lt;count2&amp;&amp;(newStore._indices=newIndices),newStore._count=offset,newStore._extent=[],newStore._updateGetRawIdx(),newStore},DataStore2.prototype.selectRange=function(range){var newStore=this.clone(),len2=newStore._count;if(!len2)return this;var dims=keys(range),dimSize=dims.length;if(!dimSize)return this;var originalCount=newStore.count(),newIndices=new(getIndicesCtor(newStore._rawCount))(originalCount),offset=0,dim0=dims[0],min3=range[dim0][0],max3=range[dim0][1],storeArr=newStore._chunks,quickFinished=!1;if(!newStore._indices){var idx=0;if(1===dimSize){for(var dimStorage=storeArr[dims[0]],i=0;i&lt;len2;i++){((val=dimStorage[i])&gt;=min3&amp;&amp;val&lt;=max3||isNaN(val))&amp;&amp;(newIndices[offset++]=idx),idx++}quickFinished=!0}else if(2===dimSize){dimStorage=storeArr[dims[0]];var dimStorage2=storeArr[dims[1]],min22=range[dims[1]][0],max22=range[dims[1]][1];for(i=0;i&lt;len2;i++){var val=dimStorage[i],val2=dimStorage2[i];(val&gt;=min3&amp;&amp;val&lt;=max3||isNaN(val))&amp;&amp;(val2&gt;=min22&amp;&amp;val2&lt;=max22||isNaN(val2))&amp;&amp;(newIndices[offset++]=idx),idx++}quickFinished=!0}}if(!quickFinished)if(1===dimSize)for(i=0;i&lt;originalCount;i++){var rawIndex=newStore.getRawIndex(i);((val=storeArr[dims[0]][rawIndex])&gt;=min3&amp;&amp;val&lt;=max3||isNaN(val))&amp;&amp;(newIndices[offset++]=rawIndex)}else for(i=0;i&lt;originalCount;i++){for(var keep=!0,k=(rawIndex=newStore.getRawIndex(i),0);k&lt;dimSize;k++){var dimk=dims[k];((val=storeArr[dimk][rawIndex])&lt;range[dimk][0]||val&gt;range[dimk][1])&amp;&amp;(keep=!1)}keep&amp;&amp;(newIndices[offset++]=newStore.getRawIndex(i))}return offset&lt;originalCount&amp;&amp;(newStore._indices=newIndices),newStore._count=offset,newStore._extent=[],newStore._updateGetRawIdx(),newStore},DataStore2.prototype.map=function(dims,cb){var target=this.clone(dims);return this._updateDims(target,dims,cb),target},DataStore2.prototype.modify=function(dims,cb){this._updateDims(this,dims,cb)},DataStore2.prototype._updateDims=function(target,dims,cb){for(var targetChunks=target._chunks,tmpRetValue=[],dimSize=dims.length,dataCount=target.count(),values=[],rawExtent=target._rawExtent,i=0;i&lt;dims.length;i++)rawExtent[dims[i]]=getInitialExtent();for(var dataIndex=0;dataIndex&lt;dataCount;dataIndex++){for(var rawIndex=target.getRawIndex(dataIndex),k=0;k&lt;dimSize;k++)values[k]=targetChunks[dims[k]][rawIndex];values[dimSize]=dataIndex;var retValue=cb&amp;&amp;cb.apply(null,values);if(null!=retValue){"object"!=typeof retValue&amp;&amp;(tmpRetValue[0]=retValue,retValue=tmpRetValue);for(i=0;i&lt;retValue.length;i++){var dim=dims[i],val=retValue[i],rawExtentOnDim=rawExtent[dim],dimStore=targetChunks[dim];dimStore&amp;&amp;(dimStore[rawIndex]=val),val&lt;rawExtentOnDim[0]&amp;&amp;(rawExtentOnDim[0]=val),val&gt;rawExtentOnDim[1]&amp;&amp;(rawExtentOnDim[1]=val)}}}},DataStore2.prototype.lttbDownSample=function(valueDimension,rate){var maxArea,area,nextRawIndex,target=this.clone([valueDimension],!0),dimStore=target._chunks[valueDimension],len2=this.count(),sampledIndex=0,frameSize=Math.floor(1/rate),currentRawIndex=this.getRawIndex(0),newIndices=new(getIndicesCtor(this._rawCount))(Math.min(2*(Math.ceil(len2/frameSize)+2),len2));newIndices[sampledIndex++]=currentRawIndex;for(var i=1;i&lt;len2-1;i+=frameSize){for(var nextFrameStart=Math.min(i+frameSize,len2-1),nextFrameEnd=Math.min(i+2*frameSize,len2),avgX=(nextFrameEnd+nextFrameStart)/2,avgY=0,idx=nextFrameStart;idx&lt;nextFrameEnd;idx++){var y=dimStore[rawIndex=this.getRawIndex(idx)];isNaN(y)||(avgY+=y)}avgY/=nextFrameEnd-nextFrameStart;var frameStart=i,frameEnd=Math.min(i+frameSize,len2),pointAX=i-1,pointAY=dimStore[currentRawIndex];maxArea=-1,nextRawIndex=frameStart;var firstNaNIndex=-1,countNaN=0;for(idx=frameStart;idx&lt;frameEnd;idx++){var rawIndex;y=dimStore[rawIndex=this.getRawIndex(idx)];isNaN(y)?(countNaN++,firstNaNIndex&lt;0&amp;&amp;(firstNaNIndex=rawIndex)):(area=Math.abs((pointAX-avgX)*(y-pointAY)-(pointAX-idx)*(avgY-pointAY)))&gt;maxArea&amp;&amp;(maxArea=area,nextRawIndex=rawIndex)}countNaN&gt;0&amp;&amp;countNaN&lt;frameEnd-frameStart&amp;&amp;(newIndices[sampledIndex++]=Math.min(firstNaNIndex,nextRawIndex),nextRawIndex=Math.max(firstNaNIndex,nextRawIndex)),newIndices[sampledIndex++]=nextRawIndex,currentRawIndex=nextRawIndex}return newIndices[sampledIndex++]=this.getRawIndex(len2-1),target._count=sampledIndex,target._indices=newIndices,target.getRawIndex=this._getRawIdx,target},DataStore2.prototype.minmaxDownSample=function(valueDimension,rate){for(var target=this.clone([valueDimension],!0),targetStorage=target._chunks,frameSize=Math.floor(1/rate),dimStore=targetStorage[valueDimension],len2=this.count(),newIndices=new(getIndicesCtor(this._rawCount))(2*Math.ceil(len2/frameSize)),offset=0,i=0;i&lt;len2;i+=frameSize){var minIndex=i,minValue=dimStore[this.getRawIndex(minIndex)],maxIndex=i,maxValue=dimStore[this.getRawIndex(maxIndex)],thisFrameSize=frameSize;i+frameSize&gt;len2&amp;&amp;(thisFrameSize=len2-i);for(var k=0;k&lt;thisFrameSize;k++){var value=dimStore[this.getRawIndex(i+k)];value&lt;minValue&amp;&amp;(minValue=value,minIndex=i+k),value&gt;maxValue&amp;&amp;(maxValue=value,maxIndex=i+k)}var rawMinIndex=this.getRawIndex(minIndex),rawMaxIndex=this.getRawIndex(maxIndex);minIndex&lt;maxIndex?(newIndices[offset++]=rawMinIndex,newIndices[offset++]=rawMaxIndex):(newIndices[offset++]=rawMaxIndex,newIndices[offset++]=rawMinIndex)}return target._count=offset,target._indices=newIndices,target._updateGetRawIdx(),target},DataStore2.prototype.downSample=function(dimension,rate,sampleValue,sampleIndex){for(var target=this.clone([dimension],!0),targetStorage=target._chunks,frameValues=[],frameSize=Math.floor(1/rate),dimStore=targetStorage[dimension],len2=this.count(),rawExtentOnDim=target._rawExtent[dimension]=[1/0,-1/0],newIndices=new(getIndicesCtor(this._rawCount))(Math.ceil(len2/frameSize)),offset=0,i=0;i&lt;len2;i+=frameSize){frameSize&gt;len2-i&amp;&amp;(frameSize=len2-i,frameValues.length=frameSize);for(var k=0;k&lt;frameSize;k++){var dataIdx=this.getRawIndex(i+k);frameValues[k]=dimStore[dataIdx]}var value=sampleValue(frameValues),sampleFrameIdx=this.getRawIndex(Math.min(i+sampleIndex(frameValues,value)||0,len2-1));dimStore[sampleFrameIdx]=value,value&lt;rawExtentOnDim[0]&amp;&amp;(rawExtentOnDim[0]=value),value&gt;rawExtentOnDim[1]&amp;&amp;(rawExtentOnDim[1]=value),newIndices[offset++]=sampleFrameIdx}return target._count=offset,target._indices=newIndices,target._updateGetRawIdx(),target},DataStore2.prototype.each=function(dims,cb){if(this._count)for(var dimSize=dims.length,chunks=this._chunks,i=0,len2=this.count();i&lt;len2;i++){var rawIdx=this.getRawIndex(i);switch(dimSize){case 0:cb(i);break;case 1:cb(chunks[dims[0]][rawIdx],i);break;case 2:cb(chunks[dims[0]][rawIdx],chunks[dims[1]][rawIdx],i);break;default:for(var k=0,value=[];k&lt;dimSize;k++)value[k]=chunks[dims[k]][rawIdx];value[k]=i,cb.apply(null,value)}}},DataStore2.prototype.getDataExtent=function(dim){var dimData=this._chunks[dim],initialExtent=[1/0,-1/0];if(!dimData)return initialExtent;var dimExtent,currEnd=this.count();if(!this._indices)return this._rawExtent[dim].slice();if(dimExtent=this._extent[dim])return dimExtent.slice();for(var min3=(dimExtent=initialExtent)[0],max3=dimExtent[1],i=0;i&lt;currEnd;i++){var value=dimData[this.getRawIndex(i)];value&lt;min3&amp;&amp;(min3=value),value&gt;max3&amp;&amp;(max3=value)}return dimExtent=[min3,max3],this._extent[dim]=dimExtent,dimExtent},DataStore2.prototype.getRawDataItem=function(idx){var rawIdx=this.getRawIndex(idx);if(this._provider.persistent)return this._provider.getItem(rawIdx);for(var val=[],chunks=this._chunks,i=0;i&lt;chunks.length;i++)val.push(chunks[i][rawIdx]);return val},DataStore2.prototype.clone=function(clonedDims,ignoreIndices){var target=new DataStore2,chunks=this._chunks,clonedDimsMap=clonedDims&amp;&amp;reduce(clonedDims,function(obj,dimIdx){return obj[dimIdx]=!0,obj},{});if(clonedDimsMap)for(var i=0;i&lt;chunks.length;i++)target._chunks[i]=clonedDimsMap[i]?cloneChunk(chunks[i]):chunks[i];else target._chunks=chunks;return this._copyCommonProps(target),ignoreIndices||(target._indices=this._cloneIndices()),target._updateGetRawIdx(),target},DataStore2.prototype._copyCommonProps=function(target){target._count=this._count,target._rawCount=this._rawCount,target._provider=this._provider,target._dimensions=this._dimensions,target._extent=clone$4(this._extent),target._rawExtent=clone$4(this._rawExtent)},DataStore2.prototype._cloneIndices=function(){if(this._indices){var Ctor=this._indices.constructor,indices=void 0;if(Ctor===Array){var thisCount=this._indices.length;indices=new Ctor(thisCount);for(var i=0;i&lt;thisCount;i++)indices[i]=this._indices[i]}else indices=new Ctor(this._indices);return indices}return null},DataStore2.prototype._getRawIdxIdentity=function(idx){return idx},DataStore2.prototype._getRawIdx=function(idx){return idx&lt;this._count&amp;&amp;idx&gt;=0?this._indices[idx]:-1},DataStore2.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},DataStore2.internalField=function(){function getDimValueSimply(dataItem,property,dataIndex,dimIndex){return parseDataValue(dataItem[dimIndex],this._dimensions[dimIndex])}defaultDimValueGetters={arrayRows:getDimValueSimply,objectRows:function(dataItem,property,dataIndex,dimIndex){return parseDataValue(dataItem[property],this._dimensions[dimIndex])},keyedColumns:getDimValueSimply,original:function(dataItem,property,dataIndex,dimIndex){var value=dataItem&amp;&amp;(null==dataItem.value?dataItem:dataItem.value);return parseDataValue(value instanceof Array?value[dimIndex]:value,this._dimensions[dimIndex])},typedArray:function(dataItem,property,dataIndex,dimIndex){return dataItem[dimIndex]}}}(),DataStore2}(),SourceManager=function(){function SourceManager2(sourceHost){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=sourceHost}return SourceManager2.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},SourceManager2.prototype._setLocalSource=function(sourceList,upstreamSignList){this._sourceList=sourceList,this._upstreamSignList=upstreamSignList,this._versionSignBase++,this._versionSignBase&gt;9e10&amp;&amp;(this._versionSignBase=0)},SourceManager2.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},SourceManager2.prototype.prepareSource=function(){this._isDirty()&amp;&amp;(this._createSource(),this._dirty=!1)},SourceManager2.prototype._createSource=function(){this._setLocalSource([],[]);var resultSourceList,upstreamSignList,sourceHost=this._sourceHost,upSourceMgrList=this._getUpstreamSourceManagers(),hasUpstream=!!upSourceMgrList.length;if(isSeries(sourceHost)){var seriesModel=sourceHost,data=void 0,sourceFormat=void 0,upSource=void 0;if(hasUpstream){var upSourceMgr=upSourceMgrList[0];upSourceMgr.prepareSource(),data=(upSource=upSourceMgr.getSource()).data,sourceFormat=upSource.sourceFormat,upstreamSignList=[upSourceMgr._getVersionSign()]}else sourceFormat=isTypedArray(data=seriesModel.get("data",!0))?"typedArray":"original",upstreamSignList=[];var newMetaRawOption=this._getSourceMetaRawOption()||{},upMetaRawOption=upSource&amp;&amp;upSource.metaRawOption||{},seriesLayoutBy=retrieve2(newMetaRawOption.seriesLayoutBy,upMetaRawOption.seriesLayoutBy)||null,sourceHeader=retrieve2(newMetaRawOption.sourceHeader,upMetaRawOption.sourceHeader),dimensions=retrieve2(newMetaRawOption.dimensions,upMetaRawOption.dimensions);resultSourceList=seriesLayoutBy!==upMetaRawOption.seriesLayoutBy||!!sourceHeader!=!!upMetaRawOption.sourceHeader||dimensions?[createSource(data,{seriesLayoutBy:seriesLayoutBy,sourceHeader:sourceHeader,dimensions:dimensions},sourceFormat)]:[]}else{var datasetModel=sourceHost;if(hasUpstream){var result=this._applyTransform(upSourceMgrList);resultSourceList=result.sourceList,upstreamSignList=result.upstreamSignList}else{resultSourceList=[createSource(datasetModel.get("source",!0),this._getSourceMetaRawOption(),null)],upstreamSignList=[]}}this._setLocalSource(resultSourceList,upstreamSignList)},SourceManager2.prototype._applyTransform=function(upMgrList){var sourceList,datasetModel=this._sourceHost,transformOption=datasetModel.get("transform",!0),fromTransformResult=datasetModel.get("fromTransformResult",!0);if(null!=fromTransformResult){1!==upMgrList.length&amp;&amp;doThrow("")}var source,upSourceList=[],upstreamSignList=[];return each$f(upMgrList,function(upMgr){upMgr.prepareSource();var upSource=upMgr.getSource(fromTransformResult||0);null==fromTransformResult||upSource||doThrow(""),upSourceList.push(upSource),upstreamSignList.push(upMgr._getVersionSign())}),transformOption?sourceList=function applyDataTransform(rawTransOption,sourceList,infoForPrint){var pipedTransOption=normalizeToArray(rawTransOption),pipeLen=pipedTransOption.length;pipeLen||throwError("");for(var i=0,len2=pipeLen;i&lt;len2;i++)sourceList=applySingleDataTransform(pipedTransOption[i],sourceList),i!==len2-1&amp;&amp;(sourceList.length=Math.max(sourceList.length,1));return sourceList}(transformOption,upSourceList,datasetModel.componentIndex):null!=fromTransformResult&amp;&amp;(sourceList=[(source=upSourceList[0],new SourceImpl({data:source.data,sourceFormat:source.sourceFormat,seriesLayoutBy:source.seriesLayoutBy,dimensionsDefine:clone$4(source.dimensionsDefine),startIndex:source.startIndex,dimensionsDetectedCount:source.dimensionsDetectedCount}))]),{sourceList:sourceList,upstreamSignList:upstreamSignList}},SourceManager2.prototype._isDirty=function(){if(this._dirty)return!0;for(var upSourceMgrList=this._getUpstreamSourceManagers(),i=0;i&lt;upSourceMgrList.length;i++){var upSrcMgr=upSourceMgrList[i];if(upSrcMgr._isDirty()||this._upstreamSignList[i]!==upSrcMgr._getVersionSign())return!0}},SourceManager2.prototype.getSource=function(sourceIndex){sourceIndex=sourceIndex||0;var source=this._sourceList[sourceIndex];if(!source){var upSourceMgrList=this._getUpstreamSourceManagers();return upSourceMgrList[0]&amp;&amp;upSourceMgrList[0].getSource(sourceIndex)}return source},SourceManager2.prototype.getSharedDataStore=function(seriesDimRequest){var schema=seriesDimRequest.makeStoreSchema();return this._innerGetDataStore(schema.dimensions,seriesDimRequest.source,schema.hash)},SourceManager2.prototype._innerGetDataStore=function(storeDims,seriesSource,sourceReadKey){var storeList=this._storeList,cachedStoreMap=storeList[0];cachedStoreMap||(cachedStoreMap=storeList[0]={});var cachedStore=cachedStoreMap[sourceReadKey];if(!cachedStore){var upSourceMgr=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&amp;&amp;upSourceMgr?cachedStore=upSourceMgr._innerGetDataStore(storeDims,seriesSource,sourceReadKey):(cachedStore=new DataStore).initData(new DefaultDataProvider(seriesSource,storeDims.length),storeDims),cachedStoreMap[sourceReadKey]=cachedStore}return cachedStore},SourceManager2.prototype._getUpstreamSourceManagers=function(){var sourceHost=this._sourceHost;if(isSeries(sourceHost)){var datasetModel=querySeriesUpstreamDatasetModel(sourceHost);return datasetModel?[datasetModel.getSourceManager()]:[]}return map$1(function queryDatasetUpstreamDatasetModels(datasetModel){return datasetModel.get("transform",!0)||datasetModel.get("fromTransformResult",!0)?queryReferringComponents(datasetModel.ecModel,"dataset",{index:datasetModel.get("fromDatasetIndex",!0),id:datasetModel.get("fromDatasetId",!0)},SINGLE_REFERRING).models:[]}(sourceHost),function(datasetModel2){return datasetModel2.getSourceManager()})},SourceManager2.prototype._getSourceMetaRawOption=function(){var seriesLayoutBy,sourceHeader,dimensions,sourceHost=this._sourceHost;if(isSeries(sourceHost))seriesLayoutBy=sourceHost.get("seriesLayoutBy",!0),sourceHeader=sourceHost.get("sourceHeader",!0),dimensions=sourceHost.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var model=sourceHost;seriesLayoutBy=model.get("seriesLayoutBy",!0),sourceHeader=model.get("sourceHeader",!0),dimensions=model.get("dimensions",!0)}return{seriesLayoutBy:seriesLayoutBy,sourceHeader:sourceHeader,dimensions:dimensions}},SourceManager2}();function disableTransformOptionMerge(datasetModel){datasetModel.option.transform&amp;&amp;setAsPrimitive(datasetModel.option.transform)}function isSeries(sourceHost){return"series"===sourceHost.mainType}function doThrow(errMsg){throw new Error(errMsg)}function getTooltipLineHeight(textStyle){var lineHeight=textStyle.lineHeight;return null==lineHeight?"line-height:1":"line-height:"+encodeHTML(lineHeight+"")+"px"}function getTooltipTextStyle(textStyle,renderMode){var nameFontColor=textStyle.color||"#6e7079",nameFontSize=textStyle.fontSize||12,nameFontWeight=textStyle.fontWeight||"400",valueFontColor=textStyle.color||"#464646",valueFontSize=textStyle.fontSize||14,valueFontWeight=textStyle.fontWeight||"900";return"html"===renderMode?{nameStyle:"font-size:"+encodeHTML(nameFontSize+"")+"px;color:"+encodeHTML(nameFontColor)+";font-weight:"+encodeHTML(nameFontWeight+""),valueStyle:"font-size:"+encodeHTML(valueFontSize+"")+"px;color:"+encodeHTML(valueFontColor)+";font-weight:"+encodeHTML(valueFontWeight+"")}:{nameStyle:{fontSize:nameFontSize,fill:nameFontColor,fontWeight:nameFontWeight},valueStyle:{fontSize:valueFontSize,fill:valueFontColor,fontWeight:valueFontWeight}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["","\n","\n\n","\n\n\n"];function createTooltipMarkup(type,option){return option.type=type,option}function isSectionFragment(frag){return"section"===frag.type}function getBuilder(frag){return isSectionFragment(frag)?buildSection:buildNameValue}function getBlockGapLevel(frag){if(isSectionFragment(frag)){var gapLevel_1=0,subBlockLen=frag.blocks.length,hasInnerGap_1=subBlockLen&gt;1||subBlockLen&gt;0&amp;&amp;!frag.noHeader;return each$f(frag.blocks,function(subBlock){var subGapLevel=getBlockGapLevel(subBlock);subGapLevel&gt;=gapLevel_1&amp;&amp;(gapLevel_1=subGapLevel+ +(hasInnerGap_1&amp;&amp;(!subGapLevel||isSectionFragment(subBlock)&amp;&amp;!subBlock.noHeader)))}),gapLevel_1}return 0}function buildSection(ctx,fragment,topMarginForOuterGap,toolTipTextStyle){var noHeader=fragment.noHeader,gaps=function getGap(gapLevel){return{html:HTML_GAPS[gapLevel],richText:RICH_TEXT_GAPS[gapLevel]}}(getBlockGapLevel(fragment)),subMarkupTextList=[],subBlocks=fragment.blocks||[];assert(!subBlocks||isArray$1(subBlocks)),subBlocks=subBlocks||[];var orderMode=ctx.orderMode;if(fragment.sortBlocks&amp;&amp;orderMode){subBlocks=subBlocks.slice();var orderMap={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(orderMap,orderMode)){var comparator_1=new SortOrderComparator(orderMap[orderMode],null);subBlocks.sort(function(a,b){return comparator_1.evaluate(a.sortParam,b.sortParam)})}else"seriesDesc"===orderMode&amp;&amp;subBlocks.reverse()}each$f(subBlocks,function(subBlock,idx){var valueFormatter=fragment.valueFormatter,subMarkupText2=getBuilder(subBlock)(valueFormatter?extend(extend({},ctx),{valueFormatter:valueFormatter}):ctx,subBlock,idx&gt;0?gaps.html:0,toolTipTextStyle);null!=subMarkupText2&amp;&amp;subMarkupTextList.push(subMarkupText2)});var subMarkupText="richText"===ctx.renderMode?subMarkupTextList.join(gaps.richText):wrapBlockHTML(toolTipTextStyle,subMarkupTextList.join(""),noHeader?topMarginForOuterGap:gaps.html);if(noHeader)return subMarkupText;var displayableHeader=makeValueReadable(fragment.header,"ordinal",ctx.useUTC),nameStyle=getTooltipTextStyle(toolTipTextStyle,ctx.renderMode).nameStyle,tooltipLineHeight=getTooltipLineHeight(toolTipTextStyle);return"richText"===ctx.renderMode?wrapInlineNameRichText(ctx,displayableHeader,nameStyle)+gaps.richText+subMarkupText:wrapBlockHTML(toolTipTextStyle,'&lt;div style="'+nameStyle+";"+tooltipLineHeight+';"&gt;'+encodeHTML(displayableHeader)+"&lt;/div&gt;"+subMarkupText,topMarginForOuterGap)}function buildNameValue(ctx,fragment,topMarginForOuterGap,toolTipTextStyle){var renderMode=ctx.renderMode,noName=fragment.noName,noValue=fragment.noValue,noMarker=!fragment.markerType,name=fragment.name,useUTC=ctx.useUTC,valueFormatter=fragment.valueFormatter||ctx.valueFormatter||function(value){return map$1(value=isArray$1(value)?value:[value],function(val,idx){return makeValueReadable(val,isArray$1(valueTypeOption)?valueTypeOption[idx]:valueTypeOption,useUTC)})};if(!noName||!noValue){var markerStr=noMarker?"":ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType,fragment.markerColor||"#333",renderMode),readableName=noName?"":makeValueReadable(name,"ordinal",useUTC),valueTypeOption=fragment.valueType,readableValueList=noValue?[]:valueFormatter(fragment.value,fragment.dataIndex),valueAlignRight=!noMarker||!noName,valueCloseToMarker=!noMarker&amp;&amp;noName,_a2=getTooltipTextStyle(toolTipTextStyle,renderMode),nameStyle=_a2.nameStyle,valueStyle=_a2.valueStyle;return"richText"===renderMode?(noMarker?"":markerStr)+(noName?"":wrapInlineNameRichText(ctx,readableName,nameStyle))+(noValue?"":function wrapInlineValueRichText(ctx,values,alignRight,valueCloseToMarker,style){var styles=[style],paddingLeft=valueCloseToMarker?10:20;return alignRight&amp;&amp;styles.push({padding:[0,0,0,paddingLeft],align:"right"}),ctx.markupStyleCreator.wrapRichTextStyle(isArray$1(values)?values.join("  "):values,styles)}(ctx,readableValueList,valueAlignRight,valueCloseToMarker,valueStyle)):wrapBlockHTML(toolTipTextStyle,(noMarker?"":markerStr)+(noName?"":function wrapInlineNameHTML(name,leftHasMarker,style){return'&lt;span style="'+style+";"+(leftHasMarker?"margin-left:2px":"")+'"&gt;'+encodeHTML(name)+"&lt;/span&gt;"}(readableName,!noMarker,nameStyle))+(noValue?"":function wrapInlineValueHTML(valueList,alignRight,valueCloseToMarker,style){var paddingStr=valueCloseToMarker?"10px":"20px",alignCSS=alignRight?"float:right;margin-left:"+paddingStr:"";return valueList=isArray$1(valueList)?valueList:[valueList],'&lt;span style="'+alignCSS+";"+style+'"&gt;'+map$1(valueList,function(value){return encodeHTML(value)}).join("&amp;nbsp;&amp;nbsp;")+"&lt;/span&gt;"}(readableValueList,valueAlignRight,valueCloseToMarker,valueStyle)),topMarginForOuterGap)}}function buildTooltipMarkup(fragment,markupStyleCreator,renderMode,orderMode,useUTC,toolTipTextStyle){if(fragment)return getBuilder(fragment)({useUTC:useUTC,renderMode:renderMode,orderMode:orderMode,markupStyleCreator:markupStyleCreator,valueFormatter:fragment.valueFormatter},fragment,0,toolTipTextStyle)}function wrapBlockHTML(textStyle,encodedContent,topGap){return'&lt;div style="'+("margin: "+topGap+"px 0 0")+";"+getTooltipLineHeight(textStyle)+';"&gt;'+encodedContent+'&lt;div style="clear:both"&gt;&lt;/div&gt;&lt;/div&gt;'}function wrapInlineNameRichText(ctx,name,style){return ctx.markupStyleCreator.wrapRichTextStyle(name,style)}function retrieveVisualColorForTooltipMarker(series,dataIndex){return convertToColorString(series.getData().getItemVisual(dataIndex,"style")[series.visualDrawType])}function getPaddingFromTooltipModel(model,renderMode){var padding=model.get("padding");return null!=padding?padding:"richText"===renderMode?[8,10]:10}var TooltipMarkupStyleCreator=function(){function TooltipMarkupStyleCreator2(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return TooltipMarkupStyleCreator2.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},TooltipMarkupStyleCreator2.prototype.makeTooltipMarker=function(markerType,colorStr,renderMode){var markerId="richText"===renderMode?this._generateStyleName():null,marker=getTooltipMarker({color:colorStr,type:markerType,renderMode:renderMode,markerId:markerId});return isString(marker)?marker:(this.richTextStyles[markerId]=marker.style,marker.content)},TooltipMarkupStyleCreator2.prototype.wrapRichTextStyle=function(text,styles){var finalStl={};isArray$1(styles)?each$f(styles,function(stl){return extend(finalStl,stl)}):extend(finalStl,styles);var styleName=this._generateStyleName();return this.richTextStyles[styleName]=finalStl,"{"+styleName+"|"+text+"}"},TooltipMarkupStyleCreator2}();function defaultSeriesFormatTooltip(opt){var inlineValue,inlineValueType,subBlocks,sortParam,series=opt.series,dataIndex=opt.dataIndex,multipleSeries=opt.multipleSeries,data=series.getData(),tooltipDims=data.mapDimensionsAll("defaultedTooltip"),tooltipDimLen=tooltipDims.length,value=series.getRawValue(dataIndex),isValueArr=isArray$1(value),markerColor=retrieveVisualColorForTooltipMarker(series,dataIndex);if(tooltipDimLen&gt;1||isValueArr&amp;&amp;!tooltipDimLen){var formatArrResult=function formatTooltipArrayValue(value,series,dataIndex,tooltipDims,colorStr){var data=series.getData(),isValueMultipleLine=reduce(value,function(isValueMultipleLine2,val,idx){var dimItem=data.getDimensionInfo(idx);return isValueMultipleLine2||dimItem&amp;&amp;!1!==dimItem.tooltip&amp;&amp;null!=dimItem.displayName},!1),inlineValues=[],inlineValueTypes=[],blocks=[];function setEachItem(val,dim){var dimInfo=data.getDimensionInfo(dim);dimInfo&amp;&amp;!1!==dimInfo.otherDims.tooltip&amp;&amp;(isValueMultipleLine?blocks.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:colorStr,name:dimInfo.displayName,value:val,valueType:dimInfo.type})):(inlineValues.push(val),inlineValueTypes.push(dimInfo.type)))}return tooltipDims.length?each$f(tooltipDims,function(dim){setEachItem(retrieveRawValue(data,dataIndex,dim),dim)}):each$f(value,setEachItem),{inlineValues:inlineValues,inlineValueTypes:inlineValueTypes,blocks:blocks}}(value,series,dataIndex,tooltipDims,markerColor);inlineValue=formatArrResult.inlineValues,inlineValueType=formatArrResult.inlineValueTypes,subBlocks=formatArrResult.blocks,sortParam=formatArrResult.inlineValues[0]}else if(tooltipDimLen){var dimInfo=data.getDimensionInfo(tooltipDims[0]);sortParam=inlineValue=retrieveRawValue(data,dataIndex,tooltipDims[0]),inlineValueType=dimInfo.type}else sortParam=inlineValue=isValueArr?value[0]:value;var seriesNameSpecified=isNameSpecified(series),seriesName=seriesNameSpecified&amp;&amp;series.name||"",itemName=data.getName(dataIndex),inlineName=multipleSeries?seriesName:itemName;return createTooltipMarkup("section",{header:seriesName,noHeader:multipleSeries||!seriesNameSpecified,sortParam:sortParam,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:markerColor,name:inlineName,noName:!trim$1(inlineName),value:inlineValue,valueType:inlineValueType,dataIndex:dataIndex})].concat(subBlocks||[])})}var inner$k=makeInner();function getSelectionKey(data,dataIndex){return data.getName(dataIndex)||data.getId(dataIndex)}var SeriesModel=function(_super){function SeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this._selectedDataIndicesMap={},_this}var proto2;return __extends$1(SeriesModel2,_super),SeriesModel2.prototype.init=function(option,parentModel,ecModel){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(option,ecModel),(inner$k(this).sourceManager=new SourceManager(this)).prepareSource();var data=this.getInitialData(option,ecModel);wrapData(data,this),this.dataTask.context.data=data,inner$k(this).dataBeforeProcessed=data,autoSeriesName(this),this._initSelectedMapFromData(data)},SeriesModel2.prototype.mergeDefaultAndTheme=function(option,ecModel){var layoutMode=fetchLayoutMode(this),inputPositionParams=layoutMode?getLayoutParams(option):{},themeSubType=this.subType;ComponentModel.hasClass(themeSubType)&amp;&amp;(themeSubType+="Series"),merge(option,ecModel.getTheme().get(this.subType)),merge(option,this.getDefaultOption()),defaultEmphasis(option,"label",["show"]),this.fillDataTextStyle(option.data),layoutMode&amp;&amp;mergeLayoutParam(option,inputPositionParams,layoutMode)},SeriesModel2.prototype.mergeOption=function(newSeriesOption,ecModel){newSeriesOption=merge(this.option,newSeriesOption,!0),this.fillDataTextStyle(newSeriesOption.data);var layoutMode=fetchLayoutMode(this);layoutMode&amp;&amp;mergeLayoutParam(this.option,newSeriesOption,layoutMode);var sourceManager=inner$k(this).sourceManager;sourceManager.dirty(),sourceManager.prepareSource();var data=this.getInitialData(newSeriesOption,ecModel);wrapData(data,this),this.dataTask.dirty(),this.dataTask.context.data=data,inner$k(this).dataBeforeProcessed=data,autoSeriesName(this),this._initSelectedMapFromData(data)},SeriesModel2.prototype.fillDataTextStyle=function(data){if(data&amp;&amp;!isTypedArray(data))for(var props=["show"],i=0;i&lt;data.length;i++)data[i]&amp;&amp;data[i].label&amp;&amp;defaultEmphasis(data[i],"label",props)},SeriesModel2.prototype.getInitialData=function(option,ecModel){},SeriesModel2.prototype.appendData=function(params){this.getRawData().appendData(params.data)},SeriesModel2.prototype.getData=function(dataType){var task=getCurrentTask(this);if(task){var data=task.context.data;return null!=dataType&amp;&amp;data.getLinkedData?data.getLinkedData(dataType):data}return inner$k(this).data},SeriesModel2.prototype.getAllData=function(){var mainData=this.getData();return mainData&amp;&amp;mainData.getLinkedDataAll?mainData.getLinkedDataAll():[{data:mainData}]},SeriesModel2.prototype.setData=function(data){var task=getCurrentTask(this);if(task){var context=task.context;context.outputData=data,task!==this.dataTask&amp;&amp;(context.data=data)}inner$k(this).data=data},SeriesModel2.prototype.getEncode=function(){var encode=this.get("encode",!0);if(encode)return createHashMap(encode)},SeriesModel2.prototype.getSourceManager=function(){return inner$k(this).sourceManager},SeriesModel2.prototype.getSource=function(){return this.getSourceManager().getSource()},SeriesModel2.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},SeriesModel2.prototype.getColorBy=function(){return this.get("colorBy")||"series"},SeriesModel2.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},SeriesModel2.prototype.getBaseAxis=function(){var coordSys=this.coordinateSystem;return coordSys&amp;&amp;coordSys.getBaseAxis&amp;&amp;coordSys.getBaseAxis()},SeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){return defaultSeriesFormatTooltip({series:this,dataIndex:dataIndex,multipleSeries:multipleSeries})},SeriesModel2.prototype.isAnimationEnabled=function(){var ecModel=this.ecModel;if(env.node&amp;&amp;(!ecModel||!ecModel.ssr))return!1;var animationEnabled=this.getShallow("animation");return animationEnabled&amp;&amp;this.getData().count()&gt;this.getShallow("animationThreshold")&amp;&amp;(animationEnabled=!1),!!animationEnabled},SeriesModel2.prototype.restoreData=function(){this.dataTask.dirty()},SeriesModel2.prototype.getColorFromPalette=function(name,scope,requestColorNum){var ecModel=this.ecModel,color2=PaletteMixin.prototype.getColorFromPalette.call(this,name,scope,requestColorNum);return color2||(color2=ecModel.getColorFromPalette(name,scope,requestColorNum)),color2},SeriesModel2.prototype.coordDimToDataDim=function(coordDim){return this.getRawData().mapDimensionsAll(coordDim)},SeriesModel2.prototype.getProgressive=function(){return this.get("progressive")},SeriesModel2.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},SeriesModel2.prototype.select=function(innerDataIndices,dataType){this._innerSelect(this.getData(dataType),innerDataIndices)},SeriesModel2.prototype.unselect=function(innerDataIndices,dataType){var selectedMap=this.option.selectedMap;if(selectedMap){var selectedMode=this.option.selectedMode,data=this.getData(dataType);if("series"===selectedMode||"all"===selectedMap)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var i=0;i&lt;innerDataIndices.length;i++){var nameOrId=getSelectionKey(data,innerDataIndices[i]);selectedMap[nameOrId]=!1,this._selectedDataIndicesMap[nameOrId]=-1}}},SeriesModel2.prototype.toggleSelect=function(innerDataIndices,dataType){for(var tmpArr2=[],i=0;i&lt;innerDataIndices.length;i++)tmpArr2[0]=innerDataIndices[i],this.isSelected(innerDataIndices[i],dataType)?this.unselect(tmpArr2,dataType):this.select(tmpArr2,dataType)},SeriesModel2.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var selectedDataIndicesMap=this._selectedDataIndicesMap,nameOrIds=keys(selectedDataIndicesMap),dataIndices=[],i=0;i&lt;nameOrIds.length;i++){var dataIndex=selectedDataIndicesMap[nameOrIds[i]];dataIndex&gt;=0&amp;&amp;dataIndices.push(dataIndex)}return dataIndices},SeriesModel2.prototype.isSelected=function(dataIndex,dataType){var selectedMap=this.option.selectedMap;if(!selectedMap)return!1;var data=this.getData(dataType);return("all"===selectedMap||selectedMap[getSelectionKey(data,dataIndex)])&amp;&amp;!data.getItemModel(dataIndex).get(["select","disabled"])},SeriesModel2.prototype.isUniversalTransitionEnabled=function(){if(this.__universalTransitionEnabled)return!0;var universalTransitionOpt=this.option.universalTransition;return!!universalTransitionOpt&amp;&amp;(!0===universalTransitionOpt||universalTransitionOpt&amp;&amp;universalTransitionOpt.enabled)},SeriesModel2.prototype._innerSelect=function(data,innerDataIndices){var _a2,_b2,option=this.option,selectedMode=option.selectedMode,len2=innerDataIndices.length;if(selectedMode&amp;&amp;len2)if("series"===selectedMode)option.selectedMap="all";else if("multiple"===selectedMode){isObject$3(option.selectedMap)||(option.selectedMap={});for(var selectedMap=option.selectedMap,i=0;i&lt;len2;i++){var dataIndex=innerDataIndices[i];selectedMap[nameOrId=getSelectionKey(data,dataIndex)]=!0,this._selectedDataIndicesMap[nameOrId]=data.getRawIndex(dataIndex)}}else if("single"===selectedMode||!0===selectedMode){var lastDataIndex=innerDataIndices[len2-1],nameOrId=getSelectionKey(data,lastDataIndex);option.selectedMap=((_a2={})[nameOrId]=!0,_a2),this._selectedDataIndicesMap=((_b2={})[nameOrId]=data.getRawIndex(lastDataIndex),_b2)}},SeriesModel2.prototype._initSelectedMapFromData=function(data){if(!this.option.selectedMap){var dataIndices=[];data.hasItemOption&amp;&amp;data.each(function(idx){var rawItem=data.getRawDataItem(idx);rawItem&amp;&amp;rawItem.selected&amp;&amp;dataIndices.push(idx)}),dataIndices.length&gt;0&amp;&amp;this._innerSelect(data,dataIndices)}},SeriesModel2.registerClass=function(clz){return ComponentModel.registerClass(clz)},SeriesModel2.protoInitialize=((proto2=SeriesModel2.prototype).type="series.__base__",proto2.seriesIndex=0,proto2.ignoreStyleOnData=!1,proto2.hasSymbolVisual=!1,proto2.defaultSymbol="circle",proto2.visualStyleAccessPath="itemStyle",void(proto2.visualDrawType="fill")),SeriesModel2}(ComponentModel);function autoSeriesName(seriesModel){var name=seriesModel.name;isNameSpecified(seriesModel)||(seriesModel.name=function getSeriesAutoName(seriesModel){var data=seriesModel.getRawData(),dataDims=data.mapDimensionsAll("seriesName"),nameArr=[];return each$f(dataDims,function(dataDim){var dimInfo=data.getDimensionInfo(dataDim);dimInfo.displayName&amp;&amp;nameArr.push(dimInfo.displayName)}),nameArr.join(" ")}(seriesModel)||name)}function dataTaskCount(context){return context.model.getRawData().count()}function dataTaskReset(context){var seriesModel=context.model;return seriesModel.setData(seriesModel.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(param,context){context.outputData&amp;&amp;param.end&gt;context.outputData.count()&amp;&amp;context.model.getRawData().cloneShallow(context.outputData)}function wrapData(data,seriesModel){each$f(concatArray(data.CHANGABLE_METHODS,data.DOWNSAMPLE_METHODS),function(methodName){data.wrapMethod(methodName,curry$1(onDataChange,seriesModel))})}function onDataChange(seriesModel,newList){var task=getCurrentTask(seriesModel);return task&amp;&amp;task.setOutputEnd((newList||this).count()),newList}function getCurrentTask(seriesModel){var scheduler=(seriesModel.ecModel||{}).scheduler,pipeline=scheduler&amp;&amp;scheduler.getPipeline(seriesModel.uid);if(pipeline){var task=pipeline.currentTask;if(task){var agentStubMap=task.agentStubMap;agentStubMap&amp;&amp;(task=agentStubMap.get(seriesModel.uid))}return task}}mixin(SeriesModel,DataFormatMixin),mixin(SeriesModel,PaletteMixin),mountExtend(SeriesModel,ComponentModel);var ComponentView=function(){function ComponentView2(){this.group=new Group$3,this.uid=getUID("viewComponent")}return ComponentView2.prototype.init=function(ecModel,api){},ComponentView2.prototype.render=function(model,ecModel,api,payload){},ComponentView2.prototype.dispose=function(ecModel,api){},ComponentView2.prototype.updateView=function(model,ecModel,api,payload){},ComponentView2.prototype.updateLayout=function(model,ecModel,api,payload){},ComponentView2.prototype.updateVisual=function(model,ecModel,api,payload){},ComponentView2.prototype.toggleBlurSeries=function(seriesModels,isBlur,ecModel){},ComponentView2.prototype.eachRendered=function(cb){var group=this.group;group&amp;&amp;group.traverse(cb)},ComponentView2}();function createRenderPlanner(){var inner2=makeInner();return function(seriesModel){var fields=inner2(seriesModel),pipelineContext=seriesModel.pipelineContext,originalLarge=!!fields.large,originalProgressive=!!fields.progressiveRender,large=fields.large=!(!pipelineContext||!pipelineContext.large),progressive=fields.progressiveRender=!(!pipelineContext||!pipelineContext.progressiveRender);return!(originalLarge===large&amp;&amp;originalProgressive===progressive)&amp;&amp;"reset"}}enableClassExtend(ComponentView),enableClassManagement(ComponentView);var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function ChartView2(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return ChartView2.prototype.init=function(ecModel,api){},ChartView2.prototype.render=function(seriesModel,ecModel,api,payload){},ChartView2.prototype.highlight=function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(payload&amp;&amp;payload.dataType);data&amp;&amp;toggleHighlight(data,payload,"emphasis")},ChartView2.prototype.downplay=function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(payload&amp;&amp;payload.dataType);data&amp;&amp;toggleHighlight(data,payload,"normal")},ChartView2.prototype.remove=function(ecModel,api){this.group.removeAll()},ChartView2.prototype.dispose=function(ecModel,api){},ChartView2.prototype.updateView=function(seriesModel,ecModel,api,payload){this.render(seriesModel,ecModel,api,payload)},ChartView2.prototype.updateLayout=function(seriesModel,ecModel,api,payload){this.render(seriesModel,ecModel,api,payload)},ChartView2.prototype.updateVisual=function(seriesModel,ecModel,api,payload){this.render(seriesModel,ecModel,api,payload)},ChartView2.prototype.eachRendered=function(cb){traverseElements(this.group,cb)},ChartView2.markUpdateMethod=function(payload,methodName){inner$j(payload).updateMethod=methodName},ChartView2.protoInitialize=void(ChartView2.prototype.type="chart"),ChartView2}();function elSetState(el,state,highlightDigit){el&amp;&amp;isHighDownDispatcher(el)&amp;&amp;("emphasis"===state?enterEmphasis:leaveEmphasis)(el,highlightDigit)}function toggleHighlight(data,payload,state){var dataIndex=queryDataIndex(data,payload),highlightDigit=payload&amp;&amp;null!=payload.highlightKey?function getHighlightDigit(highlightKey){var highlightDigit=_highlightKeyMap[highlightKey];return null==highlightDigit&amp;&amp;_highlightNextDigit&lt;=32&amp;&amp;(highlightDigit=_highlightKeyMap[highlightKey]=_highlightNextDigit++),highlightDigit}(payload.highlightKey):null;null!=dataIndex?each$f(normalizeToArray(dataIndex),function(dataIdx){elSetState(data.getItemGraphicEl(dataIdx),state,highlightDigit)}):data.eachItemGraphicEl(function(el){elSetState(el,state,highlightDigit)})}function renderTaskPlan(context){return renderPlanner(context.model)}function renderTaskReset(context){var seriesModel=context.model,ecModel=context.ecModel,api=context.api,payload=context.payload,progressiveRender=seriesModel.pipelineContext.progressiveRender,view=context.view,updateMethod=payload&amp;&amp;inner$j(payload).updateMethod,methodName=progressiveRender?"incrementalPrepareRender":updateMethod&amp;&amp;view[updateMethod]?updateMethod:"render";return"render"!==methodName&amp;&amp;view[methodName](seriesModel,ecModel,api,payload),progressMethodMap[methodName]}enableClassExtend(ChartView),enableClassManagement(ChartView);var progressMethodMap={incrementalPrepareRender:{progress:function(params,context){context.view.incrementalRender(params,context.model,context.ecModel,context.api,context.payload)}},render:{forceFirstProgress:!0,progress:function(params,context){context.view.render(context.model,context.ecModel,context.api,context.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate";function throttle(fn,delay,debounce){var currCall,diff,scope,args,debounceNextCall,lastCall=0,lastExec=0,timer=null;function exec(){lastExec=(new Date).getTime(),timer=null,fn.apply(scope,args||[])}delay=delay||0;var cb=function(){for(var cbArgs=[],_i=0;_i&lt;arguments.length;_i++)cbArgs[_i]=arguments[_i];currCall=(new Date).getTime(),scope=this,args=cbArgs;var thisDelay=debounceNextCall||delay,thisDebounce=debounceNextCall||debounce;debounceNextCall=null,diff=currCall-(thisDebounce?lastCall:lastExec)-thisDelay,clearTimeout(timer),thisDebounce?timer=setTimeout(exec,thisDelay):diff&gt;=0?exec():timer=setTimeout(exec,-diff),lastCall=currCall};return cb.clear=function(){timer&amp;&amp;(clearTimeout(timer),timer=null)},cb.debounceNextCall=function(debounceDelay){debounceNextCall=debounceDelay},cb}function createOrUpdate(obj,fnAttr,rate,throttleType){var fn=obj[fnAttr];if(fn){var originFn=fn[ORIGIN_METHOD]||fn,lastThrottleType=fn["\0__throttleType"];if(fn[RATE]!==rate||lastThrottleType!==throttleType){if(null==rate||!throttleType)return obj[fnAttr]=originFn;(fn=obj[fnAttr]=throttle(originFn,rate,"debounce"===throttleType))[ORIGIN_METHOD]=originFn,fn["\0__throttleType"]=throttleType,fn[RATE]=rate}return fn}}function clear$1(obj,fnAttr){var fn=obj[fnAttr];fn&amp;&amp;fn[ORIGIN_METHOD]&amp;&amp;(fn.clear&amp;&amp;fn.clear(),obj[fnAttr]=fn[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(seriesModel,stylePath){var styleMapper=seriesModel.visualStyleMapper||defaultStyleMappers[stylePath];return styleMapper||(console.warn("Unknown style type '"+stylePath+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(seriesModel,stylePath){var colorKey=seriesModel.visualDrawType||defaultColorKey[stylePath];return colorKey||(console.warn("Unknown style type '"+stylePath+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(seriesModel,ecModel){var data=seriesModel.getData(),stylePath=seriesModel.visualStyleAccessPath||"itemStyle",styleModel=seriesModel.getModel(stylePath),globalStyle=getStyleMapper(seriesModel,stylePath)(styleModel),decalOption=styleModel.getShallow("decal");decalOption&amp;&amp;(data.setVisual("decal",decalOption),decalOption.dirty=!0);var colorKey=getDefaultColorKey(seriesModel,stylePath),color2=globalStyle[colorKey],colorCallback=isFunction(color2)?color2:null,hasAutoColor="auto"===globalStyle.fill||"auto"===globalStyle.stroke;if(!globalStyle[colorKey]||colorCallback||hasAutoColor){var colorPalette2=seriesModel.getColorFromPalette(seriesModel.name,null,ecModel.getSeriesCount());globalStyle[colorKey]||(globalStyle[colorKey]=colorPalette2,data.setVisual("colorFromPalette",!0)),globalStyle.fill="auto"===globalStyle.fill||isFunction(globalStyle.fill)?colorPalette2:globalStyle.fill,globalStyle.stroke="auto"===globalStyle.stroke||isFunction(globalStyle.stroke)?colorPalette2:globalStyle.stroke}if(data.setVisual("style",globalStyle),data.setVisual("drawType",colorKey),!ecModel.isSeriesFiltered(seriesModel)&amp;&amp;colorCallback)return data.setVisual("colorFromPalette",!1),{dataEach:function(data2,idx){var dataParams=seriesModel.getDataParams(idx),itemStyle=extend({},globalStyle);itemStyle[colorKey]=colorCallback(dataParams),data2.setItemVisual(idx,"style",itemStyle)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(seriesModel,ecModel){if(!seriesModel.ignoreStyleOnData&amp;&amp;!ecModel.isSeriesFiltered(seriesModel)){var data=seriesModel.getData(),stylePath=seriesModel.visualStyleAccessPath||"itemStyle",getStyle2=getStyleMapper(seriesModel,stylePath),colorKey=data.getVisual("drawType");return{dataEach:data.hasItemOption?function(data2,idx){var rawItem=data2.getRawDataItem(idx);if(rawItem&amp;&amp;rawItem[stylePath]){sharedModel.option=rawItem[stylePath];var style=getStyle2(sharedModel);extend(data2.ensureUniqueItemVisual(idx,"style"),style),sharedModel.option.decal&amp;&amp;(data2.setItemVisual(idx,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),colorKey in style&amp;&amp;data2.setItemVisual(idx,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(ecModel){var paletteScopeGroupByType=createHashMap();ecModel.eachSeries(function(seriesModel){var colorBy=seriesModel.getColorBy();if(!seriesModel.isColorBySeries()){var key=seriesModel.type+"-"+colorBy,colorScope=paletteScopeGroupByType.get(key);colorScope||(colorScope={},paletteScopeGroupByType.set(key,colorScope)),inner$i(seriesModel).scope=colorScope}}),ecModel.eachSeries(function(seriesModel){if(!seriesModel.isColorBySeries()&amp;&amp;!ecModel.isSeriesFiltered(seriesModel)){var dataAll=seriesModel.getRawData(),idxMap={},data=seriesModel.getData(),colorScope=inner$i(seriesModel).scope,stylePath=seriesModel.visualStyleAccessPath||"itemStyle",colorKey=getDefaultColorKey(seriesModel,stylePath);data.each(function(idx){var rawIdx=data.getRawIndex(idx);idxMap[rawIdx]=idx}),dataAll.each(function(rawIdx){var idx=idxMap[rawIdx];if(data.getItemVisual(idx,"colorFromPalette")){var itemStyle=data.ensureUniqueItemVisual(idx,"style"),name_1=dataAll.getName(rawIdx)||rawIdx+"",dataCount=dataAll.count();itemStyle[colorKey]=seriesModel.getColorFromPalette(name_1,colorScope,dataCount)}})}})}},PI$5=Math.PI;var Scheduler=function(){function Scheduler2(ecInstance,api,dataProcessorHandlers,visualHandlers){this._stageTaskMap=createHashMap(),this.ecInstance=ecInstance,this.api=api,dataProcessorHandlers=this._dataProcessorHandlers=dataProcessorHandlers.slice(),visualHandlers=this._visualHandlers=visualHandlers.slice(),this._allHandlers=dataProcessorHandlers.concat(visualHandlers)}return Scheduler2.prototype.restoreData=function(ecModel,payload){ecModel.restoreData(payload),this._stageTaskMap.each(function(taskRecord){var overallTask=taskRecord.overallTask;overallTask&amp;&amp;overallTask.dirty()})},Scheduler2.prototype.getPerformArgs=function(task,isBlock){if(task.__pipeline){var pipeline=this._pipelineMap.get(task.__pipeline.id),pCtx=pipeline.context,step=!isBlock&amp;&amp;pipeline.progressiveEnabled&amp;&amp;(!pCtx||pCtx.progressiveRender)&amp;&amp;task.__idxInPipeline&gt;pipeline.blockIndex?pipeline.step:null,modDataCount=pCtx&amp;&amp;pCtx.modDataCount;return{step:step,modBy:null!=modDataCount?Math.ceil(modDataCount/step):null,modDataCount:modDataCount}}},Scheduler2.prototype.getPipeline=function(pipelineId){return this._pipelineMap.get(pipelineId)},Scheduler2.prototype.updateStreamModes=function(seriesModel,view){var pipeline=this._pipelineMap.get(seriesModel.uid),dataLen=seriesModel.getData().count(),progressiveRender=pipeline.progressiveEnabled&amp;&amp;view.incrementalPrepareRender&amp;&amp;dataLen&gt;=pipeline.threshold,large=seriesModel.get("large")&amp;&amp;dataLen&gt;=seriesModel.get("largeThreshold"),modDataCount="mod"===seriesModel.get("progressiveChunkMode")?dataLen:null;seriesModel.pipelineContext=pipeline.context={progressiveRender:progressiveRender,modDataCount:modDataCount,large:large}},Scheduler2.prototype.restorePipelines=function(ecModel){var scheduler=this,pipelineMap=scheduler._pipelineMap=createHashMap();ecModel.eachSeries(function(seriesModel){var progressive=seriesModel.getProgressive(),pipelineId=seriesModel.uid;pipelineMap.set(pipelineId,{id:pipelineId,head:null,tail:null,threshold:seriesModel.getProgressiveThreshold(),progressiveEnabled:progressive&amp;&amp;!(seriesModel.preventIncremental&amp;&amp;seriesModel.preventIncremental()),blockIndex:-1,step:Math.round(progressive||700),count:0}),scheduler._pipe(seriesModel,seriesModel.dataTask)})},Scheduler2.prototype.prepareStageTasks=function(){var stageTaskMap=this._stageTaskMap,ecModel=this.api.getModel(),api=this.api;each$f(this._allHandlers,function(handler){var record=stageTaskMap.get(handler.uid)||stageTaskMap.set(handler.uid,{});assert(!(handler.reset&amp;&amp;handler.overallReset),""),handler.reset&amp;&amp;this._createSeriesStageTask(handler,record,ecModel,api),handler.overallReset&amp;&amp;this._createOverallStageTask(handler,record,ecModel,api)},this)},Scheduler2.prototype.prepareView=function(view,model,ecModel,api){var renderTask=view.renderTask,context=renderTask.context;context.model=model,context.ecModel=ecModel,context.api=api,renderTask.__block=!view.incrementalPrepareRender,this._pipe(model,renderTask)},Scheduler2.prototype.performDataProcessorTasks=function(ecModel,payload){this._performStageTasks(this._dataProcessorHandlers,ecModel,payload,{block:!0})},Scheduler2.prototype.performVisualTasks=function(ecModel,payload,opt){this._performStageTasks(this._visualHandlers,ecModel,payload,opt)},Scheduler2.prototype._performStageTasks=function(stageHandlers,ecModel,payload,opt){opt=opt||{};var unfinished=!1,scheduler=this;function needSetDirty(opt2,task){return opt2.setDirty&amp;&amp;(!opt2.dirtyMap||opt2.dirtyMap.get(task.__pipeline.id))}each$f(stageHandlers,function(stageHandler,idx){if(!opt.visualType||opt.visualType===stageHandler.visualType){var stageHandlerRecord=scheduler._stageTaskMap.get(stageHandler.uid),seriesTaskMap=stageHandlerRecord.seriesTaskMap,overallTask=stageHandlerRecord.overallTask;if(overallTask){var overallNeedDirty_1,agentStubMap=overallTask.agentStubMap;agentStubMap.each(function(stub){needSetDirty(opt,stub)&amp;&amp;(stub.dirty(),overallNeedDirty_1=!0)}),overallNeedDirty_1&amp;&amp;overallTask.dirty(),scheduler.updatePayload(overallTask,payload);var performArgs_1=scheduler.getPerformArgs(overallTask,opt.block);agentStubMap.each(function(stub){stub.perform(performArgs_1)}),overallTask.perform(performArgs_1)&amp;&amp;(unfinished=!0)}else seriesTaskMap&amp;&amp;seriesTaskMap.each(function(task,pipelineId){needSetDirty(opt,task)&amp;&amp;task.dirty();var performArgs=scheduler.getPerformArgs(task,opt.block);performArgs.skip=!stageHandler.performRawSeries&amp;&amp;ecModel.isSeriesFiltered(task.context.model),scheduler.updatePayload(task,payload),task.perform(performArgs)&amp;&amp;(unfinished=!0)})}}),this.unfinished=unfinished||this.unfinished},Scheduler2.prototype.performSeriesTasks=function(ecModel){var unfinished;ecModel.eachSeries(function(seriesModel){unfinished=seriesModel.dataTask.perform()||unfinished}),this.unfinished=unfinished||this.unfinished},Scheduler2.prototype.plan=function(){this._pipelineMap.each(function(pipeline){var task=pipeline.tail;do{if(task.__block){pipeline.blockIndex=task.__idxInPipeline;break}task=task.getUpstream()}while(task)})},Scheduler2.prototype.updatePayload=function(task,payload){"remain"!==payload&amp;&amp;(task.context.payload=payload)},Scheduler2.prototype._createSeriesStageTask=function(stageHandler,stageHandlerRecord,ecModel,api){var scheduler=this,oldSeriesTaskMap=stageHandlerRecord.seriesTaskMap,newSeriesTaskMap=stageHandlerRecord.seriesTaskMap=createHashMap(),seriesType2=stageHandler.seriesType,getTargetSeries=stageHandler.getTargetSeries;function create2(seriesModel){var pipelineId=seriesModel.uid,task=newSeriesTaskMap.set(pipelineId,oldSeriesTaskMap&amp;&amp;oldSeriesTaskMap.get(pipelineId)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));task.context={model:seriesModel,ecModel:ecModel,api:api,useClearVisual:stageHandler.isVisual&amp;&amp;!stageHandler.isLayout,plan:stageHandler.plan,reset:stageHandler.reset,scheduler:scheduler},scheduler._pipe(seriesModel,task)}stageHandler.createOnAllSeries?ecModel.eachRawSeries(create2):seriesType2?ecModel.eachRawSeriesByType(seriesType2,create2):getTargetSeries&amp;&amp;getTargetSeries(ecModel,api).each(create2)},Scheduler2.prototype._createOverallStageTask=function(stageHandler,stageHandlerRecord,ecModel,api){var scheduler=this,overallTask=stageHandlerRecord.overallTask=stageHandlerRecord.overallTask||createTask({reset:overallTaskReset});overallTask.context={ecModel:ecModel,api:api,overallReset:stageHandler.overallReset,scheduler:scheduler};var oldAgentStubMap=overallTask.agentStubMap,newAgentStubMap=overallTask.agentStubMap=createHashMap(),seriesType2=stageHandler.seriesType,getTargetSeries=stageHandler.getTargetSeries,overallProgress=!0,shouldOverallTaskDirty=!1;function createStub(seriesModel){var pipelineId=seriesModel.uid,stub=newAgentStubMap.set(pipelineId,oldAgentStubMap&amp;&amp;oldAgentStubMap.get(pipelineId)||(shouldOverallTaskDirty=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));stub.context={model:seriesModel,overallProgress:overallProgress},stub.agent=overallTask,stub.__block=overallProgress,scheduler._pipe(seriesModel,stub)}assert(!stageHandler.createOnAllSeries,""),seriesType2?ecModel.eachRawSeriesByType(seriesType2,createStub):getTargetSeries?getTargetSeries(ecModel,api).each(createStub):(overallProgress=!1,each$f(ecModel.getSeries(),createStub)),shouldOverallTaskDirty&amp;&amp;overallTask.dirty()},Scheduler2.prototype._pipe=function(seriesModel,task){var pipelineId=seriesModel.uid,pipeline=this._pipelineMap.get(pipelineId);!pipeline.head&amp;&amp;(pipeline.head=task),pipeline.tail&amp;&amp;pipeline.tail.pipe(task),pipeline.tail=task,task.__idxInPipeline=pipeline.count++,task.__pipeline=pipeline},Scheduler2.wrapStageHandler=function(stageHandler,visualType){return isFunction(stageHandler)&amp;&amp;(stageHandler={overallReset:stageHandler,seriesType:detectSeriseType(stageHandler)}),stageHandler.uid=getUID("stageHandler"),visualType&amp;&amp;(stageHandler.visualType=visualType),stageHandler},Scheduler2}();function overallTaskReset(context){context.overallReset(context.ecModel,context.api,context.payload)}function stubReset(context){return context.overallProgress&amp;&amp;stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&amp;&amp;this.agent.dirty()}function seriesTaskPlan(context){return context.plan?context.plan(context.model,context.ecModel,context.api,context.payload):null}function seriesTaskReset(context){context.useClearVisual&amp;&amp;context.data.clearAllVisual();var resetDefines=context.resetDefines=normalizeToArray(context.reset(context.model,context.ecModel,context.api,context.payload));return resetDefines.length&gt;1?map$1(resetDefines,function(v,idx){return makeSeriesTaskProgress(idx)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(resetDefineIdx){return function(params,context){var data=context.data,resetDefine=context.resetDefines[resetDefineIdx];if(resetDefine&amp;&amp;resetDefine.dataEach)for(var i=params.start;i&lt;params.end;i++)resetDefine.dataEach(data,i);else resetDefine&amp;&amp;resetDefine.progress&amp;&amp;resetDefine.progress(params,data)}}function seriesTaskCount(context){return context.data.count()}function detectSeriseType(legacyFunc){seriesType=null;try{legacyFunc(ecModelMock,apiMock)}catch(e2){}return seriesType}var seriesType,ecModelMock={},apiMock={};function mockMethods(target,Clz){for(var name_1 in Clz.prototype)target[name_1]=noop}mockMethods(ecModelMock,GlobalModel),mockMethods(apiMock,ExtensionAPI),ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(type){seriesType=type},ecModelMock.eachComponent=function(cond){"series"===cond.mainType&amp;&amp;cond.subType&amp;&amp;(seriesType=cond.subType)};var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor:"#100C2A",axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:"#B9B8CE"},pageTextStyle:{color:"#B9B8CE"}},textStyle:{color:"#B9B8CE"},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:"#B9B8CE"}},dataZoom:{borderColor:"#71708A",textStyle:{color:"#B9B8CE"},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:"#B9B8CE"}},timeline:{lineStyle:{color:"#B9B8CE"},label:{color:"#B9B8CE"},controlStyle:{color:"#B9B8CE",borderColor:"#B9B8CE"}},calendar:{itemStyle:{color:"#100C2A"},dayLabel:{color:"#B9B8CE"},monthLabel:{color:"#B9B8CE"},yearLabel:{color:"#B9B8CE"}},timeAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},logAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},valueAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},categoryAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:"#B9B8CE"},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:"#B9B8CE"},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function ECEventProcessor2(){}return ECEventProcessor2.prototype.normalizeQuery=function(query){var cptQuery={},dataQuery={},otherQuery={};if(isString(query)){var condCptType=parseClassType(query);cptQuery.mainType=condCptType.main||null,cptQuery.subType=condCptType.sub||null}else{var suffixes_1=["Index","Name","Id"],dataKeys_1={name:1,dataIndex:1,dataType:1};each$f(query,function(val,key){for(var reserved=!1,i=0;i&lt;suffixes_1.length;i++){var propSuffix=suffixes_1[i],suffixPos=key.lastIndexOf(propSuffix);if(suffixPos&gt;0&amp;&amp;suffixPos===key.length-propSuffix.length){var mainType=key.slice(0,suffixPos);"data"!==mainType&amp;&amp;(cptQuery.mainType=mainType,cptQuery[propSuffix.toLowerCase()]=val,reserved=!0)}}dataKeys_1.hasOwnProperty(key)&amp;&amp;(dataQuery[key]=val,reserved=!0),reserved||(otherQuery[key]=val)})}return{cptQuery:cptQuery,dataQuery:dataQuery,otherQuery:otherQuery}},ECEventProcessor2.prototype.filter=function(eventType,query){var eventInfo=this.eventInfo;if(!eventInfo)return!0;var targetEl=eventInfo.targetEl,packedEvent=eventInfo.packedEvent,model=eventInfo.model,view=eventInfo.view;if(!model||!view)return!0;var cptQuery=query.cptQuery,dataQuery=query.dataQuery;return check(cptQuery,model,"mainType")&amp;&amp;check(cptQuery,model,"subType")&amp;&amp;check(cptQuery,model,"index","componentIndex")&amp;&amp;check(cptQuery,model,"name")&amp;&amp;check(cptQuery,model,"id")&amp;&amp;check(dataQuery,packedEvent,"name")&amp;&amp;check(dataQuery,packedEvent,"dataIndex")&amp;&amp;check(dataQuery,packedEvent,"dataType")&amp;&amp;(!view.filterForExposedEvent||view.filterForExposedEvent(eventType,query.otherQuery,targetEl,packedEvent));function check(query2,host,prop,propOnHost){return null==query2[prop]||host[propOnHost||prop]===query2[prop]}},ECEventProcessor2.prototype.afterTrigger=function(){this.eventInfo=null},ECEventProcessor2}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(seriesModel,ecModel){var data=seriesModel.getData();if(seriesModel.legendIcon&amp;&amp;data.setVisual("legendIcon",seriesModel.legendIcon),seriesModel.hasSymbolVisual){for(var symbolOptions={},symbolOptionsCb={},hasCallback=!1,i=0;i&lt;SYMBOL_PROPS_WITH_CB.length;i++){var symbolPropName=SYMBOL_PROPS_WITH_CB[i],val=seriesModel.get(symbolPropName);isFunction(val)?(hasCallback=!0,symbolOptionsCb[symbolPropName]=val):symbolOptions[symbolPropName]=val}if(symbolOptions.symbol=symbolOptions.symbol||seriesModel.defaultSymbol,data.setVisual(extend({legendIcon:seriesModel.legendIcon||symbolOptions.symbol,symbolKeepAspect:seriesModel.get("symbolKeepAspect")},symbolOptions)),!ecModel.isSeriesFiltered(seriesModel)){var symbolPropsCb=keys(symbolOptionsCb);return{dataEach:hasCallback?function dataEach(data2,idx){for(var rawValue=seriesModel.getRawValue(idx),params=seriesModel.getDataParams(idx),i2=0;i2&lt;symbolPropsCb.length;i2++){var symbolPropName2=symbolPropsCb[i2];data2.setItemVisual(idx,symbolPropName2,symbolOptionsCb[symbolPropName2](rawValue,params))}}:null}}}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(seriesModel,ecModel){if(seriesModel.hasSymbolVisual&amp;&amp;!ecModel.isSeriesFiltered(seriesModel))return{dataEach:seriesModel.getData().hasItemOption?function dataEach(data2,idx){for(var itemModel=data2.getItemModel(idx),i=0;i&lt;SYMBOL_PROPS.length;i++){var symbolPropName=SYMBOL_PROPS[i],val=itemModel.getShallow(symbolPropName,!0);null!=val&amp;&amp;data2.setItemVisual(idx,symbolPropName,val)}}:null}}};function getItemVisualFromData(data,dataIndex,key){switch(key){case"color":return data.getItemVisual(dataIndex,"style")[data.getVisual("drawType")];case"opacity":return data.getItemVisual(dataIndex,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return data.getItemVisual(dataIndex,key)}}function getVisualFromData(data,key){switch(key){case"color":return data.getVisual("style")[data.getVisual("drawType")];case"opacity":return data.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return data.getVisual(key)}}function setItemVisualFromData(data,dataIndex,key,value){switch(key){case"color":data.ensureUniqueItemVisual(dataIndex,"style")[data.getVisual("drawType")]=value,data.setItemVisual(dataIndex,"colorFromPalette",!1);break;case"opacity":data.ensureUniqueItemVisual(dataIndex,"style").opacity=value;break;case"symbol":case"symbolSize":case"liftZ":data.setItemVisual(dataIndex,key,value)}}function createLegacyDataSelectAction(seriesType2,ecRegisterAction){function getSeriesIndices(ecModel,payload){var seriesIndices=[];return ecModel.eachComponent({mainType:"series",subType:seriesType2,query:payload},function(seriesModel){seriesIndices.push(seriesModel.seriesIndex)}),seriesIndices}each$f([[seriesType2+"ToggleSelect","toggleSelect"],[seriesType2+"Select","select"],[seriesType2+"UnSelect","unselect"]],function(eventsMap){ecRegisterAction(eventsMap[0],function(payload,ecModel,api){payload=extend({},payload),api.dispatchAction(extend(payload,{type:eventsMap[1],seriesIndex:getSeriesIndices(ecModel,payload)}))})})}function handleSeriesLegacySelectEvents(type,eventPostfix,ecIns,ecModel,payload){var legacyEventName=type+eventPostfix;ecIns.isSilent(legacyEventName)||ecModel.eachComponent({mainType:"series",subType:"pie"},function(seriesModel){for(var seriesIndex=seriesModel.seriesIndex,selectedMap=seriesModel.option.selectedMap,selected=payload.selected,i=0;i&lt;selected.length;i++)if(selected[i].seriesIndex===seriesIndex){var data=seriesModel.getData(),dataIndex=queryDataIndex(data,payload.fromActionPayload);ecIns.trigger(legacyEventName,{type:legacyEventName,seriesId:seriesModel.id,name:isArray$1(dataIndex)?data.getName(dataIndex[0]):data.getName(dataIndex),selected:isString(selectedMap)?selectedMap:extend({},selectedMap)})}})}function findEventDispatcher(target,det,returnFirstMatch){for(var found;target&amp;&amp;(!det(target)||(found=target,!returnFirstMatch));)target=target.__hostTarget||target.parent;return found}var wmUniqueIndex=Math.round(9*Math.random()),supportDefineProperty="function"==typeof Object.defineProperty,WeakMap=function(){function WeakMap2(){this._id="__ec_inner_"+wmUniqueIndex++}return WeakMap2.prototype.get=function(key){return this._guard(key)[this._id]},WeakMap2.prototype.set=function(key,value){var target=this._guard(key);return supportDefineProperty?Object.defineProperty(target,this._id,{value:value,enumerable:!1,configurable:!0}):target[this._id]=value,this},WeakMap2.prototype.delete=function(key){return!!this.has(key)&amp;&amp;(delete this._guard(key)[this._id],!0)},WeakMap2.prototype.has=function(key){return!!this._guard(key)[this._id]},WeakMap2.prototype._guard=function(key){if(key!==Object(key))throw TypeError("Value of WeakMap is not a non-null object.");return key},WeakMap2}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx,cy=shape.cy,width=shape.width/2,height=shape.height/2;path.moveTo(cx,cy-height),path.lineTo(cx+width,cy+height),path.lineTo(cx-width,cy+height),path.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx,cy=shape.cy,width=shape.width/2,height=shape.height/2;path.moveTo(cx,cy-height),path.lineTo(cx+width,cy),path.lineTo(cx,cy+height),path.lineTo(cx-width,cy),path.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(path,shape){var x=shape.x,y=shape.y,w=shape.width/5*3,h=Math.max(w,shape.height),r=w/2,dy=r*r/(h-r),cy=y-h+r+dy,angle=Math.asin(dy/r),dx=Math.cos(angle)*r,tanX=Math.sin(angle),tanY=Math.cos(angle),cpLen=.6*r,cpLen2=.7*r;path.moveTo(x-dx,cy+dy),path.arc(x,cy,r,Math.PI-angle,2*Math.PI+angle),path.bezierCurveTo(x+dx-tanX*cpLen,cy+dy+tanY*cpLen,x,y-cpLen2,x,y),path.bezierCurveTo(x,y-cpLen2,x-dx+tanX*cpLen,cy+dy+tanY*cpLen,x-dx,cy+dy),path.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var height=shape.height,width=shape.width,x=shape.x,y=shape.y,dx=width/3*2;ctx.moveTo(x,y),ctx.lineTo(x+dx,y+height),ctx.lineTo(x,y+height/4*3),ctx.lineTo(x-dx,y+height),ctx.lineTo(x,y),ctx.closePath()}}),symbolShapeMakers={line:function(x,y,w,h,shape){shape.x1=x,shape.y1=y+h/2,shape.x2=x+w,shape.y2=y+h/2},rect:function(x,y,w,h,shape){shape.x=x,shape.y=y,shape.width=w,shape.height=h},roundRect:function(x,y,w,h,shape){shape.x=x,shape.y=y,shape.width=w,shape.height=h,shape.r=Math.min(w,h)/4},square:function(x,y,w,h,shape){var size=Math.min(w,h);shape.x=x,shape.y=y,shape.width=size,shape.height=size},circle:function(x,y,w,h,shape){shape.cx=x+w/2,shape.cy=y+h/2,shape.r=Math.min(w,h)/2},diamond:function(x,y,w,h,shape){shape.cx=x+w/2,shape.cy=y+h/2,shape.width=w,shape.height=h},pin:function(x,y,w,h,shape){shape.x=x+w/2,shape.y=y+h/2,shape.width=w,shape.height=h},arrow:function(x,y,w,h,shape){shape.x=x+w/2,shape.y=y+h/2,shape.width=w,shape.height=h},triangle:function(x,y,w,h,shape){shape.cx=x+w/2,shape.cy=y+h/2,shape.width=w,shape.height=h}},symbolBuildProxies={};each$f({line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},function(Ctor,name){symbolBuildProxies[name]=new Ctor});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(out2,config,rect){var res=calculateTextPosition(out2,config,rect),shape=this.shape;return shape&amp;&amp;"pin"===shape.symbolType&amp;&amp;"inside"===config.position&amp;&amp;(res.y=rect.y+.4*rect.height),res},buildPath:function(ctx,shape,inBundle){var symbolType=shape.symbolType;if("none"!==symbolType){var proxySymbol=symbolBuildProxies[symbolType];proxySymbol||(proxySymbol=symbolBuildProxies[symbolType="rect"]),symbolShapeMakers[symbolType](shape.x,shape.y,shape.width,shape.height,proxySymbol.shape),proxySymbol.buildPath(ctx,proxySymbol.shape,inBundle)}}});function symbolPathSetColor(color2,innerColor2){if("image"!==this.type){var symbolStyle=this.style;this.__isEmptyBrush?(symbolStyle.stroke=color2,symbolStyle.fill=innerColor2||"#fff",symbolStyle.lineWidth=2):"line"===this.shape.symbolType?symbolStyle.stroke=color2:symbolStyle.fill=color2,this.markRedraw()}}function createSymbol$1(symbolType,x,y,w,h,color2,keepAspect){var symbolPath,isEmpty=0===symbolType.indexOf("empty");return isEmpty&amp;&amp;(symbolType=symbolType.substr(5,1).toLowerCase()+symbolType.substr(6)),(symbolPath=0===symbolType.indexOf("image://")?makeImage(symbolType.slice(8),new BoundingRect(x,y,w,h),keepAspect?"center":"cover"):0===symbolType.indexOf("path://")?makePath(symbolType.slice(7),{},new BoundingRect(x,y,w,h),keepAspect?"center":"cover"):new SymbolClz({shape:{symbolType:symbolType,x:x,y:y,width:w,height:h}})).__isEmptyBrush=isEmpty,symbolPath.setColor=symbolPathSetColor,color2&amp;&amp;symbolPath.setColor(color2),symbolPath}function normalizeSymbolSize(symbolSize){return isArray$1(symbolSize)||(symbolSize=[+symbolSize,+symbolSize]),[symbolSize[0]||0,symbolSize[1]||0]}function normalizeSymbolOffset(symbolOffset,symbolSize){if(null!=symbolOffset)return isArray$1(symbolOffset)||(symbolOffset=[symbolOffset,symbolOffset]),[parsePercent(symbolOffset[0],symbolSize[0])||0,parsePercent(retrieve2(symbolOffset[1],symbolOffset[0]),symbolSize[1])||0]}function isSafeNum(num){return isFinite(num)}function getCanvasGradient(ctx,obj,rect){for(var canvasGradient="radial"===obj.type?function createRadialGradient(ctx,obj,rect){var width=rect.width,height=rect.height,min3=Math.min(width,height),x=null==obj.x?.5:obj.x,y=null==obj.y?.5:obj.y,r=null==obj.r?.5:obj.r;return obj.global||(x=x*width+rect.x,y=y*height+rect.y,r*=min3),x=isSafeNum(x)?x:.5,y=isSafeNum(y)?y:.5,r=r&gt;=0&amp;&amp;isSafeNum(r)?r:.5,ctx.createRadialGradient(x,y,0,x,y,r)}(ctx,obj,rect):function createLinearGradient(ctx,obj,rect){var x=null==obj.x?0:obj.x,x2=null==obj.x2?1:obj.x2,y=null==obj.y?0:obj.y,y2=null==obj.y2?0:obj.y2;return obj.global||(x=x*rect.width+rect.x,x2=x2*rect.width+rect.x,y=y*rect.height+rect.y,y2=y2*rect.height+rect.y),x=isSafeNum(x)?x:0,x2=isSafeNum(x2)?x2:1,y=isSafeNum(y)?y:0,y2=isSafeNum(y2)?y2:0,ctx.createLinearGradient(x,y,x2,y2)}(ctx,obj,rect),colorStops=obj.colorStops,i=0;i&lt;colorStops.length;i++)canvasGradient.addColorStop(colorStops[i].offset,colorStops[i].color);return canvasGradient}function parseInt10(val){return parseInt(val,10)}function getSize$1(root,whIdx,opts){var wh=["width","height"][whIdx],cwh=["clientWidth","clientHeight"][whIdx],plt=["paddingLeft","paddingTop"][whIdx],prb=["paddingRight","paddingBottom"][whIdx];if(null!=opts[wh]&amp;&amp;"auto"!==opts[wh])return parseFloat(opts[wh]);var stl=document.defaultView.getComputedStyle(root);return(root[cwh]||parseInt10(stl[wh])||parseInt10(root.style[wh]))-(parseInt10(stl[plt])||0)-(parseInt10(stl[prb])||0)|0}function getLineDash(el){var style=el.style,lineDash=style.lineDash&amp;&amp;style.lineWidth&gt;0&amp;&amp;function normalizeLineDash(lineType,lineWidth){return lineType&amp;&amp;"solid"!==lineType&amp;&amp;lineWidth&gt;0?"dashed"===lineType?[4*lineWidth,2*lineWidth]:"dotted"===lineType?[lineWidth]:isNumber(lineType)?[lineType]:isArray$1(lineType)?lineType:null:null}(style.lineDash,style.lineWidth),lineDashOffset=style.lineDashOffset;if(lineDash){var lineScale_1=style.strokeNoScale&amp;&amp;el.getLineScale?el.getLineScale():1;lineScale_1&amp;&amp;1!==lineScale_1&amp;&amp;(lineDash=map$1(lineDash,function(rawVal){return rawVal/lineScale_1}),lineDashOffset/=lineScale_1)}return[lineDash,lineDashOffset]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(style){var stroke=style.stroke;return!(null==stroke||"none"===stroke||!(style.lineWidth&gt;0))}function isValidStrokeFillStyle(strokeOrFill){return"string"==typeof strokeOrFill&amp;&amp;"none"!==strokeOrFill}function styleHasFill(style){var fill=style.fill;return null!=fill&amp;&amp;"none"!==fill}function doFillPath(ctx,style){if(null!=style.fillOpacity&amp;&amp;1!==style.fillOpacity){var originalGlobalAlpha=ctx.globalAlpha;ctx.globalAlpha=style.fillOpacity*style.opacity,ctx.fill(),ctx.globalAlpha=originalGlobalAlpha}else ctx.fill()}function doStrokePath(ctx,style){if(null!=style.strokeOpacity&amp;&amp;1!==style.strokeOpacity){var originalGlobalAlpha=ctx.globalAlpha;ctx.globalAlpha=style.strokeOpacity*style.opacity,ctx.stroke(),ctx.globalAlpha=originalGlobalAlpha}else ctx.stroke()}function createCanvasPattern(ctx,pattern,el){var image=createOrUpdateImage(pattern.image,pattern.__image,el);if(isImageReady(image)){var canvasPattern=ctx.createPattern(image,pattern.repeat||"repeat");if("function"==typeof DOMMatrix&amp;&amp;canvasPattern&amp;&amp;canvasPattern.setTransform){var matrix2=new DOMMatrix;matrix2.translateSelf(pattern.x||0,pattern.y||0),matrix2.rotateSelf(0,0,(pattern.rotation||0)*RADIAN_TO_DEGREE),matrix2.scaleSelf(pattern.scaleX||1,pattern.scaleY||1),canvasPattern.setTransform(matrix2)}return canvasPattern}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(ctx,style,prevStyle,forceSetAll,scope){var styleChanged=!1;if(!forceSetAll&amp;&amp;style===(prevStyle=prevStyle||{}))return!1;if(forceSetAll||style.opacity!==prevStyle.opacity){flushPathDrawn(ctx,scope),styleChanged=!0;var opacity=Math.max(Math.min(style.opacity,1),0);ctx.globalAlpha=isNaN(opacity)?DEFAULT_COMMON_STYLE.opacity:opacity}(forceSetAll||style.blend!==prevStyle.blend)&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),ctx.globalCompositeOperation=style.blend||DEFAULT_COMMON_STYLE.blend);for(var i=0;i&lt;SHADOW_NUMBER_PROPS.length;i++){var propName=SHADOW_NUMBER_PROPS[i];(forceSetAll||style[propName]!==prevStyle[propName])&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),ctx[propName]=ctx.dpr*(style[propName]||0))}return(forceSetAll||style.shadowColor!==prevStyle.shadowColor)&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),ctx.shadowColor=style.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),styleChanged}function bindPathAndTextCommonStyle(ctx,el,prevEl,forceSetAll,scope){var style=getStyle(el,scope.inHover),prevStyle=forceSetAll?null:prevEl&amp;&amp;getStyle(prevEl,scope.inHover)||{};if(style===prevStyle)return!1;var styleChanged=bindCommonProps(ctx,style,prevStyle,forceSetAll,scope);if((forceSetAll||style.fill!==prevStyle.fill)&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),isValidStrokeFillStyle(style.fill)&amp;&amp;(ctx.fillStyle=style.fill)),(forceSetAll||style.stroke!==prevStyle.stroke)&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),isValidStrokeFillStyle(style.stroke)&amp;&amp;(ctx.strokeStyle=style.stroke)),(forceSetAll||style.opacity!==prevStyle.opacity)&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),ctx.globalAlpha=null==style.opacity?1:style.opacity),el.hasStroke()){var newLineWidth=style.lineWidth/(style.strokeNoScale&amp;&amp;el.getLineScale?el.getLineScale():1);ctx.lineWidth!==newLineWidth&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),ctx.lineWidth=newLineWidth)}for(var i=0;i&lt;STROKE_PROPS.length;i++){var prop=STROKE_PROPS[i],propName=prop[0];(forceSetAll||style[propName]!==prevStyle[propName])&amp;&amp;(styleChanged||(flushPathDrawn(ctx,scope),styleChanged=!0),ctx[propName]=style[propName]||prop[1])}return styleChanged}function setContextTransform(ctx,el){var m2=el.transform,dpr2=ctx.dpr||1;m2?ctx.setTransform(dpr2*m2[0],dpr2*m2[1],dpr2*m2[2],dpr2*m2[3],dpr2*m2[4],dpr2*m2[5]):ctx.setTransform(dpr2,0,0,dpr2,0,0)}function flushPathDrawn(ctx,scope){scope.batchFill&amp;&amp;ctx.fill(),scope.batchStroke&amp;&amp;ctx.stroke(),scope.batchFill="",scope.batchStroke=""}function getStyle(el,inHover){return inHover&amp;&amp;el.__hoverStyle||el.style}function brushSingle(ctx,el){brush$1(ctx,el,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(ctx,el,scope,isLast){var m2=el.transform;if(!el.shouldBePainted(scope.viewWidth,scope.viewHeight,!1,!1))return el.__dirty&amp;=-2,void(el.__isRendered=!1);var clipPaths=el.__clipPaths,prevElClipPaths=scope.prevElClipPaths,forceSetTransform=!1,forceSetStyle=!1;if(prevElClipPaths&amp;&amp;!function isClipPathChanged(clipPaths,prevClipPaths){if(clipPaths===prevClipPaths||!clipPaths&amp;&amp;!prevClipPaths)return!1;if(!clipPaths||!prevClipPaths||clipPaths.length!==prevClipPaths.length)return!0;for(var i=0;i&lt;clipPaths.length;i++)if(clipPaths[i]!==prevClipPaths[i])return!0;return!1}(clipPaths,prevElClipPaths)||(prevElClipPaths&amp;&amp;prevElClipPaths.length&amp;&amp;(flushPathDrawn(ctx,scope),ctx.restore(),forceSetStyle=forceSetTransform=!0,scope.prevElClipPaths=null,scope.allClipped=!1,scope.prevEl=null),clipPaths&amp;&amp;clipPaths.length&amp;&amp;(flushPathDrawn(ctx,scope),ctx.save(),function updateClipStatus(clipPaths,ctx,scope){for(var allClipped=!1,i=0;i&lt;clipPaths.length;i++){var clipPath=clipPaths[i];allClipped=allClipped||clipPath.isZeroArea(),setContextTransform(ctx,clipPath),ctx.beginPath(),clipPath.buildPath(ctx,clipPath.shape),ctx.clip()}scope.allClipped=allClipped}(clipPaths,ctx,scope),forceSetTransform=!0),scope.prevElClipPaths=clipPaths),scope.allClipped)el.__isRendered=!1;else{el.beforeBrush&amp;&amp;el.beforeBrush(),el.innerBeforeBrush();var prevEl=scope.prevEl;prevEl||(forceSetStyle=forceSetTransform=!0);var canBatchPath=el instanceof Path&amp;&amp;el.autoBatch&amp;&amp;function canPathBatch(style){var hasFill=styleHasFill(style),hasStroke=styleHasStroke(style);return!(style.lineDash||!(+hasFill^+hasStroke)||hasFill&amp;&amp;"string"!=typeof style.fill||hasStroke&amp;&amp;"string"!=typeof style.stroke||style.strokePercent&lt;1||style.strokeOpacity&lt;1||style.fillOpacity&lt;1)}(el.style);forceSetTransform||function isTransformChanged(m0,m1){return m0&amp;&amp;m1?m0[0]!==m1[0]||m0[1]!==m1[1]||m0[2]!==m1[2]||m0[3]!==m1[3]||m0[4]!==m1[4]||m0[5]!==m1[5]:!(!m0&amp;&amp;!m1)}(m2,prevEl.transform)?(flushPathDrawn(ctx,scope),setContextTransform(ctx,el)):canBatchPath||flushPathDrawn(ctx,scope);var style=getStyle(el,scope.inHover);el instanceof Path?(1!==scope.lastDrawType&amp;&amp;(forceSetStyle=!0,scope.lastDrawType=1),bindPathAndTextCommonStyle(ctx,el,prevEl,forceSetStyle,scope),canBatchPath&amp;&amp;(scope.batchFill||scope.batchStroke)||ctx.beginPath(),function brushPath(ctx,el,style,inBatch){var _a2,hasStroke=styleHasStroke(style),hasFill=styleHasFill(style),strokePercent=style.strokePercent,strokePart=strokePercent&lt;1,firstDraw=!el.path;el.silent&amp;&amp;!strokePart||!firstDraw||el.createPathProxy();var path=el.path||pathProxyForDraw,dirtyFlag=el.__dirty;if(!inBatch){var fill=style.fill,stroke=style.stroke,hasFillGradient=hasFill&amp;&amp;!!fill.colorStops,hasStrokeGradient=hasStroke&amp;&amp;!!stroke.colorStops,hasFillPattern=hasFill&amp;&amp;!!fill.image,hasStrokePattern=hasStroke&amp;&amp;!!stroke.image,fillGradient=void 0,strokeGradient=void 0,fillPattern=void 0,strokePattern=void 0,rect=void 0;(hasFillGradient||hasStrokeGradient)&amp;&amp;(rect=el.getBoundingRect()),hasFillGradient&amp;&amp;(fillGradient=dirtyFlag?getCanvasGradient(ctx,fill,rect):el.__canvasFillGradient,el.__canvasFillGradient=fillGradient),hasStrokeGradient&amp;&amp;(strokeGradient=dirtyFlag?getCanvasGradient(ctx,stroke,rect):el.__canvasStrokeGradient,el.__canvasStrokeGradient=strokeGradient),hasFillPattern&amp;&amp;(fillPattern=dirtyFlag||!el.__canvasFillPattern?createCanvasPattern(ctx,fill,el):el.__canvasFillPattern,el.__canvasFillPattern=fillPattern),hasStrokePattern&amp;&amp;(strokePattern=dirtyFlag||!el.__canvasStrokePattern?createCanvasPattern(ctx,stroke,el):el.__canvasStrokePattern,el.__canvasStrokePattern=fillPattern),hasFillGradient?ctx.fillStyle=fillGradient:hasFillPattern&amp;&amp;(fillPattern?ctx.fillStyle=fillPattern:hasFill=!1),hasStrokeGradient?ctx.strokeStyle=strokeGradient:hasStrokePattern&amp;&amp;(strokePattern?ctx.strokeStyle=strokePattern:hasStroke=!1)}var lineDash,lineDashOffset,scale2=el.getGlobalScale();path.setScale(scale2[0],scale2[1],el.segmentIgnoreThreshold),ctx.setLineDash&amp;&amp;style.lineDash&amp;&amp;(lineDash=(_a2=getLineDash(el))[0],lineDashOffset=_a2[1]);var needsRebuild=!0;(firstDraw||4&amp;dirtyFlag)&amp;&amp;(path.setDPR(ctx.dpr),strokePart?path.setContext(null):(path.setContext(ctx),needsRebuild=!1),path.reset(),el.buildPath(path,el.shape,inBatch),path.toStatic(),el.pathUpdated()),needsRebuild&amp;&amp;path.rebuildPath(ctx,strokePart?strokePercent:1),lineDash&amp;&amp;(ctx.setLineDash(lineDash),ctx.lineDashOffset=lineDashOffset),inBatch||(style.strokeFirst?(hasStroke&amp;&amp;doStrokePath(ctx,style),hasFill&amp;&amp;doFillPath(ctx,style)):(hasFill&amp;&amp;doFillPath(ctx,style),hasStroke&amp;&amp;doStrokePath(ctx,style))),lineDash&amp;&amp;ctx.setLineDash([])}(ctx,el,style,canBatchPath),canBatchPath&amp;&amp;(scope.batchFill=style.fill||"",scope.batchStroke=style.stroke||"")):el instanceof TSpan?(3!==scope.lastDrawType&amp;&amp;(forceSetStyle=!0,scope.lastDrawType=3),bindPathAndTextCommonStyle(ctx,el,prevEl,forceSetStyle,scope),function brushText(ctx,el,style){var _a2,text=style.text;if(null!=text&amp;&amp;(text+=""),text){ctx.font=style.font||DEFAULT_FONT,ctx.textAlign=style.textAlign,ctx.textBaseline=style.textBaseline;var lineDash=void 0,lineDashOffset=void 0;ctx.setLineDash&amp;&amp;style.lineDash&amp;&amp;(lineDash=(_a2=getLineDash(el))[0],lineDashOffset=_a2[1]),lineDash&amp;&amp;(ctx.setLineDash(lineDash),ctx.lineDashOffset=lineDashOffset),style.strokeFirst?(styleHasStroke(style)&amp;&amp;ctx.strokeText(text,style.x,style.y),styleHasFill(style)&amp;&amp;ctx.fillText(text,style.x,style.y)):(styleHasFill(style)&amp;&amp;ctx.fillText(text,style.x,style.y),styleHasStroke(style)&amp;&amp;ctx.strokeText(text,style.x,style.y)),lineDash&amp;&amp;ctx.setLineDash([])}}(ctx,el,style)):el instanceof ZRImage?(2!==scope.lastDrawType&amp;&amp;(forceSetStyle=!0,scope.lastDrawType=2),function bindImageStyle(ctx,el,prevEl,forceSetAll,scope){return bindCommonProps(ctx,getStyle(el,scope.inHover),prevEl&amp;&amp;getStyle(prevEl,scope.inHover),forceSetAll,scope)}(ctx,el,prevEl,forceSetStyle,scope),function brushImage(ctx,el,style){var image=el.__image=createOrUpdateImage(style.image,el.__image,el,el.onload);if(image&amp;&amp;isImageReady(image)){var x=style.x||0,y=style.y||0,width=el.getWidth(),height=el.getHeight(),aspect=image.width/image.height;if(null==width&amp;&amp;null!=height?width=height*aspect:null==height&amp;&amp;null!=width?height=width/aspect:null==width&amp;&amp;null==height&amp;&amp;(width=image.width,height=image.height),style.sWidth&amp;&amp;style.sHeight){var sx=style.sx||0,sy=style.sy||0;ctx.drawImage(image,sx,sy,style.sWidth,style.sHeight,x,y,width,height)}else if(style.sx&amp;&amp;style.sy){var sWidth=width-(sx=style.sx),sHeight=height-(sy=style.sy);ctx.drawImage(image,sx,sy,sWidth,sHeight,x,y,width,height)}else ctx.drawImage(image,x,y,width,height)}}(ctx,el,style)):el.getTemporalDisplayables&amp;&amp;(4!==scope.lastDrawType&amp;&amp;(forceSetStyle=!0,scope.lastDrawType=4),function brushIncremental(ctx,el,scope){var displayables=el.getDisplayables(),temporalDisplayables=el.getTemporalDisplayables();ctx.save();var i,len2,innerScope={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:scope.viewWidth,viewHeight:scope.viewHeight,inHover:scope.inHover};for(i=el.getCursor(),len2=displayables.length;i&lt;len2;i++){(displayable=displayables[i]).beforeBrush&amp;&amp;displayable.beforeBrush(),displayable.innerBeforeBrush(),brush$1(ctx,displayable,innerScope,i===len2-1),displayable.innerAfterBrush(),displayable.afterBrush&amp;&amp;displayable.afterBrush(),innerScope.prevEl=displayable}for(var i_1=0,len_1=temporalDisplayables.length;i_1&lt;len_1;i_1++){var displayable;(displayable=temporalDisplayables[i_1]).beforeBrush&amp;&amp;displayable.beforeBrush(),displayable.innerBeforeBrush(),brush$1(ctx,displayable,innerScope,i_1===len_1-1),displayable.innerAfterBrush(),displayable.afterBrush&amp;&amp;displayable.afterBrush(),innerScope.prevEl=displayable}el.clearTemporalDisplayables(),el.notClear=!0,ctx.restore()}(ctx,el,scope)),canBatchPath&amp;&amp;isLast&amp;&amp;flushPathDrawn(ctx,scope),el.innerAfterBrush(),el.afterBrush&amp;&amp;el.afterBrush(),scope.prevEl=el,el.__dirty=0,el.__isRendered=!0}}var decalMap=new WeakMap,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(decalObject,api){if("none"===decalObject)return null;var dpr2=api.getDevicePixelRatio(),zr=api.getZr(),isSVG="svg"===zr.painter.type;decalObject.dirty&amp;&amp;decalMap.delete(decalObject);var oldPattern=decalMap.get(decalObject);if(oldPattern)return oldPattern;var decalOpt=defaults(decalObject,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===decalOpt.backgroundColor&amp;&amp;(decalOpt.backgroundColor=null);var pattern={repeat:"repeat"};return function setPatternnSource(pattern2){for(var cacheKey,keys2=[dpr2],isValidKey=!0,i=0;i&lt;decalKeys.length;++i){var value=decalOpt[decalKeys[i]];if(null!=value&amp;&amp;!isArray$1(value)&amp;&amp;!isString(value)&amp;&amp;!isNumber(value)&amp;&amp;"boolean"!=typeof value){isValidKey=!1;break}keys2.push(value)}if(isValidKey){cacheKey=keys2.join(",")+(isSVG?"-svg":"");var cache=decalCache.get(cacheKey);cache&amp;&amp;(isSVG?pattern2.svgElement=cache:pattern2.image=cache)}var ctx,dashArrayX=normalizeDashArrayX(decalOpt.dashArrayX),dashArrayY=function normalizeDashArrayY(dash){if(!dash||"object"==typeof dash&amp;&amp;0===dash.length)return[0,0];if(isNumber(dash)){var dashValue_1=Math.ceil(dash);return[dashValue_1,dashValue_1]}var dashValue=map$1(dash,function(n){return Math.ceil(n)});return dash.length%2?dashValue.concat(dashValue):dashValue}(decalOpt.dashArrayY),symbolArray=normalizeSymbolArray(decalOpt.symbol),lineBlockLengthsX=function getLineBlockLengthX(dash){return map$1(dash,function(line){return getLineBlockLengthY(line)})}(dashArrayX),lineBlockLengthY=getLineBlockLengthY(dashArrayY),canvas=!isSVG&amp;&amp;platformApi.createCanvas(),svgRoot=isSVG&amp;&amp;{tag:"g",attrs:{},key:"dcl",children:[]},pSize=function getPatternSize(){for(var width=1,i2=0,xlen=lineBlockLengthsX.length;i2&lt;xlen;++i2)width=getLeastCommonMultiple(width,lineBlockLengthsX[i2]);var symbolRepeats=1;for(i2=0,xlen=symbolArray.length;i2&lt;xlen;++i2)symbolRepeats=getLeastCommonMultiple(symbolRepeats,symbolArray[i2].length);width*=symbolRepeats;var height=lineBlockLengthY*lineBlockLengthsX.length*symbolArray.length;return{width:Math.max(1,Math.min(width,decalOpt.maxTileWidth)),height:Math.max(1,Math.min(height,decalOpt.maxTileHeight))}}();canvas&amp;&amp;(canvas.width=pSize.width*dpr2,canvas.height=pSize.height*dpr2,ctx=canvas.getContext("2d"));(function brushDecal(){ctx&amp;&amp;(ctx.clearRect(0,0,canvas.width,canvas.height),decalOpt.backgroundColor&amp;&amp;(ctx.fillStyle=decalOpt.backgroundColor,ctx.fillRect(0,0,canvas.width,canvas.height)));for(var ySum=0,i2=0;i2&lt;dashArrayY.length;++i2)ySum+=dashArrayY[i2];if(ySum&lt;=0)return;var y=-lineBlockLengthY,yId=0,yIdTotal=0,xId0=0;for(;y&lt;pSize.height;){if(yId%2==0){for(var symbolYId=yIdTotal/2%symbolArray.length,x=0,xId1=0,xId1Total=0;x&lt;2*pSize.width;){var xSum=0;for(i2=0;i2&lt;dashArrayX[xId0].length;++i2)xSum+=dashArrayX[xId0][i2];if(xSum&lt;=0)break;if(xId1%2==0){var size=.5*(1-decalOpt.symbolSize),left=x+dashArrayX[xId0][xId1]*size,top_1=y+dashArrayY[yId]*size,width=dashArrayX[xId0][xId1]*decalOpt.symbolSize,height=dashArrayY[yId]*decalOpt.symbolSize,symbolXId=xId1Total/2%symbolArray[symbolYId].length;brushSymbol(left,top_1,width,height,symbolArray[symbolYId][symbolXId])}x+=dashArrayX[xId0][xId1],++xId1Total,++xId1===dashArrayX[xId0].length&amp;&amp;(xId1=0)}++xId0===dashArrayX.length&amp;&amp;(xId0=0)}y+=dashArrayY[yId],++yIdTotal,++yId===dashArrayY.length&amp;&amp;(yId=0)}function brushSymbol(x2,y2,width2,height2,symbolType){var scale2=isSVG?1:dpr2,symbol=createSymbol$1(symbolType,x2*scale2,y2*scale2,width2*scale2,height2*scale2,decalOpt.color,decalOpt.symbolKeepAspect);if(isSVG){var symbolVNode=zr.painter.renderOneToVNode(symbol);symbolVNode&amp;&amp;svgRoot.children.push(symbolVNode)}else brushSingle(ctx,symbol)}})(),isValidKey&amp;&amp;decalCache.put(cacheKey,canvas||svgRoot);pattern2.image=canvas,pattern2.svgElement=svgRoot,pattern2.svgWidth=pSize.width,pattern2.svgHeight=pSize.height}(pattern),pattern.rotation=decalOpt.rotation,pattern.scaleX=pattern.scaleY=isSVG?1:1/dpr2,decalMap.set(decalObject,pattern),decalObject.dirty=!1,pattern}function normalizeSymbolArray(symbol){if(!symbol||0===symbol.length)return[["rect"]];if(isString(symbol))return[[symbol]];for(var isAllString=!0,i=0;i&lt;symbol.length;++i)if(!isString(symbol[i])){isAllString=!1;break}if(isAllString)return normalizeSymbolArray([symbol]);var result=[];for(i=0;i&lt;symbol.length;++i)isString(symbol[i])?result.push([symbol[i]]):result.push(symbol[i]);return result}function normalizeDashArrayX(dash){if(!dash||0===dash.length)return[[0,0]];if(isNumber(dash))return[[dashValue=Math.ceil(dash),dashValue]];for(var isAllNumber=!0,i=0;i&lt;dash.length;++i)if(!isNumber(dash[i])){isAllNumber=!1;break}if(isAllNumber)return normalizeDashArrayX([dash]);var result=[];for(i=0;i&lt;dash.length;++i)if(isNumber(dash[i])){var dashValue=Math.ceil(dash[i]);result.push([dashValue,dashValue])}else{(dashValue=map$1(dash[i],function(n){return Math.ceil(n)})).length%2==1?result.push(dashValue.concat(dashValue)):result.push(dashValue)}return result}function getLineBlockLengthY(dash){for(var blockLength=0,i=0;i&lt;dash.length;++i)blockLength+=dash[i];return dash.length%2==1?2*blockLength:blockLength}var lifecycle=new Eventful,implsStore={};function getImpl(name){return implsStore[name]}var dependencies={zrender:"5.6.1"},PRIORITY={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},PENDING_UPDATE="__pendingUpdate",ACTION_REG=/^[a-zA-Z0-9_]+$/;function createRegisterEventWithLowercaseECharts(method){return function(){for(var args=[],_i=0;_i&lt;arguments.length;_i++)args[_i]=arguments[_i];if(!this.isDisposed())return toLowercaseNameAndCallEventful(this,method,args);this.id}}function createRegisterEventWithLowercaseMessageCenter(method){return function(){for(var args=[],_i=0;_i&lt;arguments.length;_i++)args[_i]=arguments[_i];return toLowercaseNameAndCallEventful(this,method,args)}}function toLowercaseNameAndCallEventful(host,method,args){return args[0]=args[0]&amp;&amp;args[0].toLowerCase(),Eventful.prototype[method].apply(host,args)}var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,MessageCenter=function(_super){function MessageCenter2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(MessageCenter2,_super),MessageCenter2}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on"),messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var ECharts=function(_super){function ECharts2(dom,theme2,opts){var _this=_super.call(this,new ECEventProcessor)||this;_this._chartsViews=[],_this._chartsMap={},_this._componentsViews=[],_this._componentsMap={},_this._pendingActions=[],opts=opts||{},isString(theme2)&amp;&amp;(theme2=themeStorage[theme2]),_this._dom=dom;opts.ssr&amp;&amp;registerSSRDataGetter(function(el){var ecData=getECData(el),dataIndex=ecData.dataIndex;if(null!=dataIndex){var hashMap=createHashMap();return hashMap.set("series_index",ecData.seriesIndex),hashMap.set("data_index",dataIndex),ecData.ssrType&amp;&amp;hashMap.set("ssr_type",ecData.ssrType),hashMap}});var zr=_this._zr=init$2(dom,{renderer:opts.renderer||"canvas",devicePixelRatio:opts.devicePixelRatio,width:opts.width,height:opts.height,ssr:opts.ssr,useDirtyRect:retrieve2(opts.useDirtyRect,!1),useCoarsePointer:retrieve2(opts.useCoarsePointer,"auto"),pointerSize:opts.pointerSize});_this._ssr=opts.ssr,_this._throttledZrFlush=throttle(bind$1(zr.flush,zr),17),(theme2=clone$4(theme2))&amp;&amp;globalBackwardCompat(theme2,!0),_this._theme=theme2,_this._locale=function createLocaleObject(locale){if(isString(locale)){var localeObj=localeStorage[locale.toUpperCase()]||{};return"ZH"===locale||"EN"===locale?clone$4(localeObj):merge(clone$4(localeObj),clone$4(localeStorage.EN),!1)}return merge(clone$4(locale),clone$4(localeStorage.EN),!1)}(opts.locale||SYSTEM_LANG),_this._coordSysMgr=new CoordinateSystemManager;var api=_this._api=createExtensionAPI(_this);function prioritySortFunc(a,b){return a.__prio-b.__prio}return sort$2(visualFuncs,prioritySortFunc),sort$2(dataProcessorFuncs,prioritySortFunc),_this._scheduler=new Scheduler(_this,api,dataProcessorFuncs,visualFuncs),_this._messageCenter=new MessageCenter,_this._initEvents(),_this.resize=bind$1(_this.resize,_this),zr.animation.on("frame",_this._onframe,_this),bindRenderedEvent(zr,_this),bindMouseEvent(zr,_this),setAsPrimitive(_this),_this}return __extends$1(ECharts2,_super),ECharts2.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var scheduler=this._scheduler;if(this[PENDING_UPDATE]){var silent=this[PENDING_UPDATE].silent;this.__flagInMainProcess=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(e2){throw this.__flagInMainProcess=!1,this[PENDING_UPDATE]=null,e2}this._zr.flush(),this.__flagInMainProcess=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,silent),triggerUpdatedEvent.call(this,silent)}else if(scheduler.unfinished){var remainTime=1,ecModel=this._model,api=this._api;scheduler.unfinished=!1;do{var startTime=+new Date;scheduler.performSeriesTasks(ecModel),scheduler.performDataProcessorTasks(ecModel),updateStreamModes(this,ecModel),scheduler.performVisualTasks(ecModel),renderSeries(this,this._model,api,"remain",{}),remainTime-=+new Date-startTime}while(remainTime&gt;0&amp;&amp;scheduler.unfinished);scheduler.unfinished||this._zr.flush()}}},ECharts2.prototype.getDom=function(){return this._dom},ECharts2.prototype.getId=function(){return this.id},ECharts2.prototype.getZr=function(){return this._zr},ECharts2.prototype.isSSR=function(){return this._ssr},ECharts2.prototype.setOption=function(option,notMerge,lazyUpdate){if(!this.__flagInMainProcess)if(this._disposed)this.id;else{var silent,replaceMerge,transitionOpt;if(isObject$3(notMerge)&amp;&amp;(lazyUpdate=notMerge.lazyUpdate,silent=notMerge.silent,replaceMerge=notMerge.replaceMerge,transitionOpt=notMerge.transition,notMerge=notMerge.notMerge),this.__flagInMainProcess=!0,!this._model||notMerge){var optionManager=new OptionManager(this._api),theme2=this._theme,ecModel=this._model=new GlobalModel;ecModel.scheduler=this._scheduler,ecModel.ssr=this._ssr,ecModel.init(null,null,null,theme2,this._locale,optionManager)}this._model.setOption(option,{replaceMerge:replaceMerge},optionPreprocessorFuncs);var updateParams={seriesTransition:transitionOpt,optionChanged:!0};if(lazyUpdate)this[PENDING_UPDATE]={silent:silent,updateParams:updateParams},this.__flagInMainProcess=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,updateParams)}catch(e2){throw this[PENDING_UPDATE]=null,this.__flagInMainProcess=!1,e2}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this.__flagInMainProcess=!1,flushPendingActions.call(this,silent),triggerUpdatedEvent.call(this,silent)}}},ECharts2.prototype.setTheme=function(){},ECharts2.prototype.getModel=function(){return this._model},ECharts2.prototype.getOption=function(){return this._model&amp;&amp;this._model.getOption()},ECharts2.prototype.getWidth=function(){return this._zr.getWidth()},ECharts2.prototype.getHeight=function(){return this._zr.getHeight()},ECharts2.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&amp;&amp;window.devicePixelRatio||1},ECharts2.prototype.getRenderedCanvas=function(opts){return this.renderToCanvas(opts)},ECharts2.prototype.renderToCanvas=function(opts){return opts=opts||{},this._zr.painter.getRenderedCanvas({backgroundColor:opts.backgroundColor||this._model.get("backgroundColor"),pixelRatio:opts.pixelRatio||this.getDevicePixelRatio()})},ECharts2.prototype.renderToSVGString=function(opts){return opts=opts||{},this._zr.painter.renderToString({useViewBox:opts.useViewBox})},ECharts2.prototype.getSvgDataURL=function(){if(env.svgSupported){var zr=this._zr;return each$f(zr.storage.getDisplayList(),function(el){el.stopAnimation(null,!0)}),zr.painter.toDataURL()}},ECharts2.prototype.getDataURL=function(opts){if(!this._disposed){var excludeComponents=(opts=opts||{}).excludeComponents,ecModel=this._model,excludesComponentViews=[],self2=this;each$f(excludeComponents,function(componentType){ecModel.eachComponent({mainType:componentType},function(component){var view=self2._componentsMap[component.__viewId];view.group.ignore||(excludesComponentViews.push(view),view.group.ignore=!0)})});var url="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(opts).toDataURL("image/"+(opts&amp;&amp;opts.type||"png"));return each$f(excludesComponentViews,function(view){view.group.ignore=!1}),url}this.id},ECharts2.prototype.getConnectedDataURL=function(opts){if(!this._disposed){var isSvg="svg"===opts.type,groupId=this.group,mathMin2=Math.min,mathMax2=Math.max;if(connectedGroups[groupId]){var left_1=Infinity,top_1=Infinity,right_1=-Infinity,bottom_1=-Infinity,canvasList_1=[],dpr_1=opts&amp;&amp;opts.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(chart,id){if(chart.group===groupId){var canvas=isSvg?chart.getZr().painter.getSvgDom().innerHTML:chart.renderToCanvas(clone$4(opts)),boundingRect=chart.getDom().getBoundingClientRect();left_1=mathMin2(boundingRect.left,left_1),top_1=mathMin2(boundingRect.top,top_1),right_1=mathMax2(boundingRect.right,right_1),bottom_1=mathMax2(boundingRect.bottom,bottom_1),canvasList_1.push({dom:canvas,left:boundingRect.left,top:boundingRect.top})}});var width=(right_1*=dpr_1)-(left_1*=dpr_1),height=(bottom_1*=dpr_1)-(top_1*=dpr_1),targetCanvas=platformApi.createCanvas(),zr_1=init$2(targetCanvas,{renderer:isSvg?"svg":"canvas"});if(zr_1.resize({width:width,height:height}),isSvg){var content_1="";return each$f(canvasList_1,function(item){var x=item.left-left_1,y=item.top-top_1;content_1+='&lt;g transform="translate('+x+","+y+')"&gt;'+item.dom+"&lt;/g&gt;"}),zr_1.painter.getSvgRoot().innerHTML=content_1,opts.connectedBackgroundColor&amp;&amp;zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor),zr_1.refreshImmediately(),zr_1.painter.toDataURL()}return opts.connectedBackgroundColor&amp;&amp;zr_1.add(new Rect$2({shape:{x:0,y:0,width:width,height:height},style:{fill:opts.connectedBackgroundColor}})),each$f(canvasList_1,function(item){var img=new ZRImage({style:{x:item.left*dpr_1-left_1,y:item.top*dpr_1-top_1,image:item.dom}});zr_1.add(img)}),zr_1.refreshImmediately(),targetCanvas.toDataURL("image/"+(opts&amp;&amp;opts.type||"png"))}return this.getDataURL(opts)}this.id},ECharts2.prototype.convertToPixel=function(finder,value){return doConvertPixel(this,"convertToPixel",finder,value)},ECharts2.prototype.convertFromPixel=function(finder,value){return doConvertPixel(this,"convertFromPixel",finder,value)},ECharts2.prototype.containPixel=function(finder,value){var result;if(!this._disposed)return each$f(parseFinder$1(this._model,finder),function(models,key){key.indexOf("Models")&gt;=0&amp;&amp;each$f(models,function(model){var coordSys=model.coordinateSystem;if(coordSys&amp;&amp;coordSys.containPoint)result=result||!!coordSys.containPoint(value);else if("seriesModels"===key){var view=this._chartsMap[model.__viewId];view&amp;&amp;view.containPoint&amp;&amp;(result=result||view.containPoint(value,model))}},this)},this),!!result;this.id},ECharts2.prototype.getVisual=function(finder,visualType){var parsedFinder=parseFinder$1(this._model,finder,{defaultMainType:"series"}),data=parsedFinder.seriesModel.getData(),dataIndexInside=parsedFinder.hasOwnProperty("dataIndexInside")?parsedFinder.dataIndexInside:parsedFinder.hasOwnProperty("dataIndex")?data.indexOfRawIndex(parsedFinder.dataIndex):null;return null!=dataIndexInside?getItemVisualFromData(data,dataIndexInside,visualType):getVisualFromData(data,visualType)},ECharts2.prototype.getViewOfComponentModel=function(componentModel){return this._componentsMap[componentModel.__viewId]},ECharts2.prototype.getViewOfSeriesModel=function(seriesModel){return this._chartsMap[seriesModel.__viewId]},ECharts2.prototype._initEvents=function(){var _this=this;each$f(MOUSE_EVENT_NAMES,function(eveName){var handler=function(e2){var params,ecModel=_this.getModel(),el=e2.target;if("globalout"===eveName?params={}:el&amp;&amp;findEventDispatcher(el,function(parent){var ecData=getECData(parent);if(ecData&amp;&amp;null!=ecData.dataIndex){var dataModel=ecData.dataModel||ecModel.getSeriesByIndex(ecData.seriesIndex);return params=dataModel&amp;&amp;dataModel.getDataParams(ecData.dataIndex,ecData.dataType,el)||{},!0}if(ecData.eventData)return params=extend({},ecData.eventData),!0},!0),params){var componentType=params.componentType,componentIndex=params.componentIndex;"markLine"!==componentType&amp;&amp;"markPoint"!==componentType&amp;&amp;"markArea"!==componentType||(componentType="series",componentIndex=params.seriesIndex);var model=componentType&amp;&amp;null!=componentIndex&amp;&amp;ecModel.getComponent(componentType,componentIndex),view=model&amp;&amp;_this["series"===model.mainType?"_chartsMap":"_componentsMap"][model.__viewId];params.event=e2,params.type=eveName,_this._$eventProcessor.eventInfo={targetEl:el,packedEvent:params,model:model,view:view},_this.trigger(eveName,params)}};handler.zrEventfulCallAtLast=!0,_this._zr.on(eveName,handler,_this)}),each$f(eventActionMap,function(actionType,eventType){_this._messageCenter.on(eventType,function(event){this.trigger(eventType,event)},_this)}),each$f(["selectchanged"],function(eventType){_this._messageCenter.on(eventType,function(event){this.trigger(eventType,event)},_this)}),function handleLegacySelectEvents(messageCenter,ecIns,api){messageCenter.on("selectchanged",function(params){var ecModel=api.getModel();params.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",ecIns,ecModel,params),handleSeriesLegacySelectEvents("pie","selectchanged",ecIns,ecModel,params)):"select"===params.fromAction?(handleSeriesLegacySelectEvents("map","selected",ecIns,ecModel,params),handleSeriesLegacySelectEvents("pie","selected",ecIns,ecModel,params)):"unselect"===params.fromAction&amp;&amp;(handleSeriesLegacySelectEvents("map","unselected",ecIns,ecModel,params),handleSeriesLegacySelectEvents("pie","unselected",ecIns,ecModel,params))})}(this._messageCenter,this,this._api)},ECharts2.prototype.isDisposed=function(){return this._disposed},ECharts2.prototype.clear=function(){this._disposed?this.id:this.setOption({series:[]},!0)},ECharts2.prototype.dispose=function(){if(this._disposed)this.id;else{this._disposed=!0,this.getDom()&amp;&amp;setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var api=this._api,ecModel=this._model;each$f(this._componentsViews,function(component){component.dispose(ecModel,api)}),each$f(this._chartsViews,function(chart2){chart2.dispose(ecModel,api)}),this._zr.dispose(),this._dom=this._model=this._chartsMap=this._componentsMap=this._chartsViews=this._componentsViews=this._scheduler=this._api=this._zr=this._throttledZrFlush=this._theme=this._coordSysMgr=this._messageCenter=null,delete instances[this.id]}},ECharts2.prototype.resize=function(opts){if(!this.__flagInMainProcess)if(this._disposed)this.id;else{this._zr.resize(opts);var ecModel=this._model;if(this._loadingFX&amp;&amp;this._loadingFX.resize(),ecModel){var needPrepare=ecModel.resetOption("media"),silent=opts&amp;&amp;opts.silent;this[PENDING_UPDATE]&amp;&amp;(null==silent&amp;&amp;(silent=this[PENDING_UPDATE].silent),needPrepare=!0,this[PENDING_UPDATE]=null),this.__flagInMainProcess=!0;try{needPrepare&amp;&amp;prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},opts&amp;&amp;opts.animation)})}catch(e2){throw this.__flagInMainProcess=!1,e2}this.__flagInMainProcess=!1,flushPendingActions.call(this,silent),triggerUpdatedEvent.call(this,silent)}}},ECharts2.prototype.showLoading=function(name,cfg){if(this._disposed)this.id;else if(isObject$3(name)&amp;&amp;(cfg=name,name=""),name=name||"default",this.hideLoading(),loadingEffects[name]){var el=loadingEffects[name](this._api,cfg),zr=this._zr;this._loadingFX=el,zr.add(el)}},ECharts2.prototype.hideLoading=function(){this._disposed?this.id:(this._loadingFX&amp;&amp;this._zr.remove(this._loadingFX),this._loadingFX=null)},ECharts2.prototype.makeActionFromEvent=function(eventObj){var payload=extend({},eventObj);return payload.type=eventActionMap[eventObj.type],payload},ECharts2.prototype.dispatchAction=function(payload,opt){if(this._disposed)this.id;else if(isObject$3(opt)||(opt={silent:!!opt}),actions[payload.type]&amp;&amp;this._model)if(this.__flagInMainProcess)this._pendingActions.push(payload);else{var silent=opt.silent;doDispatchAction.call(this,payload,silent);var flush=opt.flush;flush?this._zr.flush():!1!==flush&amp;&amp;env.browser.weChat&amp;&amp;this._throttledZrFlush(),flushPendingActions.call(this,silent),triggerUpdatedEvent.call(this,silent)}},ECharts2.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},ECharts2.prototype.appendData=function(params){if(this._disposed)this.id;else{var seriesIndex=params.seriesIndex;this.getModel().getSeriesByIndex(seriesIndex).appendData(params),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},ECharts2.internalField=function(){function clearColorPalette(ecModel){ecModel.clearColorPalette(),ecModel.eachSeries(function(seriesModel){seriesModel.clearColorPalette()})}function applyElementStates(el){for(var newStates=[],oldStates=el.currentStates,i=0;i&lt;oldStates.length;i++){var stateName=oldStates[i];"emphasis"!==stateName&amp;&amp;"blur"!==stateName&amp;&amp;"select"!==stateName&amp;&amp;newStates.push(stateName)}el.selected&amp;&amp;el.states.select&amp;&amp;newStates.push("select"),2===el.hoverState&amp;&amp;el.states.emphasis?newStates.push("emphasis"):1===el.hoverState&amp;&amp;el.states.blur&amp;&amp;newStates.push("blur"),el.useStates(newStates)}function updateZ2(model,view){if(!model.preventAutoZ){var z=model.get("z")||0,zlevel=model.get("zlevel")||0;view.eachRendered(function(el){return doUpdateZ(el,z,zlevel,-1/0),!0})}}function doUpdateZ(el,z,zlevel,maxZ2){var label=el.getTextContent(),labelLine=el.getTextGuideLine();if(el.isGroup)for(var children=el.childrenRef(),i=0;i&lt;children.length;i++)maxZ2=Math.max(doUpdateZ(children[i],z,zlevel,maxZ2),maxZ2);else el.z=z,el.zlevel=zlevel,maxZ2=Math.max(el.z2,maxZ2);if(label&amp;&amp;(label.z=z,label.zlevel=zlevel,isFinite(maxZ2)&amp;&amp;(label.z2=maxZ2+2)),labelLine){var textGuideLineConfig=el.textGuideLineConfig;labelLine.z=z,labelLine.zlevel=zlevel,isFinite(maxZ2)&amp;&amp;(labelLine.z2=maxZ2+(textGuideLineConfig&amp;&amp;textGuideLineConfig.showAbove?1:-1))}return maxZ2}function clearStates(model,view){view.eachRendered(function(el){if(!isElementRemoved(el)){var textContent=el.getTextContent(),textGuide=el.getTextGuideLine();el.stateTransition&amp;&amp;(el.stateTransition=null),textContent&amp;&amp;textContent.stateTransition&amp;&amp;(textContent.stateTransition=null),textGuide&amp;&amp;textGuide.stateTransition&amp;&amp;(textGuide.stateTransition=null),el.hasState()?(el.prevStates=el.currentStates,el.clearStates()):el.prevStates&amp;&amp;(el.prevStates=null)}})}function updateStates(model,view){var stateAnimationModel=model.getModel("stateAnimation"),enableAnimation=model.isAnimationEnabled(),duration=stateAnimationModel.get("duration"),stateTransition=duration&gt;0?{duration:duration,delay:stateAnimationModel.get("delay"),easing:stateAnimationModel.get("easing")}:null;view.eachRendered(function(el){if(el.states&amp;&amp;el.states.emphasis){if(isElementRemoved(el))return;if(el instanceof Path&amp;&amp;function savePathStates(el){var store=getSavedStates(el);store.normalFill=el.style.fill,store.normalStroke=el.style.stroke;var selectState=el.states.select||{};store.selectFill=selectState.style&amp;&amp;selectState.style.fill||null,store.selectStroke=selectState.style&amp;&amp;selectState.style.stroke||null}(el),el.__dirty){var prevStates=el.prevStates;prevStates&amp;&amp;el.useStates(prevStates)}if(enableAnimation){el.stateTransition=stateTransition;var textContent=el.getTextContent(),textGuide=el.getTextGuideLine();textContent&amp;&amp;(textContent.stateTransition=stateTransition),textGuide&amp;&amp;(textGuide.stateTransition=stateTransition)}el.__dirty&amp;&amp;applyElementStates(el)}})}prepare=function(ecIns){var scheduler=ecIns._scheduler;scheduler.restorePipelines(ecIns._model),scheduler.prepareStageTasks(),prepareView(ecIns,!0),prepareView(ecIns,!1),scheduler.plan()},prepareView=function(ecIns,isComponent){for(var ecModel=ecIns._model,scheduler=ecIns._scheduler,viewList=isComponent?ecIns._componentsViews:ecIns._chartsViews,viewMap=isComponent?ecIns._componentsMap:ecIns._chartsMap,zr=ecIns._zr,api=ecIns._api,i=0;i&lt;viewList.length;i++)viewList[i].__alive=!1;function doPrepare(model){var requireNewView=model.__requireNewView;model.__requireNewView=!1;var viewId="_ec_"+model.id+"_"+model.type,view2=!requireNewView&amp;&amp;viewMap[viewId];if(!view2){var classType=parseClassType(model.type);(view2=new(isComponent?ComponentView.getClass(classType.main,classType.sub):ChartView.getClass(classType.sub))).init(ecModel,api),viewMap[viewId]=view2,viewList.push(view2),zr.add(view2.group)}model.__viewId=view2.__id=viewId,view2.__alive=!0,view2.__model=model,view2.group.__ecComponentInfo={mainType:model.mainType,index:model.componentIndex},!isComponent&amp;&amp;scheduler.prepareView(view2,model,ecModel,api)}isComponent?ecModel.eachComponent(function(componentType,model){"series"!==componentType&amp;&amp;doPrepare(model)}):ecModel.eachSeries(doPrepare);for(i=0;i&lt;viewList.length;){var view=viewList[i];view.__alive?i++:(!isComponent&amp;&amp;view.renderTask.dispose(),zr.remove(view.group),view.dispose(ecModel,api),viewList.splice(i,1),viewMap[view.__id]===view&amp;&amp;delete viewMap[view.__id],view.__id=view.group.__ecComponentInfo=null)}},updateDirectly=function(ecIns,method,payload,mainType,subType){var ecModel=ecIns._model;if(ecModel.setUpdatePayload(payload),mainType){var query={};query[mainType+"Id"]=payload[mainType+"Id"],query[mainType+"Index"]=payload[mainType+"Index"],query[mainType+"Name"]=payload[mainType+"Name"];var condition={mainType:mainType,query:query};subType&amp;&amp;(condition.subType=subType);var excludeSeriesIdMap,excludeSeriesId=payload.excludeSeriesId;null!=excludeSeriesId&amp;&amp;(excludeSeriesIdMap=createHashMap(),each$f(normalizeToArray(excludeSeriesId),function(id){var modelId=convertOptionIdName(id,null);null!=modelId&amp;&amp;excludeSeriesIdMap.set(modelId,!0)})),ecModel&amp;&amp;ecModel.eachComponent(condition,function(model){if(!(excludeSeriesIdMap&amp;&amp;null!=excludeSeriesIdMap.get(model.id)))if(isHighDownPayload(payload))if(model instanceof SeriesModel)"highlight"!==payload.type||payload.notBlur||model.get(["emphasis","disabled"])||function blurSeriesFromHighlightPayload(seriesModel,payload,api){var seriesIndex=seriesModel.seriesIndex,data=seriesModel.getData(payload.dataType);if(data){var dataIndex=queryDataIndex(data,payload);dataIndex=(isArray$1(dataIndex)?dataIndex[0]:dataIndex)||0;var el=data.getItemGraphicEl(dataIndex);if(!el)for(var count2=data.count(),current=0;!el&amp;&amp;current&lt;count2;)el=data.getItemGraphicEl(current++);if(el){var ecData=getECData(el);blurSeries(seriesIndex,ecData.focus,ecData.blurScope,api)}else{var focus_1=seriesModel.get(["emphasis","focus"]),blurScope=seriesModel.get(["emphasis","blurScope"]);null!=focus_1&amp;&amp;blurSeries(seriesIndex,focus_1,blurScope,api)}}}(model,payload,ecIns._api);else{var _a2=findComponentHighDownDispatchers(model.mainType,model.componentIndex,payload.name,ecIns._api),focusSelf=_a2.focusSelf,dispatchers=_a2.dispatchers;"highlight"===payload.type&amp;&amp;focusSelf&amp;&amp;!payload.notBlur&amp;&amp;blurComponent(model.mainType,model.componentIndex,ecIns._api),dispatchers&amp;&amp;each$f(dispatchers,function(dispatcher){"highlight"===payload.type?enterEmphasis(dispatcher):leaveEmphasis(dispatcher)})}else isSelectChangePayload(payload)&amp;&amp;model instanceof SeriesModel&amp;&amp;(!function toggleSelectionFromPayload(seriesModel,payload,api){if(isSelectChangePayload(payload)){var dataType=payload.dataType,dataIndex=queryDataIndex(seriesModel.getData(dataType),payload);isArray$1(dataIndex)||(dataIndex=[dataIndex]),seriesModel["toggleSelect"===payload.type?"toggleSelect":"select"===payload.type?"select":"unselect"](dataIndex,dataType)}}(model,payload,ecIns._api),updateSeriesElementSelection(model),markStatusToUpdate(ecIns))},ecIns),ecModel&amp;&amp;ecModel.eachComponent(condition,function(model){excludeSeriesIdMap&amp;&amp;null!=excludeSeriesIdMap.get(model.id)||callView(ecIns["series"===mainType?"_chartsMap":"_componentsMap"][model.__viewId])},ecIns)}else each$f([].concat(ecIns._componentsViews).concat(ecIns._chartsViews),callView);function callView(view){view&amp;&amp;view.__alive&amp;&amp;view[method]&amp;&amp;view[method](view.__model,ecModel,ecIns._api,payload)}},updateMethods={prepareAndUpdate:function(payload){prepare(this),updateMethods.update.call(this,payload,{optionChanged:null!=payload.newOption})},update:function(payload,updateParams){var ecModel=this._model,api=this._api,zr=this._zr,coordSysMgr=this._coordSysMgr,scheduler=this._scheduler;if(ecModel){ecModel.setUpdatePayload(payload),scheduler.restoreData(ecModel,payload),scheduler.performSeriesTasks(ecModel),coordSysMgr.create(ecModel,api),scheduler.performDataProcessorTasks(ecModel,payload),updateStreamModes(this,ecModel),coordSysMgr.update(ecModel,api),clearColorPalette(ecModel),scheduler.performVisualTasks(ecModel,payload),render(this,ecModel,api,payload,updateParams);var backgroundColor2=ecModel.get("backgroundColor")||"transparent",darkMode=ecModel.get("darkMode");zr.setBackgroundColor(backgroundColor2),null!=darkMode&amp;&amp;"auto"!==darkMode&amp;&amp;zr.setDarkMode(darkMode),lifecycle.trigger("afterupdate",ecModel,api)}},updateTransform:function(payload){var _this=this,ecModel=this._model,api=this._api;if(ecModel){ecModel.setUpdatePayload(payload);var componentDirtyList=[];ecModel.eachComponent(function(componentType,componentModel){if("series"!==componentType){var componentView=_this.getViewOfComponentModel(componentModel);if(componentView&amp;&amp;componentView.__alive)if(componentView.updateTransform){var result=componentView.updateTransform(componentModel,ecModel,api,payload);result&amp;&amp;result.update&amp;&amp;componentDirtyList.push(componentView)}else componentDirtyList.push(componentView)}});var seriesDirtyMap=createHashMap();ecModel.eachSeries(function(seriesModel){var chartView=_this._chartsMap[seriesModel.__viewId];if(chartView.updateTransform){var result=chartView.updateTransform(seriesModel,ecModel,api,payload);result&amp;&amp;result.update&amp;&amp;seriesDirtyMap.set(seriesModel.uid,1)}else seriesDirtyMap.set(seriesModel.uid,1)}),clearColorPalette(ecModel),this._scheduler.performVisualTasks(ecModel,payload,{setDirty:!0,dirtyMap:seriesDirtyMap}),renderSeries(this,ecModel,api,payload,{},seriesDirtyMap),lifecycle.trigger("afterupdate",ecModel,api)}},updateView:function(payload){var ecModel=this._model;ecModel&amp;&amp;(ecModel.setUpdatePayload(payload),ChartView.markUpdateMethod(payload,"updateView"),clearColorPalette(ecModel),this._scheduler.performVisualTasks(ecModel,payload,{setDirty:!0}),render(this,ecModel,this._api,payload,{}),lifecycle.trigger("afterupdate",ecModel,this._api))},updateVisual:function(payload){var _this=this,ecModel=this._model;ecModel&amp;&amp;(ecModel.setUpdatePayload(payload),ecModel.eachSeries(function(seriesModel){seriesModel.getData().clearAllVisual()}),ChartView.markUpdateMethod(payload,"updateVisual"),clearColorPalette(ecModel),this._scheduler.performVisualTasks(ecModel,payload,{visualType:"visual",setDirty:!0}),ecModel.eachComponent(function(componentType,componentModel){if("series"!==componentType){var componentView=_this.getViewOfComponentModel(componentModel);componentView&amp;&amp;componentView.__alive&amp;&amp;componentView.updateVisual(componentModel,ecModel,_this._api,payload)}}),ecModel.eachSeries(function(seriesModel){_this._chartsMap[seriesModel.__viewId].updateVisual(seriesModel,ecModel,_this._api,payload)}),lifecycle.trigger("afterupdate",ecModel,this._api))},updateLayout:function(payload){updateMethods.update.call(this,payload)}},doConvertPixel=function(ecIns,methodName,finder,value){if(ecIns._disposed)ecIns.id;else for(var result,ecModel=ecIns._model,coordSysList=ecIns._coordSysMgr.getCoordinateSystems(),parsedFinder=parseFinder$1(ecModel,finder),i=0;i&lt;coordSysList.length;i++){var coordSys=coordSysList[i];if(coordSys[methodName]&amp;&amp;null!=(result=coordSys[methodName](ecModel,parsedFinder,value)))return result}},updateStreamModes=function(ecIns,ecModel){var chartsMap=ecIns._chartsMap,scheduler=ecIns._scheduler;ecModel.eachSeries(function(seriesModel){scheduler.updateStreamModes(seriesModel,chartsMap[seriesModel.__viewId])})},doDispatchAction=function(payload,silent){var _this=this,ecModel=this.getModel(),payloadType=payload.type,escapeConnect=payload.escapeConnect,actionWrap=actions[payloadType],actionInfo2=actionWrap.actionInfo,cptTypeTmp=(actionInfo2.update||"update").split(":"),updateMethod=cptTypeTmp.pop(),cptType=null!=cptTypeTmp[0]&amp;&amp;parseClassType(cptTypeTmp[0]);this.__flagInMainProcess=!0;var payloads=[payload],batched=!1;payload.batch&amp;&amp;(batched=!0,payloads=map$1(payload.batch,function(item){return(item=defaults(extend({},item),payload)).batch=null,item}));var eventObj,eventObjBatch=[],isSelectChange=isSelectChangePayload(payload),isHighDown=isHighDownPayload(payload);if(isHighDown&amp;&amp;allLeaveBlur(this._api),each$f(payloads,function(batchItem){if((eventObj=(eventObj=actionWrap.action(batchItem,_this._model,_this._api))||extend({},batchItem)).type=actionInfo2.event||eventObj.type,eventObjBatch.push(eventObj),isHighDown){var _a2=preParseFinder(payload),queryOptionMap=_a2.queryOptionMap,componentMainType=_a2.mainTypeSpecified?queryOptionMap.keys()[0]:"series";updateDirectly(_this,updateMethod,batchItem,componentMainType),markStatusToUpdate(_this)}else isSelectChange?(updateDirectly(_this,updateMethod,batchItem,"series"),markStatusToUpdate(_this)):cptType&amp;&amp;updateDirectly(_this,updateMethod,batchItem,cptType.main,cptType.sub)}),"none"!==updateMethod&amp;&amp;!isHighDown&amp;&amp;!isSelectChange&amp;&amp;!cptType)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,payload),this[PENDING_UPDATE]=null):updateMethods[updateMethod].call(this,payload)}catch(e2){throw this.__flagInMainProcess=!1,e2}if(eventObj=batched?{type:actionInfo2.event||payloadType,escapeConnect:escapeConnect,batch:eventObjBatch}:eventObjBatch[0],this.__flagInMainProcess=!1,!silent){var messageCenter=this._messageCenter;if(messageCenter.trigger(eventObj.type,eventObj),isSelectChange){var newObj={type:"selectchanged",escapeConnect:escapeConnect,selected:getAllSelectedIndices(ecModel),isFromClick:payload.isFromClick||!1,fromAction:payload.type,fromActionPayload:payload};messageCenter.trigger(newObj.type,newObj)}}},flushPendingActions=function(silent){for(var pendingActions=this._pendingActions;pendingActions.length;){var payload=pendingActions.shift();doDispatchAction.call(this,payload,silent)}},triggerUpdatedEvent=function(silent){!silent&amp;&amp;this.trigger("updated")},bindRenderedEvent=function(zr,ecIns){zr.on("rendered",function(params){ecIns.trigger("rendered",params),!zr.animation.isFinished()||ecIns[PENDING_UPDATE]||ecIns._scheduler.unfinished||ecIns._pendingActions.length||ecIns.trigger("finished")})},bindMouseEvent=function(zr,ecIns){zr.on("mouseover",function(e2){var dispatcher=findEventDispatcher(e2.target,isHighDownDispatcher);dispatcher&amp;&amp;(!function handleGlobalMouseOverForHighDown(dispatcher,e2,api){var ecData=getECData(dispatcher),_a2=findComponentHighDownDispatchers(ecData.componentMainType,ecData.componentIndex,ecData.componentHighDownName,api),dispatchers=_a2.dispatchers,focusSelf=_a2.focusSelf;dispatchers?(focusSelf&amp;&amp;blurComponent(ecData.componentMainType,ecData.componentIndex,api),each$f(dispatchers,function(dispatcher2){return enterEmphasisWhenMouseOver(dispatcher2,e2)})):(blurSeries(ecData.seriesIndex,ecData.focus,ecData.blurScope,api),"self"===ecData.focus&amp;&amp;blurComponent(ecData.componentMainType,ecData.componentIndex,api),enterEmphasisWhenMouseOver(dispatcher,e2))}(dispatcher,e2,ecIns._api),markStatusToUpdate(ecIns))}).on("mouseout",function(e2){var dispatcher=findEventDispatcher(e2.target,isHighDownDispatcher);dispatcher&amp;&amp;(!function handleGlobalMouseOutForHighDown(dispatcher,e2,api){allLeaveBlur(api);var ecData=getECData(dispatcher),dispatchers=findComponentHighDownDispatchers(ecData.componentMainType,ecData.componentIndex,ecData.componentHighDownName,api).dispatchers;dispatchers?each$f(dispatchers,function(dispatcher2){return leaveEmphasisWhenMouseOut(dispatcher2,e2)}):leaveEmphasisWhenMouseOut(dispatcher,e2)}(dispatcher,e2,ecIns._api),markStatusToUpdate(ecIns))}).on("click",function(e2){var dispatcher=findEventDispatcher(e2.target,function(target){return null!=getECData(target).dataIndex},!0);if(dispatcher){var actionType=dispatcher.selected?"unselect":"select",ecData=getECData(dispatcher);ecIns._api.dispatchAction({type:actionType,dataType:ecData.dataType,dataIndexInside:ecData.dataIndex,seriesIndex:ecData.seriesIndex,isFromClick:!0})}})},render=function(ecIns,ecModel,api,payload,updateParams){!function allocateZlevels(ecModel){var componentZLevels=[],seriesZLevels=[],hasSeparateZLevel=!1;if(ecModel.eachComponent(function(componentType,componentModel){var zlevel=componentModel.get("zlevel")||0,z=componentModel.get("z")||0,zlevelKey=componentModel.getZLevelKey();hasSeparateZLevel=hasSeparateZLevel||!!zlevelKey,("series"===componentType?seriesZLevels:componentZLevels).push({zlevel:zlevel,z:z,idx:componentModel.componentIndex,type:componentType,key:zlevelKey})}),hasSeparateZLevel){var lastSeriesZLevel_1,lastSeriesKey_1,zLevels=componentZLevels.concat(seriesZLevels);sort$2(zLevels,function(a,b){return a.zlevel===b.zlevel?a.z-b.z:a.zlevel-b.zlevel}),each$f(zLevels,function(item){var componentModel=ecModel.getComponent(item.type,item.idx),zlevel=item.zlevel,key=item.key;null!=lastSeriesZLevel_1&amp;&amp;(zlevel=Math.max(lastSeriesZLevel_1,zlevel)),key?(zlevel===lastSeriesZLevel_1&amp;&amp;key!==lastSeriesKey_1&amp;&amp;zlevel++,lastSeriesKey_1=key):lastSeriesKey_1&amp;&amp;(zlevel===lastSeriesZLevel_1&amp;&amp;zlevel++,lastSeriesKey_1=""),lastSeriesZLevel_1=zlevel,componentModel.setZLevel(zlevel)})}}(ecModel),renderComponents(ecIns,ecModel,api,payload,updateParams),each$f(ecIns._chartsViews,function(chart){chart.__alive=!1}),renderSeries(ecIns,ecModel,api,payload,updateParams),each$f(ecIns._chartsViews,function(chart){chart.__alive||chart.remove(ecModel,api)})},renderComponents=function(ecIns,ecModel,api,payload,updateParams,dirtyList){each$f(dirtyList||ecIns._componentsViews,function(componentView){var componentModel=componentView.__model;clearStates(componentModel,componentView),componentView.render(componentModel,ecModel,api,payload),updateZ2(componentModel,componentView),updateStates(componentModel,componentView)})},renderSeries=function(ecIns,ecModel,api,payload,updateParams,dirtyMap){var scheduler=ecIns._scheduler;updateParams=extend(updateParams||{},{updatedSeries:ecModel.getSeries()}),lifecycle.trigger("series:beforeupdate",ecModel,api,updateParams);var unfinished=!1;ecModel.eachSeries(function(seriesModel){var chartView=ecIns._chartsMap[seriesModel.__viewId];chartView.__alive=!0;var renderTask=chartView.renderTask;scheduler.updatePayload(renderTask,payload),clearStates(seriesModel,chartView),dirtyMap&amp;&amp;dirtyMap.get(seriesModel.uid)&amp;&amp;renderTask.dirty(),renderTask.perform(scheduler.getPerformArgs(renderTask))&amp;&amp;(unfinished=!0),chartView.group.silent=!!seriesModel.get("silent"),function updateBlend(seriesModel,chartView){var blendMode=seriesModel.get("blendMode")||null;chartView.eachRendered(function(el){el.isGroup||(el.style.blend=blendMode)})}(seriesModel,chartView),updateSeriesElementSelection(seriesModel)}),scheduler.unfinished=unfinished||scheduler.unfinished,lifecycle.trigger("series:layoutlabels",ecModel,api,updateParams),lifecycle.trigger("series:transition",ecModel,api,updateParams),ecModel.eachSeries(function(seriesModel){var chartView=ecIns._chartsMap[seriesModel.__viewId];updateZ2(seriesModel,chartView),updateStates(seriesModel,chartView)}),function updateHoverLayerStatus(ecIns,ecModel){var zr=ecIns._zr,storage2=zr.storage,elCount=0;storage2.traverse(function(el){el.isGroup||elCount++}),elCount&gt;ecModel.get("hoverLayerThreshold")&amp;&amp;!env.node&amp;&amp;!env.worker&amp;&amp;ecModel.eachSeries(function(seriesModel){if(!seriesModel.preventUsingHoverLayer){var chartView=ecIns._chartsMap[seriesModel.__viewId];chartView.__alive&amp;&amp;chartView.eachRendered(function(el){el.states.emphasis&amp;&amp;(el.states.emphasis.hoverLayer=!0)})}})}(ecIns,ecModel),lifecycle.trigger("series:afterupdate",ecModel,api,updateParams)},markStatusToUpdate=function(ecIns){ecIns.__needsUpdateStatus=!0,ecIns.getZr().wakeUp()},applyChangedStates=function(ecIns){ecIns.__needsUpdateStatus&amp;&amp;(ecIns.getZr().storage.traverse(function(el){isElementRemoved(el)||applyElementStates(el)}),ecIns.__needsUpdateStatus=!1)},createExtensionAPI=function(ecIns){return new(function(_super2){function class_1(){return null!==_super2&amp;&amp;_super2.apply(this,arguments)||this}return __extends$1(class_1,_super2),class_1.prototype.getCoordinateSystems=function(){return ecIns._coordSysMgr.getCoordinateSystems()},class_1.prototype.getComponentByElement=function(el){for(;el;){var modelInfo=el.__ecComponentInfo;if(null!=modelInfo)return ecIns._model.getComponent(modelInfo.mainType,modelInfo.index);el=el.parent}},class_1.prototype.enterEmphasis=function(el,highlightDigit){enterEmphasis(el,highlightDigit),markStatusToUpdate(ecIns)},class_1.prototype.leaveEmphasis=function(el,highlightDigit){leaveEmphasis(el,highlightDigit),markStatusToUpdate(ecIns)},class_1.prototype.enterBlur=function(el){enterBlur(el),markStatusToUpdate(ecIns)},class_1.prototype.leaveBlur=function(el){leaveBlur(el),markStatusToUpdate(ecIns)},class_1.prototype.enterSelect=function(el){enterSelect(el),markStatusToUpdate(ecIns)},class_1.prototype.leaveSelect=function(el){leaveSelect(el),markStatusToUpdate(ecIns)},class_1.prototype.getModel=function(){return ecIns.getModel()},class_1.prototype.getViewOfComponentModel=function(componentModel){return ecIns.getViewOfComponentModel(componentModel)},class_1.prototype.getViewOfSeriesModel=function(seriesModel){return ecIns.getViewOfSeriesModel(seriesModel)},class_1}(ExtensionAPI))(ecIns)},enableConnect=function(chart){function updateConnectedChartsStatus(charts,status){for(var i=0;i&lt;charts.length;i++){charts[i].__connectUpdateStatus=status}}each$f(eventActionMap,function(actionType,eventType){chart._messageCenter.on(eventType,function(event){if(connectedGroups[chart.group]&amp;&amp;0!==chart.__connectUpdateStatus){if(event&amp;&amp;event.escapeConnect)return;var action_1=chart.makeActionFromEvent(event),otherCharts_1=[];each$f(instances,function(otherChart){otherChart!==chart&amp;&amp;otherChart.group===chart.group&amp;&amp;otherCharts_1.push(otherChart)}),updateConnectedChartsStatus(otherCharts_1,0),each$f(otherCharts_1,function(otherChart){1!==otherChart.__connectUpdateStatus&amp;&amp;otherChart.dispatchAction(action_1)}),updateConnectedChartsStatus(otherCharts_1,2)}})})}}(),ECharts2}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on"),echartsProto.off=createRegisterEventWithLowercaseECharts("off"),echartsProto.one=function(eventName,cb,ctx){var self2=this;this.on.call(this,eventName,function wrapped(){for(var args2=[],_i=0;_i&lt;arguments.length;_i++)args2[_i]=arguments[_i];cb&amp;&amp;cb.apply&amp;&amp;cb.apply(this,args2),self2.off(eventName,wrapped)},ctx)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(dom,theme2,opts){var isClient=!(opts&amp;&amp;opts.ssr);if(isClient){var existInstance=getInstanceByDom(dom);if(existInstance)return existInstance}var chart=new ECharts(dom,theme2,opts);return chart.id="ec_"+idBase++,instances[chart.id]=chart,isClient&amp;&amp;setAttribute(dom,DOM_ATTRIBUTE_KEY,chart.id),enableConnect(chart),lifecycle.trigger("afterinit",chart),chart}function connect(groupId){if(isArray$1(groupId)){var charts=groupId;groupId=null,each$f(charts,function(chart){null!=chart.group&amp;&amp;(groupId=chart.group)}),groupId=groupId||"g_"+groupIdBase++,each$f(charts,function(chart){chart.group=groupId})}return connectedGroups[groupId]=!0,groupId}function disconnect(groupId){connectedGroups[groupId]=!1}var disConnect=disconnect;function dispose(chart){isString(chart)?chart=instances[chart]:chart instanceof ECharts||(chart=getInstanceByDom(chart)),chart instanceof ECharts&amp;&amp;!chart.isDisposed()&amp;&amp;chart.dispose()}function getInstanceByDom(dom){return instances[function getAttribute(dom,key){return dom.getAttribute?dom.getAttribute(key):dom[key]}(dom,DOM_ATTRIBUTE_KEY)]}function getInstanceById(key){return instances[key]}function registerTheme(name,theme2){themeStorage[name]=theme2}function registerPreprocessor(preprocessorFunc){indexOf(optionPreprocessorFuncs,preprocessorFunc)&lt;0&amp;&amp;optionPreprocessorFuncs.push(preprocessorFunc)}function registerProcessor(priority,processor){normalizeRegister(dataProcessorFuncs,priority,processor,2e3)}function registerPostInit(postInitFunc){registerUpdateLifecycle("afterinit",postInitFunc)}function registerPostUpdate(postUpdateFunc){registerUpdateLifecycle("afterupdate",postUpdateFunc)}function registerUpdateLifecycle(name,cb){lifecycle.on(name,cb)}function registerAction(actionInfo2,eventName,action){isFunction(eventName)&amp;&amp;(action=eventName,eventName="");var actionType=isObject$3(actionInfo2)?actionInfo2.type:[actionInfo2,actionInfo2={event:eventName}][0];actionInfo2.event=(actionInfo2.event||actionType).toLowerCase(),eventName=actionInfo2.event,eventActionMap[eventName]||(assert(ACTION_REG.test(actionType)&amp;&amp;ACTION_REG.test(eventName)),actions[actionType]||(actions[actionType]={action:action,actionInfo:actionInfo2}),eventActionMap[eventName]=actionType)}function registerCoordinateSystem(type,coordSysCreator){CoordinateSystemManager.register(type,coordSysCreator)}function getCoordinateSystemDimensions(type){var coordSysCreator=CoordinateSystemManager.get(type);if(coordSysCreator)return coordSysCreator.getDimensionsInfo?coordSysCreator.getDimensionsInfo():coordSysCreator.dimensions.slice()}function registerLayout(priority,layoutTask){normalizeRegister(visualFuncs,priority,layoutTask,1e3,"layout")}function registerVisual(priority,visualTask){normalizeRegister(visualFuncs,priority,visualTask,3e3,"visual")}var registeredTasks=[];function normalizeRegister(targetList,priority,fn,defaultPriority,visualType){if((isFunction(priority)||isObject$3(priority))&amp;&amp;(fn=priority,priority=defaultPriority),!(indexOf(registeredTasks,fn)&gt;=0)){registeredTasks.push(fn);var stageHandler=Scheduler.wrapStageHandler(fn,visualType);stageHandler.__prio=priority,stageHandler.__raw=fn,targetList.push(stageHandler)}}function registerLoading(name,loadingFx){loadingEffects[name]=loadingFx}function setCanvasCreator(creator){setPlatformAPI({createCanvas:creator})}function registerMap$1(mapName,geoJson,specialAreas){var registerMap2=getImpl("registerMap");registerMap2&amp;&amp;registerMap2(mapName,geoJson,specialAreas)}function getMap(mapName){var getMap2=getImpl("getMap");return getMap2&amp;&amp;getMap2(mapName)}var registerTransform=function registerExternalTransform(externalTransform){var type=(externalTransform=clone$4(externalTransform)).type;type||throwError("");var typeParsed=type.split(":");2!==typeParsed.length&amp;&amp;throwError("");var isBuiltIn=!1;"echarts"===typeParsed[0]&amp;&amp;(type=typeParsed[1],isBuiltIn=!0),externalTransform.__isBuiltIn=isBuiltIn,externalTransformMap.set(type,externalTransform)};registerVisual(2e3,seriesStyleTask),registerVisual(4500,dataStyleTask),registerVisual(4500,dataColorPaletteTask),registerVisual(2e3,seriesSymbolTask),registerVisual(4500,dataSymbolTask),registerVisual(7e3,function decalVisual(ecModel,api){ecModel.eachRawSeries(function(seriesModel){if(!ecModel.isSeriesFiltered(seriesModel)){var data=seriesModel.getData();data.hasItemVisual()&amp;&amp;data.each(function(idx){var decal2=data.getItemVisual(idx,"decal");decal2&amp;&amp;(data.ensureUniqueItemVisual(idx,"style").decal=createOrUpdatePatternFromDecal(decal2,api))});var decal=data.getVisual("decal");if(decal)data.getVisual("style").decal=createOrUpdatePatternFromDecal(decal,api)}})}),registerPreprocessor(globalBackwardCompat),registerProcessor(900,function dataStack$1(ecModel){var stackInfoMap=createHashMap();ecModel.eachSeries(function(seriesModel){var stack=seriesModel.get("stack");if(stack){var stackInfoList=stackInfoMap.get(stack)||stackInfoMap.set(stack,[]),data=seriesModel.getData(),stackInfo={stackResultDimension:data.getCalculationInfo("stackResultDimension"),stackedOverDimension:data.getCalculationInfo("stackedOverDimension"),stackedDimension:data.getCalculationInfo("stackedDimension"),stackedByDimension:data.getCalculationInfo("stackedByDimension"),isStackedByIndex:data.getCalculationInfo("isStackedByIndex"),data:data,seriesModel:seriesModel};if(!stackInfo.stackedDimension||!stackInfo.isStackedByIndex&amp;&amp;!stackInfo.stackedByDimension)return;stackInfoList.length&amp;&amp;data.setCalculationInfo("stackedOnSeries",stackInfoList[stackInfoList.length-1].seriesModel),stackInfoList.push(stackInfo)}}),stackInfoMap.each(calculateStack)}),registerLoading("default",function defaultLoading(api,opts){defaults(opts=opts||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var group=new Group$3,mask=new Rect$2({style:{fill:opts.maskColor},zlevel:opts.zlevel,z:1e4});group.add(mask);var arc,textContent=new ZRText({style:{text:opts.text,fill:opts.textColor,fontSize:opts.fontSize,fontWeight:opts.fontWeight,fontStyle:opts.fontStyle,fontFamily:opts.fontFamily},zlevel:opts.zlevel,z:10001}),labelRect=new Rect$2({style:{fill:"none"},textContent:textContent,textConfig:{position:"right",distance:10},zlevel:opts.zlevel,z:10001});return group.add(labelRect),opts.showSpinner&amp;&amp;((arc=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:opts.spinnerRadius},style:{stroke:opts.color,lineCap:"round",lineWidth:opts.lineWidth},zlevel:opts.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*PI$5/2}).start("circularInOut"),arc.animateShape(!0).when(1e3,{startAngle:3*PI$5/2}).delay(300).start("circularInOut"),group.add(arc)),group.resize=function(){var textWidth=textContent.getBoundingRect().width,r=opts.showSpinner?opts.spinnerRadius:0,cx=(api.getWidth()-2*r-(opts.showSpinner&amp;&amp;textWidth?10:0)-textWidth)/2-(opts.showSpinner&amp;&amp;textWidth?0:5+textWidth/2)+(opts.showSpinner?0:textWidth/2)+(textWidth?0:r),cy=api.getHeight()/2;opts.showSpinner&amp;&amp;arc.setShape({cx:cx,cy:cy}),labelRect.setShape({x:cx-r,y:cy-r,width:2*r,height:2*r}),mask.setShape({x:0,y:0,width:api.getWidth(),height:api.getHeight()})},group.resize(),group}),registerAction({type:"highlight",event:"highlight",update:"highlight"},noop),registerAction({type:"downplay",event:"downplay",update:"downplay"},noop),registerAction({type:"select",event:"select",update:"select"},noop),registerAction({type:"unselect",event:"unselect",update:"unselect"},noop),registerAction({type:"toggleSelect",event:"toggleSelect",update:"toggleSelect"},noop),registerTheme("light",lightTheme),registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor:registerPreprocessor,registerProcessor:registerProcessor,registerPostInit:registerPostInit,registerPostUpdate:registerPostUpdate,registerUpdateLifecycle:registerUpdateLifecycle,registerAction:registerAction,registerCoordinateSystem:registerCoordinateSystem,registerLayout:registerLayout,registerVisual:registerVisual,registerTransform:registerTransform,registerLoading:registerLoading,registerMap:registerMap$1,registerImpl:function registerImpl(name,impl){implsStore[name]=impl},PRIORITY:PRIORITY,ComponentModel:ComponentModel,ComponentView:ComponentView,SeriesModel:SeriesModel,ChartView:ChartView,registerComponentModel:function(ComponentModelClass){ComponentModel.registerClass(ComponentModelClass)},registerComponentView:function(ComponentViewClass){ComponentView.registerClass(ComponentViewClass)},registerSeriesModel:function(SeriesModelClass){SeriesModel.registerClass(SeriesModelClass)},registerChartView:function(ChartViewClass){ChartView.registerClass(ChartViewClass)},registerSubTypeDefaulter:function(componentType,defaulter){ComponentModel.registerSubTypeDefaulter(componentType,defaulter)},registerPainter:function(painterType,PainterCtor){registerPainter(painterType,PainterCtor)}};function use(ext){isArray$1(ext)?each$f(ext,function(singleExt){use(singleExt)}):indexOf(extensions,ext)&gt;=0||(extensions.push(ext),isFunction(ext)&amp;&amp;(ext={install:ext}),ext.install(extensionRegisters))}function dataIndexMapValueLength(valNumOrArrLengthMoreThan2){return null==valNumOrArrLengthMoreThan2?0:valNumOrArrLengthMoreThan2.length||1}function defaultKeyGetter(item){return item}var DataDiffer=function(){function DataDiffer2(oldArr,newArr,oldKeyGetter,newKeyGetter,context,diffMode){this._old=oldArr,this._new=newArr,this._oldKeyGetter=oldKeyGetter||defaultKeyGetter,this._newKeyGetter=newKeyGetter||defaultKeyGetter,this.context=context,this._diffModeMultiple="multiple"===diffMode}return DataDiffer2.prototype.add=function(func){return this._add=func,this},DataDiffer2.prototype.update=function(func){return this._update=func,this},DataDiffer2.prototype.updateManyToOne=function(func){return this._updateManyToOne=func,this},DataDiffer2.prototype.updateOneToMany=function(func){return this._updateOneToMany=func,this},DataDiffer2.prototype.updateManyToMany=function(func){return this._updateManyToMany=func,this},DataDiffer2.prototype.remove=function(func){return this._remove=func,this},DataDiffer2.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},DataDiffer2.prototype._executeOneToOne=function(){var oldArr=this._old,newArr=this._new,newDataIndexMap={},oldDataKeyArr=new Array(oldArr.length),newDataKeyArr=new Array(newArr.length);this._initIndexMap(oldArr,null,oldDataKeyArr,"_oldKeyGetter"),this._initIndexMap(newArr,newDataIndexMap,newDataKeyArr,"_newKeyGetter");for(var i=0;i&lt;oldArr.length;i++){var oldKey=oldDataKeyArr[i],newIdxMapVal=newDataIndexMap[oldKey],newIdxMapValLen=dataIndexMapValueLength(newIdxMapVal);if(newIdxMapValLen&gt;1){var newIdx=newIdxMapVal.shift();1===newIdxMapVal.length&amp;&amp;(newDataIndexMap[oldKey]=newIdxMapVal[0]),this._update&amp;&amp;this._update(newIdx,i)}else 1===newIdxMapValLen?(newDataIndexMap[oldKey]=null,this._update&amp;&amp;this._update(newIdxMapVal,i)):this._remove&amp;&amp;this._remove(i)}this._performRestAdd(newDataKeyArr,newDataIndexMap)},DataDiffer2.prototype._executeMultiple=function(){var oldArr=this._old,newArr=this._new,oldDataIndexMap={},newDataIndexMap={},oldDataKeyArr=[],newDataKeyArr=[];this._initIndexMap(oldArr,oldDataIndexMap,oldDataKeyArr,"_oldKeyGetter"),this._initIndexMap(newArr,newDataIndexMap,newDataKeyArr,"_newKeyGetter");for(var i=0;i&lt;oldDataKeyArr.length;i++){var oldKey=oldDataKeyArr[i],oldIdxMapVal=oldDataIndexMap[oldKey],newIdxMapVal=newDataIndexMap[oldKey],oldIdxMapValLen=dataIndexMapValueLength(oldIdxMapVal),newIdxMapValLen=dataIndexMapValueLength(newIdxMapVal);if(oldIdxMapValLen&gt;1&amp;&amp;1===newIdxMapValLen)this._updateManyToOne&amp;&amp;this._updateManyToOne(newIdxMapVal,oldIdxMapVal),newDataIndexMap[oldKey]=null;else if(1===oldIdxMapValLen&amp;&amp;newIdxMapValLen&gt;1)this._updateOneToMany&amp;&amp;this._updateOneToMany(newIdxMapVal,oldIdxMapVal),newDataIndexMap[oldKey]=null;else if(1===oldIdxMapValLen&amp;&amp;1===newIdxMapValLen)this._update&amp;&amp;this._update(newIdxMapVal,oldIdxMapVal),newDataIndexMap[oldKey]=null;else if(oldIdxMapValLen&gt;1&amp;&amp;newIdxMapValLen&gt;1)this._updateManyToMany&amp;&amp;this._updateManyToMany(newIdxMapVal,oldIdxMapVal),newDataIndexMap[oldKey]=null;else if(oldIdxMapValLen&gt;1)for(var i_1=0;i_1&lt;oldIdxMapValLen;i_1++)this._remove&amp;&amp;this._remove(oldIdxMapVal[i_1]);else this._remove&amp;&amp;this._remove(oldIdxMapVal)}this._performRestAdd(newDataKeyArr,newDataIndexMap)},DataDiffer2.prototype._performRestAdd=function(newDataKeyArr,newDataIndexMap){for(var i=0;i&lt;newDataKeyArr.length;i++){var newKey=newDataKeyArr[i],newIdxMapVal=newDataIndexMap[newKey],idxMapValLen=dataIndexMapValueLength(newIdxMapVal);if(idxMapValLen&gt;1)for(var j=0;j&lt;idxMapValLen;j++)this._add&amp;&amp;this._add(newIdxMapVal[j]);else 1===idxMapValLen&amp;&amp;this._add&amp;&amp;this._add(newIdxMapVal);newDataIndexMap[newKey]=null}},DataDiffer2.prototype._initIndexMap=function(arr,map2,keyArr,keyGetterName){for(var cbModeMultiple=this._diffModeMultiple,i=0;i&lt;arr.length;i++){var key="_ec_"+this[keyGetterName](arr[i],i);if(cbModeMultiple||(keyArr[i]=key),map2){var idxMapVal=map2[key],idxMapValLen=dataIndexMapValueLength(idxMapVal);0===idxMapValLen?(map2[key]=i,cbModeMultiple&amp;&amp;keyArr.push(key)):1===idxMapValLen?map2[key]=[idxMapVal,i]:idxMapVal.push(i)}}},DataDiffer2}(),DimensionUserOuput=function(){function DimensionUserOuput2(encode,dimRequest){this._encode=encode,this._schema=dimRequest}return DimensionUserOuput2.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},DimensionUserOuput2.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},DimensionUserOuput2}();function getOrCreateEncodeArr(encode,dim){return encode.hasOwnProperty(dim)||(encode[dim]=[]),encode[dim]}function getDimensionTypeByAxis(axisType){return"category"===axisType?"ordinal":"time"===axisType?"time":"float"}var SeriesDimensionDefine=function(){return function SeriesDimensionDefine2(opt){this.otherDims={},null!=opt&amp;&amp;extend(this,opt)}}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function SeriesDataSchema2(opt){this.dimensions=opt.dimensions,this._dimOmitted=opt.dimensionOmitted,this.source=opt.source,this._fullDimCount=opt.fullDimensionCount,this._updateDimOmitted(opt.dimensionOmitted)}return SeriesDataSchema2.prototype.isDimensionOmitted=function(){return this._dimOmitted},SeriesDataSchema2.prototype._updateDimOmitted=function(dimensionOmitted){this._dimOmitted=dimensionOmitted,dimensionOmitted&amp;&amp;(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},SeriesDataSchema2.prototype.getSourceDimensionIndex=function(dimName){return retrieve2(this._dimNameMap.get(dimName),-1)},SeriesDataSchema2.prototype.getSourceDimension=function(dimIndex){var dimensionsDefine=this.source.dimensionsDefine;if(dimensionsDefine)return dimensionsDefine[dimIndex]},SeriesDataSchema2.prototype.makeStoreSchema=function(){for(var dimCount=this._fullDimCount,willRetrieveDataByName=shouldRetrieveDataByName(this.source),makeHashStrict=!shouldOmitUnusedDimensions(dimCount),dimHash="",dims=[],fullDimIdx=0,seriesDimIdx=0;fullDimIdx&lt;dimCount;fullDimIdx++){var property=void 0,type=void 0,ordinalMeta=void 0,seriesDimDef=this.dimensions[seriesDimIdx];if(seriesDimDef&amp;&amp;seriesDimDef.storeDimIndex===fullDimIdx)property=willRetrieveDataByName?seriesDimDef.name:null,type=seriesDimDef.type,ordinalMeta=seriesDimDef.ordinalMeta,seriesDimIdx++;else{var sourceDimDef=this.getSourceDimension(fullDimIdx);sourceDimDef&amp;&amp;(property=willRetrieveDataByName?sourceDimDef.name:null,type=sourceDimDef.type)}dims.push({property:property,type:type,ordinalMeta:ordinalMeta}),!willRetrieveDataByName||null==property||seriesDimDef&amp;&amp;seriesDimDef.isCalculationCoord||(dimHash+=makeHashStrict?property.replace(/\`/g,"`1").replace(/\$/g,"`2"):property),dimHash+="$",dimHash+=dimTypeShort[type]||"f",ordinalMeta&amp;&amp;(dimHash+=ordinalMeta.uid),dimHash+="$"}var source=this.source;return{dimensions:dims,hash:[source.seriesLayoutBy,source.startIndex,dimHash].join("$$")}},SeriesDataSchema2.prototype.makeOutputDimensionNames=function(){for(var result=[],fullDimIdx=0,seriesDimIdx=0;fullDimIdx&lt;this._fullDimCount;fullDimIdx++){var name_1=void 0,seriesDimDef=this.dimensions[seriesDimIdx];if(seriesDimDef&amp;&amp;seriesDimDef.storeDimIndex===fullDimIdx)seriesDimDef.isCalculationCoord||(name_1=seriesDimDef.name),seriesDimIdx++;else{var sourceDimDef=this.getSourceDimension(fullDimIdx);sourceDimDef&amp;&amp;(name_1=sourceDimDef.name)}result.push(name_1)}return result},SeriesDataSchema2.prototype.appendCalculationDimension=function(dimDef){this.dimensions.push(dimDef),dimDef.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},SeriesDataSchema2}();function isSeriesDataSchema(schema){return schema instanceof SeriesDataSchema}function createDimNameMap(dimsDef){for(var dataDimNameMap=createHashMap(),i=0;i&lt;(dimsDef||[]).length;i++){var dimDefItemRaw=dimsDef[i],userDimName=isObject$3(dimDefItemRaw)?dimDefItemRaw.name:dimDefItemRaw;null!=userDimName&amp;&amp;null==dataDimNameMap.get(userDimName)&amp;&amp;dataDimNameMap.set(userDimName,i)}return dataDimNameMap}function ensureSourceDimNameMap(source){var innerSource=inner$h(source);return innerSource.dimNameMap||(innerSource.dimNameMap=createDimNameMap(source.dimensionsDefine))}function shouldOmitUnusedDimensions(dimCount){return dimCount&gt;30}var prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,isObject$1=isObject$3,map=map$1,CtorInt32Array="undefined"==typeof Int32Array?Array:Int32Array,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],SeriesData=function(){function SeriesData2(dimensionsInput,hostModel){var dimensions;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var assignStoreDimIdx=!1;isSeriesDataSchema(dimensionsInput)?(dimensions=dimensionsInput.dimensions,this._dimOmitted=dimensionsInput.isDimensionOmitted(),this._schema=dimensionsInput):(assignStoreDimIdx=!0,dimensions=dimensionsInput),dimensions=dimensions||["x","y"];for(var dimensionInfos={},dimensionNames=[],invertedIndicesMap={},needsHasOwn=!1,emptyObj={},i=0;i&lt;dimensions.length;i++){var dimInfoInput=dimensions[i],dimensionInfo=isString(dimInfoInput)?new SeriesDimensionDefine({name:dimInfoInput}):dimInfoInput instanceof SeriesDimensionDefine?dimInfoInput:new SeriesDimensionDefine(dimInfoInput),dimensionName=dimensionInfo.name;dimensionInfo.type=dimensionInfo.type||"float",dimensionInfo.coordDim||(dimensionInfo.coordDim=dimensionName,dimensionInfo.coordDimIndex=0);var otherDims=dimensionInfo.otherDims=dimensionInfo.otherDims||{};dimensionNames.push(dimensionName),dimensionInfos[dimensionName]=dimensionInfo,null!=emptyObj[dimensionName]&amp;&amp;(needsHasOwn=!0),dimensionInfo.createInvertedIndices&amp;&amp;(invertedIndicesMap[dimensionName]=[]),0===otherDims.itemName&amp;&amp;(this._nameDimIdx=i),0===otherDims.itemId&amp;&amp;(this._idDimIdx=i),assignStoreDimIdx&amp;&amp;(dimensionInfo.storeDimIndex=i)}if(this.dimensions=dimensionNames,this._dimInfos=dimensionInfos,this._initGetDimensionInfo(needsHasOwn),this.hostModel=hostModel,this._invertedIndicesMap=invertedIndicesMap,this._dimOmitted){var dimIdxToName_1=this._dimIdxToName=createHashMap();each$f(dimensionNames,function(dimName){dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex,dimName)})}}return SeriesData2.prototype.getDimension=function(dim){var dimIdx=this._recognizeDimIndex(dim);if(null==dimIdx)return dim;if(dimIdx=dim,!this._dimOmitted)return this.dimensions[dimIdx];var dimName=this._dimIdxToName.get(dimIdx);if(null!=dimName)return dimName;var sourceDimDef=this._schema.getSourceDimension(dimIdx);return sourceDimDef?sourceDimDef.name:void 0},SeriesData2.prototype.getDimensionIndex=function(dim){var dimIdx=this._recognizeDimIndex(dim);if(null!=dimIdx)return dimIdx;if(null==dim)return-1;var dimInfo=this._getDimInfo(dim);return dimInfo?dimInfo.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(dim):-1},SeriesData2.prototype._recognizeDimIndex=function(dim){if(isNumber(dim)||null!=dim&amp;&amp;!isNaN(dim)&amp;&amp;!this._getDimInfo(dim)&amp;&amp;(!this._dimOmitted||this._schema.getSourceDimensionIndex(dim)&lt;0))return+dim},SeriesData2.prototype._getStoreDimIndex=function(dim){return this.getDimensionIndex(dim)},SeriesData2.prototype.getDimensionInfo=function(dim){return this._getDimInfo(this.getDimension(dim))},SeriesData2.prototype._initGetDimensionInfo=function(needsHasOwn){var dimensionInfos=this._dimInfos;this._getDimInfo=needsHasOwn?function(dimName){return dimensionInfos.hasOwnProperty(dimName)?dimensionInfos[dimName]:void 0}:function(dimName){return dimensionInfos[dimName]}},SeriesData2.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},SeriesData2.prototype.mapDimension=function(coordDim,idx){var dimensionsSummary=this._dimSummary;if(null==idx)return dimensionsSummary.encodeFirstDimNotExtra[coordDim];var dims=dimensionsSummary.encode[coordDim];return dims?dims[idx]:null},SeriesData2.prototype.mapDimensionsAll=function(coordDim){return(this._dimSummary.encode[coordDim]||[]).slice()},SeriesData2.prototype.getStore=function(){return this._store},SeriesData2.prototype.initData=function(data,nameList,dimValueGetter){var store,_this=this;if(data instanceof DataStore&amp;&amp;(store=data),!store){var dimensions=this.dimensions,provider=isSourceInstance(data)||isArrayLike(data)?new DefaultDataProvider(data,dimensions.length):data;store=new DataStore;var dimensionInfos=map(dimensions,function(dimName){return{type:_this._dimInfos[dimName].type,property:dimName}});store.initData(provider,dimensionInfos,dimValueGetter)}this._store=store,this._nameList=(nameList||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,store.count()),this._dimSummary=function summarizeDimensions(data,schema){var summary={},encode=summary.encode={},notExtraCoordDimMap=createHashMap(),defaultedLabel=[],defaultedTooltip=[],userOutputEncode={};each$f(data.dimensions,function(dimName){var dimItem=data.getDimensionInfo(dimName),coordDim=dimItem.coordDim;if(coordDim){var coordDimIndex=dimItem.coordDimIndex;getOrCreateEncodeArr(encode,coordDim)[coordDimIndex]=dimName,dimItem.isExtraCoord||(notExtraCoordDimMap.set(coordDim,1),function mayLabelDimType(dimType){return!("ordinal"===dimType||"time"===dimType)}(dimItem.type)&amp;&amp;(defaultedLabel[0]=dimName),getOrCreateEncodeArr(userOutputEncode,coordDim)[coordDimIndex]=data.getDimensionIndex(dimItem.name)),dimItem.defaultTooltip&amp;&amp;defaultedTooltip.push(dimName)}VISUAL_DIMENSIONS.each(function(v,otherDim){var encodeArr=getOrCreateEncodeArr(encode,otherDim),dimIndex=dimItem.otherDims[otherDim];null!=dimIndex&amp;&amp;!1!==dimIndex&amp;&amp;(encodeArr[dimIndex]=dimItem.name)})});var dataDimsOnCoord=[],encodeFirstDimNotExtra={};notExtraCoordDimMap.each(function(v,coordDim){var dimArr=encode[coordDim];encodeFirstDimNotExtra[coordDim]=dimArr[0],dataDimsOnCoord=dataDimsOnCoord.concat(dimArr)}),summary.dataDimsOnCoord=dataDimsOnCoord,summary.dataDimIndicesOnCoord=map$1(dataDimsOnCoord,function(dimName){return data.getDimensionInfo(dimName).storeDimIndex}),summary.encodeFirstDimNotExtra=encodeFirstDimNotExtra;var encodeLabel=encode.label;encodeLabel&amp;&amp;encodeLabel.length&amp;&amp;(defaultedLabel=encodeLabel.slice());var encodeTooltip=encode.tooltip;return encodeTooltip&amp;&amp;encodeTooltip.length?defaultedTooltip=encodeTooltip.slice():defaultedTooltip.length||(defaultedTooltip=defaultedLabel.slice()),encode.defaultedLabel=defaultedLabel,encode.defaultedTooltip=defaultedTooltip,summary.userOutput=new DimensionUserOuput(userOutputEncode,schema),summary}(this,this._schema),this.userOutput=this._dimSummary.userOutput},SeriesData2.prototype.appendData=function(data){var range=this._store.appendData(data);this._doInit(range[0],range[1])},SeriesData2.prototype.appendValues=function(values,names){var _a2=this._store.appendValues(values,names&amp;&amp;names.length),start2=_a2.start,end2=_a2.end,shouldMakeIdFromName=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),names)for(var idx=start2;idx&lt;end2;idx++){var sourceIdx=idx-start2;this._nameList[idx]=names[sourceIdx],shouldMakeIdFromName&amp;&amp;makeIdFromName(this,idx)}},SeriesData2.prototype._updateOrdinalMeta=function(){for(var store=this._store,dimensions=this.dimensions,i=0;i&lt;dimensions.length;i++){var dimInfo=this._dimInfos[dimensions[i]];dimInfo.ordinalMeta&amp;&amp;store.collectOrdinalMeta(dimInfo.storeDimIndex,dimInfo.ordinalMeta)}},SeriesData2.prototype._shouldMakeIdFromName=function(){var provider=this._store.getProvider();return null==this._idDimIdx&amp;&amp;"typedArray"!==provider.getSource().sourceFormat&amp;&amp;!provider.fillStorage},SeriesData2.prototype._doInit=function(start2,end2){if(!(start2&gt;=end2)){var provider=this._store.getProvider();this._updateOrdinalMeta();var nameList=this._nameList,idList=this._idList;if("original"===provider.getSource().sourceFormat&amp;&amp;!provider.pure)for(var sharedDataItem=[],idx=start2;idx&lt;end2;idx++){var dataItem=provider.getItem(idx,sharedDataItem);if(!this.hasItemOption&amp;&amp;isDataItemOption(dataItem)&amp;&amp;(this.hasItemOption=!0),dataItem){var itemName=dataItem.name;null==nameList[idx]&amp;&amp;null!=itemName&amp;&amp;(nameList[idx]=convertOptionIdName(itemName,null));var itemId=dataItem.id;null==idList[idx]&amp;&amp;null!=itemId&amp;&amp;(idList[idx]=convertOptionIdName(itemId,null))}}if(this._shouldMakeIdFromName())for(idx=start2;idx&lt;end2;idx++)makeIdFromName(this,idx);prepareInvertedIndex(this)}},SeriesData2.prototype.getApproximateExtent=function(dim){return this._approximateExtent[dim]||this._store.getDataExtent(this._getStoreDimIndex(dim))},SeriesData2.prototype.setApproximateExtent=function(extent3,dim){dim=this.getDimension(dim),this._approximateExtent[dim]=extent3.slice()},SeriesData2.prototype.getCalculationInfo=function(key){return this._calculationInfo[key]},SeriesData2.prototype.setCalculationInfo=function(key,value){isObject$1(key)?extend(this._calculationInfo,key):this._calculationInfo[key]=value},SeriesData2.prototype.getName=function(idx){var rawIndex=this.getRawIndex(idx),name=this._nameList[rawIndex];return null==name&amp;&amp;null!=this._nameDimIdx&amp;&amp;(name=getIdNameFromStore(this,this._nameDimIdx,rawIndex)),null==name&amp;&amp;(name=""),name},SeriesData2.prototype._getCategory=function(dimIdx,idx){var ordinal=this._store.get(dimIdx,idx),ordinalMeta=this._store.getOrdinalMeta(dimIdx);return ordinalMeta?ordinalMeta.categories[ordinal]:ordinal},SeriesData2.prototype.getId=function(idx){return getId(this,this.getRawIndex(idx))},SeriesData2.prototype.count=function(){return this._store.count()},SeriesData2.prototype.get=function(dim,idx){var store=this._store,dimInfo=this._dimInfos[dim];if(dimInfo)return store.get(dimInfo.storeDimIndex,idx)},SeriesData2.prototype.getByRawIndex=function(dim,rawIdx){var store=this._store,dimInfo=this._dimInfos[dim];if(dimInfo)return store.getByRawIndex(dimInfo.storeDimIndex,rawIdx)},SeriesData2.prototype.getIndices=function(){return this._store.getIndices()},SeriesData2.prototype.getDataExtent=function(dim){return this._store.getDataExtent(this._getStoreDimIndex(dim))},SeriesData2.prototype.getSum=function(dim){return this._store.getSum(this._getStoreDimIndex(dim))},SeriesData2.prototype.getMedian=function(dim){return this._store.getMedian(this._getStoreDimIndex(dim))},SeriesData2.prototype.getValues=function(dimensions,idx){var _this=this,store=this._store;return isArray$1(dimensions)?store.getValues(map(dimensions,function(dim){return _this._getStoreDimIndex(dim)}),idx):store.getValues(dimensions)},SeriesData2.prototype.hasValue=function(idx){for(var dataDimIndicesOnCoord=this._dimSummary.dataDimIndicesOnCoord,i=0,len2=dataDimIndicesOnCoord.length;i&lt;len2;i++)if(isNaN(this._store.get(dataDimIndicesOnCoord[i],idx)))return!1;return!0},SeriesData2.prototype.indexOfName=function(name){for(var i=0,len2=this._store.count();i&lt;len2;i++)if(this.getName(i)===name)return i;return-1},SeriesData2.prototype.getRawIndex=function(idx){return this._store.getRawIndex(idx)},SeriesData2.prototype.indexOfRawIndex=function(rawIndex){return this._store.indexOfRawIndex(rawIndex)},SeriesData2.prototype.rawIndexOf=function(dim,value){var invertedIndices=dim&amp;&amp;this._invertedIndicesMap[dim],rawIndex=invertedIndices&amp;&amp;invertedIndices[value];return null==rawIndex||isNaN(rawIndex)?-1:rawIndex},SeriesData2.prototype.indicesOfNearest=function(dim,value,maxDistance){return this._store.indicesOfNearest(this._getStoreDimIndex(dim),value,maxDistance)},SeriesData2.prototype.each=function(dims,cb,ctx){isFunction(dims)&amp;&amp;(ctx=cb,cb=dims,dims=[]);var fCtx=ctx||this,dimIndices=map(normalizeDimensions(dims),this._getStoreDimIndex,this);this._store.each(dimIndices,fCtx?bind$1(cb,fCtx):cb)},SeriesData2.prototype.filterSelf=function(dims,cb,ctx){isFunction(dims)&amp;&amp;(ctx=cb,cb=dims,dims=[]);var fCtx=ctx||this,dimIndices=map(normalizeDimensions(dims),this._getStoreDimIndex,this);return this._store=this._store.filter(dimIndices,fCtx?bind$1(cb,fCtx):cb),this},SeriesData2.prototype.selectRange=function(range){var _this=this,innerRange={};return each$f(keys(range),function(dim){var dimIdx=_this._getStoreDimIndex(dim);innerRange[dimIdx]=range[dim]}),this._store=this._store.selectRange(innerRange),this},SeriesData2.prototype.mapArray=function(dims,cb,ctx){isFunction(dims)&amp;&amp;(ctx=cb,cb=dims,dims=[]),ctx=ctx||this;var result=[];return this.each(dims,function(){result.push(cb&amp;&amp;cb.apply(this,arguments))},ctx),result},SeriesData2.prototype.map=function(dims,cb,ctx,ctxCompat){var fCtx=ctx||ctxCompat||this,dimIndices=map(normalizeDimensions(dims),this._getStoreDimIndex,this),list=cloneListForMapAndSample(this);return list._store=this._store.map(dimIndices,fCtx?bind$1(cb,fCtx):cb),list},SeriesData2.prototype.modify=function(dims,cb,ctx,ctxCompat){var fCtx=ctx||ctxCompat||this,dimIndices=map(normalizeDimensions(dims),this._getStoreDimIndex,this);this._store.modify(dimIndices,fCtx?bind$1(cb,fCtx):cb)},SeriesData2.prototype.downSample=function(dimension,rate,sampleValue,sampleIndex){var list=cloneListForMapAndSample(this);return list._store=this._store.downSample(this._getStoreDimIndex(dimension),rate,sampleValue,sampleIndex),list},SeriesData2.prototype.minmaxDownSample=function(valueDimension,rate){var list=cloneListForMapAndSample(this);return list._store=this._store.minmaxDownSample(this._getStoreDimIndex(valueDimension),rate),list},SeriesData2.prototype.lttbDownSample=function(valueDimension,rate){var list=cloneListForMapAndSample(this);return list._store=this._store.lttbDownSample(this._getStoreDimIndex(valueDimension),rate),list},SeriesData2.prototype.getRawDataItem=function(idx){return this._store.getRawDataItem(idx)},SeriesData2.prototype.getItemModel=function(idx){var hostModel=this.hostModel,dataItem=this.getRawDataItem(idx);return new Model(dataItem,hostModel,hostModel&amp;&amp;hostModel.ecModel)},SeriesData2.prototype.diff=function(otherList){var thisList=this;return new DataDiffer(otherList?otherList.getStore().getIndices():[],this.getStore().getIndices(),function(idx){return getId(otherList,idx)},function(idx){return getId(thisList,idx)})},SeriesData2.prototype.getVisual=function(key){var visual=this._visual;return visual&amp;&amp;visual[key]},SeriesData2.prototype.setVisual=function(kvObj,val){this._visual=this._visual||{},isObject$1(kvObj)?extend(this._visual,kvObj):this._visual[kvObj]=val},SeriesData2.prototype.getItemVisual=function(idx,key){var itemVisual=this._itemVisuals[idx],val=itemVisual&amp;&amp;itemVisual[key];return null==val?this.getVisual(key):val},SeriesData2.prototype.hasItemVisual=function(){return this._itemVisuals.length&gt;0},SeriesData2.prototype.ensureUniqueItemVisual=function(idx,key){var itemVisuals=this._itemVisuals,itemVisual=itemVisuals[idx];itemVisual||(itemVisual=itemVisuals[idx]={});var val=itemVisual[key];return null==val&amp;&amp;(isArray$1(val=this.getVisual(key))?val=val.slice():isObject$1(val)&amp;&amp;(val=extend({},val)),itemVisual[key]=val),val},SeriesData2.prototype.setItemVisual=function(idx,key,value){var itemVisual=this._itemVisuals[idx]||{};this._itemVisuals[idx]=itemVisual,isObject$1(key)?extend(itemVisual,key):itemVisual[key]=value},SeriesData2.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},SeriesData2.prototype.setLayout=function(key,val){isObject$1(key)?extend(this._layout,key):this._layout[key]=val},SeriesData2.prototype.getLayout=function(key){return this._layout[key]},SeriesData2.prototype.getItemLayout=function(idx){return this._itemLayouts[idx]},SeriesData2.prototype.setItemLayout=function(idx,layout2,merge2){this._itemLayouts[idx]=merge2?extend(this._itemLayouts[idx]||{},layout2):layout2},SeriesData2.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},SeriesData2.prototype.setItemGraphicEl=function(idx,el){var seriesIndex=this.hostModel&amp;&amp;this.hostModel.seriesIndex;setCommonECData(seriesIndex,this.dataType,idx,el),this._graphicEls[idx]=el},SeriesData2.prototype.getItemGraphicEl=function(idx){return this._graphicEls[idx]},SeriesData2.prototype.eachItemGraphicEl=function(cb,context){each$f(this._graphicEls,function(el,idx){el&amp;&amp;cb&amp;&amp;cb.call(context,el,idx)})},SeriesData2.prototype.cloneShallow=function(list){return list||(list=new SeriesData2(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(list,this),list._store=this._store,list},SeriesData2.prototype.wrapMethod=function(methodName,injectFunction){var originalMethod=this[methodName];isFunction(originalMethod)&amp;&amp;(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(methodName),this[methodName]=function(){var res=originalMethod.apply(this,arguments);return injectFunction.apply(this,[res].concat(slice(arguments)))})},SeriesData2.internalField=(prepareInvertedIndex=function(data){var invertedIndicesMap=data._invertedIndicesMap;each$f(invertedIndicesMap,function(invertedIndices,dim){var dimInfo=data._dimInfos[dim],ordinalMeta=dimInfo.ordinalMeta,store=data._store;if(ordinalMeta){invertedIndices=invertedIndicesMap[dim]=new CtorInt32Array(ordinalMeta.categories.length);for(var i=0;i&lt;invertedIndices.length;i++)invertedIndices[i]=-1;for(i=0;i&lt;store.count();i++)invertedIndices[store.get(dimInfo.storeDimIndex,i)]=i}})},getIdNameFromStore=function(data,dimIdx,idx){return convertOptionIdName(data._getCategory(dimIdx,idx),null)},getId=function(data,rawIndex){var id=data._idList[rawIndex];return null==id&amp;&amp;null!=data._idDimIdx&amp;&amp;(id=getIdNameFromStore(data,data._idDimIdx,rawIndex)),null==id&amp;&amp;(id="e\0\0"+rawIndex),id},normalizeDimensions=function(dimensions){return isArray$1(dimensions)||(dimensions=null!=dimensions?[dimensions]:[]),dimensions},cloneListForMapAndSample=function(original){var list=new SeriesData2(original._schema?original._schema:map(original.dimensions,original._getDimInfo,original),original.hostModel);return transferProperties(list,original),list},transferProperties=function(target,source){each$f(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods||[]),function(propName){source.hasOwnProperty(propName)&amp;&amp;(target[propName]=source[propName])}),target.__wrappedMethods=source.__wrappedMethods,each$f(CLONE_PROPERTIES,function(propName){target[propName]=clone$4(source[propName])}),target._calculationInfo=extend({},source._calculationInfo)},void(makeIdFromName=function(data,idx){var nameList=data._nameList,idList=data._idList,nameDimIdx=data._nameDimIdx,idDimIdx=data._idDimIdx,name=nameList[idx],id=idList[idx];if(null==name&amp;&amp;null!=nameDimIdx&amp;&amp;(nameList[idx]=name=getIdNameFromStore(data,nameDimIdx,idx)),null==id&amp;&amp;null!=idDimIdx&amp;&amp;(idList[idx]=id=getIdNameFromStore(data,idDimIdx,idx)),null==id&amp;&amp;null!=name){var nameRepeatCount=data._nameRepeatCount,nmCnt=nameRepeatCount[name]=(nameRepeatCount[name]||0)+1;id=name,nmCnt&gt;1&amp;&amp;(id+="__ec__"+nmCnt),idList[idx]=id}})),SeriesData2}();function createDimensions(source,opt){return prepareSeriesDataSchema(source,opt).dimensions}function prepareSeriesDataSchema(source,opt){isSourceInstance(source)||(source=createSourceFromSeriesDataOption(source));var sysDims=(opt=opt||{}).coordDimensions||[],dimsDef=opt.dimensionsDefine||source.dimensionsDefine||[],coordDimNameMap=createHashMap(),resultList=[],dimCount=function getDimCount(source,sysDims,dimsDef,optDimCount){var dimCount=Math.max(source.dimensionsDetectedCount||1,sysDims.length,dimsDef.length,optDimCount||0);return each$f(sysDims,function(sysDimItem){var sysDimItemDimsDef;isObject$3(sysDimItem)&amp;&amp;(sysDimItemDimsDef=sysDimItem.dimsDef)&amp;&amp;(dimCount=Math.max(dimCount,sysDimItemDimsDef.length))}),dimCount}(source,sysDims,dimsDef,opt.dimensionsCount),omitUnusedDimensions=opt.canOmitUnusedDimensions&amp;&amp;shouldOmitUnusedDimensions(dimCount),isUsingSourceDimensionsDef=dimsDef===source.dimensionsDefine,dataDimNameMap=isUsingSourceDimensionsDef?ensureSourceDimNameMap(source):createDimNameMap(dimsDef),encodeDef=opt.encodeDefine;!encodeDef&amp;&amp;opt.encodeDefaulter&amp;&amp;(encodeDef=opt.encodeDefaulter(source,dimCount));for(var encodeDefMap=createHashMap(encodeDef),indicesMap=new CtorInt32Array$1(dimCount),i=0;i&lt;indicesMap.length;i++)indicesMap[i]=-1;function getResultItem(dimIdx){var idx=indicesMap[dimIdx];if(idx&lt;0){var dimDefItemRaw=dimsDef[dimIdx],dimDefItem=isObject$3(dimDefItemRaw)?dimDefItemRaw:{name:dimDefItemRaw},resultItem2=new SeriesDimensionDefine,userDimName=dimDefItem.name;null!=userDimName&amp;&amp;null!=dataDimNameMap.get(userDimName)&amp;&amp;(resultItem2.name=resultItem2.displayName=userDimName),null!=dimDefItem.type&amp;&amp;(resultItem2.type=dimDefItem.type),null!=dimDefItem.displayName&amp;&amp;(resultItem2.displayName=dimDefItem.displayName);var newIdx=resultList.length;return indicesMap[dimIdx]=newIdx,resultItem2.storeDimIndex=dimIdx,resultList.push(resultItem2),resultItem2}return resultList[idx]}if(!omitUnusedDimensions)for(i=0;i&lt;dimCount;i++)getResultItem(i);encodeDefMap.each(function(dataDimsRaw,coordDim2){var dataDims=normalizeToArray(dataDimsRaw).slice();if(1===dataDims.length&amp;&amp;!isString(dataDims[0])&amp;&amp;dataDims[0]&lt;0)encodeDefMap.set(coordDim2,!1);else{var validDataDims=encodeDefMap.set(coordDim2,[]);each$f(dataDims,function(resultDimIdxOrName,idx){var resultDimIdx2=isString(resultDimIdxOrName)?dataDimNameMap.get(resultDimIdxOrName):resultDimIdxOrName;null!=resultDimIdx2&amp;&amp;resultDimIdx2&lt;dimCount&amp;&amp;(validDataDims[idx]=resultDimIdx2,applyDim(getResultItem(resultDimIdx2),coordDim2,idx))})}});var availDimIdx=0;function applyDim(resultItem2,coordDim2,coordDimIndex){null!=VISUAL_DIMENSIONS.get(coordDim2)?resultItem2.otherDims[coordDim2]=coordDimIndex:(resultItem2.coordDim=coordDim2,resultItem2.coordDimIndex=coordDimIndex,coordDimNameMap.set(coordDim2,!0))}each$f(sysDims,function(sysDimItemRaw){var coordDim2,sysDimItemDimsDef,sysDimItemOtherDims,sysDimItem;if(isString(sysDimItemRaw))coordDim2=sysDimItemRaw,sysDimItem={};else{coordDim2=(sysDimItem=sysDimItemRaw).name;var ordinalMeta=sysDimItem.ordinalMeta;sysDimItem.ordinalMeta=null,(sysDimItem=extend({},sysDimItem)).ordinalMeta=ordinalMeta,sysDimItemDimsDef=sysDimItem.dimsDef,sysDimItemOtherDims=sysDimItem.otherDims,sysDimItem.name=sysDimItem.coordDim=sysDimItem.coordDimIndex=sysDimItem.dimsDef=sysDimItem.otherDims=null}var dataDims=encodeDefMap.get(coordDim2);if(!1!==dataDims){if(!(dataDims=normalizeToArray(dataDims)).length)for(var i2=0;i2&lt;(sysDimItemDimsDef&amp;&amp;sysDimItemDimsDef.length||1);i2++){for(;availDimIdx&lt;dimCount&amp;&amp;null!=getResultItem(availDimIdx).coordDim;)availDimIdx++;availDimIdx&lt;dimCount&amp;&amp;dataDims.push(availDimIdx++)}each$f(dataDims,function(resultDimIdx2,coordDimIndex){var resultItem2=getResultItem(resultDimIdx2);if(isUsingSourceDimensionsDef&amp;&amp;null!=sysDimItem.type&amp;&amp;(resultItem2.type=sysDimItem.type),applyDim(defaults(resultItem2,sysDimItem),coordDim2,coordDimIndex),null==resultItem2.name&amp;&amp;sysDimItemDimsDef){var sysDimItemDimsDefItem=sysDimItemDimsDef[coordDimIndex];!isObject$3(sysDimItemDimsDefItem)&amp;&amp;(sysDimItemDimsDefItem={name:sysDimItemDimsDefItem}),resultItem2.name=resultItem2.displayName=sysDimItemDimsDefItem.name,resultItem2.defaultTooltip=sysDimItemDimsDefItem.defaultTooltip}sysDimItemOtherDims&amp;&amp;defaults(resultItem2.otherDims,sysDimItemOtherDims)})}});var generateCoord=opt.generateCoord,generateCoordCount=opt.generateCoordCount,fromZero=null!=generateCoordCount;generateCoordCount=generateCoord?generateCoordCount||1:0;var extra=generateCoord||"value";function ifNoNameFillWithCoordName(resultItem2){null==resultItem2.name&amp;&amp;(resultItem2.name=resultItem2.coordDim)}if(omitUnusedDimensions)each$f(resultList,function(resultItem2){ifNoNameFillWithCoordName(resultItem2)}),resultList.sort(function(item0,item1){return item0.storeDimIndex-item1.storeDimIndex});else for(var resultDimIdx=0;resultDimIdx&lt;dimCount;resultDimIdx++){var resultItem=getResultItem(resultDimIdx);null==resultItem.coordDim&amp;&amp;(resultItem.coordDim=genCoordDimName(extra,coordDimNameMap,fromZero),resultItem.coordDimIndex=0,(!generateCoord||generateCoordCount&lt;=0)&amp;&amp;(resultItem.isExtraCoord=!0),generateCoordCount--),ifNoNameFillWithCoordName(resultItem),null!=resultItem.type||guessOrdinal(source,resultDimIdx)!==BE_ORDINAL_Must&amp;&amp;(!resultItem.isExtraCoord||null==resultItem.otherDims.itemName&amp;&amp;null==resultItem.otherDims.seriesName)||(resultItem.type="ordinal")}return function removeDuplication(result){for(var duplicationMap=createHashMap(),i=0;i&lt;result.length;i++){var dim=result[i],dimOriginalName=dim.name,count2=duplicationMap.get(dimOriginalName)||0;count2&gt;0&amp;&amp;(dim.name=dimOriginalName+(count2-1)),count2++,duplicationMap.set(dimOriginalName,count2)}}(resultList),new SeriesDataSchema({source:source,dimensions:resultList,fullDimensionCount:dimCount,dimensionOmitted:omitUnusedDimensions})}function genCoordDimName(name,map2,fromZero){if(fromZero||map2.hasKey(name)){for(var i=0;map2.hasKey(name+i);)i++;name+=i}return map2.set(name,!0),name}var CoordSysInfo=function(){return function CoordSysInfo2(coordSysName){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=coordSysName}}();var fetchers={cartesian2d:function(seriesModel,result,axisMap,categoryAxisMap){var xAxisModel=seriesModel.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],yAxisModel=seriesModel.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];result.coordSysDims=["x","y"],axisMap.set("x",xAxisModel),axisMap.set("y",yAxisModel),isCategory(xAxisModel)&amp;&amp;(categoryAxisMap.set("x",xAxisModel),result.firstCategoryDimIndex=0),isCategory(yAxisModel)&amp;&amp;(categoryAxisMap.set("y",yAxisModel),null==result.firstCategoryDimIndex&amp;&amp;(result.firstCategoryDimIndex=1))},singleAxis:function(seriesModel,result,axisMap,categoryAxisMap){var singleAxisModel=seriesModel.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];result.coordSysDims=["single"],axisMap.set("single",singleAxisModel),isCategory(singleAxisModel)&amp;&amp;(categoryAxisMap.set("single",singleAxisModel),result.firstCategoryDimIndex=0)},polar:function(seriesModel,result,axisMap,categoryAxisMap){var polarModel=seriesModel.getReferringComponents("polar",SINGLE_REFERRING).models[0],radiusAxisModel=polarModel.findAxisModel("radiusAxis"),angleAxisModel=polarModel.findAxisModel("angleAxis");result.coordSysDims=["radius","angle"],axisMap.set("radius",radiusAxisModel),axisMap.set("angle",angleAxisModel),isCategory(radiusAxisModel)&amp;&amp;(categoryAxisMap.set("radius",radiusAxisModel),result.firstCategoryDimIndex=0),isCategory(angleAxisModel)&amp;&amp;(categoryAxisMap.set("angle",angleAxisModel),null==result.firstCategoryDimIndex&amp;&amp;(result.firstCategoryDimIndex=1))},geo:function(seriesModel,result,axisMap,categoryAxisMap){result.coordSysDims=["lng","lat"]},parallel:function(seriesModel,result,axisMap,categoryAxisMap){var ecModel=seriesModel.ecModel,parallelModel=ecModel.getComponent("parallel",seriesModel.get("parallelIndex")),coordSysDims=result.coordSysDims=parallelModel.dimensions.slice();each$f(parallelModel.parallelAxisIndex,function(axisIndex,index){var axisModel=ecModel.getComponent("parallelAxis",axisIndex),axisDim=coordSysDims[index];axisMap.set(axisDim,axisModel),isCategory(axisModel)&amp;&amp;(categoryAxisMap.set(axisDim,axisModel),null==result.firstCategoryDimIndex&amp;&amp;(result.firstCategoryDimIndex=index))})}};function isCategory(axisModel){return"category"===axisModel.get("type")}function enableDataStack(seriesModel,dimensionsInput,opt){var dimensionDefineList,schema,store,byIndex=(opt=opt||{}).byIndex,stackedCoordDimension=opt.stackedCoordDimension;!function isLegacyDimensionsInput(dimensionsInput){return!isSeriesDataSchema(dimensionsInput.schema)}(dimensionsInput)?(schema=dimensionsInput.schema,dimensionDefineList=schema.dimensions,store=dimensionsInput.store):dimensionDefineList=dimensionsInput;var stackedByDimInfo,stackedDimInfo,stackResultDimension,stackedOverDimension,mayStack=!(!seriesModel||!seriesModel.get("stack"));if(each$f(dimensionDefineList,function(dimensionInfo,index){isString(dimensionInfo)&amp;&amp;(dimensionDefineList[index]=dimensionInfo={name:dimensionInfo}),mayStack&amp;&amp;!dimensionInfo.isExtraCoord&amp;&amp;(byIndex||stackedByDimInfo||!dimensionInfo.ordinalMeta||(stackedByDimInfo=dimensionInfo),stackedDimInfo||"ordinal"===dimensionInfo.type||"time"===dimensionInfo.type||stackedCoordDimension&amp;&amp;stackedCoordDimension!==dimensionInfo.coordDim||(stackedDimInfo=dimensionInfo))}),!stackedDimInfo||byIndex||stackedByDimInfo||(byIndex=!0),stackedDimInfo){stackResultDimension="__\0ecstackresult_"+seriesModel.id,stackedOverDimension="__\0ecstackedover_"+seriesModel.id,stackedByDimInfo&amp;&amp;(stackedByDimInfo.createInvertedIndices=!0);var stackedDimCoordDim_1=stackedDimInfo.coordDim,stackedDimType=stackedDimInfo.type,stackedDimCoordIndex_1=0;each$f(dimensionDefineList,function(dimensionInfo){dimensionInfo.coordDim===stackedDimCoordDim_1&amp;&amp;stackedDimCoordIndex_1++});var stackedOverDimensionDefine={name:stackResultDimension,coordDim:stackedDimCoordDim_1,coordDimIndex:stackedDimCoordIndex_1,type:stackedDimType,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:dimensionDefineList.length},stackResultDimensionDefine={name:stackedOverDimension,coordDim:stackedOverDimension,coordDimIndex:stackedDimCoordIndex_1+1,type:stackedDimType,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:dimensionDefineList.length+1};schema?(store&amp;&amp;(stackedOverDimensionDefine.storeDimIndex=store.ensureCalculationDimension(stackedOverDimension,stackedDimType),stackResultDimensionDefine.storeDimIndex=store.ensureCalculationDimension(stackResultDimension,stackedDimType)),schema.appendCalculationDimension(stackedOverDimensionDefine),schema.appendCalculationDimension(stackResultDimensionDefine)):(dimensionDefineList.push(stackedOverDimensionDefine),dimensionDefineList.push(stackResultDimensionDefine))}return{stackedDimension:stackedDimInfo&amp;&amp;stackedDimInfo.name,stackedByDimension:stackedByDimInfo&amp;&amp;stackedByDimInfo.name,isStackedByIndex:byIndex,stackedOverDimension:stackedOverDimension,stackResultDimension:stackResultDimension}}function isDimensionStacked(data,stackedDim){return!!stackedDim&amp;&amp;stackedDim===data.getCalculationInfo("stackedDimension")}function getStackedDimension(data,targetDim){return isDimensionStacked(data,targetDim)?data.getCalculationInfo("stackResultDimension"):targetDim}function createSeriesData(sourceRaw,seriesModel,opt){opt=opt||{};var source,sourceManager=seriesModel.getSourceManager(),isOriginalSource=!1;sourceRaw?(isOriginalSource=!0,source=createSourceFromSeriesDataOption(sourceRaw)):isOriginalSource="original"===(source=sourceManager.getSource()).sourceFormat;var coordSysInfo=function getCoordSysInfoBySeries(seriesModel){var coordSysName=seriesModel.get("coordinateSystem"),result=new CoordSysInfo(coordSysName),fetch=fetchers[coordSysName];if(fetch)return fetch(seriesModel,result,result.axisMap,result.categoryAxisMap),result}(seriesModel),coordSysDimDefs=function getCoordSysDimDefs(seriesModel,coordSysInfo){var coordSysDimDefs,coordSysName=seriesModel.get("coordinateSystem"),registeredCoordSys=CoordinateSystemManager.get(coordSysName);return coordSysInfo&amp;&amp;coordSysInfo.coordSysDims&amp;&amp;(coordSysDimDefs=map$1(coordSysInfo.coordSysDims,function(dim){var dimInfo={name:dim},axisModel=coordSysInfo.axisMap.get(dim);if(axisModel){var axisType=axisModel.get("type");dimInfo.type=getDimensionTypeByAxis(axisType)}return dimInfo})),coordSysDimDefs||(coordSysDimDefs=registeredCoordSys&amp;&amp;(registeredCoordSys.getDimensionsInfo?registeredCoordSys.getDimensionsInfo():registeredCoordSys.dimensions.slice())||["x","y"]),coordSysDimDefs}(seriesModel,coordSysInfo),useEncodeDefaulter=opt.useEncodeDefaulter,encodeDefaulter=isFunction(useEncodeDefaulter)?useEncodeDefaulter:useEncodeDefaulter?curry$1(makeSeriesEncodeForAxisCoordSys,coordSysDimDefs,seriesModel):null,schema=prepareSeriesDataSchema(source,{coordDimensions:coordSysDimDefs,generateCoord:opt.generateCoord,encodeDefine:seriesModel.getEncode(),encodeDefaulter:encodeDefaulter,canOmitUnusedDimensions:!isOriginalSource}),firstCategoryDimIndex=function injectOrdinalMeta(dimInfoList,createInvertedIndices,coordSysInfo){var firstCategoryDimIndex,hasNameEncode;return coordSysInfo&amp;&amp;each$f(dimInfoList,function(dimInfo,dimIndex){var coordDim=dimInfo.coordDim,categoryAxisModel=coordSysInfo.categoryAxisMap.get(coordDim);categoryAxisModel&amp;&amp;(null==firstCategoryDimIndex&amp;&amp;(firstCategoryDimIndex=dimIndex),dimInfo.ordinalMeta=categoryAxisModel.getOrdinalMeta(),createInvertedIndices&amp;&amp;(dimInfo.createInvertedIndices=!0)),null!=dimInfo.otherDims.itemName&amp;&amp;(hasNameEncode=!0)}),hasNameEncode||null==firstCategoryDimIndex||(dimInfoList[firstCategoryDimIndex].otherDims.itemName=0),firstCategoryDimIndex}(schema.dimensions,opt.createInvertedIndices,coordSysInfo),store=isOriginalSource?null:sourceManager.getSharedDataStore(schema),stackCalculationInfo=enableDataStack(seriesModel,{schema:schema,store:store}),data=new SeriesData(schema,seriesModel);data.setCalculationInfo(stackCalculationInfo);var dimValueGetter=null!=firstCategoryDimIndex&amp;&amp;function isNeedCompleteOrdinalData(source){if("original"===source.sourceFormat){var sampleItem=function firstDataNotNull(arr){var i=0;for(;i&lt;arr.length&amp;&amp;null==arr[i];)i++;return arr[i]}(source.data||[]);return!isArray$1(getDataItemValue(sampleItem))}}(source)?function(itemOpt,dimName,dataIndex,dimIndex){return dimIndex===firstCategoryDimIndex?dataIndex:this.defaultDimValueGetter(itemOpt,dimName,dataIndex,dimIndex)}:null;return data.hasItemOption=!1,data.initData(isOriginalSource?source:store,null,dimValueGetter),data}var Scale=function(){function Scale2(setting){this._setting=setting||{},this._extent=[1/0,-1/0]}return Scale2.prototype.getSetting=function(name){return this._setting[name]},Scale2.prototype.unionExtent=function(other){var extent3=this._extent;other[0]&lt;extent3[0]&amp;&amp;(extent3[0]=other[0]),other[1]&gt;extent3[1]&amp;&amp;(extent3[1]=other[1])},Scale2.prototype.unionExtentFromData=function(data,dim){this.unionExtent(data.getApproximateExtent(dim))},Scale2.prototype.getExtent=function(){return this._extent.slice()},Scale2.prototype.setExtent=function(start2,end2){var thisExtent=this._extent;isNaN(start2)||(thisExtent[0]=start2),isNaN(end2)||(thisExtent[1]=end2)},Scale2.prototype.isInExtentRange=function(value){return this._extent[0]&lt;=value&amp;&amp;this._extent[1]&gt;=value},Scale2.prototype.isBlank=function(){return this._isBlank},Scale2.prototype.setBlank=function(isBlank){this._isBlank=isBlank},Scale2}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function OrdinalMeta2(opt){this.categories=opt.categories||[],this._needCollect=opt.needCollect,this._deduplication=opt.deduplication,this.uid=++uidBase}return OrdinalMeta2.createByAxisModel=function(axisModel){var option=axisModel.option,data=option.data,categories=data&amp;&amp;map$1(data,getName);return new OrdinalMeta2({categories:categories,needCollect:!categories,deduplication:!1!==option.dedplication})},OrdinalMeta2.prototype.getOrdinal=function(category){return this._getOrCreateMap().get(category)},OrdinalMeta2.prototype.parseAndCollect=function(category){var index,needCollect=this._needCollect;if(!isString(category)&amp;&amp;!needCollect)return category;if(needCollect&amp;&amp;!this._deduplication)return index=this.categories.length,this.categories[index]=category,index;var map2=this._getOrCreateMap();return null==(index=map2.get(category))&amp;&amp;(needCollect?(index=this.categories.length,this.categories[index]=category,map2.set(category,index)):index=NaN),index},OrdinalMeta2.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},OrdinalMeta2}();function getName(obj){return isObject$3(obj)&amp;&amp;null!=obj.value?obj.value:obj+""}function isIntervalOrLogScale(scale2){return"interval"===scale2.type||"log"===scale2.type}function intervalScaleNiceTicks(extent3,splitNumber,minInterval,maxInterval){var result={},span=extent3[1]-extent3[0],interval=result.interval=nice(span/splitNumber,!0);null!=minInterval&amp;&amp;interval&lt;minInterval&amp;&amp;(interval=result.interval=minInterval),null!=maxInterval&amp;&amp;interval&gt;maxInterval&amp;&amp;(interval=result.interval=maxInterval);var precision=result.intervalPrecision=getIntervalPrecision(interval);return function fixExtent(niceTickExtent,extent3){!isFinite(niceTickExtent[0])&amp;&amp;(niceTickExtent[0]=extent3[0]),!isFinite(niceTickExtent[1])&amp;&amp;(niceTickExtent[1]=extent3[1]),clamp(niceTickExtent,0,extent3),clamp(niceTickExtent,1,extent3),niceTickExtent[0]&gt;niceTickExtent[1]&amp;&amp;(niceTickExtent[0]=niceTickExtent[1])}(result.niceTickExtent=[round$3(Math.ceil(extent3[0]/interval)*interval,precision),round$3(Math.floor(extent3[1]/interval)*interval,precision)],extent3),result}function increaseInterval(interval){var exp10=Math.pow(10,quantityExponent(interval)),f=interval/exp10;return f?2===f?f=3:3===f?f=5:f*=2:f=1,round$3(f*exp10)}function getIntervalPrecision(interval){return getPrecision(interval)+2}function clamp(niceTickExtent,idx,extent3){niceTickExtent[idx]=Math.max(Math.min(niceTickExtent[idx],extent3[1]),extent3[0])}function contain$1(val,extent3){return val&gt;=extent3[0]&amp;&amp;val&lt;=extent3[1]}function normalize$2(val,extent3){return extent3[1]===extent3[0]?.5:(val-extent3[0])/(extent3[1]-extent3[0])}function scale(val,extent3){return val*(extent3[1]-extent3[0])+extent3[0]}var OrdinalScale=function(_super){function OrdinalScale2(setting){var _this=_super.call(this,setting)||this;_this.type="ordinal";var ordinalMeta=_this.getSetting("ordinalMeta");return ordinalMeta||(ordinalMeta=new OrdinalMeta({})),isArray$1(ordinalMeta)&amp;&amp;(ordinalMeta=new OrdinalMeta({categories:map$1(ordinalMeta,function(item){return isObject$3(item)?item.value:item})})),_this._ordinalMeta=ordinalMeta,_this._extent=_this.getSetting("extent")||[0,ordinalMeta.categories.length-1],_this}return __extends$1(OrdinalScale2,_super),OrdinalScale2.prototype.parse=function(val){return null==val?NaN:isString(val)?this._ordinalMeta.getOrdinal(val):Math.round(val)},OrdinalScale2.prototype.contain=function(rank){return contain$1(rank=this.parse(rank),this._extent)&amp;&amp;null!=this._ordinalMeta.categories[rank]},OrdinalScale2.prototype.normalize=function(val){return normalize$2(val=this._getTickNumber(this.parse(val)),this._extent)},OrdinalScale2.prototype.scale=function(val){return val=Math.round(scale(val,this._extent)),this.getRawOrdinalNumber(val)},OrdinalScale2.prototype.getTicks=function(){for(var ticks=[],extent3=this._extent,rank=extent3[0];rank&lt;=extent3[1];)ticks.push({value:rank}),rank++;return ticks},OrdinalScale2.prototype.getMinorTicks=function(splitNumber){},OrdinalScale2.prototype.setSortInfo=function(info){if(null!=info){for(var infoOrdinalNumbers=info.ordinalNumbers,ordinalsByTick=this._ordinalNumbersByTick=[],ticksByOrdinal=this._ticksByOrdinalNumber=[],tickNum=0,allCategoryLen=this._ordinalMeta.categories.length,len2=Math.min(allCategoryLen,infoOrdinalNumbers.length);tickNum&lt;len2;++tickNum){var ordinalNumber=infoOrdinalNumbers[tickNum];ordinalsByTick[tickNum]=ordinalNumber,ticksByOrdinal[ordinalNumber]=tickNum}for(var unusedOrdinal=0;tickNum&lt;allCategoryLen;++tickNum){for(;null!=ticksByOrdinal[unusedOrdinal];)unusedOrdinal++;ordinalsByTick.push(unusedOrdinal),ticksByOrdinal[unusedOrdinal]=tickNum}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},OrdinalScale2.prototype._getTickNumber=function(ordinal){var ticksByOrdinalNumber=this._ticksByOrdinalNumber;return ticksByOrdinalNumber&amp;&amp;ordinal&gt;=0&amp;&amp;ordinal&lt;ticksByOrdinalNumber.length?ticksByOrdinalNumber[ordinal]:ordinal},OrdinalScale2.prototype.getRawOrdinalNumber=function(tickNumber){var ordinalNumbersByTick=this._ordinalNumbersByTick;return ordinalNumbersByTick&amp;&amp;tickNumber&gt;=0&amp;&amp;tickNumber&lt;ordinalNumbersByTick.length?ordinalNumbersByTick[tickNumber]:tickNumber},OrdinalScale2.prototype.getLabel=function(tick){if(!this.isBlank()){var ordinalNumber=this.getRawOrdinalNumber(tick.value),cateogry=this._ordinalMeta.categories[ordinalNumber];return null==cateogry?"":cateogry+""}},OrdinalScale2.prototype.count=function(){return this._extent[1]-this._extent[0]+1},OrdinalScale2.prototype.unionExtentFromData=function(data,dim){this.unionExtent(data.getApproximateExtent(dim))},OrdinalScale2.prototype.isInExtentRange=function(value){return value=this._getTickNumber(value),this._extent[0]&lt;=value&amp;&amp;this._extent[1]&gt;=value},OrdinalScale2.prototype.getOrdinalMeta=function(){return this._ordinalMeta},OrdinalScale2.prototype.calcNiceTicks=function(){},OrdinalScale2.prototype.calcNiceExtent=function(){},OrdinalScale2.type="ordinal",OrdinalScale2}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(_super){function IntervalScale2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="interval",_this._interval=0,_this._intervalPrecision=2,_this}return __extends$1(IntervalScale2,_super),IntervalScale2.prototype.parse=function(val){return val},IntervalScale2.prototype.contain=function(val){return contain$1(val,this._extent)},IntervalScale2.prototype.normalize=function(val){return normalize$2(val,this._extent)},IntervalScale2.prototype.scale=function(val){return scale(val,this._extent)},IntervalScale2.prototype.setExtent=function(start2,end2){var thisExtent=this._extent;isNaN(start2)||(thisExtent[0]=parseFloat(start2)),isNaN(end2)||(thisExtent[1]=parseFloat(end2))},IntervalScale2.prototype.unionExtent=function(other){var extent3=this._extent;other[0]&lt;extent3[0]&amp;&amp;(extent3[0]=other[0]),other[1]&gt;extent3[1]&amp;&amp;(extent3[1]=other[1]),this.setExtent(extent3[0],extent3[1])},IntervalScale2.prototype.getInterval=function(){return this._interval},IntervalScale2.prototype.setInterval=function(interval){this._interval=interval,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(interval)},IntervalScale2.prototype.getTicks=function(expandToNicedExtent){var interval=this._interval,extent3=this._extent,niceTickExtent=this._niceExtent,intervalPrecision=this._intervalPrecision,ticks=[];if(!interval)return ticks;extent3[0]&lt;niceTickExtent[0]&amp;&amp;(expandToNicedExtent?ticks.push({value:roundNumber(niceTickExtent[0]-interval,intervalPrecision)}):ticks.push({value:extent3[0]}));for(var tick=niceTickExtent[0];tick&lt;=niceTickExtent[1]&amp;&amp;(ticks.push({value:tick}),(tick=roundNumber(tick+interval,intervalPrecision))!==ticks[ticks.length-1].value);)if(ticks.length&gt;1e4)return[];var lastNiceTick=ticks.length?ticks[ticks.length-1].value:niceTickExtent[1];return extent3[1]&gt;lastNiceTick&amp;&amp;(expandToNicedExtent?ticks.push({value:roundNumber(lastNiceTick+interval,intervalPrecision)}):ticks.push({value:extent3[1]})),ticks},IntervalScale2.prototype.getMinorTicks=function(splitNumber){for(var ticks=this.getTicks(!0),minorTicks=[],extent3=this.getExtent(),i=1;i&lt;ticks.length;i++){for(var nextTick=ticks[i],prevTick=ticks[i-1],count2=0,minorTicksGroup=[],minorInterval=(nextTick.value-prevTick.value)/splitNumber;count2&lt;splitNumber-1;){var minorTick=roundNumber(prevTick.value+(count2+1)*minorInterval);minorTick&gt;extent3[0]&amp;&amp;minorTick&lt;extent3[1]&amp;&amp;minorTicksGroup.push(minorTick),count2++}minorTicks.push(minorTicksGroup)}return minorTicks},IntervalScale2.prototype.getLabel=function(data,opt){if(null==data)return"";var precision=opt&amp;&amp;opt.precision;return null==precision?precision=getPrecision(data.value)||0:"auto"===precision&amp;&amp;(precision=this._intervalPrecision),addCommas(roundNumber(data.value,precision,!0))},IntervalScale2.prototype.calcNiceTicks=function(splitNumber,minInterval,maxInterval){splitNumber=splitNumber||5;var extent3=this._extent,span=extent3[1]-extent3[0];if(isFinite(span)){span&lt;0&amp;&amp;(span=-span,extent3.reverse());var result=intervalScaleNiceTicks(extent3,splitNumber,minInterval,maxInterval);this._intervalPrecision=result.intervalPrecision,this._interval=result.interval,this._niceExtent=result.niceTickExtent}},IntervalScale2.prototype.calcNiceExtent=function(opt){var extent3=this._extent;if(extent3[0]===extent3[1])if(0!==extent3[0]){var expandSize=Math.abs(extent3[0]);opt.fixMax||(extent3[1]+=expandSize/2),extent3[0]-=expandSize/2}else extent3[1]=1;var span=extent3[1]-extent3[0];isFinite(span)||(extent3[0]=0,extent3[1]=1),this.calcNiceTicks(opt.splitNumber,opt.minInterval,opt.maxInterval);var interval=this._interval;opt.fixMin||(extent3[0]=roundNumber(Math.floor(extent3[0]/interval)*interval)),opt.fixMax||(extent3[1]=roundNumber(Math.ceil(extent3[1]/interval)*interval))},IntervalScale2.prototype.setNiceExtent=function(min3,max3){this._niceExtent=[min3,max3]},IntervalScale2.type="interval",IntervalScale2}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array="undefined"!=typeof Float32Array,Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(arg){return isArray$1(arg)?supportFloat32Array?new Float32Array(arg):arg:new Float32ArrayCtor(arg)}function getSeriesStackId$1(seriesModel){return seriesModel.get("stack")||"__ec_stack_"+seriesModel.seriesIndex}function getAxisKey$1(axis){return axis.dim+axis.index}function prepareLayoutBarSeries(seriesType2,ecModel){var seriesModels=[];return ecModel.eachSeriesByType(seriesType2,function(seriesModel){isOnCartesian(seriesModel)&amp;&amp;seriesModels.push(seriesModel)}),seriesModels}function makeColumnLayout(barSeries){var axisMinGaps=function getValueAxesMinGaps(barSeries){var axisValues={};each$f(barSeries,function(seriesModel){var baseAxis=seriesModel.coordinateSystem.getBaseAxis();if("time"===baseAxis.type||"value"===baseAxis.type)for(var data=seriesModel.getData(),key2=baseAxis.dim+"_"+baseAxis.index,dimIdx=data.getDimensionIndex(data.mapDimension(baseAxis.dim)),store=data.getStore(),i=0,cnt=store.count();i&lt;cnt;++i){var value=store.get(dimIdx,i);axisValues[key2]?axisValues[key2].push(value):axisValues[key2]=[value]}});var axisMinGaps={};for(var key in axisValues)if(axisValues.hasOwnProperty(key)){var valuesInAxis=axisValues[key];if(valuesInAxis){valuesInAxis.sort(function(a,b){return a-b});for(var min3=null,j=1;j&lt;valuesInAxis.length;++j){var delta=valuesInAxis[j]-valuesInAxis[j-1];delta&gt;0&amp;&amp;(min3=null===min3?delta:Math.min(min3,delta))}axisMinGaps[key]=min3}}return axisMinGaps}(barSeries),seriesInfoList=[];return each$f(barSeries,function(seriesModel){var bandWidth,baseAxis=seriesModel.coordinateSystem.getBaseAxis(),axisExtent=baseAxis.getExtent();if("category"===baseAxis.type)bandWidth=baseAxis.getBandWidth();else if("value"===baseAxis.type||"time"===baseAxis.type){var key=baseAxis.dim+"_"+baseAxis.index,minGap=axisMinGaps[key],extentSpan=Math.abs(axisExtent[1]-axisExtent[0]),scale2=baseAxis.scale.getExtent(),scaleSpan=Math.abs(scale2[1]-scale2[0]);bandWidth=minGap?extentSpan/scaleSpan*minGap:extentSpan}else{var data=seriesModel.getData();bandWidth=Math.abs(axisExtent[1]-axisExtent[0])/data.count()}var barWidth=parsePercent(seriesModel.get("barWidth"),bandWidth),barMaxWidth=parsePercent(seriesModel.get("barMaxWidth"),bandWidth),barMinWidth=parsePercent(seriesModel.get("barMinWidth")||(isInLargeMode(seriesModel)?.5:1),bandWidth),barGap=seriesModel.get("barGap"),barCategoryGap=seriesModel.get("barCategoryGap");seriesInfoList.push({bandWidth:bandWidth,barWidth:barWidth,barMaxWidth:barMaxWidth,barMinWidth:barMinWidth,barGap:barGap,barCategoryGap:barCategoryGap,axisKey:getAxisKey$1(baseAxis),stackId:getSeriesStackId$1(seriesModel)})}),doCalBarWidthAndOffset(seriesInfoList)}function doCalBarWidthAndOffset(seriesInfoList){var columnsMap={};each$f(seriesInfoList,function(seriesInfo,idx){var axisKey=seriesInfo.axisKey,bandWidth=seriesInfo.bandWidth,columnsOnAxis=columnsMap[axisKey]||{bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},stacks=columnsOnAxis.stacks;columnsMap[axisKey]=columnsOnAxis;var stackId=seriesInfo.stackId;stacks[stackId]||columnsOnAxis.autoWidthCount++,stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=seriesInfo.barWidth;barWidth&amp;&amp;!stacks[stackId].width&amp;&amp;(stacks[stackId].width=barWidth,barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth),columnsOnAxis.remainedWidth-=barWidth);var barMaxWidth=seriesInfo.barMaxWidth;barMaxWidth&amp;&amp;(stacks[stackId].maxWidth=barMaxWidth);var barMinWidth=seriesInfo.barMinWidth;barMinWidth&amp;&amp;(stacks[stackId].minWidth=barMinWidth);var barGap=seriesInfo.barGap;null!=barGap&amp;&amp;(columnsOnAxis.gap=barGap);var barCategoryGap=seriesInfo.barCategoryGap;null!=barCategoryGap&amp;&amp;(columnsOnAxis.categoryGap=barCategoryGap)});var result={};return each$f(columnsMap,function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks,bandWidth=columnsOnAxis.bandWidth,categoryGapPercent=columnsOnAxis.categoryGap;if(null==categoryGapPercent){var columnCount=keys(stacks).length;categoryGapPercent=Math.max(35-4*columnCount,15)+"%"}var categoryGap=parsePercent(categoryGapPercent,bandWidth),barGapPercent=parsePercent(columnsOnAxis.gap,1),remainedWidth=columnsOnAxis.remainedWidth,autoWidthCount=columnsOnAxis.autoWidthCount,autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0),each$f(stacks,function(column){var maxWidth=column.maxWidth,minWidth=column.minWidth;if(column.width){finalWidth=column.width;maxWidth&amp;&amp;(finalWidth=Math.min(finalWidth,maxWidth)),minWidth&amp;&amp;(finalWidth=Math.max(finalWidth,minWidth)),column.width=finalWidth,remainedWidth-=finalWidth+barGapPercent*finalWidth,autoWidthCount--}else{var finalWidth=autoWidth;maxWidth&amp;&amp;maxWidth&lt;finalWidth&amp;&amp;(finalWidth=Math.min(maxWidth,remainedWidth)),minWidth&amp;&amp;minWidth&gt;finalWidth&amp;&amp;(finalWidth=minWidth),finalWidth!==autoWidth&amp;&amp;(column.width=finalWidth,remainedWidth-=finalWidth+barGapPercent*finalWidth,autoWidthCount--)}}),autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent),autoWidth=Math.max(autoWidth,0);var lastColumn,widthSum=0;each$f(stacks,function(column,idx){column.width||(column.width=autoWidth),lastColumn=column,widthSum+=column.width*(1+barGapPercent)}),lastColumn&amp;&amp;(widthSum-=lastColumn.width*barGapPercent);var offset=-widthSum/2;each$f(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{bandWidth:bandWidth,offset:offset,width:column.width},offset+=column.width*(1+barGapPercent)})}),result}function layout$3(seriesType2,ecModel){var seriesModels=prepareLayoutBarSeries(seriesType2,ecModel),barWidthAndOffset=makeColumnLayout(seriesModels);each$f(seriesModels,function(seriesModel){var data=seriesModel.getData(),baseAxis=seriesModel.coordinateSystem.getBaseAxis(),stackId=getSeriesStackId$1(seriesModel),columnLayoutInfo=barWidthAndOffset[getAxisKey$1(baseAxis)][stackId],columnOffset=columnLayoutInfo.offset,columnWidth=columnLayoutInfo.width;data.setLayout({bandWidth:columnLayoutInfo.bandWidth,offset:columnOffset,size:columnWidth})})}function createProgressiveLayout(seriesType2){return{seriesType:seriesType2,plan:createRenderPlanner(),reset:function(seriesModel){if(isOnCartesian(seriesModel)){var data=seriesModel.getData(),cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),valueAxis2=cartesian.getOtherAxis(baseAxis),valueDimIdx=data.getDimensionIndex(data.mapDimension(valueAxis2.dim)),baseDimIdx=data.getDimensionIndex(data.mapDimension(baseAxis.dim)),drawBackground=seriesModel.get("showBackground",!0),valueDim=data.mapDimension(valueAxis2.dim),stackResultDim=data.getCalculationInfo("stackResultDimension"),stacked=isDimensionStacked(data,valueDim)&amp;&amp;!!data.getCalculationInfo("stackedOnSeries"),isValueAxisH=valueAxis2.isHorizontal(),valueAxisStart=function getValueAxisStart(baseAxis,valueAxis2){var startValue=valueAxis2.model.get("startValue");startValue||(startValue=0);return valueAxis2.toGlobalCoord(valueAxis2.dataToCoord("log"===valueAxis2.type?startValue&gt;0?startValue:1:startValue))}(0,valueAxis2),isLarge=isInLargeMode(seriesModel),barMinHeight=seriesModel.get("barMinHeight")||0,stackedDimIdx=stackResultDim&amp;&amp;data.getDimensionIndex(stackResultDim),columnWidth=data.getLayout("size"),columnOffset=data.getLayout("offset");return{progress:function(params,data2){for(var dataIndex,count2=params.count,largePoints=isLarge&amp;&amp;createFloat32Array(3*count2),largeBackgroundPoints=isLarge&amp;&amp;drawBackground&amp;&amp;createFloat32Array(3*count2),largeDataIndices=isLarge&amp;&amp;createFloat32Array(count2),coordLayout=cartesian.master.getRect(),bgSize=isValueAxisH?coordLayout.width:coordLayout.height,store=data2.getStore(),idxOffset=0;null!=(dataIndex=params.next());){var value=store.get(stacked?stackedDimIdx:valueDimIdx,dataIndex),baseValue=store.get(baseDimIdx,dataIndex),baseCoord=valueAxisStart,stackStartValue=void 0;stacked&amp;&amp;(stackStartValue=+value-store.get(valueDimIdx,dataIndex));var x=void 0,y=void 0,width=void 0,height=void 0;if(isValueAxisH){var coord=cartesian.dataToPoint([value,baseValue]);if(stacked)baseCoord=cartesian.dataToPoint([stackStartValue,baseValue])[0];x=baseCoord,y=coord[1]+columnOffset,width=coord[0]-baseCoord,height=columnWidth,Math.abs(width)&lt;barMinHeight&amp;&amp;(width=(width&lt;0?-1:1)*barMinHeight)}else{coord=cartesian.dataToPoint([baseValue,value]);if(stacked)baseCoord=cartesian.dataToPoint([baseValue,stackStartValue])[1];x=coord[0]+columnOffset,y=baseCoord,width=columnWidth,height=coord[1]-baseCoord,Math.abs(height)&lt;barMinHeight&amp;&amp;(height=(height&lt;=0?-1:1)*barMinHeight)}isLarge?(largePoints[idxOffset]=x,largePoints[idxOffset+1]=y,largePoints[idxOffset+2]=isValueAxisH?width:height,largeBackgroundPoints&amp;&amp;(largeBackgroundPoints[idxOffset]=isValueAxisH?coordLayout.x:x,largeBackgroundPoints[idxOffset+1]=isValueAxisH?y:coordLayout.y,largeBackgroundPoints[idxOffset+2]=bgSize),largeDataIndices[dataIndex]=dataIndex):data2.setItemLayout(dataIndex,{x:x,y:y,width:width,height:height}),idxOffset+=3}isLarge&amp;&amp;data2.setLayout({largePoints:largePoints,largeDataIndices:largeDataIndices,largeBackgroundPoints:largeBackgroundPoints,valueAxisHorizontal:isValueAxisH})}}}}}}function isOnCartesian(seriesModel){return seriesModel.coordinateSystem&amp;&amp;"cartesian2d"===seriesModel.coordinateSystem.type}function isInLargeMode(seriesModel){return seriesModel.pipelineContext&amp;&amp;seriesModel.pipelineContext.large}var TimeScale=function(_super){function TimeScale2(settings){var _this=_super.call(this,settings)||this;return _this.type="time",_this}return __extends$1(TimeScale2,_super),TimeScale2.prototype.getLabel=function(tick){var useUTC=this.getSetting("useUTC");return format$1(tick.value,fullLeveledFormatter[function getDefaultFormatPrecisionOfInterval(timeUnit){switch(timeUnit){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,useUTC,this.getSetting("locale"))},TimeScale2.prototype.getFormattedLabel=function(tick,idx,labelFormatter){var isUTC=this.getSetting("useUTC");return function leveledFormat(tick,idx,formatter,lang,isUTC){var template=null;if(isString(formatter))template=formatter;else if(isFunction(formatter))template=formatter(tick.value,idx,{level:tick.level});else{var defaults$1=extend({},defaultLeveledFormatter);if(tick.level&gt;0)for(var i=0;i&lt;primaryTimeUnits.length;++i)defaults$1[primaryTimeUnits[i]]="{primary|"+defaults$1[primaryTimeUnits[i]]+"}";var mergedFormatter=formatter?!1===formatter.inherit?formatter:defaults(formatter,defaults$1):defaults$1,unit=getUnitFromValue(tick.value,isUTC);if(mergedFormatter[unit])template=mergedFormatter[unit];else if(mergedFormatter.inherit){for(i=timeUnits.indexOf(unit)-1;i&gt;=0;--i)if(mergedFormatter[unit]){template=mergedFormatter[unit];break}template=template||defaults$1.none}if(isArray$1(template)){var levelId=null==tick.level?0:tick.level&gt;=0?tick.level:template.length+tick.level;template=template[levelId=Math.min(levelId,template.length-1)]}}return format$1(new Date(tick.value),template,isUTC,lang)}(tick,idx,labelFormatter,this.getSetting("locale"),isUTC)},TimeScale2.prototype.getTicks=function(){var interval=this._interval,extent3=this._extent,ticks=[];if(!interval)return ticks;ticks.push({value:extent3[0],level:0});var useUTC=this.getSetting("useUTC"),innerTicks=function getIntervalTicks(bottomUnitName,approxInterval,isUTC,extent3){var safeLimit=1e4,unitNames=timeUnits,iter=0;function addTicksInSpan(interval,minTimestamp,maxTimestamp,getMethodName,setMethodName,isDate,out2){for(var date=new Date(minTimestamp),dateTime=minTimestamp,d=date[getMethodName]();dateTime&lt;maxTimestamp&amp;&amp;dateTime&lt;=extent3[1];)out2.push({value:dateTime}),d+=interval,date[setMethodName](d),dateTime=date.getTime();out2.push({value:dateTime,notAdd:!0})}function addLevelTicks(unitName,lastLevelTicks,levelTicks2){var newAddedTicks=[],isFirstLevel=!lastLevelTicks.length;if(!function isUnitValueSame(unit,valueA,valueB,isUTC){var dateA=parseDate(valueA),dateB=parseDate(valueB),isSame=function(unit2){return getUnitValue(dateA,unit2,isUTC)===getUnitValue(dateB,unit2,isUTC)},isSameYear=function(){return isSame("year")},isSameMonth=function(){return isSameYear()&amp;&amp;isSame("month")},isSameDay=function(){return isSameMonth()&amp;&amp;isSame("day")},isSameHour=function(){return isSameDay()&amp;&amp;isSame("hour")},isSameMinute=function(){return isSameHour()&amp;&amp;isSame("minute")},isSameSecond=function(){return isSameMinute()&amp;&amp;isSame("second")},isSameMilliSecond=function(){return isSameSecond()&amp;&amp;isSame("millisecond")};switch(unit){case"year":return isSameYear();case"month":return isSameMonth();case"day":return isSameDay();case"hour":return isSameHour();case"minute":return isSameMinute();case"second":return isSameSecond();case"millisecond":return isSameMilliSecond()}}(getPrimaryTimeUnit(unitName),extent3[0],extent3[1],isUTC)){isFirstLevel&amp;&amp;(lastLevelTicks=[{value:getFirstTimestampOfUnit(new Date(extent3[0]),unitName,isUTC)},{value:extent3[1]}]);for(var i2=0;i2&lt;lastLevelTicks.length-1;i2++){var startTick=lastLevelTicks[i2].value,endTick=lastLevelTicks[i2+1].value;if(startTick!==endTick){var interval=void 0,getterName=void 0,setterName=void 0,isDate=!1;switch(unitName){case"year":interval=Math.max(1,Math.round(approxInterval/864e5/365)),getterName=fullYearGetterName(isUTC),setterName=fullYearSetterName(isUTC);break;case"half-year":case"quarter":case"month":interval=getMonthInterval(approxInterval),getterName=monthGetterName(isUTC),setterName=monthSetterName(isUTC);break;case"week":case"half-week":case"day":interval=getDateInterval(approxInterval),getterName=dateGetterName(isUTC),setterName=dateSetterName(isUTC),isDate=!0;break;case"half-day":case"quarter-day":case"hour":interval=getHourInterval(approxInterval),getterName=hoursGetterName(isUTC),setterName=hoursSetterName(isUTC);break;case"minute":interval=getMinutesAndSecondsInterval(approxInterval,!0),getterName=minutesGetterName(isUTC),setterName=minutesSetterName(isUTC);break;case"second":interval=getMinutesAndSecondsInterval(approxInterval,!1),getterName=secondsGetterName(isUTC),setterName=secondsSetterName(isUTC);break;case"millisecond":interval=getMillisecondsInterval(approxInterval),getterName=millisecondsGetterName(isUTC),setterName=millisecondsSetterName(isUTC)}addTicksInSpan(interval,startTick,endTick,getterName,setterName,isDate,newAddedTicks),"year"===unitName&amp;&amp;levelTicks2.length&gt;1&amp;&amp;0===i2&amp;&amp;levelTicks2.unshift({value:levelTicks2[0].value-interval})}}for(i2=0;i2&lt;newAddedTicks.length;i2++)levelTicks2.push(newAddedTicks[i2]);return newAddedTicks}}for(var levelsTicks=[],currentLevelTicks=[],tickCount=0,lastLevelTickCount=0,i=0;i&lt;unitNames.length&amp;&amp;iter++&lt;safeLimit;++i){var primaryTimeUnit=getPrimaryTimeUnit(unitNames[i]);if(isPrimaryTimeUnit(unitNames[i]))if(addLevelTicks(unitNames[i],levelsTicks[levelsTicks.length-1]||[],currentLevelTicks),primaryTimeUnit!==(unitNames[i+1]?getPrimaryTimeUnit(unitNames[i+1]):null)){if(currentLevelTicks.length){lastLevelTickCount=tickCount,currentLevelTicks.sort(function(a,b){return a.value-b.value});for(var levelTicksRemoveDuplicated=[],i_1=0;i_1&lt;currentLevelTicks.length;++i_1){var tickValue=currentLevelTicks[i_1].value;0!==i_1&amp;&amp;currentLevelTicks[i_1-1].value===tickValue||(levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]),tickValue&gt;=extent3[0]&amp;&amp;tickValue&lt;=extent3[1]&amp;&amp;tickCount++)}var targetTickNum=(extent3[1]-extent3[0])/approxInterval;if(tickCount&gt;1.5*targetTickNum&amp;&amp;lastLevelTickCount&gt;targetTickNum/1.5)break;if(levelsTicks.push(levelTicksRemoveDuplicated),tickCount&gt;targetTickNum||bottomUnitName===unitNames[i])break}currentLevelTicks=[]}}var levelsTicksInExtent=filter(map$1(levelsTicks,function(levelTicks2){return filter(levelTicks2,function(tick){return tick.value&gt;=extent3[0]&amp;&amp;tick.value&lt;=extent3[1]&amp;&amp;!tick.notAdd})}),function(levelTicks2){return levelTicks2.length&gt;0}),ticks=[],maxLevel=levelsTicksInExtent.length-1;for(i=0;i&lt;levelsTicksInExtent.length;++i)for(var levelTicks=levelsTicksInExtent[i],k=0;k&lt;levelTicks.length;++k)ticks.push({value:levelTicks[k].value,level:maxLevel-i});ticks.sort(function(a,b){return a.value-b.value});var result=[];for(i=0;i&lt;ticks.length;++i)0!==i&amp;&amp;ticks[i].value===ticks[i-1].value||result.push(ticks[i]);return result}(this._minLevelUnit,this._approxInterval,useUTC,extent3);return(ticks=ticks.concat(innerTicks)).push({value:extent3[1],level:0}),ticks},TimeScale2.prototype.calcNiceExtent=function(opt){var extent3=this._extent;if(extent3[0]===extent3[1]&amp;&amp;(extent3[0]-=864e5,extent3[1]+=864e5),extent3[1]===-1/0&amp;&amp;extent3[0]===1/0){var d=new Date;extent3[1]=+new Date(d.getFullYear(),d.getMonth(),d.getDate()),extent3[0]=extent3[1]-864e5}this.calcNiceTicks(opt.splitNumber,opt.minInterval,opt.maxInterval)},TimeScale2.prototype.calcNiceTicks=function(approxTickNum,minInterval,maxInterval){approxTickNum=approxTickNum||10;var extent3=this._extent,span=extent3[1]-extent3[0];this._approxInterval=span/approxTickNum,null!=minInterval&amp;&amp;this._approxInterval&lt;minInterval&amp;&amp;(this._approxInterval=minInterval),null!=maxInterval&amp;&amp;this._approxInterval&gt;maxInterval&amp;&amp;(this._approxInterval=maxInterval);var scaleIntervalsLen=scaleIntervals.length,idx=Math.min(function(a,x,lo,hi){for(;lo&lt;hi;){var mid=lo+hi&gt;&gt;&gt;1;a[mid][1]&lt;x?lo=mid+1:hi=mid}return lo}(scaleIntervals,this._approxInterval,0,scaleIntervalsLen),scaleIntervalsLen-1);this._interval=scaleIntervals[idx][1],this._minLevelUnit=scaleIntervals[Math.max(idx-1,0)][0]},TimeScale2.prototype.parse=function(val){return isNumber(val)?val:+parseDate(val)},TimeScale2.prototype.contain=function(val){return contain$1(this.parse(val),this._extent)},TimeScale2.prototype.normalize=function(val){return normalize$2(this.parse(val),this._extent)},TimeScale2.prototype.scale=function(val){return scale(val,this._extent)},TimeScale2.type="time",TimeScale2}(IntervalScale),scaleIntervals=[["second",1e3],["minute",6e4],["hour",36e5],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",15768e6],["year",31536e6]];function getDateInterval(approxInterval,daysInMonth){return(approxInterval/=864e5)&gt;16?16:approxInterval&gt;7.5?7:approxInterval&gt;3.5?4:approxInterval&gt;1.5?2:1}function getMonthInterval(approxInterval){return(approxInterval/=2592e6)&gt;6?6:approxInterval&gt;3?3:approxInterval&gt;2?2:1}function getHourInterval(approxInterval){return(approxInterval/=36e5)&gt;12?12:approxInterval&gt;6?6:approxInterval&gt;3.5?4:approxInterval&gt;2?2:1}function getMinutesAndSecondsInterval(approxInterval,isMinutes){return(approxInterval/=isMinutes?6e4:1e3)&gt;30?30:approxInterval&gt;20?20:approxInterval&gt;15?15:approxInterval&gt;10?10:approxInterval&gt;5?5:approxInterval&gt;2?2:1}function getMillisecondsInterval(approxInterval){return nice(approxInterval,!0)}function getFirstTimestampOfUnit(date,unitName,isUTC){var outDate=new Date(date);switch(getPrimaryTimeUnit(unitName)){case"year":case"month":outDate[monthSetterName(isUTC)](0);case"day":outDate[dateSetterName(isUTC)](1);case"hour":outDate[hoursSetterName(isUTC)](0);case"minute":outDate[minutesSetterName(isUTC)](0);case"second":outDate[secondsSetterName(isUTC)](0),outDate[millisecondsSetterName(isUTC)](0)}return outDate.getTime()}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(_super){function LogScale2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="log",_this.base=10,_this._originalScale=new IntervalScale,_this._interval=0,_this}return __extends$1(LogScale2,_super),LogScale2.prototype.getTicks=function(expandToNicedExtent){var originalScale=this._originalScale,extent3=this._extent,originalExtent=originalScale.getExtent();return map$1(intervalScaleProto.getTicks.call(this,expandToNicedExtent),function(tick){var val=tick.value,powVal=round$3(mathPow$1(this.base,val));return powVal=val===extent3[0]&amp;&amp;this._fixMin?fixRoundingError(powVal,originalExtent[0]):powVal,{value:powVal=val===extent3[1]&amp;&amp;this._fixMax?fixRoundingError(powVal,originalExtent[1]):powVal}},this)},LogScale2.prototype.setExtent=function(start2,end2){var base2=mathLog$1(this.base);start2=mathLog$1(Math.max(0,start2))/base2,end2=mathLog$1(Math.max(0,end2))/base2,intervalScaleProto.setExtent.call(this,start2,end2)},LogScale2.prototype.getExtent=function(){var base2=this.base,extent3=scaleProto.getExtent.call(this);extent3[0]=mathPow$1(base2,extent3[0]),extent3[1]=mathPow$1(base2,extent3[1]);var originalExtent=this._originalScale.getExtent();return this._fixMin&amp;&amp;(extent3[0]=fixRoundingError(extent3[0],originalExtent[0])),this._fixMax&amp;&amp;(extent3[1]=fixRoundingError(extent3[1],originalExtent[1])),extent3},LogScale2.prototype.unionExtent=function(extent3){this._originalScale.unionExtent(extent3);var base2=this.base;extent3[0]=mathLog$1(extent3[0])/mathLog$1(base2),extent3[1]=mathLog$1(extent3[1])/mathLog$1(base2),scaleProto.unionExtent.call(this,extent3)},LogScale2.prototype.unionExtentFromData=function(data,dim){this.unionExtent(data.getApproximateExtent(dim))},LogScale2.prototype.calcNiceTicks=function(approxTickNum){approxTickNum=approxTickNum||10;var extent3=this._extent,span=extent3[1]-extent3[0];if(!(span===1/0||span&lt;=0)){var interval=quantity(span);for(approxTickNum/span*interval&lt;=.5&amp;&amp;(interval*=10);!isNaN(interval)&amp;&amp;Math.abs(interval)&lt;1&amp;&amp;Math.abs(interval)&gt;0;)interval*=10;var niceExtent=[round$3(mathCeil$1(extent3[0]/interval)*interval),round$3(mathFloor$1(extent3[1]/interval)*interval)];this._interval=interval,this._niceExtent=niceExtent}},LogScale2.prototype.calcNiceExtent=function(opt){intervalScaleProto.calcNiceExtent.call(this,opt),this._fixMin=opt.fixMin,this._fixMax=opt.fixMax},LogScale2.prototype.parse=function(val){return val},LogScale2.prototype.contain=function(val){return contain$1(val=mathLog$1(val)/mathLog$1(this.base),this._extent)},LogScale2.prototype.normalize=function(val){return normalize$2(val=mathLog$1(val)/mathLog$1(this.base),this._extent)},LogScale2.prototype.scale=function(val){return val=scale(val,this._extent),mathPow$1(this.base,val)},LogScale2.type="log",LogScale2}(Scale),proto=LogScale.prototype;function fixRoundingError(val,originalVal){return roundingErrorFix(val,getPrecision(originalVal))}proto.getMinorTicks=intervalScaleProto.getMinorTicks,proto.getLabel=intervalScaleProto.getLabel,Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function ScaleRawExtentInfo2(scale2,model,originalExtent){this._prepareParams(scale2,model,originalExtent)}return ScaleRawExtentInfo2.prototype._prepareParams=function(scale2,model,dataExtent){dataExtent[1]&lt;dataExtent[0]&amp;&amp;(dataExtent=[NaN,NaN]),this._dataMin=dataExtent[0],this._dataMax=dataExtent[1];var isOrdinal=this._isOrdinal="ordinal"===scale2.type;this._needCrossZero="interval"===scale2.type&amp;&amp;model.getNeedCrossZero&amp;&amp;model.getNeedCrossZero();var axisMinValue=model.get("min",!0);null==axisMinValue&amp;&amp;(axisMinValue=model.get("startValue",!0));var modelMinRaw=this._modelMinRaw=axisMinValue;isFunction(modelMinRaw)?this._modelMinNum=parseAxisModelMinMax(scale2,modelMinRaw({min:dataExtent[0],max:dataExtent[1]})):"dataMin"!==modelMinRaw&amp;&amp;(this._modelMinNum=parseAxisModelMinMax(scale2,modelMinRaw));var modelMaxRaw=this._modelMaxRaw=model.get("max",!0);if(isFunction(modelMaxRaw)?this._modelMaxNum=parseAxisModelMinMax(scale2,modelMaxRaw({min:dataExtent[0],max:dataExtent[1]})):"dataMax"!==modelMaxRaw&amp;&amp;(this._modelMaxNum=parseAxisModelMinMax(scale2,modelMaxRaw)),isOrdinal)this._axisDataLen=model.getCategories().length;else{var boundaryGap=model.get("boundaryGap"),boundaryGapArr=isArray$1(boundaryGap)?boundaryGap:[boundaryGap||0,boundaryGap||0];"boolean"==typeof boundaryGapArr[0]||"boolean"==typeof boundaryGapArr[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(boundaryGapArr[0],1),parsePercent$1(boundaryGapArr[1],1)]}},ScaleRawExtentInfo2.prototype.calculate=function(){var isOrdinal=this._isOrdinal,dataMin=this._dataMin,dataMax=this._dataMax,axisDataLen=this._axisDataLen,boundaryGapInner=this._boundaryGapInner,span=isOrdinal?null:dataMax-dataMin||Math.abs(dataMin),min3="dataMin"===this._modelMinRaw?dataMin:this._modelMinNum,max3="dataMax"===this._modelMaxRaw?dataMax:this._modelMaxNum,minFixed=null!=min3,maxFixed=null!=max3;null==min3&amp;&amp;(min3=isOrdinal?axisDataLen?0:NaN:dataMin-boundaryGapInner[0]*span),null==max3&amp;&amp;(max3=isOrdinal?axisDataLen?axisDataLen-1:NaN:dataMax+boundaryGapInner[1]*span),(null==min3||!isFinite(min3))&amp;&amp;(min3=NaN),(null==max3||!isFinite(max3))&amp;&amp;(max3=NaN);var isBlank=eqNaN(min3)||eqNaN(max3)||isOrdinal&amp;&amp;!axisDataLen;this._needCrossZero&amp;&amp;(min3&gt;0&amp;&amp;max3&gt;0&amp;&amp;!minFixed&amp;&amp;(min3=0),min3&lt;0&amp;&amp;max3&lt;0&amp;&amp;!maxFixed&amp;&amp;(max3=0));var determinedMin=this._determinedMin,determinedMax=this._determinedMax;return null!=determinedMin&amp;&amp;(min3=determinedMin,minFixed=!0),null!=determinedMax&amp;&amp;(max3=determinedMax,maxFixed=!0),{min:min3,max:max3,minFixed:minFixed,maxFixed:maxFixed,isBlank:isBlank}},ScaleRawExtentInfo2.prototype.modifyDataMinMax=function(minMaxName,val){this[DATA_MIN_MAX_ATTR[minMaxName]]=val},ScaleRawExtentInfo2.prototype.setDeterminedMinMax=function(minMaxName,val){this[DETERMINED_MIN_MAX_ATTR[minMaxName]]=val},ScaleRawExtentInfo2.prototype.freeze=function(){this.frozen=!0},ScaleRawExtentInfo2}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(scale2,model,originalExtent){var rawExtentInfo=scale2.rawExtentInfo;return rawExtentInfo||(rawExtentInfo=new ScaleRawExtentInfo(scale2,model,originalExtent),scale2.rawExtentInfo=rawExtentInfo,rawExtentInfo)}function parseAxisModelMinMax(scale2,minMax){return null==minMax?null:eqNaN(minMax)?NaN:scale2.parse(minMax)}function getScaleExtent(scale2,model){var scaleType=scale2.type,rawExtentResult=ensureScaleRawExtentInfo(scale2,model,scale2.getExtent()).calculate();scale2.setBlank(rawExtentResult.isBlank);var min3=rawExtentResult.min,max3=rawExtentResult.max,ecModel=model.ecModel;if(ecModel&amp;&amp;"time"===scaleType){var barSeriesModels=prepareLayoutBarSeries("bar",ecModel),isBaseAxisAndHasBarSeries_1=!1;if(each$f(barSeriesModels,function(seriesModel){isBaseAxisAndHasBarSeries_1=isBaseAxisAndHasBarSeries_1||seriesModel.getBaseAxis()===model.axis}),isBaseAxisAndHasBarSeries_1){var barWidthAndOffset=makeColumnLayout(barSeriesModels),adjustedScale=function adjustScaleForOverflow(min3,max3,model,barWidthAndOffset){var axisExtent=model.axis.getExtent(),axisLength=Math.abs(axisExtent[1]-axisExtent[0]),barsOnCurrentAxis=function retrieveColumnLayout(barWidthAndOffset,axis,seriesModel){if(barWidthAndOffset&amp;&amp;axis)return barWidthAndOffset[getAxisKey$1(axis)]}(barWidthAndOffset,model.axis);if(void 0===barsOnCurrentAxis)return{min:min3,max:max3};var minOverflow=1/0;each$f(barsOnCurrentAxis,function(item){minOverflow=Math.min(item.offset,minOverflow)});var maxOverflow=-1/0;each$f(barsOnCurrentAxis,function(item){maxOverflow=Math.max(item.offset+item.width,maxOverflow)}),minOverflow=Math.abs(minOverflow),maxOverflow=Math.abs(maxOverflow);var totalOverFlow=minOverflow+maxOverflow,oldRange=max3-min3,overflowBuffer=oldRange/(1-(minOverflow+maxOverflow)/axisLength)-oldRange;return max3+=overflowBuffer*(maxOverflow/totalOverFlow),min3-=overflowBuffer*(minOverflow/totalOverFlow),{min:min3,max:max3}}(min3,max3,model,barWidthAndOffset);min3=adjustedScale.min,max3=adjustedScale.max}}return{extent:[min3,max3],fixMin:rawExtentResult.minFixed,fixMax:rawExtentResult.maxFixed}}function niceScaleExtent(scale2,inModel){var model=inModel,extentInfo=getScaleExtent(scale2,model),extent3=extentInfo.extent,splitNumber=model.get("splitNumber");scale2 instanceof LogScale&amp;&amp;(scale2.base=model.get("logBase"));var scaleType=scale2.type,interval=model.get("interval"),isIntervalOrTime="interval"===scaleType||"time"===scaleType;scale2.setExtent(extent3[0],extent3[1]),scale2.calcNiceExtent({splitNumber:splitNumber,fixMin:extentInfo.fixMin,fixMax:extentInfo.fixMax,minInterval:isIntervalOrTime?model.get("minInterval"):null,maxInterval:isIntervalOrTime?model.get("maxInterval"):null}),null!=interval&amp;&amp;scale2.setInterval&amp;&amp;scale2.setInterval(interval)}function createScaleByModel$1(model,axisType){if(axisType=axisType||model.get("type"))switch(axisType){case"category":return new OrdinalScale({ordinalMeta:model.getOrdinalMeta?model.getOrdinalMeta():model.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:model.ecModel.getLocaleModel(),useUTC:model.ecModel.get("useUTC")});default:return new(Scale.getClass(axisType)||IntervalScale)}}function makeLabelFormatter(axis){var labelFormatter=axis.getLabelModel().get("formatter"),categoryTickStart="category"===axis.type?axis.scale.getExtent()[0]:null;return"time"===axis.scale.type?function(tpl){return function(tick,idx){return axis.scale.getFormattedLabel(tick,idx,tpl)}}(labelFormatter):isString(labelFormatter)?function(tpl){return function(tick){var label=axis.scale.getLabel(tick);return tpl.replace("{value}",null!=label?label:"")}}(labelFormatter):isFunction(labelFormatter)?function(cb){return function(tick,idx){return null!=categoryTickStart&amp;&amp;(idx=tick.value-categoryTickStart),cb(getAxisRawValue(axis,tick),idx,null!=tick.level?{level:tick.level}:null)}}(labelFormatter):function(tick){return axis.scale.getLabel(tick)}}function getAxisRawValue(axis,tick){return"category"===axis.type?axis.scale.getLabel(tick):tick.value}function rotateTextRect(textRect,rotate2){var rotateRadians=rotate2*Math.PI/180,beforeWidth=textRect.width,beforeHeight=textRect.height,afterWidth=beforeWidth*Math.abs(Math.cos(rotateRadians))+Math.abs(beforeHeight*Math.sin(rotateRadians)),afterHeight=beforeWidth*Math.abs(Math.sin(rotateRadians))+Math.abs(beforeHeight*Math.cos(rotateRadians));return new BoundingRect(textRect.x,textRect.y,afterWidth,afterHeight)}function getOptionCategoryInterval(model){var interval=model.get("interval");return null==interval?"auto":interval}function shouldShowAllLabels(axis){return"category"===axis.type&amp;&amp;0===getOptionCategoryInterval(axis.getLabelModel())}function getDataDimensionsOnAxis(data,axisDim){var dataDimMap={};return each$f(data.mapDimensionsAll(axisDim),function(dataDim){dataDimMap[getStackedDimension(data,dataDim)]=!0}),keys(dataDimMap)}var AxisModelCommonMixin=function(){function AxisModelCommonMixin2(){}return AxisModelCommonMixin2.prototype.getNeedCrossZero=function(){return!this.option.scale},AxisModelCommonMixin2.prototype.getCoordSysModel=function(){},AxisModelCommonMixin2}();function createList$2(seriesModel){return createSeriesData(null,seriesModel)}var dataStack={isDimensionStacked:isDimensionStacked,enableDataStack:enableDataStack,getStackedDimension:getStackedDimension};function createScale(dataExtent,option){var axisModel=option;option instanceof Model||(axisModel=new Model(option));var scale2=createScaleByModel$1(axisModel);return scale2.setExtent(dataExtent[0],dataExtent[1]),niceScaleExtent(scale2,axisModel),scale2}function mixinAxisModelCommonMethods(Model2){mixin(Model2,AxisModelCommonMixin)}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions:createDimensions,createList:createList$2,createScale:createScale,createSymbol:createSymbol$1,createTextStyle:function createTextStyle(textStyleModel,opts){return createTextStyle$1(textStyleModel,null,null,"normal"!==(opts=opts||{}).state)},dataStack:dataStack,enableHoverEmphasis:enableHoverEmphasis,getECData:getECData,getLayoutRect:getLayoutRect,mixinAxisModelCommonMethods:mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));function isAroundEqual(a,b){return Math.abs(a-b)&lt;1e-8}function contain(points2,x,y){var w=0,p=points2[0];if(!p)return!1;for(var i=1;i&lt;points2.length;i++){var p2=points2[i];w+=windingLine(p[0],p[1],p2[0],p2[1],x,y),p=p2}var p0=points2[0];return isAroundEqual(p[0],p0[0])&amp;&amp;isAroundEqual(p[1],p0[1])||(w+=windingLine(p[0],p[1],p0[0],p0[1],x,y)),0!==w}var TMP_TRANSFORM=[];function transformPoints(points2,transform2){for(var p=0;p&lt;points2.length;p++)applyTransform$1(points2[p],points2[p],transform2)}function updateBBoxFromPoints(points2,min3,max3,projection){for(var i=0;i&lt;points2.length;i++){var p=points2[i];projection&amp;&amp;(p=projection.project(p)),p&amp;&amp;isFinite(p[0])&amp;&amp;isFinite(p[1])&amp;&amp;(min$1(min3,min3,p),max$1(max3,max3,p))}}var Region=function(){function Region2(name){this.name=name}return Region2.prototype.setCenter=function(center2){this._center=center2},Region2.prototype.getCenter=function(){var center2=this._center;return center2||(center2=this._center=this.calcCenter()),center2},Region2}(),GeoJSONPolygonGeometry=function(){return function GeoJSONPolygonGeometry2(exterior,interiors){this.type="polygon",this.exterior=exterior,this.interiors=interiors}}(),GeoJSONLineStringGeometry=function(){return function GeoJSONLineStringGeometry2(points2){this.type="linestring",this.points=points2}}(),GeoJSONRegion=function(_super){function GeoJSONRegion2(name,geometries,cp){var _this=_super.call(this,name)||this;return _this.type="geoJSON",_this.geometries=geometries,_this._center=cp&amp;&amp;[cp[0],cp[1]],_this}return __extends$1(GeoJSONRegion2,_super),GeoJSONRegion2.prototype.calcCenter=function(){for(var largestGeo,geometries=this.geometries,largestGeoSize=0,i=0;i&lt;geometries.length;i++){var geo=geometries[i],exterior=geo.exterior,size=exterior&amp;&amp;exterior.length;size&gt;largestGeoSize&amp;&amp;(largestGeo=geo,largestGeoSize=size)}if(largestGeo)return function centroid$1(points2){for(var signedArea=0,cx=0,cy=0,len2=points2.length,x0=points2[len2-1][0],y0=points2[len2-1][1],i=0;i&lt;len2;i++){var x1=points2[i][0],y1=points2[i][1],a=x0*y1-x1*y0;signedArea+=a,cx+=(x0+x1)*a,cy+=(y0+y1)*a,x0=x1,y0=y1}return signedArea?[cx/signedArea/3,cy/signedArea/3,signedArea]:[points2[0][0]||0,points2[0][1]||0]}(largestGeo.exterior);var rect=this.getBoundingRect();return[rect.x+rect.width/2,rect.y+rect.height/2]},GeoJSONRegion2.prototype.getBoundingRect=function(projection){var rect=this._rect;if(rect&amp;&amp;!projection)return rect;var min3=[1/0,1/0],max3=[-1/0,-1/0];return each$f(this.geometries,function(geo){"polygon"===geo.type?updateBBoxFromPoints(geo.exterior,min3,max3,projection):each$f(geo.points,function(points2){updateBBoxFromPoints(points2,min3,max3,projection)})}),isFinite(min3[0])&amp;&amp;isFinite(min3[1])&amp;&amp;isFinite(max3[0])&amp;&amp;isFinite(max3[1])||(min3[0]=min3[1]=max3[0]=max3[1]=0),rect=new BoundingRect(min3[0],min3[1],max3[0]-min3[0],max3[1]-min3[1]),projection||(this._rect=rect),rect},GeoJSONRegion2.prototype.contain=function(coord){var rect=this.getBoundingRect(),geometries=this.geometries;if(!rect.contain(coord[0],coord[1]))return!1;loopGeo:for(var i=0,len2=geometries.length;i&lt;len2;i++){var geo=geometries[i];if("polygon"===geo.type){var exterior=geo.exterior,interiors=geo.interiors;if(contain(exterior,coord[0],coord[1])){for(var k=0;k&lt;(interiors?interiors.length:0);k++)if(contain(interiors[k],coord[0],coord[1]))continue loopGeo;return!0}}}return!1},GeoJSONRegion2.prototype.transformTo=function(x,y,width,height){var rect=this.getBoundingRect(),aspect=rect.width/rect.height;width?height||(height=width/aspect):width=aspect*height;for(var target=new BoundingRect(x,y,width,height),transform2=rect.calculateTransform(target),geometries=this.geometries,i=0;i&lt;geometries.length;i++){var geo=geometries[i];"polygon"===geo.type?(transformPoints(geo.exterior,transform2),each$f(geo.interiors,function(interior){transformPoints(interior,transform2)})):each$f(geo.points,function(points2){transformPoints(points2,transform2)})}(rect=this._rect).copy(target),this._center=[rect.x+rect.width/2,rect.y+rect.height/2]},GeoJSONRegion2.prototype.cloneShallow=function(name){null==name&amp;&amp;(name=this.name);var newRegion=new GeoJSONRegion2(name,this.geometries,this._center);return newRegion._rect=this._rect,newRegion.transformTo=null,newRegion},GeoJSONRegion2}(Region),GeoSVGRegion=function(_super){function GeoSVGRegion2(name,elOnlyForCalculate){var _this=_super.call(this,name)||this;return _this.type="geoSVG",_this._elOnlyForCalculate=elOnlyForCalculate,_this}return __extends$1(GeoSVGRegion2,_super),GeoSVGRegion2.prototype.calcCenter=function(){for(var el=this._elOnlyForCalculate,rect=el.getBoundingRect(),center2=[rect.x+rect.width/2,rect.y+rect.height/2],mat=identity(TMP_TRANSFORM),target=el;target&amp;&amp;!target.isGeoSVGGraphicRoot;)mul(mat,target.getLocalTransform(),mat),target=target.parent;return invert(mat,mat),applyTransform$1(center2,center2,mat),center2},GeoSVGRegion2}(Region);function decodeRings(rings,encodeOffsets,encodeScale){for(var c=0;c&lt;rings.length;c++)rings[c]=decodeRing(rings[c],encodeOffsets[c],encodeScale)}function decodeRing(coordinate,encodeOffsets,encodeScale){for(var result=[],prevX=encodeOffsets[0],prevY=encodeOffsets[1],i=0;i&lt;coordinate.length;i+=2){var x=coordinate.charCodeAt(i)-64,y=coordinate.charCodeAt(i+1)-64;x=x&gt;&gt;1^-(1&amp;x),y=y&gt;&gt;1^-(1&amp;y),prevX=x+=prevX,prevY=y+=prevY,result.push([x/encodeScale,y/encodeScale])}return result}function parseGeoJSON(geoJson,nameProperty){return map$1(filter((geoJson=function decode(json){if(!json.UTF8Encoding)return json;var jsonCompressed=json,encodeScale=jsonCompressed.UTF8Scale;return null==encodeScale&amp;&amp;(encodeScale=1024),each$f(jsonCompressed.features,function(feature){var geometry=feature.geometry,encodeOffsets=geometry.encodeOffsets,coordinates=geometry.coordinates;if(encodeOffsets)switch(geometry.type){case"LineString":geometry.coordinates=decodeRing(coordinates,encodeOffsets,encodeScale);break;case"Polygon":case"MultiLineString":decodeRings(coordinates,encodeOffsets,encodeScale);break;case"MultiPolygon":each$f(coordinates,function(rings,idx){return decodeRings(rings,encodeOffsets[idx],encodeScale)})}}),jsonCompressed.UTF8Encoding=!1,jsonCompressed}(geoJson)).features,function(featureObj){return featureObj.geometry&amp;&amp;featureObj.properties&amp;&amp;featureObj.geometry.coordinates.length&gt;0}),function(featureObj){var properties=featureObj.properties,geo=featureObj.geometry,geometries=[];switch(geo.type){case"Polygon":var coordinates=geo.coordinates;geometries.push(new GeoJSONPolygonGeometry(coordinates[0],coordinates.slice(1)));break;case"MultiPolygon":each$f(geo.coordinates,function(item){item[0]&amp;&amp;geometries.push(new GeoJSONPolygonGeometry(item[0],item.slice(1)))});break;case"LineString":geometries.push(new GeoJSONLineStringGeometry([geo.coordinates]));break;case"MultiLineString":geometries.push(new GeoJSONLineStringGeometry(geo.coordinates))}var region=new GeoJSONRegion(properties[nameProperty||"name"],geometries,properties.cp);return region.properties=properties,region})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER:9007199254740991,asc:asc$2,getPercentWithPrecision:function getPercentWithPrecision(valueList,idx,precision){return valueList[idx]&amp;&amp;getPercentSeats(valueList,precision)[idx]||0},getPixelPrecision:getPixelPrecision,getPrecision:getPrecision,getPrecisionSafe:getPrecisionSafe,isNumeric:isNumeric,isRadianAroundZero:isRadianAroundZero,linearMap:linearMap$2,nice:nice,numericToNumber:numericToNumber,parseDate:parseDate,quantile:quantile,quantity:quantity,quantityExponent:quantityExponent,reformIntervals:reformIntervals,remRadian:remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc:Arc,BezierCurve:BezierCurve,BoundingRect:BoundingRect,Circle:Circle,CompoundPath:CompoundPath,Ellipse:Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable:IncrementalDisplayable,Line:Line$1,LinearGradient:LinearGradient,Polygon:Polygon,Polyline:Polyline$1,RadialGradient:RadialGradient,Rect:Rect$2,Ring:Ring,Sector:Sector,Text:ZRText,clipPointsByRect:clipPointsByRect,clipRectByRect:clipRectByRect,createIcon:createIcon,extendPath:extendPath,extendShape:extendShape,getShapeClass:getShapeClass,getTransform:getTransform$1,initProps:initProps,makeImage:makeImage,makePath:makePath,mergePath:mergePath,registerShape:registerShape,resizePath:resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas:addCommas,capitalFirst:function capitalFirst(str){return str?str.charAt(0).toUpperCase()+str.substr(1):str},encodeHTML:encodeHTML,formatTime:formatTime,formatTpl:formatTpl,getTextRect:function getTextRect(text,font,align,verticalAlign,padding,rich,truncate,lineHeight){return new ZRText({style:{text:text,font:font,align:align,verticalAlign:verticalAlign,padding:padding,rich:rich,overflow:truncate?"truncate":null,lineHeight:lineHeight}}).getBoundingRect()},getTooltipMarker:getTooltipMarker,normalizeCssArray:normalizeCssArray,toCamelCase:toCamelCase,truncateText:function truncateText(text,containerWidth,font,ellipsis,options){var out2={};return truncateText2(out2,text,containerWidth,font,ellipsis,options),out2.text}},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults:defaults,each:each$f,extend:extend,filter:filter,indexOf:indexOf,inherits:inherits,isArray:isArray$1,isFunction:isFunction,isObject:isObject$3,isString:isString,map:map$1,merge:merge,reduce:reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(axis,values){var nums=map$1(values,function(val){return axis.scale.parse(val)});return"time"===axis.type&amp;&amp;nums.length&gt;0&amp;&amp;(nums.sort(),nums.unshift(nums[0]),nums.push(nums[nums.length-1])),nums}function createAxisLabels(axis){var custom=axis.getLabelModel().get("customValues");if(custom){var labelFormatter_1=makeLabelFormatter(axis),extent_1=axis.scale.getExtent();return{labels:map$1(filter(tickValuesToNumbers(axis,custom),function(val){return val&gt;=extent_1[0]&amp;&amp;val&lt;=extent_1[1]}),function(numval){var tick={value:numval};return{formattedLabel:labelFormatter_1(tick),rawLabel:axis.scale.getLabel(tick),tickValue:numval}})}}return"category"===axis.type?function makeCategoryLabels(axis){var labelModel=axis.getLabelModel(),result=makeCategoryLabelsActually(axis,labelModel);return!labelModel.get("show")||axis.scale.isBlank()?{labels:[],labelCategoryInterval:result.labelCategoryInterval}:result}(axis):function makeRealNumberLabels(axis){var ticks=axis.scale.getTicks(),labelFormatter=makeLabelFormatter(axis);return{labels:map$1(ticks,function(tick,idx){return{level:tick.level,formattedLabel:labelFormatter(tick,idx),rawLabel:axis.scale.getLabel(tick),tickValue:tick.value}})}}(axis)}function createAxisTicks(axis,tickModel){var custom=axis.getTickModel().get("customValues");if(custom){var extent_2=axis.scale.getExtent();return{ticks:filter(tickValuesToNumbers(axis,custom),function(val){return val&gt;=extent_2[0]&amp;&amp;val&lt;=extent_2[1]})}}return"category"===axis.type?function makeCategoryTicks(axis,tickModel){var ticks,tickCategoryInterval,ticksCache=getListCache(axis,"ticks"),optionTickInterval=getOptionCategoryInterval(tickModel),result=listCacheGet(ticksCache,optionTickInterval);if(result)return result;tickModel.get("show")&amp;&amp;!axis.scale.isBlank()||(ticks=[]);if(isFunction(optionTickInterval))ticks=makeLabelsByCustomizedCategoryInterval(axis,optionTickInterval,!0);else if("auto"===optionTickInterval){var labelsResult=makeCategoryLabelsActually(axis,axis.getLabelModel());tickCategoryInterval=labelsResult.labelCategoryInterval,ticks=map$1(labelsResult.labels,function(labelItem){return labelItem.tickValue})}else ticks=makeLabelsByNumericCategoryInterval(axis,tickCategoryInterval=optionTickInterval,!0);return listCacheSet(ticksCache,optionTickInterval,{ticks:ticks,tickCategoryInterval:tickCategoryInterval})}(axis,tickModel):{ticks:map$1(axis.scale.getTicks(),function(tick){return tick.value})}}function makeCategoryLabelsActually(axis,labelModel){var labels,numericLabelInterval,labelsCache=getListCache(axis,"labels"),optionLabelInterval=getOptionCategoryInterval(labelModel),result=listCacheGet(labelsCache,optionLabelInterval);return result||(isFunction(optionLabelInterval)?labels=makeLabelsByCustomizedCategoryInterval(axis,optionLabelInterval):(numericLabelInterval="auto"===optionLabelInterval?function makeAutoCategoryInterval(axis){var result=inner$g(axis).autoInterval;return null!=result?result:inner$g(axis).autoInterval=axis.calculateCategoryInterval()}(axis):optionLabelInterval,labels=makeLabelsByNumericCategoryInterval(axis,numericLabelInterval)),listCacheSet(labelsCache,optionLabelInterval,{labels:labels,labelCategoryInterval:numericLabelInterval}))}function getListCache(axis,prop){return inner$g(axis)[prop]||(inner$g(axis)[prop]=[])}function listCacheGet(cache,key){for(var i=0;i&lt;cache.length;i++)if(cache[i].key===key)return cache[i].value}function listCacheSet(cache,key,value){return cache.push({key:key,value:value}),value}function makeLabelsByNumericCategoryInterval(axis,categoryInterval,onlyTick){var labelFormatter=makeLabelFormatter(axis),ordinalScale=axis.scale,ordinalExtent=ordinalScale.getExtent(),labelModel=axis.getLabelModel(),result=[],step=Math.max((categoryInterval||0)+1,1),startTick=ordinalExtent[0],tickCount=ordinalScale.count();0!==startTick&amp;&amp;step&gt;1&amp;&amp;tickCount/step&gt;2&amp;&amp;(startTick=Math.round(Math.ceil(startTick/step)*step));var showAllLabel=shouldShowAllLabels(axis),includeMinLabel=labelModel.get("showMinLabel")||showAllLabel,includeMaxLabel=labelModel.get("showMaxLabel")||showAllLabel;includeMinLabel&amp;&amp;startTick!==ordinalExtent[0]&amp;&amp;addItem(ordinalExtent[0]);for(var tickValue=startTick;tickValue&lt;=ordinalExtent[1];tickValue+=step)addItem(tickValue);function addItem(tickValue2){var tickObj={value:tickValue2};result.push(onlyTick?tickValue2:{formattedLabel:labelFormatter(tickObj),rawLabel:ordinalScale.getLabel(tickObj),tickValue:tickValue2})}return includeMaxLabel&amp;&amp;tickValue-step!==ordinalExtent[1]&amp;&amp;addItem(ordinalExtent[1]),result}function makeLabelsByCustomizedCategoryInterval(axis,categoryInterval,onlyTick){var ordinalScale=axis.scale,labelFormatter=makeLabelFormatter(axis),result=[];return each$f(ordinalScale.getTicks(),function(tick){var rawLabel=ordinalScale.getLabel(tick),tickValue=tick.value;categoryInterval(tick.value,rawLabel)&amp;&amp;result.push(onlyTick?tickValue:{formattedLabel:labelFormatter(tick),rawLabel:rawLabel,tickValue:tickValue})}),result}var NORMALIZED_EXTENT=[0,1],Axis=function(){function Axis2(dim,scale2,extent3){this.onBand=!1,this.inverse=!1,this.dim=dim,this.scale=scale2,this._extent=extent3||[0,0]}return Axis2.prototype.contain=function(coord){var extent3=this._extent,min3=Math.min(extent3[0],extent3[1]),max3=Math.max(extent3[0],extent3[1]);return coord&gt;=min3&amp;&amp;coord&lt;=max3},Axis2.prototype.containData=function(data){return this.scale.contain(data)},Axis2.prototype.getExtent=function(){return this._extent.slice()},Axis2.prototype.getPixelPrecision=function(dataExtent){return getPixelPrecision(dataExtent||this.scale.getExtent(),this._extent)},Axis2.prototype.setExtent=function(start2,end2){var extent3=this._extent;extent3[0]=start2,extent3[1]=end2},Axis2.prototype.dataToCoord=function(data,clamp2){var extent3=this._extent,scale2=this.scale;return data=scale2.normalize(data),this.onBand&amp;&amp;"ordinal"===scale2.type&amp;&amp;fixExtentWithBands(extent3=extent3.slice(),scale2.count()),linearMap$2(data,NORMALIZED_EXTENT,extent3,clamp2)},Axis2.prototype.coordToData=function(coord,clamp2){var extent3=this._extent,scale2=this.scale;this.onBand&amp;&amp;"ordinal"===scale2.type&amp;&amp;fixExtentWithBands(extent3=extent3.slice(),scale2.count());var t=linearMap$2(coord,extent3,NORMALIZED_EXTENT,clamp2);return this.scale.scale(t)},Axis2.prototype.pointToData=function(point,clamp2){},Axis2.prototype.getTicksCoords=function(opt){var tickModel=(opt=opt||{}).tickModel||this.getTickModel(),ticksCoords=map$1(createAxisTicks(this,tickModel).ticks,function(tickVal){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(tickVal):tickVal),tickValue:tickVal}},this);return function fixOnBandTicksCoords(axis,ticksCoords,alignWithLabel,clamp2){var ticksLen=ticksCoords.length;if(!axis.onBand||alignWithLabel||!ticksLen)return;var last,diffSize,axisExtent=axis.getExtent();if(1===ticksLen)ticksCoords[0].coord=axisExtent[0],last=ticksCoords[1]={coord:axisExtent[1],tickValue:ticksCoords[0].tickValue};else{var crossLen=ticksCoords[ticksLen-1].tickValue-ticksCoords[0].tickValue,shift_1=(ticksCoords[ticksLen-1].coord-ticksCoords[0].coord)/crossLen;each$f(ticksCoords,function(ticksItem){ticksItem.coord-=shift_1/2});var dataExtent=axis.scale.getExtent();diffSize=1+dataExtent[1]-ticksCoords[ticksLen-1].tickValue,last={coord:ticksCoords[ticksLen-1].coord+shift_1*diffSize,tickValue:dataExtent[1]+1},ticksCoords.push(last)}var inverse=axisExtent[0]&gt;axisExtent[1];littleThan2(ticksCoords[0].coord,axisExtent[0])&amp;&amp;(clamp2?ticksCoords[0].coord=axisExtent[0]:ticksCoords.shift());clamp2&amp;&amp;littleThan2(axisExtent[0],ticksCoords[0].coord)&amp;&amp;ticksCoords.unshift({coord:axisExtent[0]});littleThan2(axisExtent[1],last.coord)&amp;&amp;(clamp2?last.coord=axisExtent[1]:ticksCoords.pop());clamp2&amp;&amp;littleThan2(last.coord,axisExtent[1])&amp;&amp;ticksCoords.push({coord:axisExtent[1]});function littleThan2(a,b){return a=round$3(a),b=round$3(b),inverse?a&gt;b:a&lt;b}}(this,ticksCoords,tickModel.get("alignWithLabel"),opt.clamp),ticksCoords},Axis2.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var splitNumber=this.model.getModel("minorTick").get("splitNumber");return splitNumber&gt;0&amp;&amp;splitNumber&lt;100||(splitNumber=5),map$1(this.scale.getMinorTicks(splitNumber),function(minorTicksGroup){return map$1(minorTicksGroup,function(minorTick){return{coord:this.dataToCoord(minorTick),tickValue:minorTick}},this)},this)},Axis2.prototype.getViewLabels=function(){return createAxisLabels(this).labels},Axis2.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},Axis2.prototype.getTickModel=function(){return this.model.getModel("axisTick")},Axis2.prototype.getBandWidth=function(){var axisExtent=this._extent,dataExtent=this.scale.getExtent(),len2=dataExtent[1]-dataExtent[0]+(this.onBand?1:0);0===len2&amp;&amp;(len2=1);var size=Math.abs(axisExtent[1]-axisExtent[0]);return Math.abs(size)/len2},Axis2.prototype.calculateCategoryInterval=function(){return function calculateCategoryInterval(axis){var params=function fetchAutoCategoryIntervalCalculationParams(axis){var labelModel=axis.getLabelModel();return{axisRotate:axis.getRotate?axis.getRotate():axis.isHorizontal&amp;&amp;!axis.isHorizontal()?90:0,labelRotate:labelModel.get("rotate")||0,font:labelModel.getFont()}}(axis),labelFormatter=makeLabelFormatter(axis),rotation=(params.axisRotate-params.labelRotate)/180*Math.PI,ordinalScale=axis.scale,ordinalExtent=ordinalScale.getExtent(),tickCount=ordinalScale.count();if(ordinalExtent[1]-ordinalExtent[0]&lt;1)return 0;var step=1;tickCount&gt;40&amp;&amp;(step=Math.max(1,Math.floor(tickCount/40)));for(var tickValue=ordinalExtent[0],unitSpan=axis.dataToCoord(tickValue+1)-axis.dataToCoord(tickValue),unitW=Math.abs(unitSpan*Math.cos(rotation)),unitH=Math.abs(unitSpan*Math.sin(rotation)),maxW=0,maxH=0;tickValue&lt;=ordinalExtent[1];tickValue+=step){var width,height,rect=getBoundingRect(labelFormatter({value:tickValue}),params.font,"center","top");width=1.3*rect.width,height=1.3*rect.height,maxW=Math.max(maxW,width,7),maxH=Math.max(maxH,height,7)}var dw=maxW/unitW,dh=maxH/unitH;isNaN(dw)&amp;&amp;(dw=1/0),isNaN(dh)&amp;&amp;(dh=1/0);var interval=Math.max(0,Math.floor(Math.min(dw,dh))),cache=inner$g(axis.model),axisExtent=axis.getExtent(),lastAutoInterval=cache.lastAutoInterval,lastTickCount=cache.lastTickCount;return null!=lastAutoInterval&amp;&amp;null!=lastTickCount&amp;&amp;Math.abs(lastAutoInterval-interval)&lt;=1&amp;&amp;Math.abs(lastTickCount-tickCount)&lt;=1&amp;&amp;lastAutoInterval&gt;interval&amp;&amp;cache.axisExtent0===axisExtent[0]&amp;&amp;cache.axisExtent1===axisExtent[1]?interval=lastAutoInterval:(cache.lastTickCount=tickCount,cache.lastAutoInterval=interval,cache.axisExtent0=axisExtent[0],cache.axisExtent1=axisExtent[1]),interval}(this)},Axis2}();function fixExtentWithBands(extent3,nTick){var margin=(extent3[1]-extent3[0])/nTick/2;extent3[0]+=margin,extent3[1]-=margin}function extendComponentModel(proto2){var Model2=ComponentModel.extend(proto2);return ComponentModel.registerClass(Model2),Model2}function extendComponentView(proto2){var View2=ComponentView.extend(proto2);return ComponentView.registerClass(View2),View2}function extendSeriesModel(proto2){var Model2=SeriesModel.extend(proto2);return SeriesModel.registerClass(Model2),Model2}function extendChartView(proto2){var View2=ChartView.extend(proto2);return ChartView.registerClass(View2),View2}var PI2$2=2*Math.PI,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(pos,distance2,rect,outPt,outDir){var width=rect.width,height=rect.height;switch(pos){case"top":outPt.set(rect.x+width/2,rect.y-distance2),outDir.set(0,-1);break;case"bottom":outPt.set(rect.x+width/2,rect.y+height+distance2),outDir.set(0,1);break;case"left":outPt.set(rect.x-distance2,rect.y+height/2),outDir.set(-1,0);break;case"right":outPt.set(rect.x+width+distance2,rect.y+height/2),outDir.set(1,0)}}function projectPointToArc(cx,cy,r,startAngle,endAngle,anticlockwise,x,y,out2){x-=cx,y-=cy;var d=Math.sqrt(x*x+y*y),ox=(x/=d)*r+cx,oy=(y/=d)*r+cy;if(Math.abs(startAngle-endAngle)%PI2$2&lt;1e-4)return out2[0]=ox,out2[1]=oy,d-r;if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle),endAngle=normalizeRadian(tmp)}else startAngle=normalizeRadian(startAngle),endAngle=normalizeRadian(endAngle);startAngle&gt;endAngle&amp;&amp;(endAngle+=PI2$2);var angle=Math.atan2(y,x);if(angle&lt;0&amp;&amp;(angle+=PI2$2),angle&gt;=startAngle&amp;&amp;angle&lt;=endAngle||angle+PI2$2&gt;=startAngle&amp;&amp;angle+PI2$2&lt;=endAngle)return out2[0]=ox,out2[1]=oy,d-r;var x1=r*Math.cos(startAngle)+cx,y1=r*Math.sin(startAngle)+cy,x2=r*Math.cos(endAngle)+cx,y2=r*Math.sin(endAngle)+cy,d1=(x1-x)*(x1-x)+(y1-y)*(y1-y),d2=(x2-x)*(x2-x)+(y2-y)*(y2-y);return d1&lt;d2?(out2[0]=x1,out2[1]=y1,Math.sqrt(d1)):(out2[0]=x2,out2[1]=y2,Math.sqrt(d2))}function projectPointToLine(x1,y1,x2,y2,x,y,out2,limitToEnds){var dx=x-x1,dy=y-y1,dx1=x2-x1,dy1=y2-y1,lineLen=Math.sqrt(dx1*dx1+dy1*dy1),t=(dx*(dx1/=lineLen)+dy*(dy1/=lineLen))/lineLen;limitToEnds&amp;&amp;(t=Math.min(Math.max(t,0),1)),t*=lineLen;var ox=out2[0]=x1+t*dx1,oy=out2[1]=y1+t*dy1;return Math.sqrt((ox-x)*(ox-x)+(oy-y)*(oy-y))}function projectPointToRect(x1,y1,width,height,x,y,out2){width&lt;0&amp;&amp;(x1+=width,width=-width),height&lt;0&amp;&amp;(y1+=height,height=-height);var x2=x1+width,y2=y1+height,ox=out2[0]=Math.min(Math.max(x,x1),x2),oy=out2[1]=Math.min(Math.max(y,y1),y2);return Math.sqrt((ox-x)*(ox-x)+(oy-y)*(oy-y))}var tmpPt=[];function nearestPointOnRect(pt,rect,out2){var dist2=projectPointToRect(rect.x,rect.y,rect.width,rect.height,pt.x,pt.y,tmpPt);return out2.set(tmpPt[0],tmpPt[1]),dist2}function nearestPointOnPath(pt,path,out2){for(var x1,y1,xi=0,yi=0,x0=0,y0=0,minDist=1/0,data=path.data,x=pt.x,y=pt.y,i=0;i&lt;data.length;){var cmd=data[i++];1===i&amp;&amp;(x0=xi=data[i],y0=yi=data[i+1]);var d=minDist;switch(cmd){case CMD$1.M:xi=x0=data[i++],yi=y0=data[i++];break;case CMD$1.L:d=projectPointToLine(xi,yi,data[i],data[i+1],x,y,tmpPt,!0),xi=data[i++],yi=data[i++];break;case CMD$1.C:d=cubicProjectPoint(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y,tmpPt),xi=data[i++],yi=data[i++];break;case CMD$1.Q:d=quadraticProjectPoint(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y,tmpPt),xi=data[i++],yi=data[i++];break;case CMD$1.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],theta=data[i++],dTheta=data[i++];i+=1;var anticlockwise=!!(1-data[i++]);x1=Math.cos(theta)*rx+cx,y1=Math.sin(theta)*ry+cy,i&lt;=1&amp;&amp;(x0=x1,y0=y1),d=projectPointToArc(cx,cy,ry,theta,theta+dTheta,anticlockwise,(x-cx)*ry/rx+cx,y,tmpPt),xi=Math.cos(theta+dTheta)*rx+cx,yi=Math.sin(theta+dTheta)*ry+cy;break;case CMD$1.R:d=projectPointToRect(x0=xi=data[i++],y0=yi=data[i++],data[i++],data[i++],x,y,tmpPt);break;case CMD$1.Z:d=projectPointToLine(xi,yi,x0,y0,x,y,tmpPt,!0),xi=x0,yi=y0}d&lt;minDist&amp;&amp;(minDist=d,out2.set(tmpPt[0],tmpPt[1]))}return minDist}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(target,labelLineModel){if(target){var labelLine=target.getTextGuideLine(),label=target.getTextContent();if(label&amp;&amp;labelLine){var labelGuideConfig=target.textGuideLineConfig||{},points2=[[0,0],[0,0],[0,0]],searchSpace=labelGuideConfig.candidates||DEFAULT_SEARCH_SPACE,labelRect=label.getBoundingRect().clone();labelRect.applyTransform(label.getComputedTransform());var minDist=1/0,anchorPoint=labelGuideConfig.anchor,targetTransform=target.getComputedTransform(),targetInversedTransform=targetTransform&amp;&amp;invert([],targetTransform),len2=labelLineModel.get("length2")||0;anchorPoint&amp;&amp;pt2.copy(anchorPoint);for(var i=0;i&lt;searchSpace.length;i++){getCandidateAnchor(searchSpace[i],0,labelRect,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,len2),pt1.transform(targetInversedTransform);var boundingRect=target.getBoundingRect(),dist2=anchorPoint?anchorPoint.distance(pt1):target instanceof Path?nearestPointOnPath(pt1,target.path,pt2):nearestPointOnRect(pt1,boundingRect,pt2);dist2&lt;minDist&amp;&amp;(minDist=dist2,pt1.transform(targetTransform),pt2.transform(targetTransform),pt2.toArray(points2[0]),pt1.toArray(points2[1]),pt0.toArray(points2[2]))}limitTurnAngle(points2,labelLineModel.get("minTurnAngle")),labelLine.setShape({points:points2})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(linePoints,minTurnAngle){if(minTurnAngle&lt;=180&amp;&amp;minTurnAngle&gt;0){minTurnAngle=minTurnAngle/180*Math.PI,pt0.fromArray(linePoints[0]),pt1.fromArray(linePoints[1]),pt2.fromArray(linePoints[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var len1=dir.len(),len2=dir2.len();if(!(len1&lt;.001||len2&lt;.001)){dir.scale(1/len1),dir2.scale(1/len2);var angleCos=dir.dot(dir2);if(Math.cos(minTurnAngle)&lt;angleCos){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI-minTurnAngle));var t=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(t))return;t&lt;0?Point.copy(tmpProjPoint,pt1):t&gt;1&amp;&amp;Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(linePoints[1])}}}}function limitSurfaceAngle(linePoints,surfaceNormal,maxSurfaceAngle){if(maxSurfaceAngle&lt;=180&amp;&amp;maxSurfaceAngle&gt;0){maxSurfaceAngle=maxSurfaceAngle/180*Math.PI,pt0.fromArray(linePoints[0]),pt1.fromArray(linePoints[1]),pt2.fromArray(linePoints[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var len1=dir.len(),len2=dir2.len();if(!(len1&lt;.001||len2&lt;.001))if(dir.scale(1/len1),dir2.scale(1/len2),dir.dot(surfaceNormal)&lt;Math.cos(maxSurfaceAngle)){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var HALF_PI=Math.PI/2,newAngle=HALF_PI+Math.acos(dir2.dot(surfaceNormal))-maxSurfaceAngle;if(newAngle&gt;=HALF_PI)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI/2-newAngle));var t=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(t))return;t&lt;0?Point.copy(tmpProjPoint,pt1):t&gt;1&amp;&amp;Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(linePoints[1])}}}function setLabelLineState(labelLine,ignore,stateName,stateModel){var isNormal="normal"===stateName,stateObj=isNormal?labelLine:labelLine.ensureState(stateName);stateObj.ignore=ignore;var smooth=stateModel.get("smooth");smooth&amp;&amp;!0===smooth&amp;&amp;(smooth=.3),stateObj.shape=stateObj.shape||{},smooth&gt;0&amp;&amp;(stateObj.shape.smooth=smooth);var styleObj=stateModel.getModel("lineStyle").getLineStyle();isNormal?labelLine.useStyle(styleObj):stateObj.style=styleObj}function buildLabelLinePath(path,shape){var smooth=shape.smooth,points2=shape.points;if(points2)if(path.moveTo(points2[0][0],points2[0][1]),smooth&gt;0&amp;&amp;points2.length&gt;=3){var len1=dist$1(points2[0],points2[1]),len2=dist$1(points2[1],points2[2]);if(!len1||!len2)return path.lineTo(points2[1][0],points2[1][1]),void path.lineTo(points2[2][0],points2[2][1]);var moveLen=Math.min(len1,len2)*smooth,midPoint0=lerp$1([],points2[1],points2[0],moveLen/len1),midPoint2=lerp$1([],points2[1],points2[2],moveLen/len2),midPoint1=lerp$1([],midPoint0,midPoint2,.5);path.bezierCurveTo(midPoint0[0],midPoint0[1],midPoint0[0],midPoint0[1],midPoint1[0],midPoint1[1]),path.bezierCurveTo(midPoint2[0],midPoint2[1],midPoint2[0],midPoint2[1],points2[2][0],points2[2][1])}else for(var i=1;i&lt;points2.length;i++)path.lineTo(points2[i][0],points2[i][1])}function setLabelLineStyle(targetEl,statesModels,defaultStyle){var labelLine=targetEl.getTextGuideLine(),label=targetEl.getTextContent();if(label){for(var normalModel=statesModels.normal,showNormal=normalModel.get("show"),labelIgnoreNormal=label.ignore,i=0;i&lt;DISPLAY_STATES.length;i++){var stateName=DISPLAY_STATES[i],stateModel=statesModels[stateName],isNormal="normal"===stateName;if(stateModel){var stateShow=stateModel.get("show");if((isNormal?labelIgnoreNormal:retrieve2(label.states[stateName]&amp;&amp;label.states[stateName].ignore,labelIgnoreNormal))||!retrieve2(stateShow,showNormal)){var stateObj=isNormal?labelLine:labelLine&amp;&amp;labelLine.states[stateName];stateObj&amp;&amp;(stateObj.ignore=!0),labelLine&amp;&amp;setLabelLineState(labelLine,!0,stateName,stateModel);continue}labelLine||(labelLine=new Polyline$1,targetEl.setTextGuideLine(labelLine),isNormal||!labelIgnoreNormal&amp;&amp;showNormal||setLabelLineState(labelLine,!0,"normal",statesModels.normal),targetEl.stateProxy&amp;&amp;(labelLine.stateProxy=targetEl.stateProxy)),setLabelLineState(labelLine,!1,stateName,stateModel)}}if(labelLine){defaults(labelLine.style,defaultStyle),labelLine.style.fill=null;var showAbove=normalModel.get("showAbove");(targetEl.textGuideLineConfig=targetEl.textGuideLineConfig||{}).showAbove=showAbove||!1,labelLine.buildPath=buildLabelLinePath}}else labelLine&amp;&amp;targetEl.removeTextGuideLine()}function getLabelLineStatesModels(itemModel,labelLineName){labelLineName=labelLineName||"labelLine";for(var statesModels={normal:itemModel.getModel(labelLineName)},i=0;i&lt;SPECIAL_STATES.length;i++){var stateName=SPECIAL_STATES[i];statesModels[stateName]=itemModel.getModel([stateName,labelLineName])}return statesModels}function prepareLayoutList(input){for(var list=[],i=0;i&lt;input.length;i++){var rawItem=input[i];if(!rawItem.defaultAttr.ignore){var label=rawItem.label,transform2=label.getComputedTransform(),localRect=label.getBoundingRect(),isAxisAligned=!transform2||transform2[1]&lt;1e-5&amp;&amp;transform2[2]&lt;1e-5,minMargin=label.style.margin||0,globalRect=localRect.clone();globalRect.applyTransform(transform2),globalRect.x-=minMargin/2,globalRect.y-=minMargin/2,globalRect.width+=minMargin,globalRect.height+=minMargin;var obb=isAxisAligned?new OrientedBoundingRect(localRect,transform2):null;list.push({label:label,labelLine:rawItem.labelLine,rect:globalRect,localRect:localRect,obb:obb,priority:rawItem.priority,defaultAttr:rawItem.defaultAttr,layoutOption:rawItem.computedLayoutOption,axisAligned:isAxisAligned,transform:transform2})}}return list}function shiftLayout(list,xyDim,sizeDim,minBound,maxBound,balanceShift){var len2=list.length;if(!(len2&lt;2)){list.sort(function(a,b){return a.rect[xyDim]-b.rect[xyDim]});for(var delta,lastPos=0,adjusted=!1,i=0;i&lt;len2;i++){var item=list[i],rect=item.rect;(delta=rect[xyDim]-lastPos)&lt;0&amp;&amp;(rect[xyDim]-=delta,item.label[xyDim]-=delta,adjusted=!0),lastPos=rect[xyDim]+rect[sizeDim]}var minGap,maxGap,first=list[0],last=list[len2-1];return updateMinMaxGap(),minGap&lt;0&amp;&amp;squeezeGaps(-minGap,.8),maxGap&lt;0&amp;&amp;squeezeGaps(maxGap,.8),updateMinMaxGap(),takeBoundsGap(minGap,maxGap,1),takeBoundsGap(maxGap,minGap,-1),updateMinMaxGap(),minGap&lt;0&amp;&amp;squeezeWhenBailout(-minGap),maxGap&lt;0&amp;&amp;squeezeWhenBailout(maxGap),adjusted}function updateMinMaxGap(){minGap=first.rect[xyDim]-minBound,maxGap=maxBound-last.rect[xyDim]-last.rect[sizeDim]}function takeBoundsGap(gapThisBound,gapOtherBound,moveDir){if(gapThisBound&lt;0){var moveFromMaxGap=Math.min(gapOtherBound,-gapThisBound);if(moveFromMaxGap&gt;0){shiftList(moveFromMaxGap*moveDir,0,len2);var remained=moveFromMaxGap+gapThisBound;remained&lt;0&amp;&amp;squeezeGaps(-remained*moveDir,1)}else squeezeGaps(-gapThisBound*moveDir,1)}}function shiftList(delta2,start2,end2){0!==delta2&amp;&amp;(adjusted=!0);for(var i2=start2;i2&lt;end2;i2++){var item2=list[i2];item2.rect[xyDim]+=delta2,item2.label[xyDim]+=delta2}}function squeezeGaps(delta2,maxSqeezePercent){for(var gaps=[],totalGaps=0,i2=1;i2&lt;len2;i2++){var prevItemRect=list[i2-1].rect,gap=Math.max(list[i2].rect[xyDim]-prevItemRect[xyDim]-prevItemRect[sizeDim],0);gaps.push(gap),totalGaps+=gap}if(totalGaps){var squeezePercent=Math.min(Math.abs(delta2)/totalGaps,maxSqeezePercent);if(delta2&gt;0)for(i2=0;i2&lt;len2-1;i2++){shiftList(gaps[i2]*squeezePercent,0,i2+1)}else for(i2=len2-1;i2&gt;0;i2--){shiftList(-(gaps[i2-1]*squeezePercent),i2,len2)}}}function squeezeWhenBailout(delta2){var dir3=delta2&lt;0?-1:1;delta2=Math.abs(delta2);for(var moveForEachLabel=Math.ceil(delta2/(len2-1)),i2=0;i2&lt;len2-1;i2++)if(dir3&gt;0?shiftList(moveForEachLabel,0,i2+1):shiftList(-moveForEachLabel,len2-i2-1,len2),(delta2-=moveForEachLabel)&lt;=0)return}}function shiftLayoutOnY(list,topBound,bottomBound,balanceShift){return shiftLayout(list,"y","height",topBound,bottomBound)}function hideOverlap(labelList){var displayedLabels=[];labelList.sort(function(a,b){return b.priority-a.priority});var globalRect=new BoundingRect(0,0,0,0);function hideEl(el){if(!el.ignore){var emphasisState=el.ensureState("emphasis");null==emphasisState.ignore&amp;&amp;(emphasisState.ignore=!1)}el.ignore=!0}for(var i=0;i&lt;labelList.length;i++){var labelItem=labelList[i],isAxisAligned=labelItem.axisAligned,localRect=labelItem.localRect,transform2=labelItem.transform,label=labelItem.label,labelLine=labelItem.labelLine;globalRect.copy(labelItem.rect),globalRect.width-=.1,globalRect.height-=.1,globalRect.x+=.05,globalRect.y+=.05;for(var obb=labelItem.obb,overlapped=!1,j=0;j&lt;displayedLabels.length;j++){var existsTextCfg=displayedLabels[j];if(globalRect.intersect(existsTextCfg.rect)){if(isAxisAligned&amp;&amp;existsTextCfg.axisAligned){overlapped=!0;break}if(existsTextCfg.obb||(existsTextCfg.obb=new OrientedBoundingRect(existsTextCfg.localRect,existsTextCfg.transform)),obb||(obb=new OrientedBoundingRect(localRect,transform2)),obb.intersect(existsTextCfg.obb)){overlapped=!0;break}}}overlapped?(hideEl(label),labelLine&amp;&amp;hideEl(labelLine)):(label.attr("ignore",labelItem.defaultAttr.ignore),labelLine&amp;&amp;labelLine.attr("ignore",labelItem.defaultAttr.labelGuideIgnore),displayedLabels.push(labelItem))}}function cloneArr(points2){if(points2){for(var newPoints=[],i=0;i&lt;points2.length;i++)newPoints.push(points2[i].slice());return newPoints}}function prepareLayoutCallbackParams(labelItem,hostEl){var label=labelItem.label,labelLine=hostEl&amp;&amp;hostEl.getTextGuideLine();return{dataIndex:labelItem.dataIndex,dataType:labelItem.dataType,seriesIndex:labelItem.seriesModel.seriesIndex,text:labelItem.label.style.text,rect:labelItem.hostRect,labelRect:labelItem.rect,align:label.style.align,verticalAlign:label.style.verticalAlign,labelLinePoints:cloneArr(labelLine&amp;&amp;labelLine.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(target,source,keys2){for(var i=0;i&lt;keys2.length;i++){var key=keys2[i];null!=source[key]&amp;&amp;(target[key]=source[key])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function LabelManager2(){this._labelList=[],this._chartViewList=[]}return LabelManager2.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},LabelManager2.prototype._addLabel=function(dataIndex,dataType,seriesModel,label,layoutOption){var labelStyle=label.style,textConfig=label.__hostTarget.textConfig||{},labelTransform=label.getComputedTransform(),labelRect=label.getBoundingRect().plain();BoundingRect.applyTransform(labelRect,labelRect,labelTransform),labelTransform?dummyTransformable.setLocalTransform(labelTransform):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var hostRect,host=label.__hostTarget;if(host){hostRect=host.getBoundingRect().plain();var transform2=host.getComputedTransform();BoundingRect.applyTransform(hostRect,hostRect,transform2)}var labelGuide=hostRect&amp;&amp;host.getTextGuideLine();this._labelList.push({label:label,labelLine:labelGuide,seriesModel:seriesModel,dataIndex:dataIndex,dataType:dataType,layoutOption:layoutOption,computedLayoutOption:null,rect:labelRect,hostRect:hostRect,priority:hostRect?hostRect.width*hostRect.height:0,defaultAttr:{ignore:label.ignore,labelGuideIgnore:labelGuide&amp;&amp;labelGuide.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:labelStyle.x,y:labelStyle.y,align:labelStyle.align,verticalAlign:labelStyle.verticalAlign,width:labelStyle.width,height:labelStyle.height,fontSize:labelStyle.fontSize},cursor:label.cursor,attachedPos:textConfig.position,attachedRot:textConfig.rotation}})},LabelManager2.prototype.addLabelsOfSeries=function(chartView){var _this=this;this._chartViewList.push(chartView);var seriesModel=chartView.__model,layoutOption=seriesModel.get("labelLayout");(isFunction(layoutOption)||keys(layoutOption).length)&amp;&amp;chartView.group.traverse(function(child){if(child.ignore)return!0;var textEl=child.getTextContent(),ecData=getECData(child);textEl&amp;&amp;!textEl.disableLabelLayout&amp;&amp;_this._addLabel(ecData.dataIndex,ecData.dataType,seriesModel,textEl,layoutOption)})},LabelManager2.prototype.updateLayoutConfig=function(api){var width=api.getWidth(),height=api.getHeight();function createDragHandler(el,labelLineModel){return function(){updateLabelLinePoints(el,labelLineModel)}}for(var i=0;i&lt;this._labelList.length;i++){var labelItem=this._labelList[i],label=labelItem.label,hostEl=label.__hostTarget,defaultLabelAttr=labelItem.defaultAttr,layoutOption=void 0;layoutOption=(layoutOption=isFunction(labelItem.layoutOption)?labelItem.layoutOption(prepareLayoutCallbackParams(labelItem,hostEl)):labelItem.layoutOption)||{},labelItem.computedLayoutOption=layoutOption;var degreeToRadian=Math.PI/180;hostEl&amp;&amp;hostEl.setTextConfig({local:!1,position:null!=layoutOption.x||null!=layoutOption.y?null:defaultLabelAttr.attachedPos,rotation:null!=layoutOption.rotate?layoutOption.rotate*degreeToRadian:defaultLabelAttr.attachedRot,offset:[layoutOption.dx||0,layoutOption.dy||0]});var needsUpdateLabelLine=!1;if(null!=layoutOption.x?(label.x=parsePercent(layoutOption.x,width),label.setStyle("x",0),needsUpdateLabelLine=!0):(label.x=defaultLabelAttr.x,label.setStyle("x",defaultLabelAttr.style.x)),null!=layoutOption.y?(label.y=parsePercent(layoutOption.y,height),label.setStyle("y",0),needsUpdateLabelLine=!0):(label.y=defaultLabelAttr.y,label.setStyle("y",defaultLabelAttr.style.y)),layoutOption.labelLinePoints){var guideLine=hostEl.getTextGuideLine();guideLine&amp;&amp;(guideLine.setShape({points:layoutOption.labelLinePoints}),needsUpdateLabelLine=!1)}labelLayoutInnerStore(label).needsUpdateLabelLine=needsUpdateLabelLine,label.rotation=null!=layoutOption.rotate?layoutOption.rotate*degreeToRadian:defaultLabelAttr.rotation,label.scaleX=defaultLabelAttr.scaleX,label.scaleY=defaultLabelAttr.scaleY;for(var k=0;k&lt;LABEL_OPTION_TO_STYLE_KEYS.length;k++){var key=LABEL_OPTION_TO_STYLE_KEYS[k];label.setStyle(key,null!=layoutOption[key]?layoutOption[key]:defaultLabelAttr.style[key])}if(layoutOption.draggable){if(label.draggable=!0,label.cursor="move",hostEl){var hostModel=labelItem.seriesModel;if(null!=labelItem.dataIndex)hostModel=labelItem.seriesModel.getData(labelItem.dataType).getItemModel(labelItem.dataIndex);label.on("drag",createDragHandler(hostEl,hostModel.getModel("labelLine")))}}else label.off("drag"),label.cursor=defaultLabelAttr.cursor}},LabelManager2.prototype.layout=function(api){var width=api.getWidth(),height=api.getHeight(),labelList=prepareLayoutList(this._labelList),labelsNeedsAdjustOnX=filter(labelList,function(item){return"shiftX"===item.layoutOption.moveOverlap}),labelsNeedsAdjustOnY=filter(labelList,function(item){return"shiftY"===item.layoutOption.moveOverlap});!function shiftLayoutOnX(list,leftBound,rightBound,balanceShift){return shiftLayout(list,"x","width",leftBound,rightBound)}(labelsNeedsAdjustOnX,0,width),shiftLayoutOnY(labelsNeedsAdjustOnY,0,height),hideOverlap(filter(labelList,function(item){return item.layoutOption.hideOverlap}))},LabelManager2.prototype.processLabelsOverall=function(){var _this=this;each$f(this._chartViewList,function(chartView){var seriesModel=chartView.__model,ignoreLabelLineUpdate=chartView.ignoreLabelLineUpdate,animationEnabled=seriesModel.isAnimationEnabled();chartView.group.traverse(function(child){if(child.ignore&amp;&amp;!child.forceLabelAnimation)return!0;var needsUpdateLabelLine=!ignoreLabelLineUpdate,label=child.getTextContent();!needsUpdateLabelLine&amp;&amp;label&amp;&amp;(needsUpdateLabelLine=labelLayoutInnerStore(label).needsUpdateLabelLine),needsUpdateLabelLine&amp;&amp;_this._updateLabelLine(child,seriesModel),animationEnabled&amp;&amp;_this._animateLabels(child,seriesModel)})})},LabelManager2.prototype._updateLabelLine=function(el,seriesModel){var textEl=el.getTextContent(),ecData=getECData(el),dataIndex=ecData.dataIndex;if(textEl&amp;&amp;null!=dataIndex){var data=seriesModel.getData(ecData.dataType),itemModel=data.getItemModel(dataIndex),defaultStyle={},visualStyle=data.getItemVisual(dataIndex,"style");if(visualStyle){var visualType=data.getVisual("drawType");defaultStyle.stroke=visualStyle[visualType]}var labelLineModel=itemModel.getModel("labelLine");setLabelLineStyle(el,getLabelLineStatesModels(itemModel),defaultStyle),updateLabelLinePoints(el,labelLineModel)}},LabelManager2.prototype._animateLabels=function(el,seriesModel){var textEl=el.getTextContent(),guideLine=el.getTextGuideLine();if(textEl&amp;&amp;(el.forceLabelAnimation||!textEl.ignore&amp;&amp;!textEl.invisible&amp;&amp;!el.disableLabelAnimation&amp;&amp;!isElementRemoved(el))){var oldLayout=(layoutStore=labelLayoutInnerStore(textEl)).oldLayout,ecData=getECData(el),dataIndex=ecData.dataIndex,newProps={x:textEl.x,y:textEl.y,rotation:textEl.rotation},data=seriesModel.getData(ecData.dataType);if(oldLayout){textEl.attr(oldLayout);var prevStates=el.prevStates;prevStates&amp;&amp;(indexOf(prevStates,"select")&gt;=0&amp;&amp;textEl.attr(layoutStore.oldLayoutSelect),indexOf(prevStates,"emphasis")&gt;=0&amp;&amp;textEl.attr(layoutStore.oldLayoutEmphasis)),updateProps$1(textEl,newProps,seriesModel,dataIndex)}else if(textEl.attr(newProps),!labelInner(textEl).valueAnimation){var oldOpacity=retrieve2(textEl.style.opacity,1);textEl.style.opacity=0,initProps(textEl,{style:{opacity:oldOpacity}},seriesModel,dataIndex)}if(layoutStore.oldLayout=newProps,textEl.states.select){var layoutSelect=layoutStore.oldLayoutSelect={};extendWithKeys(layoutSelect,newProps,LABEL_LAYOUT_PROPS),extendWithKeys(layoutSelect,textEl.states.select,LABEL_LAYOUT_PROPS)}if(textEl.states.emphasis){var layoutEmphasis=layoutStore.oldLayoutEmphasis={};extendWithKeys(layoutEmphasis,newProps,LABEL_LAYOUT_PROPS),extendWithKeys(layoutEmphasis,textEl.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(textEl,dataIndex,data,seriesModel,seriesModel)}if(guideLine&amp;&amp;!guideLine.ignore&amp;&amp;!guideLine.invisible){oldLayout=(layoutStore=labelLineAnimationStore(guideLine)).oldLayout;var layoutStore,newLayout={points:guideLine.shape.points};oldLayout?(guideLine.attr({shape:oldLayout}),updateProps$1(guideLine,{shape:newLayout},seriesModel)):(guideLine.setShape(newLayout),guideLine.style.strokePercent=0,initProps(guideLine,{style:{strokePercent:1}},seriesModel)),layoutStore.oldLayout=newLayout}},LabelManager2}(),getLabelManager=makeInner();function installLabelLayout(registers){registers.registerUpdateLifecycle("series:beforeupdate",function(ecModel,api,params){var labelManager=getLabelManager(api).labelManager;labelManager||(labelManager=getLabelManager(api).labelManager=new LabelManager),labelManager.clearLabels()}),registers.registerUpdateLifecycle("series:layoutlabels",function(ecModel,api,params){var labelManager=getLabelManager(api).labelManager;params.updatedSeries.forEach(function(series){labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series))}),labelManager.updateLayoutConfig(api),labelManager.layout(api),labelManager.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=2*Math.PI,degree=180/PI$4,SVGPathRebuilder=function(){function SVGPathRebuilder2(){}return SVGPathRebuilder2.prototype.reset=function(precision){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,precision||4)},SVGPathRebuilder2.prototype.moveTo=function(x,y){this._add("M",x,y)},SVGPathRebuilder2.prototype.lineTo=function(x,y){this._add("L",x,y)},SVGPathRebuilder2.prototype.bezierCurveTo=function(x,y,x2,y2,x3,y3){this._add("C",x,y,x2,y2,x3,y3)},SVGPathRebuilder2.prototype.quadraticCurveTo=function(x,y,x2,y2){this._add("Q",x,y,x2,y2)},SVGPathRebuilder2.prototype.arc=function(cx,cy,r,startAngle,endAngle,anticlockwise){this.ellipse(cx,cy,r,r,0,startAngle,endAngle,anticlockwise)},SVGPathRebuilder2.prototype.ellipse=function(cx,cy,rx,ry,psi,startAngle,endAngle,anticlockwise){var dTheta=endAngle-startAngle,clockwise=!anticlockwise,dThetaPositive=Math.abs(dTheta),isCircle=isAroundZero(dThetaPositive-PI2$1)||(clockwise?dTheta&gt;=PI2$1:-dTheta&gt;=PI2$1),unifiedTheta=dTheta&gt;0?dTheta%PI2$1:dTheta%PI2$1+PI2$1,large=!1;large=!!isCircle||!isAroundZero(dThetaPositive)&amp;&amp;unifiedTheta&gt;=PI$4==!!clockwise;var x0=cx+rx*mathCos(startAngle),y0=cy+ry*mathSin(startAngle);this._start&amp;&amp;this._add("M",x0,y0);var xRot=Math.round(psi*degree);if(isCircle){var p=1/this._p,dTheta_1=(clockwise?1:-1)*(PI2$1-p);this._add("A",rx,ry,xRot,1,+clockwise,cx+rx*mathCos(startAngle+dTheta_1),cy+ry*mathSin(startAngle+dTheta_1)),p&gt;.01&amp;&amp;this._add("A",rx,ry,xRot,0,+clockwise,x0,y0)}else{var x=cx+rx*mathCos(endAngle),y=cy+ry*mathSin(endAngle);this._add("A",rx,ry,xRot,+large,+clockwise,x,y)}},SVGPathRebuilder2.prototype.rect=function(x,y,w,h){this._add("M",x,y),this._add("l",w,0),this._add("l",0,h),this._add("l",-w,0),this._add("Z")},SVGPathRebuilder2.prototype.closePath=function(){this._d.length&gt;0&amp;&amp;this._add("Z")},SVGPathRebuilder2.prototype._add=function(cmd,a,b,c,d,e2,f,g,h){for(var vals=[],p=this._p,i=1;i&lt;arguments.length;i++){var val=arguments[i];if(isNaN(val))return void(this._invalid=!0);vals.push(Math.round(val*p)/p)}this._d.push(cmd+vals.join(" ")),this._start="Z"===cmd},SVGPathRebuilder2.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},SVGPathRebuilder2.prototype.getStr=function(){return this._str},SVGPathRebuilder2}(),mathRound=Math.round;var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(prop){return"stroke-"+prop.toLowerCase()});var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink";function createElement(name){return document.createElementNS(SVGNS,name)}function createVNode(tag,key,attrs,children,text){return{tag:tag,attrs:attrs||{},children:children,text:text,key:key}}function vNodeToString(el,opts){var S=(opts=opts||{}).newline?"\n":"";return function convertElToString(el2){var children=el2.children,tag=el2.tag,attrs=el2.attrs,text=el2.text;return function createElementOpen(name,attrs){var attrsStr=[];if(attrs)for(var key in attrs){var val=attrs[key],part=key;!1!==val&amp;&amp;(!0!==val&amp;&amp;null!=val&amp;&amp;(part+='="'+val+'"'),attrsStr.push(part))}return"&lt;"+name+" "+attrsStr.join(" ")+"&gt;"}(tag,attrs)+("style"!==tag?encodeHTML(text):text||"")+(children?""+S+map$1(children,function(child){return convertElToString(child)}).join(S)+S:"")+function createElementClose(name){return"&lt;/"+name+"&gt;"}(tag)}(el)}function createBrushScope(zrId){return{zrId:zrId,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(width,height,children,useViewBox){return createVNode("svg","root",{width:width,height:height,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:!!useViewBox&amp;&amp;"0 0 "+width+" "+height},children)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"};function buildPathString(el,kfShape,path){var shape=extend({},el.shape);extend(shape,kfShape),el.buildPath(path,shape);var svgPathBuilder=new SVGPathRebuilder;return svgPathBuilder.reset(getPathPrecision(el)),path.rebuildPath(svgPathBuilder,1),svgPathBuilder.generateStr(),svgPathBuilder.getStr()}function setTransformOrigin(target,transform2){var originX=transform2.originX,originY=transform2.originY;(originX||originY)&amp;&amp;(target["transform-origin"]=originX+"px "+originY+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(cssAnim,scope){var animationName=scope.zrId+"-ani-"+scope.cssAnimIdx++;return scope.cssAnims[animationName]=cssAnim,animationName}function getEasingFunc(easing){return isString(easing)?EASING_MAP[easing]?"cubic-bezier("+EASING_MAP[easing]+")":createCubicEasingFunc(easing)?easing:"":""}function createCSSAnimation(el,attrs,scope,onlyShape){var animators=el.animators,len2=animators.length,cssAnimations=[];if(el instanceof CompoundPath){var animationCfg=function createCompoundPathCSSAnimation(el,attrs,scope){var cssAnimationCfg,cssAnimationName,paths=el.shape.paths,composedAnim={};if(each$f(paths,function(path){var subScope=createBrushScope(scope.zrId);subScope.animation=!0,createCSSAnimation(path,{},subScope,!0);var cssAnims=subScope.cssAnims,cssNodes=subScope.cssNodes,animNames=keys(cssAnims),len2=animNames.length;if(len2){var lastAnim=cssAnims[cssAnimationName=animNames[len2-1]];for(var percent in lastAnim){var kf=lastAnim[percent];composedAnim[percent]=composedAnim[percent]||{d:""},composedAnim[percent].d+=kf.d||""}for(var className in cssNodes){var val=cssNodes[className].animation;val.indexOf(cssAnimationName)&gt;=0&amp;&amp;(cssAnimationCfg=val)}}}),cssAnimationCfg){attrs.d=!1;var animationName=addAnimation(composedAnim,scope);return cssAnimationCfg.replace(cssAnimationName,animationName)}}(el,attrs,scope);if(animationCfg)cssAnimations.push(animationCfg);else if(!len2)return}else if(!len2)return;for(var groupAnimators={},i=0;i&lt;len2;i++){var animator=animators[i],cfgArr=[animator.getMaxTime()/1e3+"s"],easing=getEasingFunc(animator.getClip().easing),delay=animator.getDelay();easing?cfgArr.push(easing):cfgArr.push("linear"),delay&amp;&amp;cfgArr.push(delay/1e3+"s"),animator.getLoop()&amp;&amp;cfgArr.push("infinite");var cfg=cfgArr.join(" ");groupAnimators[cfg]=groupAnimators[cfg]||[cfg,[]],groupAnimators[cfg][1].push(animator)}function createSingleCSSAnimation(groupAnimator){var path,animators2=groupAnimator[1],len3=animators2.length,transformKfs={},shapeKfs={},finalKfs={};function saveAnimatorTrackToCssKfs(animator3,cssKfs,toCssAttrName){for(var tracks=animator3.getTracks(),maxTime=animator3.getMaxTime(),k=0;k&lt;tracks.length;k++){var track=tracks[k];if(track.needsAnimate()){var kfs=track.keyframes,attrName=track.propName;if(toCssAttrName&amp;&amp;(attrName=toCssAttrName(attrName)),attrName)for(var i3=0;i3&lt;kfs.length;i3++){var kf=kfs[i3],percent2=Math.round(kf.time/maxTime*100)+"%",kfEasing=getEasingFunc(kf.easing),rawValue=kf.rawValue;(isString(rawValue)||isNumber(rawValue))&amp;&amp;(cssKfs[percent2]=cssKfs[percent2]||{},cssKfs[percent2][attrName]=kf.rawValue,kfEasing&amp;&amp;(cssKfs[percent2]["animation-timing-function"]=kfEasing))}}}}for(var i2=0;i2&lt;len3;i2++){(targetProp=(animator2=animators2[i2]).targetName)?"shape"===targetProp&amp;&amp;saveAnimatorTrackToCssKfs(animator2,shapeKfs):!onlyShape&amp;&amp;saveAnimatorTrackToCssKfs(animator2,transformKfs)}for(var percent in transformKfs){var transform2={};copyTransform(transform2,el),extend(transform2,transformKfs[percent]);var str=getSRTTransformString(transform2),timingFunction=transformKfs[percent]["animation-timing-function"];finalKfs[percent]=str?{transform:str}:{},setTransformOrigin(finalKfs[percent],transform2),timingFunction&amp;&amp;(finalKfs[percent]["animation-timing-function"]=timingFunction)}var canAnimateShape=!0;for(var percent in shapeKfs){finalKfs[percent]=finalKfs[percent]||{};var isFirst=!path;timingFunction=shapeKfs[percent]["animation-timing-function"];isFirst&amp;&amp;(path=new PathProxy);var len_1=path.len();path.reset(),finalKfs[percent].d=buildPathString(el,shapeKfs[percent],path);var newLen=path.len();if(!isFirst&amp;&amp;len_1!==newLen){canAnimateShape=!1;break}timingFunction&amp;&amp;(finalKfs[percent]["animation-timing-function"]=timingFunction)}if(!canAnimateShape)for(var percent in finalKfs)delete finalKfs[percent].d;if(!onlyShape)for(i2=0;i2&lt;len3;i2++){var animator2,targetProp;"style"===(targetProp=(animator2=animators2[i2]).targetName)&amp;&amp;saveAnimatorTrackToCssKfs(animator2,finalKfs,function(propName){return ANIMATE_STYLE_MAP[propName]})}var transformOrigin,percents=keys(finalKfs),allTransformOriginSame=!0;for(i2=1;i2&lt;percents.length;i2++){var p0=percents[i2-1],p1=percents[i2];if(finalKfs[p0]["transform-origin"]!==finalKfs[p1]["transform-origin"]){allTransformOriginSame=!1;break}transformOrigin=finalKfs[p0]["transform-origin"]}if(allTransformOriginSame&amp;&amp;transformOrigin){for(var percent in finalKfs)finalKfs[percent]["transform-origin"]&amp;&amp;delete finalKfs[percent]["transform-origin"];attrs["transform-origin"]=transformOrigin}if(filter(percents,function(percent2){return keys(finalKfs[percent2]).length&gt;0}).length)return addAnimation(finalKfs,scope)+" "+groupAnimator[0]+" both"}for(var key in groupAnimators){(animationCfg=createSingleCSSAnimation(groupAnimators[key]))&amp;&amp;cssAnimations.push(animationCfg)}if(cssAnimations.length){var className=scope.zrId+"-cls-"+getClassId();scope.cssNodes["."+className]={animation:cssAnimations.join(",")},attrs.class=className}}function setClassAttribute(style,attrs,scope,withHover){var styleKey=JSON.stringify(style),className=scope.cssStyleCache[styleKey];className||(className=scope.zrId+"-cls-"+getClassId(),scope.cssStyleCache[styleKey]=className,scope.cssNodes["."+className+":hover"]=style),attrs.class=attrs.class?attrs.class+" "+className:className}var round$1=Math.round;function isImageLike(val){return val&amp;&amp;isString(val.src)}function isCanvasLike(val){return val&amp;&amp;isFunction(val.toDataURL)}function setStyleAttrs(attrs,style,el,scope){!function mapStyleToAttrs(updateAttr2,style,el,forceUpdate){var opacity=null==style.opacity?1:style.opacity;if(el instanceof ZRImage)updateAttr2("opacity",opacity);else{if(function pathHasFill(style){var fill=style.fill;return null!=fill&amp;&amp;"none"!==fill}(style)){var fill=normalizeColor(style.fill);updateAttr2("fill",fill.color);var fillOpacity=null!=style.fillOpacity?style.fillOpacity*fill.opacity*opacity:fill.opacity*opacity;fillOpacity&lt;1&amp;&amp;updateAttr2("fill-opacity",fillOpacity)}else updateAttr2("fill","none");if(function pathHasStroke(style){var stroke=style.stroke;return null!=stroke&amp;&amp;"none"!==stroke}(style)){var stroke=normalizeColor(style.stroke);updateAttr2("stroke",stroke.color);var strokeScale=style.strokeNoScale?el.getLineScale():1,strokeWidth=strokeScale?(style.lineWidth||0)/strokeScale:0,strokeOpacity=null!=style.strokeOpacity?style.strokeOpacity*stroke.opacity*opacity:stroke.opacity*opacity,strokeFirst=style.strokeFirst;if(1!==strokeWidth&amp;&amp;updateAttr2("stroke-width",strokeWidth),strokeFirst&amp;&amp;updateAttr2("paint-order",strokeFirst?"stroke":"fill"),strokeOpacity&lt;1&amp;&amp;updateAttr2("stroke-opacity",strokeOpacity),style.lineDash){var _a2=getLineDash(el),lineDash=_a2[0],lineDashOffset=_a2[1];lineDash&amp;&amp;(lineDashOffset=mathRound(lineDashOffset||0),updateAttr2("stroke-dasharray",lineDash.join(",")),(lineDashOffset||forceUpdate)&amp;&amp;updateAttr2("stroke-dashoffset",lineDashOffset))}for(var i=0;i&lt;strokeProps.length;i++){var propName=strokeProps[i];if(style[propName]!==DEFAULT_PATH_STYLE[propName]){var val=style[propName]||DEFAULT_PATH_STYLE[propName];val&amp;&amp;updateAttr2(svgStrokeProps[i],val)}}}}}(function(key,val){var isFillStroke="fill"===key||"stroke"===key;isFillStroke&amp;&amp;isGradient(val)?setGradient(style,attrs,key,scope):isFillStroke&amp;&amp;isPattern(val)?setPattern(el,attrs,key,scope):attrs[key]=val,isFillStroke&amp;&amp;scope.ssr&amp;&amp;"none"===val&amp;&amp;(attrs["pointer-events"]="visible")},style,el,!1),function setShadow(el,attrs,scope){var style=el.style;if(function hasShadow(style){return style&amp;&amp;(style.shadowBlur||style.shadowOffsetX||style.shadowOffsetY)}(style)){var shadowKey=function getShadowKey(displayable){var style=displayable.style,globalScale=displayable.getGlobalScale();return[style.shadowColor,(style.shadowBlur||0).toFixed(2),(style.shadowOffsetX||0).toFixed(2),(style.shadowOffsetY||0).toFixed(2),globalScale[0],globalScale[1]].join(",")}(el),shadowCache=scope.shadowCache,shadowId=shadowCache[shadowKey];if(!shadowId){var globalScale=el.getGlobalScale(),scaleX=globalScale[0],scaleY=globalScale[1];if(!scaleX||!scaleY)return;var offsetX=style.shadowOffsetX||0,offsetY=style.shadowOffsetY||0,blur_1=style.shadowBlur,_a2=normalizeColor(style.shadowColor),opacity=_a2.opacity,color2=_a2.color,stdDeviation=blur_1/2/scaleX+" "+blur_1/2/scaleY;shadowId=scope.zrId+"-s"+scope.shadowIdx++,scope.defs[shadowId]=createVNode("filter",shadowId,{id:shadowId,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:offsetX/scaleX,dy:offsetY/scaleY,stdDeviation:stdDeviation,"flood-color":color2,"flood-opacity":opacity})]),shadowCache[shadowKey]=shadowId}attrs.filter=getIdURL(shadowId)}}(el,attrs,scope)}function setMetaData(attrs,el){var metaData=getElementSSRData(el);metaData&amp;&amp;(metaData.each(function(val,key){null!=val&amp;&amp;(attrs[("ecmeta_"+key).toLowerCase()]=val+"")}),el.isSilent()&amp;&amp;(attrs.ecmeta_silent="true"))}function noRotateScale(m2){return isAroundZero(m2[0]-1)&amp;&amp;isAroundZero(m2[1])&amp;&amp;isAroundZero(m2[2])&amp;&amp;isAroundZero(m2[3]-1)}function setTransform(attrs,m2,compress){if(m2&amp;&amp;(!function noTranslate(m2){return isAroundZero(m2[4])&amp;&amp;isAroundZero(m2[5])}(m2)||!noRotateScale(m2))){attrs.transform=noRotateScale(m2)?"translate("+round$1(1e4*m2[4])/1e4+" "+round$1(1e4*m2[5])/1e4+")":function getMatrixStr(m2){return"matrix("+round3(m2[0])+","+round3(m2[1])+","+round3(m2[2])+","+round3(m2[3])+","+round4(m2[4])+","+round4(m2[5])+")"}(m2)}}function convertPolyShape(shape,attrs,mul2){for(var points2=shape.points,strArr=[],i=0;i&lt;points2.length;i++)strArr.push(round$1(points2[i][0]*mul2)/mul2),strArr.push(round$1(points2[i][1]*mul2)/mul2);attrs.points=strArr.join(" ")}function validatePolyShape(shape){return!shape.smooth}var builtinShapesDef={circle:[function createAttrsConvert(desc){var normalizedDesc=map$1(desc,function(item){return"string"==typeof item?[item,item]:item});return function(shape,attrs,mul2){for(var i=0;i&lt;normalizedDesc.length;i++){var item=normalizedDesc[i],val=shape[item[0]];null!=val&amp;&amp;(attrs[item[1]]=round$1(val*mul2)/mul2)}}}(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function brushSVGPath(el,scope){var style=el.style,shape=el.shape,builtinShpDef=builtinShapesDef[el.type],attrs={},needsAnimate=scope.animation,svgElType="path",strokePercent=el.style.strokePercent,precision=scope.compress&amp;&amp;getPathPrecision(el)||4;if(!builtinShpDef||scope.willUpdate||builtinShpDef[1]&amp;&amp;!builtinShpDef[1](shape)||needsAnimate&amp;&amp;function hasShapeAnimation(el){for(var animators=el.animators,i=0;i&lt;animators.length;i++)if("shape"===animators[i].targetName)return!0;return!1}(el)||strokePercent&lt;1){var needBuildPath=!el.path||el.shapeChanged();el.path||el.createPathProxy();var path=el.path;needBuildPath&amp;&amp;(path.beginPath(),el.buildPath(path,el.shape),el.pathUpdated());var pathVersion=path.getVersion(),elExt=el,svgPathBuilder=elExt.__svgPathBuilder;elExt.__svgPathVersion===pathVersion&amp;&amp;svgPathBuilder&amp;&amp;strokePercent===elExt.__svgPathStrokePercent||(svgPathBuilder||(svgPathBuilder=elExt.__svgPathBuilder=new SVGPathRebuilder),svgPathBuilder.reset(precision),path.rebuildPath(svgPathBuilder,strokePercent),svgPathBuilder.generateStr(),elExt.__svgPathVersion=pathVersion,elExt.__svgPathStrokePercent=strokePercent),attrs.d=svgPathBuilder.getStr()}else{svgElType=el.type;var mul2=Math.pow(10,precision);builtinShpDef[0](shape,attrs,mul2)}return setTransform(attrs,el.transform),setStyleAttrs(attrs,style,el,scope),setMetaData(attrs,el),scope.animation&amp;&amp;createCSSAnimation(el,attrs,scope),scope.emphasis&amp;&amp;function createCSSEmphasis(el,attrs,scope){if(!el.ignore)if(el.isSilent())setClassAttribute(style={"pointer-events":"none"},attrs,scope);else{var emphasisStyle=el.states.emphasis&amp;&amp;el.states.emphasis.style?el.states.emphasis.style:{},fill=emphasisStyle.fill;if(!fill){var normalFill=el.style&amp;&amp;el.style.fill,selectFill=el.states.select&amp;&amp;el.states.select.style&amp;&amp;el.states.select.style.fill,fromFill=el.currentStates.indexOf("select")&gt;=0&amp;&amp;selectFill||normalFill;fromFill&amp;&amp;(fill=liftColor(fromFill))}var lineWidth=emphasisStyle.lineWidth;lineWidth&amp;&amp;(lineWidth/=!emphasisStyle.strokeNoScale&amp;&amp;el.transform?el.transform[0]:1);var style={cursor:"pointer"};fill&amp;&amp;(style.fill=fill),emphasisStyle.stroke&amp;&amp;(style.stroke=emphasisStyle.stroke),lineWidth&amp;&amp;(style["stroke-width"]=lineWidth),setClassAttribute(style,attrs,scope)}}(el,attrs,scope),createVNode(svgElType,el.id+"",attrs)}function brush(el,scope){return el instanceof Path?brushSVGPath(el,scope):el instanceof ZRImage?function brushSVGImage(el,scope){var style=el.style,image=style.image;if(image&amp;&amp;!isString(image)&amp;&amp;(isImageLike(image)?image=image.src:isCanvasLike(image)&amp;&amp;(image=image.toDataURL())),image){var x=style.x||0,y=style.y||0,attrs={href:image,width:style.width,height:style.height};return x&amp;&amp;(attrs.x=x),y&amp;&amp;(attrs.y=y),setTransform(attrs,el.transform),setStyleAttrs(attrs,style,el,scope),setMetaData(attrs,el),scope.animation&amp;&amp;createCSSAnimation(el,attrs,scope),createVNode("image",el.id+"",attrs)}}(el,scope):el instanceof TSpan?function brushSVGTSpan(el,scope){var style=el.style,text=style.text;if(null!=text&amp;&amp;(text+=""),text&amp;&amp;!isNaN(style.x)&amp;&amp;!isNaN(style.y)){var font=style.font||DEFAULT_FONT,x=style.x||0,y=function adjustTextY$1(y,lineHeight,textBaseline){return"top"===textBaseline?y+=lineHeight/2:"bottom"===textBaseline&amp;&amp;(y-=lineHeight/2),y}(style.y||0,getLineHeight(font),style.textBaseline),attrs={"dominant-baseline":"central","text-anchor":TEXT_ALIGN_TO_ANCHOR[style.textAlign]||style.textAlign};if(hasSeparateFont(style)){var separatedFontStr="",fontStyle=style.fontStyle,fontSize=parseFontSize(style.fontSize);if(!parseFloat(fontSize))return;var fontFamily=style.fontFamily||"sans-serif",fontWeight=style.fontWeight;separatedFontStr+="font-size:"+fontSize+";font-family:"+fontFamily+";",fontStyle&amp;&amp;"normal"!==fontStyle&amp;&amp;(separatedFontStr+="font-style:"+fontStyle+";"),fontWeight&amp;&amp;"normal"!==fontWeight&amp;&amp;(separatedFontStr+="font-weight:"+fontWeight+";"),attrs.style=separatedFontStr}else attrs.style="font: "+font;return text.match(/\s/)&amp;&amp;(attrs["xml:space"]="preserve"),x&amp;&amp;(attrs.x=x),y&amp;&amp;(attrs.y=y),setTransform(attrs,el.transform),setStyleAttrs(attrs,style,el,scope),setMetaData(attrs,el),scope.animation&amp;&amp;createCSSAnimation(el,attrs,scope),createVNode("text",el.id+"",attrs,void 0,text)}}(el,scope):void 0}function setGradient(style,attrs,target,scope){var gradientTag,val=style[target],gradientAttrs={gradientUnits:val.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(val))gradientTag="linearGradient",gradientAttrs.x1=val.x,gradientAttrs.y1=val.y,gradientAttrs.x2=val.x2,gradientAttrs.y2=val.y2;else{if(!isRadialGradient(val))return;gradientTag="radialGradient",gradientAttrs.cx=retrieve2(val.x,.5),gradientAttrs.cy=retrieve2(val.y,.5),gradientAttrs.r=retrieve2(val.r,.5)}for(var colors=val.colorStops,colorStops=[],i=0,len2=colors.length;i&lt;len2;++i){var offset=100*round4(colors[i].offset)+"%",_a2=normalizeColor(colors[i].color),color2=_a2.color,opacity=_a2.opacity,stopsAttrs={offset:offset};stopsAttrs["stop-color"]=color2,opacity&lt;1&amp;&amp;(stopsAttrs["stop-opacity"]=opacity),colorStops.push(createVNode("stop",i+"",stopsAttrs))}var gradientKey=vNodeToString(createVNode(gradientTag,"",gradientAttrs,colorStops)),gradientCache=scope.gradientCache,gradientId=gradientCache[gradientKey];gradientId||(gradientId=scope.zrId+"-g"+scope.gradientIdx++,gradientCache[gradientKey]=gradientId,gradientAttrs.id=gradientId,scope.defs[gradientId]=createVNode(gradientTag,gradientId,gradientAttrs,colorStops)),attrs[target]=getIdURL(gradientId)}function setPattern(el,attrs,target,scope){var child,val=el.style[target],boundingRect=el.getBoundingRect(),patternAttrs={},repeat=val.repeat,noRepeat="no-repeat"===repeat,repeatX="repeat-x"===repeat,repeatY="repeat-y"===repeat;if(isImagePattern(val)){var imageWidth_1=val.imageWidth,imageHeight_1=val.imageHeight,imageSrc=void 0,patternImage=val.image;if(isString(patternImage)?imageSrc=patternImage:isImageLike(patternImage)?imageSrc=patternImage.src:isCanvasLike(patternImage)&amp;&amp;(imageSrc=patternImage.toDataURL()),"undefined"==typeof Image){var errMsg="Image width/height must been given explictly in svg-ssr renderer.";assert(imageWidth_1,errMsg),assert(imageHeight_1,errMsg)}else if(null==imageWidth_1||null==imageHeight_1){var setSizeToVNode_1=function(vNode,img){if(vNode){var svgEl=vNode.elm,width=imageWidth_1||img.width,height=imageHeight_1||img.height;"pattern"===vNode.tag&amp;&amp;(repeatX?(height=1,width/=boundingRect.width):repeatY&amp;&amp;(width=1,height/=boundingRect.height)),vNode.attrs.width=width,vNode.attrs.height=height,svgEl&amp;&amp;(svgEl.setAttribute("width",width),svgEl.setAttribute("height",height))}},createdImage=createOrUpdateImage(imageSrc,null,el,function(img){noRepeat||setSizeToVNode_1(patternVNode,img),setSizeToVNode_1(child,img)});createdImage&amp;&amp;createdImage.width&amp;&amp;createdImage.height&amp;&amp;(imageWidth_1=imageWidth_1||createdImage.width,imageHeight_1=imageHeight_1||createdImage.height)}child=createVNode("image","img",{href:imageSrc,width:imageWidth_1,height:imageHeight_1}),patternAttrs.width=imageWidth_1,patternAttrs.height=imageHeight_1}else val.svgElement&amp;&amp;(child=clone$4(val.svgElement),patternAttrs.width=val.svgWidth,patternAttrs.height=val.svgHeight);if(child){var patternWidth,patternHeight;noRepeat?patternWidth=patternHeight=1:repeatX?(patternHeight=1,patternWidth=patternAttrs.width/boundingRect.width):repeatY?(patternWidth=1,patternHeight=patternAttrs.height/boundingRect.height):patternAttrs.patternUnits="userSpaceOnUse",null==patternWidth||isNaN(patternWidth)||(patternAttrs.width=patternWidth),null==patternHeight||isNaN(patternHeight)||(patternAttrs.height=patternHeight);var patternTransform=getSRTTransformString(val);patternTransform&amp;&amp;(patternAttrs.patternTransform=patternTransform);var patternVNode=createVNode("pattern","",patternAttrs,[child]),patternKey=vNodeToString(patternVNode),patternCache=scope.patternCache,patternId=patternCache[patternKey];patternId||(patternId=scope.zrId+"-p"+scope.patternIdx++,patternCache[patternKey]=patternId,patternAttrs.id=patternId,patternVNode=scope.defs[patternId]=createVNode("pattern",patternId,patternAttrs,[child])),attrs[target]=getIdURL(patternId)}}function setClipPath(clipPath,attrs,scope){var clipPathCache=scope.clipPathCache,defs=scope.defs,clipPathId=clipPathCache[clipPath.id];if(!clipPathId){var clipPathAttrs={id:clipPathId=scope.zrId+"-c"+scope.clipPathIdx++};clipPathCache[clipPath.id]=clipPathId,defs[clipPathId]=createVNode("clipPath",clipPathId,clipPathAttrs,[brushSVGPath(clipPath,scope)])}attrs["clip-path"]=getIdURL(clipPathId)}function createTextNode(text){return document.createTextNode(text)}function insertBefore(parentNode2,newNode,referenceNode){parentNode2.insertBefore(newNode,referenceNode)}function removeChild(node,child){node.removeChild(child)}function appendChild(node,child){node.appendChild(child)}function parentNode(node){return node.parentNode}function nextSibling(node){return node.nextSibling}function setTextContent(node,text){node.textContent=text}var emptyNode=createVNode("","");function isUndef(s){return void 0===s}function isDef(s){return void 0!==s}function createKeyToOldIdx(children,beginIdx,endIdx){for(var map2={},i=beginIdx;i&lt;=endIdx;++i){var key=children[i].key;void 0!==key&amp;&amp;(map2[key]=i)}return map2}function sameVnode(vnode1,vnode2){var isSameKey=vnode1.key===vnode2.key;return vnode1.tag===vnode2.tag&amp;&amp;isSameKey}function createElm(vnode){var i,children=vnode.children,tag=vnode.tag;if(isDef(tag)){var elm=vnode.elm=createElement(tag);if(updateAttrs(emptyNode,vnode),isArray$1(children))for(i=0;i&lt;children.length;++i){var ch=children[i];null!=ch&amp;&amp;appendChild(elm,createElm(ch))}else isDef(vnode.text)&amp;&amp;!isObject$3(vnode.text)&amp;&amp;appendChild(elm,createTextNode(vnode.text))}else vnode.elm=createTextNode(vnode.text);return vnode.elm}function addVnodes(parentElm,before,vnodes,startIdx,endIdx){for(;startIdx&lt;=endIdx;++startIdx){var ch=vnodes[startIdx];null!=ch&amp;&amp;insertBefore(parentElm,createElm(ch),before)}}function removeVnodes(parentElm,vnodes,startIdx,endIdx){for(;startIdx&lt;=endIdx;++startIdx){var ch=vnodes[startIdx];if(null!=ch)if(isDef(ch.tag))removeChild(parentNode(ch.elm),ch.elm);else removeChild(parentElm,ch.elm)}}function updateAttrs(oldVnode,vnode){var key,elm=vnode.elm,oldAttrs=oldVnode&amp;&amp;oldVnode.attrs||{},attrs=vnode.attrs||{};if(oldAttrs!==attrs){for(key in attrs){var cur=attrs[key];oldAttrs[key]!==cur&amp;&amp;(!0===cur?elm.setAttribute(key,""):!1===cur?elm.removeAttribute(key):"style"===key?elm.style.cssText=cur:120!==key.charCodeAt(0)?elm.setAttribute(key,cur):"xmlns:xlink"===key||"xmlns"===key?elm.setAttributeNS("http://www.w3.org/2000/xmlns/",key,cur):58===key.charCodeAt(3)?elm.setAttributeNS("http://www.w3.org/XML/1998/namespace",key,cur):58===key.charCodeAt(5)?elm.setAttributeNS(XLINKNS,key,cur):elm.setAttribute(key,cur))}for(key in oldAttrs)key in attrs||elm.removeAttribute(key)}}function patchVnode(oldVnode,vnode){var elm=vnode.elm=oldVnode.elm,oldCh=oldVnode.children,ch=vnode.children;oldVnode!==vnode&amp;&amp;(updateAttrs(oldVnode,vnode),isUndef(vnode.text)?isDef(oldCh)&amp;&amp;isDef(ch)?oldCh!==ch&amp;&amp;function updateChildren(parentElm,oldCh,newCh){for(var oldKeyToIdx,idxInOld,elmToMove,oldStartIdx=0,newStartIdx=0,oldEndIdx=oldCh.length-1,oldStartVnode=oldCh[0],oldEndVnode=oldCh[oldEndIdx],newEndIdx=newCh.length-1,newStartVnode=newCh[0],newEndVnode=newCh[newEndIdx];oldStartIdx&lt;=oldEndIdx&amp;&amp;newStartIdx&lt;=newEndIdx;)null==oldStartVnode?oldStartVnode=oldCh[++oldStartIdx]:null==oldEndVnode?oldEndVnode=oldCh[--oldEndIdx]:null==newStartVnode?newStartVnode=newCh[++newStartIdx]:null==newEndVnode?newEndVnode=newCh[--newEndIdx]:sameVnode(oldStartVnode,newStartVnode)?(patchVnode(oldStartVnode,newStartVnode),oldStartVnode=oldCh[++oldStartIdx],newStartVnode=newCh[++newStartIdx]):sameVnode(oldEndVnode,newEndVnode)?(patchVnode(oldEndVnode,newEndVnode),oldEndVnode=oldCh[--oldEndIdx],newEndVnode=newCh[--newEndIdx]):sameVnode(oldStartVnode,newEndVnode)?(patchVnode(oldStartVnode,newEndVnode),insertBefore(parentElm,oldStartVnode.elm,nextSibling(oldEndVnode.elm)),oldStartVnode=oldCh[++oldStartIdx],newEndVnode=newCh[--newEndIdx]):sameVnode(oldEndVnode,newStartVnode)?(patchVnode(oldEndVnode,newStartVnode),insertBefore(parentElm,oldEndVnode.elm,oldStartVnode.elm),oldEndVnode=oldCh[--oldEndIdx],newStartVnode=newCh[++newStartIdx]):(isUndef(oldKeyToIdx)&amp;&amp;(oldKeyToIdx=createKeyToOldIdx(oldCh,oldStartIdx,oldEndIdx)),isUndef(idxInOld=oldKeyToIdx[newStartVnode.key])||(elmToMove=oldCh[idxInOld]).tag!==newStartVnode.tag?insertBefore(parentElm,createElm(newStartVnode),oldStartVnode.elm):(patchVnode(elmToMove,newStartVnode),oldCh[idxInOld]=void 0,insertBefore(parentElm,elmToMove.elm,oldStartVnode.elm)),newStartVnode=newCh[++newStartIdx]);(oldStartIdx&lt;=oldEndIdx||newStartIdx&lt;=newEndIdx)&amp;&amp;(oldStartIdx&gt;oldEndIdx?addVnodes(parentElm,null==newCh[newEndIdx+1]?null:newCh[newEndIdx+1].elm,newCh,newStartIdx,newEndIdx):removeVnodes(parentElm,oldCh,oldStartIdx,oldEndIdx))}(elm,oldCh,ch):isDef(ch)?(isDef(oldVnode.text)&amp;&amp;setTextContent(elm,""),addVnodes(elm,null,ch,0,ch.length-1)):isDef(oldCh)?removeVnodes(elm,oldCh,0,oldCh.length-1):isDef(oldVnode.text)&amp;&amp;setTextContent(elm,""):oldVnode.text!==vnode.text&amp;&amp;(isDef(oldCh)&amp;&amp;removeVnodes(elm,oldCh,0,oldCh.length-1),setTextContent(elm,vnode.text)))}var svgId=0,SVGPainter=function(){function SVGPainter2(root,storage2,opts){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=storage2,this._opts=opts=extend({},opts),this.root=root,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(opts.width,opts.height),root&amp;&amp;!opts.ssr){var viewport=this._viewport=document.createElement("div");viewport.style.cssText="position:relative;overflow:hidden";var svgDom=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),viewport.appendChild(svgDom),root.appendChild(viewport)}this.resize(opts.width,opts.height)}return SVGPainter2.prototype.getType=function(){return this.type},SVGPainter2.prototype.getViewportRoot=function(){return this._viewport},SVGPainter2.prototype.getViewportRootOffset=function(){var viewportRoot=this.getViewportRoot();if(viewportRoot)return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}},SVGPainter2.prototype.getSvgDom=function(){return this._svgDom},SVGPainter2.prototype.refresh=function(){if(this.root){var vnode=this.renderToVNode({willUpdate:!0});vnode.attrs.style="position:absolute;left:0;top:0;user-select:none",function patch(oldVnode,vnode){if(sameVnode(oldVnode,vnode))patchVnode(oldVnode,vnode);else{var elm=oldVnode.elm,parent_2=parentNode(elm);createElm(vnode),null!==parent_2&amp;&amp;(insertBefore(parent_2,vnode.elm,nextSibling(elm)),removeVnodes(parent_2,[oldVnode],0,0))}return vnode}(this._oldVNode,vnode),this._oldVNode=vnode}},SVGPainter2.prototype.renderOneToVNode=function(el){return brush(el,createBrushScope(this._id))},SVGPainter2.prototype.renderToVNode=function(opts){opts=opts||{};var list=this.storage.getDisplayList(!0),width=this._width,height=this._height,scope=createBrushScope(this._id);scope.animation=opts.animation,scope.willUpdate=opts.willUpdate,scope.compress=opts.compress,scope.emphasis=opts.emphasis,scope.ssr=this._opts.ssr;var children=[],bgVNode=this._bgVNode=function createBackgroundVNode(width,height,backgroundColor2,scope){var bgVNode;if(backgroundColor2&amp;&amp;"none"!==backgroundColor2)if(bgVNode=createVNode("rect","bg",{width:width,height:height,x:"0",y:"0"}),isGradient(backgroundColor2))setGradient({fill:backgroundColor2},bgVNode.attrs,"fill",scope);else if(isPattern(backgroundColor2))setPattern({style:{fill:backgroundColor2},dirty:noop,getBoundingRect:function(){return{width:width,height:height}}},bgVNode.attrs,"fill",scope);else{var _a2=normalizeColor(backgroundColor2),color2=_a2.color,opacity=_a2.opacity;bgVNode.attrs.fill=color2,opacity&lt;1&amp;&amp;(bgVNode.attrs["fill-opacity"]=opacity)}return bgVNode}(width,height,this._backgroundColor,scope);bgVNode&amp;&amp;children.push(bgVNode);var mainVNode=opts.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(list,scope,mainVNode?mainVNode.children:children),mainVNode&amp;&amp;children.push(mainVNode);var defs=map$1(keys(scope.defs),function(id){return scope.defs[id]});if(defs.length&amp;&amp;children.push(createVNode("defs","defs",{},defs)),opts.animation){var animationCssStr=function getCssString(selectorNodes,animationNodes,opts){var S=(opts=opts||{}).newline?"\n":"",bracketBegin=" {"+S,bracketEnd=S+"}",selectors=map$1(keys(selectorNodes),function(className){return className+bracketBegin+map$1(keys(selectorNodes[className]),function(attrName){return attrName+":"+selectorNodes[className][attrName]+";"}).join(S)+bracketEnd}).join(S),animations=map$1(keys(animationNodes),function(animationName){return"@keyframes "+animationName+bracketBegin+map$1(keys(animationNodes[animationName]),function(percent){return percent+bracketBegin+map$1(keys(animationNodes[animationName][percent]),function(attrName){var val=animationNodes[animationName][percent][attrName];return"d"===attrName&amp;&amp;(val='path("'+val+'")'),attrName+":"+val+";"}).join(S)+bracketEnd}).join(S)+bracketEnd}).join(S);return selectors||animations?["&lt;![CDATA[",selectors,animations,"]]&gt;"].join(S):""}(scope.cssNodes,scope.cssAnims,{newline:!0});if(animationCssStr){var styleNode=createVNode("style","stl",{},[],animationCssStr);children.push(styleNode)}}return createSVGVNode(width,height,children,opts.useViewBox)},SVGPainter2.prototype.renderToString=function(opts){return opts=opts||{},vNodeToString(this.renderToVNode({animation:retrieve2(opts.cssAnimation,!0),emphasis:retrieve2(opts.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(opts.useViewBox,!0)}),{newline:!0})},SVGPainter2.prototype.setBackgroundColor=function(backgroundColor2){this._backgroundColor=backgroundColor2},SVGPainter2.prototype.getSvgRoot=function(){return this._mainVNode&amp;&amp;this._mainVNode.elm},SVGPainter2.prototype._paintList=function(list,scope,out2){for(var currentClipPathGroup,prevClipPaths,listLen=list.length,clipPathsGroupsStack=[],clipPathsGroupsStackDepth=0,clipGroupNodeIdx=0,i=0;i&lt;listLen;i++){var displayable=list[i];if(!displayable.invisible){var clipPaths=displayable.__clipPaths,len2=clipPaths&amp;&amp;clipPaths.length||0,prevLen=prevClipPaths&amp;&amp;prevClipPaths.length||0,lca=void 0;for(lca=Math.max(len2-1,prevLen-1);lca&gt;=0&amp;&amp;(!clipPaths||!prevClipPaths||clipPaths[lca]!==prevClipPaths[lca]);lca--);for(var i_1=prevLen-1;i_1&gt;lca;i_1--)currentClipPathGroup=clipPathsGroupsStack[--clipPathsGroupsStackDepth-1];for(var i_2=lca+1;i_2&lt;len2;i_2++){var groupAttrs={};setClipPath(clipPaths[i_2],groupAttrs,scope);var g=createVNode("g","clip-g-"+clipGroupNodeIdx++,groupAttrs,[]);(currentClipPathGroup?currentClipPathGroup.children:out2).push(g),clipPathsGroupsStack[clipPathsGroupsStackDepth++]=g,currentClipPathGroup=g}prevClipPaths=clipPaths;var ret=brush(displayable,scope);ret&amp;&amp;(currentClipPathGroup?currentClipPathGroup.children:out2).push(ret)}}},SVGPainter2.prototype.resize=function(width,height){var opts=this._opts,root=this.root,viewport=this._viewport;if(null!=width&amp;&amp;(opts.width=width),null!=height&amp;&amp;(opts.height=height),root&amp;&amp;viewport&amp;&amp;(viewport.style.display="none",width=getSize$1(root,0,opts),height=getSize$1(root,1,opts),viewport.style.display=""),this._width!==width||this._height!==height){if(this._width=width,this._height=height,viewport){var viewportStyle=viewport.style;viewportStyle.width=width+"px",viewportStyle.height=height+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var svgDom=this._svgDom;svgDom&amp;&amp;(svgDom.setAttribute("width",width),svgDom.setAttribute("height",height));var bgEl=this._bgVNode&amp;&amp;this._bgVNode.elm;bgEl&amp;&amp;(bgEl.setAttribute("width",width),bgEl.setAttribute("height",height))}}},SVGPainter2.prototype.getWidth=function(){return this._width},SVGPainter2.prototype.getHeight=function(){return this._height},SVGPainter2.prototype.dispose=function(){this.root&amp;&amp;(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},SVGPainter2.prototype.clear=function(){this._svgDom&amp;&amp;(this._svgDom.innerHTML=null),this._oldVNode=null},SVGPainter2.prototype.toDataURL=function(base64){var str=this.renderToString(),prefix="data:image/svg+xml;";return base64?(str=encodeBase64(str))&amp;&amp;prefix+"base64,"+str:prefix+"charset=UTF-8,"+encodeURIComponent(str)},SVGPainter2}();function createDom(id,painter,dpr2){var newDom=platformApi.createCanvas(),width=painter.getWidth(),height=painter.getHeight(),newDomStyle=newDom.style;return newDomStyle&amp;&amp;(newDomStyle.position="absolute",newDomStyle.left="0",newDomStyle.top="0",newDomStyle.width=width+"px",newDomStyle.height=height+"px",newDom.setAttribute("data-zr-dom-id",id)),newDom.width=width*dpr2,newDom.height=height*dpr2,newDom}var Layer=function(_super){function Layer2(id,painter,dpr2){var dom,_this=_super.call(this)||this;_this.motionBlur=!1,_this.lastFrameAlpha=.7,_this.dpr=1,_this.virtual=!1,_this.config={},_this.incremental=!1,_this.zlevel=0,_this.maxRepaintRectCount=5,_this.__dirty=!0,_this.__firstTimePaint=!0,_this.__used=!1,_this.__drawIndex=0,_this.__startIndex=0,_this.__endIndex=0,_this.__prevStartIndex=null,_this.__prevEndIndex=null,dpr2=dpr2||devicePixelRatio,"string"==typeof id?dom=createDom(id,painter,dpr2):isObject$3(id)&amp;&amp;(id=(dom=id).id),_this.id=id,_this.dom=dom;var domStyle=dom.style;return domStyle&amp;&amp;(disableUserSelect(dom),dom.onselectstart=function(){return!1},domStyle.padding="0",domStyle.margin="0",domStyle.borderWidth="0"),_this.painter=painter,_this.dpr=dpr2,_this}return __extends(Layer2,_super),Layer2.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},Layer2.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},Layer2.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},Layer2.prototype.setUnpainted=function(){this.__firstTimePaint=!0},Layer2.prototype.createBackBuffer=function(){var dpr2=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,dpr2),this.ctxBack=this.domBack.getContext("2d"),1!==dpr2&amp;&amp;this.ctxBack.scale(dpr2,dpr2)},Layer2.prototype.createRepaintRects=function(displayList,prevList,viewWidth,viewHeight){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var hasIntersections,mergedRepaintRects=[],maxRepaintRectCount=this.maxRepaintRectCount,full=!1,pendingRect=new BoundingRect(0,0,0,0);function addRectToMergePool(rect){if(rect.isFinite()&amp;&amp;!rect.isZero())if(0===mergedRepaintRects.length){(boundingRect=new BoundingRect(0,0,0,0)).copy(rect),mergedRepaintRects.push(boundingRect)}else{for(var boundingRect,isMerged=!1,minDeltaArea=1/0,bestRectToMergeIdx=0,i2=0;i2&lt;mergedRepaintRects.length;++i2){var mergedRect=mergedRepaintRects[i2];if(mergedRect.intersect(rect)){var pendingRect_1=new BoundingRect(0,0,0,0);pendingRect_1.copy(mergedRect),pendingRect_1.union(rect),mergedRepaintRects[i2]=pendingRect_1,isMerged=!0;break}if(full){pendingRect.copy(rect),pendingRect.union(mergedRect);var aArea=rect.width*rect.height,bArea=mergedRect.width*mergedRect.height,deltaArea=pendingRect.width*pendingRect.height-aArea-bArea;deltaArea&lt;minDeltaArea&amp;&amp;(minDeltaArea=deltaArea,bestRectToMergeIdx=i2)}}if(full&amp;&amp;(mergedRepaintRects[bestRectToMergeIdx].union(rect),isMerged=!0),!isMerged)(boundingRect=new BoundingRect(0,0,0,0)).copy(rect),mergedRepaintRects.push(boundingRect);full||(full=mergedRepaintRects.length&gt;=maxRepaintRectCount)}}for(var i=this.__startIndex;i&lt;this.__endIndex;++i){if(el=displayList[i]){var shouldPaint=el.shouldBePainted(viewWidth,viewHeight,!0,!0);(prevRect=el.__isRendered&amp;&amp;(1&amp;el.__dirty||!shouldPaint)?el.getPrevPaintRect():null)&amp;&amp;addRectToMergePool(prevRect);var curRect=shouldPaint&amp;&amp;(1&amp;el.__dirty||!el.__isRendered)?el.getPaintRect():null;curRect&amp;&amp;addRectToMergePool(curRect)}}for(i=this.__prevStartIndex;i&lt;this.__prevEndIndex;++i){var el,prevRect;shouldPaint=(el=prevList[i])&amp;&amp;el.shouldBePainted(viewWidth,viewHeight,!0,!0);if(el&amp;&amp;(!shouldPaint||!el.__zr)&amp;&amp;el.__isRendered)(prevRect=el.getPrevPaintRect())&amp;&amp;addRectToMergePool(prevRect)}do{hasIntersections=!1;for(i=0;i&lt;mergedRepaintRects.length;)if(mergedRepaintRects[i].isZero())mergedRepaintRects.splice(i,1);else{for(var j=i+1;j&lt;mergedRepaintRects.length;)mergedRepaintRects[i].intersect(mergedRepaintRects[j])?(hasIntersections=!0,mergedRepaintRects[i].union(mergedRepaintRects[j]),mergedRepaintRects.splice(j,1)):j++;i++}}while(hasIntersections);return this._paintRects=mergedRepaintRects,mergedRepaintRects},Layer2.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},Layer2.prototype.resize=function(width,height){var dpr2=this.dpr,dom=this.dom,domStyle=dom.style,domBack=this.domBack;domStyle&amp;&amp;(domStyle.width=width+"px",domStyle.height=height+"px"),dom.width=width*dpr2,dom.height=height*dpr2,domBack&amp;&amp;(domBack.width=width*dpr2,domBack.height=height*dpr2,1!==dpr2&amp;&amp;this.ctxBack.scale(dpr2,dpr2))},Layer2.prototype.clear=function(clearAll,clearColor,repaintRects){var dom=this.dom,ctx=this.ctx,width=dom.width,height=dom.height;clearColor=clearColor||this.clearColor;var haveMotionBLur=this.motionBlur&amp;&amp;!clearAll,lastFrameAlpha=this.lastFrameAlpha,dpr2=this.dpr,self2=this;haveMotionBLur&amp;&amp;(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(dom,0,0,width/dpr2,height/dpr2));var domBack=this.domBack;function doClear(x,y,width2,height2){if(ctx.clearRect(x,y,width2,height2),clearColor&amp;&amp;"transparent"!==clearColor){var clearColorGradientOrPattern=void 0;if(isGradientObject(clearColor))clearColorGradientOrPattern=(clearColor.global||clearColor.__width===width2&amp;&amp;clearColor.__height===height2)&amp;&amp;clearColor.__canvasGradient||getCanvasGradient(ctx,clearColor,{x:0,y:0,width:width2,height:height2}),clearColor.__canvasGradient=clearColorGradientOrPattern,clearColor.__width=width2,clearColor.__height=height2;else isImagePatternObject(clearColor)&amp;&amp;(clearColor.scaleX=clearColor.scaleX||dpr2,clearColor.scaleY=clearColor.scaleY||dpr2,clearColorGradientOrPattern=createCanvasPattern(ctx,clearColor,{dirty:function(){self2.setUnpainted(),self2.painter.refresh()}}));ctx.save(),ctx.fillStyle=clearColorGradientOrPattern||clearColor,ctx.fillRect(x,y,width2,height2),ctx.restore()}haveMotionBLur&amp;&amp;(ctx.save(),ctx.globalAlpha=lastFrameAlpha,ctx.drawImage(domBack,x,y,width2,height2),ctx.restore())}!repaintRects||haveMotionBLur?doClear(0,0,width,height):repaintRects.length&amp;&amp;each$f(repaintRects,function(rect){doClear(rect.x*dpr2,rect.y*dpr2,rect.width*dpr2,rect.height*dpr2)})},Layer2}(Eventful);var CanvasPainter=function(){function CanvasPainter2(root,storage2,opts,id){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var singleCanvas=!root.nodeName||"CANVAS"===root.nodeName.toUpperCase();this._opts=opts=extend({},opts||{}),this.dpr=opts.devicePixelRatio||devicePixelRatio,this._singleCanvas=singleCanvas,this.root=root,root.style&amp;&amp;(disableUserSelect(root),root.innerHTML=""),this.storage=storage2;var zlevelList=this._zlevelList;this._prevDisplayList=[];var layers=this._layers;if(singleCanvas){var rootCanvas=root,width=rootCanvas.width,height=rootCanvas.height;null!=opts.width&amp;&amp;(width=opts.width),null!=opts.height&amp;&amp;(height=opts.height),this.dpr=opts.devicePixelRatio||1,rootCanvas.width=width*this.dpr,rootCanvas.height=height*this.dpr,this._width=width,this._height=height;var mainLayer=new Layer(rootCanvas,this,this.dpr);mainLayer.__builtin__=!0,mainLayer.initContext(),layers[314159]=mainLayer,mainLayer.zlevel=314159,zlevelList.push(314159),this._domRoot=root}else{this._width=getSize$1(root,0,opts),this._height=getSize$1(root,1,opts);var domRoot=this._domRoot=function createRoot(width,height){var domRoot=document.createElement("div");return domRoot.style.cssText=["position:relative","width:"+width+"px","height:"+height+"px","padding:0","margin:0","border-width:0"].join(";")+";",domRoot}(this._width,this._height);root.appendChild(domRoot)}}return CanvasPainter2.prototype.getType=function(){return"canvas"},CanvasPainter2.prototype.isSingleCanvas=function(){return this._singleCanvas},CanvasPainter2.prototype.getViewportRoot=function(){return this._domRoot},CanvasPainter2.prototype.getViewportRootOffset=function(){var viewportRoot=this.getViewportRoot();if(viewportRoot)return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}},CanvasPainter2.prototype.refresh=function(paintAll){var list=this.storage.getDisplayList(!0),prevList=this._prevDisplayList,zlevelList=this._zlevelList;this._redrawId=Math.random(),this._paintList(list,prevList,paintAll,this._redrawId);for(var i=0;i&lt;zlevelList.length;i++){var z=zlevelList[i],layer=this._layers[z];if(!layer.__builtin__&amp;&amp;layer.refresh){var clearColor=0===i?this._backgroundColor:null;layer.refresh(clearColor)}}return this._opts.useDirtyRect&amp;&amp;(this._prevDisplayList=list.slice()),this},CanvasPainter2.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},CanvasPainter2.prototype._paintHoverList=function(list){var len2=list.length,hoverLayer=this._hoverlayer;if(hoverLayer&amp;&amp;hoverLayer.clear(),len2){for(var ctx,scope={inHover:!0,viewWidth:this._width,viewHeight:this._height},i=0;i&lt;len2;i++){var el=list[i];el.__inHover&amp;&amp;(hoverLayer||(hoverLayer=this._hoverlayer=this.getLayer(1e5)),ctx||(ctx=hoverLayer.ctx).save(),brush$1(ctx,el,scope,i===len2-1))}ctx&amp;&amp;ctx.restore()}},CanvasPainter2.prototype.getHoverLayer=function(){return this.getLayer(1e5)},CanvasPainter2.prototype.paintOne=function(ctx,el){brushSingle(ctx,el)},CanvasPainter2.prototype._paintList=function(list,prevList,paintAll,redrawId){if(this._redrawId===redrawId){paintAll=paintAll||!1,this._updateLayerStatus(list);var _a2=this._doPaintList(list,prevList,paintAll),finished=_a2.finished,needsRefreshHover=_a2.needsRefreshHover;if(this._needsManuallyCompositing&amp;&amp;this._compositeManually(),needsRefreshHover&amp;&amp;this._paintHoverList(list),finished)this.eachLayer(function(layer){layer.afterBrush&amp;&amp;layer.afterBrush()});else{var self_1=this;requestAnimationFrame(function(){self_1._paintList(list,prevList,paintAll,redrawId)})}}},CanvasPainter2.prototype._compositeManually=function(){var ctx=this.getLayer(314159).ctx,width=this._domRoot.width,height=this._domRoot.height;ctx.clearRect(0,0,width,height),this.eachBuiltinLayer(function(layer){layer.virtual&amp;&amp;ctx.drawImage(layer.dom,0,0,width,height)})},CanvasPainter2.prototype._doPaintList=function(list,prevList,paintAll){for(var _this=this,layerList=[],useDirtyRect=this._opts.useDirtyRect,zi=0;zi&lt;this._zlevelList.length;zi++){var zlevel=this._zlevelList[zi],layer=this._layers[zlevel];layer.__builtin__&amp;&amp;layer!==this._hoverlayer&amp;&amp;(layer.__dirty||paintAll)&amp;&amp;layerList.push(layer)}for(var finished=!0,needsRefreshHover=!1,_loop_1=function(k2){var i,layer2=layerList[k2],ctx=layer2.ctx,repaintRects=useDirtyRect&amp;&amp;layer2.createRepaintRects(list,prevList,this_1._width,this_1._height),start2=paintAll?layer2.__startIndex:layer2.__drawIndex,useTimer=!paintAll&amp;&amp;layer2.incremental&amp;&amp;Date.now,startTime=useTimer&amp;&amp;Date.now(),clearColor=layer2.zlevel===this_1._zlevelList[0]?this_1._backgroundColor:null;if(layer2.__startIndex===layer2.__endIndex)layer2.clear(!1,clearColor,repaintRects);else if(start2===layer2.__startIndex){var firstEl=list[start2];firstEl.incremental&amp;&amp;firstEl.notClear&amp;&amp;!paintAll||layer2.clear(!1,clearColor,repaintRects)}-1===start2&amp;&amp;(console.error("For some unknown reason. drawIndex is -1"),start2=layer2.__startIndex);var repaint=function(repaintRect){var scope={inHover:!1,allClipped:!1,prevEl:null,viewWidth:_this._width,viewHeight:_this._height};for(i=start2;i&lt;layer2.__endIndex;i++){var el=list[i];if(el.__inHover&amp;&amp;(needsRefreshHover=!0),_this._doPaintEl(el,layer2,useDirtyRect,repaintRect,scope,i===layer2.__endIndex-1),useTimer)if(Date.now()-startTime&gt;15)break}scope.prevElClipPaths&amp;&amp;ctx.restore()};if(repaintRects)if(0===repaintRects.length)i=layer2.__endIndex;else for(var dpr2=this_1.dpr,r=0;r&lt;repaintRects.length;++r){var rect=repaintRects[r];ctx.save(),ctx.beginPath(),ctx.rect(rect.x*dpr2,rect.y*dpr2,rect.width*dpr2,rect.height*dpr2),ctx.clip(),repaint(rect),ctx.restore()}else ctx.save(),repaint(),ctx.restore();layer2.__drawIndex=i,layer2.__drawIndex&lt;layer2.__endIndex&amp;&amp;(finished=!1)},this_1=this,k=0;k&lt;layerList.length;k++)_loop_1(k);return env.wxa&amp;&amp;each$f(this._layers,function(layer2){layer2&amp;&amp;layer2.ctx&amp;&amp;layer2.ctx.draw&amp;&amp;layer2.ctx.draw()}),{finished:finished,needsRefreshHover:needsRefreshHover}},CanvasPainter2.prototype._doPaintEl=function(el,currentLayer,useDirtyRect,repaintRect,scope,isLast){var ctx=currentLayer.ctx;if(useDirtyRect){var paintRect=el.getPaintRect();(!repaintRect||paintRect&amp;&amp;paintRect.intersect(repaintRect))&amp;&amp;(brush$1(ctx,el,scope,isLast),el.setPrevPaintRect(paintRect))}else brush$1(ctx,el,scope,isLast)},CanvasPainter2.prototype.getLayer=function(zlevel,virtual){this._singleCanvas&amp;&amp;!this._needsManuallyCompositing&amp;&amp;(zlevel=314159);var layer=this._layers[zlevel];return layer||((layer=new Layer("zr_"+zlevel,this,this.dpr)).zlevel=zlevel,layer.__builtin__=!0,this._layerConfig[zlevel]?merge(layer,this._layerConfig[zlevel],!0):this._layerConfig[zlevel-.01]&amp;&amp;merge(layer,this._layerConfig[zlevel-.01],!0),virtual&amp;&amp;(layer.virtual=virtual),this.insertLayer(zlevel,layer),layer.initContext()),layer},CanvasPainter2.prototype.insertLayer=function(zlevel,layer){var layersMap=this._layers,zlevelList=this._zlevelList,len2=zlevelList.length,domRoot=this._domRoot,prevLayer=null,i=-1;if(!layersMap[zlevel]&amp;&amp;function isLayerValid(layer){return!!layer&amp;&amp;(!!layer.__builtin__||"function"==typeof layer.resize&amp;&amp;"function"==typeof layer.refresh)}(layer)){if(len2&gt;0&amp;&amp;zlevel&gt;zlevelList[0]){for(i=0;i&lt;len2-1&amp;&amp;!(zlevelList[i]&lt;zlevel&amp;&amp;zlevelList[i+1]&gt;zlevel);i++);prevLayer=layersMap[zlevelList[i]]}if(zlevelList.splice(i+1,0,zlevel),layersMap[zlevel]=layer,!layer.virtual)if(prevLayer){var prevDom=prevLayer.dom;prevDom.nextSibling?domRoot.insertBefore(layer.dom,prevDom.nextSibling):domRoot.appendChild(layer.dom)}else domRoot.firstChild?domRoot.insertBefore(layer.dom,domRoot.firstChild):domRoot.appendChild(layer.dom);layer.painter||(layer.painter=this)}},CanvasPainter2.prototype.eachLayer=function(cb,context){for(var zlevelList=this._zlevelList,i=0;i&lt;zlevelList.length;i++){var z=zlevelList[i];cb.call(context,this._layers[z],z)}},CanvasPainter2.prototype.eachBuiltinLayer=function(cb,context){for(var zlevelList=this._zlevelList,i=0;i&lt;zlevelList.length;i++){var z=zlevelList[i],layer=this._layers[z];layer.__builtin__&amp;&amp;cb.call(context,layer,z)}},CanvasPainter2.prototype.eachOtherLayer=function(cb,context){for(var zlevelList=this._zlevelList,i=0;i&lt;zlevelList.length;i++){var z=zlevelList[i],layer=this._layers[z];layer.__builtin__||cb.call(context,layer,z)}},CanvasPainter2.prototype.getLayers=function(){return this._layers},CanvasPainter2.prototype._updateLayerStatus=function(list){function updatePrevLayer(idx){prevLayer&amp;&amp;(prevLayer.__endIndex!==idx&amp;&amp;(prevLayer.__dirty=!0),prevLayer.__endIndex=idx)}if(this.eachBuiltinLayer(function(layer2,z){layer2.__dirty=layer2.__used=!1}),this._singleCanvas)for(var i_1=1;i_1&lt;list.length;i_1++){if((el=list[i_1]).zlevel!==list[i_1-1].zlevel||el.incremental){this._needsManuallyCompositing=!0;break}}var prevZlevel,i,prevLayer=null,incrementalLayerCount=0;for(i=0;i&lt;list.length;i++){var el,zlevel=(el=list[i]).zlevel,layer=void 0;prevZlevel!==zlevel&amp;&amp;(prevZlevel=zlevel,incrementalLayerCount=0),el.incremental?((layer=this.getLayer(zlevel+.001,this._needsManuallyCompositing)).incremental=!0,incrementalLayerCount=1):layer=this.getLayer(zlevel+(incrementalLayerCount&gt;0?.01:0),this._needsManuallyCompositing),layer.__builtin__||logError("ZLevel "+zlevel+" has been used by unkown layer "+layer.id),layer!==prevLayer&amp;&amp;(layer.__used=!0,layer.__startIndex!==i&amp;&amp;(layer.__dirty=!0),layer.__startIndex=i,layer.incremental?layer.__drawIndex=-1:layer.__drawIndex=i,updatePrevLayer(i),prevLayer=layer),1&amp;el.__dirty&amp;&amp;!el.__inHover&amp;&amp;(layer.__dirty=!0,layer.incremental&amp;&amp;layer.__drawIndex&lt;0&amp;&amp;(layer.__drawIndex=i))}updatePrevLayer(i),this.eachBuiltinLayer(function(layer2,z){!layer2.__used&amp;&amp;layer2.getElementCount()&gt;0&amp;&amp;(layer2.__dirty=!0,layer2.__startIndex=layer2.__endIndex=layer2.__drawIndex=0),layer2.__dirty&amp;&amp;layer2.__drawIndex&lt;0&amp;&amp;(layer2.__drawIndex=layer2.__startIndex)})},CanvasPainter2.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},CanvasPainter2.prototype._clearLayer=function(layer){layer.clear()},CanvasPainter2.prototype.setBackgroundColor=function(backgroundColor2){this._backgroundColor=backgroundColor2,each$f(this._layers,function(layer){layer.setUnpainted()})},CanvasPainter2.prototype.configLayer=function(zlevel,config){if(config){var layerConfig=this._layerConfig;layerConfig[zlevel]?merge(layerConfig[zlevel],config,!0):layerConfig[zlevel]=config;for(var i=0;i&lt;this._zlevelList.length;i++){var _zlevel=this._zlevelList[i];if(_zlevel===zlevel||_zlevel===zlevel+.01)merge(this._layers[_zlevel],layerConfig[zlevel],!0)}}},CanvasPainter2.prototype.delLayer=function(zlevel){var layers=this._layers,zlevelList=this._zlevelList,layer=layers[zlevel];layer&amp;&amp;(layer.dom.parentNode.removeChild(layer.dom),delete layers[zlevel],zlevelList.splice(indexOf(zlevelList,zlevel),1))},CanvasPainter2.prototype.resize=function(width,height){if(this._domRoot.style){var domRoot=this._domRoot;domRoot.style.display="none";var opts=this._opts,root=this.root;if(null!=width&amp;&amp;(opts.width=width),null!=height&amp;&amp;(opts.height=height),width=getSize$1(root,0,opts),height=getSize$1(root,1,opts),domRoot.style.display="",this._width!==width||height!==this._height){for(var id in domRoot.style.width=width+"px",domRoot.style.height=height+"px",this._layers)this._layers.hasOwnProperty(id)&amp;&amp;this._layers[id].resize(width,height);this.refresh(!0)}this._width=width,this._height=height}else{if(null==width||null==height)return;this._width=width,this._height=height,this.getLayer(314159).resize(width,height)}return this},CanvasPainter2.prototype.clearLayer=function(zlevel){var layer=this._layers[zlevel];layer&amp;&amp;layer.clear()},CanvasPainter2.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},CanvasPainter2.prototype.getRenderedCanvas=function(opts){if(opts=opts||{},this._singleCanvas&amp;&amp;!this._compositeManually)return this._layers[314159].dom;var imageLayer=new Layer("image",this,opts.pixelRatio||this.dpr);imageLayer.initContext(),imageLayer.clear(!1,opts.backgroundColor||this._backgroundColor);var ctx=imageLayer.ctx;if(opts.pixelRatio&lt;=this.dpr){this.refresh();var width_1=imageLayer.dom.width,height_1=imageLayer.dom.height;this.eachLayer(function(layer){layer.__builtin__?ctx.drawImage(layer.dom,0,0,width_1,height_1):layer.renderToCanvas&amp;&amp;(ctx.save(),layer.renderToCanvas(ctx),ctx.restore())})}else for(var scope={inHover:!1,viewWidth:this._width,viewHeight:this._height},displayList=this.storage.getDisplayList(!0),i=0,len2=displayList.length;i&lt;len2;i++){var el=displayList[i];brush$1(ctx,el,scope,i===len2-1)}return imageLayer.dom},CanvasPainter2.prototype.getWidth=function(){return this._width},CanvasPainter2.prototype.getHeight=function(){return this._height},CanvasPainter2}();function install$R(registers){registers.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(_super){function LineSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=LineSeriesModel2.type,_this.hasSymbolVisual=!0,_this}return __extends$1(LineSeriesModel2,_super),LineSeriesModel2.prototype.getInitialData=function(option){return createSeriesData(null,this,{useEncodeDefaulter:!0})},LineSeriesModel2.prototype.getLegendIcon=function(opt){var group=new Group$3,line=createSymbol$1("line",0,opt.itemHeight/2,opt.itemWidth,0,opt.lineStyle.stroke,!1);group.add(line),line.setStyle(opt.lineStyle);var visualType=this.getData().getVisual("symbol"),visualRotate=this.getData().getVisual("symbolRotate"),symbolType="none"===visualType?"circle":visualType,size=.8*opt.itemHeight,symbol=createSymbol$1(symbolType,(opt.itemWidth-size)/2,(opt.itemHeight-size)/2,size,size,opt.itemStyle.fill);group.add(symbol),symbol.setStyle(opt.itemStyle);var symbolRotate="inherit"===opt.iconRotate?visualRotate:opt.iconRotate||0;return symbol.rotation=symbolRotate*Math.PI/180,symbol.setOrigin([opt.itemWidth/2,opt.itemHeight/2]),symbolType.indexOf("empty")&gt;-1&amp;&amp;(symbol.style.stroke=symbol.style.fill,symbol.style.fill="#fff",symbol.style.lineWidth=2),group},LineSeriesModel2.type="series.line",LineSeriesModel2.dependencies=["grid","polar"],LineSeriesModel2.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},LineSeriesModel2}(SeriesModel);function getDefaultLabel(data,dataIndex){var labelDims=data.mapDimensionsAll("defaultedLabel"),len2=labelDims.length;if(1===len2){var rawVal=retrieveRawValue(data,dataIndex,labelDims[0]);return null!=rawVal?rawVal+"":null}if(len2){for(var vals=[],i=0;i&lt;labelDims.length;i++)vals.push(retrieveRawValue(data,dataIndex,labelDims[i]));return vals.join(" ")}}function getDefaultInterpolatedLabel(data,interpolatedValue){var labelDims=data.mapDimensionsAll("defaultedLabel");if(!isArray$1(interpolatedValue))return interpolatedValue+"";for(var vals=[],i=0;i&lt;labelDims.length;i++){var dimIndex=data.getDimensionIndex(labelDims[i]);dimIndex&gt;=0&amp;&amp;vals.push(interpolatedValue[dimIndex])}return vals.join(" ")}var Symbol$1=function(_super){function Symbol2(data,idx,seriesScope,opts){var _this=_super.call(this)||this;return _this.updateData(data,idx,seriesScope,opts),_this}return __extends$1(Symbol2,_super),Symbol2.prototype._createSymbol=function(symbolType,data,idx,symbolSize,keepAspect){this.removeAll();var symbolPath=createSymbol$1(symbolType,-1,-1,2,2,null,keepAspect);symbolPath.attr({z2:100,culling:!0,scaleX:symbolSize[0]/2,scaleY:symbolSize[1]/2}),symbolPath.drift=driftSymbol,this._symbolType=symbolType,this.add(symbolPath)},Symbol2.prototype.stopSymbolAnimation=function(toLastFrame){this.childAt(0).stopAnimation(null,toLastFrame)},Symbol2.prototype.getSymbolType=function(){return this._symbolType},Symbol2.prototype.getSymbolPath=function(){return this.childAt(0)},Symbol2.prototype.highlight=function(){enterEmphasis(this.childAt(0))},Symbol2.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},Symbol2.prototype.setZ=function(zlevel,z){var symbolPath=this.childAt(0);symbolPath.zlevel=zlevel,symbolPath.z=z},Symbol2.prototype.setDraggable=function(draggable,hasCursorOption){var symbolPath=this.childAt(0);symbolPath.draggable=draggable,symbolPath.cursor=!hasCursorOption&amp;&amp;draggable?"move":symbolPath.cursor},Symbol2.prototype.updateData=function(data,idx,seriesScope,opts){this.silent=!1;var symbolType=data.getItemVisual(idx,"symbol")||"circle",seriesModel=data.hostModel,symbolSize=Symbol2.getSymbolSize(data,idx),isInit=symbolType!==this._symbolType,disableAnimation=opts&amp;&amp;opts.disableAnimation;if(isInit){var keepAspect=data.getItemVisual(idx,"symbolKeepAspect");this._createSymbol(symbolType,data,idx,symbolSize,keepAspect)}else{(symbolPath=this.childAt(0)).silent=!1;var target={scaleX:symbolSize[0]/2,scaleY:symbolSize[1]/2};disableAnimation?symbolPath.attr(target):updateProps$1(symbolPath,target,seriesModel,idx),saveOldStyle(symbolPath)}if(this._updateCommon(data,idx,symbolSize,seriesScope,opts),isInit){var symbolPath=this.childAt(0);if(!disableAnimation){target={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:symbolPath.style.opacity}};symbolPath.scaleX=symbolPath.scaleY=0,symbolPath.style.opacity=0,initProps(symbolPath,target,seriesModel,idx)}}disableAnimation&amp;&amp;this.childAt(0).stopAnimation("leave")},Symbol2.prototype._updateCommon=function(data,idx,symbolSize,seriesScope,opts){var emphasisItemStyle,blurItemStyle,selectItemStyle,focus,blurScope,emphasisDisabled,labelStatesModels,hoverScale,cursorStyle,symbolPath=this.childAt(0),seriesModel=data.hostModel;if(seriesScope&amp;&amp;(emphasisItemStyle=seriesScope.emphasisItemStyle,blurItemStyle=seriesScope.blurItemStyle,selectItemStyle=seriesScope.selectItemStyle,focus=seriesScope.focus,blurScope=seriesScope.blurScope,labelStatesModels=seriesScope.labelStatesModels,hoverScale=seriesScope.hoverScale,cursorStyle=seriesScope.cursorStyle,emphasisDisabled=seriesScope.emphasisDisabled),!seriesScope||data.hasItemOption){var itemModel=seriesScope&amp;&amp;seriesScope.itemModel?seriesScope.itemModel:data.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis");emphasisItemStyle=emphasisModel.getModel("itemStyle").getItemStyle(),selectItemStyle=itemModel.getModel(["select","itemStyle"]).getItemStyle(),blurItemStyle=itemModel.getModel(["blur","itemStyle"]).getItemStyle(),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),emphasisDisabled=emphasisModel.get("disabled"),labelStatesModels=getLabelStatesModels(itemModel),hoverScale=emphasisModel.getShallow("scale"),cursorStyle=itemModel.getShallow("cursor")}var symbolRotate=data.getItemVisual(idx,"symbolRotate");symbolPath.attr("rotation",(symbolRotate||0)*Math.PI/180||0);var symbolOffset=normalizeSymbolOffset(data.getItemVisual(idx,"symbolOffset"),symbolSize);symbolOffset&amp;&amp;(symbolPath.x=symbolOffset[0],symbolPath.y=symbolOffset[1]),cursorStyle&amp;&amp;symbolPath.attr("cursor",cursorStyle);var symbolStyle=data.getItemVisual(idx,"style"),visualColor=symbolStyle.fill;if(symbolPath instanceof ZRImage){var pathStyle=symbolPath.style;symbolPath.useStyle(extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},symbolStyle))}else symbolPath.__isEmptyBrush?symbolPath.useStyle(extend({},symbolStyle)):symbolPath.useStyle(symbolStyle),symbolPath.style.decal=null,symbolPath.setColor(visualColor,opts&amp;&amp;opts.symbolInnerColor),symbolPath.style.strokeNoScale=!0;var liftZ=data.getItemVisual(idx,"liftZ"),z2Origin=this._z2;null!=liftZ?null==z2Origin&amp;&amp;(this._z2=symbolPath.z2,symbolPath.z2+=liftZ):null!=z2Origin&amp;&amp;(symbolPath.z2=z2Origin,this._z2=null);var useNameLabel=opts&amp;&amp;opts.useNameLabel;setLabelStyle(symbolPath,labelStatesModels,{labelFetcher:seriesModel,labelDataIndex:idx,defaultText:function getLabelDefaultText(idx2){return useNameLabel?data.getName(idx2):getDefaultLabel(data,idx2)},inheritColor:visualColor,defaultOpacity:symbolStyle.opacity}),this._sizeX=symbolSize[0]/2,this._sizeY=symbolSize[1]/2;var emphasisState=symbolPath.ensureState("emphasis");emphasisState.style=emphasisItemStyle,symbolPath.ensureState("select").style=selectItemStyle,symbolPath.ensureState("blur").style=blurItemStyle;var scaleRatio=null==hoverScale||!0===hoverScale?Math.max(1.1,3/this._sizeY):isFinite(hoverScale)&amp;&amp;hoverScale&gt;0?+hoverScale:1;emphasisState.scaleX=this._sizeX*scaleRatio,emphasisState.scaleY=this._sizeY*scaleRatio,this.setSymbolScale(1),toggleHoverEmphasis(this,focus,blurScope,emphasisDisabled)},Symbol2.prototype.setSymbolScale=function(scale2){this.scaleX=this.scaleY=scale2},Symbol2.prototype.fadeOut=function(cb,seriesModel,opt){var symbolPath=this.childAt(0),dataIndex=getECData(this).dataIndex,animationOpt=opt&amp;&amp;opt.animation;if(this.silent=symbolPath.silent=!0,opt&amp;&amp;opt.fadeLabel){var textContent=symbolPath.getTextContent();textContent&amp;&amp;removeElement(textContent,{style:{opacity:0}},seriesModel,{dataIndex:dataIndex,removeOpt:animationOpt,cb:function(){symbolPath.removeTextContent()}})}else symbolPath.removeTextContent();removeElement(symbolPath,{style:{opacity:0},scaleX:0,scaleY:0},seriesModel,{dataIndex:dataIndex,cb:cb,removeOpt:animationOpt})},Symbol2.getSymbolSize=function(data,idx){return normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"))},Symbol2}(Group$3);function driftSymbol(dx,dy){this.parent.drift(dx,dy)}function symbolNeedsDraw$1(data,point,idx,opt){return point&amp;&amp;!isNaN(point[0])&amp;&amp;!isNaN(point[1])&amp;&amp;!(opt.isIgnore&amp;&amp;opt.isIgnore(idx))&amp;&amp;!(opt.clipShape&amp;&amp;!opt.clipShape.contain(point[0],point[1]))&amp;&amp;"none"!==data.getItemVisual(idx,"symbol")}function normalizeUpdateOpt(opt){return null==opt||isObject$3(opt)||(opt={isIgnore:opt}),opt||{}}function makeSeriesScope$2(data){var seriesModel=data.hostModel,emphasisModel=seriesModel.getModel("emphasis");return{emphasisItemStyle:emphasisModel.getModel("itemStyle").getItemStyle(),blurItemStyle:seriesModel.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:seriesModel.getModel(["select","itemStyle"]).getItemStyle(),focus:emphasisModel.get("focus"),blurScope:emphasisModel.get("blurScope"),emphasisDisabled:emphasisModel.get("disabled"),hoverScale:emphasisModel.get("scale"),labelStatesModels:getLabelStatesModels(seriesModel),cursorStyle:seriesModel.get("cursor")}}var SymbolDraw=function(){function SymbolDraw2(SymbolCtor){this.group=new Group$3,this._SymbolCtor=SymbolCtor||Symbol$1}return SymbolDraw2.prototype.updateData=function(data,opt){this._progressiveEls=null,opt=normalizeUpdateOpt(opt);var group=this.group,seriesModel=data.hostModel,oldData=this._data,SymbolCtor=this._SymbolCtor,disableAnimation=opt.disableAnimation,seriesScope=makeSeriesScope$2(data),symbolUpdateOpt={disableAnimation:disableAnimation},getSymbolPoint=opt.getSymbolPoint||function(idx){return data.getItemLayout(idx)};oldData||group.removeAll(),data.diff(oldData).add(function(newIdx){var point=getSymbolPoint(newIdx);if(symbolNeedsDraw$1(data,point,newIdx,opt)){var symbolEl=new SymbolCtor(data,newIdx,seriesScope,symbolUpdateOpt);symbolEl.setPosition(point),data.setItemGraphicEl(newIdx,symbolEl),group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx),point=getSymbolPoint(newIdx);if(symbolNeedsDraw$1(data,point,newIdx,opt)){var newSymbolType=data.getItemVisual(newIdx,"symbol")||"circle",oldSymbolType=symbolEl&amp;&amp;symbolEl.getSymbolType&amp;&amp;symbolEl.getSymbolType();if(!symbolEl||oldSymbolType&amp;&amp;oldSymbolType!==newSymbolType)group.remove(symbolEl),(symbolEl=new SymbolCtor(data,newIdx,seriesScope,symbolUpdateOpt)).setPosition(point);else{symbolEl.updateData(data,newIdx,seriesScope,symbolUpdateOpt);var target={x:point[0],y:point[1]};disableAnimation?symbolEl.attr(target):updateProps$1(symbolEl,target,seriesModel)}group.add(symbolEl),data.setItemGraphicEl(newIdx,symbolEl)}else group.remove(symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&amp;&amp;el.fadeOut(function(){group.remove(el)},seriesModel)}).execute(),this._getSymbolPoint=getSymbolPoint,this._data=data},SymbolDraw2.prototype.updateLayout=function(){var _this=this,data=this._data;data&amp;&amp;data.eachItemGraphicEl(function(el,idx){var point=_this._getSymbolPoint(idx);el.setPosition(point),el.markRedraw()})},SymbolDraw2.prototype.incrementalPrepareUpdate=function(data){this._seriesScope=makeSeriesScope$2(data),this._data=null,this.group.removeAll()},SymbolDraw2.prototype.incrementalUpdate=function(taskParams,data,opt){function updateIncrementalAndHover(el2){el2.isGroup||(el2.incremental=!0,el2.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],opt=normalizeUpdateOpt(opt);for(var idx=taskParams.start;idx&lt;taskParams.end;idx++){var point=data.getItemLayout(idx);if(symbolNeedsDraw$1(data,point,idx,opt)){var el=new this._SymbolCtor(data,idx,this._seriesScope);el.traverse(updateIncrementalAndHover),el.setPosition(point),this.group.add(el),data.setItemGraphicEl(idx,el),this._progressiveEls.push(el)}}},SymbolDraw2.prototype.eachRendered=function(cb){traverseElements(this._progressiveEls||this.group,cb)},SymbolDraw2.prototype.remove=function(enableAnimation){var group=this.group,data=this._data;data&amp;&amp;enableAnimation?data.eachItemGraphicEl(function(el){el.fadeOut(function(){group.remove(el)},data.hostModel)}):group.removeAll()},SymbolDraw2}();function prepareDataCoordInfo(coordSys,data,valueOrigin){var baseAxis=coordSys.getBaseAxis(),valueAxis2=coordSys.getOtherAxis(baseAxis),valueStart=function getValueStart(valueAxis2,valueOrigin){var valueStart=0,extent3=valueAxis2.scale.getExtent();"start"===valueOrigin?valueStart=extent3[0]:"end"===valueOrigin?valueStart=extent3[1]:isNumber(valueOrigin)&amp;&amp;!isNaN(valueOrigin)?valueStart=valueOrigin:extent3[0]&gt;0?valueStart=extent3[0]:extent3[1]&lt;0&amp;&amp;(valueStart=extent3[1]);return valueStart}(valueAxis2,valueOrigin),baseAxisDim=baseAxis.dim,valueAxisDim=valueAxis2.dim,valueDim=data.mapDimension(valueAxisDim),baseDim=data.mapDimension(baseAxisDim),baseDataOffset="x"===valueAxisDim||"radius"===valueAxisDim?1:0,dims=map$1(coordSys.dimensions,function(coordDim){return data.mapDimension(coordDim)}),stacked=!1,stackResultDim=data.getCalculationInfo("stackResultDimension");return isDimensionStacked(data,dims[0])&amp;&amp;(stacked=!0,dims[0]=stackResultDim),isDimensionStacked(data,dims[1])&amp;&amp;(stacked=!0,dims[1]=stackResultDim),{dataDimsForPoint:dims,valueStart:valueStart,valueAxisDim:valueAxisDim,baseAxisDim:baseAxisDim,stacked:!!stacked,valueDim:valueDim,baseDim:baseDim,baseDataOffset:baseDataOffset,stackedOverDimension:data.getCalculationInfo("stackedOverDimension")}}function getStackedOnPoint(dataCoordInfo,coordSys,data,idx){var value=NaN;dataCoordInfo.stacked&amp;&amp;(value=data.get(data.getCalculationInfo("stackedOverDimension"),idx)),isNaN(value)&amp;&amp;(value=dataCoordInfo.valueStart);var baseDataOffset=dataCoordInfo.baseDataOffset,stackedData=[];return stackedData[baseDataOffset]=data.get(dataCoordInfo.baseDim,idx),stackedData[1-baseDataOffset]=value,coordSys.dataToPoint(stackedData)}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(x,y){return isNaN(x)||isNaN(y)}function drawSegment(ctx,points2,start2,segLen,allLen,dir3,smooth,smoothMonotone,connectNulls){for(var prevX,prevY,cpx0,cpy0,cpx1,cpy1,idx=start2,k=0;k&lt;segLen;k++){var x=points2[2*idx],y=points2[2*idx+1];if(idx&gt;=allLen||idx&lt;0)break;if(isPointNull$1(x,y)){if(connectNulls){idx+=dir3;continue}break}if(idx===start2)ctx[dir3&gt;0?"moveTo":"lineTo"](x,y),cpx0=x,cpy0=y;else{var dx=x-prevX,dy=y-prevY;if(dx*dx+dy*dy&lt;.5){idx+=dir3;continue}if(smooth&gt;0){for(var nextIdx=idx+dir3,nextX=points2[2*nextIdx],nextY=points2[2*nextIdx+1];nextX===x&amp;&amp;nextY===y&amp;&amp;k&lt;segLen;)k++,idx+=dir3,nextX=points2[2*(nextIdx+=dir3)],nextY=points2[2*nextIdx+1],dx=(x=points2[2*idx])-prevX,dy=(y=points2[2*idx+1])-prevY;var tmpK=k+1;if(connectNulls)for(;isPointNull$1(nextX,nextY)&amp;&amp;tmpK&lt;segLen;)tmpK++,nextX=points2[2*(nextIdx+=dir3)],nextY=points2[2*nextIdx+1];var ratioNextSeg=.5,vx=0,vy=0,nextCpx0=void 0,nextCpy0=void 0;if(tmpK&gt;=segLen||isPointNull$1(nextX,nextY))cpx1=x,cpy1=y;else{vx=nextX-prevX,vy=nextY-prevY;var dx0=x-prevX,dx1=nextX-x,dy0=y-prevY,dy1=nextY-y,lenPrevSeg=void 0,lenNextSeg=void 0;if("x"===smoothMonotone){var dir_1=vx&gt;0?1:-1;cpx1=x-dir_1*(lenPrevSeg=Math.abs(dx0))*smooth,cpy1=y,nextCpx0=x+dir_1*(lenNextSeg=Math.abs(dx1))*smooth,nextCpy0=y}else if("y"===smoothMonotone){var dir_2=vy&gt;0?1:-1;cpx1=x,cpy1=y-dir_2*(lenPrevSeg=Math.abs(dy0))*smooth,nextCpx0=x,nextCpy0=y+dir_2*(lenNextSeg=Math.abs(dy1))*smooth}else lenPrevSeg=Math.sqrt(dx0*dx0+dy0*dy0),cpx1=x-vx*smooth*(1-(ratioNextSeg=(lenNextSeg=Math.sqrt(dx1*dx1+dy1*dy1))/(lenNextSeg+lenPrevSeg))),cpy1=y-vy*smooth*(1-ratioNextSeg),nextCpy0=y+vy*smooth*ratioNextSeg,nextCpx0=mathMin$5(nextCpx0=x+vx*smooth*ratioNextSeg,mathMax$5(nextX,x)),nextCpy0=mathMin$5(nextCpy0,mathMax$5(nextY,y)),nextCpx0=mathMax$5(nextCpx0,mathMin$5(nextX,x)),cpy1=y-(vy=(nextCpy0=mathMax$5(nextCpy0,mathMin$5(nextY,y)))-y)*lenPrevSeg/lenNextSeg,cpx1=mathMin$5(cpx1=x-(vx=nextCpx0-x)*lenPrevSeg/lenNextSeg,mathMax$5(prevX,x)),cpy1=mathMin$5(cpy1,mathMax$5(prevY,y)),nextCpx0=x+(vx=x-(cpx1=mathMax$5(cpx1,mathMin$5(prevX,x))))*lenNextSeg/lenPrevSeg,nextCpy0=y+(vy=y-(cpy1=mathMax$5(cpy1,mathMin$5(prevY,y))))*lenNextSeg/lenPrevSeg}ctx.bezierCurveTo(cpx0,cpy0,cpx1,cpy1,x,y),cpx0=nextCpx0,cpy0=nextCpy0}else ctx.lineTo(x,y)}prevX=x,prevY=y,idx+=dir3}return k}var ECPolylineShape=function(){return function ECPolylineShape2(){this.smooth=0,this.smoothConstraint=!0}}(),ECPolyline=function(_super){function ECPolyline2(opts){var _this=_super.call(this,opts)||this;return _this.type="ec-polyline",_this}return __extends$1(ECPolyline2,_super),ECPolyline2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},ECPolyline2.prototype.getDefaultShape=function(){return new ECPolylineShape},ECPolyline2.prototype.buildPath=function(ctx,shape){var points2=shape.points,i=0,len2=points2.length/2;if(shape.connectNulls){for(;len2&gt;0&amp;&amp;isPointNull$1(points2[2*len2-2],points2[2*len2-1]);len2--);for(;i&lt;len2&amp;&amp;isPointNull$1(points2[2*i],points2[2*i+1]);i++);}for(;i&lt;len2;)i+=drawSegment(ctx,points2,i,len2,len2,1,shape.smooth,shape.smoothMonotone,shape.connectNulls)+1},ECPolyline2.prototype.getPointOn=function(xOrY,dim){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var x0,y0,data=this.path.data,CMD2=PathProxy.CMD,isDimX="x"===dim,roots2=[],i=0;i&lt;data.length;){var x=void 0,y=void 0,x2=void 0,y2=void 0,x3=void 0,y3=void 0,t=void 0;switch(data[i++]){case CMD2.M:x0=data[i++],y0=data[i++];break;case CMD2.L:if(x=data[i++],y=data[i++],(t=isDimX?(xOrY-x0)/(x-x0):(xOrY-y0)/(y-y0))&lt;=1&amp;&amp;t&gt;=0){var val=isDimX?(y-y0)*t+y0:(x-x0)*t+x0;return isDimX?[xOrY,val]:[val,xOrY]}x0=x,y0=y;break;case CMD2.C:x=data[i++],y=data[i++],x2=data[i++],y2=data[i++],x3=data[i++],y3=data[i++];var nRoot=isDimX?cubicRootAt(x0,x,x2,x3,xOrY,roots2):cubicRootAt(y0,y,y2,y3,xOrY,roots2);if(nRoot&gt;0)for(var i_1=0;i_1&lt;nRoot;i_1++){var t_1=roots2[i_1];if(t_1&lt;=1&amp;&amp;t_1&gt;=0){val=isDimX?cubicAt(y0,y,y2,y3,t_1):cubicAt(x0,x,x2,x3,t_1);return isDimX?[xOrY,val]:[val,xOrY]}}x0=x3,y0=y3}}},ECPolyline2}(Path),ECPolygonShape=function(_super){function ECPolygonShape2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(ECPolygonShape2,_super),ECPolygonShape2}(ECPolylineShape),ECPolygon=function(_super){function ECPolygon2(opts){var _this=_super.call(this,opts)||this;return _this.type="ec-polygon",_this}return __extends$1(ECPolygon2,_super),ECPolygon2.prototype.getDefaultShape=function(){return new ECPolygonShape},ECPolygon2.prototype.buildPath=function(ctx,shape){var points2=shape.points,stackedOnPoints=shape.stackedOnPoints,i=0,len2=points2.length/2,smoothMonotone=shape.smoothMonotone;if(shape.connectNulls){for(;len2&gt;0&amp;&amp;isPointNull$1(points2[2*len2-2],points2[2*len2-1]);len2--);for(;i&lt;len2&amp;&amp;isPointNull$1(points2[2*i],points2[2*i+1]);i++);}for(;i&lt;len2;){var k=drawSegment(ctx,points2,i,len2,len2,1,shape.smooth,smoothMonotone,shape.connectNulls);drawSegment(ctx,stackedOnPoints,i+k-1,k,len2,-1,shape.stackedOnSmooth,smoothMonotone,shape.connectNulls),i+=k+1,ctx.closePath()}},ECPolygon2}(Path);function createGridClipPath(cartesian,hasAnimation,seriesModel,done,during){var rect=cartesian.getArea(),x=rect.x,y=rect.y,width=rect.width,height=rect.height,lineWidth=seriesModel.get(["lineStyle","width"])||0;x-=lineWidth/2,y-=lineWidth/2,width+=lineWidth,height+=lineWidth,width=Math.ceil(width),x!==Math.floor(x)&amp;&amp;(x=Math.floor(x),width++);var clipPath=new Rect$2({shape:{x:x,y:y,width:width,height:height}});if(hasAnimation){var baseAxis=cartesian.getBaseAxis(),isHorizontal=baseAxis.isHorizontal(),isAxisInversed=baseAxis.inverse;isHorizontal?(isAxisInversed&amp;&amp;(clipPath.shape.x+=width),clipPath.shape.width=0):(isAxisInversed||(clipPath.shape.y+=height),clipPath.shape.height=0);var duringCb=isFunction(during)?function(percent){during(percent,clipPath)}:null;initProps(clipPath,{shape:{width:width,height:height,x:x,y:y}},seriesModel,null,done,duringCb)}return clipPath}function createPolarClipPath(polar,hasAnimation,seriesModel){var sectorArea=polar.getArea(),r0=round$3(sectorArea.r0,1),r=round$3(sectorArea.r,1),clipPath=new Sector({shape:{cx:round$3(polar.cx,1),cy:round$3(polar.cy,1),r0:r0,r:r,startAngle:sectorArea.startAngle,endAngle:sectorArea.endAngle,clockwise:sectorArea.clockwise}});hasAnimation&amp;&amp;("angle"===polar.getBaseAxis().dim?clipPath.shape.endAngle=sectorArea.startAngle:clipPath.shape.r=r0,initProps(clipPath,{shape:{endAngle:sectorArea.endAngle,r:r}},seriesModel));return clipPath}function createClipPath(coordSys,hasAnimation,seriesModel,done,during){return coordSys?"polar"===coordSys.type?createPolarClipPath(coordSys,hasAnimation,seriesModel):"cartesian2d"===coordSys.type?createGridClipPath(coordSys,hasAnimation,seriesModel,done,during):null:null}function isCoordinateSystemType(coordSys,type){return coordSys.type===type}function isPointsSame(points1,points2){if(points1.length===points2.length){for(var i=0;i&lt;points1.length;i++)if(points1[i]!==points2[i])return;return!0}}function bboxFromPoints(points2){for(var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i&lt;points2.length;){var x=points2[i++],y=points2[i++];isNaN(x)||(minX=Math.min(x,minX),maxX=Math.max(x,maxX)),isNaN(y)||(minY=Math.min(y,minY),maxY=Math.max(y,maxY))}return[[minX,minY],[maxX,maxY]]}function getBoundingDiff(points1,points2){var _a2=bboxFromPoints(points1),min1=_a2[0],max1=_a2[1],_b2=bboxFromPoints(points2),min22=_b2[0],max22=_b2[1];return Math.max(Math.abs(min1[0]-min22[0]),Math.abs(min1[1]-min22[1]),Math.abs(max1[0]-max22[0]),Math.abs(max1[1]-max22[1]))}function getSmooth(smooth){return isNumber(smooth)?smooth:smooth?.5:0}function turnPointsIntoStep(points2,basePoints,coordSys,stepTurnAt,connectNulls){var baseAxis=coordSys.getBaseAxis(),baseIndex="x"===baseAxis.dim||"radius"===baseAxis.dim?0:1,stepPoints=[],i=0,stepPt=[],pt=[],nextPt=[],filteredPoints=[];if(connectNulls){for(i=0;i&lt;points2.length;i+=2){var reference=basePoints||points2;isNaN(reference[i])||isNaN(reference[i+1])||filteredPoints.push(points2[i],points2[i+1])}points2=filteredPoints}for(i=0;i&lt;points2.length-2;i+=2)switch(nextPt[0]=points2[i+2],nextPt[1]=points2[i+3],pt[0]=points2[i],pt[1]=points2[i+1],stepPoints.push(pt[0],pt[1]),stepTurnAt){case"end":stepPt[baseIndex]=nextPt[baseIndex],stepPt[1-baseIndex]=pt[1-baseIndex],stepPoints.push(stepPt[0],stepPt[1]);break;case"middle":var middle=(pt[baseIndex]+nextPt[baseIndex])/2,stepPt2=[];stepPt[baseIndex]=stepPt2[baseIndex]=middle,stepPt[1-baseIndex]=pt[1-baseIndex],stepPt2[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt[0],stepPt[1]),stepPoints.push(stepPt2[0],stepPt2[1]);break;default:stepPt[baseIndex]=pt[baseIndex],stepPt[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt[0],stepPt[1])}return stepPoints.push(points2[i++],points2[i++]),stepPoints}function getVisualGradient(data,coordSys,api){var visualMetaList=data.getVisual("visualMeta");if(visualMetaList&amp;&amp;visualMetaList.length&amp;&amp;data.count()&amp;&amp;"cartesian2d"===coordSys.type){for(var coordDim,visualMeta,i=visualMetaList.length-1;i&gt;=0;i--){var dimInfo=data.getDimensionInfo(visualMetaList[i].dimension);if("x"===(coordDim=dimInfo&amp;&amp;dimInfo.coordDim)||"y"===coordDim){visualMeta=visualMetaList[i];break}}if(visualMeta){var axis=coordSys.getAxis(coordDim),colorStops=map$1(visualMeta.stops,function(stop2){return{coord:axis.toGlobalCoord(axis.dataToCoord(stop2.value)),color:stop2.color}}),stopLen=colorStops.length,outerColors=visualMeta.outerColors.slice();stopLen&amp;&amp;colorStops[0].coord&gt;colorStops[stopLen-1].coord&amp;&amp;(colorStops.reverse(),outerColors.reverse());var colorStopsInRange=function clipColorStops(colorStops,maxSize){var prevOutOfRangeColorStop,prevInRangeColorStop,newColorStops=[],len2=colorStops.length;function lerpStop(stop0,stop1,clippedCoord){var coord0=stop0.coord;return{coord:clippedCoord,color:lerp((clippedCoord-coord0)/(stop1.coord-coord0),[stop0.color,stop1.color])}}for(var i=0;i&lt;len2;i++){var stop_1=colorStops[i],coord=stop_1.coord;if(coord&lt;0)prevOutOfRangeColorStop=stop_1;else{if(coord&gt;maxSize){prevInRangeColorStop?newColorStops.push(lerpStop(prevInRangeColorStop,stop_1,maxSize)):prevOutOfRangeColorStop&amp;&amp;newColorStops.push(lerpStop(prevOutOfRangeColorStop,stop_1,0),lerpStop(prevOutOfRangeColorStop,stop_1,maxSize));break}prevOutOfRangeColorStop&amp;&amp;(newColorStops.push(lerpStop(prevOutOfRangeColorStop,stop_1,0)),prevOutOfRangeColorStop=null),newColorStops.push(stop_1),prevInRangeColorStop=stop_1}}return newColorStops}(colorStops,"x"===coordDim?api.getWidth():api.getHeight()),inRangeStopLen=colorStopsInRange.length;if(!inRangeStopLen&amp;&amp;stopLen)return colorStops[0].coord&lt;0?outerColors[1]?outerColors[1]:colorStops[stopLen-1].color:outerColors[0]?outerColors[0]:colorStops[0].color;var minCoord=colorStopsInRange[0].coord-10,maxCoord=colorStopsInRange[inRangeStopLen-1].coord+10,coordSpan=maxCoord-minCoord;if(coordSpan&lt;.001)return"transparent";each$f(colorStopsInRange,function(stop2){stop2.offset=(stop2.coord-minCoord)/coordSpan}),colorStopsInRange.push({offset:inRangeStopLen?colorStopsInRange[inRangeStopLen-1].offset:.5,color:outerColors[1]||"transparent"}),colorStopsInRange.unshift({offset:inRangeStopLen?colorStopsInRange[0].offset:.5,color:outerColors[0]||"transparent"});var gradient=new LinearGradient(0,0,0,0,colorStopsInRange,!0);return gradient[coordDim]=minCoord,gradient[coordDim+"2"]=maxCoord,gradient}}}function getIsIgnoreFunc(seriesModel,data,coordSys){var showAllSymbol=seriesModel.get("showAllSymbol"),isAuto="auto"===showAllSymbol;if(!showAllSymbol||isAuto){var categoryAxis2=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis2&amp;&amp;(!isAuto||!function canShowAllSymbolForCategory(categoryAxis2,data){var axisExtent=categoryAxis2.getExtent(),availSize=Math.abs(axisExtent[1]-axisExtent[0])/categoryAxis2.scale.count();isNaN(availSize)&amp;&amp;(availSize=0);for(var dataLen=data.count(),step=Math.max(1,Math.round(dataLen/5)),dataIndex=0;dataIndex&lt;dataLen;dataIndex+=step)if(1.5*Symbol$1.getSymbolSize(data,dataIndex)[categoryAxis2.isHorizontal()?1:0]&gt;availSize)return!1;return!0}(categoryAxis2,data))){var categoryDataDim=data.mapDimension(categoryAxis2.dim),labelMap={};return each$f(categoryAxis2.getViewLabels(),function(labelItem){var ordinalNumber=categoryAxis2.scale.getRawOrdinalNumber(labelItem.tickValue);labelMap[ordinalNumber]=1}),function(dataIndex){return!labelMap.hasOwnProperty(data.get(categoryDataDim,dataIndex))}}}}function isPointNull(x,y){return isNaN(x)||isNaN(y)}function getPointAtIndex(points2,idx){return[points2[2*idx],points2[2*idx+1]]}function anyStateShowEndLabel(seriesModel){if(seriesModel.get(["endLabel","show"]))return!0;for(var i=0;i&lt;SPECIAL_STATES.length;i++)if(seriesModel.get([SPECIAL_STATES[i],"endLabel","show"]))return!0;return!1}function createLineClipPath(lineView,coordSys,hasAnimation,seriesModel){if(isCoordinateSystemType(coordSys,"cartesian2d")){var endLabelModel_1=seriesModel.getModel("endLabel"),valueAnimation_1=endLabelModel_1.get("valueAnimation"),data_1=seriesModel.getData(),labelAnimationRecord_1={lastFrameIndex:0},during=anyStateShowEndLabel(seriesModel)?function(percent,clipRect){lineView._endLabelOnDuring(percent,clipRect,data_1,labelAnimationRecord_1,valueAnimation_1,endLabelModel_1,coordSys)}:null,isHorizontal=coordSys.getBaseAxis().isHorizontal(),clipPath=createGridClipPath(coordSys,hasAnimation,seriesModel,function(){var endLabel=lineView._endLabel;endLabel&amp;&amp;hasAnimation&amp;&amp;null!=labelAnimationRecord_1.originalX&amp;&amp;endLabel.attr({x:labelAnimationRecord_1.originalX,y:labelAnimationRecord_1.originalY})},during);if(!seriesModel.get("clip",!0)){var rectShape=clipPath.shape,expandSize=Math.max(rectShape.width,rectShape.height);isHorizontal?(rectShape.y-=expandSize,rectShape.height+=2*expandSize):(rectShape.x-=expandSize,rectShape.width+=2*expandSize)}return during&amp;&amp;during(1,clipPath),clipPath}return createPolarClipPath(coordSys,hasAnimation,seriesModel)}var LineView=function(_super){function LineView2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(LineView2,_super),LineView2.prototype.init=function(){var lineGroup=new Group$3,symbolDraw=new SymbolDraw;this.group.add(symbolDraw.group),this._symbolDraw=symbolDraw,this._lineGroup=lineGroup,this._changePolyState=bind$1(this._changePolyState,this)},LineView2.prototype.render=function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),lineStyleModel=seriesModel.getModel("lineStyle"),areaStyleModel=seriesModel.getModel("areaStyle"),points2=data.getLayout("points")||[],isCoordSysPolar="polar"===coordSys.type,prevCoordSys=this._coordSys,symbolDraw=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,lineGroup=this._lineGroup,hasAnimation=!ecModel.ssr&amp;&amp;seriesModel.get("animation"),isAreaChart=!areaStyleModel.isEmpty(),valueOrigin=areaStyleModel.get("origin"),dataCoordInfo=prepareDataCoordInfo(coordSys,data,valueOrigin),stackedOnPoints=isAreaChart&amp;&amp;function getStackedOnPoints(coordSys,data,dataCoordInfo){if(!dataCoordInfo.valueDim)return[];for(var len2=data.count(),points2=createFloat32Array(2*len2),idx=0;idx&lt;len2;idx++){var pt=getStackedOnPoint(dataCoordInfo,coordSys,data,idx);points2[2*idx]=pt[0],points2[2*idx+1]=pt[1]}return points2}(coordSys,data,dataCoordInfo),showSymbol=seriesModel.get("showSymbol"),connectNulls=seriesModel.get("connectNulls"),isIgnoreFunc=showSymbol&amp;&amp;!isCoordSysPolar&amp;&amp;getIsIgnoreFunc(seriesModel,data,coordSys),oldData=this._data;oldData&amp;&amp;oldData.eachItemGraphicEl(function(el,idx){el.__temp&amp;&amp;(group.remove(el),oldData.setItemGraphicEl(idx,null))}),showSymbol||symbolDraw.remove(),group.add(lineGroup);var clipShapeForSymbol,step=!isCoordSysPolar&amp;&amp;seriesModel.get("step");coordSys&amp;&amp;coordSys.getArea&amp;&amp;seriesModel.get("clip",!0)&amp;&amp;(null!=(clipShapeForSymbol=coordSys.getArea()).width?(clipShapeForSymbol.x-=.1,clipShapeForSymbol.y-=.1,clipShapeForSymbol.width+=.2,clipShapeForSymbol.height+=.2):clipShapeForSymbol.r0&amp;&amp;(clipShapeForSymbol.r0-=.5,clipShapeForSymbol.r+=.5)),this._clipShapeForSymbol=clipShapeForSymbol;var visualColor=getVisualGradient(data,coordSys,api)||data.getVisual("style")[data.getVisual("drawType")];if(polyline&amp;&amp;prevCoordSys.type===coordSys.type&amp;&amp;step===this._step){isAreaChart&amp;&amp;!polygon?polygon=this._newPolygon(points2,stackedOnPoints):polygon&amp;&amp;!isAreaChart&amp;&amp;(lineGroup.remove(polygon),polygon=this._polygon=null),isCoordSysPolar||this._initOrUpdateEndLabel(seriesModel,coordSys,convertToColorString(visualColor));var oldClipPath=lineGroup.getClipPath();if(oldClipPath)initProps(oldClipPath,{shape:createLineClipPath(this,coordSys,!1,seriesModel).shape},seriesModel);else lineGroup.setClipPath(createLineClipPath(this,coordSys,!0,seriesModel));showSymbol&amp;&amp;symbolDraw.updateData(data,{isIgnore:isIgnoreFunc,clipShape:clipShapeForSymbol,disableAnimation:!0,getSymbolPoint:function(idx){return[points2[2*idx],points2[2*idx+1]]}}),isPointsSame(this._stackedOnPoints,stackedOnPoints)&amp;&amp;isPointsSame(this._points,points2)||(hasAnimation?this._doUpdateAnimation(data,stackedOnPoints,coordSys,api,step,valueOrigin,connectNulls):(step&amp;&amp;(stackedOnPoints&amp;&amp;(stackedOnPoints=turnPointsIntoStep(stackedOnPoints,points2,coordSys,step,connectNulls)),points2=turnPointsIntoStep(points2,null,coordSys,step,connectNulls)),polyline.setShape({points:points2}),polygon&amp;&amp;polygon.setShape({points:points2,stackedOnPoints:stackedOnPoints})))}else showSymbol&amp;&amp;symbolDraw.updateData(data,{isIgnore:isIgnoreFunc,clipShape:clipShapeForSymbol,disableAnimation:!0,getSymbolPoint:function(idx){return[points2[2*idx],points2[2*idx+1]]}}),hasAnimation&amp;&amp;this._initSymbolLabelAnimation(data,coordSys,clipShapeForSymbol),step&amp;&amp;(stackedOnPoints&amp;&amp;(stackedOnPoints=turnPointsIntoStep(stackedOnPoints,points2,coordSys,step,connectNulls)),points2=turnPointsIntoStep(points2,null,coordSys,step,connectNulls)),polyline=this._newPolyline(points2),isAreaChart?polygon=this._newPolygon(points2,stackedOnPoints):polygon&amp;&amp;(lineGroup.remove(polygon),polygon=this._polygon=null),isCoordSysPolar||this._initOrUpdateEndLabel(seriesModel,coordSys,convertToColorString(visualColor)),lineGroup.setClipPath(createLineClipPath(this,coordSys,!0,seriesModel));var emphasisModel=seriesModel.getModel("emphasis"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),emphasisDisabled=emphasisModel.get("disabled");(polyline.useStyle(defaults(lineStyleModel.getLineStyle(),{fill:"none",stroke:visualColor,lineJoin:"bevel"})),setStatesStylesFromModel(polyline,seriesModel,"lineStyle"),polyline.style.lineWidth&gt;0&amp;&amp;"bolder"===seriesModel.get(["emphasis","lineStyle","width"]))&amp;&amp;(polyline.getState("emphasis").style.lineWidth=+polyline.style.lineWidth+1);getECData(polyline).seriesIndex=seriesModel.seriesIndex,toggleHoverEmphasis(polyline,focus,blurScope,emphasisDisabled);var smooth=getSmooth(seriesModel.get("smooth")),smoothMonotone=seriesModel.get("smoothMonotone");if(polyline.setShape({smooth:smooth,smoothMonotone:smoothMonotone,connectNulls:connectNulls}),polygon){var stackedOnSeries=data.getCalculationInfo("stackedOnSeries"),stackedOnSmooth=0;polygon.useStyle(defaults(areaStyleModel.getAreaStyle(),{fill:visualColor,opacity:.7,lineJoin:"bevel",decal:data.getVisual("style").decal})),stackedOnSeries&amp;&amp;(stackedOnSmooth=getSmooth(stackedOnSeries.get("smooth"))),polygon.setShape({smooth:smooth,stackedOnSmooth:stackedOnSmooth,smoothMonotone:smoothMonotone,connectNulls:connectNulls}),setStatesStylesFromModel(polygon,seriesModel,"areaStyle"),getECData(polygon).seriesIndex=seriesModel.seriesIndex,toggleHoverEmphasis(polygon,focus,blurScope,emphasisDisabled)}var changePolyState=this._changePolyState;data.eachItemGraphicEl(function(el){el&amp;&amp;(el.onHoverStateChange=changePolyState)}),this._polyline.onHoverStateChange=changePolyState,this._data=data,this._coordSys=coordSys,this._stackedOnPoints=stackedOnPoints,this._points=points2,this._step=step,this._valueOrigin=valueOrigin,seriesModel.get("triggerLineEvent")&amp;&amp;(this.packEventData(seriesModel,polyline),polygon&amp;&amp;this.packEventData(seriesModel,polygon))},LineView2.prototype.packEventData=function(seriesModel,el){getECData(el).eventData={componentType:"series",componentSubType:"line",componentIndex:seriesModel.componentIndex,seriesIndex:seriesModel.seriesIndex,seriesName:seriesModel.name,seriesType:"line"}},LineView2.prototype.highlight=function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(),dataIndex=queryDataIndex(data,payload);if(this._changePolyState("emphasis"),!(dataIndex instanceof Array)&amp;&amp;null!=dataIndex&amp;&amp;dataIndex&gt;=0){var points2=data.getLayout("points"),symbol=data.getItemGraphicEl(dataIndex);if(!symbol){var x=points2[2*dataIndex],y=points2[2*dataIndex+1];if(isNaN(x)||isNaN(y))return;if(this._clipShapeForSymbol&amp;&amp;!this._clipShapeForSymbol.contain(x,y))return;var zlevel=seriesModel.get("zlevel")||0,z=seriesModel.get("z")||0;(symbol=new Symbol$1(data,dataIndex)).x=x,symbol.y=y,symbol.setZ(zlevel,z);var symbolLabel=symbol.getSymbolPath().getTextContent();symbolLabel&amp;&amp;(symbolLabel.zlevel=zlevel,symbolLabel.z=z,symbolLabel.z2=this._polyline.z2+1),symbol.__temp=!0,data.setItemGraphicEl(dataIndex,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else ChartView.prototype.highlight.call(this,seriesModel,ecModel,api,payload)},LineView2.prototype.downplay=function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(),dataIndex=queryDataIndex(data,payload);if(this._changePolyState("normal"),null!=dataIndex&amp;&amp;dataIndex&gt;=0){var symbol=data.getItemGraphicEl(dataIndex);symbol&amp;&amp;(symbol.__temp?(data.setItemGraphicEl(dataIndex,null),this.group.remove(symbol)):symbol.downplay())}else ChartView.prototype.downplay.call(this,seriesModel,ecModel,api,payload)},LineView2.prototype._changePolyState=function(toState){var polygon=this._polygon;setStatesFlag(this._polyline,toState),polygon&amp;&amp;setStatesFlag(polygon,toState)},LineView2.prototype._newPolyline=function(points2){var polyline=this._polyline;return polyline&amp;&amp;this._lineGroup.remove(polyline),polyline=new ECPolyline({shape:{points:points2},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},LineView2.prototype._newPolygon=function(points2,stackedOnPoints){var polygon=this._polygon;return polygon&amp;&amp;this._lineGroup.remove(polygon),polygon=new ECPolygon({shape:{points:points2,stackedOnPoints:stackedOnPoints},segmentIgnoreThreshold:2}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},LineView2.prototype._initSymbolLabelAnimation=function(data,coordSys,clipShape){var isHorizontalOrRadial,isCoordSysPolar,baseAxis=coordSys.getBaseAxis(),isAxisInverse=baseAxis.inverse;"cartesian2d"===coordSys.type?(isHorizontalOrRadial=baseAxis.isHorizontal(),isCoordSysPolar=!1):"polar"===coordSys.type&amp;&amp;(isHorizontalOrRadial="angle"===baseAxis.dim,isCoordSysPolar=!0);var seriesModel=data.hostModel,seriesDuration=seriesModel.get("animationDuration");isFunction(seriesDuration)&amp;&amp;(seriesDuration=seriesDuration(null));var seriesDelay=seriesModel.get("animationDelay")||0,seriesDelayValue=isFunction(seriesDelay)?seriesDelay(null):seriesDelay;data.eachItemGraphicEl(function(symbol,idx){var el=symbol;if(el){var point=[symbol.x,symbol.y],start2=void 0,end2=void 0,current=void 0;if(clipShape)if(isCoordSysPolar){var polarClip=clipShape,coord=coordSys.pointToCoord(point);isHorizontalOrRadial?(start2=polarClip.startAngle,end2=polarClip.endAngle,current=-coord[1]/180*Math.PI):(start2=polarClip.r0,end2=polarClip.r,current=coord[0])}else{var gridClip=clipShape;isHorizontalOrRadial?(start2=gridClip.x,end2=gridClip.x+gridClip.width,current=symbol.x):(start2=gridClip.y+gridClip.height,end2=gridClip.y,current=symbol.y)}var ratio=end2===start2?0:(current-start2)/(end2-start2);isAxisInverse&amp;&amp;(ratio=1-ratio);var delay=isFunction(seriesDelay)?seriesDelay(idx):seriesDuration*ratio+seriesDelayValue,symbolPath=el.getSymbolPath(),text=symbolPath.getTextContent();el.attr({scaleX:0,scaleY:0}),el.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:delay}),text&amp;&amp;text.animateFrom({style:{opacity:0}},{duration:300,delay:delay}),symbolPath.disableLabelAnimation=!0}})},LineView2.prototype._initOrUpdateEndLabel=function(seriesModel,coordSys,inheritColor){var endLabelModel=seriesModel.getModel("endLabel");if(anyStateShowEndLabel(seriesModel)){var data_2=seriesModel.getData(),polyline=this._polyline,points2=data_2.getLayout("points");if(!points2)return polyline.removeTextContent(),void(this._endLabel=null);var endLabel=this._endLabel;endLabel||((endLabel=this._endLabel=new ZRText({z2:200})).ignoreClip=!0,polyline.setTextContent(this._endLabel),polyline.disableLabelAnimation=!0);var dataIndex=function getLastIndexNotNull(points2){for(var len2=points2.length/2;len2&gt;0&amp;&amp;isPointNull(points2[2*len2-2],points2[2*len2-1]);len2--);return len2-1}(points2);dataIndex&gt;=0&amp;&amp;(setLabelStyle(polyline,getLabelStatesModels(seriesModel,"endLabel"),{inheritColor:inheritColor,labelFetcher:seriesModel,labelDataIndex:dataIndex,defaultText:function(dataIndex2,opt,interpolatedValue){return null!=interpolatedValue?getDefaultInterpolatedLabel(data_2,interpolatedValue):getDefaultLabel(data_2,dataIndex2)},enableTextSetter:!0},function getEndLabelStateSpecified(endLabelModel,coordSys){var baseAxis=coordSys.getBaseAxis(),isHorizontal=baseAxis.isHorizontal(),isBaseInversed=baseAxis.inverse,align=isHorizontal?isBaseInversed?"right":"left":"center",verticalAlign=isHorizontal?"middle":isBaseInversed?"top":"bottom";return{normal:{align:endLabelModel.get("align")||align,verticalAlign:endLabelModel.get("verticalAlign")||verticalAlign}}}(endLabelModel,coordSys)),polyline.textConfig.position=null)}else this._endLabel&amp;&amp;(this._polyline.removeTextContent(),this._endLabel=null)},LineView2.prototype._endLabelOnDuring=function(percent,clipRect,data,animationRecord,valueAnimation,endLabelModel,coordSys){var endLabel=this._endLabel,polyline=this._polyline;if(endLabel){percent&lt;1&amp;&amp;null==animationRecord.originalX&amp;&amp;(animationRecord.originalX=endLabel.x,animationRecord.originalY=endLabel.y);var points2=data.getLayout("points"),seriesModel=data.hostModel,connectNulls=seriesModel.get("connectNulls"),precision=endLabelModel.get("precision"),distance2=endLabelModel.get("distance")||0,baseAxis=coordSys.getBaseAxis(),isHorizontal=baseAxis.isHorizontal(),isBaseInversed=baseAxis.inverse,clipShape=clipRect.shape,xOrY=isBaseInversed?isHorizontal?clipShape.x:clipShape.y+clipShape.height:isHorizontal?clipShape.x+clipShape.width:clipShape.y,distanceX=(isHorizontal?distance2:0)*(isBaseInversed?-1:1),distanceY=(isHorizontal?0:-distance2)*(isBaseInversed?-1:1),dim=isHorizontal?"x":"y",dataIndexRange=function getIndexRange(points2,xOrY,dim){for(var a,b,len2=points2.length/2,dimIdx="x"===dim?0:1,prevIndex=0,nextIndex=-1,i=0;i&lt;len2;i++)if(b=points2[2*i+dimIdx],!isNaN(b)&amp;&amp;!isNaN(points2[2*i+1-dimIdx]))if(0!==i){if(a&lt;=xOrY&amp;&amp;b&gt;=xOrY||a&gt;=xOrY&amp;&amp;b&lt;=xOrY){nextIndex=i;break}prevIndex=i,a=b}else a=b;return{range:[prevIndex,nextIndex],t:(xOrY-a)/(b-a)}}(points2,xOrY,dim),indices=dataIndexRange.range,diff=indices[1]-indices[0],value=void 0;if(diff&gt;=1){if(diff&gt;1&amp;&amp;!connectNulls){var pt=getPointAtIndex(points2,indices[0]);endLabel.attr({x:pt[0]+distanceX,y:pt[1]+distanceY}),valueAnimation&amp;&amp;(value=seriesModel.getRawValue(indices[0]))}else{(pt=polyline.getPointOn(xOrY,dim))&amp;&amp;endLabel.attr({x:pt[0]+distanceX,y:pt[1]+distanceY});var startValue=seriesModel.getRawValue(indices[0]),endValue=seriesModel.getRawValue(indices[1]);valueAnimation&amp;&amp;(value=interpolateRawValues(data,precision,startValue,endValue,dataIndexRange.t))}animationRecord.lastFrameIndex=indices[0]}else{var idx=1===percent||animationRecord.lastFrameIndex&gt;0?indices[0]:0;pt=getPointAtIndex(points2,idx);valueAnimation&amp;&amp;(value=seriesModel.getRawValue(idx)),endLabel.attr({x:pt[0]+distanceX,y:pt[1]+distanceY})}if(valueAnimation){var inner2=labelInner(endLabel);"function"==typeof inner2.setLabelText&amp;&amp;inner2.setLabelText(value)}}},LineView2.prototype._doUpdateAnimation=function(data,stackedOnPoints,coordSys,api,step,valueOrigin,connectNulls){var polyline=this._polyline,polygon=this._polygon,seriesModel=data.hostModel,diff=function lineAnimationDiff(oldData,newData,oldStackedOnPoints,newStackedOnPoints,oldCoordSys,newCoordSys,oldValueOrigin,newValueOrigin){for(var diff=function diffData(oldData,newData){var diffResult=[];return newData.diff(oldData).add(function(idx){diffResult.push({cmd:"+",idx:idx})}).update(function(newIdx,oldIdx){diffResult.push({cmd:"=",idx:oldIdx,idx1:newIdx})}).remove(function(idx){diffResult.push({cmd:"-",idx:idx})}).execute(),diffResult}(oldData,newData),currPoints=[],nextPoints=[],currStackedPoints=[],nextStackedPoints=[],status=[],sortedIndices=[],rawIndices=[],newDataOldCoordInfo=prepareDataCoordInfo(oldCoordSys,newData,oldValueOrigin),oldPoints=oldData.getLayout("points")||[],newPoints=newData.getLayout("points")||[],i=0;i&lt;diff.length;i++){var diffItem=diff[i],pointAdded=!0,oldIdx2=void 0,newIdx2=void 0;switch(diffItem.cmd){case"=":oldIdx2=2*diffItem.idx,newIdx2=2*diffItem.idx1;var currentX=oldPoints[oldIdx2],currentY=oldPoints[oldIdx2+1],nextX=newPoints[newIdx2],nextY=newPoints[newIdx2+1];(isNaN(currentX)||isNaN(currentY))&amp;&amp;(currentX=nextX,currentY=nextY),currPoints.push(currentX,currentY),nextPoints.push(nextX,nextY),currStackedPoints.push(oldStackedOnPoints[oldIdx2],oldStackedOnPoints[oldIdx2+1]),nextStackedPoints.push(newStackedOnPoints[newIdx2],newStackedOnPoints[newIdx2+1]),rawIndices.push(newData.getRawIndex(diffItem.idx1));break;case"+":var newIdx=diffItem.idx,newDataDimsForPoint=newDataOldCoordInfo.dataDimsForPoint,oldPt=oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0],newIdx),newData.get(newDataDimsForPoint[1],newIdx)]);newIdx2=2*newIdx,currPoints.push(oldPt[0],oldPt[1]),nextPoints.push(newPoints[newIdx2],newPoints[newIdx2+1]);var stackedOnPoint=getStackedOnPoint(newDataOldCoordInfo,oldCoordSys,newData,newIdx);currStackedPoints.push(stackedOnPoint[0],stackedOnPoint[1]),nextStackedPoints.push(newStackedOnPoints[newIdx2],newStackedOnPoints[newIdx2+1]),rawIndices.push(newData.getRawIndex(newIdx));break;case"-":pointAdded=!1}pointAdded&amp;&amp;(status.push(diffItem),sortedIndices.push(sortedIndices.length))}sortedIndices.sort(function(a,b){return rawIndices[a]-rawIndices[b]});var len2=currPoints.length,sortedCurrPoints=createFloat32Array(len2),sortedNextPoints=createFloat32Array(len2),sortedCurrStackedPoints=createFloat32Array(len2),sortedNextStackedPoints=createFloat32Array(len2),sortedStatus=[];for(i=0;i&lt;sortedIndices.length;i++){var idx=sortedIndices[i],i2=2*i,idx2=2*idx;sortedCurrPoints[i2]=currPoints[idx2],sortedCurrPoints[i2+1]=currPoints[idx2+1],sortedNextPoints[i2]=nextPoints[idx2],sortedNextPoints[i2+1]=nextPoints[idx2+1],sortedCurrStackedPoints[i2]=currStackedPoints[idx2],sortedCurrStackedPoints[i2+1]=currStackedPoints[idx2+1],sortedNextStackedPoints[i2]=nextStackedPoints[idx2],sortedNextStackedPoints[i2+1]=nextStackedPoints[idx2+1],sortedStatus[i]=status[idx]}return{current:sortedCurrPoints,next:sortedNextPoints,stackedOnCurrent:sortedCurrStackedPoints,stackedOnNext:sortedNextStackedPoints,status:sortedStatus}}(this._data,data,this._stackedOnPoints,stackedOnPoints,this._coordSys,0,this._valueOrigin),current=diff.current,stackedOnCurrent=diff.stackedOnCurrent,next=diff.next,stackedOnNext=diff.stackedOnNext;if(step&amp;&amp;(stackedOnCurrent=turnPointsIntoStep(diff.stackedOnCurrent,diff.current,coordSys,step,connectNulls),current=turnPointsIntoStep(diff.current,null,coordSys,step,connectNulls),stackedOnNext=turnPointsIntoStep(diff.stackedOnNext,diff.next,coordSys,step,connectNulls),next=turnPointsIntoStep(diff.next,null,coordSys,step,connectNulls)),getBoundingDiff(current,next)&gt;3e3||polygon&amp;&amp;getBoundingDiff(stackedOnCurrent,stackedOnNext)&gt;3e3)return polyline.stopAnimation(),polyline.setShape({points:next}),void(polygon&amp;&amp;(polygon.stopAnimation(),polygon.setShape({points:next,stackedOnPoints:stackedOnNext})));polyline.shape.__points=diff.current,polyline.shape.points=current;var target={shape:{points:next}};diff.current!==current&amp;&amp;(target.shape.__points=diff.next),polyline.stopAnimation(),updateProps$1(polyline,target,seriesModel),polygon&amp;&amp;(polygon.setShape({points:current,stackedOnPoints:stackedOnCurrent}),polygon.stopAnimation(),updateProps$1(polygon,{shape:{stackedOnPoints:stackedOnNext}},seriesModel),polyline.shape.points!==polygon.shape.points&amp;&amp;(polygon.shape.points=polyline.shape.points));for(var updatedDataInfo=[],diffStatus=diff.status,i=0;i&lt;diffStatus.length;i++){if("="===diffStatus[i].cmd){var el=data.getItemGraphicEl(diffStatus[i].idx1);el&amp;&amp;updatedDataInfo.push({el:el,ptIdx:i})}}polyline.animators&amp;&amp;polyline.animators.length&amp;&amp;polyline.animators[0].during(function(){polygon&amp;&amp;polygon.dirtyShape();for(var points2=polyline.shape.__points,i2=0;i2&lt;updatedDataInfo.length;i2++){var el2=updatedDataInfo[i2].el,offset=2*updatedDataInfo[i2].ptIdx;el2.x=points2[offset],el2.y=points2[offset+1],el2.markRedraw()}})},LineView2.prototype.remove=function(ecModel){var group=this.group,oldData=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),oldData&amp;&amp;oldData.eachItemGraphicEl(function(el,idx){el.__temp&amp;&amp;(group.remove(el),oldData.setItemGraphicEl(idx,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},LineView2.type="line",LineView2}(ChartView);function pointsLayout(seriesType2,forceStoreInTypedArray){return{seriesType:seriesType2,plan:createRenderPlanner(),reset:function(seriesModel){var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem,pipelineContext=seriesModel.pipelineContext,useTypedArray=forceStoreInTypedArray||pipelineContext.large;if(coordSys){var dims=map$1(coordSys.dimensions,function(dim){return data.mapDimension(dim)}).slice(0,2),dimLen=dims.length,stackResultDim=data.getCalculationInfo("stackResultDimension");isDimensionStacked(data,dims[0])&amp;&amp;(dims[0]=stackResultDim),isDimensionStacked(data,dims[1])&amp;&amp;(dims[1]=stackResultDim);var store=data.getStore(),dimIdx0=data.getDimensionIndex(dims[0]),dimIdx1=data.getDimensionIndex(dims[1]);return dimLen&amp;&amp;{progress:function(params,data2){for(var segCount=params.end-params.start,points2=useTypedArray&amp;&amp;createFloat32Array(segCount*dimLen),tmpIn=[],tmpOut=[],i=params.start,offset=0;i&lt;params.end;i++){var point=void 0;if(1===dimLen){var x=store.get(dimIdx0,i);point=coordSys.dataToPoint(x,null,tmpOut)}else tmpIn[0]=store.get(dimIdx0,i),tmpIn[1]=store.get(dimIdx1,i),point=coordSys.dataToPoint(tmpIn,null,tmpOut);useTypedArray?(points2[offset++]=point[0],points2[offset++]=point[1]):data2.setItemLayout(i,point.slice())}useTypedArray&amp;&amp;data2.setLayout("points",points2)}}}}}}var samplers={average:function(frame){for(var sum2=0,count2=0,i=0;i&lt;frame.length;i++)isNaN(frame[i])||(sum2+=frame[i],count2++);return 0===count2?NaN:sum2/count2},sum:function(frame){for(var sum2=0,i=0;i&lt;frame.length;i++)sum2+=frame[i]||0;return sum2},max:function(frame){for(var max3=-1/0,i=0;i&lt;frame.length;i++)frame[i]&gt;max3&amp;&amp;(max3=frame[i]);return isFinite(max3)?max3:NaN},min:function(frame){for(var min3=1/0,i=0;i&lt;frame.length;i++)frame[i]&lt;min3&amp;&amp;(min3=frame[i]);return isFinite(min3)?min3:NaN},nearest:function(frame){return frame[0]}},indexSampler=function(frame){return Math.round(frame.length/2)};function dataSample(seriesType2){return{seriesType:seriesType2,reset:function(seriesModel,ecModel,api){var data=seriesModel.getData(),sampling=seriesModel.get("sampling"),coordSys=seriesModel.coordinateSystem,count2=data.count();if(count2&gt;10&amp;&amp;"cartesian2d"===coordSys.type&amp;&amp;sampling){var baseAxis=coordSys.getBaseAxis(),valueAxis2=coordSys.getOtherAxis(baseAxis),extent3=baseAxis.getExtent(),dpr2=api.getDevicePixelRatio(),size=Math.abs(extent3[1]-extent3[0])*(dpr2||1),rate=Math.round(count2/size);if(isFinite(rate)&amp;&amp;rate&gt;1){"lttb"===sampling?seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis2.dim),1/rate)):"minmax"===sampling&amp;&amp;seriesModel.setData(data.minmaxDownSample(data.mapDimension(valueAxis2.dim),1/rate));var sampler=void 0;isString(sampling)?sampler=samplers[sampling]:isFunction(sampling)&amp;&amp;(sampler=sampling),sampler&amp;&amp;seriesModel.setData(data.downSample(data.mapDimension(valueAxis2.dim),1/rate,sampler,indexSampler))}}}}}function install$Q(registers){registers.registerChartView(LineView),registers.registerSeriesModel(LineSeriesModel),registers.registerLayout(pointsLayout("line",!0)),registers.registerVisual({seriesType:"line",reset:function(seriesModel){var data=seriesModel.getData(),lineStyle=seriesModel.getModel("lineStyle").getLineStyle();lineStyle&amp;&amp;!lineStyle.stroke&amp;&amp;(lineStyle.stroke=data.getVisual("style").fill),data.setVisual("legendLineStyle",lineStyle)}}),registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(_super){function BaseBarSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=BaseBarSeriesModel2.type,_this}return __extends$1(BaseBarSeriesModel2,_super),BaseBarSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesData(null,this,{useEncodeDefaulter:!0})},BaseBarSeriesModel2.prototype.getMarkerPosition=function(value,dims,startingAtTick){var coordSys=this.coordinateSystem;if(coordSys&amp;&amp;coordSys.clampData){var clampData_1=coordSys.clampData(value),pt_1=coordSys.dataToPoint(clampData_1);if(startingAtTick)each$f(coordSys.getAxes(),function(axis,idx){if("category"===axis.type&amp;&amp;null!=dims){var tickCoords=axis.getTicksCoords(),alignTicksWithLabel=axis.getTickModel().get("alignWithLabel"),targetTickId=clampData_1[idx],isEnd="x1"===dims[idx]||"y1"===dims[idx];if(isEnd&amp;&amp;!alignTicksWithLabel&amp;&amp;(targetTickId+=1),tickCoords.length&lt;2)return;if(2===tickCoords.length)return void(pt_1[idx]=axis.toGlobalCoord(axis.getExtent()[isEnd?1:0]));for(var leftCoord=void 0,coord=void 0,stepTickValue=1,i=0;i&lt;tickCoords.length;i++){var tickCoord=tickCoords[i].coord,tickValue=i===tickCoords.length-1?tickCoords[i-1].tickValue+stepTickValue:tickCoords[i].tickValue;if(tickValue===targetTickId){coord=tickCoord;break}if(tickValue&lt;targetTickId)leftCoord=tickCoord;else if(null!=leftCoord&amp;&amp;tickValue&gt;targetTickId){coord=(tickCoord+leftCoord)/2;break}1===i&amp;&amp;(stepTickValue=tickValue-tickCoords[0].tickValue)}null==coord&amp;&amp;(leftCoord?leftCoord&amp;&amp;(coord=tickCoords[tickCoords.length-1].coord):coord=tickCoords[0].coord),pt_1[idx]=axis.toGlobalCoord(coord)}});else{var data=this.getData(),offset=data.getLayout("offset"),size=data.getLayout("size"),offsetIndex=coordSys.getBaseAxis().isHorizontal()?0:1;pt_1[offsetIndex]+=offset+size/2}return pt_1}return[NaN,NaN]},BaseBarSeriesModel2.type="series.__base_bar__",BaseBarSeriesModel2.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},BaseBarSeriesModel2}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(_super){function BarSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=BarSeriesModel2.type,_this}return __extends$1(BarSeriesModel2,_super),BarSeriesModel2.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},BarSeriesModel2.prototype.getProgressive=function(){return!!this.get("large")&amp;&amp;this.get("progressive")},BarSeriesModel2.prototype.getProgressiveThreshold=function(){var progressiveThreshold=this.get("progressiveThreshold"),largeThreshold=this.get("largeThreshold");return largeThreshold&gt;progressiveThreshold&amp;&amp;(progressiveThreshold=largeThreshold),progressiveThreshold},BarSeriesModel2.prototype.brushSelector=function(dataIndex,data,selectors){return selectors.rect(data.getItemLayout(dataIndex))},BarSeriesModel2.type="series.bar",BarSeriesModel2.dependencies=["grid","polar"],BarSeriesModel2.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),BarSeriesModel2}(BaseBarSeriesModel),SausageShape=function(){return function SausageShape2(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}}(),SausagePath=function(_super){function SausagePath2(opts){var _this=_super.call(this,opts)||this;return _this.type="sausage",_this}return __extends$1(SausagePath2,_super),SausagePath2.prototype.getDefaultShape=function(){return new SausageShape},SausagePath2.prototype.buildPath=function(ctx,shape){var cx=shape.cx,cy=shape.cy,r0=Math.max(shape.r0||0,0),r=Math.max(shape.r,0),dr=.5*(r-r0),rCenter=r0+dr,startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,PI22=2*Math.PI,lessThanCircle=clockwise?endAngle-startAngle&lt;PI22:startAngle-endAngle&lt;PI22;lessThanCircle||(startAngle=endAngle-(clockwise?PI22:-PI22));var unitStartX=Math.cos(startAngle),unitStartY=Math.sin(startAngle),unitEndX=Math.cos(endAngle),unitEndY=Math.sin(endAngle);lessThanCircle?(ctx.moveTo(unitStartX*r0+cx,unitStartY*r0+cy),ctx.arc(unitStartX*rCenter+cx,unitStartY*rCenter+cy,dr,-Math.PI+startAngle,startAngle,!clockwise)):ctx.moveTo(unitStartX*r+cx,unitStartY*r+cy),ctx.arc(cx,cy,r,startAngle,endAngle,!clockwise),ctx.arc(unitEndX*rCenter+cx,unitEndY*rCenter+cy,dr,endAngle-2*Math.PI,endAngle-Math.PI,!clockwise),0!==r0&amp;&amp;ctx.arc(cx,cy,r0,endAngle,startAngle,clockwise)},SausagePath2}(Path);function adjustAngleDistanceX(angle,distance2,isEnd){return distance2*Math.sin(angle)*(isEnd?-1:1)}function adjustAngleDistanceY(angle,distance2,isEnd){return distance2*Math.cos(angle)*(isEnd?1:-1)}function getSectorCornerRadius(model,shape,zeroIfNull){var cornerRadius=model.get("borderRadius");if(null==cornerRadius)return zeroIfNull?{cornerRadius:0}:null;isArray$1(cornerRadius)||(cornerRadius=[cornerRadius,cornerRadius,cornerRadius,cornerRadius]);var dr=Math.abs(shape.r||0-shape.r0||0);return{cornerRadius:map$1(cornerRadius,function(cr){return parsePercent$1(cr,dr)})}}var mathMax$4=Math.max,mathMin$4=Math.min;var BarView=function(_super){function BarView2(){var _this=_super.call(this)||this;return _this.type=BarView2.type,_this._isFirstFrame=!0,_this}return __extends$1(BarView2,_super),BarView2.prototype.render=function(seriesModel,ecModel,api,payload){this._model=seriesModel,this._removeOnRenderedListener(api),this._updateDrawMode(seriesModel);var coordinateSystemType=seriesModel.get("coordinateSystem");"cartesian2d"!==coordinateSystemType&amp;&amp;"polar"!==coordinateSystemType||(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(seriesModel,ecModel,api):this._renderNormal(seriesModel,ecModel,api,payload))},BarView2.prototype.incrementalPrepareRender=function(seriesModel){this._clear(),this._updateDrawMode(seriesModel),this._updateLargeClip(seriesModel)},BarView2.prototype.incrementalRender=function(params,seriesModel){this._progressiveEls=[],this._incrementalRenderLarge(params,seriesModel)},BarView2.prototype.eachRendered=function(cb){traverseElements(this._progressiveEls||this.group,cb)},BarView2.prototype._updateDrawMode=function(seriesModel){var isLargeDraw=seriesModel.pipelineContext.large;null!=this._isLargeDraw&amp;&amp;isLargeDraw===this._isLargeDraw||(this._isLargeDraw=isLargeDraw,this._clear())},BarView2.prototype._renderNormal=function(seriesModel,ecModel,api,payload){var isHorizontalOrRadial,group=this.group,data=seriesModel.getData(),oldData=this._data,coord=seriesModel.coordinateSystem,baseAxis=coord.getBaseAxis();"cartesian2d"===coord.type?isHorizontalOrRadial=baseAxis.isHorizontal():"polar"===coord.type&amp;&amp;(isHorizontalOrRadial="angle"===baseAxis.dim);var animationModel=seriesModel.isAnimationEnabled()?seriesModel:null,realtimeSortCfg=function shouldRealtimeSort(seriesModel,coordSys){var realtimeSortOption=seriesModel.get("realtimeSort",!0),baseAxis=coordSys.getBaseAxis();if(realtimeSortOption&amp;&amp;"category"===baseAxis.type&amp;&amp;"cartesian2d"===coordSys.type)return{baseAxis:baseAxis,otherAxis:coordSys.getOtherAxis(baseAxis)}}(seriesModel,coord);realtimeSortCfg&amp;&amp;this._enableRealtimeSort(realtimeSortCfg,data,api);var needsClip=seriesModel.get("clip",!0)||realtimeSortCfg,coordSysClipArea=function getClipArea(coord,data){var coordSysClipArea=coord.getArea&amp;&amp;coord.getArea();if(isCoordinateSystemType(coord,"cartesian2d")){var baseAxis=coord.getBaseAxis();if("category"!==baseAxis.type||!baseAxis.onBand){var expandWidth=data.getLayout("bandWidth");baseAxis.isHorizontal()?(coordSysClipArea.x-=expandWidth,coordSysClipArea.width+=2*expandWidth):(coordSysClipArea.y-=expandWidth,coordSysClipArea.height+=2*expandWidth)}}return coordSysClipArea}(coord,data);group.removeClipPath();var roundCap=seriesModel.get("roundCap",!0),drawBackground=seriesModel.get("showBackground",!0),backgroundModel=seriesModel.getModel("backgroundStyle"),barBorderRadius=backgroundModel.get("borderRadius")||0,bgEls=[],oldBgEls=this._backgroundEls,isInitSort=payload&amp;&amp;payload.isInitSort,isChangeOrder=payload&amp;&amp;"changeAxisOrder"===payload.type;function createBackground(dataIndex){var bgLayout=getLayout[coord.type](data,dataIndex),bgEl=function createBackgroundEl(coord,isHorizontalOrRadial,layout2){var ElementClz="polar"===coord.type?Sector:Rect$2;return new ElementClz({shape:createBackgroundShape(isHorizontalOrRadial,layout2,coord),silent:!0,z2:0})}(coord,isHorizontalOrRadial,bgLayout);return bgEl.useStyle(backgroundModel.getItemStyle()),"cartesian2d"===coord.type?bgEl.setShape("r",barBorderRadius):bgEl.setShape("cornerRadius",barBorderRadius),bgEls[dataIndex]=bgEl,bgEl}data.diff(oldData).add(function(dataIndex){var itemModel=data.getItemModel(dataIndex),layout2=getLayout[coord.type](data,dataIndex,itemModel);if(drawBackground&amp;&amp;createBackground(dataIndex),data.hasValue(dataIndex)&amp;&amp;isValidLayout[coord.type](layout2)){var isClipped=!1;needsClip&amp;&amp;(isClipped=clip[coord.type](coordSysClipArea,layout2));var el=elementCreator[coord.type](seriesModel,data,dataIndex,layout2,isHorizontalOrRadial,animationModel,baseAxis.model,!1,roundCap);realtimeSortCfg&amp;&amp;(el.forceLabelAnimation=!0),updateStyle(el,data,dataIndex,itemModel,layout2,seriesModel,isHorizontalOrRadial,"polar"===coord.type),isInitSort?el.attr({shape:layout2}):realtimeSortCfg?updateRealtimeAnimation(realtimeSortCfg,animationModel,el,layout2,dataIndex,isHorizontalOrRadial,!1,!1):initProps(el,{shape:layout2},seriesModel,dataIndex),data.setItemGraphicEl(dataIndex,el),group.add(el),el.ignore=isClipped}}).update(function(newIndex,oldIndex){var itemModel=data.getItemModel(newIndex),layout2=getLayout[coord.type](data,newIndex,itemModel);if(drawBackground){var bgEl=void 0;0===oldBgEls.length?bgEl=createBackground(oldIndex):((bgEl=oldBgEls[oldIndex]).useStyle(backgroundModel.getItemStyle()),"cartesian2d"===coord.type?bgEl.setShape("r",barBorderRadius):bgEl.setShape("cornerRadius",barBorderRadius),bgEls[newIndex]=bgEl);var bgLayout=getLayout[coord.type](data,newIndex);updateProps$1(bgEl,{shape:createBackgroundShape(isHorizontalOrRadial,bgLayout,coord)},animationModel,newIndex)}var el=oldData.getItemGraphicEl(oldIndex);if(data.hasValue(newIndex)&amp;&amp;isValidLayout[coord.type](layout2)){var isClipped=!1;if(needsClip&amp;&amp;(isClipped=clip[coord.type](coordSysClipArea,layout2))&amp;&amp;group.remove(el),el?saveOldStyle(el):el=elementCreator[coord.type](seriesModel,data,newIndex,layout2,isHorizontalOrRadial,animationModel,baseAxis.model,!!el,roundCap),realtimeSortCfg&amp;&amp;(el.forceLabelAnimation=!0),isChangeOrder){var textEl=el.getTextContent();if(textEl){var labelInnerStore=labelInner(textEl);null!=labelInnerStore.prevValue&amp;&amp;(labelInnerStore.prevValue=labelInnerStore.value)}}else updateStyle(el,data,newIndex,itemModel,layout2,seriesModel,isHorizontalOrRadial,"polar"===coord.type);isInitSort?el.attr({shape:layout2}):realtimeSortCfg?updateRealtimeAnimation(realtimeSortCfg,animationModel,el,layout2,newIndex,isHorizontalOrRadial,!0,isChangeOrder):updateProps$1(el,{shape:layout2},seriesModel,newIndex,null),data.setItemGraphicEl(newIndex,el),el.ignore=isClipped,group.add(el)}else group.remove(el)}).remove(function(dataIndex){var el=oldData.getItemGraphicEl(dataIndex);el&amp;&amp;removeElementWithFadeOut(el,seriesModel,dataIndex)}).execute();var bgGroup=this._backgroundGroup||(this._backgroundGroup=new Group$3);bgGroup.removeAll();for(var i=0;i&lt;bgEls.length;++i)bgGroup.add(bgEls[i]);group.add(bgGroup),this._backgroundEls=bgEls,this._data=data},BarView2.prototype._renderLarge=function(seriesModel,ecModel,api){this._clear(),createLarge$1(seriesModel,this.group),this._updateLargeClip(seriesModel)},BarView2.prototype._incrementalRenderLarge=function(params,seriesModel){this._removeBackground(),createLarge$1(seriesModel,this.group,this._progressiveEls,!0)},BarView2.prototype._updateLargeClip=function(seriesModel){var clipPath=seriesModel.get("clip",!0)&amp;&amp;createClipPath(seriesModel.coordinateSystem,!1,seriesModel),group=this.group;clipPath?group.setClipPath(clipPath):group.removeClipPath()},BarView2.prototype._enableRealtimeSort=function(realtimeSortCfg,data,api){var _this=this;if(data.count()){var baseAxis=realtimeSortCfg.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(data,realtimeSortCfg,api),this._isFirstFrame=!1;else{var orderMapping_1=function(idx){var el=data.getItemGraphicEl(idx),shape=el&amp;&amp;el.shape;return shape&amp;&amp;Math.abs(baseAxis.isHorizontal()?shape.height:shape.width)||0};this._onRendered=function(){_this._updateSortWithinSameData(data,orderMapping_1,baseAxis,api)},api.getZr().on("rendered",this._onRendered)}}},BarView2.prototype._dataSort=function(data,baseAxis,orderMapping){var info=[];return data.each(data.mapDimension(baseAxis.dim),function(ordinalNumber,dataIdx){var mappedValue=orderMapping(dataIdx);mappedValue=null==mappedValue?NaN:mappedValue,info.push({dataIndex:dataIdx,mappedValue:mappedValue,ordinalNumber:ordinalNumber})}),info.sort(function(a,b){return b.mappedValue-a.mappedValue}),{ordinalNumbers:map$1(info,function(item){return item.ordinalNumber})}},BarView2.prototype._isOrderChangedWithinSameData=function(data,orderMapping,baseAxis){for(var scale2=baseAxis.scale,ordinalDataDim=data.mapDimension(baseAxis.dim),lastValue=Number.MAX_VALUE,tickNum=0,len2=scale2.getOrdinalMeta().categories.length;tickNum&lt;len2;++tickNum){var rawIdx=data.rawIndexOf(ordinalDataDim,scale2.getRawOrdinalNumber(tickNum)),value=rawIdx&lt;0?Number.MIN_VALUE:orderMapping(data.indexOfRawIndex(rawIdx));if(value&gt;lastValue)return!0;lastValue=value}return!1},BarView2.prototype._isOrderDifferentInView=function(orderInfo,baseAxis){for(var scale2=baseAxis.scale,extent3=scale2.getExtent(),tickNum=Math.max(0,extent3[0]),tickMax=Math.min(extent3[1],scale2.getOrdinalMeta().categories.length-1);tickNum&lt;=tickMax;++tickNum)if(orderInfo.ordinalNumbers[tickNum]!==scale2.getRawOrdinalNumber(tickNum))return!0},BarView2.prototype._updateSortWithinSameData=function(data,orderMapping,baseAxis,api){if(this._isOrderChangedWithinSameData(data,orderMapping,baseAxis)){var sortInfo=this._dataSort(data,baseAxis,orderMapping);this._isOrderDifferentInView(sortInfo,baseAxis)&amp;&amp;(this._removeOnRenderedListener(api),api.dispatchAction({type:"changeAxisOrder",componentType:baseAxis.dim+"Axis",axisId:baseAxis.index,sortInfo:sortInfo}))}},BarView2.prototype._dispatchInitSort=function(data,realtimeSortCfg,api){var baseAxis=realtimeSortCfg.baseAxis,sortResult=this._dataSort(data,baseAxis,function(dataIdx){return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim),dataIdx)});api.dispatchAction({type:"changeAxisOrder",componentType:baseAxis.dim+"Axis",isInitSort:!0,axisId:baseAxis.index,sortInfo:sortResult})},BarView2.prototype.remove=function(ecModel,api){this._clear(this._model),this._removeOnRenderedListener(api)},BarView2.prototype.dispose=function(ecModel,api){this._removeOnRenderedListener(api)},BarView2.prototype._removeOnRenderedListener=function(api){this._onRendered&amp;&amp;(api.getZr().off("rendered",this._onRendered),this._onRendered=null)},BarView2.prototype._clear=function(model){var group=this.group,data=this._data;model&amp;&amp;model.isAnimationEnabled()&amp;&amp;data&amp;&amp;!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],data.eachItemGraphicEl(function(el){removeElementWithFadeOut(el,model,getECData(el).dataIndex)})):group.removeAll(),this._data=null,this._isFirstFrame=!0},BarView2.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},BarView2.type="bar",BarView2}(ChartView),clip={cartesian2d:function(coordSysBoundingRect,layout2){var signWidth=layout2.width&lt;0?-1:1,signHeight=layout2.height&lt;0?-1:1;signWidth&lt;0&amp;&amp;(layout2.x+=layout2.width,layout2.width=-layout2.width),signHeight&lt;0&amp;&amp;(layout2.y+=layout2.height,layout2.height=-layout2.height);var coordSysX2=coordSysBoundingRect.x+coordSysBoundingRect.width,coordSysY2=coordSysBoundingRect.y+coordSysBoundingRect.height,x=mathMax$4(layout2.x,coordSysBoundingRect.x),x2=mathMin$4(layout2.x+layout2.width,coordSysX2),y=mathMax$4(layout2.y,coordSysBoundingRect.y),y2=mathMin$4(layout2.y+layout2.height,coordSysY2),xClipped=x2&lt;x,yClipped=y2&lt;y;return layout2.x=xClipped&amp;&amp;x&gt;coordSysX2?x2:x,layout2.y=yClipped&amp;&amp;y&gt;coordSysY2?y2:y,layout2.width=xClipped?0:x2-x,layout2.height=yClipped?0:y2-y,signWidth&lt;0&amp;&amp;(layout2.x+=layout2.width,layout2.width=-layout2.width),signHeight&lt;0&amp;&amp;(layout2.y+=layout2.height,layout2.height=-layout2.height),xClipped||yClipped},polar:function(coordSysClipArea,layout2){var signR=layout2.r0&lt;=layout2.r?1:-1;if(signR&lt;0){var tmp=layout2.r;layout2.r=layout2.r0,layout2.r0=tmp}var r=mathMin$4(layout2.r,coordSysClipArea.r),r0=mathMax$4(layout2.r0,coordSysClipArea.r0);layout2.r=r,layout2.r0=r0;var clipped=r-r0&lt;0;if(signR&lt;0){tmp=layout2.r;layout2.r=layout2.r0,layout2.r0=tmp}return clipped}},elementCreator={cartesian2d:function(seriesModel,data,newIndex,layout2,isHorizontal,animationModel,axisModel,isUpdate,roundCap){var rect=new Rect$2({shape:extend({},layout2),z2:1});(rect.__dataIndex=newIndex,rect.name="item",animationModel)&amp;&amp;(rect.shape[isHorizontal?"height":"width"]=0);return rect},polar:function(seriesModel,data,newIndex,layout2,isRadial,animationModel,axisModel,isUpdate,roundCap){var ShapeClass=!isRadial&amp;&amp;roundCap?SausagePath:Sector,sector=new ShapeClass({shape:layout2,z2:1});sector.name="item";var positionMap=createPolarPositionMapping(isRadial);if(sector.calculateTextPosition=function createSectorCalculateTextPosition(positionMapping,opts){var isRoundCap=(opts=opts||{}).isRoundCap;return function(out2,opts2,boundingRect){var textPosition=opts2.position;if(!textPosition||textPosition instanceof Array)return calculateTextPosition(out2,opts2,boundingRect);var mappedSectorPosition=positionMapping(textPosition),distance2=null!=opts2.distance?opts2.distance:5,sector=this.shape,cx=sector.cx,cy=sector.cy,r=sector.r,r0=sector.r0,middleR=(r+r0)/2,startAngle=sector.startAngle,endAngle=sector.endAngle,middleAngle=(startAngle+endAngle)/2,extraDist=isRoundCap?Math.abs(r-r0)/2:0,mathCos2=Math.cos,mathSin2=Math.sin,x=cx+r*mathCos2(startAngle),y=cy+r*mathSin2(startAngle),textAlign="left",textVerticalAlign="top";switch(mappedSectorPosition){case"startArc":x=cx+(r0-distance2)*mathCos2(middleAngle),y=cy+(r0-distance2)*mathSin2(middleAngle),textAlign="center",textVerticalAlign="top";break;case"insideStartArc":x=cx+(r0+distance2)*mathCos2(middleAngle),y=cy+(r0+distance2)*mathSin2(middleAngle),textAlign="center",textVerticalAlign="bottom";break;case"startAngle":x=cx+middleR*mathCos2(startAngle)+adjustAngleDistanceX(startAngle,distance2+extraDist,!1),y=cy+middleR*mathSin2(startAngle)+adjustAngleDistanceY(startAngle,distance2+extraDist,!1),textAlign="right",textVerticalAlign="middle";break;case"insideStartAngle":x=cx+middleR*mathCos2(startAngle)+adjustAngleDistanceX(startAngle,-distance2+extraDist,!1),y=cy+middleR*mathSin2(startAngle)+adjustAngleDistanceY(startAngle,-distance2+extraDist,!1),textAlign="left",textVerticalAlign="middle";break;case"middle":x=cx+middleR*mathCos2(middleAngle),y=cy+middleR*mathSin2(middleAngle),textAlign="center",textVerticalAlign="middle";break;case"endArc":x=cx+(r+distance2)*mathCos2(middleAngle),y=cy+(r+distance2)*mathSin2(middleAngle),textAlign="center",textVerticalAlign="bottom";break;case"insideEndArc":x=cx+(r-distance2)*mathCos2(middleAngle),y=cy+(r-distance2)*mathSin2(middleAngle),textAlign="center",textVerticalAlign="top";break;case"endAngle":x=cx+middleR*mathCos2(endAngle)+adjustAngleDistanceX(endAngle,distance2+extraDist,!0),y=cy+middleR*mathSin2(endAngle)+adjustAngleDistanceY(endAngle,distance2+extraDist,!0),textAlign="left",textVerticalAlign="middle";break;case"insideEndAngle":x=cx+middleR*mathCos2(endAngle)+adjustAngleDistanceX(endAngle,-distance2+extraDist,!0),y=cy+middleR*mathSin2(endAngle)+adjustAngleDistanceY(endAngle,-distance2+extraDist,!0),textAlign="right",textVerticalAlign="middle";break;default:return calculateTextPosition(out2,opts2,boundingRect)}return(out2=out2||{}).x=x,out2.y=y,out2.align=textAlign,out2.verticalAlign=textVerticalAlign,out2}}(positionMap,{isRoundCap:ShapeClass===SausagePath}),animationModel){var animateProperty=isRadial?"r":"endAngle",animateTarget={};sector.shape[animateProperty]=isRadial?layout2.r0:layout2.startAngle,animateTarget[animateProperty]=layout2[animateProperty],(isUpdate?updateProps$1:initProps)(sector,{shape:animateTarget},animationModel)}return sector}};function updateRealtimeAnimation(realtimeSortCfg,seriesAnimationModel,el,layout2,newIndex,isHorizontal,isUpdate,isChangeOrder){var seriesTarget,axisTarget;isHorizontal?(axisTarget={x:layout2.x,width:layout2.width},seriesTarget={y:layout2.y,height:layout2.height}):(axisTarget={y:layout2.y,height:layout2.height},seriesTarget={x:layout2.x,width:layout2.width}),isChangeOrder||(isUpdate?updateProps$1:initProps)(el,{shape:seriesTarget},seriesAnimationModel,newIndex,null),(isUpdate?updateProps$1:initProps)(el,{shape:axisTarget},seriesAnimationModel?realtimeSortCfg.baseAxis.model:null,newIndex)}function checkPropertiesNotValid(obj,props){for(var i=0;i&lt;props.length;i++)if(!isFinite(obj[props[i]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(layout2){return!checkPropertiesNotValid(layout2,rectPropties)},polar:function(layout2){return!checkPropertiesNotValid(layout2,polarPropties)}},getLayout={cartesian2d:function(data,dataIndex,itemModel){var layout2=data.getItemLayout(dataIndex),fixedLineWidth=itemModel?function getLineWidth(itemModel,rawLayout){var borderColor=itemModel.get(["itemStyle","borderColor"]);if(!borderColor||"none"===borderColor)return 0;var lineWidth=itemModel.get(["itemStyle","borderWidth"])||0,width=isNaN(rawLayout.width)?Number.MAX_VALUE:Math.abs(rawLayout.width),height=isNaN(rawLayout.height)?Number.MAX_VALUE:Math.abs(rawLayout.height);return Math.min(lineWidth,width,height)}(itemModel,layout2):0,signX=layout2.width&gt;0?1:-1,signY=layout2.height&gt;0?1:-1;return{x:layout2.x+signX*fixedLineWidth/2,y:layout2.y+signY*fixedLineWidth/2,width:layout2.width-signX*fixedLineWidth,height:layout2.height-signY*fixedLineWidth}},polar:function(data,dataIndex,itemModel){var layout2=data.getItemLayout(dataIndex);return{cx:layout2.cx,cy:layout2.cy,r0:layout2.r0,r:layout2.r,startAngle:layout2.startAngle,endAngle:layout2.endAngle,clockwise:layout2.clockwise}}};function createPolarPositionMapping(isRadial){return function(isRadial2){var arcOrAngle=isRadial2?"Arc":"Angle";return function(position2){switch(position2){case"start":case"insideStart":case"end":case"insideEnd":return position2+arcOrAngle;default:return position2}}}(isRadial)}function updateStyle(el,data,dataIndex,itemModel,layout2,seriesModel,isHorizontalOrRadial,isPolar){var style=data.getItemVisual(dataIndex,"style");if(isPolar){if(!seriesModel.get("roundCap")){var sectorShape=el.shape;extend(sectorShape,getSectorCornerRadius(itemModel.getModel("itemStyle"),sectorShape,!0)),el.setShape(sectorShape)}}else{var borderRadius=itemModel.get(["itemStyle","borderRadius"])||0;el.setShape("r",borderRadius)}el.useStyle(style);var cursorStyle=itemModel.getShallow("cursor");cursorStyle&amp;&amp;el.attr("cursor",cursorStyle);var labelPositionOutside=isPolar?isHorizontalOrRadial?layout2.r&gt;=layout2.r0?"endArc":"startArc":layout2.endAngle&gt;=layout2.startAngle?"endAngle":"startAngle":isHorizontalOrRadial?layout2.height&gt;=0?"bottom":"top":layout2.width&gt;=0?"right":"left",labelStatesModels=getLabelStatesModels(itemModel);setLabelStyle(el,labelStatesModels,{labelFetcher:seriesModel,labelDataIndex:dataIndex,defaultText:getDefaultLabel(seriesModel.getData(),dataIndex),inheritColor:style.fill,defaultOpacity:style.opacity,defaultOutsidePosition:labelPositionOutside});var label=el.getTextContent();if(isPolar&amp;&amp;label){var position2=itemModel.get(["label","position"]);el.textConfig.inside="middle"===position2||null,function setSectorTextRotation(sector,textPosition,positionMapping,rotateType){if(isNumber(rotateType))sector.setTextConfig({rotation:rotateType});else if(isArray$1(textPosition))sector.setTextConfig({rotation:0});else{var anchorAngle,shape=sector.shape,startAngle=shape.clockwise?shape.startAngle:shape.endAngle,endAngle=shape.clockwise?shape.endAngle:shape.startAngle,middleAngle=(startAngle+endAngle)/2,mappedSectorPosition=positionMapping(textPosition);switch(mappedSectorPosition){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":anchorAngle=middleAngle;break;case"startAngle":case"insideStartAngle":anchorAngle=startAngle;break;case"endAngle":case"insideEndAngle":anchorAngle=endAngle;break;default:return void sector.setTextConfig({rotation:0})}var rotate2=1.5*Math.PI-anchorAngle;"middle"===mappedSectorPosition&amp;&amp;rotate2&gt;Math.PI/2&amp;&amp;rotate2&lt;1.5*Math.PI&amp;&amp;(rotate2-=Math.PI),sector.setTextConfig({rotation:rotate2})}}(el,"outside"===position2?labelPositionOutside:position2,createPolarPositionMapping(isHorizontalOrRadial),itemModel.get(["label","rotate"]))}setLabelValueAnimation(label,labelStatesModels,seriesModel.getRawValue(dataIndex),function(value){return getDefaultInterpolatedLabel(data,value)});var emphasisModel=itemModel.getModel(["emphasis"]);toggleHoverEmphasis(el,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled")),setStatesStylesFromModel(el,itemModel),function isZeroOnPolar(layout2){return null!=layout2.startAngle&amp;&amp;null!=layout2.endAngle&amp;&amp;layout2.startAngle===layout2.endAngle}(layout2)&amp;&amp;(el.style.fill="none",el.style.stroke="none",each$f(el.states,function(state){state.style&amp;&amp;(state.style.fill=state.style.stroke="none")}))}var LagePathShape=function(){return function LagePathShape2(){}}(),LargePath=function(_super){function LargePath2(opts){var _this=_super.call(this,opts)||this;return _this.type="largeBar",_this}return __extends$1(LargePath2,_super),LargePath2.prototype.getDefaultShape=function(){return new LagePathShape},LargePath2.prototype.buildPath=function(ctx,shape){for(var points2=shape.points,baseDimIdx=this.baseDimIdx,valueDimIdx=1-this.baseDimIdx,startPoint=[],size=[],barWidth=this.barWidth,i=0;i&lt;points2.length;i+=3)size[baseDimIdx]=barWidth,size[valueDimIdx]=points2[i+2],startPoint[baseDimIdx]=points2[i+baseDimIdx],startPoint[valueDimIdx]=points2[i+valueDimIdx],ctx.rect(startPoint[0],startPoint[1],size[0],size[1])},LargePath2}(Path);function createLarge$1(seriesModel,group,progressiveEls,incremental){var data=seriesModel.getData(),baseDimIdx=data.getLayout("valueAxisHorizontal")?1:0,largeDataIndices=data.getLayout("largeDataIndices"),barWidth=data.getLayout("size"),backgroundModel=seriesModel.getModel("backgroundStyle"),bgPoints=data.getLayout("largeBackgroundPoints");if(bgPoints){var bgEl=new LargePath({shape:{points:bgPoints},incremental:!!incremental,silent:!0,z2:0});bgEl.baseDimIdx=baseDimIdx,bgEl.largeDataIndices=largeDataIndices,bgEl.barWidth=barWidth,bgEl.useStyle(backgroundModel.getItemStyle()),group.add(bgEl),progressiveEls&amp;&amp;progressiveEls.push(bgEl)}var el=new LargePath({shape:{points:data.getLayout("largePoints")},incremental:!!incremental,ignoreCoarsePointer:!0,z2:1});el.baseDimIdx=baseDimIdx,el.largeDataIndices=largeDataIndices,el.barWidth=barWidth,group.add(el),el.useStyle(data.getVisual("style")),el.style.stroke=null,getECData(el).seriesIndex=seriesModel.seriesIndex,seriesModel.get("silent")||(el.on("mousedown",largePathUpdateDataIndex),el.on("mousemove",largePathUpdateDataIndex)),progressiveEls&amp;&amp;progressiveEls.push(el)}var largePathUpdateDataIndex=throttle(function(event){var dataIndex=function largePathFindDataIndex(largePath,x,y){for(var baseDimIdx=largePath.baseDimIdx,valueDimIdx=1-baseDimIdx,points2=largePath.shape.points,largeDataIndices=largePath.largeDataIndices,startPoint=[],size=[],barWidth=largePath.barWidth,i=0,len2=points2.length/3;i&lt;len2;i++){var ii=3*i;if(size[baseDimIdx]=barWidth,size[valueDimIdx]=points2[ii+2],startPoint[baseDimIdx]=points2[ii+baseDimIdx],startPoint[valueDimIdx]=points2[ii+valueDimIdx],size[valueDimIdx]&lt;0&amp;&amp;(startPoint[valueDimIdx]+=size[valueDimIdx],size[valueDimIdx]=-size[valueDimIdx]),x&gt;=startPoint[0]&amp;&amp;x&lt;=startPoint[0]+size[0]&amp;&amp;y&gt;=startPoint[1]&amp;&amp;y&lt;=startPoint[1]+size[1])return largeDataIndices[i]}return-1}(this,event.offsetX,event.offsetY);getECData(this).dataIndex=dataIndex&gt;=0?dataIndex:null},30,!1);function createBackgroundShape(isHorizontalOrRadial,layout2,coord){if(isCoordinateSystemType(coord,"cartesian2d")){var rectShape=layout2,coordLayout=coord.getArea();return{x:isHorizontalOrRadial?rectShape.x:coordLayout.x,y:isHorizontalOrRadial?coordLayout.y:rectShape.y,width:isHorizontalOrRadial?rectShape.width:coordLayout.width,height:isHorizontalOrRadial?coordLayout.height:rectShape.height}}var sectorShape=layout2;return{cx:(coordLayout=coord.getArea()).cx,cy:coordLayout.cy,r0:isHorizontalOrRadial?coordLayout.r0:sectorShape.r0,r:isHorizontalOrRadial?coordLayout.r:sectorShape.r,startAngle:isHorizontalOrRadial?sectorShape.startAngle:0,endAngle:isHorizontalOrRadial?sectorShape.endAngle:2*Math.PI}}function install$P(registers){registers.registerChartView(BarView),registers.registerSeriesModel(BarSeriesModel),registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),registers.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(payload,ecModel){var componentType=payload.componentType||"series";ecModel.eachComponent({mainType:componentType,query:payload},function(componentModel){payload.sortInfo&amp;&amp;componentModel.axis.setCategorySortInfo(payload.sortInfo)})})}var PI2=2*Math.PI,RADIAN$2=Math.PI/180;function getViewRect$5(seriesModel,api){return getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function getBasicPieLayout(seriesModel,api){var viewRect2=getViewRect$5(seriesModel,api),center2=seriesModel.get("center"),radius=seriesModel.get("radius");isArray$1(radius)||(radius=[0,radius]);var cx,cy,width=parsePercent(viewRect2.width,api.getWidth()),height=parsePercent(viewRect2.height,api.getHeight()),size=Math.min(width,height),r0=parsePercent(radius[0],size/2),r=parsePercent(radius[1],size/2),coordSys=seriesModel.coordinateSystem;if(coordSys){var point=coordSys.dataToPoint(center2);cx=point[0]||0,cy=point[1]||0}else isArray$1(center2)||(center2=[center2,center2]),cx=parsePercent(center2[0],width)+viewRect2.x,cy=parsePercent(center2[1],height)+viewRect2.y;return{cx:cx,cy:cy,r0:r0,r:r}}function pieLayout(seriesType2,ecModel,api){ecModel.eachSeriesByType(seriesType2,function(seriesModel){var data=seriesModel.getData(),valueDim=data.mapDimension("value"),viewRect2=getViewRect$5(seriesModel,api),_a2=getBasicPieLayout(seriesModel,api),cx=_a2.cx,cy=_a2.cy,r=_a2.r,r0=_a2.r0,startAngle=-seriesModel.get("startAngle")*RADIAN$2,endAngle=seriesModel.get("endAngle"),padAngle=seriesModel.get("padAngle")*RADIAN$2;endAngle="auto"===endAngle?startAngle-PI2:-endAngle*RADIAN$2;var minAndPadAngle=seriesModel.get("minAngle")*RADIAN$2+padAngle,validDataCount=0;data.each(valueDim,function(value){!isNaN(value)&amp;&amp;validDataCount++});var sum2=data.getSum(valueDim),unitRadian=Math.PI/(sum2||validDataCount)*2,clockwise=seriesModel.get("clockwise"),roseType=seriesModel.get("roseType"),stillShowZeroSum=seriesModel.get("stillShowZeroSum"),extent3=data.getDataExtent(valueDim);extent3[0]=0;var dir3=clockwise?1:-1,angles=[startAngle,endAngle],halfPadAngle=dir3*padAngle/2;normalizeArcAngles(angles,!clockwise),startAngle=angles[0],endAngle=angles[1];var layoutData=getSeriesLayoutData(seriesModel);layoutData.startAngle=startAngle,layoutData.endAngle=endAngle,layoutData.clockwise=clockwise;var angleRange=Math.abs(endAngle-startAngle),restAngle=angleRange,valueSumLargerThanMinAngle=0,currentAngle=startAngle;if(data.setLayout({viewRect:viewRect2,r:r}),data.each(valueDim,function(value,idx){var angle;if(isNaN(value))data.setItemLayout(idx,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:clockwise,cx:cx,cy:cy,r0:r0,r:roseType?NaN:r});else{(angle="area"!==roseType?0===sum2&amp;&amp;stillShowZeroSum?unitRadian:value*unitRadian:angleRange/validDataCount)&lt;minAndPadAngle?(angle=minAndPadAngle,restAngle-=minAndPadAngle):valueSumLargerThanMinAngle+=value;var endAngle2=currentAngle+dir3*angle,actualStartAngle=0,actualEndAngle=0;padAngle&gt;angle?actualEndAngle=actualStartAngle=currentAngle+dir3*angle/2:(actualStartAngle=currentAngle+halfPadAngle,actualEndAngle=endAngle2-halfPadAngle),data.setItemLayout(idx,{angle:angle,startAngle:actualStartAngle,endAngle:actualEndAngle,clockwise:clockwise,cx:cx,cy:cy,r0:r0,r:roseType?linearMap$2(value,extent3,[r0,r]):r}),currentAngle=endAngle2}}),restAngle&lt;PI2&amp;&amp;validDataCount)if(restAngle&lt;=.001){var angle_1=angleRange/validDataCount;data.each(valueDim,function(value,idx){if(!isNaN(value)){var layout_1=data.getItemLayout(idx);layout_1.angle=angle_1;var actualStartAngle=0,actualEndAngle=0;angle_1&lt;padAngle?actualEndAngle=actualStartAngle=startAngle+dir3*(idx+.5)*angle_1:(actualStartAngle=startAngle+dir3*idx*angle_1+halfPadAngle,actualEndAngle=startAngle+dir3*(idx+1)*angle_1-halfPadAngle),layout_1.startAngle=actualStartAngle,layout_1.endAngle=actualEndAngle}})}else unitRadian=restAngle/valueSumLargerThanMinAngle,currentAngle=startAngle,data.each(valueDim,function(value,idx){if(!isNaN(value)){var layout_2=data.getItemLayout(idx),angle=layout_2.angle===minAndPadAngle?minAndPadAngle:value*unitRadian,actualStartAngle=0,actualEndAngle=0;angle&lt;padAngle?actualEndAngle=actualStartAngle=currentAngle+dir3*angle/2:(actualStartAngle=currentAngle+halfPadAngle,actualEndAngle=currentAngle+dir3*angle-halfPadAngle),layout_2.startAngle=actualStartAngle,layout_2.endAngle=actualEndAngle,currentAngle+=dir3*angle}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(seriesType2){return{seriesType:seriesType2,reset:function(seriesModel,ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});if(legendModels&amp;&amp;legendModels.length){var data=seriesModel.getData();data.filterSelf(function(idx){for(var name=data.getName(idx),i=0;i&lt;legendModels.length;i++)if(!legendModels[i].isSelected(name))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(list,cx,cy,r,dir3,viewWidth,viewHeight,viewLeft,viewTop,farthestX){if(!(list.length&lt;2)){for(var len2=list.length,i=0;i&lt;len2;i++)if("outer"===list[i].position&amp;&amp;"labelLine"===list[i].labelAlignTo){var dx=list[i].label.x-farthestX;list[i].linePoints[1][0]+=dx,list[i].label.x=farthestX}shiftLayoutOnY(list,viewTop,viewTop+viewHeight)&amp;&amp;function recalculateX(items){for(var topSemi={list:[],maxY:0},bottomSemi={list:[],maxY:0},i2=0;i2&lt;items.length;i2++)if("none"===items[i2].labelAlignTo){var item=items[i2],semi=item.label.y&gt;cy?bottomSemi:topSemi,dy=Math.abs(item.label.y-cy);if(dy&gt;=semi.maxY){var dx2=item.label.x-cx-item.len2*dir3,rA=r+item.len,rB=Math.abs(dx2)&lt;rA?Math.sqrt(dy*dy/(1-dx2*dx2/rA/rA)):rA;semi.rB=rB,semi.maxY=dy}semi.list.push(item)}recalculateXOnSemiToAlignOnEllipseCurve(topSemi),recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi)}(list)}function recalculateXOnSemiToAlignOnEllipseCurve(semi){for(var rB=semi.rB,rB2=rB*rB,i2=0;i2&lt;semi.list.length;i2++){var item=semi.list[i2],dy=Math.abs(item.label.y-cy),rA=r+item.len,rA2=rA*rA,dx2=Math.sqrt(Math.abs((1-dy*dy/rB2)*rA2)),newX=cx+(dx2+item.len2)*dir3,deltaX=newX-item.label.x;constrainTextWidth(item,item.targetTextWidth-deltaX*dir3,!0),item.label.x=newX}}}function constrainTextWidth(layout2,availableWidth,forceRecalculate){if(void 0===forceRecalculate&amp;&amp;(forceRecalculate=!1),null==layout2.labelStyleWidth){var label=layout2.label,style=label.style,textRect=layout2.rect,bgColor=style.backgroundColor,padding=style.padding,paddingH=padding?padding[1]+padding[3]:0,overflow=style.overflow,oldOuterWidth=textRect.width+(bgColor?0:paddingH);if(availableWidth&lt;oldOuterWidth||forceRecalculate){var oldHeight=textRect.height;if(overflow&amp;&amp;overflow.match("break")){label.setStyle("backgroundColor",null),label.setStyle("width",availableWidth-paddingH);var innerRect=label.getBoundingRect();label.setStyle("width",Math.ceil(innerRect.width)),label.setStyle("backgroundColor",bgColor)}else{var availableInnerWidth=availableWidth-paddingH,newWidth=availableWidth&lt;oldOuterWidth?availableInnerWidth:forceRecalculate?availableInnerWidth&gt;layout2.unconstrainedWidth?null:availableInnerWidth:null;label.setStyle("width",newWidth)}var newRect=label.getBoundingRect();textRect.width=newRect.width;var margin=(label.style.margin||0)+2.1;textRect.height=newRect.height+margin,textRect.y-=(textRect.height-oldHeight)/2}}}function isPositionCenter(sectorShape){return"center"===sectorShape.position}function pieLabelLayout(seriesModel){var cx,cy,data=seriesModel.getData(),labelLayoutList=[],hasLabelRotate=!1,minShowLabelRadian=(seriesModel.get("minShowLabelAngle")||0)*RADIAN$1,viewRect2=data.getLayout("viewRect"),r=data.getLayout("r"),viewWidth=viewRect2.width,viewLeft=viewRect2.x,viewTop=viewRect2.y,viewHeight=viewRect2.height;function setNotShow(el){el.ignore=!0}data.each(function(idx){var sector=data.getItemGraphicEl(idx),sectorShape=sector.shape,label2=sector.getTextContent(),labelLine2=sector.getTextGuideLine(),itemModel=data.getItemModel(idx),labelModel=itemModel.getModel("label"),labelPosition=labelModel.get("position")||itemModel.get(["emphasis","label","position"]),labelDistance=labelModel.get("distanceToLabelLine"),labelAlignTo=labelModel.get("alignTo"),edgeDistance=parsePercent(labelModel.get("edgeDistance"),viewWidth),bleedMargin=labelModel.get("bleedMargin"),labelLineModel=itemModel.getModel("labelLine"),labelLineLen=labelLineModel.get("length");labelLineLen=parsePercent(labelLineLen,viewWidth);var labelLineLen2=labelLineModel.get("length2");if(labelLineLen2=parsePercent(labelLineLen2,viewWidth),Math.abs(sectorShape.endAngle-sectorShape.startAngle)&lt;minShowLabelRadian)return each$f(label2.states,setNotShow),label2.ignore=!0,void(labelLine2&amp;&amp;(each$f(labelLine2.states,setNotShow),labelLine2.ignore=!0));if(function isLabelShown(label2){if(!label2.ignore)return!0;for(var key in label2.states)if(!1===label2.states[key].ignore)return!0;return!1}(label2)){var textX,textY,linePoints2,textAlign,midAngle=(sectorShape.startAngle+sectorShape.endAngle)/2,nx=Math.cos(midAngle),ny=Math.sin(midAngle);cx=sectorShape.cx,cy=sectorShape.cy;var isLabelInside="inside"===labelPosition||"inner"===labelPosition;if("center"===labelPosition)textX=sectorShape.cx,textY=sectorShape.cy,textAlign="center";else{var x1=(isLabelInside?(sectorShape.r+sectorShape.r0)/2*nx:sectorShape.r*nx)+cx,y1=(isLabelInside?(sectorShape.r+sectorShape.r0)/2*ny:sectorShape.r*ny)+cy;if(textX=x1+3*nx,textY=y1+3*ny,!isLabelInside){var x2=x1+nx*(labelLineLen+r-sectorShape.r),y2=y1+ny*(labelLineLen+r-sectorShape.r),x3=x2+(nx&lt;0?-1:1)*labelLineLen2;textX="edge"===labelAlignTo?nx&lt;0?viewLeft+edgeDistance:viewLeft+viewWidth-edgeDistance:x3+(nx&lt;0?-labelDistance:labelDistance),textY=y2,linePoints2=[[x1,y1],[x2,y2],[x3,y2]]}textAlign=isLabelInside?"center":"edge"===labelAlignTo?nx&gt;0?"right":"left":nx&gt;0?"left":"right"}var PI3=Math.PI,labelRotate=0,rotate2=labelModel.get("rotate");if(isNumber(rotate2))labelRotate=rotate2*(PI3/180);else if("center"===labelPosition)labelRotate=0;else if("radial"===rotate2||!0===rotate2){labelRotate=nx&lt;0?-midAngle+PI3:-midAngle}else if("tangential"===rotate2&amp;&amp;"outside"!==labelPosition&amp;&amp;"outer"!==labelPosition){var rad=Math.atan2(nx,ny);rad&lt;0&amp;&amp;(rad=2*PI3+rad),ny&gt;0&amp;&amp;(rad=PI3+rad),labelRotate=rad-PI3}if(hasLabelRotate=!!labelRotate,label2.x=textX,label2.y=textY,label2.rotation=labelRotate,label2.setStyle({verticalAlign:"middle"}),isLabelInside){label2.setStyle({align:textAlign});var selectState2=label2.states.select;selectState2&amp;&amp;(selectState2.x+=label2.x,selectState2.y+=label2.y)}else{var textRect=label2.getBoundingRect().clone();textRect.applyTransform(label2.getComputedTransform());var margin=(label2.style.margin||0)+2.1;textRect.y-=margin/2,textRect.height+=margin,labelLayoutList.push({label:label2,labelLine:labelLine2,position:labelPosition,len:labelLineLen,len2:labelLineLen2,minTurnAngle:labelLineModel.get("minTurnAngle"),maxSurfaceAngle:labelLineModel.get("maxSurfaceAngle"),surfaceNormal:new Point(nx,ny),linePoints:linePoints2,textAlign:textAlign,labelDistance:labelDistance,labelAlignTo:labelAlignTo,edgeDistance:edgeDistance,bleedMargin:bleedMargin,rect:textRect,unconstrainedWidth:textRect.width,labelStyleWidth:label2.style.width})}sector.setTextConfig({inside:isLabelInside})}}),!hasLabelRotate&amp;&amp;seriesModel.get("avoidLabelOverlap")&amp;&amp;function avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight,viewLeft,viewTop){for(var leftList=[],rightList=[],leftmostX=Number.MAX_VALUE,rightmostX=-Number.MAX_VALUE,i=0;i&lt;labelLayoutList.length;i++){var label=labelLayoutList[i].label;isPositionCenter(labelLayoutList[i])||(label.x&lt;cx?(leftmostX=Math.min(leftmostX,label.x),leftList.push(labelLayoutList[i])):(rightmostX=Math.max(rightmostX,label.x),rightList.push(labelLayoutList[i])))}for(i=0;i&lt;labelLayoutList.length;i++)if(!isPositionCenter(layout2=labelLayoutList[i])&amp;&amp;layout2.linePoints){if(null!=layout2.labelStyleWidth)continue;label=layout2.label;var linePoints=layout2.linePoints,targetTextWidth=void 0;targetTextWidth="edge"===layout2.labelAlignTo?label.x&lt;cx?linePoints[2][0]-layout2.labelDistance-viewLeft-layout2.edgeDistance:viewLeft+viewWidth-layout2.edgeDistance-linePoints[2][0]-layout2.labelDistance:"labelLine"===layout2.labelAlignTo?label.x&lt;cx?leftmostX-viewLeft-layout2.bleedMargin:viewLeft+viewWidth-rightmostX-layout2.bleedMargin:label.x&lt;cx?label.x-viewLeft-layout2.bleedMargin:viewLeft+viewWidth-label.x-layout2.bleedMargin,layout2.targetTextWidth=targetTextWidth,constrainTextWidth(layout2,targetTextWidth)}for(adjustSingleSide(rightList,cx,cy,r,1,0,viewHeight,0,viewTop,rightmostX),adjustSingleSide(leftList,cx,cy,r,-1,0,viewHeight,0,viewTop,leftmostX),i=0;i&lt;labelLayoutList.length;i++){var layout2;if(!isPositionCenter(layout2=labelLayoutList[i])&amp;&amp;layout2.linePoints){label=layout2.label,linePoints=layout2.linePoints;var isAlignToEdge="edge"===layout2.labelAlignTo,padding=label.style.padding,paddingH=padding?padding[1]+padding[3]:0,extraPaddingH=label.style.backgroundColor?0:paddingH,realTextWidth=layout2.rect.width+extraPaddingH,dist2=linePoints[1][0]-linePoints[2][0];isAlignToEdge?label.x&lt;cx?linePoints[2][0]=viewLeft+layout2.edgeDistance+realTextWidth+layout2.labelDistance:linePoints[2][0]=viewLeft+viewWidth-layout2.edgeDistance-realTextWidth-layout2.labelDistance:(label.x&lt;cx?linePoints[2][0]=label.x+layout2.labelDistance:linePoints[2][0]=label.x-layout2.labelDistance,linePoints[1][0]=linePoints[2][0]+dist2),linePoints[1][1]=linePoints[2][1]=label.y}}}(labelLayoutList,cx,cy,r,viewWidth,viewHeight,viewLeft,viewTop);for(var i=0;i&lt;labelLayoutList.length;i++){var layout2=labelLayoutList[i],label=layout2.label,labelLine=layout2.labelLine,notShowLabel=isNaN(label.x)||isNaN(label.y);if(label){label.setStyle({align:layout2.textAlign}),notShowLabel&amp;&amp;(each$f(label.states,setNotShow),label.ignore=!0);var selectState=label.states.select;selectState&amp;&amp;(selectState.x+=label.x,selectState.y+=label.y)}if(labelLine){var linePoints=layout2.linePoints;notShowLabel||!linePoints?(each$f(labelLine.states,setNotShow),labelLine.ignore=!0):(limitTurnAngle(linePoints,layout2.minTurnAngle),limitSurfaceAngle(linePoints,layout2.surfaceNormal,layout2.maxSurfaceAngle),labelLine.setShape({points:linePoints}),label.__hostTarget.textGuideLineConfig={anchor:new Point(linePoints[0][0],linePoints[0][1])})}}}var PiePiece=function(_super){function PiePiece2(data,idx,startAngle){var _this=_super.call(this)||this;_this.z2=2;var text=new ZRText;return _this.setTextContent(text),_this.updateData(data,idx,startAngle,!0),_this}return __extends$1(PiePiece2,_super),PiePiece2.prototype.updateData=function(data,idx,startAngle,firstCreate){var seriesModel=data.hostModel,itemModel=data.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis"),layout2=data.getItemLayout(idx),sectorShape=extend(getSectorCornerRadius(itemModel.getModel("itemStyle"),layout2,!0),layout2);if(isNaN(sectorShape.startAngle))this.setShape(sectorShape);else{if(firstCreate){this.setShape(sectorShape);var animationType=seriesModel.getShallow("animationType");seriesModel.ecModel.ssr?(initProps(this,{scaleX:0,scaleY:0},seriesModel,{dataIndex:idx,isFrom:!0}),this.originX=sectorShape.cx,this.originY=sectorShape.cy):"scale"===animationType?(this.shape.r=layout2.r0,initProps(this,{shape:{r:layout2.r}},seriesModel,idx)):null!=startAngle?(this.setShape({startAngle:startAngle,endAngle:startAngle}),initProps(this,{shape:{startAngle:layout2.startAngle,endAngle:layout2.endAngle}},seriesModel,idx)):(this.shape.endAngle=layout2.startAngle,updateProps$1(this,{shape:{endAngle:layout2.endAngle}},seriesModel,idx))}else saveOldStyle(this),updateProps$1(this,{shape:sectorShape},seriesModel,idx);this.useStyle(data.getItemVisual(idx,"style")),setStatesStylesFromModel(this,itemModel);var midAngle=(layout2.startAngle+layout2.endAngle)/2,offset=seriesModel.get("selectedOffset"),dx=Math.cos(midAngle)*offset,dy=Math.sin(midAngle)*offset,cursorStyle=itemModel.getShallow("cursor");cursorStyle&amp;&amp;this.attr("cursor",cursorStyle),this._updateLabel(seriesModel,data,idx),this.ensureState("emphasis").shape=extend({r:layout2.r+(emphasisModel.get("scale")&amp;&amp;emphasisModel.get("scaleSize")||0)},getSectorCornerRadius(emphasisModel.getModel("itemStyle"),layout2)),extend(this.ensureState("select"),{x:dx,y:dy,shape:getSectorCornerRadius(itemModel.getModel(["select","itemStyle"]),layout2)}),extend(this.ensureState("blur"),{shape:getSectorCornerRadius(itemModel.getModel(["blur","itemStyle"]),layout2)});var labelLine=this.getTextGuideLine(),labelText=this.getTextContent();labelLine&amp;&amp;extend(labelLine.ensureState("select"),{x:dx,y:dy}),extend(labelText.ensureState("select"),{x:dx,y:dy}),toggleHoverEmphasis(this,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}},PiePiece2.prototype._updateLabel=function(seriesModel,data,idx){var itemModel=data.getItemModel(idx),labelLineModel=itemModel.getModel("labelLine"),style=data.getItemVisual(idx,"style"),visualColor=style&amp;&amp;style.fill,visualOpacity=style&amp;&amp;style.opacity;setLabelStyle(this,getLabelStatesModels(itemModel),{labelFetcher:data.hostModel,labelDataIndex:idx,inheritColor:visualColor,defaultOpacity:visualOpacity,defaultText:seriesModel.getFormattedLabel(idx,"normal")||data.getName(idx)});var labelText=this.getTextContent();this.setTextConfig({position:null,rotation:null}),labelText.attr({z2:10});var labelPosition=seriesModel.get(["label","position"]);if("outside"!==labelPosition&amp;&amp;"outer"!==labelPosition)this.removeTextGuideLine();else{var polyline=this.getTextGuideLine();polyline||(polyline=new Polyline$1,this.setTextGuideLine(polyline)),setLabelLineStyle(this,getLabelLineStatesModels(itemModel),{stroke:visualColor,opacity:retrieve3(labelLineModel.get(["lineStyle","opacity"]),visualOpacity,1)})}},PiePiece2}(Sector),PieView=function(_super){function PieView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.ignoreLabelLineUpdate=!0,_this}return __extends$1(PieView2,_super),PieView2.prototype.render=function(seriesModel,ecModel,api,payload){var startAngle,data=seriesModel.getData(),oldData=this._data,group=this.group;if(!oldData&amp;&amp;data.count()&gt;0){for(var shape=data.getItemLayout(0),s=1;isNaN(shape&amp;&amp;shape.startAngle)&amp;&amp;s&lt;data.count();++s)shape=data.getItemLayout(s);shape&amp;&amp;(startAngle=shape.startAngle)}if(this._emptyCircleSector&amp;&amp;group.remove(this._emptyCircleSector),0===data.count()&amp;&amp;seriesModel.get("showEmptyCircle")){var layoutData=getSeriesLayoutData(seriesModel),sector=new Sector({shape:extend(getBasicPieLayout(seriesModel,api),layoutData)});sector.useStyle(seriesModel.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=sector,group.add(sector)}data.diff(oldData).add(function(idx){var piePiece=new PiePiece(data,idx,startAngle);data.setItemGraphicEl(idx,piePiece),group.add(piePiece)}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx,startAngle),piePiece.off("click"),group.add(piePiece),data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){removeElementWithFadeOut(oldData.getItemGraphicEl(idx),seriesModel,idx)}).execute(),pieLabelLayout(seriesModel),"expansion"!==seriesModel.get("animationTypeUpdate")&amp;&amp;(this._data=data)},PieView2.prototype.dispose=function(){},PieView2.prototype.containPoint=function(point,seriesModel){var itemLayout=seriesModel.getData().getItemLayout(0);if(itemLayout){var dx=point[0]-itemLayout.cx,dy=point[1]-itemLayout.cy,radius=Math.sqrt(dx*dx+dy*dy);return radius&lt;=itemLayout.r&amp;&amp;radius&gt;=itemLayout.r0}},PieView2.type="pie",PieView2}(ChartView);function createSeriesDataSimply(seriesModel,opt,nameList){opt=isArray$1(opt)&amp;&amp;{coordDimensions:opt}||extend({encodeDefine:seriesModel.getEncode()},opt);var source=seriesModel.getSource(),dimensions=prepareSeriesDataSchema(source,opt).dimensions,list=new SeriesData(dimensions,seriesModel);return list.initData(source,nameList),list}var LegendVisualProvider=function(){function LegendVisualProvider2(getDataWithEncodedVisual,getRawData2){this._getDataWithEncodedVisual=getDataWithEncodedVisual,this._getRawData=getRawData2}return LegendVisualProvider2.prototype.getAllNames=function(){var rawData=this._getRawData();return rawData.mapArray(rawData.getName)},LegendVisualProvider2.prototype.containName=function(name){return this._getRawData().indexOfName(name)&gt;=0},LegendVisualProvider2.prototype.indexOfName=function(name){return this._getDataWithEncodedVisual().indexOfName(name)},LegendVisualProvider2.prototype.getItemVisual=function(dataIndex,key){return this._getDataWithEncodedVisual().getItemVisual(dataIndex,key)},LegendVisualProvider2}(),innerData=makeInner(),PieSeriesModel=function(_super){function PieSeriesModel2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(PieSeriesModel2,_super),PieSeriesModel2.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(option)},PieSeriesModel2.prototype.mergeOption=function(){_super.prototype.mergeOption.apply(this,arguments)},PieSeriesModel2.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},PieSeriesModel2.prototype.getDataParams=function(dataIndex){var data=this.getData(),dataInner=innerData(data),seats=dataInner.seats;if(!seats){var valueList_1=[];data.each(data.mapDimension("value"),function(value){valueList_1.push(value)}),seats=dataInner.seats=getPercentSeats(valueList_1,data.hostModel.get("percentPrecision"))}var params=_super.prototype.getDataParams.call(this,dataIndex);return params.percent=seats[dataIndex]||0,params.$vars.push("percent"),params},PieSeriesModel2.prototype._defaultLabelLine=function(option){defaultEmphasis(option,"labelLine",["show"]);var labelLineNormalOpt=option.labelLine,labelLineEmphasisOpt=option.emphasis.labelLine;labelLineNormalOpt.show=labelLineNormalOpt.show&amp;&amp;option.label.show,labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&amp;&amp;option.emphasis.label.show},PieSeriesModel2.type="series.pie",PieSeriesModel2.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},PieSeriesModel2}(SeriesModel);function install$O(registers){registers.registerChartView(PieView),registers.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",registers.registerAction),registers.registerLayout(curry$1(pieLayout,"pie")),registers.registerProcessor(dataFilter$1("pie")),registers.registerProcessor(function negativeDataFilter(seriesType2){return{seriesType:seriesType2,reset:function(seriesModel,ecModel){var data=seriesModel.getData();data.filterSelf(function(idx){var valueDim=data.mapDimension("value"),curValue=data.get(valueDim,idx);return!(isNumber(curValue)&amp;&amp;!isNaN(curValue)&amp;&amp;curValue&lt;0)})}}}("pie"))}var ScatterSeriesModel=function(_super){function ScatterSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ScatterSeriesModel2.type,_this.hasSymbolVisual=!0,_this}return __extends$1(ScatterSeriesModel2,_super),ScatterSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesData(null,this,{useEncodeDefaulter:!0})},ScatterSeriesModel2.prototype.getProgressive=function(){var progressive=this.option.progressive;return null==progressive?this.option.large?5e3:this.get("progressive"):progressive},ScatterSeriesModel2.prototype.getProgressiveThreshold=function(){var progressiveThreshold=this.option.progressiveThreshold;return null==progressiveThreshold?this.option.large?1e4:this.get("progressiveThreshold"):progressiveThreshold},ScatterSeriesModel2.prototype.brushSelector=function(dataIndex,data,selectors){return selectors.point(data.getItemLayout(dataIndex))},ScatterSeriesModel2.prototype.getZLevelKey=function(){return this.getData().count()&gt;this.getProgressiveThreshold()?this.id:""},ScatterSeriesModel2.type="series.scatter",ScatterSeriesModel2.dependencies=["grid","polar","geo","singleAxis","calendar"],ScatterSeriesModel2.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},ScatterSeriesModel2}(SeriesModel),LargeSymbolPathShape=function(){return function LargeSymbolPathShape2(){}}(),LargeSymbolPath=function(_super){function LargeSymbolPath2(opts){var _this=_super.call(this,opts)||this;return _this._off=0,_this.hoverDataIdx=-1,_this}return __extends$1(LargeSymbolPath2,_super),LargeSymbolPath2.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},LargeSymbolPath2.prototype.reset=function(){this.notClear=!1,this._off=0},LargeSymbolPath2.prototype.buildPath=function(path,shape){var i,points2=shape.points,size=shape.size,symbolProxy=this.symbolProxy,symbolProxyShape=symbolProxy.shape,ctx=path.getContext?path.getContext():path,canBoost=ctx&amp;&amp;size[0]&lt;4,softClipShape=this.softClipShape;if(canBoost)this._ctx=ctx;else{for(this._ctx=null,i=this._off;i&lt;points2.length;){var x=points2[i++],y=points2[i++];isNaN(x)||isNaN(y)||(softClipShape&amp;&amp;!softClipShape.contain(x,y)||(symbolProxyShape.x=x-size[0]/2,symbolProxyShape.y=y-size[1]/2,symbolProxyShape.width=size[0],symbolProxyShape.height=size[1],symbolProxy.buildPath(path,symbolProxyShape,!0)))}this.incremental&amp;&amp;(this._off=i,this.notClear=!0)}},LargeSymbolPath2.prototype.afterBrush=function(){var i,shape=this.shape,points2=shape.points,size=shape.size,ctx=this._ctx,softClipShape=this.softClipShape;if(ctx){for(i=this._off;i&lt;points2.length;){var x=points2[i++],y=points2[i++];isNaN(x)||isNaN(y)||(softClipShape&amp;&amp;!softClipShape.contain(x,y)||ctx.fillRect(x-size[0]/2,y-size[1]/2,size[0],size[1]))}this.incremental&amp;&amp;(this._off=i,this.notClear=!0)}},LargeSymbolPath2.prototype.findDataIndex=function(x,y){for(var shape=this.shape,points2=shape.points,size=shape.size,w=Math.max(size[0],4),h=Math.max(size[1],4),idx=points2.length/2-1;idx&gt;=0;idx--){var i=2*idx,x0=points2[i]-w/2,y0=points2[i+1]-h/2;if(x&gt;=x0&amp;&amp;y&gt;=y0&amp;&amp;x&lt;=x0+w&amp;&amp;y&lt;=y0+h)return idx}return-1},LargeSymbolPath2.prototype.contain=function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect();return x=localPos[0],y=localPos[1],rect.contain(x,y)?(this.hoverDataIdx=this.findDataIndex(x,y))&gt;=0:(this.hoverDataIdx=-1,!1)},LargeSymbolPath2.prototype.getBoundingRect=function(){var rect=this._rect;if(!rect){for(var shape=this.shape,points2=shape.points,size=shape.size,w=size[0],h=size[1],minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i&lt;points2.length;){var x=points2[i++],y=points2[i++];minX=Math.min(x,minX),maxX=Math.max(x,maxX),minY=Math.min(y,minY),maxY=Math.max(y,maxY)}rect=this._rect=new BoundingRect(minX-w/2,minY-h/2,maxX-minX+w,maxY-minY+h)}return rect},LargeSymbolPath2}(Path),LargeSymbolDraw=function(){function LargeSymbolDraw2(){this.group=new Group$3}return LargeSymbolDraw2.prototype.updateData=function(data,opt){this._clear();var symbolEl=this._create();symbolEl.setShape({points:data.getLayout("points")}),this._setCommon(symbolEl,data,opt)},LargeSymbolDraw2.prototype.updateLayout=function(data){var points2=data.getLayout("points");this.group.eachChild(function(child){if(null!=child.startIndex){var len2=2*(child.endIndex-child.startIndex),byteOffset=4*child.startIndex*2;points2=new Float32Array(points2.buffer,byteOffset,len2)}child.setShape("points",points2),child.reset()})},LargeSymbolDraw2.prototype.incrementalPrepareUpdate=function(data){this._clear()},LargeSymbolDraw2.prototype.incrementalUpdate=function(taskParams,data,opt){var lastAdded=this._newAdded[0],points2=data.getLayout("points"),oldPoints=lastAdded&amp;&amp;lastAdded.shape.points;if(oldPoints&amp;&amp;oldPoints.length&lt;2e4){var oldLen=oldPoints.length,newPoints=new Float32Array(oldLen+points2.length);newPoints.set(oldPoints),newPoints.set(points2,oldLen),lastAdded.endIndex=taskParams.end,lastAdded.setShape({points:newPoints})}else{this._newAdded=[];var symbolEl=this._create();symbolEl.startIndex=taskParams.start,symbolEl.endIndex=taskParams.end,symbolEl.incremental=!0,symbolEl.setShape({points:points2}),this._setCommon(symbolEl,data,opt)}},LargeSymbolDraw2.prototype.eachRendered=function(cb){this._newAdded[0]&amp;&amp;cb(this._newAdded[0])},LargeSymbolDraw2.prototype._create=function(){var symbolEl=new LargeSymbolPath({cursor:"default"});return symbolEl.ignoreCoarsePointer=!0,this.group.add(symbolEl),this._newAdded.push(symbolEl),symbolEl},LargeSymbolDraw2.prototype._setCommon=function(symbolEl,data,opt){var hostModel=data.hostModel;opt=opt||{};var size=data.getVisual("symbolSize");symbolEl.setShape("size",size instanceof Array?size:[size,size]),symbolEl.softClipShape=opt.clipShape||null,symbolEl.symbolProxy=createSymbol$1(data.getVisual("symbol"),0,0,0,0),symbolEl.setColor=symbolEl.symbolProxy.setColor;var extrudeShadow=symbolEl.shape.size[0]&lt;4;symbolEl.useStyle(hostModel.getModel("itemStyle").getItemStyle(extrudeShadow?["color","shadowBlur","shadowColor"]:["color"]));var globalStyle=data.getVisual("style"),visualColor=globalStyle&amp;&amp;globalStyle.fill;visualColor&amp;&amp;symbolEl.setColor(visualColor);var ecData=getECData(symbolEl);ecData.seriesIndex=hostModel.seriesIndex,symbolEl.on("mousemove",function(e2){ecData.dataIndex=null;var dataIndex=symbolEl.hoverDataIdx;dataIndex&gt;=0&amp;&amp;(ecData.dataIndex=dataIndex+(symbolEl.startIndex||0))})},LargeSymbolDraw2.prototype.remove=function(){this._clear()},LargeSymbolDraw2.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},LargeSymbolDraw2}(),ScatterView=function(_super){function ScatterView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ScatterView2.type,_this}return __extends$1(ScatterView2,_super),ScatterView2.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData();this._updateSymbolDraw(data,seriesModel).updateData(data,{clipShape:this._getClipShape(seriesModel)}),this._finished=!0},ScatterView2.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){var data=seriesModel.getData();this._updateSymbolDraw(data,seriesModel).incrementalPrepareUpdate(data),this._finished=!1},ScatterView2.prototype.incrementalRender=function(taskParams,seriesModel,ecModel){this._symbolDraw.incrementalUpdate(taskParams,seriesModel.getData(),{clipShape:this._getClipShape(seriesModel)}),this._finished=taskParams.end===seriesModel.getData().count()},ScatterView2.prototype.updateTransform=function(seriesModel,ecModel,api){var data=seriesModel.getData();if(this.group.dirty(),!this._finished||data.count()&gt;1e4)return{update:!0};var res=pointsLayout("").reset(seriesModel,ecModel,api);res.progress&amp;&amp;res.progress({start:0,end:data.count(),count:data.count()},data),this._symbolDraw.updateLayout(data)},ScatterView2.prototype.eachRendered=function(cb){this._symbolDraw&amp;&amp;this._symbolDraw.eachRendered(cb)},ScatterView2.prototype._getClipShape=function(seriesModel){if(seriesModel.get("clip",!0)){var coordSys=seriesModel.coordinateSystem;return coordSys&amp;&amp;coordSys.getArea&amp;&amp;coordSys.getArea(.1)}},ScatterView2.prototype._updateSymbolDraw=function(data,seriesModel){var symbolDraw=this._symbolDraw,isLargeDraw=seriesModel.pipelineContext.large;return symbolDraw&amp;&amp;isLargeDraw===this._isLargeDraw||(symbolDraw&amp;&amp;symbolDraw.remove(),symbolDraw=this._symbolDraw=isLargeDraw?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=isLargeDraw,this.group.removeAll()),this.group.add(symbolDraw.group),symbolDraw},ScatterView2.prototype.remove=function(ecModel,api){this._symbolDraw&amp;&amp;this._symbolDraw.remove(!0),this._symbolDraw=null},ScatterView2.prototype.dispose=function(){},ScatterView2.type="scatter",ScatterView2}(ChartView),GridModel=function(_super){function GridModel2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(GridModel2,_super),GridModel2.type="grid",GridModel2.dependencies=["xAxis","yAxis"],GridModel2.layoutMode="box",GridModel2.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},GridModel2}(ComponentModel),CartesianAxisModel=function(_super){function CartesianAxisModel2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(CartesianAxisModel2,_super),CartesianAxisModel2.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},CartesianAxisModel2.type="cartesian2dAxis",CartesianAxisModel2}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1);const axisDefault={category:categoryAxis,value:valueAxis,time:merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),log:defaults({logBase:10},valueAxis)};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(registers,axisName,BaseAxisModelClass,extraDefaultOption){each$f(AXIS_TYPES,function(v,axisType){var defaultOption2=merge(merge({},axisDefault[axisType],!0),extraDefaultOption,!0),AxisModel=function(_super){function AxisModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=axisName+"Axis."+axisType,_this}return __extends$1(AxisModel2,_super),AxisModel2.prototype.mergeDefaultAndTheme=function(option,ecModel){var layoutMode=fetchLayoutMode(this),inputPositionParams=layoutMode?getLayoutParams(option):{};merge(option,ecModel.getTheme().get(axisType+"Axis")),merge(option,this.getDefaultOption()),option.type=getAxisType(option),layoutMode&amp;&amp;mergeLayoutParam(option,inputPositionParams,layoutMode)},AxisModel2.prototype.optionUpdated=function(){"category"===this.option.type&amp;&amp;(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},AxisModel2.prototype.getCategories=function(rawData){var option=this.option;if("category"===option.type)return rawData?option.data:this.__ordinalMeta.categories},AxisModel2.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},AxisModel2.type=axisName+"Axis."+axisType,AxisModel2.defaultOption=defaultOption2,AxisModel2}(BaseAxisModelClass);registers.registerComponentModel(AxisModel)}),registers.registerSubTypeDefaulter(axisName+"Axis",getAxisType)}function getAxisType(option){return option.type||(option.data?"category":"value")}var Cartesian=function(){function Cartesian2(name){this.type="cartesian",this._dimList=[],this._axes={},this.name=name||""}return Cartesian2.prototype.getAxis=function(dim){return this._axes[dim]},Cartesian2.prototype.getAxes=function(){return map$1(this._dimList,function(dim){return this._axes[dim]},this)},Cartesian2.prototype.getAxesByScale=function(scaleType){return scaleType=scaleType.toLowerCase(),filter(this.getAxes(),function(axis){return axis.scale.type===scaleType})},Cartesian2.prototype.addAxis=function(axis){var dim=axis.dim;this._axes[dim]=axis,this._dimList.push(dim)},Cartesian2}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(scale2){return"interval"===scale2.type||"time"===scale2.type}var Cartesian2D=function(_super){function Cartesian2D2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="cartesian2d",_this.dimensions=cartesian2DDimensions,_this}return __extends$1(Cartesian2D2,_super),Cartesian2D2.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var xAxisScale=this.getAxis("x").scale,yAxisScale=this.getAxis("y").scale;if(canCalculateAffineTransform(xAxisScale)&amp;&amp;canCalculateAffineTransform(yAxisScale)){var xScaleExtent=xAxisScale.getExtent(),yScaleExtent=yAxisScale.getExtent(),start2=this.dataToPoint([xScaleExtent[0],yScaleExtent[0]]),end2=this.dataToPoint([xScaleExtent[1],yScaleExtent[1]]),xScaleSpan=xScaleExtent[1]-xScaleExtent[0],yScaleSpan=yScaleExtent[1]-yScaleExtent[0];if(xScaleSpan&amp;&amp;yScaleSpan){var scaleX=(end2[0]-start2[0])/xScaleSpan,scaleY=(end2[1]-start2[1])/yScaleSpan,translateX=start2[0]-xScaleExtent[0]*scaleX,translateY=start2[1]-yScaleExtent[0]*scaleY,m2=this._transform=[scaleX,0,0,scaleY,translateX,translateY];this._invTransform=invert([],m2)}}},Cartesian2D2.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},Cartesian2D2.prototype.containPoint=function(point){var axisX=this.getAxis("x"),axisY=this.getAxis("y");return axisX.contain(axisX.toLocalCoord(point[0]))&amp;&amp;axisY.contain(axisY.toLocalCoord(point[1]))},Cartesian2D2.prototype.containData=function(data){return this.getAxis("x").containData(data[0])&amp;&amp;this.getAxis("y").containData(data[1])},Cartesian2D2.prototype.containZone=function(data1,data2){var zoneDiag1=this.dataToPoint(data1),zoneDiag2=this.dataToPoint(data2),area=this.getArea(),zone=new BoundingRect(zoneDiag1[0],zoneDiag1[1],zoneDiag2[0]-zoneDiag1[0],zoneDiag2[1]-zoneDiag1[1]);return area.intersect(zone)},Cartesian2D2.prototype.dataToPoint=function(data,clamp2,out2){out2=out2||[];var xVal=data[0],yVal=data[1];if(this._transform&amp;&amp;null!=xVal&amp;&amp;isFinite(xVal)&amp;&amp;null!=yVal&amp;&amp;isFinite(yVal))return applyTransform$1(out2,data,this._transform);var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");return out2[0]=xAxis.toGlobalCoord(xAxis.dataToCoord(xVal,clamp2)),out2[1]=yAxis.toGlobalCoord(yAxis.dataToCoord(yVal,clamp2)),out2},Cartesian2D2.prototype.clampData=function(data,out2){var xScale=this.getAxis("x").scale,yScale=this.getAxis("y").scale,xAxisExtent=xScale.getExtent(),yAxisExtent=yScale.getExtent(),x=xScale.parse(data[0]),y=yScale.parse(data[1]);return(out2=out2||[])[0]=Math.min(Math.max(Math.min(xAxisExtent[0],xAxisExtent[1]),x),Math.max(xAxisExtent[0],xAxisExtent[1])),out2[1]=Math.min(Math.max(Math.min(yAxisExtent[0],yAxisExtent[1]),y),Math.max(yAxisExtent[0],yAxisExtent[1])),out2},Cartesian2D2.prototype.pointToData=function(point,clamp2){var out2=[];if(this._invTransform)return applyTransform$1(out2,point,this._invTransform);var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");return out2[0]=xAxis.coordToData(xAxis.toLocalCoord(point[0]),clamp2),out2[1]=yAxis.coordToData(yAxis.toLocalCoord(point[1]),clamp2),out2},Cartesian2D2.prototype.getOtherAxis=function(axis){return this.getAxis("x"===axis.dim?"y":"x")},Cartesian2D2.prototype.getArea=function(tolerance){tolerance=tolerance||0;var xExtent=this.getAxis("x").getGlobalExtent(),yExtent=this.getAxis("y").getGlobalExtent(),x=Math.min(xExtent[0],xExtent[1])-tolerance,y=Math.min(yExtent[0],yExtent[1])-tolerance,width=Math.max(xExtent[0],xExtent[1])-x+tolerance,height=Math.max(yExtent[0],yExtent[1])-y+tolerance;return new BoundingRect(x,y,width,height)},Cartesian2D2}(Cartesian),Axis2D=function(_super){function Axis2D2(dim,scale2,coordExtent,axisType,position2){var _this=_super.call(this,dim,scale2,coordExtent)||this;return _this.index=0,_this.type=axisType||"value",_this.position=position2||"bottom",_this}return __extends$1(Axis2D2,_super),Axis2D2.prototype.isHorizontal=function(){var position2=this.position;return"top"===position2||"bottom"===position2},Axis2D2.prototype.getGlobalExtent=function(asc2){var ret=this.getExtent();return ret[0]=this.toGlobalCoord(ret[0]),ret[1]=this.toGlobalCoord(ret[1]),asc2&amp;&amp;ret[0]&gt;ret[1]&amp;&amp;ret.reverse(),ret},Axis2D2.prototype.pointToData=function(point,clamp2){return this.coordToData(this.toLocalCoord(point["x"===this.dim?0:1]),clamp2)},Axis2D2.prototype.setCategorySortInfo=function(info){if("category"!==this.type)return!1;this.model.option.categorySortInfo=info,this.scale.setSortInfo(info)},Axis2D2}(Axis);function layout$2(gridModel,axisModel,opt){opt=opt||{};var grid=gridModel.coordinateSystem,axis=axisModel.axis,layout2={},otherAxisOnZeroOf=axis.getAxesOnZeroOf()[0],rawAxisPosition=axis.position,axisPosition=otherAxisOnZeroOf?"onZero":rawAxisPosition,axisDim=axis.dim,rect=grid.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],idx={left:0,right:1,top:0,bottom:1,onZero:2},axisOffset=axisModel.get("offset")||0,posBound="x"===axisDim?[rectBound[2]-axisOffset,rectBound[3]+axisOffset]:[rectBound[0]-axisOffset,rectBound[1]+axisOffset];if(otherAxisOnZeroOf){var onZeroCoord=otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));posBound[idx.onZero]=Math.max(Math.min(onZeroCoord,posBound[1]),posBound[0])}layout2.position=["y"===axisDim?posBound[idx[axisPosition]]:rectBound[0],"x"===axisDim?posBound[idx[axisPosition]]:rectBound[3]],layout2.rotation=Math.PI/2*("x"===axisDim?0:1);layout2.labelDirection=layout2.tickDirection=layout2.nameDirection={top:-1,bottom:1,left:-1,right:1}[rawAxisPosition],layout2.labelOffset=otherAxisOnZeroOf?posBound[idx[rawAxisPosition]]-posBound[idx.onZero]:0,axisModel.get(["axisTick","inside"])&amp;&amp;(layout2.tickDirection=-layout2.tickDirection),retrieve(opt.labelInside,axisModel.get(["axisLabel","inside"]))&amp;&amp;(layout2.labelDirection=-layout2.labelDirection);var labelRotate=axisModel.get(["axisLabel","rotate"]);return layout2.labelRotate="top"===axisPosition?-labelRotate:labelRotate,layout2.z2=1,layout2}function isCartesian2DSeries(seriesModel){return"cartesian2d"===seriesModel.get("coordinateSystem")}function findAxisModels(seriesModel){var axisModelMap={xAxisModel:null,yAxisModel:null};return each$f(axisModelMap,function(v,key){var axisType=key.replace(/Model$/,""),axisModel=seriesModel.getReferringComponents(axisType,SINGLE_REFERRING).models[0];axisModelMap[key]=axisModel}),axisModelMap}var mathLog=Math.log;function alignScaleTicks(scale2,axisModel,alignToScale){var intervalScaleProto2=IntervalScale.prototype,alignToTicks=intervalScaleProto2.getTicks.call(alignToScale),alignToNicedTicks=intervalScaleProto2.getTicks.call(alignToScale,!0),alignToSplitNumber=alignToTicks.length-1,alignToInterval=intervalScaleProto2.getInterval.call(alignToScale),scaleExtent=getScaleExtent(scale2,axisModel),rawExtent=scaleExtent.extent,isMinFixed=scaleExtent.fixMin,isMaxFixed=scaleExtent.fixMax;if("log"===scale2.type){var logBase=mathLog(scale2.base);rawExtent=[mathLog(rawExtent[0])/logBase,mathLog(rawExtent[1])/logBase]}scale2.setExtent(rawExtent[0],rawExtent[1]),scale2.calcNiceExtent({splitNumber:alignToSplitNumber,fixMin:isMinFixed,fixMax:isMaxFixed});var extent3=intervalScaleProto2.getExtent.call(scale2);isMinFixed&amp;&amp;(rawExtent[0]=extent3[0]),isMaxFixed&amp;&amp;(rawExtent[1]=extent3[1]);var interval=intervalScaleProto2.getInterval.call(scale2),min3=rawExtent[0],max3=rawExtent[1];if(isMinFixed&amp;&amp;isMaxFixed)interval=(max3-min3)/alignToSplitNumber;else if(isMinFixed)for(max3=rawExtent[0]+interval*alignToSplitNumber;max3&lt;rawExtent[1]&amp;&amp;isFinite(max3)&amp;&amp;isFinite(rawExtent[1]);)interval=increaseInterval(interval),max3=rawExtent[0]+interval*alignToSplitNumber;else if(isMaxFixed)for(min3=rawExtent[1]-interval*alignToSplitNumber;min3&gt;rawExtent[0]&amp;&amp;isFinite(min3)&amp;&amp;isFinite(rawExtent[0]);)interval=increaseInterval(interval),min3=rawExtent[1]-interval*alignToSplitNumber;else{scale2.getTicks().length-1&gt;alignToSplitNumber&amp;&amp;(interval=increaseInterval(interval));var range=interval*alignToSplitNumber;(min3=round$3((max3=Math.ceil(rawExtent[1]/interval)*interval)-range))&lt;0&amp;&amp;rawExtent[0]&gt;=0?(min3=0,max3=round$3(range)):max3&gt;0&amp;&amp;rawExtent[1]&lt;=0&amp;&amp;(max3=0,min3=-round$3(range))}var t0=(alignToTicks[0].value-alignToNicedTicks[0].value)/alignToInterval,t1=(alignToTicks[alignToSplitNumber].value-alignToNicedTicks[alignToSplitNumber].value)/alignToInterval;intervalScaleProto2.setExtent.call(scale2,min3+interval*t0,max3+interval*t1),intervalScaleProto2.setInterval.call(scale2,interval),(t0||t1)&amp;&amp;intervalScaleProto2.setNiceExtent.call(scale2,min3+interval,max3-interval)}var Grid=function(){function Grid2(gridModel,ecModel,api){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(gridModel,ecModel,api),this.model=gridModel}return Grid2.prototype.getRect=function(){return this._rect},Grid2.prototype.update=function(ecModel,api){var axesMap=this._axesMap;function updateAxisTicks(axes){var alignTo,axesIndices=keys(axes),len2=axesIndices.length;if(len2){for(var axisNeedsAlign=[],i=len2-1;i&gt;=0;i--){var axis=axes[+axesIndices[i]],model=axis.model,scale2=axis.scale;isIntervalOrLogScale(scale2)&amp;&amp;model.get("alignTicks")&amp;&amp;null==model.get("interval")?axisNeedsAlign.push(axis):(niceScaleExtent(scale2,model),isIntervalOrLogScale(scale2)&amp;&amp;(alignTo=axis))}axisNeedsAlign.length&amp;&amp;(alignTo||niceScaleExtent((alignTo=axisNeedsAlign.pop()).scale,alignTo.model),each$f(axisNeedsAlign,function(axis2){alignScaleTicks(axis2.scale,axis2.model,alignTo.scale)}))}}this._updateScale(ecModel,this.model),updateAxisTicks(axesMap.x),updateAxisTicks(axesMap.y);var onZeroRecords={};each$f(axesMap.x,function(xAxis){fixAxisOnZero(axesMap,"y",xAxis,onZeroRecords)}),each$f(axesMap.y,function(yAxis){fixAxisOnZero(axesMap,"x",yAxis,onZeroRecords)}),this.resize(this.model,api)},Grid2.prototype.resize=function(gridModel,api,ignoreContainLabel){var boxLayoutParams=gridModel.getBoxLayoutParams(),isContainLabel=!ignoreContainLabel&amp;&amp;gridModel.get("containLabel"),gridRect=getLayoutRect(boxLayoutParams,{width:api.getWidth(),height:api.getHeight()});this._rect=gridRect;var axesList=this._axesList;function adjustAxes(){each$f(axesList,function(axis){var isHorizontal=axis.isHorizontal(),extent3=isHorizontal?[0,gridRect.width]:[0,gridRect.height],idx=axis.inverse?1:0;axis.setExtent(extent3[idx],extent3[1-idx]),function updateAxisTransform(axis,coordBase){var axisExtent=axis.getExtent(),axisExtentSum=axisExtent[0]+axisExtent[1];axis.toGlobalCoord="x"===axis.dim?function(coord){return coord+coordBase}:function(coord){return axisExtentSum-coord+coordBase},axis.toLocalCoord="x"===axis.dim?function(coord){return coord-coordBase}:function(coord){return axisExtentSum-coord+coordBase}}(axis,isHorizontal?gridRect.x:gridRect.y)})}adjustAxes(),isContainLabel&amp;&amp;(each$f(axesList,function(axis){if(!axis.model.get(["axisLabel","inside"])){var labelUnionRect=function estimateLabelUnionRect(axis){var axisModel=axis.model,scale2=axis.scale;if(axisModel.get(["axisLabel","show"])&amp;&amp;!scale2.isBlank()){var realNumberScaleTicks,tickCount,categoryScaleExtent=scale2.getExtent();tickCount=scale2 instanceof OrdinalScale?scale2.count():(realNumberScaleTicks=scale2.getTicks()).length;var rect,axisLabelModel=axis.getLabelModel(),labelFormatter=makeLabelFormatter(axis),step=1;tickCount&gt;40&amp;&amp;(step=Math.ceil(tickCount/40));for(var i=0;i&lt;tickCount;i+=step){var label=labelFormatter(realNumberScaleTicks?realNumberScaleTicks[i]:{value:categoryScaleExtent[0]+i},i),singleRect=rotateTextRect(axisLabelModel.getTextRect(label),axisLabelModel.get("rotate")||0);rect?rect.union(singleRect):rect=singleRect}return rect}}(axis);if(labelUnionRect){var dim=axis.isHorizontal()?"height":"width",margin=axis.model.get(["axisLabel","margin"]);gridRect[dim]-=labelUnionRect[dim]+margin,"top"===axis.position?gridRect.y+=labelUnionRect.height+margin:"left"===axis.position&amp;&amp;(gridRect.x+=labelUnionRect.width+margin)}}}),adjustAxes()),each$f(this._coordsList,function(coord){coord.calcAffineTransform()})},Grid2.prototype.getAxis=function(dim,axisIndex){var axesMapOnDim=this._axesMap[dim];if(null!=axesMapOnDim)return axesMapOnDim[axisIndex||0]},Grid2.prototype.getAxes=function(){return this._axesList.slice()},Grid2.prototype.getCartesian=function(xAxisIndex,yAxisIndex){if(null!=xAxisIndex&amp;&amp;null!=yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex;return this._coordsMap[key]}isObject$3(xAxisIndex)&amp;&amp;(yAxisIndex=xAxisIndex.yAxisIndex,xAxisIndex=xAxisIndex.xAxisIndex);for(var i=0,coordList=this._coordsList;i&lt;coordList.length;i++)if(coordList[i].getAxis("x").index===xAxisIndex||coordList[i].getAxis("y").index===yAxisIndex)return coordList[i]},Grid2.prototype.getCartesians=function(){return this._coordsList.slice()},Grid2.prototype.convertToPixel=function(ecModel,finder,value){var target=this._findConvertTarget(finder);return target.cartesian?target.cartesian.dataToPoint(value):target.axis?target.axis.toGlobalCoord(target.axis.dataToCoord(value)):null},Grid2.prototype.convertFromPixel=function(ecModel,finder,value){var target=this._findConvertTarget(finder);return target.cartesian?target.cartesian.pointToData(value):target.axis?target.axis.coordToData(target.axis.toLocalCoord(value)):null},Grid2.prototype._findConvertTarget=function(finder){var cartesian,axis,seriesModel=finder.seriesModel,xAxisModel=finder.xAxisModel||seriesModel&amp;&amp;seriesModel.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],yAxisModel=finder.yAxisModel||seriesModel&amp;&amp;seriesModel.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],gridModel=finder.gridModel,coordsList=this._coordsList;if(seriesModel)indexOf(coordsList,cartesian=seriesModel.coordinateSystem)&lt;0&amp;&amp;(cartesian=null);else if(xAxisModel&amp;&amp;yAxisModel)cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex);else if(xAxisModel)axis=this.getAxis("x",xAxisModel.componentIndex);else if(yAxisModel)axis=this.getAxis("y",yAxisModel.componentIndex);else if(gridModel){gridModel.coordinateSystem===this&amp;&amp;(cartesian=this._coordsList[0])}return{cartesian:cartesian,axis:axis}},Grid2.prototype.containPoint=function(point){var coord=this._coordsList[0];if(coord)return coord.containPoint(point)},Grid2.prototype._initCartesian=function(gridModel,ecModel,api){var _this=this,grid=this,axisPositionUsed={left:!1,right:!1,top:!1,bottom:!1},axesMap={x:{},y:{}},axesCount={x:0,y:0};if(ecModel.eachComponent("xAxis",createAxisCreator("x"),this),ecModel.eachComponent("yAxis",createAxisCreator("y"),this),!axesCount.x||!axesCount.y)return this._axesMap={},void(this._axesList=[]);function createAxisCreator(dimName){return function(axisModel,idx){if(isAxisUsedInTheGrid(axisModel,gridModel)){var axisPosition=axisModel.get("position");"x"===dimName?"top"!==axisPosition&amp;&amp;"bottom"!==axisPosition&amp;&amp;(axisPosition=axisPositionUsed.bottom?"top":"bottom"):"left"!==axisPosition&amp;&amp;"right"!==axisPosition&amp;&amp;(axisPosition=axisPositionUsed.left?"right":"left"),axisPositionUsed[axisPosition]=!0;var axis=new Axis2D(dimName,createScaleByModel$1(axisModel),[0,0],axisModel.get("type"),axisPosition),isCategory2="category"===axis.type;axis.onBand=isCategory2&amp;&amp;axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axisModel.axis=axis,axis.model=axisModel,axis.grid=grid,axis.index=idx,grid._axesList.push(axis),axesMap[dimName][idx]=axis,axesCount[dimName]++}}}this._axesMap=axesMap,each$f(axesMap.x,function(xAxis,xAxisIndex){each$f(axesMap.y,function(yAxis,yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex,cartesian=new Cartesian2D(key);cartesian.master=_this,cartesian.model=gridModel,_this._coordsMap[key]=cartesian,_this._coordsList.push(cartesian),cartesian.addAxis(xAxis),cartesian.addAxis(yAxis)})})},Grid2.prototype._updateScale=function(ecModel,gridModel){function unionExtent(data,axis){each$f(getDataDimensionsOnAxis(data,axis.dim),function(dim){axis.scale.unionExtentFromData(data,dim)})}each$f(this._axesList,function(axis){if(axis.scale.setExtent(1/0,-1/0),"category"===axis.type){var categorySortInfo=axis.model.get("categorySortInfo");axis.scale.setSortInfo(categorySortInfo)}}),ecModel.eachSeries(function(seriesModel){if(isCartesian2DSeries(seriesModel)){var axesModelMap=findAxisModels(seriesModel),xAxisModel=axesModelMap.xAxisModel,yAxisModel=axesModelMap.yAxisModel;if(!isAxisUsedInTheGrid(xAxisModel,gridModel)||!isAxisUsedInTheGrid(yAxisModel,gridModel))return;var cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex),data=seriesModel.getData(),xAxis=cartesian.getAxis("x"),yAxis=cartesian.getAxis("y");unionExtent(data,xAxis),unionExtent(data,yAxis)}},this)},Grid2.prototype.getTooltipAxes=function(dim){var baseAxes=[],otherAxes=[];return each$f(this.getCartesians(),function(cartesian){var baseAxis=null!=dim&amp;&amp;"auto"!==dim?cartesian.getAxis(dim):cartesian.getBaseAxis(),otherAxis=cartesian.getOtherAxis(baseAxis);indexOf(baseAxes,baseAxis)&lt;0&amp;&amp;baseAxes.push(baseAxis),indexOf(otherAxes,otherAxis)&lt;0&amp;&amp;otherAxes.push(otherAxis)}),{baseAxes:baseAxes,otherAxes:otherAxes}},Grid2.create=function(ecModel,api){var grids=[];return ecModel.eachComponent("grid",function(gridModel,idx){var grid=new Grid2(gridModel,ecModel,api);grid.name="grid_"+idx,grid.resize(gridModel,api,!0),gridModel.coordinateSystem=grid,grids.push(grid)}),ecModel.eachSeries(function(seriesModel){if(isCartesian2DSeries(seriesModel)){var axesModelMap=findAxisModels(seriesModel),xAxisModel=axesModelMap.xAxisModel,yAxisModel=axesModelMap.yAxisModel,grid=xAxisModel.getCoordSysModel().coordinateSystem;seriesModel.coordinateSystem=grid.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex)}}),grids},Grid2.dimensions=cartesian2DDimensions,Grid2}();function isAxisUsedInTheGrid(axisModel,gridModel){return axisModel.getCoordSysModel()===gridModel}function fixAxisOnZero(axesMap,otherAxisDim,axis,onZeroRecords){axis.getAxesOnZeroOf=function(){return otherAxisOnZeroOf?[otherAxisOnZeroOf]:[]};var otherAxisOnZeroOf,otherAxes=axesMap[otherAxisDim],axisModel=axis.model,onZero=axisModel.get(["axisLine","onZero"]),onZeroAxisIndex=axisModel.get(["axisLine","onZeroAxisIndex"]);if(onZero){if(null!=onZeroAxisIndex)canOnZeroToAxis(otherAxes[onZeroAxisIndex])&amp;&amp;(otherAxisOnZeroOf=otherAxes[onZeroAxisIndex]);else for(var idx in otherAxes)if(otherAxes.hasOwnProperty(idx)&amp;&amp;canOnZeroToAxis(otherAxes[idx])&amp;&amp;!onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]){otherAxisOnZeroOf=otherAxes[idx];break}otherAxisOnZeroOf&amp;&amp;(onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)]=!0)}function getOnZeroRecordKey(axis2){return axis2.dim+"_"+axis2.index}}function canOnZeroToAxis(axis){return axis&amp;&amp;"category"!==axis.type&amp;&amp;"time"!==axis.type&amp;&amp;function ifAxisCrossZero(axis){var dataExtent=axis.scale.getExtent(),min3=dataExtent[0],max3=dataExtent[1];return!(min3&gt;0&amp;&amp;max3&gt;0||min3&lt;0&amp;&amp;max3&lt;0)}(axis)}var PI$3=Math.PI,AxisBuilder=function(){function AxisBuilder2(axisModel,opt){this.group=new Group$3,this.opt=opt,this.axisModel=axisModel,defaults(opt,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var transformGroup=new Group$3({x:opt.position[0],y:opt.position[1],rotation:opt.rotation});transformGroup.updateTransform(),this._transformGroup=transformGroup}return AxisBuilder2.prototype.hasBuilder=function(name){return!!builders[name]},AxisBuilder2.prototype.add=function(name){builders[name](this.opt,this.axisModel,this.group,this._transformGroup)},AxisBuilder2.prototype.getGroup=function(){return this.group},AxisBuilder2.innerTextLayout=function(axisRotation,textRotation,direction){var textAlign,textVerticalAlign,rotationDiff=remRadian(textRotation-axisRotation);return isRadianAroundZero(rotationDiff)?(textVerticalAlign=direction&gt;0?"top":"bottom",textAlign="center"):isRadianAroundZero(rotationDiff-PI$3)?(textVerticalAlign=direction&gt;0?"bottom":"top",textAlign="center"):(textVerticalAlign="middle",textAlign=rotationDiff&gt;0&amp;&amp;rotationDiff&lt;PI$3?direction&gt;0?"right":"left":direction&gt;0?"left":"right"),{rotation:rotationDiff,textAlign:textAlign,textVerticalAlign:textVerticalAlign}},AxisBuilder2.makeAxisEventDataBase=function(axisModel){var eventData={componentType:axisModel.mainType,componentIndex:axisModel.componentIndex};return eventData[axisModel.mainType+"Index"]=axisModel.componentIndex,eventData},AxisBuilder2.isLabelSilent=function(axisModel){var tooltipOpt=axisModel.get("tooltip");return axisModel.get("silent")||!(axisModel.get("triggerEvent")||tooltipOpt&amp;&amp;tooltipOpt.show)},AxisBuilder2}(),builders={axisLine:function(opt,axisModel,group,transformGroup){var shown=axisModel.get(["axisLine","show"]);if("auto"===shown&amp;&amp;opt.handleAutoShown&amp;&amp;(shown=opt.handleAutoShown("axisLine")),shown){var extent3=axisModel.axis.getExtent(),matrix2=transformGroup.transform,pt12=[extent3[0],0],pt22=[extent3[1],0],inverse=pt12[0]&gt;pt22[0];matrix2&amp;&amp;(applyTransform$1(pt12,pt12,matrix2),applyTransform$1(pt22,pt22,matrix2));var lineStyle=extend({lineCap:"round"},axisModel.getModel(["axisLine","lineStyle"]).getLineStyle()),line=new Line$1({shape:{x1:pt12[0],y1:pt12[1],x2:pt22[0],y2:pt22[1]},style:lineStyle,strokeContainThreshold:opt.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(line.shape,line.style.lineWidth),line.anid="line",group.add(line);var arrows=axisModel.get(["axisLine","symbol"]);if(null!=arrows){var arrowSize=axisModel.get(["axisLine","symbolSize"]);isString(arrows)&amp;&amp;(arrows=[arrows,arrows]),(isString(arrowSize)||isNumber(arrowSize))&amp;&amp;(arrowSize=[arrowSize,arrowSize]);var arrowOffset=normalizeSymbolOffset(axisModel.get(["axisLine","symbolOffset"])||0,arrowSize),symbolWidth_1=arrowSize[0],symbolHeight_1=arrowSize[1];each$f([{rotate:opt.rotation+Math.PI/2,offset:arrowOffset[0],r:0},{rotate:opt.rotation-Math.PI/2,offset:arrowOffset[1],r:Math.sqrt((pt12[0]-pt22[0])*(pt12[0]-pt22[0])+(pt12[1]-pt22[1])*(pt12[1]-pt22[1]))}],function(point,index){if("none"!==arrows[index]&amp;&amp;null!=arrows[index]){var symbol=createSymbol$1(arrows[index],-symbolWidth_1/2,-symbolHeight_1/2,symbolWidth_1,symbolHeight_1,lineStyle.stroke,!0),r=point.r+point.offset,pt=inverse?pt22:pt12;symbol.attr({rotation:point.rotate,x:pt[0]+r*Math.cos(opt.rotation),y:pt[1]-r*Math.sin(opt.rotation),silent:!0,z2:11}),group.add(symbol)}})}}},axisTickLabel:function(opt,axisModel,group,transformGroup){var ticksEls=function buildAxisMajorTicks(group,transformGroup,axisModel,opt){var axis=axisModel.axis,tickModel=axisModel.getModel("axisTick"),shown=tickModel.get("show");"auto"===shown&amp;&amp;opt.handleAutoShown&amp;&amp;(shown=opt.handleAutoShown("axisTick"));if(!shown||axis.scale.isBlank())return;for(var lineStyleModel=tickModel.getModel("lineStyle"),tickEndCoord=opt.tickDirection*tickModel.get("length"),ticksEls=createTicks(axis.getTicksCoords(),transformGroup.transform,tickEndCoord,defaults(lineStyleModel.getLineStyle(),{stroke:axisModel.get(["axisLine","lineStyle","color"])}),"ticks"),i=0;i&lt;ticksEls.length;i++)group.add(ticksEls[i]);return ticksEls}(group,transformGroup,axisModel,opt),labelEls=function buildAxisLabel(group,transformGroup,axisModel,opt){var axis=axisModel.axis,show=retrieve(opt.axisLabelShow,axisModel.get(["axisLabel","show"]));if(!show||axis.scale.isBlank())return;var labelModel=axisModel.getModel("axisLabel"),labelMargin=labelModel.get("margin"),labels=axis.getViewLabels(),labelRotation=(retrieve(opt.labelRotate,labelModel.get("rotate"))||0)*PI$3/180,labelLayout2=AxisBuilder.innerTextLayout(opt.rotation,labelRotation,opt.labelDirection),rawCategoryData=axisModel.getCategories&amp;&amp;axisModel.getCategories(!0),labelEls=[],silent=AxisBuilder.isLabelSilent(axisModel),triggerEvent=axisModel.get("triggerEvent");return each$f(labels,function(labelItem,index){var tickValue="ordinal"===axis.scale.type?axis.scale.getRawOrdinalNumber(labelItem.tickValue):labelItem.tickValue,formattedLabel=labelItem.formattedLabel,rawLabel=labelItem.rawLabel,itemLabelModel=labelModel;if(rawCategoryData&amp;&amp;rawCategoryData[tickValue]){var rawCategoryItem=rawCategoryData[tickValue];isObject$3(rawCategoryItem)&amp;&amp;rawCategoryItem.textStyle&amp;&amp;(itemLabelModel=new Model(rawCategoryItem.textStyle,labelModel,axisModel.ecModel))}var textColor=itemLabelModel.getTextColor()||axisModel.get(["axisLine","lineStyle","color"]),tickCoord=axis.dataToCoord(tickValue),align=itemLabelModel.getShallow("align",!0)||labelLayout2.textAlign,alignMin=retrieve2(itemLabelModel.getShallow("alignMinLabel",!0),align),alignMax=retrieve2(itemLabelModel.getShallow("alignMaxLabel",!0),align),verticalAlign=itemLabelModel.getShallow("verticalAlign",!0)||itemLabelModel.getShallow("baseline",!0)||labelLayout2.textVerticalAlign,verticalAlignMin=retrieve2(itemLabelModel.getShallow("verticalAlignMinLabel",!0),verticalAlign),verticalAlignMax=retrieve2(itemLabelModel.getShallow("verticalAlignMaxLabel",!0),verticalAlign),textEl=new ZRText({x:tickCoord,y:opt.labelOffset+opt.labelDirection*labelMargin,rotation:labelLayout2.rotation,silent:silent,z2:10+(labelItem.level||0),style:createTextStyle$1(itemLabelModel,{text:formattedLabel,align:0===index?alignMin:index===labels.length-1?alignMax:align,verticalAlign:0===index?verticalAlignMin:index===labels.length-1?verticalAlignMax:verticalAlign,fill:isFunction(textColor)?textColor("category"===axis.type?rawLabel:"value"===axis.type?tickValue+"":tickValue,index):textColor})});if(textEl.anid="label_"+tickValue,setTooltipConfig({el:textEl,componentModel:axisModel,itemName:formattedLabel,formatterParamsExtra:{isTruncated:function(){return textEl.isTruncated},value:rawLabel,tickIndex:index}}),triggerEvent){var eventData=AxisBuilder.makeAxisEventDataBase(axisModel);eventData.targetType="axisLabel",eventData.value=rawLabel,eventData.tickIndex=index,"category"===axis.type&amp;&amp;(eventData.dataIndex=tickValue),getECData(textEl).eventData=eventData}transformGroup.add(textEl),textEl.updateTransform(),labelEls.push(textEl),group.add(textEl),textEl.decomposeTransform()}),labelEls}(group,transformGroup,axisModel,opt);(function fixMinMaxLabelShow(axisModel,labelEls,tickEls){if(shouldShowAllLabels(axisModel.axis))return;var showMinLabel=axisModel.get(["axisLabel","showMinLabel"]),showMaxLabel=axisModel.get(["axisLabel","showMaxLabel"]);labelEls=labelEls||[],tickEls=tickEls||[];var firstLabel=labelEls[0],nextLabel=labelEls[1],lastLabel=labelEls[labelEls.length-1],prevLabel=labelEls[labelEls.length-2],firstTick=tickEls[0],nextTick=tickEls[1],lastTick=tickEls[tickEls.length-1],prevTick=tickEls[tickEls.length-2];!1===showMinLabel?(ignoreEl(firstLabel),ignoreEl(firstTick)):isTwoLabelOverlapped(firstLabel,nextLabel)&amp;&amp;(showMinLabel?(ignoreEl(nextLabel),ignoreEl(nextTick)):(ignoreEl(firstLabel),ignoreEl(firstTick)));!1===showMaxLabel?(ignoreEl(lastLabel),ignoreEl(lastTick)):isTwoLabelOverlapped(prevLabel,lastLabel)&amp;&amp;(showMaxLabel?(ignoreEl(prevLabel),ignoreEl(prevTick)):(ignoreEl(lastLabel),ignoreEl(lastTick)))}(axisModel,labelEls,ticksEls),function buildAxisMinorTicks(group,transformGroup,axisModel,tickDirection){var axis=axisModel.axis,minorTickModel=axisModel.getModel("minorTick");if(!minorTickModel.get("show")||axis.scale.isBlank())return;var minorTicksCoords=axis.getMinorTicksCoords();if(!minorTicksCoords.length)return;for(var lineStyleModel=minorTickModel.getModel("lineStyle"),tickEndCoord=tickDirection*minorTickModel.get("length"),minorTickLineStyle=defaults(lineStyleModel.getLineStyle(),defaults(axisModel.getModel("axisTick").getLineStyle(),{stroke:axisModel.get(["axisLine","lineStyle","color"])})),i=0;i&lt;minorTicksCoords.length;i++)for(var minorTicksEls=createTicks(minorTicksCoords[i],transformGroup.transform,tickEndCoord,minorTickLineStyle,"minorticks_"+i),k=0;k&lt;minorTicksEls.length;k++)group.add(minorTicksEls[k])}(group,transformGroup,axisModel,opt.tickDirection),axisModel.get(["axisLabel","hideOverlap"]))&amp;&amp;hideOverlap(prepareLayoutList(map$1(labelEls,function(label){return{label:label,priority:label.z2,defaultAttr:{ignore:label.ignore}}})))},axisName:function(opt,axisModel,group,transformGroup){var name=retrieve(opt.axisName,axisModel.get("name"));if(name){var labelLayout2,axisNameAvailableWidth,nameLocation=axisModel.get("nameLocation"),nameDirection=opt.nameDirection,textStyleModel=axisModel.getModel("nameTextStyle"),gap=axisModel.get("nameGap")||0,extent3=axisModel.axis.getExtent(),gapSignal=extent3[0]&gt;extent3[1]?-1:1,pos=["start"===nameLocation?extent3[0]-gapSignal*gap:"end"===nameLocation?extent3[1]+gapSignal*gap:(extent3[0]+extent3[1])/2,isNameLocationCenter(nameLocation)?opt.labelOffset+nameDirection*gap:0],nameRotation=axisModel.get("nameRotate");null!=nameRotation&amp;&amp;(nameRotation=nameRotation*PI$3/180),isNameLocationCenter(nameLocation)?labelLayout2=AxisBuilder.innerTextLayout(opt.rotation,null!=nameRotation?nameRotation:opt.rotation,nameDirection):(labelLayout2=function endTextLayout(rotation,textPosition,textRotate,extent3){var textAlign,textVerticalAlign,rotationDiff=remRadian(textRotate-rotation),inverse=extent3[0]&gt;extent3[1],onLeft="start"===textPosition&amp;&amp;!inverse||"start"!==textPosition&amp;&amp;inverse;isRadianAroundZero(rotationDiff-PI$3/2)?(textVerticalAlign=onLeft?"bottom":"top",textAlign="center"):isRadianAroundZero(rotationDiff-1.5*PI$3)?(textVerticalAlign=onLeft?"top":"bottom",textAlign="center"):(textVerticalAlign="middle",textAlign=rotationDiff&lt;1.5*PI$3&amp;&amp;rotationDiff&gt;PI$3/2?onLeft?"left":"right":onLeft?"right":"left");return{rotation:rotationDiff,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}(opt.rotation,nameLocation,nameRotation||0,extent3),null!=(axisNameAvailableWidth=opt.axisNameAvailableWidth)&amp;&amp;(axisNameAvailableWidth=Math.abs(axisNameAvailableWidth/Math.sin(labelLayout2.rotation)),!isFinite(axisNameAvailableWidth)&amp;&amp;(axisNameAvailableWidth=null)));var textFont=textStyleModel.getFont(),truncateOpt=axisModel.get("nameTruncate",!0)||{},ellipsis=truncateOpt.ellipsis,maxWidth=retrieve(opt.nameTruncateMaxWidth,truncateOpt.maxWidth,axisNameAvailableWidth),textEl=new ZRText({x:pos[0],y:pos[1],rotation:labelLayout2.rotation,silent:AxisBuilder.isLabelSilent(axisModel),style:createTextStyle$1(textStyleModel,{text:name,font:textFont,overflow:"truncate",width:maxWidth,ellipsis:ellipsis,fill:textStyleModel.getTextColor()||axisModel.get(["axisLine","lineStyle","color"]),align:textStyleModel.get("align")||labelLayout2.textAlign,verticalAlign:textStyleModel.get("verticalAlign")||labelLayout2.textVerticalAlign}),z2:1});if(setTooltipConfig({el:textEl,componentModel:axisModel,itemName:name}),textEl.__fullText=name,textEl.anid="name",axisModel.get("triggerEvent")){var eventData=AxisBuilder.makeAxisEventDataBase(axisModel);eventData.targetType="axisName",eventData.name=name,getECData(textEl).eventData=eventData}transformGroup.add(textEl),textEl.updateTransform(),group.add(textEl),textEl.decomposeTransform()}}};function ignoreEl(el){el&amp;&amp;(el.ignore=!0)}function isTwoLabelOverlapped(current,next){var firstRect=current&amp;&amp;current.getBoundingRect().clone(),nextRect=next&amp;&amp;next.getBoundingRect().clone();if(firstRect&amp;&amp;nextRect){var mRotationBack=identity([]);return rotate(mRotationBack,mRotationBack,-current.rotation),firstRect.applyTransform(mul([],mRotationBack,current.getLocalTransform())),nextRect.applyTransform(mul([],mRotationBack,next.getLocalTransform())),firstRect.intersect(nextRect)}}function isNameLocationCenter(nameLocation){return"middle"===nameLocation||"center"===nameLocation}function createTicks(ticksCoords,tickTransform,tickEndCoord,tickLineStyle,anidPrefix){for(var tickEls=[],pt12=[],pt22=[],i=0;i&lt;ticksCoords.length;i++){var tickCoord=ticksCoords[i].coord;pt12[0]=tickCoord,pt12[1]=0,pt22[0]=tickCoord,pt22[1]=tickEndCoord,tickTransform&amp;&amp;(applyTransform$1(pt12,pt12,tickTransform),applyTransform$1(pt22,pt22,tickTransform));var tickEl=new Line$1({shape:{x1:pt12[0],y1:pt12[1],x2:pt22[0],y2:pt22[1]},style:tickLineStyle,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(tickEl.shape,tickEl.style.lineWidth),tickEl.anid=anidPrefix+"_"+ticksCoords[i].tickValue,tickEls.push(tickEl)}return tickEls}function collect(ecModel,api){var result={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function collectAxesInfo(result,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip"),globalAxisPointerModel=ecModel.getComponent("axisPointer"),linksOption=globalAxisPointerModel.get("link",!0)||[],linkGroups=[];each$f(api.getCoordinateSystems(),function(coordSys){if(coordSys.axisPointerEnabled){var coordSysKey=makeKey(coordSys.model),axesInfoInCoordSys=result.coordSysAxesInfo[coordSysKey]={};result.coordSysMap[coordSysKey]=coordSys;var baseTooltipModel=coordSys.model.getModel("tooltip",globalTooltipModel);if(each$f(coordSys.getAxes(),curry$1(saveTooltipAxisInfo,!1,null)),coordSys.getTooltipAxes&amp;&amp;globalTooltipModel&amp;&amp;baseTooltipModel.get("show")){var triggerAxis="axis"===baseTooltipModel.get("trigger"),cross="cross"===baseTooltipModel.get(["axisPointer","type"]),tooltipAxes=coordSys.getTooltipAxes(baseTooltipModel.get(["axisPointer","axis"]));(triggerAxis||cross)&amp;&amp;each$f(tooltipAxes.baseAxes,curry$1(saveTooltipAxisInfo,!cross||"cross",triggerAxis)),cross&amp;&amp;each$f(tooltipAxes.otherAxes,curry$1(saveTooltipAxisInfo,"cross",!1))}}function saveTooltipAxisInfo(fromTooltip,triggerTooltip,axis){var axisPointerModel=axis.model.getModel("axisPointer",globalAxisPointerModel),axisPointerShow=axisPointerModel.get("show");if(axisPointerShow&amp;&amp;("auto"!==axisPointerShow||fromTooltip||isHandleTrigger(axisPointerModel))){null==triggerTooltip&amp;&amp;(triggerTooltip=axisPointerModel.get("triggerTooltip")),axisPointerModel=fromTooltip?function makeAxisPointerModel(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip){var tooltipAxisPointerModel=baseTooltipModel.getModel("axisPointer"),volatileOption={};each$f(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(field){volatileOption[field]=clone$4(tooltipAxisPointerModel.get(field))}),volatileOption.snap="category"!==axis.type&amp;&amp;!!triggerTooltip,"cross"===tooltipAxisPointerModel.get("type")&amp;&amp;(volatileOption.type="line");var labelOption=volatileOption.label||(volatileOption.label={});if(null==labelOption.show&amp;&amp;(labelOption.show=!1),"cross"===fromTooltip){var tooltipAxisPointerLabelShow=tooltipAxisPointerModel.get(["label","show"]);if(labelOption.show=null==tooltipAxisPointerLabelShow||tooltipAxisPointerLabelShow,!triggerTooltip){var crossStyle=volatileOption.lineStyle=tooltipAxisPointerModel.get("crossStyle");crossStyle&amp;&amp;defaults(labelOption,crossStyle.textStyle)}}return axis.model.getModel("axisPointer",new Model(volatileOption,globalAxisPointerModel,ecModel))}(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip):axisPointerModel;var snap=axisPointerModel.get("snap"),triggerEmphasis=axisPointerModel.get("triggerEmphasis"),axisKey=makeKey(axis.model),involveSeries=triggerTooltip||snap||"category"===axis.type,axisInfo=result.axesInfo[axisKey]={key:axisKey,axis:axis,coordSys:coordSys,axisPointerModel:axisPointerModel,triggerTooltip:triggerTooltip,triggerEmphasis:triggerEmphasis,involveSeries:involveSeries,snap:snap,useHandle:isHandleTrigger(axisPointerModel),seriesModels:[],linkGroup:null};axesInfoInCoordSys[axisKey]=axisInfo,result.seriesInvolved=result.seriesInvolved||involveSeries;var groupIndex=function getLinkGroupIndex(linksOption,axis){for(var axisModel=axis.model,dim=axis.dim,i=0;i&lt;linksOption.length;i++){var linkOption=linksOption[i]||{};if(checkPropInLink(linkOption[dim+"AxisId"],axisModel.id)||checkPropInLink(linkOption[dim+"AxisIndex"],axisModel.componentIndex)||checkPropInLink(linkOption[dim+"AxisName"],axisModel.name))return i}}(linksOption,axis);if(null!=groupIndex){var linkGroup=linkGroups[groupIndex]||(linkGroups[groupIndex]={axesInfo:{}});linkGroup.axesInfo[axisKey]=axisInfo,linkGroup.mapper=linksOption[groupIndex].mapper,axisInfo.linkGroup=linkGroup}}}})}(result,ecModel,api),result.seriesInvolved&amp;&amp;function collectSeriesInfo(result,ecModel){ecModel.eachSeries(function(seriesModel){var coordSys=seriesModel.coordinateSystem,seriesTooltipTrigger=seriesModel.get(["tooltip","trigger"],!0),seriesTooltipShow=seriesModel.get(["tooltip","show"],!0);coordSys&amp;&amp;"none"!==seriesTooltipTrigger&amp;&amp;!1!==seriesTooltipTrigger&amp;&amp;"item"!==seriesTooltipTrigger&amp;&amp;!1!==seriesTooltipShow&amp;&amp;!1!==seriesModel.get(["axisPointer","show"],!0)&amp;&amp;each$f(result.coordSysAxesInfo[makeKey(coordSys.model)],function(axisInfo){var axis=axisInfo.axis;coordSys.getAxis(axis.dim)===axis&amp;&amp;(axisInfo.seriesModels.push(seriesModel),null==axisInfo.seriesDataCount&amp;&amp;(axisInfo.seriesDataCount=0),axisInfo.seriesDataCount+=seriesModel.getData().count())})})}(result,ecModel),result}function checkPropInLink(linkPropValue,axisPropValue){return"all"===linkPropValue||isArray$1(linkPropValue)&amp;&amp;indexOf(linkPropValue,axisPropValue)&gt;=0||linkPropValue===axisPropValue}function getAxisInfo$1(axisModel){var coordSysAxesInfo=(axisModel.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return coordSysAxesInfo&amp;&amp;coordSysAxesInfo.axesInfo[makeKey(axisModel)]}function isHandleTrigger(axisPointerModel){return!!axisPointerModel.get(["handle","show"])}function makeKey(model){return model.type+"||"+model.id}var axisPointerClazz={},AxisView=function(_super){function AxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=AxisView2.type,_this}return __extends$1(AxisView2,_super),AxisView2.prototype.render=function(axisModel,ecModel,api,payload){this.axisPointerClass&amp;&amp;function fixValue(axisModel){var axisInfo=getAxisInfo$1(axisModel);if(axisInfo){var axisPointerModel=axisInfo.axisPointerModel,scale2=axisInfo.axis.scale,option=axisPointerModel.option,status=axisPointerModel.get("status"),value=axisPointerModel.get("value");null!=value&amp;&amp;(value=scale2.parse(value));var useHandle=isHandleTrigger(axisPointerModel);null==status&amp;&amp;(option.status=useHandle?"show":"hide");var extent3=scale2.getExtent().slice();extent3[0]&gt;extent3[1]&amp;&amp;extent3.reverse(),(null==value||value&gt;extent3[1])&amp;&amp;(value=extent3[1]),value&lt;extent3[0]&amp;&amp;(value=extent3[0]),option.value=value,useHandle&amp;&amp;(option.status=axisInfo.axis.scale.isBlank()?"hide":"show")}}(axisModel),_super.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(axisModel,api,!0)},AxisView2.prototype.updateAxisPointer=function(axisModel,ecModel,api,payload){this._doUpdateAxisPointerClass(axisModel,api,!1)},AxisView2.prototype.remove=function(ecModel,api){var axisPointer=this._axisPointer;axisPointer&amp;&amp;axisPointer.remove(api)},AxisView2.prototype.dispose=function(ecModel,api){this._disposeAxisPointer(api),_super.prototype.dispose.apply(this,arguments)},AxisView2.prototype._doUpdateAxisPointerClass=function(axisModel,api,forceRender){var Clazz=AxisView2.getAxisPointerClass(this.axisPointerClass);if(Clazz){var axisPointerModel=function getAxisPointerModel(axisModel){var axisInfo=getAxisInfo$1(axisModel);return axisInfo&amp;&amp;axisInfo.axisPointerModel}(axisModel);axisPointerModel?(this._axisPointer||(this._axisPointer=new Clazz)).render(axisModel,axisPointerModel,api,forceRender):this._disposeAxisPointer(api)}},AxisView2.prototype._disposeAxisPointer=function(api){this._axisPointer&amp;&amp;this._axisPointer.dispose(api),this._axisPointer=null},AxisView2.registerAxisPointerClass=function(type,clazz){axisPointerClazz[type]=clazz},AxisView2.getAxisPointerClass=function(type){return type&amp;&amp;axisPointerClazz[type]},AxisView2.type="axis",AxisView2}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(axisView,axisGroup,axisModel,gridModel){var axis=axisModel.axis;if(!axis.scale.isBlank()){var splitAreaModel=axisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),gridRect=gridModel.coordinateSystem.getRect(),ticksCoords=axis.getTicksCoords({tickModel:splitAreaModel,clamp:!0});if(ticksCoords.length){var areaColorsLen=areaColors.length,lastSplitAreaColors=inner$f(axisView).splitAreaColors,newSplitAreaColors=createHashMap(),colorIndex=0;if(lastSplitAreaColors)for(var i=0;i&lt;ticksCoords.length;i++){var cIndex=lastSplitAreaColors.get(ticksCoords[i].tickValue);if(null!=cIndex){colorIndex=(cIndex+(areaColorsLen-1)*i)%areaColorsLen;break}}var prev=axis.toGlobalCoord(ticksCoords[0].coord),areaStyle=areaStyleModel.getAreaStyle();areaColors=isArray$1(areaColors)?areaColors:[areaColors];for(i=1;i&lt;ticksCoords.length;i++){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord),x=void 0,y=void 0,width=void 0,height=void 0;axis.isHorizontal()?(x=prev,y=gridRect.y,width=tickCoord-x,height=gridRect.height,prev=x+width):(x=gridRect.x,y=prev,width=gridRect.width,prev=y+(height=tickCoord-y));var tickValue=ticksCoords[i-1].tickValue;null!=tickValue&amp;&amp;newSplitAreaColors.set(tickValue,colorIndex),axisGroup.add(new Rect$2({anid:null!=tickValue?"area_"+tickValue:null,shape:{x:x,y:y,width:width,height:height},style:defaults({fill:areaColors[colorIndex]},areaStyle),autoBatch:!0,silent:!0})),colorIndex=(colorIndex+1)%areaColorsLen}inner$f(axisView).splitAreaColors=newSplitAreaColors}}}function rectCoordAxisHandleRemove(axisView){inner$f(axisView).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(_super){function CartesianAxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CartesianAxisView2.type,_this.axisPointerClass="CartesianAxisPointer",_this}return __extends$1(CartesianAxisView2,_super),CartesianAxisView2.prototype.render=function(axisModel,ecModel,api,payload){this.group.removeAll();var oldAxisGroup=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),axisModel.get("show")){var gridModel=axisModel.getCoordSysModel(),layout2=layout$2(gridModel,axisModel),axisBuilder=new AxisBuilder(axisModel,extend({handleAutoShown:function(elementType){for(var cartesians=gridModel.coordinateSystem.getCartesians(),i=0;i&lt;cartesians.length;i++)if(isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale))return!0;return!1}},layout2));each$f(axisBuilderAttrs$3,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),each$f(selfBuilderAttrs$2,function(name){axisModel.get([name,"show"])&amp;&amp;axisElementBuilders$2[name](this,this._axisGroup,axisModel,gridModel)},this),payload&amp;&amp;"changeAxisOrder"===payload.type&amp;&amp;payload.isInitSort||groupTransition(oldAxisGroup,this._axisGroup,axisModel),_super.prototype.render.call(this,axisModel,ecModel,api,payload)}},CartesianAxisView2.prototype.remove=function(){rectCoordAxisHandleRemove(this)},CartesianAxisView2.type="cartesianAxis",CartesianAxisView2}(AxisView),axisElementBuilders$2={splitLine:function(axisView,axisGroup,axisModel,gridModel){var axis=axisModel.axis;if(!axis.scale.isBlank()){var splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color"),showMinLine=!1!==splitLineModel.get("showMinLine"),showMaxLine=!1!==splitLineModel.get("showMaxLine");lineColors=isArray$1(lineColors)?lineColors:[lineColors];for(var gridRect=gridModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),lineCount=0,ticksCoords=axis.getTicksCoords({tickModel:splitLineModel}),p1=[],p2=[],lineStyle=lineStyleModel.getLineStyle(),i=0;i&lt;ticksCoords.length;i++){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord);if((0!==i||showMinLine)&amp;&amp;(i!==ticksCoords.length-1||showMaxLine)){var tickValue=ticksCoords[i].tickValue;isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var colorIndex=lineCount++%lineColors.length,line=new Line$1({anid:null!=tickValue?"line_"+tickValue:null,autoBatch:!0,shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:defaults({stroke:lineColors[colorIndex]},lineStyle),silent:!0});subPixelOptimizeLine(line.shape,lineStyle.lineWidth),axisGroup.add(line)}}}},minorSplitLine:function(axisView,axisGroup,axisModel,gridModel){var axis=axisModel.axis,lineStyleModel=axisModel.getModel("minorSplitLine").getModel("lineStyle"),gridRect=gridModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),minorTicksCoords=axis.getMinorTicksCoords();if(minorTicksCoords.length)for(var p1=[],p2=[],lineStyle=lineStyleModel.getLineStyle(),i=0;i&lt;minorTicksCoords.length;i++)for(var k=0;k&lt;minorTicksCoords[i].length;k++){var tickCoord=axis.toGlobalCoord(minorTicksCoords[i][k].coord);isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var line=new Line$1({anid:"minor_line_"+minorTicksCoords[i][k].tickValue,autoBatch:!0,shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:lineStyle,silent:!0});subPixelOptimizeLine(line.shape,lineStyle.lineWidth),axisGroup.add(line)}},splitArea:function(axisView,axisGroup,axisModel,gridModel){rectCoordAxisBuildSplitArea(axisView,axisGroup,axisModel,gridModel)}},CartesianXAxisView=function(_super){function CartesianXAxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CartesianXAxisView2.type,_this}return __extends$1(CartesianXAxisView2,_super),CartesianXAxisView2.type="xAxis",CartesianXAxisView2}(CartesianAxisView),CartesianYAxisView=function(_super){function CartesianYAxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CartesianXAxisView.type,_this}return __extends$1(CartesianYAxisView2,_super),CartesianYAxisView2.type="yAxis",CartesianYAxisView2}(CartesianAxisView),GridView=function(_super){function GridView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="grid",_this}return __extends$1(GridView2,_super),GridView2.prototype.render=function(gridModel,ecModel){this.group.removeAll(),gridModel.get("show")&amp;&amp;this.group.add(new Rect$2({shape:gridModel.coordinateSystem.getRect(),style:defaults({fill:gridModel.get("backgroundColor")},gridModel.getItemStyle()),silent:!0,z2:-1}))},GridView2.type="grid",GridView2}(ComponentView),extraOption={offset:0};function install$N(registers){registers.registerComponentView(GridView),registers.registerComponentModel(GridModel),registers.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(registers,"x",CartesianAxisModel,extraOption),axisModelCreator(registers,"y",CartesianAxisModel,extraOption),registers.registerComponentView(CartesianXAxisView),registers.registerComponentView(CartesianYAxisView),registers.registerPreprocessor(function(option){option.xAxis&amp;&amp;option.yAxis&amp;&amp;!option.grid&amp;&amp;(option.grid={})})}function radarLayout(ecModel){ecModel.eachSeriesByType("radar",function(seriesModel){var data=seriesModel.getData(),points2=[],coordSys=seriesModel.coordinateSystem;if(coordSys){var axes=coordSys.getIndicatorAxes();each$f(axes,function(axis,axisIndex){data.each(data.mapDimension(axes[axisIndex].dim),function(val,dataIndex){points2[dataIndex]=points2[dataIndex]||[];var point=coordSys.dataToPoint(val,axisIndex);points2[dataIndex][axisIndex]=isValidPoint(point)?point:getValueMissingPoint(coordSys)})}),data.each(function(idx){var firstPoint=find(points2[idx],function(point){return isValidPoint(point)})||getValueMissingPoint(coordSys);points2[idx].push(firstPoint.slice()),data.setItemLayout(idx,points2[idx])})}})}function isValidPoint(point){return!isNaN(point[0])&amp;&amp;!isNaN(point[1])}function getValueMissingPoint(coordSys){return[coordSys.cx,coordSys.cy]}function radarBackwardCompat(option){var polarOptArr=option.polar;if(polarOptArr){isArray$1(polarOptArr)||(polarOptArr=[polarOptArr]);var polarNotRadar_1=[];each$f(polarOptArr,function(polarOpt,idx){polarOpt.indicator?(polarOpt.type&amp;&amp;!polarOpt.shape&amp;&amp;(polarOpt.shape=polarOpt.type),option.radar=option.radar||[],isArray$1(option.radar)||(option.radar=[option.radar]),option.radar.push(polarOpt)):polarNotRadar_1.push(polarOpt)}),option.polar=polarNotRadar_1}each$f(option.series,function(seriesOpt){seriesOpt&amp;&amp;"radar"===seriesOpt.type&amp;&amp;seriesOpt.polarIndex&amp;&amp;(seriesOpt.radarIndex=seriesOpt.polarIndex)})}var RadarView$1=function(_super){function RadarView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=RadarView2.type,_this}return __extends$1(RadarView2,_super),RadarView2.prototype.render=function(seriesModel,ecModel,api){var polar=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),oldData=this._data;function createSymbol2(data2,idx){var symbolType=data2.getItemVisual(idx,"symbol")||"circle";if("none"!==symbolType){var symbolSize=normalizeSymbolSize(data2.getItemVisual(idx,"symbolSize")),symbolPath=createSymbol$1(symbolType,-1,-1,2,2),symbolRotate=data2.getItemVisual(idx,"symbolRotate")||0;return symbolPath.attr({style:{strokeNoScale:!0},z2:100,scaleX:symbolSize[0]/2,scaleY:symbolSize[1]/2,rotation:symbolRotate*Math.PI/180||0}),symbolPath}}function updateSymbols(oldPoints,newPoints,symbolGroup,data2,idx,isInit){symbolGroup.removeAll();for(var i=0;i&lt;newPoints.length-1;i++){var symbolPath=createSymbol2(data2,idx);symbolPath&amp;&amp;(symbolPath.__dimIdx=i,oldPoints[i]?(symbolPath.setPosition(oldPoints[i]),graphic$1[isInit?"initProps":"updateProps"](symbolPath,{x:newPoints[i][0],y:newPoints[i][1]},seriesModel,idx)):symbolPath.setPosition(newPoints[i]),symbolGroup.add(symbolPath))}}function getInitialPoints(points2){return map$1(points2,function(pt){return[polar.cx,polar.cy]})}data.diff(oldData).add(function(idx){var points2=data.getItemLayout(idx);if(points2){var polygon=new Polygon,polyline=new Polyline$1,target={shape:{points:points2}};polygon.shape.points=getInitialPoints(points2),polyline.shape.points=getInitialPoints(points2),initProps(polygon,target,seriesModel,idx),initProps(polyline,target,seriesModel,idx);var itemGroup=new Group$3,symbolGroup=new Group$3;itemGroup.add(polyline),itemGroup.add(polygon),itemGroup.add(symbolGroup),updateSymbols(polyline.shape.points,points2,symbolGroup,data,idx,!0),data.setItemGraphicEl(idx,itemGroup)}}).update(function(newIdx,oldIdx){var itemGroup=oldData.getItemGraphicEl(oldIdx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),target={shape:{points:data.getItemLayout(newIdx)}};target.shape.points&amp;&amp;(updateSymbols(polyline.shape.points,target.shape.points,symbolGroup,data,newIdx,!1),saveOldStyle(polygon),saveOldStyle(polyline),updateProps$1(polyline,target,seriesModel),updateProps$1(polygon,target,seriesModel),data.setItemGraphicEl(newIdx,itemGroup))}).remove(function(idx){group.remove(oldData.getItemGraphicEl(idx))}).execute(),data.eachItemGraphicEl(function(itemGroup,idx){var itemModel=data.getItemModel(idx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),itemStyle=data.getItemVisual(idx,"style"),color2=itemStyle.fill;group.add(itemGroup),polyline.useStyle(defaults(itemModel.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:color2})),setStatesStylesFromModel(polyline,itemModel,"lineStyle"),setStatesStylesFromModel(polygon,itemModel,"areaStyle");var areaStyleModel=itemModel.getModel("areaStyle"),polygonIgnore=areaStyleModel.isEmpty()&amp;&amp;areaStyleModel.parentModel.isEmpty();polygon.ignore=polygonIgnore,each$f(["emphasis","select","blur"],function(stateName){var stateModel=itemModel.getModel([stateName,"areaStyle"]),stateIgnore=stateModel.isEmpty()&amp;&amp;stateModel.parentModel.isEmpty();polygon.ensureState(stateName).ignore=stateIgnore&amp;&amp;polygonIgnore}),polygon.useStyle(defaults(areaStyleModel.getAreaStyle(),{fill:color2,opacity:.7,decal:itemStyle.decal}));var emphasisModel=itemModel.getModel("emphasis"),itemHoverStyle=emphasisModel.getModel("itemStyle").getItemStyle();symbolGroup.eachChild(function(symbolPath){if(symbolPath instanceof ZRImage){var pathStyle=symbolPath.style;symbolPath.useStyle(extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},itemStyle))}else symbolPath.useStyle(itemStyle),symbolPath.setColor(color2),symbolPath.style.strokeNoScale=!0;symbolPath.ensureState("emphasis").style=clone$4(itemHoverStyle);var defaultText=data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx),idx);(null==defaultText||isNaN(defaultText))&amp;&amp;(defaultText=""),setLabelStyle(symbolPath,getLabelStatesModels(itemModel),{labelFetcher:data.hostModel,labelDataIndex:idx,labelDimIndex:symbolPath.__dimIdx,defaultText:defaultText,inheritColor:color2,defaultOpacity:itemStyle.opacity})}),toggleHoverEmphasis(itemGroup,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}),this._data=data},RadarView2.prototype.remove=function(){this.group.removeAll(),this._data=null},RadarView2.type="radar",RadarView2}(ChartView),RadarSeriesModel=function(_super){function RadarSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=RadarSeriesModel2.type,_this.hasSymbolVisual=!0,_this}return __extends$1(RadarSeriesModel2,_super),RadarSeriesModel2.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},RadarSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},RadarSeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var data=this.getData(),indicatorAxes=this.coordinateSystem.getIndicatorAxes(),name=this.getData().getName(dataIndex),nameToDisplay=""===name?this.name:name,markerColor=retrieveVisualColorForTooltipMarker(this,dataIndex);return createTooltipMarkup("section",{header:nameToDisplay,sortBlocks:!0,blocks:map$1(indicatorAxes,function(axis){var val=data.get(data.mapDimension(axis.dim),dataIndex);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:markerColor,name:axis.name,value:val,sortParam:val})})})},RadarSeriesModel2.prototype.getTooltipPosition=function(dataIndex){if(null!=dataIndex)for(var data_1=this.getData(),coordSys=this.coordinateSystem,values=data_1.getValues(map$1(coordSys.dimensions,function(dim){return data_1.mapDimension(dim)}),dataIndex),i=0,len2=values.length;i&lt;len2;i++)if(!isNaN(values[i])){var indicatorAxes=coordSys.getIndicatorAxes();return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]),i)}},RadarSeriesModel2.type="series.radar",RadarSeriesModel2.dependencies=["radar"],RadarSeriesModel2.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},RadarSeriesModel2}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(opt,show){return defaults({show:show},opt)}var RadarModel=function(_super){function RadarModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=RadarModel2.type,_this}return __extends$1(RadarModel2,_super),RadarModel2.prototype.optionUpdated=function(){var boundaryGap=this.get("boundaryGap"),splitNumber=this.get("splitNumber"),scale2=this.get("scale"),axisLine=this.get("axisLine"),axisTick=this.get("axisTick"),axisLabel=this.get("axisLabel"),nameTextStyle=this.get("axisName"),showName=this.get(["axisName","show"]),nameFormatter=this.get(["axisName","formatter"]),nameGap=this.get("axisNameGap"),triggerEvent=this.get("triggerEvent"),indicatorModels=map$1(this.get("indicator")||[],function(indicatorOpt){null!=indicatorOpt.max&amp;&amp;indicatorOpt.max&gt;0&amp;&amp;!indicatorOpt.min?indicatorOpt.min=0:null!=indicatorOpt.min&amp;&amp;indicatorOpt.min&lt;0&amp;&amp;!indicatorOpt.max&amp;&amp;(indicatorOpt.max=0);var iNameTextStyle=nameTextStyle;null!=indicatorOpt.color&amp;&amp;(iNameTextStyle=defaults({color:indicatorOpt.color},nameTextStyle));var innerIndicatorOpt=merge(clone$4(indicatorOpt),{boundaryGap:boundaryGap,splitNumber:splitNumber,scale:scale2,axisLine:axisLine,axisTick:axisTick,axisLabel:axisLabel,name:indicatorOpt.text,showName:showName,nameLocation:"end",nameGap:nameGap,nameTextStyle:iNameTextStyle,triggerEvent:triggerEvent},!1);if(isString(nameFormatter)){var indName=innerIndicatorOpt.name;innerIndicatorOpt.name=nameFormatter.replace("{value}",null!=indName?indName:"")}else isFunction(nameFormatter)&amp;&amp;(innerIndicatorOpt.name=nameFormatter(innerIndicatorOpt.name,innerIndicatorOpt));var model=new Model(innerIndicatorOpt,null,this.ecModel);return mixin(model,AxisModelCommonMixin.prototype),model.mainType="radar",model.componentIndex=this.componentIndex,model},this);this._indicatorModels=indicatorModels},RadarModel2.prototype.getIndicatorModels=function(){return this._indicatorModels},RadarModel2.type="radar",RadarModel2.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},RadarModel2}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(_super){function RadarView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=RadarView2.type,_this}return __extends$1(RadarView2,_super),RadarView2.prototype.render=function(radarModel,ecModel,api){this.group.removeAll(),this._buildAxes(radarModel),this._buildSplitLineAndArea(radarModel)},RadarView2.prototype._buildAxes=function(radarModel){var radar=radarModel.coordinateSystem;each$f(map$1(radar.getIndicatorAxes(),function(indicatorAxis){var axisName=indicatorAxis.model.get("showName")?indicatorAxis.name:"";return new AxisBuilder(indicatorAxis.model,{axisName:axisName,position:[radar.cx,radar.cy],rotation:indicatorAxis.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(axisBuilder){each$f(axisBuilderAttrs$2,axisBuilder.add,axisBuilder),this.group.add(axisBuilder.getGroup())},this)},RadarView2.prototype._buildSplitLineAndArea=function(radarModel){var radar=radarModel.coordinateSystem,indicatorAxes=radar.getIndicatorAxes();if(indicatorAxes.length){var shape=radarModel.get("shape"),splitLineModel=radarModel.getModel("splitLine"),splitAreaModel=radarModel.getModel("splitArea"),lineStyleModel=splitLineModel.getModel("lineStyle"),areaStyleModel=splitAreaModel.getModel("areaStyle"),showSplitLine=splitLineModel.get("show"),showSplitArea=splitAreaModel.get("show"),splitLineColors=lineStyleModel.get("color"),splitAreaColors=areaStyleModel.get("color"),splitLineColorsArr=isArray$1(splitLineColors)?splitLineColors:[splitLineColors],splitAreaColorsArr=isArray$1(splitAreaColors)?splitAreaColors:[splitAreaColors],splitLines=[],splitAreas=[];if("circle"===shape)for(var ticksRadius=indicatorAxes[0].getTicksCoords(),cx=radar.cx,cy=radar.cy,i=0;i&lt;ticksRadius.length;i++){if(showSplitLine)splitLines[getColorIndex(splitLines,splitLineColorsArr,i)].push(new Circle({shape:{cx:cx,cy:cy,r:ticksRadius[i].coord}}));if(showSplitArea&amp;&amp;i&lt;ticksRadius.length-1)splitAreas[getColorIndex(splitAreas,splitAreaColorsArr,i)].push(new Ring({shape:{cx:cx,cy:cy,r0:ticksRadius[i].coord,r:ticksRadius[i+1].coord}}))}else{var realSplitNumber_1,axesTicksPoints=map$1(indicatorAxes,function(indicatorAxis,idx){var ticksCoords=indicatorAxis.getTicksCoords();return realSplitNumber_1=null==realSplitNumber_1?ticksCoords.length-1:Math.min(ticksCoords.length-1,realSplitNumber_1),map$1(ticksCoords,function(tickCoord){return radar.coordToPoint(tickCoord.coord,idx)})}),prevPoints=[];for(i=0;i&lt;=realSplitNumber_1;i++){for(var points2=[],j=0;j&lt;indicatorAxes.length;j++)points2.push(axesTicksPoints[j][i]);if(points2[0]&amp;&amp;points2.push(points2[0].slice()),showSplitLine)splitLines[getColorIndex(splitLines,splitLineColorsArr,i)].push(new Polyline$1({shape:{points:points2}}));if(showSplitArea&amp;&amp;prevPoints)splitAreas[getColorIndex(splitAreas,splitAreaColorsArr,i-1)].push(new Polygon({shape:{points:points2.concat(prevPoints)}}));prevPoints=points2.slice().reverse()}}var lineStyle=lineStyleModel.getLineStyle(),areaStyle=areaStyleModel.getAreaStyle();each$f(splitAreas,function(splitAreas2,idx){this.group.add(mergePath(splitAreas2,{style:defaults({stroke:"none",fill:splitAreaColorsArr[idx%splitAreaColorsArr.length]},areaStyle),silent:!0}))},this),each$f(splitLines,function(splitLines2,idx){this.group.add(mergePath(splitLines2,{style:defaults({fill:"none",stroke:splitLineColorsArr[idx%splitLineColorsArr.length]},lineStyle),silent:!0}))},this)}function getColorIndex(areaOrLine,areaOrLineColorList,idx){var colorIndex2=idx%areaOrLineColorList.length;return areaOrLine[colorIndex2]=areaOrLine[colorIndex2]||[],colorIndex2}},RadarView2.type="radar",RadarView2}(ComponentView),IndicatorAxis=function(_super){function IndicatorAxis2(dim,scale2,radiusExtent){var _this=_super.call(this,dim,scale2,radiusExtent)||this;return _this.type="value",_this.angle=0,_this.name="",_this}return __extends$1(IndicatorAxis2,_super),IndicatorAxis2}(Axis),Radar=function(){function Radar2(radarModel,ecModel,api){this.dimensions=[],this._model=radarModel,this._indicatorAxes=map$1(radarModel.getIndicatorModels(),function(indicatorModel,idx){var dim="indicator_"+idx,indicatorAxis=new IndicatorAxis(dim,new IntervalScale);return indicatorAxis.name=indicatorModel.get("name"),indicatorAxis.model=indicatorModel,indicatorModel.axis=indicatorAxis,this.dimensions.push(dim),indicatorAxis},this),this.resize(radarModel,api)}return Radar2.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Radar2.prototype.dataToPoint=function(value,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex];return this.coordToPoint(indicatorAxis.dataToCoord(value),indicatorIndex)},Radar2.prototype.coordToPoint=function(coord,indicatorIndex){var angle=this._indicatorAxes[indicatorIndex].angle;return[this.cx+coord*Math.cos(angle),this.cy-coord*Math.sin(angle)]},Radar2.prototype.pointToData=function(pt){var dx=pt[0]-this.cx,dy=pt[1]-this.cy,radius=Math.sqrt(dx*dx+dy*dy);dx/=radius,dy/=radius;for(var closestAxis,radian=Math.atan2(-dy,dx),minRadianDiff=1/0,closestAxisIdx=-1,i=0;i&lt;this._indicatorAxes.length;i++){var indicatorAxis=this._indicatorAxes[i],diff=Math.abs(radian-indicatorAxis.angle);diff&lt;minRadianDiff&amp;&amp;(closestAxis=indicatorAxis,closestAxisIdx=i,minRadianDiff=diff)}return[closestAxisIdx,+(closestAxis&amp;&amp;closestAxis.coordToData(radius))]},Radar2.prototype.resize=function(radarModel,api){var center2=radarModel.get("center"),viewWidth=api.getWidth(),viewHeight=api.getHeight(),viewSize=Math.min(viewWidth,viewHeight)/2;this.cx=parsePercent(center2[0],viewWidth),this.cy=parsePercent(center2[1],viewHeight),this.startAngle=radarModel.get("startAngle")*Math.PI/180;var radius=radarModel.get("radius");(isString(radius)||isNumber(radius))&amp;&amp;(radius=[0,radius]),this.r0=parsePercent(radius[0],viewSize),this.r=parsePercent(radius[1],viewSize),each$f(this._indicatorAxes,function(indicatorAxis,idx){indicatorAxis.setExtent(this.r0,this.r);var angle=this.startAngle+idx*Math.PI*2/this._indicatorAxes.length;angle=Math.atan2(Math.sin(angle),Math.cos(angle)),indicatorAxis.angle=angle},this)},Radar2.prototype.update=function(ecModel,api){var indicatorAxes=this._indicatorAxes,radarModel=this._model;each$f(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.setExtent(1/0,-1/0)}),ecModel.eachSeriesByType("radar",function(radarSeries,idx){if("radar"===radarSeries.get("coordinateSystem")&amp;&amp;ecModel.getComponent("radar",radarSeries.get("radarIndex"))===radarModel){var data=radarSeries.getData();each$f(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.unionExtentFromData(data,data.mapDimension(indicatorAxis.dim))})}},this);var splitNumber=radarModel.get("splitNumber"),dummyScale=new IntervalScale;dummyScale.setExtent(0,splitNumber),dummyScale.setInterval(1),each$f(indicatorAxes,function(indicatorAxis,idx){alignScaleTicks(indicatorAxis.scale,indicatorAxis.model,dummyScale)})},Radar2.prototype.convertToPixel=function(ecModel,finder,value){return console.warn("Not implemented."),null},Radar2.prototype.convertFromPixel=function(ecModel,finder,pixel){return console.warn("Not implemented."),null},Radar2.prototype.containPoint=function(point){return console.warn("Not implemented."),!1},Radar2.create=function(ecModel,api){var radarList=[];return ecModel.eachComponent("radar",function(radarModel){var radar=new Radar2(radarModel,ecModel,api);radarList.push(radar),radarModel.coordinateSystem=radar}),ecModel.eachSeriesByType("radar",function(radarSeries){"radar"===radarSeries.get("coordinateSystem")&amp;&amp;(radarSeries.coordinateSystem=radarList[radarSeries.get("radarIndex")||0])}),radarList},Radar2.dimensions=[],Radar2}();function install$L(registers){registers.registerCoordinateSystem("radar",Radar),registers.registerComponentModel(RadarModel),registers.registerComponentView(RadarView),registers.registerVisual({seriesType:"radar",reset:function(seriesModel){var data=seriesModel.getData();data.each(function(idx){data.setItemVisual(idx,"legendIcon","roundRect")}),data.setVisual("legendIcon","roundRect")}})}var ATTR="\0_ec_interaction_mutex";function isTaken(zr,resourceKey){return!!getStore(zr)[resourceKey]}function getStore(zr){return zr[ATTR]||(zr[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(_super){function RoamController2(zr){var _this=_super.call(this)||this;_this._zr=zr;var mousedownHandler=bind$1(_this._mousedownHandler,_this),mousemoveHandler=bind$1(_this._mousemoveHandler,_this),mouseupHandler=bind$1(_this._mouseupHandler,_this),mousewheelHandler=bind$1(_this._mousewheelHandler,_this),pinchHandler=bind$1(_this._pinchHandler,_this);return _this.enable=function(controlType,opt){this.disable(),this._opt=defaults(clone$4(opt)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==controlType&amp;&amp;(controlType=!0),!0!==controlType&amp;&amp;"move"!==controlType&amp;&amp;"pan"!==controlType||(zr.on("mousedown",mousedownHandler),zr.on("mousemove",mousemoveHandler),zr.on("mouseup",mouseupHandler)),!0!==controlType&amp;&amp;"scale"!==controlType&amp;&amp;"zoom"!==controlType||(zr.on("mousewheel",mousewheelHandler),zr.on("pinch",pinchHandler))},_this.disable=function(){zr.off("mousedown",mousedownHandler),zr.off("mousemove",mousemoveHandler),zr.off("mouseup",mouseupHandler),zr.off("mousewheel",mousewheelHandler),zr.off("pinch",pinchHandler)},_this}return __extends$1(RoamController2,_super),RoamController2.prototype.isDragging=function(){return this._dragging},RoamController2.prototype.isPinching=function(){return this._pinching},RoamController2.prototype.setPointerChecker=function(pointerChecker){this.pointerChecker=pointerChecker},RoamController2.prototype.dispose=function(){this.disable()},RoamController2.prototype._mousedownHandler=function(e2){if(!isMiddleOrRightButtonOnMouseUpDown(e2)){for(var el=e2.target;el;){if(el.draggable)return;el=el.__hostTarget||el.parent}var x=e2.offsetX,y=e2.offsetY;this.pointerChecker&amp;&amp;this.pointerChecker(e2,x,y)&amp;&amp;(this._x=x,this._y=y,this._dragging=!0)}},RoamController2.prototype._mousemoveHandler=function(e2){if(this._dragging&amp;&amp;isAvailableBehavior("moveOnMouseMove",e2,this._opt)&amp;&amp;"pinch"!==e2.gestureEvent&amp;&amp;!isTaken(this._zr,"globalPan")){var x=e2.offsetX,y=e2.offsetY,oldX=this._x,oldY=this._y,dx=x-oldX,dy=y-oldY;this._x=x,this._y=y,this._opt.preventDefaultMouseMove&amp;&amp;stop(e2.event),trigger$1(this,"pan","moveOnMouseMove",e2,{dx:dx,dy:dy,oldX:oldX,oldY:oldY,newX:x,newY:y,isAvailableBehavior:null})}},RoamController2.prototype._mouseupHandler=function(e2){isMiddleOrRightButtonOnMouseUpDown(e2)||(this._dragging=!1)},RoamController2.prototype._mousewheelHandler=function(e2){var shouldZoom=isAvailableBehavior("zoomOnMouseWheel",e2,this._opt),shouldMove=isAvailableBehavior("moveOnMouseWheel",e2,this._opt),wheelDelta=e2.wheelDelta,absWheelDeltaDelta=Math.abs(wheelDelta),originX=e2.offsetX,originY=e2.offsetY;if(0!==wheelDelta&amp;&amp;(shouldZoom||shouldMove)){if(shouldZoom){var factor=absWheelDeltaDelta&gt;3?1.4:absWheelDeltaDelta&gt;1?1.2:1.1;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",e2,{scale:wheelDelta&gt;0?factor:1/factor,originX:originX,originY:originY,isAvailableBehavior:null})}if(shouldMove){var absDelta=Math.abs(wheelDelta);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",e2,{scrollDelta:(wheelDelta&gt;0?1:-1)*(absDelta&gt;3?.4:absDelta&gt;1?.15:.05),originX:originX,originY:originY,isAvailableBehavior:null})}}},RoamController2.prototype._pinchHandler=function(e2){isTaken(this._zr,"globalPan")||checkPointerAndTrigger(this,"zoom",null,e2,{scale:e2.pinchScale&gt;1?1.1:1/1.1,originX:e2.pinchX,originY:e2.pinchY,isAvailableBehavior:null})},RoamController2}(Eventful);function checkPointerAndTrigger(controller,eventName,behaviorToCheck,e2,contollerEvent){controller.pointerChecker&amp;&amp;controller.pointerChecker(e2,contollerEvent.originX,contollerEvent.originY)&amp;&amp;(stop(e2.event),trigger$1(controller,eventName,behaviorToCheck,e2,contollerEvent))}function trigger$1(controller,eventName,behaviorToCheck,e2,contollerEvent){contollerEvent.isAvailableBehavior=bind$1(isAvailableBehavior,null,behaviorToCheck,e2),controller.trigger(eventName,contollerEvent)}function isAvailableBehavior(behaviorToCheck,e2,settings){var setting=settings[behaviorToCheck];return!behaviorToCheck||setting&amp;&amp;(!isString(setting)||e2.event[setting+"Key"])}function updateViewOnPan(controllerHost,dx,dy){var target=controllerHost.target;target.x+=dx,target.y+=dy,target.dirty()}function updateViewOnZoom(controllerHost,zoomDelta,zoomX,zoomY){var target=controllerHost.target,zoomLimit=controllerHost.zoomLimit,newZoom=controllerHost.zoom=controllerHost.zoom||1;if(newZoom*=zoomDelta,zoomLimit){var zoomMin=zoomLimit.min||0,zoomMax=zoomLimit.max||1/0;newZoom=Math.max(Math.min(zoomMax,newZoom),zoomMin)}var zoomScale=newZoom/controllerHost.zoom;controllerHost.zoom=newZoom,target.x-=(zoomX-target.x)*(zoomScale-1),target.y-=(zoomY-target.y)*(zoomScale-1),target.scaleX*=zoomScale,target.scaleY*=zoomScale,target.dirty()}var nodeParsers,IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(e2,api,targetCoordSysModel){var model=api.getComponentByElement(e2.topTarget),coordSys=model&amp;&amp;model.coordinateSystem;return model&amp;&amp;model!==targetCoordSysModel&amp;&amp;!IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType)&amp;&amp;coordSys&amp;&amp;coordSys.model!==targetCoordSysModel}function parseXML(svg){isString(svg)&amp;&amp;(svg=(new DOMParser).parseFromString(svg,"text/xml"));var svgNode=svg;for(9===svgNode.nodeType&amp;&amp;(svgNode=svgNode.firstChild);"svg"!==svgNode.nodeName.toLowerCase()||1!==svgNode.nodeType;)svgNode=svgNode.nextSibling;return svgNode}var INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function SVGParser2(){this._defs={},this._root=null}return SVGParser2.prototype.parse=function(xml,opt){opt=opt||{};var svg=parseXML(xml);this._defsUsePending=[];var root=new Group$3;this._root=root;var named=[],viewBox=svg.getAttribute("viewBox")||"",width=parseFloat(svg.getAttribute("width")||opt.width),height=parseFloat(svg.getAttribute("height")||opt.height);isNaN(width)&amp;&amp;(width=null),isNaN(height)&amp;&amp;(height=null),parseAttributes(svg,root,null,!0,!1);for(var viewBoxRect,viewBoxTransform,child=svg.firstChild;child;)this._parseNode(child,root,named,null,!1,!1),child=child.nextSibling;if(function applyDefs(defs,defsUsePending){for(var i=0;i&lt;defsUsePending.length;i++){var item=defsUsePending[i];item[0].style[item[1]]=defs[item[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],viewBox){var viewBoxArr=splitNumberSequence(viewBox);viewBoxArr.length&gt;=4&amp;&amp;(viewBoxRect={x:parseFloat(viewBoxArr[0]||0),y:parseFloat(viewBoxArr[1]||0),width:parseFloat(viewBoxArr[2]),height:parseFloat(viewBoxArr[3])})}if(viewBoxRect&amp;&amp;null!=width&amp;&amp;null!=height&amp;&amp;(viewBoxTransform=makeViewBoxTransform(viewBoxRect,{x:0,y:0,width:width,height:height}),!opt.ignoreViewBox)){var elRoot=root;(root=new Group$3).add(elRoot),elRoot.scaleX=elRoot.scaleY=viewBoxTransform.scale,elRoot.x=viewBoxTransform.x,elRoot.y=viewBoxTransform.y}return opt.ignoreRootClip||null==width||null==height||root.setClipPath(new Rect$2({shape:{x:0,y:0,width:width,height:height}})),{root:root,width:width,height:height,viewBoxRect:viewBoxRect,viewBoxTransform:viewBoxTransform,named:named}},SVGParser2.prototype._parseNode=function(xmlNode,parentGroup,named,namedFrom,isInDefs,isInText){var el,nodeName=xmlNode.nodeName.toLowerCase(),namedFromForSub=namedFrom;if("defs"===nodeName&amp;&amp;(isInDefs=!0),"text"===nodeName&amp;&amp;(isInText=!0),"defs"===nodeName||"switch"===nodeName)el=parentGroup;else{if(!isInDefs){var parser_1=nodeParsers[nodeName];if(parser_1&amp;&amp;hasOwn(nodeParsers,nodeName)){el=parser_1.call(this,xmlNode,parentGroup);var nameAttr=xmlNode.getAttribute("name");if(nameAttr){var newNamed={name:nameAttr,namedFrom:null,svgNodeTagLower:nodeName,el:el};named.push(newNamed),"g"===nodeName&amp;&amp;(namedFromForSub=newNamed)}else namedFrom&amp;&amp;named.push({name:namedFrom.name,namedFrom:namedFrom,svgNodeTagLower:nodeName,el:el});parentGroup.add(el)}}var parser=paintServerParsers[nodeName];if(parser&amp;&amp;hasOwn(paintServerParsers,nodeName)){var def=parser.call(this,xmlNode),id=xmlNode.getAttribute("id");id&amp;&amp;(this._defs[id]=def)}}if(el&amp;&amp;el.isGroup)for(var child=xmlNode.firstChild;child;)1===child.nodeType?this._parseNode(child,el,named,namedFromForSub,isInDefs,isInText):3===child.nodeType&amp;&amp;isInText&amp;&amp;this._parseText(child,el),child=child.nextSibling},SVGParser2.prototype._parseText=function(xmlNode,parentGroup){var text=new TSpan({style:{text:xmlNode.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(parentGroup,text),parseAttributes(xmlNode,text,this._defsUsePending,!1,!1),function applyTextAlignment(text,parentGroup){var parentSelfStyle=parentGroup.__selfStyle;if(parentSelfStyle){var textBaseline=parentSelfStyle.textBaseline,zrTextBaseline=textBaseline;textBaseline&amp;&amp;"auto"!==textBaseline?"baseline"===textBaseline?zrTextBaseline="alphabetic":"before-edge"===textBaseline||"text-before-edge"===textBaseline?zrTextBaseline="top":"after-edge"===textBaseline||"text-after-edge"===textBaseline?zrTextBaseline="bottom":"central"!==textBaseline&amp;&amp;"mathematical"!==textBaseline||(zrTextBaseline="middle"):zrTextBaseline="alphabetic",text.style.textBaseline=zrTextBaseline}var parentInheritedStyle=parentGroup.__inheritedStyle;if(parentInheritedStyle){var textAlign=parentInheritedStyle.textAlign,zrTextAlign=textAlign;textAlign&amp;&amp;("middle"===textAlign&amp;&amp;(zrTextAlign="center"),text.style.textAlign=zrTextAlign)}}(text,parentGroup);var textStyle=text.style,fontSize=textStyle.fontSize;fontSize&amp;&amp;fontSize&lt;9&amp;&amp;(textStyle.fontSize=9,text.scaleX*=fontSize/9,text.scaleY*=fontSize/9);var font=(textStyle.fontSize||textStyle.fontFamily)&amp;&amp;[textStyle.fontStyle,textStyle.fontWeight,(textStyle.fontSize||12)+"px",textStyle.fontFamily||"sans-serif"].join(" ");textStyle.font=font;var rect=text.getBoundingRect();return this._textX+=rect.width,parentGroup.add(text),text},SVGParser2.internalField=void(nodeParsers={g:function(xmlNode,parentGroup){var g=new Group$3;return inheritStyle(parentGroup,g),parseAttributes(xmlNode,g,this._defsUsePending,!1,!1),g},rect:function(xmlNode,parentGroup){var rect=new Rect$2;return inheritStyle(parentGroup,rect),parseAttributes(xmlNode,rect,this._defsUsePending,!1,!1),rect.setShape({x:parseFloat(xmlNode.getAttribute("x")||"0"),y:parseFloat(xmlNode.getAttribute("y")||"0"),width:parseFloat(xmlNode.getAttribute("width")||"0"),height:parseFloat(xmlNode.getAttribute("height")||"0")}),rect.silent=!0,rect},circle:function(xmlNode,parentGroup){var circle=new Circle;return inheritStyle(parentGroup,circle),parseAttributes(xmlNode,circle,this._defsUsePending,!1,!1),circle.setShape({cx:parseFloat(xmlNode.getAttribute("cx")||"0"),cy:parseFloat(xmlNode.getAttribute("cy")||"0"),r:parseFloat(xmlNode.getAttribute("r")||"0")}),circle.silent=!0,circle},line:function(xmlNode,parentGroup){var line=new Line$1;return inheritStyle(parentGroup,line),parseAttributes(xmlNode,line,this._defsUsePending,!1,!1),line.setShape({x1:parseFloat(xmlNode.getAttribute("x1")||"0"),y1:parseFloat(xmlNode.getAttribute("y1")||"0"),x2:parseFloat(xmlNode.getAttribute("x2")||"0"),y2:parseFloat(xmlNode.getAttribute("y2")||"0")}),line.silent=!0,line},ellipse:function(xmlNode,parentGroup){var ellipse=new Ellipse;return inheritStyle(parentGroup,ellipse),parseAttributes(xmlNode,ellipse,this._defsUsePending,!1,!1),ellipse.setShape({cx:parseFloat(xmlNode.getAttribute("cx")||"0"),cy:parseFloat(xmlNode.getAttribute("cy")||"0"),rx:parseFloat(xmlNode.getAttribute("rx")||"0"),ry:parseFloat(xmlNode.getAttribute("ry")||"0")}),ellipse.silent=!0,ellipse},polygon:function(xmlNode,parentGroup){var pointsArr,pointsStr=xmlNode.getAttribute("points");pointsStr&amp;&amp;(pointsArr=parsePoints(pointsStr));var polygon=new Polygon({shape:{points:pointsArr||[]},silent:!0});return inheritStyle(parentGroup,polygon),parseAttributes(xmlNode,polygon,this._defsUsePending,!1,!1),polygon},polyline:function(xmlNode,parentGroup){var pointsArr,pointsStr=xmlNode.getAttribute("points");pointsStr&amp;&amp;(pointsArr=parsePoints(pointsStr));var polyline=new Polyline$1({shape:{points:pointsArr||[]},silent:!0});return inheritStyle(parentGroup,polyline),parseAttributes(xmlNode,polyline,this._defsUsePending,!1,!1),polyline},image:function(xmlNode,parentGroup){var img=new ZRImage;return inheritStyle(parentGroup,img),parseAttributes(xmlNode,img,this._defsUsePending,!1,!1),img.setStyle({image:xmlNode.getAttribute("xlink:href")||xmlNode.getAttribute("href"),x:+xmlNode.getAttribute("x"),y:+xmlNode.getAttribute("y"),width:+xmlNode.getAttribute("width"),height:+xmlNode.getAttribute("height")}),img.silent=!0,img},text:function(xmlNode,parentGroup){var x=xmlNode.getAttribute("x")||"0",y=xmlNode.getAttribute("y")||"0",dx=xmlNode.getAttribute("dx")||"0",dy=xmlNode.getAttribute("dy")||"0";this._textX=parseFloat(x)+parseFloat(dx),this._textY=parseFloat(y)+parseFloat(dy);var g=new Group$3;return inheritStyle(parentGroup,g),parseAttributes(xmlNode,g,this._defsUsePending,!1,!0),g},tspan:function(xmlNode,parentGroup){var x=xmlNode.getAttribute("x"),y=xmlNode.getAttribute("y");null!=x&amp;&amp;(this._textX=parseFloat(x)),null!=y&amp;&amp;(this._textY=parseFloat(y));var dx=xmlNode.getAttribute("dx")||"0",dy=xmlNode.getAttribute("dy")||"0",g=new Group$3;return inheritStyle(parentGroup,g),parseAttributes(xmlNode,g,this._defsUsePending,!1,!0),this._textX+=parseFloat(dx),this._textY+=parseFloat(dy),g},path:function(xmlNode,parentGroup){var path=createFromString(xmlNode.getAttribute("d")||"");return inheritStyle(parentGroup,path),parseAttributes(xmlNode,path,this._defsUsePending,!1,!1),path.silent=!0,path}}),SVGParser2}(),paintServerParsers={lineargradient:function(xmlNode){var x1=parseInt(xmlNode.getAttribute("x1")||"0",10),y1=parseInt(xmlNode.getAttribute("y1")||"0",10),x2=parseInt(xmlNode.getAttribute("x2")||"10",10),y2=parseInt(xmlNode.getAttribute("y2")||"0",10),gradient=new LinearGradient(x1,y1,x2,y2);return parsePaintServerUnit(xmlNode,gradient),parseGradientColorStops(xmlNode,gradient),gradient},radialgradient:function(xmlNode){var cx=parseInt(xmlNode.getAttribute("cx")||"0",10),cy=parseInt(xmlNode.getAttribute("cy")||"0",10),r=parseInt(xmlNode.getAttribute("r")||"0",10),gradient=new RadialGradient(cx,cy,r);return parsePaintServerUnit(xmlNode,gradient),parseGradientColorStops(xmlNode,gradient),gradient}};function parsePaintServerUnit(xmlNode,gradient){"userSpaceOnUse"===xmlNode.getAttribute("gradientUnits")&amp;&amp;(gradient.global=!0)}function parseGradientColorStops(xmlNode,gradient){for(var stop2=xmlNode.firstChild;stop2;){if(1===stop2.nodeType&amp;&amp;"stop"===stop2.nodeName.toLocaleLowerCase()){var offsetStr=stop2.getAttribute("offset"),offset=void 0;offset=offsetStr&amp;&amp;offsetStr.indexOf("%")&gt;0?parseInt(offsetStr,10)/100:offsetStr?parseFloat(offsetStr):0;var styleVals={};parseInlineStyle(stop2,styleVals,styleVals);var stopColor=styleVals.stopColor||stop2.getAttribute("stop-color")||"#000000";gradient.colorStops.push({offset:offset,color:stopColor})}stop2=stop2.nextSibling}}function inheritStyle(parent,child){parent&amp;&amp;parent.__inheritedStyle&amp;&amp;(child.__inheritedStyle||(child.__inheritedStyle={}),defaults(child.__inheritedStyle,parent.__inheritedStyle))}function parsePoints(pointsString){for(var list=splitNumberSequence(pointsString),points2=[],i=0;i&lt;list.length;i+=2){var x=parseFloat(list[i]),y=parseFloat(list[i+1]);points2.push([x,y])}return points2}function parseAttributes(xmlNode,el,defsUsePending,onlyInlineStyle,isTextGroup){var disp=el,inheritedStyle=disp.__inheritedStyle=disp.__inheritedStyle||{},selfStyle={};1===xmlNode.nodeType&amp;&amp;(!function parseTransformAttribute(xmlNode,node){var transform2=xmlNode.getAttribute("transform");if(transform2){transform2=transform2.replace(/,/g," ");var transformOps_1=[],mt=null;transform2.replace(transformRegex,function(str,type2,value2){return transformOps_1.push(type2,value2),""});for(var i=transformOps_1.length-1;i&gt;0;i-=2){var value=transformOps_1[i],type=transformOps_1[i-1],valueArr=splitNumberSequence(value);switch(mt=mt||create$1(),type){case"translate":translate(mt,mt,[parseFloat(valueArr[0]),parseFloat(valueArr[1]||"0")]);break;case"scale":scale$1(mt,mt,[parseFloat(valueArr[0]),parseFloat(valueArr[1]||valueArr[0])]);break;case"rotate":rotate(mt,mt,-parseFloat(valueArr[0])*DEGREE_TO_ANGLE,[parseFloat(valueArr[1]||"0"),parseFloat(valueArr[2]||"0")]);break;case"skewX":mul(mt,[1,0,Math.tan(parseFloat(valueArr[0])*DEGREE_TO_ANGLE),1,0,0],mt);break;case"skewY":mul(mt,[1,Math.tan(parseFloat(valueArr[0])*DEGREE_TO_ANGLE),0,1,0,0],mt);break;case"matrix":mt[0]=parseFloat(valueArr[0]),mt[1]=parseFloat(valueArr[1]),mt[2]=parseFloat(valueArr[2]),mt[3]=parseFloat(valueArr[3]),mt[4]=parseFloat(valueArr[4]),mt[5]=parseFloat(valueArr[5])}}node.setLocalTransform(mt)}}(xmlNode,el),parseInlineStyle(xmlNode,inheritedStyle,selfStyle),onlyInlineStyle||function parseAttributeStyle(xmlNode,inheritableStyleResult,selfStyleResult){for(var i=0;i&lt;INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;i++){var svgAttrName=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[i];null!=(attrValue=xmlNode.getAttribute(svgAttrName))&amp;&amp;(inheritableStyleResult[INHERITABLE_STYLE_ATTRIBUTES_MAP[svgAttrName]]=attrValue)}for(i=0;i&lt;SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;i++){var attrValue;svgAttrName=SELF_STYLE_ATTRIBUTES_MAP_KEYS[i];null!=(attrValue=xmlNode.getAttribute(svgAttrName))&amp;&amp;(selfStyleResult[SELF_STYLE_ATTRIBUTES_MAP[svgAttrName]]=attrValue)}}(xmlNode,inheritedStyle,selfStyle)),disp.style=disp.style||{},null!=inheritedStyle.fill&amp;&amp;(disp.style.fill=getFillStrokeStyle(disp,"fill",inheritedStyle.fill,defsUsePending)),null!=inheritedStyle.stroke&amp;&amp;(disp.style.stroke=getFillStrokeStyle(disp,"stroke",inheritedStyle.stroke,defsUsePending)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(propName){null!=inheritedStyle[propName]&amp;&amp;(disp.style[propName]=parseFloat(inheritedStyle[propName]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(propName){null!=inheritedStyle[propName]&amp;&amp;(disp.style[propName]=inheritedStyle[propName])}),isTextGroup&amp;&amp;(disp.__selfStyle=selfStyle),inheritedStyle.lineDash&amp;&amp;(disp.style.lineDash=map$1(splitNumberSequence(inheritedStyle.lineDash),function(str){return parseFloat(str)})),"hidden"!==inheritedStyle.visibility&amp;&amp;"collapse"!==inheritedStyle.visibility||(disp.invisible=!0),"none"===inheritedStyle.display&amp;&amp;(disp.ignore=!0)}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(el,method,str,defsUsePending){var urlMatch=str&amp;&amp;str.match(urlRegex);if(!urlMatch)return"none"===str&amp;&amp;(str=null),str;var url=trim$1(urlMatch[1]);defsUsePending.push([el,method,url])}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(rawStr){return rawStr.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(xmlNode,inheritableStyleResult,selfStyleResult){var styleRegResult,style=xmlNode.getAttribute("style");if(style)for(styleRegex.lastIndex=0;null!=(styleRegResult=styleRegex.exec(style));){var svgStlAttr=styleRegResult[1],zrInheritableStlAttr=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,svgStlAttr)?INHERITABLE_STYLE_ATTRIBUTES_MAP[svgStlAttr]:null;zrInheritableStlAttr&amp;&amp;(inheritableStyleResult[zrInheritableStlAttr]=styleRegResult[2]);var zrSelfStlAttr=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,svgStlAttr)?SELF_STYLE_ATTRIBUTES_MAP[svgStlAttr]:null;zrSelfStlAttr&amp;&amp;(selfStyleResult[zrSelfStlAttr]=styleRegResult[2])}}function makeViewBoxTransform(viewBoxRect,boundingRect){var scaleX=boundingRect.width/viewBoxRect.width,scaleY=boundingRect.height/viewBoxRect.height,scale2=Math.min(scaleX,scaleY);return{scale:scale2,x:-(viewBoxRect.x+viewBoxRect.width/2)*scale2+(boundingRect.x+boundingRect.width/2),y:-(viewBoxRect.y+viewBoxRect.height/2)*scale2+(boundingRect.y+boundingRect.height/2)}}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function GeoSVGResource2(mapName,svg){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=mapName,this._parsedXML=parseXML(svg)}return GeoSVGResource2.prototype.load=function(){var firstGraphic=this._firstGraphic;if(!firstGraphic){firstGraphic=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(firstGraphic),this._boundingRect=this._firstGraphic.boundingRect.clone();var _a2=function createRegions(named){var regions=[],regionsMap=createHashMap();return each$f(named,function(namedItem){if(null==namedItem.namedFrom){var region=new GeoSVGRegion(namedItem.name,namedItem.el);regions.push(region),regionsMap.set(namedItem.name,region)}}),{regions:regions,regionsMap:regionsMap}}(firstGraphic.named),regions=_a2.regions,regionsMap=_a2.regionsMap;this._regions=regions,this._regionsMap=regionsMap}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},GeoSVGResource2.prototype._buildGraphic=function(svgXML){var result,rootFromParse;try{assert(null!=(rootFromParse=(result=svgXML&amp;&amp;function parseSVG(xml,opt){return(new SVGParser).parse(xml,opt)}(svgXML,{ignoreViewBox:!0,ignoreRootClip:!0})||{}).root))}catch(e2){throw new Error("Invalid svg format\n"+e2.message)}var root=new Group$3;root.add(rootFromParse),root.isGeoSVGGraphicRoot=!0;var svgWidth=result.width,svgHeight=result.height,viewBoxRect=result.viewBoxRect,boundingRect=this._boundingRect;if(!boundingRect){var bRectX=void 0,bRectY=void 0,bRectWidth=void 0,bRectHeight=void 0;if(null!=svgWidth?(bRectX=0,bRectWidth=svgWidth):viewBoxRect&amp;&amp;(bRectX=viewBoxRect.x,bRectWidth=viewBoxRect.width),null!=svgHeight?(bRectY=0,bRectHeight=svgHeight):viewBoxRect&amp;&amp;(bRectY=viewBoxRect.y,bRectHeight=viewBoxRect.height),null==bRectX||null==bRectY){var calculatedBoundingRect=rootFromParse.getBoundingRect();null==bRectX&amp;&amp;(bRectX=calculatedBoundingRect.x,bRectWidth=calculatedBoundingRect.width),null==bRectY&amp;&amp;(bRectY=calculatedBoundingRect.y,bRectHeight=calculatedBoundingRect.height)}boundingRect=this._boundingRect=new BoundingRect(bRectX,bRectY,bRectWidth,bRectHeight)}if(viewBoxRect){var viewBoxTransform=makeViewBoxTransform(viewBoxRect,boundingRect);rootFromParse.scaleX=rootFromParse.scaleY=viewBoxTransform.scale,rootFromParse.x=viewBoxTransform.x,rootFromParse.y=viewBoxTransform.y}root.setClipPath(new Rect$2({shape:boundingRect.plain()}));var named=[];return each$f(result.named,function(namedItem){null!=REGION_AVAILABLE_SVG_TAG_MAP.get(namedItem.svgNodeTagLower)&amp;&amp;(named.push(namedItem),function setSilent(el){el.silent=!1,el.isGroup&amp;&amp;el.traverse(function(child){child.silent=!1})}(namedItem.el))}),{root:root,boundingRect:boundingRect,named:named}},GeoSVGResource2.prototype.useGraphic=function(hostKey){var usedRootMap=this._usedGraphicMap,svgGraphic=usedRootMap.get(hostKey);return svgGraphic||(svgGraphic=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),usedRootMap.set(hostKey,svgGraphic),svgGraphic)},GeoSVGResource2.prototype.freeGraphic=function(hostKey){var usedRootMap=this._usedGraphicMap,svgGraphic=usedRootMap.get(hostKey);svgGraphic&amp;&amp;(usedRootMap.removeKey(hostKey),this._freedGraphics.push(svgGraphic))},GeoSVGResource2}();for(var geoCoord=[126,25],points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],i=0;i&lt;points$1.length;i++)for(var k=0;k&lt;points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-14,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];var coordsOffsetMap={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};function fixTextCoords(mapType,region){if("china"===mapType){var coordFix=coordsOffsetMap[region.name];if(coordFix){var cp=region.getCenter();cp[0]+=coordFix[0]/10.5,cp[1]+=-coordFix[1]/14,region.setCenter(cp)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var GeoJSONResource=function(){function GeoJSONResource2(mapName,geoJSON,specialAreas){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=mapName,this._specialAreas=specialAreas,this._geoJSON=function parseInput(source){return isString(source)?"undefined"!=typeof JSON&amp;&amp;JSON.parse?JSON.parse(source):new Function("return ("+source+");")():source}(geoJSON)}return GeoJSONResource2.prototype.load=function(nameMap,nameProperty){nameProperty=nameProperty||"name";var parsed=this._parsedMap.get(nameProperty);if(!parsed){var rawRegions=this._parseToRegions(nameProperty);parsed=this._parsedMap.set(nameProperty,{regions:rawRegions,boundingRect:calculateBoundingRect(rawRegions)})}var regionsMap=createHashMap(),finalRegions=[];return each$f(parsed.regions,function(region){var regionName=region.name;nameMap&amp;&amp;hasOwn(nameMap,regionName)&amp;&amp;(region=region.cloneShallow(regionName=nameMap[regionName])),finalRegions.push(region),regionsMap.set(regionName,region)}),{regions:finalRegions,boundingRect:parsed.boundingRect||new BoundingRect(0,0,0,0),regionsMap:regionsMap}},GeoJSONResource2.prototype._parseToRegions=function(nameProperty){var rawRegions,mapName=this._mapName,geoJSON=this._geoJSON;try{rawRegions=geoJSON?parseGeoJSON(geoJSON,nameProperty):[]}catch(e2){throw new Error("Invalid geoJson format\n"+e2.message)}return function fixNanhai(mapType,regions){if("china"===mapType){for(var i=0;i&lt;regions.length;i++)if("南海诸岛"===regions[i].name)return;regions.push(new GeoJSONRegion("南海诸岛",map$1(points$1,function(exterior){return{type:"polygon",exterior:exterior}}),geoCoord))}}(mapName,rawRegions),each$f(rawRegions,function(region){var regionName=region.name;fixTextCoords(mapName,region),function fixDiaoyuIsland(mapType,region){"china"===mapType&amp;&amp;"台湾"===region.name&amp;&amp;region.geometries.push({type:"polygon",exterior:points[0]})}(mapName,region);var specialArea=this._specialAreas&amp;&amp;this._specialAreas[regionName];specialArea&amp;&amp;region.transformTo(specialArea.left,specialArea.top,specialArea.width,specialArea.height)},this),rawRegions},GeoJSONResource2.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},GeoJSONResource2}();function calculateBoundingRect(regions){for(var rect,i=0;i&lt;regions.length;i++){var regionRect=regions[i].getBoundingRect();(rect=rect||regionRect.clone()).union(regionRect)}return rect}var storage=createHashMap();const geoSourceManager_registerMap=function(mapName,rawDef,rawSpecialAreas){if(rawDef.svg){var resource=new GeoSVGResource(mapName,rawDef.svg);storage.set(mapName,resource)}else{var geoJSON=rawDef.geoJson||rawDef.geoJSON;geoJSON&amp;&amp;!rawDef.features?rawSpecialAreas=rawDef.specialAreas:geoJSON=rawDef;resource=new GeoJSONResource(mapName,geoJSON,rawSpecialAreas);storage.set(mapName,resource)}},geoSourceManager_getGeoResource=function(mapName){return storage.get(mapName)},geoSourceManager_getMapForUser=function(mapName){var resource=storage.get(mapName);return resource&amp;&amp;"geoJSON"===resource.type&amp;&amp;resource.getMapForUser()},geoSourceManager_load=function(mapName,nameMap,nameProperty){var resource=storage.get(mapName);if(resource)return resource.load(nameMap,nameProperty)};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(model){var itemStyle=model.getItemStyle(),areaColor=model.get("areaColor");return null!=areaColor&amp;&amp;(itemStyle.fill=areaColor),itemStyle}function fixLineStyle(styleHost){var style=styleHost.style;style&amp;&amp;(style.stroke=style.stroke||style.fill,style.fill=null)}var MapDraw=function(){function MapDraw2(api){var group=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(api.getZr()),this._controllerHost={target:group},this.group=group,group.add(this._regionsGroup=new Group$3),group.add(this._svgGroup=new Group$3)}return MapDraw2.prototype.draw=function(mapOrGeoModel,ecModel,api,fromView,payload){var isGeo="geo"===mapOrGeoModel.mainType,data=mapOrGeoModel.getData&amp;&amp;mapOrGeoModel.getData();isGeo&amp;&amp;ecModel.eachComponent({mainType:"series",subType:"map"},function(mapSeries){data||mapSeries.getHostGeoModel()!==mapOrGeoModel||(data=mapSeries.getData())});var geo=mapOrGeoModel.coordinateSystem,regionsGroup=this._regionsGroup,group=this.group,transformInfo=geo.getTransformInfo(),transformInfoRaw=transformInfo.raw,transformInfoRoam=transformInfo.roam;!regionsGroup.childAt(0)||payload?(group.x=transformInfoRoam.x,group.y=transformInfoRoam.y,group.scaleX=transformInfoRoam.scaleX,group.scaleY=transformInfoRoam.scaleY,group.dirty()):updateProps$1(group,transformInfoRoam,mapOrGeoModel);var isVisualEncodedByVisualMap=data&amp;&amp;data.getVisual("visualMeta")&amp;&amp;data.getVisual("visualMeta").length&gt;0,viewBuildCtx={api:api,geo:geo,mapOrGeoModel:mapOrGeoModel,data:data,isVisualEncodedByVisualMap:isVisualEncodedByVisualMap,isGeo:isGeo,transformInfoRaw:transformInfoRaw};"geoJSON"===geo.resourceType?this._buildGeoJSON(viewBuildCtx):"geoSVG"===geo.resourceType&amp;&amp;this._buildSVG(viewBuildCtx),this._updateController(mapOrGeoModel,ecModel,api),this._updateMapSelectHandler(mapOrGeoModel,regionsGroup,api,fromView)},MapDraw2.prototype._buildGeoJSON=function(viewBuildCtx){var regionsGroupByName=this._regionsGroupByName=createHashMap(),regionsInfoByName=createHashMap(),regionsGroup=this._regionsGroup,transformInfoRaw=viewBuildCtx.transformInfoRaw,mapOrGeoModel=viewBuildCtx.mapOrGeoModel,data=viewBuildCtx.data,projection=viewBuildCtx.geo.projection,projectionStream=projection&amp;&amp;projection.stream;function transformPoint(point,project){return project&amp;&amp;(point=project(point)),point&amp;&amp;[point[0]*transformInfoRaw.scaleX+transformInfoRaw.x,point[1]*transformInfoRaw.scaleY+transformInfoRaw.y]}function transformPolygonPoints(inPoints){for(var outPoints=[],project=!projectionStream&amp;&amp;projection&amp;&amp;projection.project,i=0;i&lt;inPoints.length;++i){var newPt=transformPoint(inPoints[i],project);newPt&amp;&amp;outPoints.push(newPt)}return outPoints}function getPolyShape(points2){return{shape:{points:transformPolygonPoints(points2)}}}regionsGroup.removeAll(),each$f(viewBuildCtx.geo.regions,function(region){var regionName=region.name,regionGroup=regionsGroupByName.get(regionName),_a2=regionsInfoByName.get(regionName)||{},dataIdx=_a2.dataIdx,regionModel=_a2.regionModel;if(!regionGroup){regionGroup=regionsGroupByName.set(regionName,new Group$3),regionsGroup.add(regionGroup),dataIdx=data?data.indexOfName(regionName):null;var silent=(regionModel=viewBuildCtx.isGeo?mapOrGeoModel.getRegionModel(regionName):data?data.getItemModel(dataIdx):null).get("silent",!0);null!=silent&amp;&amp;(regionGroup.silent=silent),regionsInfoByName.set(regionName,{dataIdx:dataIdx,regionModel:regionModel})}var polygonSubpaths=[],polylineSubpaths=[];each$f(region.geometries,function(geometry){if("polygon"===geometry.type){var polys=[geometry.exterior].concat(geometry.interiors||[]);projectionStream&amp;&amp;(polys=projectPolys(polys,projectionStream)),each$f(polys,function(poly){polygonSubpaths.push(new Polygon(getPolyShape(poly)))})}else{var points2=geometry.points;projectionStream&amp;&amp;(points2=projectPolys(points2,projectionStream,!0)),each$f(points2,function(points3){polylineSubpaths.push(new Polyline$1(getPolyShape(points3)))})}});var centerPt=transformPoint(region.getCenter(),projection&amp;&amp;projection.project);function createCompoundPath(subpaths,isLine){if(subpaths.length){var compoundPath=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:subpaths}});regionGroup.add(compoundPath),applyOptionStyleForRegion(viewBuildCtx,compoundPath,dataIdx,regionModel),resetLabelForRegion(viewBuildCtx,compoundPath,regionName,regionModel,mapOrGeoModel,dataIdx,centerPt),isLine&amp;&amp;(fixLineStyle(compoundPath),each$f(compoundPath.states,fixLineStyle))}}createCompoundPath(polygonSubpaths),createCompoundPath(polylineSubpaths,!0)}),regionsGroupByName.each(function(regionGroup,regionName){var _a2=regionsInfoByName.get(regionName),dataIdx=_a2.dataIdx,regionModel=_a2.regionModel;resetEventTriggerForRegion(viewBuildCtx,regionGroup,regionName,regionModel,mapOrGeoModel,dataIdx),resetTooltipForRegion(viewBuildCtx,regionGroup,regionName,regionModel,mapOrGeoModel),resetStateTriggerForRegion(viewBuildCtx,regionGroup,regionName,regionModel,mapOrGeoModel)},this)},MapDraw2.prototype._buildSVG=function(viewBuildCtx){var mapName=viewBuildCtx.geo.map,transformInfoRaw=viewBuildCtx.transformInfoRaw;this._svgGroup.x=transformInfoRaw.x,this._svgGroup.y=transformInfoRaw.y,this._svgGroup.scaleX=transformInfoRaw.scaleX,this._svgGroup.scaleY=transformInfoRaw.scaleY,this._svgResourceChanged(mapName)&amp;&amp;(this._freeSVG(),this._useSVG(mapName));var svgDispatcherMap=this._svgDispatcherMap=createHashMap(),focusSelf=!1;each$f(this._svgGraphicRecord.named,function(namedItem){var regionName=namedItem.name,mapOrGeoModel=viewBuildCtx.mapOrGeoModel,data=viewBuildCtx.data,svgNodeTagLower=namedItem.svgNodeTagLower,el=namedItem.el,dataIdx=data?data.indexOfName(regionName):null,regionModel=mapOrGeoModel.getRegionModel(regionName);null!=OPTION_STYLE_ENABLED_TAG_MAP.get(svgNodeTagLower)&amp;&amp;el instanceof Displayable&amp;&amp;applyOptionStyleForRegion(viewBuildCtx,el,dataIdx,regionModel),el instanceof Displayable&amp;&amp;(el.culling=!0);var silent=regionModel.get("silent",!0);(null!=silent&amp;&amp;(el.silent=silent),el.z2EmphasisLift=0,namedItem.namedFrom)||(null!=LABEL_HOST_MAP.get(svgNodeTagLower)&amp;&amp;resetLabelForRegion(viewBuildCtx,el,regionName,regionModel,mapOrGeoModel,dataIdx,null),resetEventTriggerForRegion(viewBuildCtx,el,regionName,regionModel,mapOrGeoModel,dataIdx),resetTooltipForRegion(viewBuildCtx,el,regionName,regionModel,mapOrGeoModel),null!=STATE_TRIGGER_TAG_MAP.get(svgNodeTagLower)&amp;&amp;("self"===resetStateTriggerForRegion(viewBuildCtx,el,regionName,regionModel,mapOrGeoModel)&amp;&amp;(focusSelf=!0),(svgDispatcherMap.get(regionName)||svgDispatcherMap.set(regionName,[])).push(el)))},this),this._enableBlurEntireSVG(focusSelf,viewBuildCtx)},MapDraw2.prototype._enableBlurEntireSVG=function(focusSelf,viewBuildCtx){if(focusSelf&amp;&amp;viewBuildCtx.isGeo){var opacity_1=viewBuildCtx.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(el){if(!el.isGroup){setDefaultStateProxy(el);var style=el.ensureState("blur").style||{};null==style.opacity&amp;&amp;null!=opacity_1&amp;&amp;(style.opacity=opacity_1),el.ensureState("emphasis")}})}},MapDraw2.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},MapDraw2.prototype.findHighDownDispatchers=function(name,geoModel){if(null==name)return[];var geo=geoModel.coordinateSystem;if("geoJSON"===geo.resourceType){var regionsGroupByName=this._regionsGroupByName;if(regionsGroupByName){var regionGroup=regionsGroupByName.get(name);return regionGroup?[regionGroup]:[]}}else if("geoSVG"===geo.resourceType)return this._svgDispatcherMap&amp;&amp;this._svgDispatcherMap.get(name)||[]},MapDraw2.prototype._svgResourceChanged=function(mapName){return this._svgMapName!==mapName},MapDraw2.prototype._useSVG=function(mapName){var resource=geoSourceManager_getGeoResource(mapName);if(resource&amp;&amp;"geoSVG"===resource.type){var svgGraphic=resource.useGraphic(this.uid);this._svgGroup.add(svgGraphic.root),this._svgGraphicRecord=svgGraphic,this._svgMapName=mapName}},MapDraw2.prototype._freeSVG=function(){var mapName=this._svgMapName;if(null!=mapName){var resource=geoSourceManager_getGeoResource(mapName);resource&amp;&amp;"geoSVG"===resource.type&amp;&amp;resource.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},MapDraw2.prototype._updateController=function(mapOrGeoModel,ecModel,api){var geo=mapOrGeoModel.coordinateSystem,controller=this._controller,controllerHost=this._controllerHost;controllerHost.zoomLimit=mapOrGeoModel.get("scaleLimit"),controllerHost.zoom=geo.getZoom(),controller.enable(mapOrGeoModel.get("roam")||!1);var mainType=mapOrGeoModel.mainType;function makeActionBase(){var action={type:"geoRoam",componentType:mainType};return action[mainType+"Id"]=mapOrGeoModel.id,action}controller.off("pan").on("pan",function(e2){this._mouseDownFlag=!1,updateViewOnPan(controllerHost,e2.dx,e2.dy),api.dispatchAction(extend(makeActionBase(),{dx:e2.dx,dy:e2.dy,animation:{duration:0}}))},this),controller.off("zoom").on("zoom",function(e2){this._mouseDownFlag=!1,updateViewOnZoom(controllerHost,e2.scale,e2.originX,e2.originY),api.dispatchAction(extend(makeActionBase(),{totalZoom:controllerHost.zoom,zoom:e2.scale,originX:e2.originX,originY:e2.originY,animation:{duration:0}}))},this),controller.setPointerChecker(function(e2,x,y){return geo.containPoint([x,y])&amp;&amp;!onIrrelevantElement(e2,api,mapOrGeoModel)})},MapDraw2.prototype.resetForLabelLayout=function(){this.group.traverse(function(el){var label=el.getTextContent();label&amp;&amp;(label.ignore=mapLabelRaw(label).ignore)})},MapDraw2.prototype._updateMapSelectHandler=function(mapOrGeoModel,regionsGroup,api,fromView){var mapDraw=this;regionsGroup.off("mousedown"),regionsGroup.off("click"),mapOrGeoModel.get("selectedMode")&amp;&amp;(regionsGroup.on("mousedown",function(){mapDraw._mouseDownFlag=!0}),regionsGroup.on("click",function(e2){mapDraw._mouseDownFlag&amp;&amp;(mapDraw._mouseDownFlag=!1)}))},MapDraw2}();function applyOptionStyleForRegion(viewBuildCtx,el,dataIndex,regionModel){var normalStyleModel=regionModel.getModel("itemStyle"),emphasisStyleModel=regionModel.getModel(["emphasis","itemStyle"]),blurStyleModel=regionModel.getModel(["blur","itemStyle"]),selectStyleModel=regionModel.getModel(["select","itemStyle"]),normalStyle=getFixedItemStyle(normalStyleModel),emphasisStyle=getFixedItemStyle(emphasisStyleModel),selectStyle=getFixedItemStyle(selectStyleModel),blurStyle=getFixedItemStyle(blurStyleModel),data=viewBuildCtx.data;if(data){var style=data.getItemVisual(dataIndex,"style"),decal=data.getItemVisual(dataIndex,"decal");viewBuildCtx.isVisualEncodedByVisualMap&amp;&amp;style.fill&amp;&amp;(normalStyle.fill=style.fill),decal&amp;&amp;(normalStyle.decal=createOrUpdatePatternFromDecal(decal,viewBuildCtx.api))}el.setStyle(normalStyle),el.style.strokeNoScale=!0,el.ensureState("emphasis").style=emphasisStyle,el.ensureState("select").style=selectStyle,el.ensureState("blur").style=blurStyle,setDefaultStateProxy(el)}function resetLabelForRegion(viewBuildCtx,el,regionName,regionModel,mapOrGeoModel,dataIdx,labelXY){var data=viewBuildCtx.data,isGeo=viewBuildCtx.isGeo,isDataNaN=data&amp;&amp;isNaN(data.get(data.mapDimension("value"),dataIdx)),itemLayout=data&amp;&amp;data.getItemLayout(dataIdx);if(isGeo||isDataNaN||itemLayout&amp;&amp;itemLayout.showLabel){var query=isGeo?regionName:dataIdx,labelFetcher=void 0;(!data||dataIdx&gt;=0)&amp;&amp;(labelFetcher=mapOrGeoModel);var specifiedTextOpt=labelXY?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(el,getLabelStatesModels(regionModel),{labelFetcher:labelFetcher,labelDataIndex:query,defaultText:regionName},specifiedTextOpt);var textEl=el.getTextContent();if(textEl&amp;&amp;(mapLabelRaw(textEl).ignore=textEl.ignore,el.textConfig&amp;&amp;labelXY)){var rect=el.getBoundingRect().clone();el.textConfig.layoutRect=rect,el.textConfig.position=[(labelXY[0]-rect.x)/rect.width*100+"%",(labelXY[1]-rect.y)/rect.height*100+"%"]}el.disableLabelAnimation=!0}else el.removeTextContent(),el.removeTextConfig(),el.disableLabelAnimation=null}function resetEventTriggerForRegion(viewBuildCtx,eventTrigger,regionName,regionModel,mapOrGeoModel,dataIdx){viewBuildCtx.data?viewBuildCtx.data.setItemGraphicEl(dataIdx,eventTrigger):getECData(eventTrigger).eventData={componentType:"geo",componentIndex:mapOrGeoModel.componentIndex,geoIndex:mapOrGeoModel.componentIndex,name:regionName,region:regionModel&amp;&amp;regionModel.option||{}}}function resetTooltipForRegion(viewBuildCtx,el,regionName,regionModel,mapOrGeoModel){viewBuildCtx.data||setTooltipConfig({el:el,componentModel:mapOrGeoModel,itemName:regionName,itemTooltipOption:regionModel.get("tooltip")})}function resetStateTriggerForRegion(viewBuildCtx,el,regionName,regionModel,mapOrGeoModel){el.highDownSilentOnTouch=!!mapOrGeoModel.get("selectedMode");var emphasisModel=regionModel.getModel("emphasis"),focus=emphasisModel.get("focus");return toggleHoverEmphasis(el,focus,emphasisModel.get("blurScope"),emphasisModel.get("disabled")),viewBuildCtx.isGeo&amp;&amp;function enableComponentHighDownFeatures(el,componentModel,componentHighDownName){var ecData=getECData(el);ecData.componentMainType=componentModel.mainType,ecData.componentIndex=componentModel.componentIndex,ecData.componentHighDownName=componentHighDownName}(el,mapOrGeoModel,regionName),focus}function projectPolys(rings,createStream,isLine){var curPoly,polygons=[];function startPolygon(){curPoly=[]}function endPolygon(){curPoly.length&amp;&amp;(polygons.push(curPoly),curPoly=[])}var stream=createStream({polygonStart:startPolygon,polygonEnd:endPolygon,lineStart:startPolygon,lineEnd:endPolygon,point:function(x,y){isFinite(x)&amp;&amp;isFinite(y)&amp;&amp;curPoly.push([x,y])},sphere:function(){}});return!isLine&amp;&amp;stream.polygonStart(),each$f(rings,function(ring){stream.lineStart();for(var i=0;i&lt;ring.length;i++)stream.point(ring[i][0],ring[i][1]);stream.lineEnd()}),!isLine&amp;&amp;stream.polygonEnd(),polygons}var MapView=function(_super){function MapView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MapView2.type,_this}return __extends$1(MapView2,_super),MapView2.prototype.render=function(mapModel,ecModel,api,payload){if(!payload||"mapToggleSelect"!==payload.type||payload.from!==this.uid){var group=this.group;if(group.removeAll(),!mapModel.getHostGeoModel()){if(this._mapDraw&amp;&amp;payload&amp;&amp;"geoRoam"===payload.type&amp;&amp;this._mapDraw.resetForLabelLayout(),payload&amp;&amp;"geoRoam"===payload.type&amp;&amp;"series"===payload.componentType&amp;&amp;payload.seriesId===mapModel.id)(mapDraw=this._mapDraw)&amp;&amp;group.add(mapDraw.group);else if(mapModel.needsDrawMap){var mapDraw=this._mapDraw||new MapDraw(api);group.add(mapDraw.group),mapDraw.draw(mapModel,ecModel,api,this,payload),this._mapDraw=mapDraw}else this._mapDraw&amp;&amp;this._mapDraw.remove(),this._mapDraw=null;mapModel.get("showLegendSymbol")&amp;&amp;ecModel.getComponent("legend")&amp;&amp;this._renderSymbols(mapModel,ecModel,api)}}},MapView2.prototype.remove=function(){this._mapDraw&amp;&amp;this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},MapView2.prototype.dispose=function(){this._mapDraw&amp;&amp;this._mapDraw.remove(),this._mapDraw=null},MapView2.prototype._renderSymbols=function(mapModel,ecModel,api){var originalData=mapModel.originalData,group=this.group;originalData.each(originalData.mapDimension("value"),function(value,originalDataIndex){if(!isNaN(value)){var layout2=originalData.getItemLayout(originalDataIndex);if(layout2&amp;&amp;layout2.point){var point=layout2.point,offset=layout2.offset,circle=new Circle({style:{fill:mapModel.getData().getVisual("style").fill},shape:{cx:point[0]+9*offset,cy:point[1],r:3},silent:!0,z2:8+(offset?0:11)});if(!offset){var fullData=mapModel.mainSeries.getData(),name_1=originalData.getName(originalDataIndex),fullIndex_1=fullData.indexOfName(name_1),itemModel=originalData.getItemModel(originalDataIndex),labelModel=itemModel.getModel("label"),regionGroup=fullData.getItemGraphicEl(fullIndex_1);setLabelStyle(circle,getLabelStatesModels(itemModel),{labelFetcher:{getFormattedLabel:function(idx,state){return mapModel.getFormattedLabel(fullIndex_1,state)}},defaultText:name_1}),circle.disableLabelAnimation=!0,labelModel.get("position")||circle.setTextConfig({position:"bottom"}),regionGroup.onHoverStateChange=function(toState){setStatesFlag(circle,toState)}}group.add(circle)}}})},MapView2.type="map",MapView2}(ChartView),MapSeries=function(_super){function MapSeries2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MapSeries2.type,_this.needsDrawMap=!1,_this.seriesGroup=[],_this.getTooltipPosition=function(dataIndex){if(null!=dataIndex){var name_1=this.getData().getName(dataIndex),geo=this.coordinateSystem,region=geo.getRegion(name_1);return region&amp;&amp;geo.dataToPoint(region.getCenter())}},_this}return __extends$1(MapSeries2,_super),MapSeries2.prototype.getInitialData=function(option){for(var data=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),dataNameIndexMap=createHashMap(),toAppendItems=[],i=0,len2=data.count();i&lt;len2;i++){var name_2=data.getName(i);dataNameIndexMap.set(name_2,i)}return each$f(geoSourceManager_load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(region){var dataItem,name=region.name,dataNameIdx=dataNameIndexMap.get(name),specifiedGeoJSONRegionStyle=region.properties&amp;&amp;region.properties.echartsStyle;null==dataNameIdx?(dataItem={name:name},toAppendItems.push(dataItem)):dataItem=data.getRawDataItem(dataNameIdx),specifiedGeoJSONRegionStyle&amp;&amp;merge(dataItem,specifiedGeoJSONRegionStyle)}),data.appendData(toAppendItems),data},MapSeries2.prototype.getHostGeoModel=function(){var geoIndex=this.option.geoIndex;return null!=geoIndex?this.ecModel.getComponent("geo",geoIndex):null},MapSeries2.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},MapSeries2.prototype.getRawValue=function(dataIndex){var data=this.getData();return data.get(data.mapDimension("value"),dataIndex)},MapSeries2.prototype.getRegionModel=function(regionName){var data=this.getData();return data.getItemModel(data.indexOfName(regionName))},MapSeries2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){for(var data=this.getData(),value=this.getRawValue(dataIndex),name=data.getName(dataIndex),seriesGroup=this.seriesGroup,seriesNames=[],i=0;i&lt;seriesGroup.length;i++){var otherIndex=seriesGroup[i].originalData.indexOfName(name),valueDim=data.mapDimension("value");isNaN(seriesGroup[i].originalData.get(valueDim,otherIndex))||seriesNames.push(seriesGroup[i].name)}return createTooltipMarkup("section",{header:seriesNames.join(", "),noHeader:!seriesNames.length,blocks:[createTooltipMarkup("nameValue",{name:name,value:value})]})},MapSeries2.prototype.setZoom=function(zoom){this.option.zoom=zoom},MapSeries2.prototype.setCenter=function(center2){this.option.center=center2},MapSeries2.prototype.getLegendIcon=function(opt){var iconType=opt.icon||"roundRect",icon=createSymbol$1(iconType,0,0,opt.itemWidth,opt.itemHeight,opt.itemStyle.fill);return icon.setStyle(opt.itemStyle),icon.style.stroke="none",iconType.indexOf("empty")&gt;-1&amp;&amp;(icon.style.stroke=icon.style.fill,icon.style.fill="#fff",icon.style.lineWidth=2),icon},MapSeries2.type="series.map",MapSeries2.dependencies=["geo"],MapSeries2.layoutMode="box",MapSeries2.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},MapSeries2}(SeriesModel);function mapDataStatistic(ecModel){var seriesGroups={};ecModel.eachSeriesByType("map",function(seriesModel){var hostGeoModel=seriesModel.getHostGeoModel(),key=hostGeoModel?"o"+hostGeoModel.id:"i"+seriesModel.getMapType();(seriesGroups[key]=seriesGroups[key]||[]).push(seriesModel)}),each$f(seriesGroups,function(seriesList,key){for(var data=function dataStatistics(datas,statisticType){var dataNameMap={};return each$f(datas,function(data){data.each(data.mapDimension("value"),function(value,idx){var mapKey="ec-"+data.getName(idx);dataNameMap[mapKey]=dataNameMap[mapKey]||[],isNaN(value)||dataNameMap[mapKey].push(value)})}),datas[0].map(datas[0].mapDimension("value"),function(value,idx){for(var mapKey="ec-"+datas[0].getName(idx),sum2=0,min3=1/0,max3=-1/0,len2=dataNameMap[mapKey].length,i=0;i&lt;len2;i++)min3=Math.min(min3,dataNameMap[mapKey][i]),max3=Math.max(max3,dataNameMap[mapKey][i]),sum2+=dataNameMap[mapKey][i];return 0===len2?NaN:"min"===statisticType?min3:"max"===statisticType?max3:"average"===statisticType?sum2/len2:sum2})}(map$1(seriesList,function(seriesModel){return seriesModel.getData()}),seriesList[0].get("mapValueCalculation")),i=0;i&lt;seriesList.length;i++)seriesList[i].originalData=seriesList[i].getData();for(i=0;i&lt;seriesList.length;i++)seriesList[i].seriesGroup=seriesList,seriesList[i].needsDrawMap=0===i&amp;&amp;!seriesList[i].getHostGeoModel(),seriesList[i].setData(data.cloneShallow()),seriesList[i].mainSeries=seriesList[0]})}function mapSymbolLayout(ecModel){var processedMapType={};ecModel.eachSeriesByType("map",function(mapSeries){var mapType=mapSeries.getMapType();if(!mapSeries.getHostGeoModel()&amp;&amp;!processedMapType[mapType]){var mapSymbolOffsets={};each$f(mapSeries.seriesGroup,function(subMapSeries){var geo=subMapSeries.coordinateSystem,data2=subMapSeries.originalData;subMapSeries.get("showLegendSymbol")&amp;&amp;ecModel.getComponent("legend")&amp;&amp;data2.each(data2.mapDimension("value"),function(value,idx){var name=data2.getName(idx),region=geo.getRegion(name);if(region&amp;&amp;!isNaN(value)){var offset=mapSymbolOffsets[name]||0,point=geo.dataToPoint(region.getCenter());mapSymbolOffsets[name]=offset+1,data2.setItemLayout(idx,{point:point,offset:offset})}})});var data=mapSeries.getData();data.each(function(idx){var name=data.getName(idx),layout2=data.getItemLayout(idx)||{};layout2.showLabel=!mapSymbolOffsets[name],data.setItemLayout(idx,layout2)}),processedMapType[mapType]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(_super){function View2(name){var _this=_super.call(this)||this;return _this.type="view",_this.dimensions=["x","y"],_this._roamTransformable=new Transformable,_this._rawTransformable=new Transformable,_this.name=name,_this}return __extends$1(View2,_super),View2.prototype.setBoundingRect=function(x,y,width,height){return this._rect=new BoundingRect(x,y,width,height),this._rect},View2.prototype.getBoundingRect=function(){return this._rect},View2.prototype.setViewRect=function(x,y,width,height){this._transformTo(x,y,width,height),this._viewRect=new BoundingRect(x,y,width,height)},View2.prototype._transformTo=function(x,y,width,height){var rect=this.getBoundingRect(),rawTransform=this._rawTransformable;rawTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height));var rawParent=rawTransform.parent;rawTransform.parent=null,rawTransform.decomposeTransform(),rawTransform.parent=rawParent,this._updateTransform()},View2.prototype.setCenter=function(centerCoord,api){centerCoord&amp;&amp;(this._center=[parsePercent(centerCoord[0],api.getWidth()),parsePercent(centerCoord[1],api.getHeight())],this._updateCenterAndZoom())},View2.prototype.setZoom=function(zoom){zoom=zoom||1;var zoomLimit=this.zoomLimit;zoomLimit&amp;&amp;(null!=zoomLimit.max&amp;&amp;(zoom=Math.min(zoomLimit.max,zoom)),null!=zoomLimit.min&amp;&amp;(zoom=Math.max(zoomLimit.min,zoom))),this._zoom=zoom,this._updateCenterAndZoom()},View2.prototype.getDefaultCenter=function(){var rawRect=this.getBoundingRect();return[rawRect.x+rawRect.width/2,rawRect.y+rawRect.height/2]},View2.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},View2.prototype.getZoom=function(){return this._zoom||1},View2.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},View2.prototype._updateCenterAndZoom=function(){var rawTransformMatrix=this._rawTransformable.getLocalTransform(),roamTransform=this._roamTransformable,defaultCenter=this.getDefaultCenter(),center2=this.getCenter(),zoom=this.getZoom();center2=applyTransform$1([],center2,rawTransformMatrix),defaultCenter=applyTransform$1([],defaultCenter,rawTransformMatrix),roamTransform.originX=center2[0],roamTransform.originY=center2[1],roamTransform.x=defaultCenter[0]-center2[0],roamTransform.y=defaultCenter[1]-center2[1],roamTransform.scaleX=roamTransform.scaleY=zoom,this._updateTransform()},View2.prototype._updateTransform=function(){var roamTransformable=this._roamTransformable,rawTransformable=this._rawTransformable;rawTransformable.parent=roamTransformable,roamTransformable.updateTransform(),rawTransformable.updateTransform(),copy(this.transform||(this.transform=[]),rawTransformable.transform||[1,0,0,1,0,0]),this._rawTransform=rawTransformable.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},View2.prototype.getTransformInfo=function(){var rawTransformable=this._rawTransformable,roamTransformable=this._roamTransformable,dummyTransformable2=new Transformable;return dummyTransformable2.transform=roamTransformable.transform,dummyTransformable2.decomposeTransform(),{roam:{x:dummyTransformable2.x,y:dummyTransformable2.y,scaleX:dummyTransformable2.scaleX,scaleY:dummyTransformable2.scaleY},raw:{x:rawTransformable.x,y:rawTransformable.y,scaleX:rawTransformable.scaleX,scaleY:rawTransformable.scaleY}}},View2.prototype.getViewRect=function(){return this._viewRect},View2.prototype.getViewRectAfterRoam=function(){var rect=this.getBoundingRect().clone();return rect.applyTransform(this.transform),rect},View2.prototype.dataToPoint=function(data,noRoam,out2){var transform2=noRoam?this._rawTransform:this.transform;return out2=out2||[],transform2?v2ApplyTransform(out2,data,transform2):copy$1(out2,data)},View2.prototype.pointToData=function(point){var invTransform=this.invTransform;return invTransform?v2ApplyTransform([],point,invTransform):[point[0],point[1]]},View2.prototype.convertToPixel=function(ecModel,finder,value){var coordSys=getCoordSys$4(finder);return coordSys===this?coordSys.dataToPoint(value):null},View2.prototype.convertFromPixel=function(ecModel,finder,pixel){var coordSys=getCoordSys$4(finder);return coordSys===this?coordSys.pointToData(pixel):null},View2.prototype.containPoint=function(point){return this.getViewRectAfterRoam().contain(point[0],point[1])},View2.dimensions=["x","y"],View2}(Transformable);function getCoordSys$4(finder){var seriesModel=finder.seriesModel;return seriesModel?seriesModel.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(_super){function Geo2(name,map2,opt){var _this=_super.call(this,name)||this;_this.dimensions=geo2DDimensions,_this.type="geo",_this._nameCoordMap=createHashMap(),_this.map=map2;var projection=opt.projection,source=geoSourceManager_load(map2,opt.nameMap,opt.nameProperty),resource=geoSourceManager_getGeoResource(map2);_this.resourceType=resource?resource.type:null;var boundingRect,regions=_this.regions=source.regions,defaultParams=GEO_DEFAULT_PARAMS[resource.type];if(_this._regionsMap=source.regionsMap,_this.regions=source.regions,_this.projection=projection,projection)for(var i=0;i&lt;regions.length;i++){var regionRect=regions[i].getBoundingRect(projection);(boundingRect=boundingRect||regionRect.clone()).union(regionRect)}else boundingRect=source.boundingRect;return _this.setBoundingRect(boundingRect.x,boundingRect.y,boundingRect.width,boundingRect.height),_this.aspectScale=projection?1:retrieve2(opt.aspectScale,defaultParams.aspectScale),_this._invertLongitute=!projection&amp;&amp;defaultParams.invertLongitute,_this}return __extends$1(Geo2,_super),Geo2.prototype._transformTo=function(x,y,width,height){var rect=this.getBoundingRect(),invertLongitute=this._invertLongitute;rect=rect.clone(),invertLongitute&amp;&amp;(rect.y=-rect.y-rect.height);var rawTransformable=this._rawTransformable;rawTransformable.transform=rect.calculateTransform(new BoundingRect(x,y,width,height));var rawParent=rawTransformable.parent;rawTransformable.parent=null,rawTransformable.decomposeTransform(),rawTransformable.parent=rawParent,invertLongitute&amp;&amp;(rawTransformable.scaleY=-rawTransformable.scaleY),this._updateTransform()},Geo2.prototype.getRegion=function(name){return this._regionsMap.get(name)},Geo2.prototype.getRegionByCoord=function(coord){for(var regions=this.regions,i=0;i&lt;regions.length;i++){var region=regions[i];if("geoJSON"===region.type&amp;&amp;region.contain(coord))return regions[i]}},Geo2.prototype.addGeoCoord=function(name,geoCoord2){this._nameCoordMap.set(name,geoCoord2)},Geo2.prototype.getGeoCoord=function(name){var region=this._regionsMap.get(name);return this._nameCoordMap.get(name)||region&amp;&amp;region.getCenter()},Geo2.prototype.dataToPoint=function(data,noRoam,out2){if(isString(data)&amp;&amp;(data=this.getGeoCoord(data)),data){var projection=this.projection;return projection&amp;&amp;(data=projection.project(data)),data&amp;&amp;this.projectedToPoint(data,noRoam,out2)}},Geo2.prototype.pointToData=function(point){var projection=this.projection;return projection&amp;&amp;(point=projection.unproject(point)),point&amp;&amp;this.pointToProjected(point)},Geo2.prototype.pointToProjected=function(point){return _super.prototype.pointToData.call(this,point)},Geo2.prototype.projectedToPoint=function(projected,noRoam,out2){return _super.prototype.dataToPoint.call(this,projected,noRoam,out2)},Geo2.prototype.convertToPixel=function(ecModel,finder,value){var coordSys=getCoordSys$3(finder);return coordSys===this?coordSys.dataToPoint(value):null},Geo2.prototype.convertFromPixel=function(ecModel,finder,pixel){var coordSys=getCoordSys$3(finder);return coordSys===this?coordSys.pointToData(pixel):null},Geo2}(View);function getCoordSys$3(finder){var geoModel=finder.geoModel,seriesModel=finder.seriesModel;return geoModel?geoModel.coordinateSystem:seriesModel?seriesModel.coordinateSystem||(seriesModel.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(geoModel,api){var boundingCoords=geoModel.get("boundingCoords");if(null!=boundingCoords){var leftTop_1=boundingCoords[0],rightBottom_1=boundingCoords[1];if(isFinite(leftTop_1[0])&amp;&amp;isFinite(leftTop_1[1])&amp;&amp;isFinite(rightBottom_1[0])&amp;&amp;isFinite(rightBottom_1[1])){var projection_1=this.projection;if(projection_1){var xMin=leftTop_1[0],yMin=leftTop_1[1],xMax=rightBottom_1[0],yMax=rightBottom_1[1];leftTop_1=[1/0,1/0],rightBottom_1=[-1/0,-1/0];var sampleLine=function(x0,y0,x1,y1){for(var dx=x1-x0,dy=y1-y0,i=0;i&lt;=100;i++){var p=i/100,pt=projection_1.project([x0+dx*p,y0+dy*p]);min$1(leftTop_1,leftTop_1,pt),max$1(rightBottom_1,rightBottom_1,pt)}};sampleLine(xMin,yMin,xMax,yMin),sampleLine(xMax,yMin,xMax,yMax),sampleLine(xMax,yMax,xMin,yMax),sampleLine(xMin,yMax,xMax,yMin)}this.setBoundingRect(leftTop_1[0],leftTop_1[1],rightBottom_1[0]-leftTop_1[0],rightBottom_1[1]-leftTop_1[1])}else;}var center2,size,viewRect2,rect=this.getBoundingRect(),centerOption=geoModel.get("layoutCenter"),sizeOption=geoModel.get("layoutSize"),viewWidth=api.getWidth(),viewHeight=api.getHeight(),aspect=rect.width/rect.height*this.aspectScale,useCenterAndSize=!1;if(centerOption&amp;&amp;sizeOption&amp;&amp;(center2=[parsePercent(centerOption[0],viewWidth),parsePercent(centerOption[1],viewHeight)],size=parsePercent(sizeOption,Math.min(viewWidth,viewHeight)),isNaN(center2[0])||isNaN(center2[1])||isNaN(size)||(useCenterAndSize=!0)),useCenterAndSize)viewRect2={},aspect&gt;1?(viewRect2.width=size,viewRect2.height=size/aspect):(viewRect2.height=size,viewRect2.width=size*aspect),viewRect2.y=center2[1]-viewRect2.height/2,viewRect2.x=center2[0]-viewRect2.width/2;else{var boxLayoutOption=geoModel.getBoxLayoutParams();boxLayoutOption.aspect=aspect,viewRect2=getLayoutRect(boxLayoutOption,{width:viewWidth,height:viewHeight})}this.setViewRect(viewRect2.x,viewRect2.y,viewRect2.width,viewRect2.height),this.setCenter(geoModel.get("center"),api),this.setZoom(geoModel.get("zoom"))}mixin(Geo,View);var GeoCreator=function(){function GeoCreator2(){this.dimensions=geo2DDimensions}return GeoCreator2.prototype.create=function(ecModel,api){var geoList=[];function getCommonGeoProperties(model){return{nameProperty:model.get("nameProperty"),aspectScale:model.get("aspectScale"),projection:model.get("projection")}}ecModel.eachComponent("geo",function(geoModel,idx){var mapName=geoModel.get("map"),geo=new Geo(mapName+idx,mapName,extend({nameMap:geoModel.get("nameMap")},getCommonGeoProperties(geoModel)));geo.zoomLimit=geoModel.get("scaleLimit"),geoList.push(geo),geoModel.coordinateSystem=geo,geo.model=geoModel,geo.resize=resizeGeo,geo.resize(geoModel,api)}),ecModel.eachSeries(function(seriesModel){if("geo"===seriesModel.get("coordinateSystem")){var geoIndex=seriesModel.get("geoIndex")||0;seriesModel.coordinateSystem=geoList[geoIndex]}});var mapModelGroupBySeries={};return ecModel.eachSeriesByType("map",function(seriesModel){if(!seriesModel.getHostGeoModel()){var mapType=seriesModel.getMapType();mapModelGroupBySeries[mapType]=mapModelGroupBySeries[mapType]||[],mapModelGroupBySeries[mapType].push(seriesModel)}}),each$f(mapModelGroupBySeries,function(mapSeries,mapType){var nameMapList=map$1(mapSeries,function(singleMapSeries){return singleMapSeries.get("nameMap")}),geo=new Geo(mapType,mapType,extend({nameMap:mergeAll(nameMapList)},getCommonGeoProperties(mapSeries[0])));geo.zoomLimit=retrieve.apply(null,map$1(mapSeries,function(singleMapSeries){return singleMapSeries.get("scaleLimit")})),geoList.push(geo),geo.resize=resizeGeo,geo.resize(mapSeries[0],api),each$f(mapSeries,function(singleMapSeries){singleMapSeries.coordinateSystem=geo,function setGeoCoords(geo,model){each$f(model.get("geoCoord"),function(geoCoord2,name){geo.addGeoCoord(name,geoCoord2)})}(geo,singleMapSeries)})}),geoList},GeoCreator2.prototype.getFilledRegions=function(originRegionArr,mapName,nameMap,nameProperty){for(var regionsArr=(originRegionArr||[]).slice(),dataNameMap=createHashMap(),i=0;i&lt;regionsArr.length;i++)dataNameMap.set(regionsArr[i].name,regionsArr[i]);return each$f(geoSourceManager_load(mapName,nameMap,nameProperty).regions,function(region){var name=region.name,regionOption=dataNameMap.get(name),specifiedGeoJSONRegionStyle=region.properties&amp;&amp;region.properties.echartsStyle;regionOption||(regionOption={name:name},regionsArr.push(regionOption)),specifiedGeoJSONRegionStyle&amp;&amp;merge(regionOption,specifiedGeoJSONRegionStyle)}),regionsArr},GeoCreator2}(),geoCreator=new GeoCreator,GeoModel=function(_super){function GeoModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GeoModel2.type,_this}return __extends$1(GeoModel2,_super),GeoModel2.prototype.init=function(option,parentModel,ecModel){var source=geoSourceManager_getGeoResource(option.map);if(source&amp;&amp;"geoJSON"===source.type){var itemStyle=option.itemStyle=option.itemStyle||{};"color"in itemStyle||(itemStyle.color="#eee")}this.mergeDefaultAndTheme(option,ecModel),defaultEmphasis(option,"label",["show"])},GeoModel2.prototype.optionUpdated=function(){var _this=this,option=this.option;option.regions=geoCreator.getFilledRegions(option.regions,option.map,option.nameMap,option.nameProperty);var selectedMap={};this._optionModelMap=reduce(option.regions||[],function(optionModelMap,regionOpt){var regionName=regionOpt.name;return regionName&amp;&amp;(optionModelMap.set(regionName,new Model(regionOpt,_this,_this.ecModel)),regionOpt.selected&amp;&amp;(selectedMap[regionName]=!0)),optionModelMap},createHashMap()),option.selectedMap||(option.selectedMap=selectedMap)},GeoModel2.prototype.getRegionModel=function(name){return this._optionModelMap.get(name)||new Model(null,this,this.ecModel)},GeoModel2.prototype.getFormattedLabel=function(name,status){var regionModel=this.getRegionModel(name),formatter="normal"===status?regionModel.get(["label","formatter"]):regionModel.get(["emphasis","label","formatter"]),params={name:name};return isFunction(formatter)?(params.status=status,formatter(params)):isString(formatter)?formatter.replace("{a}",null!=name?name:""):void 0},GeoModel2.prototype.setZoom=function(zoom){this.option.zoom=zoom},GeoModel2.prototype.setCenter=function(center2){this.option.center=center2},GeoModel2.prototype.select=function(name){var option=this.option,selectedMode=option.selectedMode;selectedMode&amp;&amp;("multiple"!==selectedMode&amp;&amp;(option.selectedMap=null),(option.selectedMap||(option.selectedMap={}))[name]=!0)},GeoModel2.prototype.unSelect=function(name){var selectedMap=this.option.selectedMap;selectedMap&amp;&amp;(selectedMap[name]=!1)},GeoModel2.prototype.toggleSelected=function(name){this[this.isSelected(name)?"unSelect":"select"](name)},GeoModel2.prototype.isSelected=function(name){var selectedMap=this.option.selectedMap;return!(!selectedMap||!selectedMap[name])},GeoModel2.type="geo",GeoModel2.layoutMode="box",GeoModel2.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},GeoModel2}(ComponentModel);function getCenterCoord(view,point){return view.pointToProjected?view.pointToProjected(point):view.pointToData(point)}function updateCenterAndZoom(view,payload,zoomLimit,api){var previousZoom=view.getZoom(),center2=view.getCenter(),zoom=payload.zoom,point=view.projectedToPoint?view.projectedToPoint(center2):view.dataToPoint(center2);if(null!=payload.dx&amp;&amp;null!=payload.dy&amp;&amp;(point[0]-=payload.dx,point[1]-=payload.dy,view.setCenter(getCenterCoord(view,point),api)),null!=zoom){if(zoomLimit){var zoomMin=zoomLimit.min||0,zoomMax=zoomLimit.max||1/0;zoom=Math.max(Math.min(previousZoom*zoom,zoomMax),zoomMin)/previousZoom}view.scaleX*=zoom,view.scaleY*=zoom;var fixX=(payload.originX-view.x)*(zoom-1),fixY=(payload.originY-view.y)*(zoom-1);view.x-=fixX,view.y-=fixY,view.updateTransform(),view.setCenter(getCenterCoord(view,point),api),view.setZoom(zoom*previousZoom)}return{center:view.getCenter(),zoom:view.getZoom()}}var GeoView=function(_super){function GeoView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GeoView2.type,_this.focusBlurEnabled=!0,_this}return __extends$1(GeoView2,_super),GeoView2.prototype.init=function(ecModel,api){this._api=api},GeoView2.prototype.render=function(geoModel,ecModel,api,payload){if(this._model=geoModel,!geoModel.get("show"))return this._mapDraw&amp;&amp;this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new MapDraw(api));var mapDraw=this._mapDraw;mapDraw.draw(geoModel,ecModel,api,this,payload),mapDraw.group.on("click",this._handleRegionClick,this),mapDraw.group.silent=geoModel.get("silent"),this.group.add(mapDraw.group),this.updateSelectStatus(geoModel,ecModel,api)},GeoView2.prototype._handleRegionClick=function(e2){var eventData;findEventDispatcher(e2.target,function(current){return null!=(eventData=getECData(current).eventData)},!0),eventData&amp;&amp;this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:eventData.name})},GeoView2.prototype.updateSelectStatus=function(model,ecModel,api){var _this=this;this._mapDraw.group.traverse(function(node){var eventData=getECData(node).eventData;if(eventData)return _this._model.isSelected(eventData.name)?api.enterSelect(node):api.leaveSelect(node),!0})},GeoView2.prototype.findHighDownDispatchers=function(name){return this._mapDraw&amp;&amp;this._mapDraw.findHighDownDispatchers(name,this._model)},GeoView2.prototype.dispose=function(){this._mapDraw&amp;&amp;this._mapDraw.remove()},GeoView2.type="geo",GeoView2}(ComponentView);function registerMap(mapName,geoJson,specialAreas){geoSourceManager_registerMap(mapName,geoJson,specialAreas)}function install$J(registers){function makeAction(method,actionInfo2){actionInfo2.update="geo:updateSelectStatus",registers.registerAction(actionInfo2,function(payload,ecModel){var selected={},allSelected=[];return ecModel.eachComponent({mainType:"geo",query:payload},function(geoModel){geoModel[method](payload.name),each$f(geoModel.coordinateSystem.regions,function(region){selected[region.name]=geoModel.isSelected(region.name)||!1});var names=[];each$f(selected,function(v,name){selected[name]&amp;&amp;names.push(name)}),allSelected.push({geoIndex:geoModel.componentIndex,name:names})}),{selected:selected,allSelected:allSelected,name:payload.name}})}registers.registerCoordinateSystem("geo",geoCreator),registers.registerComponentModel(GeoModel),registers.registerComponentView(GeoView),registers.registerImpl("registerMap",registerMap),registers.registerImpl("getMap",function(mapName){return geoSourceManager_getMapForUser(mapName)}),makeAction("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),makeAction("select",{type:"geoSelect",event:"geoselected"}),makeAction("unSelect",{type:"geoUnSelect",event:"geounselected"}),registers.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(payload,ecModel,api){var componentType=payload.componentType||"series";ecModel.eachComponent({mainType:componentType,query:payload},function(componentModel){var geo=componentModel.coordinateSystem;if("geo"===geo.type){var res=updateCenterAndZoom(geo,payload,componentModel.get("scaleLimit"),api);componentModel.setCenter&amp;&amp;componentModel.setCenter(res.center),componentModel.setZoom&amp;&amp;componentModel.setZoom(res.zoom),"series"===componentType&amp;&amp;each$f(componentModel.seriesGroup,function(seriesModel){seriesModel.setCenter(res.center),seriesModel.setZoom(res.zoom)})}})})}function firstWalk(node,separation2){var children=node.isExpand?node.children:[],siblings=node.parentNode.children,subtreeW=node.hierNode.i?siblings[node.hierNode.i-1]:null;if(children.length){!function executeShifts(node){var children=node.children,n=children.length,shift=0,change=0;for(;--n&gt;=0;){var child=children[n];child.hierNode.prelim+=shift,child.hierNode.modifier+=shift,change+=child.hierNode.change,shift+=child.hierNode.shift+change}}(node);var midPoint=(children[0].hierNode.prelim+children[children.length-1].hierNode.prelim)/2;subtreeW?(node.hierNode.prelim=subtreeW.hierNode.prelim+separation2(node,subtreeW),node.hierNode.modifier=node.hierNode.prelim-midPoint):node.hierNode.prelim=midPoint}else subtreeW&amp;&amp;(node.hierNode.prelim=subtreeW.hierNode.prelim+separation2(node,subtreeW));node.parentNode.hierNode.defaultAncestor=function apportion(subtreeV,subtreeW,ancestor,separation2){if(subtreeW){for(var nodeOutRight=subtreeV,nodeInRight=subtreeV,nodeOutLeft=nodeInRight.parentNode.children[0],nodeInLeft=subtreeW,sumOutRight=nodeOutRight.hierNode.modifier,sumInRight=nodeInRight.hierNode.modifier,sumOutLeft=nodeOutLeft.hierNode.modifier,sumInLeft=nodeInLeft.hierNode.modifier;nodeInLeft=nextRight(nodeInLeft),nodeInRight=nextLeft(nodeInRight),nodeInLeft&amp;&amp;nodeInRight;){nodeOutRight=nextRight(nodeOutRight),nodeOutLeft=nextLeft(nodeOutLeft),nodeOutRight.hierNode.ancestor=subtreeV;var shift=nodeInLeft.hierNode.prelim+sumInLeft-nodeInRight.hierNode.prelim-sumInRight+separation2(nodeInLeft,nodeInRight);shift&gt;0&amp;&amp;(moveSubtree(nextAncestor(nodeInLeft,subtreeV,ancestor),subtreeV,shift),sumInRight+=shift,sumOutRight+=shift),sumInLeft+=nodeInLeft.hierNode.modifier,sumInRight+=nodeInRight.hierNode.modifier,sumOutRight+=nodeOutRight.hierNode.modifier,sumOutLeft+=nodeOutLeft.hierNode.modifier}nodeInLeft&amp;&amp;!nextRight(nodeOutRight)&amp;&amp;(nodeOutRight.hierNode.thread=nodeInLeft,nodeOutRight.hierNode.modifier+=sumInLeft-sumOutRight),nodeInRight&amp;&amp;!nextLeft(nodeOutLeft)&amp;&amp;(nodeOutLeft.hierNode.thread=nodeInRight,nodeOutLeft.hierNode.modifier+=sumInRight-sumOutLeft,ancestor=subtreeV)}return ancestor}(node,subtreeW,node.parentNode.hierNode.defaultAncestor||siblings[0],separation2)}function secondWalk(node){var nodeX=node.hierNode.prelim+node.parentNode.hierNode.modifier;node.setLayout({x:nodeX},!0),node.hierNode.modifier+=node.parentNode.hierNode.modifier}function separation(cb){return arguments.length?cb:defaultSeparation}function radialCoordinate(rad,r){return rad-=Math.PI/2,{x:r*Math.cos(rad),y:r*Math.sin(rad)}}function nextRight(node){var children=node.children;return children.length&amp;&amp;node.isExpand?children[children.length-1]:node.hierNode.thread}function nextLeft(node){var children=node.children;return children.length&amp;&amp;node.isExpand?children[0]:node.hierNode.thread}function nextAncestor(nodeInLeft,node,ancestor){return nodeInLeft.hierNode.ancestor.parentNode===node.parentNode?nodeInLeft.hierNode.ancestor:ancestor}function moveSubtree(wl,wr,shift){var change=shift/(wr.hierNode.i-wl.hierNode.i);wr.hierNode.change-=change,wr.hierNode.shift+=shift,wr.hierNode.modifier+=shift,wr.hierNode.prelim+=shift,wl.hierNode.change+=change}function defaultSeparation(node1,node2){return node1.parentNode===node2.parentNode?1:2}var TreeEdgeShape=function(){return function TreeEdgeShape2(){this.parentPoint=[],this.childPoints=[]}}(),TreePath=function(_super){function TreePath2(opts){return _super.call(this,opts)||this}return __extends$1(TreePath2,_super),TreePath2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},TreePath2.prototype.getDefaultShape=function(){return new TreeEdgeShape},TreePath2.prototype.buildPath=function(ctx,shape){var childPoints=shape.childPoints,childLen=childPoints.length,parentPoint=shape.parentPoint,firstChildPos=childPoints[0],lastChildPos=childPoints[childLen-1];if(1===childLen)return ctx.moveTo(parentPoint[0],parentPoint[1]),void ctx.lineTo(firstChildPos[0],firstChildPos[1]);var orient=shape.orient,forkDim="TB"===orient||"BT"===orient?0:1,otherDim=1-forkDim,forkPosition=parsePercent(shape.forkPosition,1),tmpPoint=[];tmpPoint[forkDim]=parentPoint[forkDim],tmpPoint[otherDim]=parentPoint[otherDim]+(lastChildPos[otherDim]-parentPoint[otherDim])*forkPosition,ctx.moveTo(parentPoint[0],parentPoint[1]),ctx.lineTo(tmpPoint[0],tmpPoint[1]),ctx.moveTo(firstChildPos[0],firstChildPos[1]),tmpPoint[forkDim]=firstChildPos[forkDim],ctx.lineTo(tmpPoint[0],tmpPoint[1]),tmpPoint[forkDim]=lastChildPos[forkDim],ctx.lineTo(tmpPoint[0],tmpPoint[1]),ctx.lineTo(lastChildPos[0],lastChildPos[1]);for(var i=1;i&lt;childLen-1;i++){var point=childPoints[i];ctx.moveTo(point[0],point[1]),tmpPoint[forkDim]=point[forkDim],ctx.lineTo(tmpPoint[0],tmpPoint[1])}},TreePath2}(Path),TreeView=function(_super){function TreeView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TreeView2.type,_this._mainGroup=new Group$3,_this}return __extends$1(TreeView2,_super),TreeView2.prototype.init=function(ecModel,api){this._controller=new RoamController(api.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},TreeView2.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),layoutInfo=seriesModel.layoutInfo,group=this._mainGroup;"radial"===seriesModel.get("layout")?(group.x=layoutInfo.x+layoutInfo.width/2,group.y=layoutInfo.y+layoutInfo.height/2):(group.x=layoutInfo.x,group.y=layoutInfo.y),this._updateViewCoordSys(seriesModel,api),this._updateController(seriesModel,ecModel,api);var oldData=this._data;data.diff(oldData).add(function(newIdx){symbolNeedsDraw(data,newIdx)&amp;&amp;updateNode(data,newIdx,null,group,seriesModel)}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);symbolNeedsDraw(data,newIdx)?updateNode(data,newIdx,symbolEl,group,seriesModel):symbolEl&amp;&amp;removeNode(oldData,oldIdx,symbolEl,group,seriesModel)}).remove(function(oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);symbolEl&amp;&amp;removeNode(oldData,oldIdx,symbolEl,group,seriesModel)}).execute(),this._nodeScaleRatio=seriesModel.get("nodeScaleRatio"),this._updateNodeAndLinkScale(seriesModel),!0===seriesModel.get("expandAndCollapse")&amp;&amp;data.eachItemGraphicEl(function(el,dataIndex){el.off("click").on("click",function(){api.dispatchAction({type:"treeExpandAndCollapse",seriesId:seriesModel.id,dataIndex:dataIndex})})}),this._data=data},TreeView2.prototype._updateViewCoordSys=function(seriesModel,api){var data=seriesModel.getData(),points2=[];data.each(function(idx){var layout2=data.getItemLayout(idx);!layout2||isNaN(layout2.x)||isNaN(layout2.y)||points2.push([+layout2.x,+layout2.y])});var min3=[],max3=[];fromPoints(points2,min3,max3);var oldMin=this._min,oldMax=this._max;max3[0]-min3[0]===0&amp;&amp;(min3[0]=oldMin?oldMin[0]:min3[0]-1,max3[0]=oldMax?oldMax[0]:max3[0]+1),max3[1]-min3[1]===0&amp;&amp;(min3[1]=oldMin?oldMin[1]:min3[1]-1,max3[1]=oldMax?oldMax[1]:max3[1]+1);var viewCoordSys=seriesModel.coordinateSystem=new View;viewCoordSys.zoomLimit=seriesModel.get("scaleLimit"),viewCoordSys.setBoundingRect(min3[0],min3[1],max3[0]-min3[0],max3[1]-min3[1]),viewCoordSys.setCenter(seriesModel.get("center"),api),viewCoordSys.setZoom(seriesModel.get("zoom")),this.group.attr({x:viewCoordSys.x,y:viewCoordSys.y,scaleX:viewCoordSys.scaleX,scaleY:viewCoordSys.scaleY}),this._min=min3,this._max=max3},TreeView2.prototype._updateController=function(seriesModel,ecModel,api){var _this=this,controller=this._controller,controllerHost=this._controllerHost,group=this.group;controller.setPointerChecker(function(e2,x,y){var rect=group.getBoundingRect();return rect.applyTransform(group.transform),rect.contain(x,y)&amp;&amp;!onIrrelevantElement(e2,api,seriesModel)}),controller.enable(seriesModel.get("roam")),controllerHost.zoomLimit=seriesModel.get("scaleLimit"),controllerHost.zoom=seriesModel.coordinateSystem.getZoom(),controller.off("pan").off("zoom").on("pan",function(e2){updateViewOnPan(controllerHost,e2.dx,e2.dy),api.dispatchAction({seriesId:seriesModel.id,type:"treeRoam",dx:e2.dx,dy:e2.dy})}).on("zoom",function(e2){updateViewOnZoom(controllerHost,e2.scale,e2.originX,e2.originY),api.dispatchAction({seriesId:seriesModel.id,type:"treeRoam",zoom:e2.scale,originX:e2.originX,originY:e2.originY}),_this._updateNodeAndLinkScale(seriesModel),api.updateLabelLayout()})},TreeView2.prototype._updateNodeAndLinkScale=function(seriesModel){var data=seriesModel.getData(),nodeScale=this._getNodeGlobalScale(seriesModel);data.eachItemGraphicEl(function(el,idx){el.setSymbolScale(nodeScale)})},TreeView2.prototype._getNodeGlobalScale=function(seriesModel){var coordSys=seriesModel.coordinateSystem;if("view"!==coordSys.type)return 1;var nodeScaleRatio=this._nodeScaleRatio,groupZoom=coordSys.scaleX||1;return((coordSys.getZoom()-1)*nodeScaleRatio+1)/groupZoom},TreeView2.prototype.dispose=function(){this._controller&amp;&amp;this._controller.dispose(),this._controllerHost=null},TreeView2.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},TreeView2.type="tree",TreeView2}(ChartView);function symbolNeedsDraw(data,dataIndex){var layout2=data.getItemLayout(dataIndex);return layout2&amp;&amp;!isNaN(layout2.x)&amp;&amp;!isNaN(layout2.y)}function updateNode(data,dataIndex,symbolEl,group,seriesModel){var isInit=!symbolEl,node=data.tree.getNodeByDataIndex(dataIndex),itemModel=node.getModel(),visualColor=node.getVisual("style").fill,symbolInnerColor=!1===node.isExpand&amp;&amp;0!==node.children.length?visualColor:"#fff",virtualRoot=data.tree.root,source=node.parentNode===virtualRoot?node:node.parentNode||node,sourceSymbolEl=data.getItemGraphicEl(source.dataIndex),sourceLayout=source.getLayout(),sourceOldLayout=sourceSymbolEl?{x:sourceSymbolEl.__oldX,y:sourceSymbolEl.__oldY,rawX:sourceSymbolEl.__radialOldRawX,rawY:sourceSymbolEl.__radialOldRawY}:sourceLayout,targetLayout=node.getLayout();isInit?((symbolEl=new Symbol$1(data,dataIndex,null,{symbolInnerColor:symbolInnerColor,useNameLabel:!0})).x=sourceOldLayout.x,symbolEl.y=sourceOldLayout.y):symbolEl.updateData(data,dataIndex,null,{symbolInnerColor:symbolInnerColor,useNameLabel:!0}),symbolEl.__radialOldRawX=symbolEl.__radialRawX,symbolEl.__radialOldRawY=symbolEl.__radialRawY,symbolEl.__radialRawX=targetLayout.rawX,symbolEl.__radialRawY=targetLayout.rawY,group.add(symbolEl),data.setItemGraphicEl(dataIndex,symbolEl),symbolEl.__oldX=symbolEl.x,symbolEl.__oldY=symbolEl.y,updateProps$1(symbolEl,{x:targetLayout.x,y:targetLayout.y},seriesModel);var symbolPath=symbolEl.getSymbolPath();if("radial"===seriesModel.get("layout")){var realRoot=virtualRoot.children[0],rootLayout=realRoot.getLayout(),length_1=realRoot.children.length,rad=void 0,isLeft=void 0;if(targetLayout.x===rootLayout.x&amp;&amp;!0===node.isExpand&amp;&amp;realRoot.children.length){var center2={x:(realRoot.children[0].getLayout().x+realRoot.children[length_1-1].getLayout().x)/2,y:(realRoot.children[0].getLayout().y+realRoot.children[length_1-1].getLayout().y)/2};(rad=Math.atan2(center2.y-rootLayout.y,center2.x-rootLayout.x))&lt;0&amp;&amp;(rad=2*Math.PI+rad),(isLeft=center2.x&lt;rootLayout.x)&amp;&amp;(rad-=Math.PI)}else(rad=Math.atan2(targetLayout.y-rootLayout.y,targetLayout.x-rootLayout.x))&lt;0&amp;&amp;(rad=2*Math.PI+rad),0===node.children.length||0!==node.children.length&amp;&amp;!1===node.isExpand?(isLeft=targetLayout.x&lt;rootLayout.x)&amp;&amp;(rad-=Math.PI):(isLeft=targetLayout.x&gt;rootLayout.x)||(rad-=Math.PI);var textPosition=isLeft?"left":"right",normalLabelModel=itemModel.getModel("label"),rotate2=normalLabelModel.get("rotate"),labelRotateRadian=rotate2*(Math.PI/180),textContent=symbolPath.getTextContent();textContent&amp;&amp;(symbolPath.setTextConfig({position:normalLabelModel.get("position")||textPosition,rotation:null==rotate2?-rad:labelRotateRadian,origin:"center"}),textContent.setStyle("verticalAlign","middle"))}var focus=itemModel.get(["emphasis","focus"]),focusDataIndices="relative"===focus?concatArray(node.getAncestorsIndices(),node.getDescendantIndices()):"ancestor"===focus?node.getAncestorsIndices():"descendant"===focus?node.getDescendantIndices():null;focusDataIndices&amp;&amp;(getECData(symbolEl).focus=focusDataIndices),function drawEdge(seriesModel,node,virtualRoot,symbolEl,sourceOldLayout,sourceLayout,targetLayout,group){var itemModel=node.getModel(),edgeShape=seriesModel.get("edgeShape"),layout2=seriesModel.get("layout"),orient=seriesModel.getOrient(),curvature=seriesModel.get(["lineStyle","curveness"]),edgeForkPosition=seriesModel.get("edgeForkPosition"),lineStyle=itemModel.getModel("lineStyle").getLineStyle(),edge=symbolEl.__edge;if("curve"===edgeShape)node.parentNode&amp;&amp;node.parentNode!==virtualRoot&amp;&amp;(edge||(edge=symbolEl.__edge=new BezierCurve({shape:getEdgeShape(layout2,orient,curvature,sourceOldLayout,sourceOldLayout)})),updateProps$1(edge,{shape:getEdgeShape(layout2,orient,curvature,sourceLayout,targetLayout)},seriesModel));else if("polyline"===edgeShape&amp;&amp;"orthogonal"===layout2&amp;&amp;node!==virtualRoot&amp;&amp;node.children&amp;&amp;0!==node.children.length&amp;&amp;!0===node.isExpand){for(var children=node.children,childPoints=[],i=0;i&lt;children.length;i++){var childLayout=children[i].getLayout();childPoints.push([childLayout.x,childLayout.y])}edge||(edge=symbolEl.__edge=new TreePath({shape:{parentPoint:[targetLayout.x,targetLayout.y],childPoints:[[targetLayout.x,targetLayout.y]],orient:orient,forkPosition:edgeForkPosition}})),updateProps$1(edge,{shape:{parentPoint:[targetLayout.x,targetLayout.y],childPoints:childPoints}},seriesModel)}edge&amp;&amp;("polyline"!==edgeShape||node.isExpand)&amp;&amp;(edge.useStyle(defaults({strokeNoScale:!0,fill:null},lineStyle)),setStatesStylesFromModel(edge,itemModel,"lineStyle"),setDefaultStateProxy(edge),group.add(edge))}(seriesModel,node,virtualRoot,symbolEl,sourceOldLayout,sourceLayout,targetLayout,group),symbolEl.__edge&amp;&amp;(symbolEl.onHoverStateChange=function(toState){if("blur"!==toState){var parentEl=node.parentNode&amp;&amp;data.getItemGraphicEl(node.parentNode.dataIndex);parentEl&amp;&amp;1===parentEl.hoverState||setStatesFlag(symbolEl.__edge,toState)}})}function removeNodeEdge(node,data,group,seriesModel,removeAnimationOpt){var _a2=getSourceNode(data.tree.root,node),source=_a2.source,sourceLayout=_a2.sourceLayout,symbolEl=data.getItemGraphicEl(node.dataIndex);if(symbolEl){var sourceEdge=data.getItemGraphicEl(source.dataIndex).__edge,edge=symbolEl.__edge||(!1===source.isExpand||1===source.children.length?sourceEdge:void 0),edgeShape=seriesModel.get("edgeShape"),layoutOpt=seriesModel.get("layout"),orient=seriesModel.get("orient"),curvature=seriesModel.get(["lineStyle","curveness"]);edge&amp;&amp;("curve"===edgeShape?removeElement(edge,{shape:getEdgeShape(layoutOpt,orient,curvature,sourceLayout,sourceLayout),style:{opacity:0}},seriesModel,{cb:function(){group.remove(edge)},removeOpt:removeAnimationOpt}):"polyline"===edgeShape&amp;&amp;"orthogonal"===seriesModel.get("layout")&amp;&amp;removeElement(edge,{shape:{parentPoint:[sourceLayout.x,sourceLayout.y],childPoints:[[sourceLayout.x,sourceLayout.y]]},style:{opacity:0}},seriesModel,{cb:function(){group.remove(edge)},removeOpt:removeAnimationOpt}))}}function getSourceNode(virtualRoot,node){for(var sourceLayout,source=node.parentNode===virtualRoot?node:node.parentNode||node;null==(sourceLayout=source.getLayout());)source=source.parentNode===virtualRoot?source:source.parentNode||source;return{source:source,sourceLayout:sourceLayout}}function removeNode(data,dataIndex,symbolEl,group,seriesModel){var node=data.tree.getNodeByDataIndex(dataIndex),sourceLayout=getSourceNode(data.tree.root,node).sourceLayout,removeAnimationOpt={duration:seriesModel.get("animationDurationUpdate"),easing:seriesModel.get("animationEasingUpdate")};removeElement(symbolEl,{x:sourceLayout.x+1,y:sourceLayout.y+1},seriesModel,{cb:function(){group.remove(symbolEl),data.setItemGraphicEl(dataIndex,null)},removeOpt:removeAnimationOpt}),symbolEl.fadeOut(null,data.hostModel,{fadeLabel:!0,animation:removeAnimationOpt}),node.children.forEach(function(childNode){removeNodeEdge(childNode,data,group,seriesModel,removeAnimationOpt)}),removeNodeEdge(node,data,group,seriesModel,removeAnimationOpt)}function getEdgeShape(layoutOpt,orient,curvature,sourceLayout,targetLayout){var cpx1,cpy1,cpx2,cpy2,x1,x2,y1,y2;if("radial"===layoutOpt){x1=sourceLayout.rawX,y1=sourceLayout.rawY,x2=targetLayout.rawX,y2=targetLayout.rawY;var radialCoor1=radialCoordinate(x1,y1),radialCoor2=radialCoordinate(x1,y1+(y2-y1)*curvature),radialCoor3=radialCoordinate(x2,y2+(y1-y2)*curvature),radialCoor4=radialCoordinate(x2,y2);return{x1:radialCoor1.x||0,y1:radialCoor1.y||0,x2:radialCoor4.x||0,y2:radialCoor4.y||0,cpx1:radialCoor2.x||0,cpy1:radialCoor2.y||0,cpx2:radialCoor3.x||0,cpy2:radialCoor3.y||0}}return x1=sourceLayout.x,y1=sourceLayout.y,x2=targetLayout.x,y2=targetLayout.y,"LR"!==orient&amp;&amp;"RL"!==orient||(cpx1=x1+(x2-x1)*curvature,cpy1=y1,cpx2=x2+(x1-x2)*curvature,cpy2=y2),"TB"!==orient&amp;&amp;"BT"!==orient||(cpx1=x1,cpy1=y1+(y2-y1)*curvature,cpx2=x2,cpy2=y2+(y1-y2)*curvature),{x1:x1,y1:y1,x2:x2,y2:y2,cpx1:cpx1,cpy1:cpy1,cpx2:cpx2,cpy2:cpy2}}var inner$e=makeInner();function linkSeriesData(opt){var mainData=opt.mainData,datas=opt.datas;datas||(datas={main:mainData},opt.datasAttr={main:"data"}),opt.datas=opt.mainData=null,linkAll(mainData,datas,opt),each$f(datas,function(data){each$f(mainData.TRANSFERABLE_METHODS,function(methodName){data.wrapMethod(methodName,curry$1(transferInjection,opt))})}),mainData.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,opt)),each$f(mainData.CHANGABLE_METHODS,function(methodName){mainData.wrapMethod(methodName,curry$1(changeInjection,opt))}),assert(datas[mainData.dataType]===mainData)}function transferInjection(opt,res){if(function isMainData(data){return inner$e(data).mainData===data}(this)){var datas=extend({},inner$e(this).datas);datas[this.dataType]=res,linkAll(res,datas,opt)}else linkSingle(res,this.dataType,inner$e(this).mainData,opt);return res}function changeInjection(opt,res){return opt.struct&amp;&amp;opt.struct.update(),res}function cloneShallowInjection(opt,res){return each$f(inner$e(res).datas,function(data,dataType){data!==res&amp;&amp;linkSingle(data.cloneShallow(),dataType,res,opt)}),res}function getLinkedData(dataType){var mainData=inner$e(this).mainData;return null==dataType||null==mainData?mainData:inner$e(mainData).datas[dataType]}function getLinkedDataAll(){var mainData=inner$e(this).mainData;return null==mainData?[{data:mainData}]:map$1(keys(inner$e(mainData).datas),function(type){return{type:type,data:inner$e(mainData).datas[type]}})}function linkAll(mainData,datas,opt){inner$e(mainData).datas={},each$f(datas,function(data,dataType){linkSingle(data,dataType,mainData,opt)})}function linkSingle(data,dataType,mainData,opt){inner$e(mainData).datas[dataType]=data,inner$e(data).mainData=mainData,data.dataType=dataType,opt.struct&amp;&amp;(data[opt.structAttr]=opt.struct,opt.struct[opt.datasAttr[dataType]]=data),data.getLinkedData=getLinkedData,data.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function TreeNode2(name,hostTree){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=name||"",this.hostTree=hostTree}return TreeNode2.prototype.isRemoved=function(){return this.dataIndex&lt;0},TreeNode2.prototype.eachNode=function(options,cb,context){isFunction(options)&amp;&amp;(context=cb,cb=options,options=null),isString(options=options||{})&amp;&amp;(options={order:options});var suppressVisitSub,order=options.order||"preorder",children=this[options.attr||"children"];"preorder"===order&amp;&amp;(suppressVisitSub=cb.call(context,this));for(var i=0;!suppressVisitSub&amp;&amp;i&lt;children.length;i++)children[i].eachNode(options,cb,context);"postorder"===order&amp;&amp;cb.call(context,this)},TreeNode2.prototype.updateDepthAndHeight=function(depth){var height=0;this.depth=depth;for(var i=0;i&lt;this.children.length;i++){var child=this.children[i];child.updateDepthAndHeight(depth+1),child.height&gt;height&amp;&amp;(height=child.height)}this.height=height+1},TreeNode2.prototype.getNodeById=function(id){if(this.getId()===id)return this;for(var i=0,children=this.children,len2=children.length;i&lt;len2;i++){var res=children[i].getNodeById(id);if(res)return res}},TreeNode2.prototype.contains=function(node){if(node===this)return!0;for(var i=0,children=this.children,len2=children.length;i&lt;len2;i++){var res=children[i].contains(node);if(res)return res}},TreeNode2.prototype.getAncestors=function(includeSelf){for(var ancestors=[],node=includeSelf?this:this.parentNode;node;)ancestors.push(node),node=node.parentNode;return ancestors.reverse(),ancestors},TreeNode2.prototype.getAncestorsIndices=function(){for(var indices=[],currNode=this;currNode;)indices.push(currNode.dataIndex),currNode=currNode.parentNode;return indices.reverse(),indices},TreeNode2.prototype.getDescendantIndices=function(){var indices=[];return this.eachNode(function(childNode){indices.push(childNode.dataIndex)}),indices},TreeNode2.prototype.getValue=function(dimension){var data=this.hostTree.data;return data.getStore().get(data.getDimensionIndex(dimension||"value"),this.dataIndex)},TreeNode2.prototype.setLayout=function(layout2,merge2){this.dataIndex&gt;=0&amp;&amp;this.hostTree.data.setItemLayout(this.dataIndex,layout2,merge2)},TreeNode2.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},TreeNode2.prototype.getModel=function(path){if(!(this.dataIndex&lt;0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(path)},TreeNode2.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},TreeNode2.prototype.setVisual=function(key,value){this.dataIndex&gt;=0&amp;&amp;this.hostTree.data.setItemVisual(this.dataIndex,key,value)},TreeNode2.prototype.getVisual=function(key){return this.hostTree.data.getItemVisual(this.dataIndex,key)},TreeNode2.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},TreeNode2.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},TreeNode2.prototype.getChildIndex=function(){if(this.parentNode){for(var children=this.parentNode.children,i=0;i&lt;children.length;++i)if(children[i]===this)return i;return-1}return-1},TreeNode2.prototype.isAncestorOf=function(node){for(var parent=node.parentNode;parent;){if(parent===this)return!0;parent=parent.parentNode}return!1},TreeNode2.prototype.isDescendantOf=function(node){return node!==this&amp;&amp;node.isAncestorOf(this)},TreeNode2}(),Tree=function(){function Tree2(hostModel){this.type="tree",this._nodes=[],this.hostModel=hostModel}return Tree2.prototype.eachNode=function(options,cb,context){this.root.eachNode(options,cb,context)},Tree2.prototype.getNodeByDataIndex=function(dataIndex){var rawIndex=this.data.getRawIndex(dataIndex);return this._nodes[rawIndex]},Tree2.prototype.getNodeById=function(name){return this.root.getNodeById(name)},Tree2.prototype.update=function(){for(var data=this.data,nodes=this._nodes,i=0,len2=nodes.length;i&lt;len2;i++)nodes[i].dataIndex=-1;for(i=0,len2=data.count();i&lt;len2;i++)nodes[data.getRawIndex(i)].dataIndex=i},Tree2.prototype.clearLayouts=function(){this.data.clearItemLayouts()},Tree2.createTree=function(dataRoot,hostModel,beforeLink){var tree=new Tree2(hostModel),listData=[],dimMax=1;!function buildHierarchy(dataNode,parentNode2){var value=dataNode.value;dimMax=Math.max(dimMax,isArray$1(value)?value.length:1),listData.push(dataNode);var node=new TreeNode(convertOptionIdName(dataNode.name,""),tree);parentNode2?function addChild(child,node){var children=node.children;if(child.parentNode===node)return;children.push(child),child.parentNode=node}(node,parentNode2):tree.root=node,tree._nodes.push(node);var children=dataNode.children;if(children)for(var i=0;i&lt;children.length;i++)buildHierarchy(children[i],node)}(dataRoot),tree.root.updateDepthAndHeight(0);var dimensions=prepareSeriesDataSchema(listData,{coordDimensions:["value"],dimensionsCount:dimMax}).dimensions,list=new SeriesData(dimensions,hostModel);return list.initData(listData),beforeLink&amp;&amp;beforeLink(list),linkSeriesData({mainData:list,struct:tree,structAttr:"tree"}),tree.update(),tree},Tree2}();function retrieveTargetInfo(payload,validPayloadTypes,seriesModel){if(payload&amp;&amp;indexOf(validPayloadTypes,payload.type)&gt;=0){var root=seriesModel.getData().tree.root,targetNode=payload.targetNode;if(isString(targetNode)&amp;&amp;(targetNode=root.getNodeById(targetNode)),targetNode&amp;&amp;root.contains(targetNode))return{node:targetNode};var targetNodeId=payload.targetNodeId;if(null!=targetNodeId&amp;&amp;(targetNode=root.getNodeById(targetNodeId)))return{node:targetNode}}}function getPathToRoot(node){for(var path=[];node;)(node=node.parentNode)&amp;&amp;path.push(node);return path.reverse()}function aboveViewRoot(viewRoot,node){return indexOf(getPathToRoot(viewRoot),node)&gt;=0}function wrapTreePathInfo(node,seriesModel){for(var treePathInfo=[];node;){var nodeDataIndex=node.dataIndex;treePathInfo.push({name:node.name,dataIndex:nodeDataIndex,value:seriesModel.getRawValue(nodeDataIndex)}),node=node.parentNode}return treePathInfo.reverse(),treePathInfo}var TreeSeriesModel=function(_super){function TreeSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.hasSymbolVisual=!0,_this.ignoreStyleOnData=!0,_this}return __extends$1(TreeSeriesModel2,_super),TreeSeriesModel2.prototype.getInitialData=function(option){var root={name:option.name,children:option.data},leaves=option.leaves||{},leavesModel=new Model(leaves,this,this.ecModel),tree=Tree.createTree(root,this,function beforeLink(nodeData){nodeData.wrapMethod("getItemModel",function(model,idx){var node=tree.getNodeByDataIndex(idx);return node&amp;&amp;node.children.length&amp;&amp;node.isExpand||(model.parentModel=leavesModel),model})});var treeDepth=0;tree.eachNode("preorder",function(node){node.depth&gt;treeDepth&amp;&amp;(treeDepth=node.depth)});var expandTreeDepth=option.expandAndCollapse&amp;&amp;option.initialTreeDepth&gt;=0?option.initialTreeDepth:treeDepth;return tree.root.eachNode("preorder",function(node){var item=node.hostTree.data.getRawDataItem(node.dataIndex);node.isExpand=item&amp;&amp;null!=item.collapsed?!item.collapsed:node.depth&lt;=expandTreeDepth}),tree.data},TreeSeriesModel2.prototype.getOrient=function(){var orient=this.get("orient");return"horizontal"===orient?orient="LR":"vertical"===orient&amp;&amp;(orient="TB"),orient},TreeSeriesModel2.prototype.setZoom=function(zoom){this.option.zoom=zoom},TreeSeriesModel2.prototype.setCenter=function(center2){this.option.center=center2},TreeSeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){for(var tree=this.getData().tree,realRoot=tree.root.children[0],node=tree.getNodeByDataIndex(dataIndex),value=node.getValue(),name=node.name;node&amp;&amp;node!==realRoot;)name=node.parentNode.name+"."+name,node=node.parentNode;return createTooltipMarkup("nameValue",{name:name,value:value,noValue:isNaN(value)||null==value})},TreeSeriesModel2.prototype.getDataParams=function(dataIndex){var params=_super.prototype.getDataParams.apply(this,arguments),node=this.getData().tree.getNodeByDataIndex(dataIndex);return params.treeAncestors=wrapTreePathInfo(node,this),params.collapsed=!node.isExpand,params},TreeSeriesModel2.type="series.tree",TreeSeriesModel2.layoutMode="box",TreeSeriesModel2.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},TreeSeriesModel2}(SeriesModel);function eachBefore(root,callback){for(var node,nodes=[root];node=nodes.pop();)if(callback(node),node.isExpand){var children=node.children;if(children.length)for(var i=children.length-1;i&gt;=0;i--)nodes.push(children[i])}}function treeLayout(ecModel,api){ecModel.eachSeriesByType("tree",function(seriesModel){!function commonLayout(seriesModel,api){var layoutInfo=function getViewRect$4(seriesModel,api){return getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var layout2=seriesModel.get("layout"),width=0,height=0,separation$1=null;"radial"===layout2?(width=2*Math.PI,height=Math.min(layoutInfo.height,layoutInfo.width)/2,separation$1=separation(function(node1,node2){return(node1.parentNode===node2.parentNode?1:2)/node1.depth})):(width=layoutInfo.width,height=layoutInfo.height,separation$1=separation());var virtualRoot=seriesModel.getData().tree.root,realRoot=virtualRoot.children[0];if(realRoot){!function init(inRoot){var root=inRoot;root.hierNode={defaultAncestor:null,ancestor:root,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var node,children,nodes=[root];node=nodes.pop();)if(children=node.children,node.isExpand&amp;&amp;children.length)for(var i=children.length-1;i&gt;=0;i--){var child=children[i];child.hierNode={defaultAncestor:null,ancestor:child,prelim:0,modifier:0,change:0,shift:0,i:i,thread:null},nodes.push(child)}}(virtualRoot),function eachAfter(root,callback,separation2){for(var node,nodes=[root],next=[];node=nodes.pop();)if(next.push(node),node.isExpand){var children=node.children;if(children.length)for(var i=0;i&lt;children.length;i++)nodes.push(children[i])}for(;node=next.pop();)callback(node,separation2)}(realRoot,firstWalk,separation$1),virtualRoot.hierNode.modifier=-realRoot.hierNode.prelim,eachBefore(realRoot,secondWalk);var left_1=realRoot,right_1=realRoot,bottom_1=realRoot;eachBefore(realRoot,function(node){var x=node.getLayout().x;x&lt;left_1.getLayout().x&amp;&amp;(left_1=node),x&gt;right_1.getLayout().x&amp;&amp;(right_1=node),node.depth&gt;bottom_1.depth&amp;&amp;(bottom_1=node)});var delta=left_1===right_1?1:separation$1(left_1,right_1)/2,tx_1=delta-left_1.getLayout().x,kx_1=0,ky_1=0,coorX_1=0,coorY_1=0;if("radial"===layout2)kx_1=width/(right_1.getLayout().x+delta+tx_1),ky_1=height/(bottom_1.depth-1||1),eachBefore(realRoot,function(node){coorX_1=(node.getLayout().x+tx_1)*kx_1,coorY_1=(node.depth-1)*ky_1;var finalCoor=radialCoordinate(coorX_1,coorY_1);node.setLayout({x:finalCoor.x,y:finalCoor.y,rawX:coorX_1,rawY:coorY_1},!0)});else{var orient_1=seriesModel.getOrient();"RL"===orient_1||"LR"===orient_1?(ky_1=height/(right_1.getLayout().x+delta+tx_1),kx_1=width/(bottom_1.depth-1||1),eachBefore(realRoot,function(node){coorY_1=(node.getLayout().x+tx_1)*ky_1,coorX_1="LR"===orient_1?(node.depth-1)*kx_1:width-(node.depth-1)*kx_1,node.setLayout({x:coorX_1,y:coorY_1},!0)})):"TB"!==orient_1&amp;&amp;"BT"!==orient_1||(kx_1=width/(right_1.getLayout().x+delta+tx_1),ky_1=height/(bottom_1.depth-1||1),eachBefore(realRoot,function(node){coorX_1=(node.getLayout().x+tx_1)*kx_1,coorY_1="TB"===orient_1?(node.depth-1)*ky_1:height-(node.depth-1)*ky_1,node.setLayout({x:coorX_1,y:coorY_1},!0)}))}}}(seriesModel,api)})}function treeVisual(ecModel){ecModel.eachSeriesByType("tree",function(seriesModel){var data=seriesModel.getData();data.tree.eachNode(function(node){var style=node.getModel().getModel("itemStyle").getItemStyle();extend(data.ensureUniqueItemVisual(node.dataIndex,"style"),style)})})}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function enableAriaDecalForTree(seriesModel){var tree=seriesModel.getData().tree,decalPaletteScope2={};tree.eachNode(function(node){for(var current=node;current&amp;&amp;current.depth&gt;1;)current=current.parentNode;var decal=getDecalFromPalette(seriesModel.ecModel,current.name||current.dataIndex+"",decalPaletteScope2);node.setVisual("decal",decal)})}var TreemapSeriesModel=function(_super){function TreemapSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TreemapSeriesModel2.type,_this.preventUsingHoverLayer=!0,_this}return __extends$1(TreemapSeriesModel2,_super),TreemapSeriesModel2.prototype.getInitialData=function(option,ecModel){var root={name:option.name,children:option.data};completeTreeValue$1(root);var levels=option.levels||[],designatedVisualItemStyle=this.designatedVisualItemStyle={},designatedVisualModel=new Model({itemStyle:designatedVisualItemStyle},this,ecModel);levels=option.levels=function setDefault(levels,ecModel){var hasColorDefine,hasDecalDefine,globalColorList=normalizeToArray(ecModel.get("color")),globalDecalList=normalizeToArray(ecModel.get(["aria","decal","decals"]));if(!globalColorList)return;levels=levels||[],each$f(levels,function(levelDefine){var model=new Model(levelDefine),modelColor=model.get("color"),modelDecal=model.get("decal");(model.get(["itemStyle","color"])||modelColor&amp;&amp;"none"!==modelColor)&amp;&amp;(hasColorDefine=!0),(model.get(["itemStyle","decal"])||modelDecal&amp;&amp;"none"!==modelDecal)&amp;&amp;(hasDecalDefine=!0)});var level0=levels[0]||(levels[0]={});hasColorDefine||(level0.color=globalColorList.slice());!hasDecalDefine&amp;&amp;globalDecalList&amp;&amp;(level0.decal=globalDecalList.slice());return levels}(levels,ecModel);var levelModels=map$1(levels||[],function(levelDefine){return new Model(levelDefine,designatedVisualModel,ecModel)},this),tree=Tree.createTree(root,this,function beforeLink(nodeData){nodeData.wrapMethod("getItemModel",function(model,idx){var node=tree.getNodeByDataIndex(idx),levelModel=node?levelModels[node.depth]:null;return model.parentModel=levelModel||designatedVisualModel,model})});return tree.data},TreemapSeriesModel2.prototype.optionUpdated=function(){this.resetViewRoot()},TreemapSeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var data=this.getData(),value=this.getRawValue(dataIndex);return createTooltipMarkup("nameValue",{name:data.getName(dataIndex),value:value})},TreemapSeriesModel2.prototype.getDataParams=function(dataIndex){var params=_super.prototype.getDataParams.apply(this,arguments),node=this.getData().tree.getNodeByDataIndex(dataIndex);return params.treeAncestors=wrapTreePathInfo(node,this),params.treePathInfo=params.treeAncestors,params},TreemapSeriesModel2.prototype.setLayoutInfo=function(layoutInfo){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,layoutInfo)},TreemapSeriesModel2.prototype.mapIdToIndex=function(id){var idIndexMap=this._idIndexMap;idIndexMap||(idIndexMap=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var index=idIndexMap.get(id);return null==index&amp;&amp;idIndexMap.set(id,index=this._idIndexMapCount++),index},TreemapSeriesModel2.prototype.getViewRoot=function(){return this._viewRoot},TreemapSeriesModel2.prototype.resetViewRoot=function(viewRoot){viewRoot?this._viewRoot=viewRoot:viewRoot=this._viewRoot;var root=this.getRawData().tree.root;viewRoot&amp;&amp;(viewRoot===root||root.contains(viewRoot))||(this._viewRoot=root)},TreemapSeriesModel2.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},TreemapSeriesModel2.type="series.treemap",TreemapSeriesModel2.layoutMode="box",TreemapSeriesModel2.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},TreemapSeriesModel2}(SeriesModel);function completeTreeValue$1(dataNode){var sum2=0;each$f(dataNode.children,function(child){completeTreeValue$1(child);var childValue=child.value;isArray$1(childValue)&amp;&amp;(childValue=childValue[0]),sum2+=childValue});var thisValue=dataNode.value;isArray$1(thisValue)&amp;&amp;(thisValue=thisValue[0]),(null==thisValue||isNaN(thisValue))&amp;&amp;(thisValue=sum2),thisValue&lt;0&amp;&amp;(thisValue=0),isArray$1(dataNode.value)?dataNode.value[0]=thisValue:dataNode.value=thisValue}var Breadcrumb=function(){function Breadcrumb2(containerGroup){this.group=new Group$3,containerGroup.add(this.group)}return Breadcrumb2.prototype.render=function(seriesModel,api,targetNode,onSelect){var model=seriesModel.getModel("breadcrumb"),thisGroup=this.group;if(thisGroup.removeAll(),model.get("show")&amp;&amp;targetNode){var normalStyleModel=model.getModel("itemStyle"),emphasisModel=model.getModel("emphasis"),textStyleModel=normalStyleModel.getModel("textStyle"),emphasisTextStyleModel=emphasisModel.getModel(["itemStyle","textStyle"]),layoutParam={pos:{left:model.get("left"),right:model.get("right"),top:model.get("top"),bottom:model.get("bottom")},box:{width:api.getWidth(),height:api.getHeight()},emptyItemWidth:model.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(targetNode,layoutParam,textStyleModel),this._renderContent(seriesModel,layoutParam,normalStyleModel,emphasisModel,textStyleModel,emphasisTextStyleModel,onSelect),positionElement(thisGroup,layoutParam.pos,layoutParam.box)}},Breadcrumb2.prototype._prepare=function(targetNode,layoutParam,textStyleModel){for(var node=targetNode;node;node=node.parentNode){var text=convertOptionIdName(node.getModel().get("name"),""),textRect=textStyleModel.getTextRect(text),itemWidth=Math.max(textRect.width+16,layoutParam.emptyItemWidth);layoutParam.totalWidth+=itemWidth+8,layoutParam.renderList.push({node:node,text:text,width:itemWidth})}},Breadcrumb2.prototype._renderContent=function(seriesModel,layoutParam,normalStyleModel,emphasisModel,textStyleModel,emphasisTextStyleModel,onSelect){for(var lastX=0,emptyItemWidth=layoutParam.emptyItemWidth,height=seriesModel.get(["breadcrumb","height"]),availableSize=function getAvailableSize(positionInfo,containerRect,margin){var containerWidth=containerRect.width,containerHeight=containerRect.height,x=parsePercent(positionInfo.left,containerWidth),y=parsePercent(positionInfo.top,containerHeight),x2=parsePercent(positionInfo.right,containerWidth),y2=parsePercent(positionInfo.bottom,containerHeight);return(isNaN(x)||isNaN(parseFloat(positionInfo.left)))&amp;&amp;(x=0),(isNaN(x2)||isNaN(parseFloat(positionInfo.right)))&amp;&amp;(x2=containerWidth),(isNaN(y)||isNaN(parseFloat(positionInfo.top)))&amp;&amp;(y=0),(isNaN(y2)||isNaN(parseFloat(positionInfo.bottom)))&amp;&amp;(y2=containerHeight),margin=normalizeCssArray(margin||0),{width:Math.max(x2-x-margin[1]-margin[3],0),height:Math.max(y2-y-margin[0]-margin[2],0)}}(layoutParam.pos,layoutParam.box),totalWidth=layoutParam.totalWidth,renderList=layoutParam.renderList,emphasisItemStyle=emphasisModel.getModel("itemStyle").getItemStyle(),i=renderList.length-1;i&gt;=0;i--){var item=renderList[i],itemNode=item.node,itemWidth=item.width,text=item.text;totalWidth&gt;availableSize.width&amp;&amp;(totalWidth-=itemWidth-emptyItemWidth,itemWidth=emptyItemWidth,text=null);var el=new Polygon({shape:{points:makeItemPoints(lastX,0,itemWidth,height,i===renderList.length-1,0===i)},style:defaults(normalStyleModel.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(textStyleModel,{text:text})}),textConfig:{position:"inside"},z2:1e5,onclick:curry$1(onSelect,itemNode)});el.disableLabelAnimation=!0,el.getTextContent().ensureState("emphasis").style=createTextStyle$1(emphasisTextStyleModel,{text:text}),el.ensureState("emphasis").style=emphasisItemStyle,toggleHoverEmphasis(el,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled")),this.group.add(el),packEventData(el,seriesModel,itemNode),lastX+=itemWidth+8}},Breadcrumb2.prototype.remove=function(){this.group.removeAll()},Breadcrumb2}();function makeItemPoints(x,y,itemWidth,itemHeight,head,tail){var points2=[[head?x:x-5,y],[x+itemWidth,y],[x+itemWidth,y+itemHeight],[head?x:x-5,y+itemHeight]];return!tail&amp;&amp;points2.splice(2,0,[x+itemWidth+5,y+itemHeight/2]),!head&amp;&amp;points2.push([x,y+itemHeight/2]),points2}function packEventData(el,seriesModel,itemNode){getECData(el).eventData={componentType:"series",componentSubType:"treemap",componentIndex:seriesModel.componentIndex,seriesIndex:seriesModel.seriesIndex,seriesName:seriesModel.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:itemNode&amp;&amp;itemNode.dataIndex,name:itemNode&amp;&amp;itemNode.name},treePathInfo:itemNode&amp;&amp;wrapTreePathInfo(itemNode,seriesModel)}}var AnimationWrap=function(){function AnimationWrap2(){this._storage=[],this._elExistsMap={}}return AnimationWrap2.prototype.add=function(el,target,duration,delay,easing){return!this._elExistsMap[el.id]&amp;&amp;(this._elExistsMap[el.id]=!0,this._storage.push({el:el,target:target,duration:duration,delay:delay,easing:easing}),!0)},AnimationWrap2.prototype.finished=function(callback){return this._finishedCallback=callback,this},AnimationWrap2.prototype.start=function(){for(var _this=this,count2=this._storage.length,checkTerminate=function(){--count2&lt;=0&amp;&amp;(_this._storage.length=0,_this._elExistsMap={},_this._finishedCallback&amp;&amp;_this._finishedCallback())},i=0,len2=this._storage.length;i&lt;len2;i++){var item=this._storage[i];item.el.animateTo(item.target,{duration:item.duration,delay:item.delay,easing:item.easing,setToFinal:!0,done:checkTerminate,aborted:checkTerminate})}return this},AnimationWrap2}();var Group$2=Group$3,Rect$1=Rect$2,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(model){var itemStyle=getStateItemStyle(model);return itemStyle.stroke=itemStyle.fill=itemStyle.lineWidth=null,itemStyle},inner$d=makeInner(),TreemapView=function(_super){function TreemapView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TreemapView2.type,_this._state="ready",_this._storage={nodeGroup:[],background:[],content:[]},_this}return __extends$1(TreemapView2,_super),TreemapView2.prototype.render=function(seriesModel,ecModel,api,payload){if(!(indexOf(ecModel.findComponents({mainType:"series",subType:"treemap",query:payload}),seriesModel)&lt;0)){this.seriesModel=seriesModel,this.api=api,this.ecModel=ecModel;var targetInfo=retrieveTargetInfo(payload,["treemapZoomToNode","treemapRootToNode"],seriesModel),payloadType=payload&amp;&amp;payload.type,layoutInfo=seriesModel.layoutInfo,isInit=!this._oldTree,thisStorage=this._storage,reRoot="treemapRootToNode"===payloadType&amp;&amp;targetInfo&amp;&amp;thisStorage?{rootNodeGroup:thisStorage.nodeGroup[targetInfo.node.getRawIndex()],direction:payload.direction}:null,containerGroup=this._giveContainerGroup(layoutInfo),hasAnimation=seriesModel.get("animation"),renderResult=this._doRender(containerGroup,seriesModel,reRoot);!hasAnimation||isInit||payloadType&amp;&amp;"treemapZoomToNode"!==payloadType&amp;&amp;"treemapRootToNode"!==payloadType?renderResult.renderFinally():this._doAnimation(containerGroup,renderResult,seriesModel,reRoot),this._resetController(api),this._renderBreadcrumb(seriesModel,api,targetInfo)}},TreemapView2.prototype._giveContainerGroup=function(layoutInfo){var containerGroup=this._containerGroup;return containerGroup||(containerGroup=this._containerGroup=new Group$2,this._initEvents(containerGroup),this.group.add(containerGroup)),containerGroup.x=layoutInfo.x,containerGroup.y=layoutInfo.y,containerGroup},TreemapView2.prototype._doRender=function(containerGroup,seriesModel,reRoot){var thisTree=seriesModel.getData().tree,oldTree=this._oldTree,lastsForAnimation={nodeGroup:[],background:[],content:[]},thisStorage={nodeGroup:[],background:[],content:[]},oldStorage=this._storage,willInvisibleEls=[];function doRenderNode(thisNode,oldNode,parentGroup,depth){return function renderNode(seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls,thisNode,oldNode,parentGroup,depth){if(!thisNode)return;var thisLayout=thisNode.getLayout(),data=seriesModel.getData(),nodeModel=thisNode.getModel();if(data.setItemGraphicEl(thisNode.dataIndex,null),!thisLayout||!thisLayout.isInView)return;var thisWidth=thisLayout.width,thisHeight=thisLayout.height,borderWidth=thisLayout.borderWidth,thisInvisible=thisLayout.invisible,thisRawIndex=thisNode.getRawIndex(),oldRawIndex=oldNode&amp;&amp;oldNode.getRawIndex(),thisViewChildren=thisNode.viewChildren,upperHeight=thisLayout.upperHeight,isParent=thisViewChildren&amp;&amp;thisViewChildren.length,itemStyleNormalModel=nodeModel.getModel("itemStyle"),itemStyleEmphasisModel=nodeModel.getModel(["emphasis","itemStyle"]),itemStyleBlurModel=nodeModel.getModel(["blur","itemStyle"]),itemStyleSelectModel=nodeModel.getModel(["select","itemStyle"]),borderRadius=itemStyleNormalModel.get("borderRadius")||0,group=giveGraphic("nodeGroup",Group$2);if(!group)return;if(parentGroup.add(group),group.x=thisLayout.x||0,group.y=thisLayout.y||0,group.markRedraw(),inner$d(group).nodeWidth=thisWidth,inner$d(group).nodeHeight=thisHeight,thisLayout.isAboveViewRoot)return group;var bg=giveGraphic("background",Rect$1,depth,20);bg&amp;&amp;renderBackground(group,bg,isParent&amp;&amp;thisLayout.upperLabelHeight);var emphasisModel=nodeModel.getModel("emphasis"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),isDisabled=emphasisModel.get("disabled"),focusOrIndices="ancestor"===focus?thisNode.getAncestorsIndices():"descendant"===focus?thisNode.getDescendantIndices():focus;if(isParent)isHighDownDispatcher(group)&amp;&amp;setAsHighDownDispatcher(group,!1),bg&amp;&amp;(setAsHighDownDispatcher(bg,!isDisabled),data.setItemGraphicEl(thisNode.dataIndex,bg),enableHoverFocus(bg,focusOrIndices,blurScope));else{var content=giveGraphic("content",Rect$1,depth,30);content&amp;&amp;renderContent(group,content),bg.disableMorphing=!0,bg&amp;&amp;isHighDownDispatcher(bg)&amp;&amp;setAsHighDownDispatcher(bg,!1),setAsHighDownDispatcher(group,!isDisabled),data.setItemGraphicEl(thisNode.dataIndex,group);var cursorStyle=nodeModel.getShallow("cursor");cursorStyle&amp;&amp;content.attr("cursor",cursorStyle),enableHoverFocus(group,focusOrIndices,blurScope)}return group;function renderBackground(group2,bg2,useUpperLabel){var ecData=getECData(bg2);if(ecData.dataIndex=thisNode.dataIndex,ecData.seriesIndex=seriesModel.seriesIndex,bg2.setShape({x:0,y:0,width:thisWidth,height:thisHeight,r:borderRadius}),thisInvisible)processInvisible(bg2);else{bg2.invisible=!1;var style=thisNode.getVisual("style"),visualBorderColor=style.stroke,normalStyle=getItemStyleNormal(itemStyleNormalModel);normalStyle.fill=visualBorderColor;var emphasisStyle=getStateItemStyle(itemStyleEmphasisModel);emphasisStyle.fill=itemStyleEmphasisModel.get("borderColor");var blurStyle=getStateItemStyle(itemStyleBlurModel);blurStyle.fill=itemStyleBlurModel.get("borderColor");var selectStyle=getStateItemStyle(itemStyleSelectModel);if(selectStyle.fill=itemStyleSelectModel.get("borderColor"),useUpperLabel){var upperLabelWidth=thisWidth-2*borderWidth;prepareText(bg2,visualBorderColor,style.opacity,{x:borderWidth,y:0,width:upperLabelWidth,height:upperHeight})}else bg2.removeTextContent();bg2.setStyle(normalStyle),bg2.ensureState("emphasis").style=emphasisStyle,bg2.ensureState("blur").style=blurStyle,bg2.ensureState("select").style=selectStyle,setDefaultStateProxy(bg2)}group2.add(bg2)}function renderContent(group2,content2){var ecData=getECData(content2);ecData.dataIndex=thisNode.dataIndex,ecData.seriesIndex=seriesModel.seriesIndex;var contentWidth=Math.max(thisWidth-2*borderWidth,0),contentHeight=Math.max(thisHeight-2*borderWidth,0);if(content2.culling=!0,content2.setShape({x:borderWidth,y:borderWidth,width:contentWidth,height:contentHeight,r:borderRadius}),thisInvisible)processInvisible(content2);else{content2.invisible=!1;var nodeStyle=thisNode.getVisual("style"),visualColor=nodeStyle.fill,normalStyle=getItemStyleNormal(itemStyleNormalModel);normalStyle.fill=visualColor,normalStyle.decal=nodeStyle.decal;var emphasisStyle=getStateItemStyle(itemStyleEmphasisModel),blurStyle=getStateItemStyle(itemStyleBlurModel),selectStyle=getStateItemStyle(itemStyleSelectModel);prepareText(content2,visualColor,nodeStyle.opacity,null),content2.setStyle(normalStyle),content2.ensureState("emphasis").style=emphasisStyle,content2.ensureState("blur").style=blurStyle,content2.ensureState("select").style=selectStyle,setDefaultStateProxy(content2)}group2.add(content2)}function processInvisible(element){!element.invisible&amp;&amp;willInvisibleEls.push(element)}function prepareText(rectEl,visualColor,visualOpacity,upperLabelRect){var normalLabelModel=nodeModel.getModel(upperLabelRect?"upperLabel":"label"),defaultText=convertOptionIdName(nodeModel.get("name"),null),isShow=normalLabelModel.getShallow("show");setLabelStyle(rectEl,getLabelStatesModels(nodeModel,upperLabelRect?"upperLabel":"label"),{defaultText:isShow?defaultText:null,inheritColor:visualColor,defaultOpacity:visualOpacity,labelFetcher:seriesModel,labelDataIndex:thisNode.dataIndex});var textEl=rectEl.getTextContent();if(textEl){var textStyle=textEl.style,textPadding=normalizeCssArray$1(textStyle.padding||0);upperLabelRect&amp;&amp;(rectEl.setTextConfig({layoutRect:upperLabelRect}),textEl.disableLabelLayout=!0),textEl.beforeUpdate=function(){var width=Math.max((upperLabelRect?upperLabelRect.width:rectEl.shape.width)-textPadding[1]-textPadding[3],0),height=Math.max((upperLabelRect?upperLabelRect.height:rectEl.shape.height)-textPadding[0]-textPadding[2],0);textStyle.width===width&amp;&amp;textStyle.height===height||textEl.setStyle({width:width,height:height})},textStyle.truncateMinChar=2,textStyle.lineOverflow="truncate",addDrillDownIcon(textStyle,upperLabelRect,thisLayout);var textEmphasisState=textEl.getState("emphasis");addDrillDownIcon(textEmphasisState?textEmphasisState.style:null,upperLabelRect,thisLayout)}}function addDrillDownIcon(style,upperLabelRect,thisLayout2){var text=style?style.text:null;if(!upperLabelRect&amp;&amp;thisLayout2.isLeafRoot&amp;&amp;null!=text){var iconChar=seriesModel.get("drillDownIcon",!0);style.text=iconChar?iconChar+" "+text:text}}function giveGraphic(storageName,Ctor,depth2,z){var element=null!=oldRawIndex&amp;&amp;oldStorage[storageName][oldRawIndex],lasts=lastsForAnimation[storageName];return element?(oldStorage[storageName][oldRawIndex]=null,prepareAnimationWhenHasOld(lasts,element)):thisInvisible||((element=new Ctor)instanceof Displayable&amp;&amp;(element.z2=function calculateZ2(depth,z2InLevel){return 100*depth+z2InLevel}(depth2,z)),prepareAnimationWhenNoOld(lasts,element)),thisStorage[storageName][thisRawIndex]=element}function prepareAnimationWhenHasOld(lasts,element){var lastCfg=lasts[thisRawIndex]={};element instanceof Group$2?(lastCfg.oldX=element.x,lastCfg.oldY=element.y):lastCfg.oldShape=extend({},element.shape)}function prepareAnimationWhenNoOld(lasts,element){var lastCfg=lasts[thisRawIndex]={},parentNode2=thisNode.parentNode,isGroup=element instanceof Group$3;if(parentNode2&amp;&amp;(!reRoot||"drillDown"===reRoot.direction)){var parentOldX=0,parentOldY=0,parentOldBg=lastsForAnimation.background[parentNode2.getRawIndex()];!reRoot&amp;&amp;parentOldBg&amp;&amp;parentOldBg.oldShape&amp;&amp;(parentOldX=parentOldBg.oldShape.width,parentOldY=parentOldBg.oldShape.height),isGroup?(lastCfg.oldX=0,lastCfg.oldY=parentOldY):lastCfg.oldShape={x:parentOldX,y:parentOldY,width:0,height:0}}lastCfg.fadein=!isGroup}}(seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls,thisNode,oldNode,parentGroup,depth)}!function dualTravel(thisViewChildren,oldViewChildren,parentGroup,sameTree,depth){sameTree?(oldViewChildren=thisViewChildren,each$f(thisViewChildren,function(child,index){!child.isRemoved()&amp;&amp;processNode(index,index)})):new DataDiffer(oldViewChildren,thisViewChildren,getKey2,getKey2).add(processNode).update(processNode).remove(curry$1(processNode,null)).execute();function getKey2(node){return node.getId()}function processNode(newIndex,oldIndex){var thisNode=null!=newIndex?thisViewChildren[newIndex]:null,oldNode=null!=oldIndex?oldViewChildren[oldIndex]:null,group=doRenderNode(thisNode,oldNode,parentGroup,depth);group&amp;&amp;dualTravel(thisNode&amp;&amp;thisNode.viewChildren||[],oldNode&amp;&amp;oldNode.viewChildren||[],group,sameTree,depth+1)}}(thisTree.root?[thisTree.root]:[],oldTree&amp;&amp;oldTree.root?[oldTree.root]:[],containerGroup,thisTree===oldTree||!oldTree,0);var willDeleteEls=function clearStorage(storage2){var willDeleteEls2={nodeGroup:[],background:[],content:[]};return storage2&amp;&amp;each$f(storage2,function(store,storageName){var delEls=willDeleteEls2[storageName];each$f(store,function(el){el&amp;&amp;(delEls.push(el),inner$d(el).willDelete=!0)})}),willDeleteEls2}(oldStorage);if(this._oldTree=thisTree,this._storage=thisStorage,this._controllerHost){var _oldRootLayout=this.seriesModel.layoutInfo,rootLayout=thisTree.root.getLayout();rootLayout.width===_oldRootLayout.width&amp;&amp;rootLayout.height===_oldRootLayout.height&amp;&amp;(this._controllerHost.zoom=1)}return{lastsForAnimation:lastsForAnimation,willDeleteEls:willDeleteEls,renderFinally:function renderFinally(){each$f(willDeleteEls,function(els){each$f(els,function(el){el.parent&amp;&amp;el.parent.remove(el)})}),each$f(willInvisibleEls,function(el){el.invisible=!0,el.dirty()})}}},TreemapView2.prototype._doAnimation=function(containerGroup,renderResult,seriesModel,reRoot){var durationOption=seriesModel.get("animationDurationUpdate"),easingOption=seriesModel.get("animationEasing"),duration=(isFunction(durationOption)?0:durationOption)||0,easing=(isFunction(easingOption)?null:easingOption)||"cubicOut",animationWrap=function createWrap(){return new AnimationWrap}();each$f(renderResult.willDeleteEls,function(store,storageName){each$f(store,function(el,rawIndex){if(!el.invisible){var target,parent=el.parent,innerStore=inner$d(parent);if(reRoot&amp;&amp;"drillDown"===reRoot.direction)target=parent===reRoot.rootNodeGroup?{shape:{x:0,y:0,width:innerStore.nodeWidth,height:innerStore.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var targetX=0,targetY=0;innerStore.willDelete||(targetX=innerStore.nodeWidth/2,targetY=innerStore.nodeHeight/2),target="nodeGroup"===storageName?{x:targetX,y:targetY,style:{opacity:0}}:{shape:{x:targetX,y:targetY,width:0,height:0},style:{opacity:0}}}target&amp;&amp;animationWrap.add(el,target,duration,0,easing)}})}),each$f(this._storage,function(store,storageName){each$f(store,function(el,rawIndex){var last=renderResult.lastsForAnimation[storageName][rawIndex],target={};last&amp;&amp;(el instanceof Group$3?null!=last.oldX&amp;&amp;(target.x=el.x,target.y=el.y,el.x=last.oldX,el.y=last.oldY):(last.oldShape&amp;&amp;(target.shape=extend({},el.shape),el.setShape(last.oldShape)),last.fadein?(el.setStyle("opacity",0),target.style={opacity:1}):1!==el.style.opacity&amp;&amp;(target.style={opacity:1})),animationWrap.add(el,target,duration,0,easing))})},this),this._state="animating",animationWrap.finished(bind$1(function(){this._state="ready",renderResult.renderFinally()},this)).start()},TreemapView2.prototype._resetController=function(api){var controller=this._controller,controllerHost=this._controllerHost;controllerHost||(this._controllerHost={target:this.group},controllerHost=this._controllerHost),controller||((controller=this._controller=new RoamController(api.getZr())).enable(this.seriesModel.get("roam")),controllerHost.zoomLimit=this.seriesModel.get("scaleLimit"),controllerHost.zoom=this.seriesModel.get("zoom"),controller.on("pan",bind$1(this._onPan,this)),controller.on("zoom",bind$1(this._onZoom,this)));var rect=new BoundingRect(0,0,api.getWidth(),api.getHeight());controller.setPointerChecker(function(e2,x,y){return rect.contain(x,y)})},TreemapView2.prototype._clearController=function(){var controller=this._controller;this._controllerHost=null,controller&amp;&amp;(controller.dispose(),controller=null)},TreemapView2.prototype._onPan=function(e2){if("animating"!==this._state&amp;&amp;(Math.abs(e2.dx)&gt;3||Math.abs(e2.dy)&gt;3)){var root=this.seriesModel.getData().tree.root;if(!root)return;var rootLayout=root.getLayout();if(!rootLayout)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rootLayout.x+e2.dx,y:rootLayout.y+e2.dy,width:rootLayout.width,height:rootLayout.height}})}},TreemapView2.prototype._onZoom=function(e2){var mouseX=e2.originX,mouseY=e2.originY,zoomDelta=e2.scale;if("animating"!==this._state){var root=this.seriesModel.getData().tree.root;if(!root)return;var rootLayout=root.getLayout();if(!rootLayout)return;var zoomLimit,rect=new BoundingRect(rootLayout.x,rootLayout.y,rootLayout.width,rootLayout.height),_controllerHost=this._controllerHost;zoomLimit=_controllerHost.zoomLimit;var newZoom=_controllerHost.zoom=_controllerHost.zoom||1;if(newZoom*=zoomDelta,zoomLimit){var zoomMin=zoomLimit.min||0,zoomMax=zoomLimit.max||1/0;newZoom=Math.max(Math.min(zoomMax,newZoom),zoomMin)}var zoomScale=newZoom/_controllerHost.zoom;_controllerHost.zoom=newZoom;var layoutInfo=this.seriesModel.layoutInfo,m2=[1,0,0,1,0,0];translate(m2,m2,[-(mouseX-=layoutInfo.x),-(mouseY-=layoutInfo.y)]),scale$1(m2,m2,[zoomScale,zoomScale]),translate(m2,m2,[mouseX,mouseY]),rect.applyTransform(m2),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}})}},TreemapView2.prototype._initEvents=function(containerGroup){var _this=this;containerGroup.on("click",function(e2){if("ready"===_this._state){var nodeClick=_this.seriesModel.get("nodeClick",!0);if(nodeClick){var targetInfo=_this.findTarget(e2.offsetX,e2.offsetY);if(targetInfo){var node=targetInfo.node;if(node.getLayout().isLeafRoot)_this._rootToNode(targetInfo);else if("zoomToNode"===nodeClick)_this._zoomToNode(targetInfo);else if("link"===nodeClick){var itemModel=node.hostTree.data.getItemModel(node.dataIndex),link=itemModel.get("link",!0),linkTarget=itemModel.get("target",!0)||"blank";link&amp;&amp;windowOpen(link,linkTarget)}}}}},this)},TreemapView2.prototype._renderBreadcrumb=function(seriesModel,api,targetInfo){var _this=this;targetInfo||(targetInfo=null!=seriesModel.get("leafDepth",!0)?{node:seriesModel.getViewRoot()}:this.findTarget(api.getWidth()/2,api.getHeight()/2))||(targetInfo={node:seriesModel.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(seriesModel,api,targetInfo.node,function(node){"animating"!==_this._state&amp;&amp;(aboveViewRoot(seriesModel.getViewRoot(),node)?_this._rootToNode({node:node}):_this._zoomToNode({node:node}))})},TreemapView2.prototype.remove=function(){this._clearController(),this._containerGroup&amp;&amp;this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&amp;&amp;this._breadcrumb.remove()},TreemapView2.prototype.dispose=function(){this._clearController()},TreemapView2.prototype._zoomToNode=function(targetInfo){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},TreemapView2.prototype._rootToNode=function(targetInfo){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},TreemapView2.prototype.findTarget=function(x,y){var targetInfo;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(node){var bgEl=this._storage.background[node.getRawIndex()];if(bgEl){var point=bgEl.transformCoordToLocal(x,y),shape=bgEl.shape;if(!(shape.x&lt;=point[0]&amp;&amp;point[0]&lt;=shape.x+shape.width&amp;&amp;shape.y&lt;=point[1]&amp;&amp;point[1]&lt;=shape.y+shape.height))return!1;targetInfo={node:node,offsetX:point[0],offsetY:point[1]}}},this),targetInfo},TreemapView2.type="treemap",TreemapView2}(ChartView);var each$c=each$f,isObject=isObject$3,VisualMapping=function(){function VisualMapping2(option){var mappingMethod=option.mappingMethod,visualType=option.type,thisOption=this.option=clone$4(option);this.type=visualType,this.mappingMethod=mappingMethod,this._normalizeData=normalizers[mappingMethod];var visualHandler=VisualMapping2.visualHandlers[visualType];this.applyVisual=visualHandler.applyVisual,this.getColorMapper=visualHandler.getColorMapper,this._normalizedToVisual=visualHandler._normalizedToVisual[mappingMethod],"piecewise"===mappingMethod?(normalizeVisualRange(thisOption),function preprocessForPiecewise(thisOption){var pieceList=thisOption.pieceList;thisOption.hasSpecialVisual=!1,each$f(pieceList,function(piece,index){piece.originIndex=index,null!=piece.visual&amp;&amp;(thisOption.hasSpecialVisual=!0)})}(thisOption)):"category"===mappingMethod?thisOption.categories?function preprocessForSpecifiedCategory(thisOption){var categories=thisOption.categories,categoryMap=thisOption.categoryMap={},visual=thisOption.visual;if(each$c(categories,function(cate,index){categoryMap[cate]=index}),!isArray$1(visual)){var visualArr_1=[];isObject$3(visual)?each$c(visual,function(v,cate){var index=categoryMap[cate];visualArr_1[null!=index?index:-1]=v}):visualArr_1[-1]=visual,visual=setVisualToOption(thisOption,visualArr_1)}for(var i=categories.length-1;i&gt;=0;i--)null==visual[i]&amp;&amp;(delete categoryMap[categories[i]],categories.pop())}(thisOption):normalizeVisualRange(thisOption,!0):(assert("linear"!==mappingMethod||thisOption.dataExtent),normalizeVisualRange(thisOption))}return VisualMapping2.prototype.mapValueToVisual=function(value){var normalized=this._normalizeData(value);return this._normalizedToVisual(normalized,value)},VisualMapping2.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},VisualMapping2.listVisualTypes=function(){return keys(VisualMapping2.visualHandlers)},VisualMapping2.isValidType=function(visualType){return VisualMapping2.visualHandlers.hasOwnProperty(visualType)},VisualMapping2.eachVisual=function(visual,callback,context){isObject$3(visual)?each$f(visual,callback,context):callback.call(context,visual)},VisualMapping2.mapVisual=function(visual,callback,context){var isPrimary,newVisual=isArray$1(visual)?[]:isObject$3(visual)?{}:(isPrimary=!0,null);return VisualMapping2.eachVisual(visual,function(v,key){var newVal=callback.call(context,v,key);isPrimary?newVisual=newVal:newVisual[key]=newVal}),newVisual},VisualMapping2.retrieveVisuals=function(obj){var hasVisual,ret={};return obj&amp;&amp;each$c(VisualMapping2.visualHandlers,function(h,visualType){obj.hasOwnProperty(visualType)&amp;&amp;(ret[visualType]=obj[visualType],hasVisual=!0)}),hasVisual?ret:null},VisualMapping2.prepareVisualTypes=function(visualTypes){if(isArray$1(visualTypes))visualTypes=visualTypes.slice();else{if(!isObject(visualTypes))return[];var types_1=[];each$c(visualTypes,function(item,type){types_1.push(type)}),visualTypes=types_1}return visualTypes.sort(function(type1,type2){return"color"===type2&amp;&amp;"color"!==type1&amp;&amp;0===type1.indexOf("color")?1:-1}),visualTypes},VisualMapping2.dependsOn=function(visualType1,visualType2){return"color"===visualType2?!(!visualType1||0!==visualType1.indexOf(visualType2)):visualType1===visualType2},VisualMapping2.findPieceIndex=function(value,pieceList,findClosestWhenOutside){for(var possibleI,abs2=1/0,i=0,len2=pieceList.length;i&lt;len2;i++){var pieceValue=pieceList[i].value;if(null!=pieceValue){if(pieceValue===value||isString(pieceValue)&amp;&amp;pieceValue===value+"")return i;findClosestWhenOutside&amp;&amp;updatePossible(pieceValue,i)}}for(i=0,len2=pieceList.length;i&lt;len2;i++){var piece=pieceList[i],interval=piece.interval,close_1=piece.close;if(interval){if(interval[0]===-1/0){if(littleThan(close_1[1],value,interval[1]))return i}else if(interval[1]===1/0){if(littleThan(close_1[0],interval[0],value))return i}else if(littleThan(close_1[0],interval[0],value)&amp;&amp;littleThan(close_1[1],value,interval[1]))return i;findClosestWhenOutside&amp;&amp;updatePossible(interval[0],i),findClosestWhenOutside&amp;&amp;updatePossible(interval[1],i)}}if(findClosestWhenOutside)return value===1/0?pieceList.length-1:value===-1/0?0:possibleI;function updatePossible(val,index){var newAbs=Math.abs(val-value);newAbs&lt;abs2&amp;&amp;(abs2=newAbs,possibleI=index)}},VisualMapping2.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var thisOption=this.option;return bind$1("category"===thisOption.mappingMethod?function(value,isNormalized){return!isNormalized&amp;&amp;(value=this._normalizeData(value)),doMapCategory.call(this,value)}:function(value,isNormalized,out2){var returnRGBArray=!!out2;return!isNormalized&amp;&amp;(value=this._normalizeData(value)),out2=fastLerp(value,thisOption.parsedVisual,out2),returnRGBArray?out2:stringify(out2,"rgba")},this)},_normalizedToVisual:{linear:function(normalized){return stringify(fastLerp(normalized,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);return null==result&amp;&amp;(result=stringify(fastLerp(normalized,this.option.parsedVisual),"rgba")),result},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(color$1,value){return modifyHSL(color$1,value)}),colorSaturation:makePartialColorVisualHandler(function(color$1,value){return modifyHSL(color$1,null,value)}),colorLightness:makePartialColorVisualHandler(function(color$1,value){return modifyHSL(color$1,null,null,value)}),colorAlpha:makePartialColorVisualHandler(function(color$1,value){return modifyAlpha(color$1,value)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(value,getter,setter){setter("symbol",this.mapValueToVisual(value))},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);return null==result&amp;&amp;(result=doMapToArray.call(this,normalized)),result},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},VisualMapping2}();function normalizeVisualRange(thisOption,isCategory2){var visual=thisOption.visual,visualArr=[];isObject$3(visual)?each$c(visual,function(v){visualArr.push(v)}):null!=visual&amp;&amp;visualArr.push(visual);isCategory2||1!==visualArr.length||{color:1,symbol:1}.hasOwnProperty(thisOption.type)||(visualArr[1]=visualArr[0]),setVisualToOption(thisOption,visualArr)}function makePartialColorVisualHandler(applyValue){return{applyVisual:function(value,getter,setter){var colorChannel=this.mapValueToVisual(value);setter("color",applyValue(getter("color"),colorChannel))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(normalized){var visual=this.option.visual;return visual[Math.round(linearMap$2(normalized,[0,1],[0,visual.length-1],!0))]||{}}function makeApplyVisual(visualType){return function(value,getter,setter){setter(visualType,this.mapValueToVisual(value))}}function doMapCategory(normalized){var visual=this.option.visual;return visual[this.option.loop&amp;&amp;-1!==normalized?normalized%visual.length:normalized]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(sourceExtent){return{linear:function(normalized){return linearMap$2(normalized,sourceExtent,this.option.visual,!0)},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);return null==result&amp;&amp;(result=linearMap$2(normalized,sourceExtent,this.option.visual,!0)),result},fixed:doMapFixed}}function getSpecifiedVisual(value){var thisOption=this.option,pieceList=thisOption.pieceList;if(thisOption.hasSpecialVisual){var piece=pieceList[VisualMapping.findPieceIndex(value,pieceList)];if(piece&amp;&amp;piece.visual)return piece.visual[this.type]}}function setVisualToOption(thisOption,visualArr){return thisOption.visual=visualArr,"color"===thisOption.type&amp;&amp;(thisOption.parsedVisual=map$1(visualArr,function(item){return parse(item)||[0,0,0,1]})),visualArr}var normalizers={linear:function(value){return linearMap$2(value,this.option.dataExtent,[0,1],!0)},piecewise:function(value){var pieceList=this.option.pieceList,pieceIndex=VisualMapping.findPieceIndex(value,pieceList,!0);if(null!=pieceIndex)return linearMap$2(pieceIndex,[0,pieceList.length-1],[0,1],!0)},category:function(value){var index=this.option.categories?this.option.categoryMap[value]:value;return null==index?-1:index},fixed:noop};function littleThan(close,a,b){return close?a&lt;=b:a&lt;b}var inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(seriesModel){var root=seriesModel.getData().tree.root;root.isRemoved()||travelTree(root,{},seriesModel.getViewRoot().getAncestors(),seriesModel)}};function travelTree(node,designatedVisual,viewRootAncestors,seriesModel){var nodeModel=node.getModel(),nodeLayout=node.getLayout(),data=node.hostTree.data;if(nodeLayout&amp;&amp;!nodeLayout.invisible&amp;&amp;nodeLayout.isInView){var thisNodeColor,nodeItemStyleModel=nodeModel.getModel("itemStyle"),visuals=function buildVisuals(nodeItemStyleModel,designatedVisual,seriesModel){var visuals=extend({},designatedVisual),designatedVisualItemStyle=seriesModel.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(visualName){designatedVisualItemStyle[visualName]=designatedVisual[visualName];var val=nodeItemStyleModel.get(visualName);designatedVisualItemStyle[visualName]=null,null!=val&amp;&amp;(visuals[visualName]=val)}),visuals}(nodeItemStyleModel,designatedVisual,seriesModel),existsStyle=data.ensureUniqueItemVisual(node.dataIndex,"style"),borderColor=nodeItemStyleModel.get("borderColor"),borderColorSaturation=nodeItemStyleModel.get("borderColorSaturation");null!=borderColorSaturation&amp;&amp;(borderColor=function calculateBorderColor(borderColorSaturation,thisNodeColor){return null!=thisNodeColor?modifyHSL(thisNodeColor,null,null,borderColorSaturation):null}(borderColorSaturation,thisNodeColor=calculateColor(visuals))),existsStyle.stroke=borderColor;var viewChildren=node.viewChildren;if(viewChildren&amp;&amp;viewChildren.length){var mapping_1=function buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren){if(!viewChildren||!viewChildren.length)return;var rangeVisual=getRangeVisual(nodeModel,"color")||null!=visuals.color&amp;&amp;"none"!==visuals.color&amp;&amp;(getRangeVisual(nodeModel,"colorAlpha")||getRangeVisual(nodeModel,"colorSaturation"));if(!rangeVisual)return;var visualMin=nodeModel.get("visualMin"),visualMax=nodeModel.get("visualMax"),dataExtent=nodeLayout.dataExtent.slice();null!=visualMin&amp;&amp;visualMin&lt;dataExtent[0]&amp;&amp;(dataExtent[0]=visualMin),null!=visualMax&amp;&amp;visualMax&gt;dataExtent[1]&amp;&amp;(dataExtent[1]=visualMax);var colorMappingBy=nodeModel.get("colorMappingBy"),opt={type:rangeVisual.name,dataExtent:dataExtent,visual:rangeVisual.range};"color"!==opt.type||"index"!==colorMappingBy&amp;&amp;"id"!==colorMappingBy?opt.mappingMethod="linear":(opt.mappingMethod="category",opt.loop=!0);var mapping=new VisualMapping(opt);return inner$c(mapping).drColorMappingBy=colorMappingBy,mapping}(0,nodeModel,nodeLayout,0,visuals,viewChildren);each$f(viewChildren,function(child,index){if(child.depth&gt;=viewRootAncestors.length||child===viewRootAncestors[child.depth]){var childVisual=function mapVisual$1(nodeModel,visuals,child,index,mapping,seriesModel){var childVisuals=extend({},visuals);if(mapping){var mappingType=mapping.type,colorMappingBy="color"===mappingType&amp;&amp;inner$c(mapping).drColorMappingBy,value="index"===colorMappingBy?index:"id"===colorMappingBy?seriesModel.mapIdToIndex(child.getId()):child.getValue(nodeModel.get("visualDimension"));childVisuals[mappingType]=mapping.mapValueToVisual(value)}return childVisuals}(nodeModel,visuals,child,index,mapping_1,seriesModel);travelTree(child,childVisual,viewRootAncestors,seriesModel)}})}else thisNodeColor=calculateColor(visuals),existsStyle.fill=thisNodeColor}}function calculateColor(visuals){var color2=getValueVisualDefine(visuals,"color");if(color2){var colorAlpha=getValueVisualDefine(visuals,"colorAlpha"),colorSaturation=getValueVisualDefine(visuals,"colorSaturation");return colorSaturation&amp;&amp;(color2=modifyHSL(color2,null,null,colorSaturation)),colorAlpha&amp;&amp;(color2=modifyAlpha(color2,colorAlpha)),color2}}function getValueVisualDefine(visuals,name){var value=visuals[name];if(null!=value&amp;&amp;"none"!==value)return value}function getRangeVisual(nodeModel,name){var range=nodeModel.get(name);return isArray$1(range)&amp;&amp;range.length?{name:name,range:range}:null}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(seriesModel,ecModel,api,payload){var ecWidth=api.getWidth(),ecHeight=api.getHeight(),seriesOption=seriesModel.option,layoutInfo=getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()}),size=seriesOption.size||[],containerWidth=parsePercent(retrieveValue(layoutInfo.width,size[0]),ecWidth),containerHeight=parsePercent(retrieveValue(layoutInfo.height,size[1]),ecHeight),payloadType=payload&amp;&amp;payload.type,targetInfo=retrieveTargetInfo(payload,["treemapZoomToNode","treemapRootToNode"],seriesModel),rootRect="treemapRender"===payloadType||"treemapMove"===payloadType?payload.rootRect:null,viewRoot=seriesModel.getViewRoot(),viewAbovePath=getPathToRoot(viewRoot);if("treemapMove"!==payloadType){var rootSize="treemapZoomToNode"===payloadType?function estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight){var parent,currNode=(targetInfo||{}).node,defaultSize=[containerWidth,containerHeight];if(!currNode||currNode===viewRoot)return defaultSize;var viewArea=containerWidth*containerHeight,area=viewArea*seriesModel.option.zoomToNodeRatio;for(;parent=currNode.parentNode;){for(var sum2=0,siblings=parent.children,i=0,len2=siblings.length;i&lt;len2;i++)sum2+=siblings[i].getValue();var currNodeValue=currNode.getValue();if(0===currNodeValue)return defaultSize;area*=sum2/currNodeValue;var parentModel=parent.getModel(),borderWidth=parentModel.get(PATH_BORDER_WIDTH);(area+=4*borderWidth*borderWidth+(3*borderWidth+Math.max(borderWidth,getUpperLabelHeight(parentModel)))*Math.pow(area,.5))&gt;9007199254740991&amp;&amp;(area=9007199254740991),currNode=parent}area&lt;viewArea&amp;&amp;(area=viewArea);var scale2=Math.pow(area/viewArea,.5);return[containerWidth*scale2,containerHeight*scale2]}(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight):rootRect?[rootRect.width,rootRect.height]:[containerWidth,containerHeight],sort_1=seriesOption.sort;sort_1&amp;&amp;"asc"!==sort_1&amp;&amp;"desc"!==sort_1&amp;&amp;(sort_1="desc");var options={squareRatio:seriesOption.squareRatio,sort:sort_1,leafDepth:seriesOption.leafDepth};viewRoot.hostTree.clearLayouts();var viewRootLayout_1={x:0,y:0,width:rootSize[0],height:rootSize[1],area:rootSize[0]*rootSize[1]};viewRoot.setLayout(viewRootLayout_1),squarify(viewRoot,options,!1,0),viewRootLayout_1=viewRoot.getLayout(),each$b(viewAbovePath,function(node,index){var childValue=(viewAbovePath[index+1]||viewRoot).getValue();node.setLayout(extend({dataExtent:[childValue,childValue],borderWidth:0,upperHeight:0},viewRootLayout_1))})}var treeRoot=seriesModel.getData().tree.root;treeRoot.setLayout(function calculateRootPosition(layoutInfo,rootRect,targetInfo){if(rootRect)return{x:rootRect.x,y:rootRect.y};var defaultPosition={x:0,y:0};if(!targetInfo)return defaultPosition;var targetNode=targetInfo.node,layout2=targetNode.getLayout();if(!layout2)return defaultPosition;var targetCenter=[layout2.width/2,layout2.height/2],node=targetNode;for(;node;){var nodeLayout=node.getLayout();targetCenter[0]+=nodeLayout.x,targetCenter[1]+=nodeLayout.y,node=node.parentNode}return{x:layoutInfo.width/2-targetCenter[0],y:layoutInfo.height/2-targetCenter[1]}}(layoutInfo,rootRect,targetInfo),!0),seriesModel.setLayoutInfo(layoutInfo),prunning(treeRoot,new BoundingRect(-layoutInfo.x,-layoutInfo.y,ecWidth,ecHeight),viewAbovePath,viewRoot,0)}};function squarify(node,options,hideChildren,depth){var width,height;if(!node.isRemoved()){var thisLayout=node.getLayout();width=thisLayout.width,height=thisLayout.height;var nodeModel=node.getModel(),borderWidth=nodeModel.get(PATH_BORDER_WIDTH),halfGapWidth=nodeModel.get(PATH_GAP_WIDTH)/2,upperLabelHeight=getUpperLabelHeight(nodeModel),upperHeight=Math.max(borderWidth,upperLabelHeight),layoutOffset=borderWidth-halfGapWidth,layoutOffsetUpper=upperHeight-halfGapWidth;node.setLayout({borderWidth:borderWidth,upperHeight:upperHeight,upperLabelHeight:upperLabelHeight},!0);var totalArea=(width=mathMax$3(width-2*layoutOffset,0))*(height=mathMax$3(height-layoutOffset-layoutOffsetUpper,0)),viewChildren=function initChildren$1(node,nodeModel,totalArea,options,hideChildren,depth){var viewChildren=node.children||[],orderBy=options.sort;"asc"!==orderBy&amp;&amp;"desc"!==orderBy&amp;&amp;(orderBy=null);var overLeafDepth=null!=options.leafDepth&amp;&amp;options.leafDepth&lt;=depth;if(hideChildren&amp;&amp;!overLeafDepth)return node.viewChildren=[];viewChildren=filter(viewChildren,function(child){return!child.isRemoved()}),function sort$1(viewChildren,orderBy){orderBy&amp;&amp;viewChildren.sort(function(a,b){var diff="asc"===orderBy?a.getValue()-b.getValue():b.getValue()-a.getValue();return 0===diff?"asc"===orderBy?a.dataIndex-b.dataIndex:b.dataIndex-a.dataIndex:diff});return viewChildren}(viewChildren,orderBy);var info=function statistic(nodeModel,children,orderBy){for(var sum2=0,i=0,len2=children.length;i&lt;len2;i++)sum2+=children[i].getValue();var dataExtent,dimension=nodeModel.get("visualDimension");children&amp;&amp;children.length?"value"===dimension&amp;&amp;orderBy?(dataExtent=[children[children.length-1].getValue(),children[0].getValue()],"asc"===orderBy&amp;&amp;dataExtent.reverse()):(dataExtent=[1/0,-1/0],each$b(children,function(child){var value=child.getValue(dimension);value&lt;dataExtent[0]&amp;&amp;(dataExtent[0]=value),value&gt;dataExtent[1]&amp;&amp;(dataExtent[1]=value)})):dataExtent=[NaN,NaN];return{sum:sum2,dataExtent:dataExtent}}(nodeModel,viewChildren,orderBy);if(0===info.sum)return node.viewChildren=[];if(info.sum=function filterByThreshold(nodeModel,totalArea,sum2,orderBy,orderedChildren){if(!orderBy)return sum2;for(var visibleMin=nodeModel.get("visibleMin"),len2=orderedChildren.length,deletePoint=len2,i=len2-1;i&gt;=0;i--){var value=orderedChildren["asc"===orderBy?len2-i-1:i].getValue();value/sum2*totalArea&lt;visibleMin&amp;&amp;(deletePoint=i,sum2-=value)}return"asc"===orderBy?orderedChildren.splice(0,len2-deletePoint):orderedChildren.splice(deletePoint,len2-deletePoint),sum2}(nodeModel,totalArea,info.sum,orderBy,viewChildren),0===info.sum)return node.viewChildren=[];for(var i=0,len2=viewChildren.length;i&lt;len2;i++){var area=viewChildren[i].getValue()/info.sum*totalArea;viewChildren[i].setLayout({area:area})}overLeafDepth&amp;&amp;(viewChildren.length&amp;&amp;node.setLayout({isLeafRoot:!0},!0),viewChildren.length=0);return node.viewChildren=viewChildren,node.setLayout({dataExtent:info.dataExtent},!0),viewChildren}(node,nodeModel,totalArea,options,hideChildren,depth);if(viewChildren.length){var rect={x:layoutOffset,y:layoutOffsetUpper,width:width,height:height},rowFixedLength=mathMin$3(width,height),best=1/0,row=[];row.area=0;for(var i=0,len2=viewChildren.length;i&lt;len2;){var child=viewChildren[i];row.push(child),row.area+=child.getLayout().area;var score=worst(row,rowFixedLength,options.squareRatio);score&lt;=best?(i++,best=score):(row.area-=row.pop().getLayout().area,position(row,rowFixedLength,rect,halfGapWidth,!1),rowFixedLength=mathMin$3(rect.width,rect.height),row.length=row.area=0,best=1/0)}if(row.length&amp;&amp;position(row,rowFixedLength,rect,halfGapWidth,!0),!hideChildren){var childrenVisibleMin=nodeModel.get("childrenVisibleMin");null!=childrenVisibleMin&amp;&amp;totalArea&lt;childrenVisibleMin&amp;&amp;(hideChildren=!0)}for(i=0,len2=viewChildren.length;i&lt;len2;i++)squarify(viewChildren[i],options,hideChildren,depth+1)}}}function worst(row,rowFixedLength,ratio){for(var areaMax=0,areaMin=1/0,i=0,area=void 0,len2=row.length;i&lt;len2;i++)(area=row[i].getLayout().area)&amp;&amp;(area&lt;areaMin&amp;&amp;(areaMin=area),area&gt;areaMax&amp;&amp;(areaMax=area));var squareArea=row.area*row.area,f=rowFixedLength*rowFixedLength*ratio;return squareArea?mathMax$3(f*areaMax/squareArea,squareArea/(f*areaMin)):1/0}function position(row,rowFixedLength,rect,halfGapWidth,flush){var idx0WhenH=rowFixedLength===rect.width?0:1,idx1WhenH=1-idx0WhenH,xy=["x","y"],wh=["width","height"],last=rect[xy[idx0WhenH]],rowOtherLength=rowFixedLength?row.area/rowFixedLength:0;(flush||rowOtherLength&gt;rect[wh[idx1WhenH]])&amp;&amp;(rowOtherLength=rect[wh[idx1WhenH]]);for(var i=0,rowLen=row.length;i&lt;rowLen;i++){var node=row[i],nodeLayout={},step=rowOtherLength?node.getLayout().area/rowOtherLength:0,wh1=nodeLayout[wh[idx1WhenH]]=mathMax$3(rowOtherLength-2*halfGapWidth,0),remain=rect[xy[idx0WhenH]]+rect[wh[idx0WhenH]]-last,modWH=i===rowLen-1||remain&lt;step?remain:step,wh0=nodeLayout[wh[idx0WhenH]]=mathMax$3(modWH-2*halfGapWidth,0);nodeLayout[xy[idx1WhenH]]=rect[xy[idx1WhenH]]+mathMin$3(halfGapWidth,wh1/2),nodeLayout[xy[idx0WhenH]]=last+mathMin$3(halfGapWidth,wh0/2),last+=modWH,node.setLayout(nodeLayout,!0)}rect[xy[idx1WhenH]]+=rowOtherLength,rect[wh[idx1WhenH]]-=rowOtherLength}function prunning(node,clipRect,viewAbovePath,viewRoot,depth){var nodeLayout=node.getLayout(),nodeInViewAbovePath=viewAbovePath[depth],isAboveViewRoot=nodeInViewAbovePath&amp;&amp;nodeInViewAbovePath===node;if(!(nodeInViewAbovePath&amp;&amp;!isAboveViewRoot||depth===viewAbovePath.length&amp;&amp;node!==viewRoot)){node.setLayout({isInView:!0,invisible:!isAboveViewRoot&amp;&amp;!clipRect.intersect(nodeLayout),isAboveViewRoot:isAboveViewRoot},!0);var childClipRect=new BoundingRect(clipRect.x-nodeLayout.x,clipRect.y-nodeLayout.y,clipRect.width,clipRect.height);each$b(node.viewChildren||[],function(child){prunning(child,childClipRect,viewAbovePath,viewRoot,depth+1)})}}function getUpperLabelHeight(model){return model.get(PATH_UPPER_LABEL_SHOW)?model.get(PATH_UPPER_LABEL_HEIGHT):0}function categoryFilter(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&amp;&amp;legendModels.length&amp;&amp;ecModel.eachSeriesByType("graph",function(graphSeries){var categoriesData=graphSeries.getCategoriesData(),data=graphSeries.getGraph().data,categoryNames=categoriesData.mapArray(categoriesData.getName);data.filterSelf(function(idx){var category=data.getItemModel(idx).getShallow("category");if(null!=category){isNumber(category)&amp;&amp;(category=categoryNames[category]);for(var i=0;i&lt;legendModels.length;i++)if(!legendModels[i].isSelected(category))return!1}return!0})})}function categoryVisual(ecModel){var paletteScope={};ecModel.eachSeriesByType("graph",function(seriesModel){var categoriesData=seriesModel.getCategoriesData(),data=seriesModel.getData(),categoryNameIdxMap={};categoriesData.each(function(idx){var name=categoriesData.getName(idx);categoryNameIdxMap["ec-"+name]=idx;var itemModel=categoriesData.getItemModel(idx),style=itemModel.getModel("itemStyle").getItemStyle();style.fill||(style.fill=seriesModel.getColorFromPalette(name,paletteScope)),categoriesData.setItemVisual(idx,"style",style);for(var symbolVisualList=["symbol","symbolSize","symbolKeepAspect"],i=0;i&lt;symbolVisualList.length;i++){var symbolVisual=itemModel.getShallow(symbolVisualList[i],!0);null!=symbolVisual&amp;&amp;categoriesData.setItemVisual(idx,symbolVisualList[i],symbolVisual)}}),categoriesData.count()&amp;&amp;data.each(function(idx){var categoryIdx=data.getItemModel(idx).getShallow("category");if(null!=categoryIdx){isString(categoryIdx)&amp;&amp;(categoryIdx=categoryNameIdxMap["ec-"+categoryIdx]);var categoryStyle=categoriesData.getItemVisual(categoryIdx,"style");extend(data.ensureUniqueItemVisual(idx,"style"),categoryStyle);for(var visualList=["symbol","symbolSize","symbolKeepAspect"],i=0;i&lt;visualList.length;i++)data.setItemVisual(idx,visualList[i],categoriesData.getItemVisual(categoryIdx,visualList[i]))}})})}function normalize$1(a){return a instanceof Array||(a=[a,a]),a}function graphEdgeVisual(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){var graph=seriesModel.getGraph(),edgeData=seriesModel.getEdgeData(),symbolType=normalize$1(seriesModel.get("edgeSymbol")),symbolSize=normalize$1(seriesModel.get("edgeSymbolSize"));edgeData.setVisual("fromSymbol",symbolType&amp;&amp;symbolType[0]),edgeData.setVisual("toSymbol",symbolType&amp;&amp;symbolType[1]),edgeData.setVisual("fromSymbolSize",symbolSize&amp;&amp;symbolSize[0]),edgeData.setVisual("toSymbolSize",symbolSize&amp;&amp;symbolSize[1]),edgeData.setVisual("style",seriesModel.getModel("lineStyle").getLineStyle()),edgeData.each(function(idx){var itemModel=edgeData.getItemModel(idx),edge=graph.getEdgeByIndex(idx),symbolType2=normalize$1(itemModel.getShallow("symbol",!0)),symbolSize2=normalize$1(itemModel.getShallow("symbolSize",!0)),style=itemModel.getModel("lineStyle").getLineStyle(),existsStyle=edgeData.ensureUniqueItemVisual(idx,"style");switch(extend(existsStyle,style),existsStyle.stroke){case"source":var nodeStyle=edge.node1.getVisual("style");existsStyle.stroke=nodeStyle&amp;&amp;nodeStyle.fill;break;case"target":nodeStyle=edge.node2.getVisual("style");existsStyle.stroke=nodeStyle&amp;&amp;nodeStyle.fill}symbolType2[0]&amp;&amp;edge.setVisual("fromSymbol",symbolType2[0]),symbolType2[1]&amp;&amp;edge.setVisual("toSymbol",symbolType2[1]),symbolSize2[0]&amp;&amp;edge.setVisual("fromSymbolSize",symbolSize2[0]),symbolSize2[1]&amp;&amp;edge.setVisual("toSymbolSize",symbolSize2[1])})})}var getAutoCurvenessParams=function(seriesModel){return seriesModel.get("autoCurveness")||null},createCurveness=function(seriesModel,appendLength){var autoCurvenessParmas=getAutoCurvenessParams(seriesModel),length2=20,curvenessList=[];if(isNumber(autoCurvenessParmas))length2=autoCurvenessParmas;else if(isArray$1(autoCurvenessParmas))return void(seriesModel.__curvenessList=autoCurvenessParmas);appendLength&gt;length2&amp;&amp;(length2=appendLength);var len2=length2%2?length2+2:length2+3;curvenessList=[];for(var i=0;i&lt;len2;i++)curvenessList.push((i%2?i+1:i)/10*(i%2?-1:1));seriesModel.__curvenessList=curvenessList},getKeyOfEdges=function(n1,n2,seriesModel){var source=[n1.id,n1.dataIndex].join("."),target=[n2.id,n2.dataIndex].join(".");return[seriesModel.uid,source,target].join("--\x3e")},getOppositeKey=function(key){var keys2=key.split("--\x3e");return[keys2[0],keys2[2],keys2[1]].join("--\x3e")},getEdgeMapLengthWithKey=function(key,seriesModel){var edgeMap=seriesModel.__edgeMap;return edgeMap[key]?edgeMap[key].length:0};function getCurvenessForEdge(edge,seriesModel,index,needReverse){var autoCurvenessParams=getAutoCurvenessParams(seriesModel),isArrayParam=isArray$1(autoCurvenessParams);if(!autoCurvenessParams)return null;var edgeArray=function(edge,seriesModel){var key=getKeyOfEdges(edge.node1,edge.node2,seriesModel);return seriesModel.__edgeMap[key]}(edge,seriesModel);if(!edgeArray)return null;for(var edgeIndex=-1,i=0;i&lt;edgeArray.length;i++)if(edgeArray[i]===index){edgeIndex=i;break}var totalLen=function(edge,seriesModel){return getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1,edge.node2,seriesModel),seriesModel)+getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2,edge.node1,seriesModel),seriesModel)}(edge,seriesModel);createCurveness(seriesModel,totalLen),edge.lineStyle=edge.lineStyle||{};var curKey=getKeyOfEdges(edge.node1,edge.node2,seriesModel),curvenessList=seriesModel.__curvenessList,parityCorrection=isArrayParam||totalLen%2?0:1;if(edgeArray.isForward)return curvenessList[parityCorrection+edgeIndex];var oppositeKey=getOppositeKey(curKey),len2=getEdgeMapLengthWithKey(oppositeKey,seriesModel),resValue=curvenessList[edgeIndex+len2+parityCorrection];return needReverse?isArrayParam?autoCurvenessParams&amp;&amp;0===autoCurvenessParams[0]?(len2+parityCorrection)%2?resValue:-resValue:((len2%2?0:1)+parityCorrection)%2?resValue:-resValue:(len2+parityCorrection)%2?resValue:-resValue:curvenessList[edgeIndex+len2+parityCorrection]}function simpleLayout(seriesModel){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"view"===coordSys.type){var graph=seriesModel.getGraph();graph.eachNode(function(node){var model=node.getModel();node.setLayout([+model.get("x"),+model.get("y")])}),simpleLayoutEdge(graph,seriesModel)}}function simpleLayoutEdge(graph,seriesModel){graph.eachEdge(function(edge,index){var curveness=retrieve3(edge.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(edge,seriesModel,index,!0),0),p1=clone$3(edge.node1.getLayout()),p2=clone$3(edge.node2.getLayout()),points2=[p1,p2];+curveness&amp;&amp;points2.push([(p1[0]+p2[0])/2-(p1[1]-p2[1])*curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*curveness]),edge.setLayout(points2)})}function graphSimpleLayout(ecModel,api){ecModel.eachSeriesByType("graph",function(seriesModel){var layout2=seriesModel.get("layout"),coordSys=seriesModel.coordinateSystem;if(coordSys&amp;&amp;"view"!==coordSys.type){var data_1=seriesModel.getData(),dimensions_1=[];each$f(coordSys.dimensions,function(coordDim){dimensions_1=dimensions_1.concat(data_1.mapDimensionsAll(coordDim))});for(var dataIndex=0;dataIndex&lt;data_1.count();dataIndex++){for(var value=[],hasValue=!1,i=0;i&lt;dimensions_1.length;i++){var val=data_1.get(dimensions_1[i],dataIndex);isNaN(val)||(hasValue=!0),value.push(val)}hasValue?data_1.setItemLayout(dataIndex,coordSys.dataToPoint(value)):data_1.setItemLayout(dataIndex,[NaN,NaN])}simpleLayoutEdge(data_1.graph,seriesModel)}else layout2&amp;&amp;"none"!==layout2||simpleLayout(seriesModel)})}function getNodeGlobalScale(seriesModel){var coordSys=seriesModel.coordinateSystem;if("view"!==coordSys.type)return 1;var nodeScaleRatio=seriesModel.option.nodeScaleRatio,groupZoom=coordSys.scaleX;return((coordSys.getZoom()-1)*nodeScaleRatio+1)/groupZoom}function getSymbolSize(node){var symbolSize=node.getVisual("symbolSize");return symbolSize instanceof Array&amp;&amp;(symbolSize=(symbolSize[0]+symbolSize[1])/2),+symbolSize}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(seriesModel,basedOn,draggingNode,pointer){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"view"===coordSys.type){var rect=coordSys.getBoundingRect(),nodeData=seriesModel.getData(),graph=nodeData.graph,cx=rect.width/2+rect.x,cy=rect.height/2+rect.y,r=Math.min(rect.width,rect.height)/2,count2=nodeData.count();if(nodeData.setLayout({cx:cx,cy:cy}),count2){if(draggingNode){var _a2=coordSys.pointToData(pointer),tempX=_a2[0],tempY=_a2[1],v=[tempX-cx,tempY-cy];normalize$3(v,v),scale$2(v,v,r),draggingNode.setLayout([cx+v[0],cy+v[1]],!0),rotateNodeLabel(draggingNode,seriesModel.get(["circular","rotateLabel"]),cx,cy)}_layoutNodesBasedOn[basedOn](seriesModel,graph,nodeData,r,cx,cy,count2),graph.eachEdge(function(edge,index){var cp1,curveness=retrieve3(edge.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(edge,seriesModel,index),0),p1=clone$3(edge.node1.getLayout()),p2=clone$3(edge.node2.getLayout()),x12=(p1[0]+p2[0])/2,y12=(p1[1]+p2[1])/2;+curveness&amp;&amp;(cp1=[cx*(curveness*=3)+x12*(1-curveness),cy*curveness+y12*(1-curveness)]),edge.setLayout([p1,p2,cp1])})}}}var _layoutNodesBasedOn={value:function(seriesModel,graph,nodeData,r,cx,cy,count2){var angle=0,sum2=nodeData.getSum("value"),unitAngle=2*Math.PI/(sum2||count2);graph.eachNode(function(node){var value=node.getValue("value"),radianHalf=unitAngle*(sum2?value:1)/2;angle+=radianHalf,node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]),angle+=radianHalf})},symbolSize:function(seriesModel,graph,nodeData,r,cx,cy,count2){var sumRadian=0;_symbolRadiansHalf.length=count2;var nodeScale=getNodeGlobalScale(seriesModel);graph.eachNode(function(node){var symbolSize=getSymbolSize(node);isNaN(symbolSize)&amp;&amp;(symbolSize=2),symbolSize&lt;0&amp;&amp;(symbolSize=0),symbolSize*=nodeScale;var symbolRadianHalf=Math.asin(symbolSize/2/r);isNaN(symbolRadianHalf)&amp;&amp;(symbolRadianHalf=PI$2/2),_symbolRadiansHalf[node.dataIndex]=symbolRadianHalf,sumRadian+=2*symbolRadianHalf});var halfRemainRadian=(2*PI$2-sumRadian)/count2/2,angle=0;graph.eachNode(function(node){var radianHalf=halfRemainRadian+_symbolRadiansHalf[node.dataIndex];angle+=radianHalf,(!node.getLayout()||!node.getLayout().fixed)&amp;&amp;node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]),angle+=radianHalf})}};function rotateNodeLabel(node,circularRotateLabel,cx,cy){var el=node.getGraphicEl();if(el){var labelRotate=node.getModel().get(["label","rotate"])||0,symbolPath=el.getSymbolPath();if(circularRotateLabel){var pos=node.getLayout(),rad=Math.atan2(pos[1]-cy,pos[0]-cx);rad&lt;0&amp;&amp;(rad=2*Math.PI+rad);var isLeft=pos[0]&lt;cx;isLeft&amp;&amp;(rad-=Math.PI);var textPosition=isLeft?"left":"right";symbolPath.setTextConfig({rotation:-rad,position:textPosition,origin:"center"});var emphasisState=symbolPath.ensureState("emphasis");extend(emphasisState.textConfig||(emphasisState.textConfig={}),{position:textPosition})}else symbolPath.setTextConfig({rotation:labelRotate*=Math.PI/180})}}function graphCircularLayout(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){"circular"===seriesModel.get("layout")&amp;&amp;circularLayout(seriesModel,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function graphForceLayout(ecModel){ecModel.eachSeriesByType("graph",function(graphSeries){var coordSys=graphSeries.coordinateSystem;if(!coordSys||"view"===coordSys.type)if("force"===graphSeries.get("layout")){var preservedPoints_1=graphSeries.preservedPoints||{},graph_1=graphSeries.getGraph(),nodeData_1=graph_1.data,edgeData=graph_1.edgeData,forceModel=graphSeries.getModel("force"),initLayout=forceModel.get("initLayout");graphSeries.preservedPoints?nodeData_1.each(function(idx){var id=nodeData_1.getId(idx);nodeData_1.setItemLayout(idx,preservedPoints_1[id]||[NaN,NaN])}):initLayout&amp;&amp;"none"!==initLayout?"circular"===initLayout&amp;&amp;circularLayout(graphSeries,"value"):simpleLayout(graphSeries);var nodeDataExtent_1=nodeData_1.getDataExtent("value"),edgeDataExtent_1=edgeData.getDataExtent("value"),repulsion=forceModel.get("repulsion"),edgeLength=forceModel.get("edgeLength"),repulsionArr_1=isArray$1(repulsion)?repulsion:[repulsion,repulsion],edgeLengthArr_1=isArray$1(edgeLength)?edgeLength:[edgeLength,edgeLength];edgeLengthArr_1=[edgeLengthArr_1[1],edgeLengthArr_1[0]];var nodes_1=nodeData_1.mapArray("value",function(value,idx){var point=nodeData_1.getItemLayout(idx),rep=linearMap$2(value,nodeDataExtent_1,repulsionArr_1);return isNaN(rep)&amp;&amp;(rep=(repulsionArr_1[0]+repulsionArr_1[1])/2),{w:rep,rep:rep,fixed:nodeData_1.getItemModel(idx).get("fixed"),p:!point||isNaN(point[0])||isNaN(point[1])?null:point}}),edges=edgeData.mapArray("value",function(value,idx){var edge=graph_1.getEdgeByIndex(idx),d=linearMap$2(value,edgeDataExtent_1,edgeLengthArr_1);isNaN(d)&amp;&amp;(d=(edgeLengthArr_1[0]+edgeLengthArr_1[1])/2);var edgeModel=edge.getModel(),curveness=retrieve3(edge.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(edge,graphSeries,idx,!0),0);return{n1:nodes_1[edge.node1.dataIndex],n2:nodes_1[edge.node2.dataIndex],d:d,curveness:curveness,ignoreForceLayout:edgeModel.get("ignoreForceLayout")}}),rect=coordSys.getBoundingRect(),forceInstance=function forceLayout(inNodes,inEdges,opts){for(var nodes=inNodes,edges=inEdges,rect=opts.rect,width=rect.width,height=rect.height,center2=[rect.x+width/2,rect.y+height/2],gravity=null==opts.gravity?.1:opts.gravity,i=0;i&lt;nodes.length;i++){var n=nodes[i];n.p||(n.p=create$2(width*(Math.random()-.5)+center2[0],height*(Math.random()-.5)+center2[1])),n.pp=clone$3(n.p),n.edges=null}var beforeStepCallback,afterStepCallback,initialFriction=null==opts.friction?.6:opts.friction,friction=initialFriction;return{warmUp:function(){friction=.8*initialFriction},setFixed:function(idx){nodes[idx].fixed=!0},setUnfixed:function(idx){nodes[idx].fixed=!1},beforeStep:function(cb){beforeStepCallback=cb},afterStep:function(cb){afterStepCallback=cb},step:function(cb){beforeStepCallback&amp;&amp;beforeStepCallback(nodes,edges);for(var v12=[],nLen=nodes.length,i2=0;i2&lt;edges.length;i2++){var e2=edges[i2];if(!e2.ignoreForceLayout){var n1=e2.n1;sub(v12,(n2=e2.n2).p,n1.p);var d=len(v12)-e2.d,w=n2.w/(n1.w+n2.w);isNaN(w)&amp;&amp;(w=0),normalize$3(v12,v12),!n1.fixed&amp;&amp;scaleAndAdd(n1.p,n1.p,v12,w*d*friction),!n2.fixed&amp;&amp;scaleAndAdd(n2.p,n2.p,v12,-(1-w)*d*friction)}}for(i2=0;i2&lt;nLen;i2++)(n3=nodes[i2]).fixed||(sub(v12,center2,n3.p),scaleAndAdd(n3.p,n3.p,v12,gravity*friction));for(i2=0;i2&lt;nLen;i2++){n1=nodes[i2];for(var j=i2+1;j&lt;nLen;j++){var n2;sub(v12,(n2=nodes[j]).p,n1.p),0===(d=len(v12))&amp;&amp;(set$1(v12,Math.random()-.5,Math.random()-.5),d=1);var repFact=(n1.rep+n2.rep)/d/d;!n1.fixed&amp;&amp;scaleAndAdd(n1.pp,n1.pp,v12,repFact),!n2.fixed&amp;&amp;scaleAndAdd(n2.pp,n2.pp,v12,-repFact)}}var v=[];for(i2=0;i2&lt;nLen;i2++){var n3;(n3=nodes[i2]).fixed||(sub(v,n3.p,n3.pp),scaleAndAdd(n3.p,n3.p,v,friction),copy$1(n3.pp,n3.p))}var finished=(friction*=.992)&lt;.01;afterStepCallback&amp;&amp;afterStepCallback(nodes,edges,finished),cb&amp;&amp;cb(finished)}}}(nodes_1,edges,{rect:rect,gravity:forceModel.get("gravity"),friction:forceModel.get("friction")});forceInstance.beforeStep(function(nodes,edges2){for(var i=0,l=nodes.length;i&lt;l;i++)nodes[i].fixed&amp;&amp;copy$1(nodes[i].p,graph_1.getNodeByIndex(i).getLayout())}),forceInstance.afterStep(function(nodes,edges2,stopped){for(var i=0,l=nodes.length;i&lt;l;i++)nodes[i].fixed||graph_1.getNodeByIndex(i).setLayout(nodes[i].p),preservedPoints_1[nodeData_1.getId(i)]=nodes[i].p;for(i=0,l=edges2.length;i&lt;l;i++){var e2=edges2[i],edge=graph_1.getEdgeByIndex(i),p1=e2.n1.p,p2=e2.n2.p,points2=edge.getLayout();(points2=points2?points2.slice():[])[0]=points2[0]||[],points2[1]=points2[1]||[],copy$1(points2[0],p1),copy$1(points2[1],p2),+e2.curveness&amp;&amp;(points2[2]=[(p1[0]+p2[0])/2-(p1[1]-p2[1])*e2.curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*e2.curveness]),edge.setLayout(points2)}}),graphSeries.forceLayout=forceInstance,graphSeries.preservedPoints=preservedPoints_1,forceInstance.step()}else graphSeries.forceLayout=null})}function createViewCoordSys(ecModel,api){var viewList=[];return ecModel.eachSeriesByType("graph",function(seriesModel){var coordSysType=seriesModel.get("coordinateSystem");if(!coordSysType||"view"===coordSysType){var data_1=seriesModel.getData(),min3=[],max3=[];fromPoints(data_1.mapArray(function(idx){var itemModel=data_1.getItemModel(idx);return[+itemModel.get("x"),+itemModel.get("y")]}),min3,max3),max3[0]-min3[0]===0&amp;&amp;(max3[0]+=1,min3[0]-=1),max3[1]-min3[1]===0&amp;&amp;(max3[1]+=1,min3[1]-=1);var aspect=(max3[0]-min3[0])/(max3[1]-min3[1]),viewRect2=function getViewRect$3(seriesModel,api,aspect){return getLayoutRect(extend(seriesModel.getBoxLayoutParams(),{aspect:aspect}),{width:api.getWidth(),height:api.getHeight()})}(seriesModel,api,aspect);isNaN(aspect)&amp;&amp;(min3=[viewRect2.x,viewRect2.y],max3=[viewRect2.x+viewRect2.width,viewRect2.y+viewRect2.height]);var bbWidth=max3[0]-min3[0],bbHeight=max3[1]-min3[1],viewWidth=viewRect2.width,viewHeight=viewRect2.height,viewCoordSys=seriesModel.coordinateSystem=new View;viewCoordSys.zoomLimit=seriesModel.get("scaleLimit"),viewCoordSys.setBoundingRect(min3[0],min3[1],bbWidth,bbHeight),viewCoordSys.setViewRect(viewRect2.x,viewRect2.y,viewWidth,viewHeight),viewCoordSys.setCenter(seriesModel.get("center"),api),viewCoordSys.setZoom(seriesModel.get("zoom")),viewList.push(viewCoordSys)}}),viewList}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){return function StraightLineShape2(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}}();function isStraightLine(shape){return isNaN(+shape.cpx1)||isNaN(+shape.cpy1)}!function(_super){function CurveShape(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}__extends$1(CurveShape,_super)}(StraightLineShape);var ECLinePath=function(_super){function ECLinePath2(opts){var _this=_super.call(this,opts)||this;return _this.type="ec-line",_this}return __extends$1(ECLinePath2,_super),ECLinePath2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},ECLinePath2.prototype.getDefaultShape=function(){return new StraightLineShape},ECLinePath2.prototype.buildPath=function(ctx,shape){isStraightLine(shape)?straightLineProto.buildPath.call(this,ctx,shape):bezierCurveProto.buildPath.call(this,ctx,shape)},ECLinePath2.prototype.pointAt=function(t){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,t):bezierCurveProto.pointAt.call(this,t)},ECLinePath2.prototype.tangentAt=function(t){var shape=this.shape,p=isStraightLine(shape)?[shape.x2-shape.x1,shape.y2-shape.y1]:bezierCurveProto.tangentAt.call(this,t);return normalize$3(p,p)},ECLinePath2}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(symbolCategory){return"_"+symbolCategory+"Type"}function makeSymbolTypeValue(name,lineData,idx){var symbolType=lineData.getItemVisual(idx,name);if(!symbolType||"none"===symbolType)return symbolType;var symbolSize=lineData.getItemVisual(idx,name+"Size"),symbolRotate=lineData.getItemVisual(idx,name+"Rotate"),symbolOffset=lineData.getItemVisual(idx,name+"Offset"),symbolKeepAspect=lineData.getItemVisual(idx,name+"KeepAspect"),symbolSizeArr=normalizeSymbolSize(symbolSize);return symbolType+symbolSizeArr+normalizeSymbolOffset(symbolOffset||0,symbolSizeArr)+(symbolRotate||"")+(symbolKeepAspect||"")}function createSymbol(name,lineData,idx){var symbolType=lineData.getItemVisual(idx,name);if(symbolType&amp;&amp;"none"!==symbolType){var symbolSize=lineData.getItemVisual(idx,name+"Size"),symbolRotate=lineData.getItemVisual(idx,name+"Rotate"),symbolOffset=lineData.getItemVisual(idx,name+"Offset"),symbolKeepAspect=lineData.getItemVisual(idx,name+"KeepAspect"),symbolSizeArr=normalizeSymbolSize(symbolSize),symbolOffsetArr=normalizeSymbolOffset(symbolOffset||0,symbolSizeArr),symbolPath=createSymbol$1(symbolType,-symbolSizeArr[0]/2+symbolOffsetArr[0],-symbolSizeArr[1]/2+symbolOffsetArr[1],symbolSizeArr[0],symbolSizeArr[1],null,symbolKeepAspect);return symbolPath.__specifiedRotation=null==symbolRotate||isNaN(symbolRotate)?void 0:+symbolRotate*Math.PI/180||0,symbolPath.name=name,symbolPath}}function setLinePoints(targetShape,points2){targetShape.x1=points2[0][0],targetShape.y1=points2[0][1],targetShape.x2=points2[1][0],targetShape.y2=points2[1][1],targetShape.percent=1;var cp1=points2[2];cp1?(targetShape.cpx1=cp1[0],targetShape.cpy1=cp1[1]):(targetShape.cpx1=NaN,targetShape.cpy1=NaN)}var Line=function(_super){function Line2(lineData,idx,seriesScope){var _this=_super.call(this)||this;return _this._createLine(lineData,idx,seriesScope),_this}return __extends$1(Line2,_super),Line2.prototype._createLine=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=function createLine(points2){var line=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(line.shape,points2),line}(lineData.getItemLayout(idx));line.shape.percent=0,initProps(line,{shape:{percent:1}},seriesModel,idx),this.add(line),each$f(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol),this[makeSymbolTypeKey(symbolCategory)]=makeSymbolTypeValue(symbolCategory,lineData,idx)},this),this._updateCommonStl(lineData,idx,seriesScope)},Line2.prototype.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childOfName("line"),linePoints=lineData.getItemLayout(idx),target={shape:{}};setLinePoints(target.shape,linePoints),updateProps$1(line,target,seriesModel,idx),each$f(SYMBOL_CATEGORIES,function(symbolCategory){var symbolType=makeSymbolTypeValue(symbolCategory,lineData,idx),key=makeSymbolTypeKey(symbolCategory);if(this[key]!==symbolType){this.remove(this.childOfName(symbolCategory));var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol)}this[key]=symbolType},this),this._updateCommonStl(lineData,idx,seriesScope)},Line2.prototype.getLinePath=function(){return this.childAt(0)},Line2.prototype._updateCommonStl=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childOfName("line"),emphasisLineStyle=seriesScope&amp;&amp;seriesScope.emphasisLineStyle,blurLineStyle=seriesScope&amp;&amp;seriesScope.blurLineStyle,selectLineStyle=seriesScope&amp;&amp;seriesScope.selectLineStyle,labelStatesModels=seriesScope&amp;&amp;seriesScope.labelStatesModels,emphasisDisabled=seriesScope&amp;&amp;seriesScope.emphasisDisabled,focus=seriesScope&amp;&amp;seriesScope.focus,blurScope=seriesScope&amp;&amp;seriesScope.blurScope;if(!seriesScope||lineData.hasItemOption){var itemModel=lineData.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis");emphasisLineStyle=emphasisModel.getModel("lineStyle").getLineStyle(),blurLineStyle=itemModel.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle=itemModel.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled=emphasisModel.get("disabled"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),labelStatesModels=getLabelStatesModels(itemModel)}var lineStyle=lineData.getItemVisual(idx,"style"),visualColor=lineStyle.stroke;line.useStyle(lineStyle),line.style.fill=null,line.style.strokeNoScale=!0,line.ensureState("emphasis").style=emphasisLineStyle,line.ensureState("blur").style=blurLineStyle,line.ensureState("select").style=selectLineStyle,each$f(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=this.childOfName(symbolCategory);if(symbol){symbol.setColor(visualColor),symbol.style.opacity=lineStyle.opacity;for(var i=0;i&lt;SPECIAL_STATES.length;i++){var stateName=SPECIAL_STATES[i],lineState=line.getState(stateName);if(lineState){var lineStateStyle=lineState.style||{},state=symbol.ensureState(stateName),stateStyle=state.style||(state.style={});null!=lineStateStyle.stroke&amp;&amp;(stateStyle[symbol.__isEmptyBrush?"stroke":"fill"]=lineStateStyle.stroke),null!=lineStateStyle.opacity&amp;&amp;(stateStyle.opacity=lineStateStyle.opacity)}}symbol.markRedraw()}},this);var rawVal=seriesModel.getRawValue(idx);setLabelStyle(this,labelStatesModels,{labelDataIndex:idx,labelFetcher:{getFormattedLabel:function(dataIndex,stateName){return seriesModel.getFormattedLabel(dataIndex,stateName,lineData.dataType)}},inheritColor:visualColor||"#000",defaultOpacity:lineStyle.opacity,defaultText:(null==rawVal?lineData.getName(idx):isFinite(rawVal)?round$3(rawVal):rawVal)+""});var label=this.getTextContent();if(label){var labelNormalModel=labelStatesModels.normal;label.__align=label.style.align,label.__verticalAlign=label.style.verticalAlign,label.__position=labelNormalModel.get("position")||"middle";var distance2=labelNormalModel.get("distance");isArray$1(distance2)||(distance2=[distance2,distance2]),label.__labelDistance=distance2}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,focus,blurScope,emphasisDisabled)},Line2.prototype.highlight=function(){enterEmphasis(this)},Line2.prototype.downplay=function(){leaveEmphasis(this)},Line2.prototype.updateLayout=function(lineData,idx){this.setLinePoints(lineData.getItemLayout(idx))},Line2.prototype.setLinePoints=function(points2){var linePath=this.childOfName("line");setLinePoints(linePath.shape,points2),linePath.dirty()},Line2.prototype.beforeUpdate=function(){var symbolFrom=this.childOfName("fromSymbol"),symbolTo=this.childOfName("toSymbol"),label=this.getTextContent();if(symbolFrom||symbolTo||label&amp;&amp;!label.ignore){for(var invScale=1,parentNode2=this.parent;parentNode2;)parentNode2.scaleX&amp;&amp;(invScale/=parentNode2.scaleX),parentNode2=parentNode2.parent;var line=this.childOfName("line");if(this.__dirty||line.__dirty){var percent=line.shape.percent,fromPos=line.pointAt(0),toPos=line.pointAt(percent),d=sub([],toPos,fromPos);if(normalize$3(d,d),symbolFrom&amp;&amp;(symbolFrom.setPosition(fromPos),setSymbolRotation(symbolFrom,0),symbolFrom.scaleX=symbolFrom.scaleY=invScale*percent,symbolFrom.markRedraw()),symbolTo&amp;&amp;(symbolTo.setPosition(toPos),setSymbolRotation(symbolTo,1),symbolTo.scaleX=symbolTo.scaleY=invScale*percent,symbolTo.markRedraw()),label&amp;&amp;!label.ignore){label.x=label.y=0,label.originX=label.originY=0;var textAlign=void 0,textVerticalAlign=void 0,distance2=label.__labelDistance,distanceX=distance2[0]*invScale,distanceY=distance2[1]*invScale,halfPercent=percent/2,tangent=line.tangentAt(halfPercent),n=[tangent[1],-tangent[0]],cp=line.pointAt(halfPercent);n[1]&gt;0&amp;&amp;(n[0]=-n[0],n[1]=-n[1]);var dir3=tangent[0]&lt;0?-1:1;if("start"!==label.__position&amp;&amp;"end"!==label.__position){var rotation=-Math.atan2(tangent[1],tangent[0]);toPos[0]&lt;fromPos[0]&amp;&amp;(rotation=Math.PI+rotation),label.rotation=rotation}var dy=void 0;switch(label.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":dy=-distanceY,textVerticalAlign="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":dy=distanceY,textVerticalAlign="top";break;default:dy=0,textVerticalAlign="middle"}switch(label.__position){case"end":label.x=d[0]*distanceX+toPos[0],label.y=d[1]*distanceY+toPos[1],textAlign=d[0]&gt;.8?"left":d[0]&lt;-.8?"right":"center",textVerticalAlign=d[1]&gt;.8?"top":d[1]&lt;-.8?"bottom":"middle";break;case"start":label.x=-d[0]*distanceX+fromPos[0],label.y=-d[1]*distanceY+fromPos[1],textAlign=d[0]&gt;.8?"right":d[0]&lt;-.8?"left":"center",textVerticalAlign=d[1]&gt;.8?"bottom":d[1]&lt;-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":label.x=distanceX*dir3+fromPos[0],label.y=fromPos[1]+dy,textAlign=tangent[0]&lt;0?"right":"left",label.originX=-distanceX*dir3,label.originY=-dy;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":label.x=cp[0],label.y=cp[1]+dy,textAlign="center",label.originY=-dy;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":label.x=-distanceX*dir3+toPos[0],label.y=toPos[1]+dy,textAlign=tangent[0]&gt;=0?"right":"left",label.originX=distanceX*dir3,label.originY=-dy}label.scaleX=label.scaleY=invScale,label.setStyle({verticalAlign:label.__verticalAlign||textVerticalAlign,align:label.__align||textAlign})}}}function setSymbolRotation(symbol,percent2){var specifiedRotation=symbol.__specifiedRotation;if(null==specifiedRotation){var tangent2=line.tangentAt(percent2);symbol.attr("rotation",(1===percent2?-1:1)*Math.PI/2-Math.atan2(tangent2[1],tangent2[0]))}else symbol.attr("rotation",specifiedRotation)}},Line2}(Group$3),LineDraw=function(){function LineDraw2(LineCtor){this.group=new Group$3,this._LineCtor=LineCtor||Line}return LineDraw2.prototype.updateData=function(lineData){var _this=this;this._progressiveEls=null;var group=this.group,oldLineData=this._lineData;this._lineData=lineData,oldLineData||group.removeAll();var seriesScope=makeSeriesScope$1(lineData);lineData.diff(oldLineData).add(function(idx){_this._doAdd(lineData,idx,seriesScope)}).update(function(newIdx,oldIdx){_this._doUpdate(oldLineData,lineData,oldIdx,newIdx,seriesScope)}).remove(function(idx){group.remove(oldLineData.getItemGraphicEl(idx))}).execute()},LineDraw2.prototype.updateLayout=function(){var lineData=this._lineData;lineData&amp;&amp;lineData.eachItemGraphicEl(function(el,idx){el.updateLayout(lineData,idx)},this)},LineDraw2.prototype.incrementalPrepareUpdate=function(lineData){this._seriesScope=makeSeriesScope$1(lineData),this._lineData=null,this.group.removeAll()},LineDraw2.prototype.incrementalUpdate=function(taskParams,lineData){function updateIncrementalAndHover(el2){el2.isGroup||function isEffectObject(el){return el.animators&amp;&amp;el.animators.length&gt;0}(el2)||(el2.incremental=!0,el2.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var idx=taskParams.start;idx&lt;taskParams.end;idx++){if(lineNeedsDraw(lineData.getItemLayout(idx))){var el=new this._LineCtor(lineData,idx,this._seriesScope);el.traverse(updateIncrementalAndHover),this.group.add(el),lineData.setItemGraphicEl(idx,el),this._progressiveEls.push(el)}}},LineDraw2.prototype.remove=function(){this.group.removeAll()},LineDraw2.prototype.eachRendered=function(cb){traverseElements(this._progressiveEls||this.group,cb)},LineDraw2.prototype._doAdd=function(lineData,idx,seriesScope){if(lineNeedsDraw(lineData.getItemLayout(idx))){var el=new this._LineCtor(lineData,idx,seriesScope);lineData.setItemGraphicEl(idx,el),this.group.add(el)}},LineDraw2.prototype._doUpdate=function(oldLineData,newLineData,oldIdx,newIdx,seriesScope){var itemEl=oldLineData.getItemGraphicEl(oldIdx);lineNeedsDraw(newLineData.getItemLayout(newIdx))?(itemEl?itemEl.updateData(newLineData,newIdx,seriesScope):itemEl=new this._LineCtor(newLineData,newIdx,seriesScope),newLineData.setItemGraphicEl(newIdx,itemEl),this.group.add(itemEl)):this.group.remove(itemEl)},LineDraw2}();function makeSeriesScope$1(lineData){var hostModel=lineData.hostModel,emphasisModel=hostModel.getModel("emphasis");return{lineStyle:hostModel.getModel("lineStyle").getLineStyle(),emphasisLineStyle:emphasisModel.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:hostModel.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:hostModel.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:emphasisModel.get("disabled"),blurScope:emphasisModel.get("blurScope"),focus:emphasisModel.get("focus"),labelStatesModels:getLabelStatesModels(hostModel)}}function isPointNaN(pt){return isNaN(pt[0])||isNaN(pt[1])}function lineNeedsDraw(pts){return pts&amp;&amp;!isPointNaN(pts[0])&amp;&amp;!isPointNaN(pts[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(curvePoints,center2,radius){for(var t,p0=curvePoints[0],p1=curvePoints[1],p2=curvePoints[2],d=1/0,radiusSquare=radius*radius,interval=.1,_t=.1;_t&lt;=.9;_t+=.1){v1[0]=quadraticAt(p0[0],p1[0],p2[0],_t),v1[1]=quadraticAt(p0[1],p1[1],p2[1],_t),(diff=mathAbs(v2DistSquare(v1,center2)-radiusSquare))&lt;d&amp;&amp;(d=diff,t=_t)}for(var i=0;i&lt;32;i++){var next=t+interval;v2[0]=quadraticAt(p0[0],p1[0],p2[0],t),v2[1]=quadraticAt(p0[1],p1[1],p2[1],t),v3[0]=quadraticAt(p0[0],p1[0],p2[0],next),v3[1]=quadraticAt(p0[1],p1[1],p2[1],next);var diff=v2DistSquare(v2,center2)-radiusSquare;if(mathAbs(diff)&lt;.01)break;var nextDiff=v2DistSquare(v3,center2)-radiusSquare;interval/=2,diff&lt;0?nextDiff&gt;=0?t+=interval:t-=interval:nextDiff&gt;=0?t-=interval:t+=interval}return t}function adjustEdge(graph,scale2){var tmp0=[],quadraticSubdivide$1=quadraticSubdivide,pts=[[],[],[]],pts2=[[],[]],v=[];scale2/=2,graph.eachEdge(function(edge,idx){var linePoints=edge.getLayout(),fromSymbol=edge.getVisual("fromSymbol"),toSymbol=edge.getVisual("toSymbol");linePoints.__original||(linePoints.__original=[clone$3(linePoints[0]),clone$3(linePoints[1])],linePoints[2]&amp;&amp;linePoints.__original.push(clone$3(linePoints[2])));var originalPoints=linePoints.__original;if(null!=linePoints[2]){if(copy$1(pts[0],originalPoints[0]),copy$1(pts[1],originalPoints[2]),copy$1(pts[2],originalPoints[1]),fromSymbol&amp;&amp;"none"!==fromSymbol){var symbolSize=getSymbolSize(edge.node1),t=intersectCurveCircle(pts,originalPoints[0],symbolSize*scale2);quadraticSubdivide$1(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[0][0]=tmp0[3],pts[1][0]=tmp0[4],quadraticSubdivide$1(pts[0][1],pts[1][1],pts[2][1],t,tmp0),pts[0][1]=tmp0[3],pts[1][1]=tmp0[4]}if(toSymbol&amp;&amp;"none"!==toSymbol){symbolSize=getSymbolSize(edge.node2),t=intersectCurveCircle(pts,originalPoints[1],symbolSize*scale2);quadraticSubdivide$1(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[1][0]=tmp0[1],pts[2][0]=tmp0[2],quadraticSubdivide$1(pts[0][1],pts[1][1],pts[2][1],t,tmp0),pts[1][1]=tmp0[1],pts[2][1]=tmp0[2]}copy$1(linePoints[0],pts[0]),copy$1(linePoints[1],pts[2]),copy$1(linePoints[2],pts[1])}else{if(copy$1(pts2[0],originalPoints[0]),copy$1(pts2[1],originalPoints[1]),sub(v,pts2[1],pts2[0]),normalize$3(v,v),fromSymbol&amp;&amp;"none"!==fromSymbol){symbolSize=getSymbolSize(edge.node1);scaleAndAdd$1(pts2[0],pts2[0],v,symbolSize*scale2)}if(toSymbol&amp;&amp;"none"!==toSymbol){symbolSize=getSymbolSize(edge.node2);scaleAndAdd$1(pts2[1],pts2[1],v,-symbolSize*scale2)}copy$1(linePoints[0],pts2[0]),copy$1(linePoints[1],pts2[1])}})}function isViewCoordSys(coordSys){return"view"===coordSys.type}var GraphView=function(_super){function GraphView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GraphView2.type,_this}return __extends$1(GraphView2,_super),GraphView2.prototype.init=function(ecModel,api){var symbolDraw=new SymbolDraw,lineDraw=new LineDraw,group=this.group;this._controller=new RoamController(api.getZr()),this._controllerHost={target:group},group.add(symbolDraw.group),group.add(lineDraw.group),this._symbolDraw=symbolDraw,this._lineDraw=lineDraw,this._firstRender=!0},GraphView2.prototype.render=function(seriesModel,ecModel,api){var _this=this,coordSys=seriesModel.coordinateSystem;this._model=seriesModel;var symbolDraw=this._symbolDraw,lineDraw=this._lineDraw,group=this.group;if(isViewCoordSys(coordSys)){var groupNewProp={x:coordSys.x,y:coordSys.y,scaleX:coordSys.scaleX,scaleY:coordSys.scaleY};this._firstRender?group.attr(groupNewProp):updateProps$1(group,groupNewProp,seriesModel)}adjustEdge(seriesModel.getGraph(),getNodeGlobalScale(seriesModel));var data=seriesModel.getData();symbolDraw.updateData(data);var edgeData=seriesModel.getEdgeData();lineDraw.updateData(edgeData),this._updateNodeAndLinkScale(),this._updateController(seriesModel,ecModel,api),clearTimeout(this._layoutTimeout);var forceLayout2=seriesModel.forceLayout,layoutAnimation=seriesModel.get(["force","layoutAnimation"]);forceLayout2&amp;&amp;this._startForceLayoutIteration(forceLayout2,layoutAnimation);var layout2=seriesModel.get("layout");data.graph.eachNode(function(node){var idx=node.dataIndex,el=node.getGraphicEl(),itemModel=node.getModel();if(el){el.off("drag").off("dragend");var draggable=itemModel.get("draggable");draggable&amp;&amp;el.on("drag",function(e2){switch(layout2){case"force":forceLayout2.warmUp(),!_this._layouting&amp;&amp;_this._startForceLayoutIteration(forceLayout2,layoutAnimation),forceLayout2.setFixed(idx),data.setItemLayout(idx,[el.x,el.y]);break;case"circular":data.setItemLayout(idx,[el.x,el.y]),node.setLayout({fixed:!0},!0),circularLayout(seriesModel,"symbolSize",node,[e2.offsetX,e2.offsetY]),_this.updateLayout(seriesModel);break;default:data.setItemLayout(idx,[el.x,el.y]),simpleLayoutEdge(seriesModel.getGraph(),seriesModel),_this.updateLayout(seriesModel)}}).on("dragend",function(){forceLayout2&amp;&amp;forceLayout2.setUnfixed(idx)}),el.setDraggable(draggable,!!itemModel.get("cursor")),"adjacency"===itemModel.get(["emphasis","focus"])&amp;&amp;(getECData(el).focus=node.getAdjacentDataIndices())}}),data.graph.eachEdge(function(edge){var el=edge.getGraphicEl(),focus=edge.getModel().get(["emphasis","focus"]);el&amp;&amp;"adjacency"===focus&amp;&amp;(getECData(el).focus={edge:[edge.dataIndex],node:[edge.node1.dataIndex,edge.node2.dataIndex]})});var circularRotateLabel="circular"===seriesModel.get("layout")&amp;&amp;seriesModel.get(["circular","rotateLabel"]),cx=data.getLayout("cx"),cy=data.getLayout("cy");data.graph.eachNode(function(node){rotateNodeLabel(node,circularRotateLabel,cx,cy)}),this._firstRender=!1},GraphView2.prototype.dispose=function(){this.remove(),this._controller&amp;&amp;this._controller.dispose(),this._controllerHost=null},GraphView2.prototype._startForceLayoutIteration=function(forceLayout2,layoutAnimation){var self2=this;!function step(){forceLayout2.step(function(stopped){self2.updateLayout(self2._model),(self2._layouting=!stopped)&amp;&amp;(layoutAnimation?self2._layoutTimeout=setTimeout(step,16):step())})}()},GraphView2.prototype._updateController=function(seriesModel,ecModel,api){var _this=this,controller=this._controller,controllerHost=this._controllerHost,group=this.group;controller.setPointerChecker(function(e2,x,y){var rect=group.getBoundingRect();return rect.applyTransform(group.transform),rect.contain(x,y)&amp;&amp;!onIrrelevantElement(e2,api,seriesModel)}),isViewCoordSys(seriesModel.coordinateSystem)?(controller.enable(seriesModel.get("roam")),controllerHost.zoomLimit=seriesModel.get("scaleLimit"),controllerHost.zoom=seriesModel.coordinateSystem.getZoom(),controller.off("pan").off("zoom").on("pan",function(e2){updateViewOnPan(controllerHost,e2.dx,e2.dy),api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",dx:e2.dx,dy:e2.dy})}).on("zoom",function(e2){updateViewOnZoom(controllerHost,e2.scale,e2.originX,e2.originY),api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",zoom:e2.scale,originX:e2.originX,originY:e2.originY}),_this._updateNodeAndLinkScale(),adjustEdge(seriesModel.getGraph(),getNodeGlobalScale(seriesModel)),_this._lineDraw.updateLayout(),api.updateLabelLayout()})):controller.disable()},GraphView2.prototype._updateNodeAndLinkScale=function(){var seriesModel=this._model,data=seriesModel.getData(),nodeScale=getNodeGlobalScale(seriesModel);data.eachItemGraphicEl(function(el,idx){el&amp;&amp;el.setSymbolScale(nodeScale)})},GraphView2.prototype.updateLayout=function(seriesModel){adjustEdge(seriesModel.getGraph(),getNodeGlobalScale(seriesModel)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},GraphView2.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&amp;&amp;this._symbolDraw.remove(),this._lineDraw&amp;&amp;this._lineDraw.remove()},GraphView2.type="graph",GraphView2}(ChartView);function generateNodeKey(id){return"_EC_"+id}var Graph=function(){function Graph2(directed){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=directed||!1}return Graph2.prototype.isDirected=function(){return this._directed},Graph2.prototype.addNode=function(id,dataIndex){id=null==id?""+dataIndex:""+id;var nodesMap=this._nodesMap;if(!nodesMap[generateNodeKey(id)]){var node=new GraphNode(id,dataIndex);return node.hostGraph=this,this.nodes.push(node),nodesMap[generateNodeKey(id)]=node,node}},Graph2.prototype.getNodeByIndex=function(dataIndex){var rawIdx=this.data.getRawIndex(dataIndex);return this.nodes[rawIdx]},Graph2.prototype.getNodeById=function(id){return this._nodesMap[generateNodeKey(id)]},Graph2.prototype.addEdge=function(n1,n2,dataIndex){var nodesMap=this._nodesMap,edgesMap=this._edgesMap;if(isNumber(n1)&amp;&amp;(n1=this.nodes[n1]),isNumber(n2)&amp;&amp;(n2=this.nodes[n2]),n1 instanceof GraphNode||(n1=nodesMap[generateNodeKey(n1)]),n2 instanceof GraphNode||(n2=nodesMap[generateNodeKey(n2)]),n1&amp;&amp;n2){var key=n1.id+"-"+n2.id,edge=new GraphEdge(n1,n2,dataIndex);return edge.hostGraph=this,this._directed&amp;&amp;(n1.outEdges.push(edge),n2.inEdges.push(edge)),n1.edges.push(edge),n1!==n2&amp;&amp;n2.edges.push(edge),this.edges.push(edge),edgesMap[key]=edge,edge}},Graph2.prototype.getEdgeByIndex=function(dataIndex){var rawIdx=this.edgeData.getRawIndex(dataIndex);return this.edges[rawIdx]},Graph2.prototype.getEdge=function(n1,n2){n1 instanceof GraphNode&amp;&amp;(n1=n1.id),n2 instanceof GraphNode&amp;&amp;(n2=n2.id);var edgesMap=this._edgesMap;return this._directed?edgesMap[n1+"-"+n2]:edgesMap[n1+"-"+n2]||edgesMap[n2+"-"+n1]},Graph2.prototype.eachNode=function(cb,context){for(var nodes=this.nodes,len2=nodes.length,i=0;i&lt;len2;i++)nodes[i].dataIndex&gt;=0&amp;&amp;cb.call(context,nodes[i],i)},Graph2.prototype.eachEdge=function(cb,context){for(var edges=this.edges,len2=edges.length,i=0;i&lt;len2;i++)edges[i].dataIndex&gt;=0&amp;&amp;edges[i].node1.dataIndex&gt;=0&amp;&amp;edges[i].node2.dataIndex&gt;=0&amp;&amp;cb.call(context,edges[i],i)},Graph2.prototype.breadthFirstTraverse=function(cb,startNode,direction,context){if(startNode instanceof GraphNode||(startNode=this._nodesMap[generateNodeKey(startNode)]),startNode){for(var edgeType="out"===direction?"outEdges":"in"===direction?"inEdges":"edges",i=0;i&lt;this.nodes.length;i++)this.nodes[i].__visited=!1;if(!cb.call(context,startNode,null))for(var queue=[startNode];queue.length;){var currentNode=queue.shift(),edges=currentNode[edgeType];for(i=0;i&lt;edges.length;i++){var e2=edges[i],otherNode=e2.node1===currentNode?e2.node2:e2.node1;if(!otherNode.__visited){if(cb.call(context,otherNode,currentNode))return;queue.push(otherNode),otherNode.__visited=!0}}}}},Graph2.prototype.update=function(){for(var data=this.data,edgeData=this.edgeData,nodes=this.nodes,edges=this.edges,i=0,len2=nodes.length;i&lt;len2;i++)nodes[i].dataIndex=-1;for(i=0,len2=data.count();i&lt;len2;i++)nodes[data.getRawIndex(i)].dataIndex=i;edgeData.filterSelf(function(idx){var edge=edges[edgeData.getRawIndex(idx)];return edge.node1.dataIndex&gt;=0&amp;&amp;edge.node2.dataIndex&gt;=0});for(i=0,len2=edges.length;i&lt;len2;i++)edges[i].dataIndex=-1;for(i=0,len2=edgeData.count();i&lt;len2;i++)edges[edgeData.getRawIndex(i)].dataIndex=i},Graph2.prototype.clone=function(){for(var graph=new Graph2(this._directed),nodes=this.nodes,edges=this.edges,i=0;i&lt;nodes.length;i++)graph.addNode(nodes[i].id,nodes[i].dataIndex);for(i=0;i&lt;edges.length;i++){var e2=edges[i];graph.addEdge(e2.node1.id,e2.node2.id,e2.dataIndex)}return graph},Graph2}(),GraphNode=function(){function GraphNode2(id,dataIndex){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==id?"":id,this.dataIndex=null==dataIndex?-1:dataIndex}return GraphNode2.prototype.degree=function(){return this.edges.length},GraphNode2.prototype.inDegree=function(){return this.inEdges.length},GraphNode2.prototype.outDegree=function(){return this.outEdges.length},GraphNode2.prototype.getModel=function(path){if(!(this.dataIndex&lt;0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(path)},GraphNode2.prototype.getAdjacentDataIndices=function(){for(var dataIndices={edge:[],node:[]},i=0;i&lt;this.edges.length;i++){var adjacentEdge=this.edges[i];adjacentEdge.dataIndex&lt;0||(dataIndices.edge.push(adjacentEdge.dataIndex),dataIndices.node.push(adjacentEdge.node1.dataIndex,adjacentEdge.node2.dataIndex))}return dataIndices},GraphNode2.prototype.getTrajectoryDataIndices=function(){for(var connectedEdgesMap=createHashMap(),connectedNodesMap=createHashMap(),i=0;i&lt;this.edges.length;i++){var adjacentEdge=this.edges[i];if(!(adjacentEdge.dataIndex&lt;0)){connectedEdgesMap.set(adjacentEdge.dataIndex,!0);for(var sourceNodesQueue=[adjacentEdge.node1],targetNodesQueue=[adjacentEdge.node2],nodeIteratorIndex=0;nodeIteratorIndex&lt;sourceNodesQueue.length;){var sourceNode=sourceNodesQueue[nodeIteratorIndex];nodeIteratorIndex++,connectedNodesMap.set(sourceNode.dataIndex,!0);for(var j=0;j&lt;sourceNode.inEdges.length;j++)connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex,!0),sourceNodesQueue.push(sourceNode.inEdges[j].node1)}for(nodeIteratorIndex=0;nodeIteratorIndex&lt;targetNodesQueue.length;){var targetNode=targetNodesQueue[nodeIteratorIndex];nodeIteratorIndex++,connectedNodesMap.set(targetNode.dataIndex,!0);for(j=0;j&lt;targetNode.outEdges.length;j++)connectedEdgesMap.set(targetNode.outEdges[j].dataIndex,!0),targetNodesQueue.push(targetNode.outEdges[j].node2)}}}return{edge:connectedEdgesMap.keys(),node:connectedNodesMap.keys()}},GraphNode2}(),GraphEdge=function(){function GraphEdge2(n1,n2,dataIndex){this.dataIndex=-1,this.node1=n1,this.node2=n2,this.dataIndex=null==dataIndex?-1:dataIndex}return GraphEdge2.prototype.getModel=function(path){if(!(this.dataIndex&lt;0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(path)},GraphEdge2.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},GraphEdge2.prototype.getTrajectoryDataIndices=function(){var connectedEdgesMap=createHashMap(),connectedNodesMap=createHashMap();connectedEdgesMap.set(this.dataIndex,!0);for(var sourceNodes=[this.node1],targetNodes=[this.node2],nodeIteratorIndex=0;nodeIteratorIndex&lt;sourceNodes.length;){var sourceNode=sourceNodes[nodeIteratorIndex];nodeIteratorIndex++,connectedNodesMap.set(sourceNode.dataIndex,!0);for(var j=0;j&lt;sourceNode.inEdges.length;j++)connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex,!0),sourceNodes.push(sourceNode.inEdges[j].node1)}for(nodeIteratorIndex=0;nodeIteratorIndex&lt;targetNodes.length;){var targetNode=targetNodes[nodeIteratorIndex];nodeIteratorIndex++,connectedNodesMap.set(targetNode.dataIndex,!0);for(j=0;j&lt;targetNode.outEdges.length;j++)connectedEdgesMap.set(targetNode.outEdges[j].dataIndex,!0),targetNodes.push(targetNode.outEdges[j].node2)}return{edge:connectedEdgesMap.keys(),node:connectedNodesMap.keys()}},GraphEdge2}();function createGraphDataProxyMixin(hostName,dataName){return{getValue:function(dimension){var data=this[hostName][dataName];return data.getStore().get(data.getDimensionIndex(dimension||"value"),this.dataIndex)},setVisual:function(key,value){this.dataIndex&gt;=0&amp;&amp;this[hostName][dataName].setItemVisual(this.dataIndex,key,value)},getVisual:function(key){return this[hostName][dataName].getItemVisual(this.dataIndex,key)},setLayout:function(layout2,merge2){this.dataIndex&gt;=0&amp;&amp;this[hostName][dataName].setItemLayout(this.dataIndex,layout2,merge2)},getLayout:function(){return this[hostName][dataName].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[hostName][dataName].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[hostName][dataName].getRawIndex(this.dataIndex)}}}function createGraphFromNodeEdge(nodes,edges,seriesModel,directed,beforeLink){for(var graph=new Graph(directed),i=0;i&lt;nodes.length;i++)graph.addNode(retrieve(nodes[i].id,nodes[i].name,i),i);var linkNameList=[],validEdges=[],linkCount=0;for(i=0;i&lt;edges.length;i++){var link=edges[i],source=link.source,target=link.target;graph.addEdge(source,target,linkCount)&amp;&amp;(validEdges.push(link),linkNameList.push(retrieve(convertOptionIdName(link.id,null),source+" &gt; "+target)),linkCount++)}var nodeData,coordSys=seriesModel.get("coordinateSystem");if("cartesian2d"===coordSys||"polar"===coordSys)nodeData=createSeriesData(nodes,seriesModel);else{var coordSysCtor=CoordinateSystemManager.get(coordSys),coordDimensions=coordSysCtor&amp;&amp;coordSysCtor.dimensions||[];indexOf(coordDimensions,"value")&lt;0&amp;&amp;coordDimensions.concat(["value"]);var dimensions=prepareSeriesDataSchema(nodes,{coordDimensions:coordDimensions,encodeDefine:seriesModel.getEncode()}).dimensions;(nodeData=new SeriesData(dimensions,seriesModel)).initData(nodes)}var edgeData=new SeriesData(["value"],seriesModel);return edgeData.initData(validEdges,linkNameList),beforeLink&amp;&amp;beforeLink(nodeData,edgeData),linkSeriesData({mainData:nodeData,struct:graph,structAttr:"graph",datas:{node:nodeData,edge:edgeData},datasAttr:{node:"data",edge:"edgeData"}}),graph.update(),graph}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data")),mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));var GraphSeriesModel=function(_super){function GraphSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GraphSeriesModel2.type,_this.hasSymbolVisual=!0,_this}return __extends$1(GraphSeriesModel2,_super),GraphSeriesModel2.prototype.init=function(option){_super.prototype.init.apply(this,arguments);var self2=this;function getCategoriesData(){return self2._categoriesData}this.legendVisualProvider=new LegendVisualProvider(getCategoriesData,getCategoriesData),this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData()},GraphSeriesModel2.prototype.mergeOption=function(option){_super.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData()},GraphSeriesModel2.prototype.mergeDefaultAndTheme=function(option){_super.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(option,"edgeLabel",["show"])},GraphSeriesModel2.prototype.getInitialData=function(option,ecModel){var edges=option.edges||option.links||[],nodes=option.data||option.nodes||[],self2=this;if(nodes&amp;&amp;edges){!function initCurvenessList(seriesModel){getAutoCurvenessParams(seriesModel)&amp;&amp;(seriesModel.__curvenessList=[],seriesModel.__edgeMap={},createCurveness(seriesModel))}(this);var graph=createGraphFromNodeEdge(nodes,edges,this,!0,function beforeLink(nodeData,edgeData){nodeData.wrapMethod("getItemModel",function(model){var categoryModel=self2._categoriesModels[model.getShallow("category")];return categoryModel&amp;&amp;(categoryModel.parentModel=model.parentModel,model.parentModel=categoryModel),model});var oldGetModel=Model.prototype.getModel;function newGetModel(path,parentModel){var model=oldGetModel.call(this,path,parentModel);return model.resolveParentPath=resolveParentPath,model}function resolveParentPath(pathArr){if(pathArr&amp;&amp;("label"===pathArr[0]||"label"===pathArr[1])){var newPathArr=pathArr.slice();return"label"===pathArr[0]?newPathArr[0]="edgeLabel":"label"===pathArr[1]&amp;&amp;(newPathArr[1]="edgeLabel"),newPathArr}return pathArr}edgeData.wrapMethod("getItemModel",function(model){return model.resolveParentPath=resolveParentPath,model.getModel=newGetModel,model})});return each$f(graph.edges,function(edge){!function createEdgeMapForCurveness(n1,n2,seriesModel,index){if(getAutoCurvenessParams(seriesModel)){var key=getKeyOfEdges(n1,n2,seriesModel),edgeMap=seriesModel.__edgeMap,oppositeEdges=edgeMap[getOppositeKey(key)];edgeMap[key]&amp;&amp;!oppositeEdges?edgeMap[key].isForward=!0:oppositeEdges&amp;&amp;edgeMap[key]&amp;&amp;(oppositeEdges.isForward=!0,edgeMap[key].isForward=!1),edgeMap[key]=edgeMap[key]||[],edgeMap[key].push(index)}}(edge.node1,edge.node2,this,edge.dataIndex)},this),graph.data}},GraphSeriesModel2.prototype.getGraph=function(){return this.getData().graph},GraphSeriesModel2.prototype.getEdgeData=function(){return this.getGraph().edgeData},GraphSeriesModel2.prototype.getCategoriesData=function(){return this._categoriesData},GraphSeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){if("edge"===dataType){var nodeData=this.getData(),params=this.getDataParams(dataIndex,dataType),edge=nodeData.graph.getEdgeByIndex(dataIndex),sourceName=nodeData.getName(edge.node1.dataIndex),targetName=nodeData.getName(edge.node2.dataIndex),nameArr=[];return null!=sourceName&amp;&amp;nameArr.push(sourceName),null!=targetName&amp;&amp;nameArr.push(targetName),createTooltipMarkup("nameValue",{name:nameArr.join(" &gt; "),value:params.value,noValue:null==params.value})}return defaultSeriesFormatTooltip({series:this,dataIndex:dataIndex,multipleSeries:multipleSeries})},GraphSeriesModel2.prototype._updateCategoriesData=function(){var categories=map$1(this.option.categories||[],function(category){return null!=category.value?category:extend({value:0},category)}),categoriesData=new SeriesData(["value"],this);categoriesData.initData(categories),this._categoriesData=categoriesData,this._categoriesModels=categoriesData.mapArray(function(idx){return categoriesData.getItemModel(idx)})},GraphSeriesModel2.prototype.setZoom=function(zoom){this.option.zoom=zoom},GraphSeriesModel2.prototype.setCenter=function(center2){this.option.center=center2},GraphSeriesModel2.prototype.isAnimationEnabled=function(){return _super.prototype.isAnimationEnabled.call(this)&amp;&amp;!("force"===this.get("layout")&amp;&amp;this.get(["force","layoutAnimation"]))},GraphSeriesModel2.type="series.graph",GraphSeriesModel2.dependencies=["grid","polar","geo","singleAxis","calendar"],GraphSeriesModel2.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},GraphSeriesModel2}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};var PointerShape=function(){return function PointerShape2(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}}(),PointerPath=function(_super){function PointerPath2(opts){var _this=_super.call(this,opts)||this;return _this.type="pointer",_this}return __extends$1(PointerPath2,_super),PointerPath2.prototype.getDefaultShape=function(){return new PointerShape},PointerPath2.prototype.buildPath=function(ctx,shape){var mathCos2=Math.cos,mathSin2=Math.sin,r=shape.r,width=shape.width,angle=shape.angle,x=shape.x-mathCos2(angle)*width*(width&gt;=r/3?1:2),y=shape.y-mathSin2(angle)*width*(width&gt;=r/3?1:2);angle=shape.angle-Math.PI/2,ctx.moveTo(x,y),ctx.lineTo(shape.x+mathCos2(angle)*width,shape.y+mathSin2(angle)*width),ctx.lineTo(shape.x+mathCos2(shape.angle)*r,shape.y+mathSin2(shape.angle)*r),ctx.lineTo(shape.x-mathCos2(angle)*width,shape.y-mathSin2(angle)*width),ctx.lineTo(x,y)},PointerPath2}(Path);function formatLabel(value,labelFormatter){var label=null==value?"":value+"";return labelFormatter&amp;&amp;(isString(labelFormatter)?label=labelFormatter.replace("{value}",label):isFunction(labelFormatter)&amp;&amp;(label=labelFormatter(value))),label}var GaugeView=function(_super){function GaugeView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GaugeView2.type,_this}return __extends$1(GaugeView2,_super),GaugeView2.prototype.render=function(seriesModel,ecModel,api){this.group.removeAll();var colorList=seriesModel.get(["axisLine","lineStyle","color"]),posInfo=function parsePosition(seriesModel,api){var center2=seriesModel.get("center"),width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height);return{cx:parsePercent(center2[0],api.getWidth()),cy:parsePercent(center2[1],api.getHeight()),r:parsePercent(seriesModel.get("radius"),size/2)}}(seriesModel,api);this._renderMain(seriesModel,ecModel,api,colorList,posInfo),this._data=seriesModel.getData()},GaugeView2.prototype.dispose=function(){},GaugeView2.prototype._renderMain=function(seriesModel,ecModel,api,colorList,posInfo){var group=this.group,clockwise=seriesModel.get("clockwise"),startAngle=-seriesModel.get("startAngle")/180*Math.PI,endAngle=-seriesModel.get("endAngle")/180*Math.PI,axisLineModel=seriesModel.getModel("axisLine"),MainPath=axisLineModel.get("roundCap")?SausagePath:Sector,showAxis=axisLineModel.get("show"),lineStyleModel=axisLineModel.getModel("lineStyle"),axisLineWidth=lineStyleModel.get("width"),angles=[startAngle,endAngle];normalizeArcAngles(angles,!clockwise);for(var angleRangeSpan=(endAngle=angles[1])-(startAngle=angles[0]),prevEndAngle=startAngle,sectors=[],i=0;showAxis&amp;&amp;i&lt;colorList.length;i++){var sector=new MainPath({shape:{startAngle:prevEndAngle,endAngle:endAngle=startAngle+angleRangeSpan*Math.min(Math.max(colorList[i][0],0),1),cx:posInfo.cx,cy:posInfo.cy,clockwise:clockwise,r0:posInfo.r-axisLineWidth,r:posInfo.r},silent:!0});sector.setStyle({fill:colorList[i][1]}),sector.setStyle(lineStyleModel.getLineStyle(["color","width"])),sectors.push(sector),prevEndAngle=endAngle}sectors.reverse(),each$f(sectors,function(sector2){return group.add(sector2)});var getColor2=function(percent2){if(percent2&lt;=0)return colorList[0][1];var i2;for(i2=0;i2&lt;colorList.length;i2++)if(colorList[i2][0]&gt;=percent2&amp;&amp;(0===i2?0:colorList[i2-1][0])&lt;percent2)return colorList[i2][1];return colorList[i2-1][1]};this._renderTicks(seriesModel,ecModel,api,getColor2,posInfo,startAngle,endAngle,clockwise,axisLineWidth),this._renderTitleAndDetail(seriesModel,ecModel,api,getColor2,posInfo),this._renderAnchor(seriesModel,posInfo),this._renderPointer(seriesModel,ecModel,api,getColor2,posInfo,startAngle,endAngle,clockwise,axisLineWidth)},GaugeView2.prototype._renderTicks=function(seriesModel,ecModel,api,getColor2,posInfo,startAngle,endAngle,clockwise,axisLineWidth){for(var unitX,unitY,group=this.group,cx=posInfo.cx,cy=posInfo.cy,r=posInfo.r,minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max"),splitLineModel=seriesModel.getModel("splitLine"),tickModel=seriesModel.getModel("axisTick"),labelModel=seriesModel.getModel("axisLabel"),splitNumber=seriesModel.get("splitNumber"),subSplitNumber=tickModel.get("splitNumber"),splitLineLen=parsePercent(splitLineModel.get("length"),r),tickLen=parsePercent(tickModel.get("length"),r),angle=startAngle,step=(endAngle-startAngle)/splitNumber,subStep=step/subSplitNumber,splitLineStyle=splitLineModel.getModel("lineStyle").getLineStyle(),tickLineStyle=tickModel.getModel("lineStyle").getLineStyle(),splitLineDistance=splitLineModel.get("distance"),i=0;i&lt;=splitNumber;i++){if(unitX=Math.cos(angle),unitY=Math.sin(angle),splitLineModel.get("show")){var splitLine=new Line$1({shape:{x1:unitX*(r-(distance2=splitLineDistance?splitLineDistance+axisLineWidth:axisLineWidth))+cx,y1:unitY*(r-distance2)+cy,x2:unitX*(r-splitLineLen-distance2)+cx,y2:unitY*(r-splitLineLen-distance2)+cy},style:splitLineStyle,silent:!0});"auto"===splitLineStyle.stroke&amp;&amp;splitLine.setStyle({stroke:getColor2(i/splitNumber)}),group.add(splitLine)}if(labelModel.get("show")){var distance2=labelModel.get("distance")+splitLineDistance,label=formatLabel(round$3(i/splitNumber*(maxVal-minVal)+minVal),labelModel.get("formatter")),autoColor=getColor2(i/splitNumber),textStyleX=unitX*(r-splitLineLen-distance2)+cx,textStyleY=unitY*(r-splitLineLen-distance2)+cy,rotateType=labelModel.get("rotate"),rotate2=0;"radial"===rotateType?(rotate2=-angle+2*Math.PI)&gt;Math.PI/2&amp;&amp;(rotate2+=Math.PI):"tangential"===rotateType?rotate2=-angle-Math.PI/2:isNumber(rotateType)&amp;&amp;(rotate2=rotateType*Math.PI/180),0===rotate2?group.add(new ZRText({style:createTextStyle$1(labelModel,{text:label,x:textStyleX,y:textStyleY,verticalAlign:unitY&lt;-.8?"top":unitY&gt;.8?"bottom":"middle",align:unitX&lt;-.4?"left":unitX&gt;.4?"right":"center"},{inheritColor:autoColor}),silent:!0})):group.add(new ZRText({style:createTextStyle$1(labelModel,{text:label,x:textStyleX,y:textStyleY,verticalAlign:"middle",align:"center"},{inheritColor:autoColor}),silent:!0,originX:textStyleX,originY:textStyleY,rotation:rotate2}))}if(tickModel.get("show")&amp;&amp;i!==splitNumber){distance2=(distance2=tickModel.get("distance"))?distance2+axisLineWidth:axisLineWidth;for(var j=0;j&lt;=subSplitNumber;j++){unitX=Math.cos(angle),unitY=Math.sin(angle);var tickLine=new Line$1({shape:{x1:unitX*(r-distance2)+cx,y1:unitY*(r-distance2)+cy,x2:unitX*(r-tickLen-distance2)+cx,y2:unitY*(r-tickLen-distance2)+cy},silent:!0,style:tickLineStyle});"auto"===tickLineStyle.stroke&amp;&amp;tickLine.setStyle({stroke:getColor2((i+j/subSplitNumber)/splitNumber)}),group.add(tickLine),angle+=subStep}angle-=subStep}else angle+=step}},GaugeView2.prototype._renderPointer=function(seriesModel,ecModel,api,getColor2,posInfo,startAngle,endAngle,clockwise,axisLineWidth){var group=this.group,oldData=this._data,oldProgressData=this._progressEls,progressList=[],showPointer2=seriesModel.get(["pointer","show"]),progressModel=seriesModel.getModel("progress"),showProgress=progressModel.get("show"),data=seriesModel.getData(),valueDim=data.mapDimension("value"),minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max"),valueExtent=[minVal,maxVal],angleExtent=[startAngle,endAngle];function createPointer(idx,angle){var pointer,pointerModel=data.getItemModel(idx).getModel("pointer"),pointerWidth=parsePercent(pointerModel.get("width"),posInfo.r),pointerLength=parsePercent(pointerModel.get("length"),posInfo.r),pointerStr=seriesModel.get(["pointer","icon"]),pointerOffset=pointerModel.get("offsetCenter"),pointerOffsetX=parsePercent(pointerOffset[0],posInfo.r),pointerOffsetY=parsePercent(pointerOffset[1],posInfo.r),pointerKeepAspect=pointerModel.get("keepAspect");return(pointer=pointerStr?createSymbol$1(pointerStr,pointerOffsetX-pointerWidth/2,pointerOffsetY-pointerLength,pointerWidth,pointerLength,null,pointerKeepAspect):new PointerPath({shape:{angle:-Math.PI/2,width:pointerWidth,r:pointerLength,x:pointerOffsetX,y:pointerOffsetY}})).rotation=-(angle+Math.PI/2),pointer.x=posInfo.cx,pointer.y=posInfo.cy,pointer}function createProgress(idx,endAngle2){var ProgressPath=progressModel.get("roundCap")?SausagePath:Sector,isOverlap=progressModel.get("overlap"),progressWidth=isOverlap?progressModel.get("width"):axisLineWidth/data.count(),r0=isOverlap?posInfo.r-progressWidth:posInfo.r-(idx+1)*progressWidth,r=isOverlap?posInfo.r:posInfo.r-idx*progressWidth,progress=new ProgressPath({shape:{startAngle:startAngle,endAngle:endAngle2,cx:posInfo.cx,cy:posInfo.cy,clockwise:clockwise,r0:r0,r:r}});return isOverlap&amp;&amp;(progress.z2=linearMap$2(data.get(valueDim,idx),[minVal,maxVal],[100,0],!0)),progress}(showProgress||showPointer2)&amp;&amp;(data.diff(oldData).add(function(idx){var val=data.get(valueDim,idx);if(showPointer2){var pointer=createPointer(idx,startAngle);initProps(pointer,{rotation:-((isNaN(+val)?angleExtent[0]:linearMap$2(val,valueExtent,angleExtent,!0))+Math.PI/2)},seriesModel),group.add(pointer),data.setItemGraphicEl(idx,pointer)}if(showProgress){var progress=createProgress(idx,startAngle),isClip=progressModel.get("clip");initProps(progress,{shape:{endAngle:linearMap$2(val,valueExtent,angleExtent,isClip)}},seriesModel),group.add(progress),setCommonECData(seriesModel.seriesIndex,data.dataType,idx,progress),progressList[idx]=progress}}).update(function(newIdx,oldIdx){var val=data.get(valueDim,newIdx);if(showPointer2){var previousPointer=oldData.getItemGraphicEl(oldIdx),previousRotate=previousPointer?previousPointer.rotation:startAngle,pointer=createPointer(newIdx,previousRotate);pointer.rotation=previousRotate,updateProps$1(pointer,{rotation:-((isNaN(+val)?angleExtent[0]:linearMap$2(val,valueExtent,angleExtent,!0))+Math.PI/2)},seriesModel),group.add(pointer),data.setItemGraphicEl(newIdx,pointer)}if(showProgress){var previousProgress=oldProgressData[oldIdx],progress=createProgress(newIdx,previousProgress?previousProgress.shape.endAngle:startAngle),isClip=progressModel.get("clip");updateProps$1(progress,{shape:{endAngle:linearMap$2(val,valueExtent,angleExtent,isClip)}},seriesModel),group.add(progress),setCommonECData(seriesModel.seriesIndex,data.dataType,newIdx,progress),progressList[newIdx]=progress}}).execute(),data.each(function(idx){var itemModel=data.getItemModel(idx),emphasisModel=itemModel.getModel("emphasis"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),emphasisDisabled=emphasisModel.get("disabled");if(showPointer2){var pointer=data.getItemGraphicEl(idx),symbolStyle=data.getItemVisual(idx,"style"),visualColor=symbolStyle.fill;if(pointer instanceof ZRImage){var pathStyle=pointer.style;pointer.useStyle(extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},symbolStyle))}else pointer.useStyle(symbolStyle),"pointer"!==pointer.type&amp;&amp;pointer.setColor(visualColor);pointer.setStyle(itemModel.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===pointer.style.fill&amp;&amp;pointer.setStyle("fill",getColor2(linearMap$2(data.get(valueDim,idx),valueExtent,[0,1],!0))),pointer.z2EmphasisLift=0,setStatesStylesFromModel(pointer,itemModel),toggleHoverEmphasis(pointer,focus,blurScope,emphasisDisabled)}if(showProgress){var progress=progressList[idx];progress.useStyle(data.getItemVisual(idx,"style")),progress.setStyle(itemModel.getModel(["progress","itemStyle"]).getItemStyle()),progress.z2EmphasisLift=0,setStatesStylesFromModel(progress,itemModel),toggleHoverEmphasis(progress,focus,blurScope,emphasisDisabled)}}),this._progressEls=progressList)},GaugeView2.prototype._renderAnchor=function(seriesModel,posInfo){var anchorModel=seriesModel.getModel("anchor");if(anchorModel.get("show")){var anchorSize=anchorModel.get("size"),anchorType=anchorModel.get("icon"),offsetCenter=anchorModel.get("offsetCenter"),anchorKeepAspect=anchorModel.get("keepAspect"),anchor=createSymbol$1(anchorType,posInfo.cx-anchorSize/2+parsePercent(offsetCenter[0],posInfo.r),posInfo.cy-anchorSize/2+parsePercent(offsetCenter[1],posInfo.r),anchorSize,anchorSize,null,anchorKeepAspect);anchor.z2=anchorModel.get("showAbove")?1:0,anchor.setStyle(anchorModel.getModel("itemStyle").getItemStyle()),this.group.add(anchor)}},GaugeView2.prototype._renderTitleAndDetail=function(seriesModel,ecModel,api,getColor2,posInfo){var _this=this,data=seriesModel.getData(),valueDim=data.mapDimension("value"),minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max"),contentGroup=new Group$3,newTitleEls=[],newDetailEls=[],hasAnimation=seriesModel.isAnimationEnabled(),showPointerAbove=seriesModel.get(["pointer","showAbove"]);data.diff(this._data).add(function(idx){newTitleEls[idx]=new ZRText({silent:!0}),newDetailEls[idx]=new ZRText({silent:!0})}).update(function(idx,oldIdx){newTitleEls[idx]=_this._titleEls[oldIdx],newDetailEls[idx]=_this._detailEls[oldIdx]}).execute(),data.each(function(idx){var itemModel=data.getItemModel(idx),value=data.get(valueDim,idx),itemGroup=new Group$3,autoColor=getColor2(linearMap$2(value,[minVal,maxVal],[0,1],!0)),itemTitleModel=itemModel.getModel("title");if(itemTitleModel.get("show")){var titleOffsetCenter=itemTitleModel.get("offsetCenter"),titleX=posInfo.cx+parsePercent(titleOffsetCenter[0],posInfo.r),titleY=posInfo.cy+parsePercent(titleOffsetCenter[1],posInfo.r);(labelEl=newTitleEls[idx]).attr({z2:showPointerAbove?0:2,style:createTextStyle$1(itemTitleModel,{x:titleX,y:titleY,text:data.getName(idx),align:"center",verticalAlign:"middle"},{inheritColor:autoColor})}),itemGroup.add(labelEl)}var itemDetailModel=itemModel.getModel("detail");if(itemDetailModel.get("show")){var detailOffsetCenter=itemDetailModel.get("offsetCenter"),detailX=posInfo.cx+parsePercent(detailOffsetCenter[0],posInfo.r),detailY=posInfo.cy+parsePercent(detailOffsetCenter[1],posInfo.r),width=parsePercent(itemDetailModel.get("width"),posInfo.r),height=parsePercent(itemDetailModel.get("height"),posInfo.r),detailColor=seriesModel.get(["progress","show"])?data.getItemVisual(idx,"style").fill:autoColor,labelEl=newDetailEls[idx],formatter_1=itemDetailModel.get("formatter");labelEl.attr({z2:showPointerAbove?0:2,style:createTextStyle$1(itemDetailModel,{x:detailX,y:detailY,text:formatLabel(value,formatter_1),width:isNaN(width)?null:width,height:isNaN(height)?null:height,align:"center",verticalAlign:"middle"},{inheritColor:detailColor})}),setLabelValueAnimation(labelEl,{normal:itemDetailModel},value,function(value2){return formatLabel(value2,formatter_1)}),hasAnimation&amp;&amp;animateLabelValue(labelEl,idx,data,seriesModel,{getFormattedLabel:function(labelDataIndex,status,dataType,labelDimIndex,fmt,extendParams){return formatLabel(extendParams?extendParams.interpolatedValue:value,formatter_1)}}),itemGroup.add(labelEl)}contentGroup.add(itemGroup)}),this.group.add(contentGroup),this._titleEls=newTitleEls,this._detailEls=newDetailEls},GaugeView2.type="gauge",GaugeView2}(ChartView),GaugeSeriesModel=function(_super){function GaugeSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GaugeSeriesModel2.type,_this.visualStyleAccessPath="itemStyle",_this}return __extends$1(GaugeSeriesModel2,_super),GaugeSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesDataSimply(this,["value"])},GaugeSeriesModel2.type="series.gauge",GaugeSeriesModel2.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},GaugeSeriesModel2}(SeriesModel);var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(_super){function FunnelPiece2(data,idx){var _this=_super.call(this)||this,polygon=_this,labelLine=new Polyline$1,text=new ZRText;return polygon.setTextContent(text),_this.setTextGuideLine(labelLine),_this.updateData(data,idx,!0),_this}return __extends$1(FunnelPiece2,_super),FunnelPiece2.prototype.updateData=function(data,idx,firstCreate){var seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout2=data.getItemLayout(idx),emphasisModel=itemModel.getModel("emphasis"),opacity=itemModel.get(opacityAccessPath$1);opacity=null==opacity?1:opacity,firstCreate||saveOldStyle(this),this.useStyle(data.getItemVisual(idx,"style")),this.style.lineJoin="round",firstCreate?(this.setShape({points:layout2.points}),this.style.opacity=0,initProps(this,{style:{opacity:opacity}},seriesModel,idx)):updateProps$1(this,{style:{opacity:opacity},shape:{points:layout2.points}},seriesModel,idx),setStatesStylesFromModel(this,itemModel),this._updateLabel(data,idx),toggleHoverEmphasis(this,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))},FunnelPiece2.prototype._updateLabel=function(data,idx){var labelLine=this.getTextGuideLine(),labelText=this.getTextContent(),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),labelLayout2=data.getItemLayout(idx).label,style=data.getItemVisual(idx,"style"),visualColor=style.fill;setLabelStyle(labelText,getLabelStatesModels(itemModel),{labelFetcher:data.hostModel,labelDataIndex:idx,defaultOpacity:style.opacity,defaultText:data.getName(idx)},{normal:{align:labelLayout2.textAlign,verticalAlign:labelLayout2.verticalAlign}}),this.setTextConfig({local:!0,inside:!!labelLayout2.inside,insideStroke:visualColor,outsideFill:visualColor});var linePoints=labelLayout2.linePoints;labelLine.setShape({points:linePoints}),this.textGuideLineConfig={anchor:linePoints?new Point(linePoints[0][0],linePoints[0][1]):null},updateProps$1(labelText,{style:{x:labelLayout2.x,y:labelLayout2.y}},seriesModel,idx),labelText.attr({rotation:labelLayout2.rotation,originX:labelLayout2.x,originY:labelLayout2.y,z2:10}),setLabelLineStyle(this,getLabelLineStatesModels(itemModel),{stroke:visualColor})},FunnelPiece2}(Polygon),FunnelView=function(_super){function FunnelView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=FunnelView2.type,_this.ignoreLabelLineUpdate=!0,_this}return __extends$1(FunnelView2,_super),FunnelView2.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),oldData=this._data,group=this.group;data.diff(oldData).add(function(idx){var funnelPiece=new FunnelPiece(data,idx);data.setItemGraphicEl(idx,funnelPiece),group.add(funnelPiece)}).update(function(newIdx,oldIdx){var piece=oldData.getItemGraphicEl(oldIdx);piece.updateData(data,newIdx),group.add(piece),data.setItemGraphicEl(newIdx,piece)}).remove(function(idx){removeElementWithFadeOut(oldData.getItemGraphicEl(idx),seriesModel,idx)}).execute(),this._data=data},FunnelView2.prototype.remove=function(){this.group.removeAll(),this._data=null},FunnelView2.prototype.dispose=function(){},FunnelView2.type="funnel",FunnelView2}(ChartView),FunnelSeriesModel=function(_super){function FunnelSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=FunnelSeriesModel2.type,_this}return __extends$1(FunnelSeriesModel2,_super),FunnelSeriesModel2.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(option)},FunnelSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},FunnelSeriesModel2.prototype._defaultLabelLine=function(option){defaultEmphasis(option,"labelLine",["show"]);var labelLineNormalOpt=option.labelLine,labelLineEmphasisOpt=option.emphasis.labelLine;labelLineNormalOpt.show=labelLineNormalOpt.show&amp;&amp;option.label.show,labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&amp;&amp;option.emphasis.label.show},FunnelSeriesModel2.prototype.getDataParams=function(dataIndex){var data=this.getData(),params=_super.prototype.getDataParams.call(this,dataIndex),valueDim=data.mapDimension("value"),sum2=data.getSum(valueDim);return params.percent=sum2?+(data.get(valueDim,dataIndex)/sum2*100).toFixed(2):0,params.$vars.push("percent"),params},FunnelSeriesModel2.type="series.funnel",FunnelSeriesModel2.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},FunnelSeriesModel2}(SeriesModel);function funnelLayout(ecModel,api){ecModel.eachSeriesByType("funnel",function(seriesModel){var data=seriesModel.getData(),valueDim=data.mapDimension("value"),sort2=seriesModel.get("sort"),viewRect2=function getViewRect$2(seriesModel,api){return getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}(seriesModel,api),orient=seriesModel.get("orient"),viewWidth=viewRect2.width,viewHeight=viewRect2.height,indices=function getSortedIndices(data,sort2){for(var valueDim=data.mapDimension("value"),valueArr=data.mapArray(valueDim,function(val){return val}),indices=[],isAscending="ascending"===sort2,i=0,len2=data.count();i&lt;len2;i++)indices[i]=i;return isFunction(sort2)?indices.sort(sort2):"none"!==sort2&amp;&amp;indices.sort(function(a,b){return isAscending?valueArr[a]-valueArr[b]:valueArr[b]-valueArr[a]}),indices}(data,sort2),x=viewRect2.x,y=viewRect2.y,sizeExtent="horizontal"===orient?[parsePercent(seriesModel.get("minSize"),viewHeight),parsePercent(seriesModel.get("maxSize"),viewHeight)]:[parsePercent(seriesModel.get("minSize"),viewWidth),parsePercent(seriesModel.get("maxSize"),viewWidth)],dataExtent=data.getDataExtent(valueDim),min3=seriesModel.get("min"),max3=seriesModel.get("max");null==min3&amp;&amp;(min3=Math.min(dataExtent[0],0)),null==max3&amp;&amp;(max3=dataExtent[1]);var funnelAlign=seriesModel.get("funnelAlign"),gap=seriesModel.get("gap"),itemSize=(("horizontal"===orient?viewWidth:viewHeight)-gap*(data.count()-1))/data.count(),getLinePoints=function(idx2,offset){if("horizontal"===orient){var itemHeight=linearMap$2(data.get(valueDim,idx2)||0,[min3,max3],sizeExtent,!0),y0=void 0;switch(funnelAlign){case"top":y0=y;break;case"center":y0=y+(viewHeight-itemHeight)/2;break;case"bottom":y0=y+(viewHeight-itemHeight)}return[[offset,y0],[offset,y0+itemHeight]]}var x0,itemWidth=linearMap$2(data.get(valueDim,idx2)||0,[min3,max3],sizeExtent,!0);switch(funnelAlign){case"left":x0=x;break;case"center":x0=x+(viewWidth-itemWidth)/2;break;case"right":x0=x+viewWidth-itemWidth}return[[x0,offset],[x0+itemWidth,offset]]};"ascending"===sort2&amp;&amp;(itemSize=-itemSize,gap=-gap,"horizontal"===orient?x+=viewWidth:y+=viewHeight,indices=indices.reverse());for(var i=0;i&lt;indices.length;i++){var idx=indices[i],nextIdx=indices[i+1],itemModel=data.getItemModel(idx);if("horizontal"===orient){var width=itemModel.get(["itemStyle","width"]);null==width?width=itemSize:(width=parsePercent(width,viewWidth),"ascending"===sort2&amp;&amp;(width=-width));var start2=getLinePoints(idx,x),end2=getLinePoints(nextIdx,x+width);x+=width+gap,data.setItemLayout(idx,{points:start2.concat(end2.slice().reverse())})}else{var height=itemModel.get(["itemStyle","height"]);null==height?height=itemSize:(height=parsePercent(height,viewHeight),"ascending"===sort2&amp;&amp;(height=-height));start2=getLinePoints(idx,y),end2=getLinePoints(nextIdx,y+height);y+=height+gap,data.setItemLayout(idx,{points:start2.concat(end2.slice().reverse())})}}!function labelLayout(data){var orient=data.hostModel.get("orient");data.each(function(idx){var textAlign,textX,textY,linePoints,itemModel=data.getItemModel(idx),labelPosition=itemModel.getModel("label").get("position"),labelLineModel=itemModel.getModel("labelLine"),layout2=data.getItemLayout(idx),points2=layout2.points,isLabelInside="inner"===labelPosition||"inside"===labelPosition||"center"===labelPosition||"insideLeft"===labelPosition||"insideRight"===labelPosition;if(isLabelInside)"insideLeft"===labelPosition?(textX=(points2[0][0]+points2[3][0])/2+5,textY=(points2[0][1]+points2[3][1])/2,textAlign="left"):"insideRight"===labelPosition?(textX=(points2[1][0]+points2[2][0])/2-5,textY=(points2[1][1]+points2[2][1])/2,textAlign="right"):(textX=(points2[0][0]+points2[1][0]+points2[2][0]+points2[3][0])/4,textY=(points2[0][1]+points2[1][1]+points2[2][1]+points2[3][1])/4,textAlign="center"),linePoints=[[textX,textY],[textX,textY]];else{var x1=void 0,y1=void 0,x2=void 0,y2=void 0,labelLineLen=labelLineModel.get("length");"left"===labelPosition?(x1=(points2[3][0]+points2[0][0])/2,y1=(points2[3][1]+points2[0][1])/2,textX=(x2=x1-labelLineLen)-5,textAlign="right"):"right"===labelPosition?(x1=(points2[1][0]+points2[2][0])/2,y1=(points2[1][1]+points2[2][1])/2,textX=(x2=x1+labelLineLen)+5,textAlign="left"):"top"===labelPosition?(x1=(points2[3][0]+points2[0][0])/2,textY=(y2=(y1=(points2[3][1]+points2[0][1])/2)-labelLineLen)-5,textAlign="center"):"bottom"===labelPosition?(x1=(points2[1][0]+points2[2][0])/2,textY=(y2=(y1=(points2[1][1]+points2[2][1])/2)+labelLineLen)+5,textAlign="center"):"rightTop"===labelPosition?(x1="horizontal"===orient?points2[3][0]:points2[1][0],y1="horizontal"===orient?points2[3][1]:points2[1][1],"horizontal"===orient?(textY=(y2=y1-labelLineLen)-5,textAlign="center"):(textX=(x2=x1+labelLineLen)+5,textAlign="top")):"rightBottom"===labelPosition?(x1=points2[2][0],y1=points2[2][1],"horizontal"===orient?(textY=(y2=y1+labelLineLen)+5,textAlign="center"):(textX=(x2=x1+labelLineLen)+5,textAlign="bottom")):"leftTop"===labelPosition?(x1=points2[0][0],y1="horizontal"===orient?points2[0][1]:points2[1][1],"horizontal"===orient?(textY=(y2=y1-labelLineLen)-5,textAlign="center"):(textX=(x2=x1-labelLineLen)-5,textAlign="right")):"leftBottom"===labelPosition?(x1="horizontal"===orient?points2[1][0]:points2[3][0],y1="horizontal"===orient?points2[1][1]:points2[2][1],"horizontal"===orient?(textY=(y2=y1+labelLineLen)+5,textAlign="center"):(textX=(x2=x1-labelLineLen)-5,textAlign="right")):(x1=(points2[1][0]+points2[2][0])/2,y1=(points2[1][1]+points2[2][1])/2,"horizontal"===orient?(textY=(y2=y1+labelLineLen)+5,textAlign="center"):(textX=(x2=x1+labelLineLen)+5,textAlign="left")),"horizontal"===orient?textX=x2=x1:textY=y2=y1,linePoints=[[x1,y1],[x2,y2]]}layout2.label={linePoints:linePoints,x:textX,y:textY,verticalAlign:"middle",textAlign:textAlign,inside:isLabelInside}})}(data)})}var ParallelView$1=function(_super){function ParallelView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ParallelView2.type,_this._dataGroup=new Group$3,_this._initialized=!1,_this}return __extends$1(ParallelView2,_super),ParallelView2.prototype.init=function(){this.group.add(this._dataGroup)},ParallelView2.prototype.render=function(seriesModel,ecModel,api,payload){this._progressiveEls=null;var dataGroup=this._dataGroup,data=seriesModel.getData(),oldData=this._data,coordSys=seriesModel.coordinateSystem,dimensions=coordSys.dimensions,seriesScope=makeSeriesScope(seriesModel);if(data.diff(oldData).add(function add2(newDataIndex){updateElCommon(addEl(data,dataGroup,newDataIndex,dimensions,coordSys),data,newDataIndex,seriesScope)}).update(function update(newDataIndex,oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex),points2=createLinePoints(data,newDataIndex,dimensions,coordSys);data.setItemGraphicEl(newDataIndex,line),updateProps$1(line,{shape:{points:points2}},seriesModel,newDataIndex),saveOldStyle(line),updateElCommon(line,data,newDataIndex,seriesScope)}).remove(function remove(oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex);dataGroup.remove(line)}).execute(),!this._initialized){this._initialized=!0;var clipPath=function createGridClipShape$2(coordSys,seriesModel,cb){var parallelModel=coordSys.model,rect=coordSys.getRect(),rectEl=new Rect$2({shape:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}}),dim="horizontal"===parallelModel.get("layout")?"width":"height";return rectEl.setShape(dim,0),initProps(rectEl,{shape:{width:rect.width,height:rect.height}},seriesModel,cb),rectEl}(coordSys,seriesModel,function(){setTimeout(function(){dataGroup.removeClipPath()})});dataGroup.setClipPath(clipPath)}this._data=data},ParallelView2.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},ParallelView2.prototype.incrementalRender=function(taskParams,seriesModel,ecModel){for(var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem,dimensions=coordSys.dimensions,seriesScope=makeSeriesScope(seriesModel),progressiveEls=this._progressiveEls=[],dataIndex=taskParams.start;dataIndex&lt;taskParams.end;dataIndex++){var line=addEl(data,this._dataGroup,dataIndex,dimensions,coordSys);line.incremental=!0,updateElCommon(line,data,dataIndex,seriesScope),progressiveEls.push(line)}},ParallelView2.prototype.remove=function(){this._dataGroup&amp;&amp;this._dataGroup.removeAll(),this._data=null},ParallelView2.type="parallel",ParallelView2}(ChartView);function createLinePoints(data,dataIndex,dimensions,coordSys){for(var points2=[],i=0;i&lt;dimensions.length;i++){var dimName=dimensions[i],value=data.get(data.mapDimension(dimName),dataIndex);isEmptyValue(value,coordSys.getAxis(dimName).type)||points2.push(coordSys.dataToPoint(value,dimName))}return points2}function addEl(data,dataGroup,dataIndex,dimensions,coordSys){var points2=createLinePoints(data,dataIndex,dimensions,coordSys),line=new Polyline$1({shape:{points:points2},z2:10});return dataGroup.add(line),data.setItemGraphicEl(dataIndex,line),line}function makeSeriesScope(seriesModel){var smooth=seriesModel.get("smooth",!0);return!0===smooth&amp;&amp;(smooth=.3),eqNaN(smooth=numericToNumber(smooth))&amp;&amp;(smooth=0),{smooth:smooth}}function updateElCommon(el,data,dataIndex,seriesScope){el.useStyle(data.getItemVisual(dataIndex,"style")),el.style.fill=null,el.setShape("smooth",seriesScope.smooth);var itemModel=data.getItemModel(dataIndex),emphasisModel=itemModel.getModel("emphasis");setStatesStylesFromModel(el,itemModel,"lineStyle"),toggleHoverEmphasis(el,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}function isEmptyValue(val,axisType){return"category"===axisType?null==val:null==val||isNaN(val)}var ParallelSeriesModel=function(_super){function ParallelSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ParallelSeriesModel2.type,_this.visualStyleAccessPath="lineStyle",_this.visualDrawType="stroke",_this}return __extends$1(ParallelSeriesModel2,_super),ParallelSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},ParallelSeriesModel2.prototype.getRawIndicesByActiveState=function(activeState){var coordSys=this.coordinateSystem,data=this.getData(),indices=[];return coordSys.eachActiveState(data,function(theActiveState,dataIndex){activeState===theActiveState&amp;&amp;indices.push(data.getRawIndex(dataIndex))}),indices},ParallelSeriesModel2.type="series.parallel",ParallelSeriesModel2.dependencies=["parallel"],ParallelSeriesModel2.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},ParallelSeriesModel2}(SeriesModel);function makeDefaultEncode(seriesModel){var parallelModel=seriesModel.ecModel.getComponent("parallel",seriesModel.get("parallelIndex"));if(parallelModel){var encodeDefine={};return each$f(parallelModel.dimensions,function(axisDim){var dataDimIndex=function convertDimNameToNumber(dimName){return+dimName.replace("dim","")}(axisDim);encodeDefine[axisDim]=dataDimIndex}),encodeDefine}}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(seriesModel,ecModel){var coordSys=seriesModel.coordinateSystem,opacityMap={normal:seriesModel.get(["lineStyle","opacity"]),active:seriesModel.get("activeOpacity"),inactive:seriesModel.get("inactiveOpacity")};return{progress:function(params,data){coordSys.eachActiveState(data,function(activeState,dataIndex){var opacity=opacityMap[activeState];if("normal"===activeState&amp;&amp;data.hasItemOption){var itemOpacity=data.getItemModel(dataIndex).get(opacityAccessPath,!0);null!=itemOpacity&amp;&amp;(opacity=itemOpacity)}data.ensureUniqueItemVisual(dataIndex,"style").opacity=opacity},params.start,params.end)}}}};function parallelPreprocessor(option){!function createParallelIfNeeded(option){if(option.parallel)return;var hasParallelSeries=!1;each$f(option.series,function(seriesOpt){seriesOpt&amp;&amp;"parallel"===seriesOpt.type&amp;&amp;(hasParallelSeries=!0)}),hasParallelSeries&amp;&amp;(option.parallel=[{}])}(option),function mergeAxisOptionFromParallel(option){var axes=normalizeToArray(option.parallelAxis);each$f(axes,function(axisOption){if(isObject$3(axisOption)){var parallelIndex=axisOption.parallelIndex||0,parallelOption=normalizeToArray(option.parallel)[parallelIndex];parallelOption&amp;&amp;parallelOption.parallelAxisDefault&amp;&amp;merge(axisOption,parallelOption.parallelAxisDefault,!1)}})}(option)}var ParallelView=function(_super){function ParallelView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ParallelView2.type,_this}return __extends$1(ParallelView2,_super),ParallelView2.prototype.render=function(parallelModel,ecModel,api){this._model=parallelModel,this._api=api,this._handlers||(this._handlers={},each$f(handlers$1,function(handler,eventName){api.getZr().on(eventName,this._handlers[eventName]=bind$1(handler,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",parallelModel.get("axisExpandRate"),"fixRate")},ParallelView2.prototype.dispose=function(ecModel,api){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(handler,eventName){api.getZr().off(eventName,handler)}),this._handlers=null},ParallelView2.prototype._throttledDispatchExpand=function(opt){this._dispatchExpand(opt)},ParallelView2.prototype._dispatchExpand=function(opt){opt&amp;&amp;this._api.dispatchAction(extend({type:"parallelAxisExpand"},opt))},ParallelView2.type="parallel",ParallelView2}(ComponentView),handlers$1={mousedown:function(e2){checkTrigger(this,"click")&amp;&amp;(this._mouseDownPoint=[e2.offsetX,e2.offsetY])},mouseup:function(e2){var mouseDownPoint=this._mouseDownPoint;if(checkTrigger(this,"click")&amp;&amp;mouseDownPoint){var point=[e2.offsetX,e2.offsetY];if(Math.pow(mouseDownPoint[0]-point[0],2)+Math.pow(mouseDownPoint[1]-point[1],2)&gt;5)return;var result=this._model.coordinateSystem.getSlidedAxisExpandWindow([e2.offsetX,e2.offsetY]);"none"!==result.behavior&amp;&amp;this._dispatchExpand({axisExpandWindow:result.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e2){if(!this._mouseDownPoint&amp;&amp;checkTrigger(this,"mousemove")){var model=this._model,result=model.coordinateSystem.getSlidedAxisExpandWindow([e2.offsetX,e2.offsetY]),behavior=result.behavior;"jump"===behavior&amp;&amp;this._throttledDispatchExpand.debounceNextCall(model.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===behavior?null:{axisExpandWindow:result.axisExpandWindow,animation:"jump"===behavior?null:{duration:0}})}}};function checkTrigger(view,triggerOn){var model=view._model;return model.get("axisExpandable")&amp;&amp;model.get("axisExpandTriggerOn")===triggerOn}var ParallelModel=function(_super){function ParallelModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ParallelModel2.type,_this}return __extends$1(ParallelModel2,_super),ParallelModel2.prototype.init=function(){_super.prototype.init.apply(this,arguments),this.mergeOption({})},ParallelModel2.prototype.mergeOption=function(newOption){var thisOption=this.option;newOption&amp;&amp;merge(thisOption,newOption,!0),this._initDimensions()},ParallelModel2.prototype.contains=function(model,ecModel){var parallelIndex=model.get("parallelIndex");return null!=parallelIndex&amp;&amp;ecModel.getComponent("parallel",parallelIndex)===this},ParallelModel2.prototype.setAxisExpand=function(opt){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(name){opt.hasOwnProperty(name)&amp;&amp;(this.option[name]=opt[name])},this)},ParallelModel2.prototype._initDimensions=function(){var dimensions=this.dimensions=[],parallelAxisIndex=this.parallelAxisIndex=[];each$f(filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(axisModel){return(axisModel.get("parallelIndex")||0)===this.componentIndex},this),function(axisModel){dimensions.push("dim"+axisModel.get("dim")),parallelAxisIndex.push(axisModel.componentIndex)})},ParallelModel2.type="parallel",ParallelModel2.dependencies=["parallelAxis"],ParallelModel2.layoutMode="box",ParallelModel2.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},ParallelModel2}(ComponentModel),ParallelAxis=function(_super){function ParallelAxis2(dim,scale2,coordExtent,axisType,axisIndex){var _this=_super.call(this,dim,scale2,coordExtent)||this;return _this.type=axisType||"value",_this.axisIndex=axisIndex,_this}return __extends$1(ParallelAxis2,_super),ParallelAxis2.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},ParallelAxis2}(Axis);function sliderMove(delta,handleEnds,extent3,handleIndex,minSpan,maxSpan){delta=delta||0;var extentSpan=extent3[1]-extent3[0];if(null!=minSpan&amp;&amp;(minSpan=restrict$1(minSpan,[0,extentSpan])),null!=maxSpan&amp;&amp;(maxSpan=Math.max(maxSpan,null!=minSpan?minSpan:0)),"all"===handleIndex){var handleSpan=Math.abs(handleEnds[1]-handleEnds[0]);handleSpan=restrict$1(handleSpan,[0,extentSpan]),minSpan=maxSpan=restrict$1(handleSpan,[minSpan,maxSpan]),handleIndex=0}handleEnds[0]=restrict$1(handleEnds[0],extent3),handleEnds[1]=restrict$1(handleEnds[1],extent3);var originalDistSign=getSpanSign(handleEnds,handleIndex);handleEnds[handleIndex]+=delta;var currDistSign,extentMinSpan=minSpan||0,realExtent=extent3.slice();return originalDistSign.sign&lt;0?realExtent[0]+=extentMinSpan:realExtent[1]-=extentMinSpan,handleEnds[handleIndex]=restrict$1(handleEnds[handleIndex],realExtent),currDistSign=getSpanSign(handleEnds,handleIndex),null!=minSpan&amp;&amp;(currDistSign.sign!==originalDistSign.sign||currDistSign.span&lt;minSpan)&amp;&amp;(handleEnds[1-handleIndex]=handleEnds[handleIndex]+originalDistSign.sign*minSpan),currDistSign=getSpanSign(handleEnds,handleIndex),null!=maxSpan&amp;&amp;currDistSign.span&gt;maxSpan&amp;&amp;(handleEnds[1-handleIndex]=handleEnds[handleIndex]+currDistSign.sign*maxSpan),handleEnds}function getSpanSign(handleEnds,handleIndex){var dist2=handleEnds[handleIndex]-handleEnds[1-handleIndex];return{span:Math.abs(dist2),sign:dist2&gt;0?-1:dist2&lt;0?1:handleIndex?-1:1}}function restrict$1(value,extend2){return Math.min(null!=extend2[1]?extend2[1]:1/0,Math.max(null!=extend2[0]?extend2[0]:-1/0,value))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function Parallel2(parallelModel,ecModel,api){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=parallelModel.dimensions,this._model=parallelModel,this._init(parallelModel,ecModel,api)}return Parallel2.prototype._init=function(parallelModel,ecModel,api){var dimensions=parallelModel.dimensions,parallelAxisIndex=parallelModel.parallelAxisIndex;each$a(dimensions,function(dim,idx){var axisIndex=parallelAxisIndex[idx],axisModel=ecModel.getComponent("parallelAxis",axisIndex),axis=this._axesMap.set(dim,new ParallelAxis(dim,createScaleByModel$1(axisModel),[0,0],axisModel.get("type"),axisIndex)),isCategory2="category"===axis.type;axis.onBand=isCategory2&amp;&amp;axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axisModel.axis=axis,axis.model=axisModel,axis.coordinateSystem=axisModel.coordinateSystem=this},this)},Parallel2.prototype.update=function(ecModel,api){this._updateAxesFromSeries(this._model,ecModel)},Parallel2.prototype.containPoint=function(point){var layoutInfo=this._makeLayoutInfo(),axisBase=layoutInfo.axisBase,layoutBase=layoutInfo.layoutBase,pixelDimIndex=layoutInfo.pixelDimIndex,pAxis=point[1-pixelDimIndex],pLayout=point[pixelDimIndex];return pAxis&gt;=axisBase&amp;&amp;pAxis&lt;=axisBase+layoutInfo.axisLength&amp;&amp;pLayout&gt;=layoutBase&amp;&amp;pLayout&lt;=layoutBase+layoutInfo.layoutLength},Parallel2.prototype.getModel=function(){return this._model},Parallel2.prototype._updateAxesFromSeries=function(parallelModel,ecModel){ecModel.eachSeries(function(seriesModel){if(parallelModel.contains(seriesModel,ecModel)){var data=seriesModel.getData();each$a(this.dimensions,function(dim){var axis=this._axesMap.get(dim);axis.scale.unionExtentFromData(data,data.mapDimension(dim)),niceScaleExtent(axis.scale,axis.model)},this)}},this)},Parallel2.prototype.resize=function(parallelModel,api){this._rect=getLayoutRect(parallelModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()}),this._layoutAxes()},Parallel2.prototype.getRect=function(){return this._rect},Parallel2.prototype._makeLayoutInfo=function(){var winSize,parallelModel=this._model,rect=this._rect,xy=["x","y"],wh=["width","height"],layout2=parallelModel.get("layout"),pixelDimIndex="horizontal"===layout2?0:1,layoutLength=rect[wh[pixelDimIndex]],layoutExtent=[0,layoutLength],axisCount=this.dimensions.length,axisExpandWidth=restrict(parallelModel.get("axisExpandWidth"),layoutExtent),axisExpandCount=restrict(parallelModel.get("axisExpandCount")||0,[0,axisCount]),axisExpandable=parallelModel.get("axisExpandable")&amp;&amp;axisCount&gt;3&amp;&amp;axisCount&gt;axisExpandCount&amp;&amp;axisExpandCount&gt;1&amp;&amp;axisExpandWidth&gt;0&amp;&amp;layoutLength&gt;0,axisExpandWindow=parallelModel.get("axisExpandWindow");axisExpandWindow?(winSize=restrict(axisExpandWindow[1]-axisExpandWindow[0],layoutExtent),axisExpandWindow[1]=axisExpandWindow[0]+winSize):(winSize=restrict(axisExpandWidth*(axisExpandCount-1),layoutExtent),(axisExpandWindow=[axisExpandWidth*(parallelModel.get("axisExpandCenter")||mathFloor(axisCount/2))-winSize/2])[1]=axisExpandWindow[0]+winSize);var axisCollapseWidth=(layoutLength-winSize)/(axisCount-axisExpandCount);axisCollapseWidth&lt;3&amp;&amp;(axisCollapseWidth=0);var winInnerIndices=[mathFloor(round(axisExpandWindow[0]/axisExpandWidth,1))+1,mathCeil(round(axisExpandWindow[1]/axisExpandWidth,1))-1],axisExpandWindow0Pos=axisCollapseWidth/axisExpandWidth*axisExpandWindow[0];return{layout:layout2,pixelDimIndex:pixelDimIndex,layoutBase:rect[xy[pixelDimIndex]],layoutLength:layoutLength,axisBase:rect[xy[1-pixelDimIndex]],axisLength:rect[wh[1-pixelDimIndex]],axisExpandable:axisExpandable,axisExpandWidth:axisExpandWidth,axisCollapseWidth:axisCollapseWidth,axisExpandWindow:axisExpandWindow,axisCount:axisCount,winInnerIndices:winInnerIndices,axisExpandWindow0Pos:axisExpandWindow0Pos}},Parallel2.prototype._layoutAxes=function(){var rect=this._rect,axes=this._axesMap,dimensions=this.dimensions,layoutInfo=this._makeLayoutInfo(),layout2=layoutInfo.layout;axes.each(function(axis){var axisExtent=[0,layoutInfo.axisLength],idx=axis.inverse?1:0;axis.setExtent(axisExtent[idx],axisExtent[1-idx])}),each$a(dimensions,function(dim,idx){var posInfo=(layoutInfo.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(idx,layoutInfo),positionTable={horizontal:{x:posInfo.position,y:layoutInfo.axisLength},vertical:{x:0,y:posInfo.position}},rotationTable={horizontal:PI$1/2,vertical:0},position2=[positionTable[layout2].x+rect.x,positionTable[layout2].y+rect.y],rotation=rotationTable[layout2],transform2=[1,0,0,1,0,0];rotate(transform2,transform2,rotation),translate(transform2,transform2,position2),this._axesLayout[dim]={position:position2,rotation:rotation,transform:transform2,axisNameAvailableWidth:posInfo.axisNameAvailableWidth,axisLabelShow:posInfo.axisLabelShow,nameTruncateMaxWidth:posInfo.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},Parallel2.prototype.getAxis=function(dim){return this._axesMap.get(dim)},Parallel2.prototype.dataToPoint=function(value,dim){return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value),dim)},Parallel2.prototype.eachActiveState=function(data,callback,start2,end2){null==start2&amp;&amp;(start2=0),null==end2&amp;&amp;(end2=data.count());var axesMap=this._axesMap,dimensions=this.dimensions,dataDimensions=[],axisModels=[];each$f(dimensions,function(axisDim){dataDimensions.push(data.mapDimension(axisDim)),axisModels.push(axesMap.get(axisDim).model)});for(var hasActiveSet=this.hasAxisBrushed(),dataIndex=start2;dataIndex&lt;end2;dataIndex++){var activeState=void 0;if(hasActiveSet){activeState="active";for(var values=data.getValues(dataDimensions,dataIndex),j=0,lenj=dimensions.length;j&lt;lenj;j++){if("inactive"===axisModels[j].getActiveState(values[j])){activeState="inactive";break}}}else activeState="normal";callback(activeState,dataIndex)}},Parallel2.prototype.hasAxisBrushed=function(){for(var dimensions=this.dimensions,axesMap=this._axesMap,hasActiveSet=!1,j=0,lenj=dimensions.length;j&lt;lenj;j++)"normal"!==axesMap.get(dimensions[j]).model.getActiveState()&amp;&amp;(hasActiveSet=!0);return hasActiveSet},Parallel2.prototype.axisCoordToPoint=function(coord,dim){return applyTransform([coord,0],this._axesLayout[dim].transform)},Parallel2.prototype.getAxisLayout=function(dim){return clone$4(this._axesLayout[dim])},Parallel2.prototype.getSlidedAxisExpandWindow=function(point){var layoutInfo=this._makeLayoutInfo(),pixelDimIndex=layoutInfo.pixelDimIndex,axisExpandWindow=layoutInfo.axisExpandWindow.slice(),winSize=axisExpandWindow[1]-axisExpandWindow[0],extent3=[0,layoutInfo.axisExpandWidth*(layoutInfo.axisCount-1)];if(!this.containPoint(point))return{behavior:"none",axisExpandWindow:axisExpandWindow};var delta,pointCoord=point[pixelDimIndex]-layoutInfo.layoutBase-layoutInfo.axisExpandWindow0Pos,behavior="slide",axisCollapseWidth=layoutInfo.axisCollapseWidth,triggerArea=this._model.get("axisExpandSlideTriggerArea"),useJump=null!=triggerArea[0];if(axisCollapseWidth)useJump&amp;&amp;axisCollapseWidth&amp;&amp;pointCoord&lt;winSize*triggerArea[0]?(behavior="jump",delta=pointCoord-winSize*triggerArea[2]):useJump&amp;&amp;axisCollapseWidth&amp;&amp;pointCoord&gt;winSize*(1-triggerArea[0])?(behavior="jump",delta=pointCoord-winSize*(1-triggerArea[2])):(delta=pointCoord-winSize*triggerArea[1])&gt;=0&amp;&amp;(delta=pointCoord-winSize*(1-triggerArea[1]))&lt;=0&amp;&amp;(delta=0),(delta*=layoutInfo.axisExpandWidth/axisCollapseWidth)?sliderMove(delta,axisExpandWindow,extent3,"all"):behavior="none";else{var winSize2=axisExpandWindow[1]-axisExpandWindow[0];(axisExpandWindow=[mathMax$2(0,extent3[1]*pointCoord/winSize2-winSize2/2)])[1]=mathMin$2(extent3[1],axisExpandWindow[0]+winSize2),axisExpandWindow[0]=axisExpandWindow[1]-winSize2}return{axisExpandWindow:axisExpandWindow,behavior:behavior}},Parallel2}();function restrict(len2,extent3){return mathMin$2(mathMax$2(len2,extent3[0]),extent3[1])}function layoutAxisWithoutExpand(axisIndex,layoutInfo){var step=layoutInfo.layoutLength/(layoutInfo.axisCount-1);return{position:step*axisIndex,axisNameAvailableWidth:step,axisLabelShow:!0}}function layoutAxisWithExpand(axisIndex,layoutInfo){var position2,nameTruncateMaxWidth,layoutLength=layoutInfo.layoutLength,axisExpandWidth=layoutInfo.axisExpandWidth,axisCount=layoutInfo.axisCount,axisCollapseWidth=layoutInfo.axisCollapseWidth,winInnerIndices=layoutInfo.winInnerIndices,axisNameAvailableWidth=axisCollapseWidth,axisLabelShow=!1;return axisIndex&lt;winInnerIndices[0]?(position2=axisIndex*axisCollapseWidth,nameTruncateMaxWidth=axisCollapseWidth):axisIndex&lt;=winInnerIndices[1]?(position2=layoutInfo.axisExpandWindow0Pos+axisIndex*axisExpandWidth-layoutInfo.axisExpandWindow[0],axisNameAvailableWidth=axisExpandWidth,axisLabelShow=!0):(position2=layoutLength-(axisCount-1-axisIndex)*axisCollapseWidth,nameTruncateMaxWidth=axisCollapseWidth),{position:position2,axisNameAvailableWidth:axisNameAvailableWidth,axisLabelShow:axisLabelShow,nameTruncateMaxWidth:nameTruncateMaxWidth}}var parallelCoordSysCreator={create:function createParallelCoordSys(ecModel,api){var coordSysList=[];return ecModel.eachComponent("parallel",function(parallelModel,idx){var coordSys=new Parallel(parallelModel,ecModel,api);coordSys.name="parallel_"+idx,coordSys.resize(parallelModel,api),parallelModel.coordinateSystem=coordSys,coordSys.model=parallelModel,coordSysList.push(coordSys)}),ecModel.eachSeries(function(seriesModel){if("parallel"===seriesModel.get("coordinateSystem")){var parallelModel=seriesModel.getReferringComponents("parallel",SINGLE_REFERRING).models[0];seriesModel.coordinateSystem=parallelModel.coordinateSystem}}),coordSysList}},ParallelAxisModel=function(_super){function ParallelAxisModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ParallelAxisModel2.type,_this.activeIntervals=[],_this}return __extends$1(ParallelAxisModel2,_super),ParallelAxisModel2.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},ParallelAxisModel2.prototype.setActiveIntervals=function(intervals){var activeIntervals=this.activeIntervals=clone$4(intervals);if(activeIntervals)for(var i=activeIntervals.length-1;i&gt;=0;i--)asc$2(activeIntervals[i])},ParallelAxisModel2.prototype.getActiveState=function(value){var activeIntervals=this.activeIntervals;if(!activeIntervals.length)return"normal";if(null==value||isNaN(+value))return"inactive";if(1===activeIntervals.length){var interval=activeIntervals[0];if(interval[0]&lt;=value&amp;&amp;value&lt;=interval[1])return"active"}else for(var i=0,len2=activeIntervals.length;i&lt;len2;i++)if(activeIntervals[i][0]&lt;=value&amp;&amp;value&lt;=activeIntervals[i][1])return"active";return"inactive"},ParallelAxisModel2}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(_super){function BrushController2(zr){var _this=_super.call(this)||this;return _this._track=[],_this._covers=[],_this._handlers={},_this._zr=zr,_this.group=new Group$3,_this._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(handler,eventName){this._handlers[eventName]=bind$1(handler,this)},_this),_this}return __extends$1(BrushController2,_super),BrushController2.prototype.enableBrush=function(brushOption){return this._brushType&amp;&amp;this._doDisableBrush(),brushOption.brushType&amp;&amp;this._doEnableBrush(brushOption),this},BrushController2.prototype._doEnableBrush=function(brushOption){var zr=this._zr;this._enableGlobalPan||function take(zr,resourceKey,userKey){getStore(zr)[resourceKey]=userKey}(zr,"globalPan",this._uid),each$f(this._handlers,function(handler,eventName){zr.on(eventName,handler)}),this._brushType=brushOption.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),brushOption,!0)},BrushController2.prototype._doDisableBrush=function(){var zr=this._zr;!function release(zr,resourceKey,userKey){var store=getStore(zr);store[resourceKey]===userKey&amp;&amp;(store[resourceKey]=null)}(zr,"globalPan",this._uid),each$f(this._handlers,function(handler,eventName){zr.off(eventName,handler)}),this._brushType=this._brushOption=null},BrushController2.prototype.setPanels=function(panelOpts){if(panelOpts&amp;&amp;panelOpts.length){var panels_1=this._panels={};each$f(panelOpts,function(panelOpts2){panels_1[panelOpts2.panelId]=clone$4(panelOpts2)})}else this._panels=null;return this},BrushController2.prototype.mount=function(opt){opt=opt||{},this._enableGlobalPan=opt.enableGlobalPan;var thisGroup=this.group;return this._zr.add(thisGroup),thisGroup.attr({x:opt.x||0,y:opt.y||0,rotation:opt.rotation||0,scaleX:opt.scaleX||1,scaleY:opt.scaleY||1}),this._transform=thisGroup.getLocalTransform(),this},BrushController2.prototype.updateCovers=function(coverConfigList){coverConfigList=map$1(coverConfigList,function(coverConfig){return merge(clone$4(DEFAULT_BRUSH_OPT),coverConfig,!0)});var oldCovers=this._covers,newCovers=this._covers=[],controller=this,creatingCover=this._creatingCover;return new DataDiffer(oldCovers,coverConfigList,function oldGetKey(cover,index){return getKey2(cover.__brushOption,index)},getKey2).add(addOrUpdate).update(addOrUpdate).remove(function remove(oldIndex){oldCovers[oldIndex]!==creatingCover&amp;&amp;controller.group.remove(oldCovers[oldIndex])}).execute(),this;function getKey2(brushOption,index){return(null!=brushOption.id?brushOption.id:"\0-brush-index-"+index)+"-"+brushOption.brushType}function addOrUpdate(newIndex,oldIndex){var newBrushInternal=coverConfigList[newIndex];if(null!=oldIndex&amp;&amp;oldCovers[oldIndex]===creatingCover)newCovers[newIndex]=oldCovers[oldIndex];else{var cover=newCovers[newIndex]=null!=oldIndex?(oldCovers[oldIndex].__brushOption=newBrushInternal,oldCovers[oldIndex]):endCreating(controller,createCover(controller,newBrushInternal));updateCoverAfterCreation(controller,cover)}}},BrushController2.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},BrushController2.prototype.dispose=function(){this.unmount(),this.off()},BrushController2}(Eventful);function createCover(controller,brushOption){var cover=coverRenderers[brushOption.brushType].createCover(controller,brushOption);return cover.__brushOption=brushOption,updateZ$1(cover,brushOption),controller.group.add(cover),cover}function endCreating(controller,creatingCover){var coverRenderer=getCoverRenderer(creatingCover);return coverRenderer.endCreating&amp;&amp;(coverRenderer.endCreating(controller,creatingCover),updateZ$1(creatingCover,creatingCover.__brushOption)),creatingCover}function updateCoverShape(controller,cover){var brushOption=cover.__brushOption;getCoverRenderer(cover).updateCoverShape(controller,cover,brushOption.range,brushOption)}function updateZ$1(cover,brushOption){var z=brushOption.z;null==z&amp;&amp;(z=1e4),cover.traverse(function(el){el.z=z,el.z2=z})}function updateCoverAfterCreation(controller,cover){getCoverRenderer(cover).updateCommon(controller,cover),updateCoverShape(controller,cover)}function getCoverRenderer(cover){return coverRenderers[cover.__brushOption.brushType]}function getPanelByPoint(controller,e2,localCursorPoint){var panel,panels=controller._panels;if(!panels)return true;var transform2=controller._transform;return each$f(panels,function(pn){pn.isTargetByCursor(e2,localCursorPoint,transform2)&amp;&amp;(panel=pn)}),panel}function getPanelByCover(controller,cover){var panels=controller._panels;if(!panels)return true;var panelId=cover.__brushOption.panelId;return null==panelId||panels[panelId]}function clearCovers(controller){var covers=controller._covers,originalLength=covers.length;return each$f(covers,function(cover){controller.group.remove(cover)},controller),covers.length=0,!!originalLength}function trigger(controller,opt){var areas=map$1(controller._covers,function(cover){var brushOption=cover.__brushOption,range=clone$4(brushOption.range);return{brushType:brushOption.brushType,panelId:brushOption.panelId,range:range}});controller.trigger("brush",{areas:areas,isEnd:!!opt.isEnd,removeOnClick:!!opt.removeOnClick})}function getTrackEnds(track){var tail=track.length-1;return tail&lt;0&amp;&amp;(tail=0),[track[0],track[tail]]}function createBaseRectCover(rectRangeConverter,controller,brushOption,edgeNameSequences){var cover=new Group$3;return cover.add(new Rect$2({name:"main",style:makeStyle(brushOption),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,rectRangeConverter,controller,cover,["n","s","w","e"]),ondragend:curry$1(trigger,controller,{isEnd:!0})})),each$f(edgeNameSequences,function(nameSequence){cover.add(new Rect$2({name:nameSequence.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,rectRangeConverter,controller,cover,nameSequence),ondragend:curry$1(trigger,controller,{isEnd:!0})}))}),cover}function updateBaseRect(controller,cover,localRange,brushOption){var lineWidth=brushOption.brushStyle.lineWidth||0,handleSize=mathMax$1(lineWidth,6),x=localRange[0][0],y=localRange[1][0],xa=x-lineWidth/2,ya=y-lineWidth/2,x2=localRange[0][1],y2=localRange[1][1],x2a=x2-handleSize+lineWidth/2,y2a=y2-handleSize+lineWidth/2,width=x2-x,height=y2-y,widtha=width+lineWidth,heighta=height+lineWidth;updateRectShape(controller,cover,"main",x,y,width,height),brushOption.transformable&amp;&amp;(updateRectShape(controller,cover,"w",xa,ya,handleSize,heighta),updateRectShape(controller,cover,"e",x2a,ya,handleSize,heighta),updateRectShape(controller,cover,"n",xa,ya,widtha,handleSize),updateRectShape(controller,cover,"s",xa,y2a,widtha,handleSize),updateRectShape(controller,cover,"nw",xa,ya,handleSize,handleSize),updateRectShape(controller,cover,"ne",x2a,ya,handleSize,handleSize),updateRectShape(controller,cover,"sw",xa,y2a,handleSize,handleSize),updateRectShape(controller,cover,"se",x2a,y2a,handleSize,handleSize))}function updateCommon$1(controller,cover){var brushOption=cover.__brushOption,transformable=brushOption.transformable,mainEl=cover.childAt(0);mainEl.useStyle(makeStyle(brushOption)),mainEl.attr({silent:!transformable,cursor:transformable?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(nameSequence){var el=cover.childOfName(nameSequence.join("")),globalDir=1===nameSequence.length?getGlobalDirection1(controller,nameSequence[0]):function getGlobalDirection2(controller,localDirNameSeq){var globalDir=[getGlobalDirection1(controller,localDirNameSeq[0]),getGlobalDirection1(controller,localDirNameSeq[1])];return("e"===globalDir[0]||"w"===globalDir[0])&amp;&amp;globalDir.reverse(),globalDir.join("")}(controller,nameSequence);el&amp;&amp;el.attr({silent:!transformable,invisible:!transformable,cursor:transformable?CURSOR_MAP[globalDir]+"-resize":null})})}function updateRectShape(controller,cover,name,x,y,w,h){var el=cover.childOfName(name);el&amp;&amp;el.setShape(function pointsToRect(points2){var xmin=mathMin$1(points2[0][0],points2[1][0]),ymin=mathMin$1(points2[0][1],points2[1][1]),xmax=mathMax$1(points2[0][0],points2[1][0]),ymax=mathMax$1(points2[0][1],points2[1][1]);return{x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin}}(clipByPanel(controller,cover,[[x,y],[x+w,y+h]])))}function makeStyle(brushOption){return defaults({strokeNoScale:!0},brushOption.brushStyle)}function formatRectRange(x,y,x2,y2){var min3=[mathMin$1(x,x2),mathMin$1(y,y2)],max3=[mathMax$1(x,x2),mathMax$1(y,y2)];return[[min3[0],max3[0]],[min3[1],max3[1]]]}function getGlobalDirection1(controller,localDirName){var dir3=transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[localDirName],function getTransform(controller){return getTransform$1(controller.group)}(controller));return{left:"w",right:"e",top:"n",bottom:"s"}[dir3]}function driftRect(rectRangeConverter,controller,cover,dirNameSequence,dx,dy){var brushOption=cover.__brushOption,rectRange=rectRangeConverter.toRectRange(brushOption.range),localDelta=toLocalDelta(controller,dx,dy);each$f(dirNameSequence,function(dirName){var ind=DIRECTION_MAP[dirName];rectRange[ind[0]][ind[1]]+=localDelta[ind[0]]}),brushOption.range=rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0],rectRange[1][0],rectRange[0][1],rectRange[1][1])),updateCoverAfterCreation(controller,cover),trigger(controller,{isEnd:!1})}function driftPolygon(controller,cover,dx,dy){var range=cover.__brushOption.range,localDelta=toLocalDelta(controller,dx,dy);each$f(range,function(point){point[0]+=localDelta[0],point[1]+=localDelta[1]}),updateCoverAfterCreation(controller,cover),trigger(controller,{isEnd:!1})}function toLocalDelta(controller,dx,dy){var thisGroup=controller.group,localD=thisGroup.transformCoordToLocal(dx,dy),localZero=thisGroup.transformCoordToLocal(0,0);return[localD[0]-localZero[0],localD[1]-localZero[1]]}function clipByPanel(controller,cover,data){var panel=getPanelByCover(controller,cover);return panel&amp;&amp;true!==panel?panel.clipPath(data,controller._transform):clone$4(data)}function preventDefault(e2){var rawE=e2.event;rawE.preventDefault&amp;&amp;rawE.preventDefault()}function mainShapeContain(cover,x,y){return cover.childOfName("main").contain(x,y)}function updateCoverByMouse(controller,e2,localCursorPoint,isEnd){var eventParams,creatingCover=controller._creatingCover,panel=controller._creatingPanel,thisBrushOption=controller._brushOption;if(controller._track.push(localCursorPoint.slice()),function shouldShowCover(controller){var track=controller._track;if(!track.length)return!1;var p2=track[track.length-1],p1=track[0],dx=p2[0]-p1[0],dy=p2[1]-p1[1];return mathPow(dx*dx+dy*dy,.5)&gt;6}(controller)||creatingCover){if(panel&amp;&amp;!creatingCover){"single"===thisBrushOption.brushMode&amp;&amp;clearCovers(controller);var brushOption=clone$4(thisBrushOption);brushOption.brushType=determineBrushType(brushOption.brushType,panel),brushOption.panelId=true===panel?null:panel.panelId,creatingCover=controller._creatingCover=createCover(controller,brushOption),controller._covers.push(creatingCover)}if(creatingCover){var coverRenderer=coverRenderers[determineBrushType(controller._brushType,panel)];creatingCover.__brushOption.range=coverRenderer.getCreatingRange(clipByPanel(controller,creatingCover,controller._track)),isEnd&amp;&amp;(endCreating(controller,creatingCover),coverRenderer.updateCommon(controller,creatingCover)),updateCoverShape(controller,creatingCover),eventParams={isEnd:isEnd}}}else isEnd&amp;&amp;"single"===thisBrushOption.brushMode&amp;&amp;thisBrushOption.removeOnClick&amp;&amp;getPanelByPoint(controller,e2,localCursorPoint)&amp;&amp;clearCovers(controller)&amp;&amp;(eventParams={isEnd:isEnd,removeOnClick:!0});return eventParams}function determineBrushType(brushType,panel){return"auto"===brushType?panel.defaultBrushType:brushType}var pointerHandlers={mousedown:function(e2){if(this._dragging)handleDragEnd(this,e2);else if(!e2.target||!e2.target.draggable){preventDefault(e2);var localCursorPoint=this.group.transformCoordToLocal(e2.offsetX,e2.offsetY);this._creatingCover=null,(this._creatingPanel=getPanelByPoint(this,e2,localCursorPoint))&amp;&amp;(this._dragging=!0,this._track=[localCursorPoint.slice()])}},mousemove:function(e2){var x=e2.offsetX,y=e2.offsetY,localCursorPoint=this.group.transformCoordToLocal(x,y);if(function resetCursor(controller,e2,localCursorPoint){if(controller._brushType&amp;&amp;!function isOutsideZrArea(controller,x,y){var zr=controller._zr;return x&lt;0||x&gt;zr.getWidth()||y&lt;0||y&gt;zr.getHeight()}(controller,e2.offsetX,e2.offsetY)){var zr=controller._zr,covers=controller._covers,currPanel=getPanelByPoint(controller,e2,localCursorPoint);if(!controller._dragging)for(var i=0;i&lt;covers.length;i++){var brushOption=covers[i].__brushOption;if(currPanel&amp;&amp;(!0===currPanel||brushOption.panelId===currPanel.panelId)&amp;&amp;coverRenderers[brushOption.brushType].contain(covers[i],localCursorPoint[0],localCursorPoint[1]))return}currPanel&amp;&amp;zr.setCursorStyle("crosshair")}}(this,e2,localCursorPoint),this._dragging){preventDefault(e2);var eventParams=updateCoverByMouse(this,e2,localCursorPoint,!1);eventParams&amp;&amp;trigger(this,eventParams)}},mouseup:function(e2){handleDragEnd(this,e2)}};function handleDragEnd(controller,e2){if(controller._dragging){preventDefault(e2);var x=e2.offsetX,y=e2.offsetY,localCursorPoint=controller.group.transformCoordToLocal(x,y),eventParams=updateCoverByMouse(controller,e2,localCursorPoint,!0);controller._dragging=!1,controller._track=[],controller._creatingCover=null,eventParams&amp;&amp;trigger(controller,eventParams)}}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(controller,brushOption){function returnInput(range){return range}return createBaseRectCover({toRectRange:returnInput,fromRectRange:returnInput},controller,brushOption,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);return formatRectRange(ends[1][0],ends[1][1],ends[0][0],ends[0][1])},updateCoverShape:function(controller,cover,localRange,brushOption){updateBaseRect(controller,cover,localRange,brushOption)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(controller,brushOption){var cover=new Group$3;return cover.add(new Polyline$1({name:"main",style:makeStyle(brushOption),silent:!0})),cover},getCreatingRange:function(localTrack){return localTrack},endCreating:function(controller,cover){cover.remove(cover.childAt(0)),cover.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,controller,cover),ondragend:curry$1(trigger,controller,{isEnd:!0})}))},updateCoverShape:function(controller,cover,localRange,brushOption){cover.childAt(0).setShape({points:clipByPanel(controller,cover,localRange)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(xyIndex){return{createCover:function(controller,brushOption){return createBaseRectCover({toRectRange:function(range){var rectRange=[range,[0,100]];return xyIndex&amp;&amp;rectRange.reverse(),rectRange},fromRectRange:function(rectRange){return rectRange[xyIndex]}},controller,brushOption,[[["w"],["e"]],[["n"],["s"]]][xyIndex])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);return[mathMin$1(ends[0][xyIndex],ends[1][xyIndex]),mathMax$1(ends[0][xyIndex],ends[1][xyIndex])]},updateCoverShape:function(controller,cover,localRange,brushOption){var otherExtent,panel=getPanelByCover(controller,cover);if(true!==panel&amp;&amp;panel.getLinearBrushOtherExtent)otherExtent=panel.getLinearBrushOtherExtent(xyIndex);else{var zr=controller._zr;otherExtent=[0,[zr.getWidth(),zr.getHeight()][1-xyIndex]]}var rectRange=[localRange,otherExtent];xyIndex&amp;&amp;rectRange.reverse(),updateBaseRect(controller,cover,rectRange,brushOption)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(rect){return rect=normalizeRect(rect),function(localPoints){return clipPointsByRect(localPoints,rect)}}function makeLinearBrushOtherExtent(rect,specifiedXYIndex){return rect=normalizeRect(rect),function(xyIndex){var idx=null!=specifiedXYIndex?specifiedXYIndex:xyIndex,brushWidth=idx?rect.width:rect.height,base2=idx?rect.x:rect.y;return[base2,base2+(brushWidth||0)]}}function makeRectIsTargetByCursor(rect,api,targetModel){var boundingRect=normalizeRect(rect);return function(e2,localCursorPoint){return boundingRect.contain(localCursorPoint[0],localCursorPoint[1])&amp;&amp;!onIrrelevantElement(e2,api,targetModel)}}function normalizeRect(rect){return BoundingRect.create(rect)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(_super){function ParallelAxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ParallelAxisView2.type,_this}return __extends$1(ParallelAxisView2,_super),ParallelAxisView2.prototype.init=function(ecModel,api){_super.prototype.init.apply(this,arguments),(this._brushController=new BrushController(api.getZr())).on("brush",bind$1(this._onBrush,this))},ParallelAxisView2.prototype.render=function(axisModel,ecModel,api,payload){if(!function fromAxisAreaSelect(axisModel,ecModel,payload){return payload&amp;&amp;"axisAreaSelect"===payload.type&amp;&amp;ecModel.findComponents({mainType:"parallelAxis",query:payload})[0]===axisModel}(axisModel,ecModel,payload)){this.axisModel=axisModel,this.api=api,this.group.removeAll();var oldAxisGroup=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),axisModel.get("show")){var coordSysModel=function getCoordSysModel(axisModel,ecModel){return ecModel.getComponent("parallel",axisModel.get("parallelIndex"))}(axisModel,ecModel),coordSys=coordSysModel.coordinateSystem,areaSelectStyle=axisModel.getAreaSelectStyle(),areaWidth=areaSelectStyle.width,dim=axisModel.axis.dim,builderOpt=extend({strokeContainThreshold:areaWidth},coordSys.getAxisLayout(dim)),axisBuilder=new AxisBuilder(axisModel,builderOpt);each$f(elementList$1,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),this._refreshBrushController(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api),groupTransition(oldAxisGroup,this._axisGroup,axisModel)}}},ParallelAxisView2.prototype._refreshBrushController=function(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api){var extent3=axisModel.axis.getExtent(),extentLen=extent3[1]-extent3[0],extra=Math.min(30,.1*Math.abs(extentLen)),rect=BoundingRect.create({x:extent3[0],y:-areaWidth/2,width:extentLen,height:areaWidth});rect.x-=extra,rect.width+=2*extra,this._brushController.mount({enableGlobalPan:!0,rotation:builderOpt.rotation,x:builderOpt.position[0],y:builderOpt.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(rect),isTargetByCursor:makeRectIsTargetByCursor(rect,api,coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(rect,0)}]).enableBrush({brushType:"lineX",brushStyle:areaSelectStyle,removeOnClick:!0}).updateCovers(function getCoverInfoList(axisModel){var axis=axisModel.axis;return map$1(axisModel.activeIntervals,function(interval){return{brushType:"lineX",panelId:"pl",range:[axis.dataToCoord(interval[0],!0),axis.dataToCoord(interval[1],!0)]}})}(axisModel))},ParallelAxisView2.prototype._onBrush=function(eventParam){var coverInfoList=eventParam.areas,axisModel=this.axisModel,axis=axisModel.axis,intervals=map$1(coverInfoList,function(coverInfo){return[axis.coordToData(coverInfo.range[0],!0),axis.coordToData(coverInfo.range[1],!0)]});(!axisModel.option.realtime===eventParam.isEnd||eventParam.removeOnClick)&amp;&amp;this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:axisModel.id,intervals:intervals})},ParallelAxisView2.prototype.dispose=function(){this._brushController.dispose()},ParallelAxisView2.type="parallelAxis",ParallelAxisView2}(ComponentView);var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(registers){registers.registerComponentView(ParallelView),registers.registerComponentModel(ParallelModel),registers.registerCoordinateSystem("parallel",parallelCoordSysCreator),registers.registerPreprocessor(parallelPreprocessor),registers.registerComponentModel(ParallelAxisModel),registers.registerComponentView(ParallelAxisView),axisModelCreator(registers,"parallel",ParallelAxisModel,defaultAxisOption),function installParallelActions(registers){registers.registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"parallelAxis",query:payload},function(parallelAxisModel){parallelAxisModel.axis.model.setActiveIntervals(payload.intervals)})}),registers.registerAction("parallelAxisExpand",function(payload,ecModel){ecModel.eachComponent({mainType:"parallel",query:payload},function(parallelModel){parallelModel.setAxisExpand(payload)})})}(registers)}var SankeyPathShape=function(){return function SankeyPathShape2(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}}(),SankeyPath=function(_super){function SankeyPath2(opts){return _super.call(this,opts)||this}return __extends$1(SankeyPath2,_super),SankeyPath2.prototype.getDefaultShape=function(){return new SankeyPathShape},SankeyPath2.prototype.buildPath=function(ctx,shape){var extent3=shape.extent;ctx.moveTo(shape.x1,shape.y1),ctx.bezierCurveTo(shape.cpx1,shape.cpy1,shape.cpx2,shape.cpy2,shape.x2,shape.y2),"vertical"===shape.orient?(ctx.lineTo(shape.x2+extent3,shape.y2),ctx.bezierCurveTo(shape.cpx2+extent3,shape.cpy2,shape.cpx1+extent3,shape.cpy1,shape.x1+extent3,shape.y1)):(ctx.lineTo(shape.x2,shape.y2+extent3),ctx.bezierCurveTo(shape.cpx2,shape.cpy2+extent3,shape.cpx1,shape.cpy1+extent3,shape.x1,shape.y1+extent3)),ctx.closePath()},SankeyPath2.prototype.highlight=function(){enterEmphasis(this)},SankeyPath2.prototype.downplay=function(){leaveEmphasis(this)},SankeyPath2}(Path),SankeyView=function(_super){function SankeyView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SankeyView2.type,_this._focusAdjacencyDisabled=!1,_this}return __extends$1(SankeyView2,_super),SankeyView2.prototype.render=function(seriesModel,ecModel,api){var sankeyView=this,graph=seriesModel.getGraph(),group=this.group,layoutInfo=seriesModel.layoutInfo,width=layoutInfo.width,height=layoutInfo.height,nodeData=seriesModel.getData(),edgeData=seriesModel.getData("edge"),orient=seriesModel.get("orient");this._model=seriesModel,group.removeAll(),group.x=layoutInfo.x,group.y=layoutInfo.y,graph.eachEdge(function(edge){var curve=new SankeyPath,ecData=getECData(curve);ecData.dataIndex=edge.dataIndex,ecData.seriesIndex=seriesModel.seriesIndex,ecData.dataType="edge";var x1,y1,x2,y2,cpx1,cpy1,cpx2,cpy2,edgeModel=edge.getModel(),lineStyleModel=edgeModel.getModel("lineStyle"),curvature=lineStyleModel.get("curveness"),n1Layout=edge.node1.getLayout(),node1Model=edge.node1.getModel(),dragX1=node1Model.get("localX"),dragY1=node1Model.get("localY"),n2Layout=edge.node2.getLayout(),node2Model=edge.node2.getModel(),dragX2=node2Model.get("localX"),dragY2=node2Model.get("localY"),edgeLayout=edge.getLayout();curve.shape.extent=Math.max(1,edgeLayout.dy),curve.shape.orient=orient,"vertical"===orient?(x1=(null!=dragX1?dragX1*width:n1Layout.x)+edgeLayout.sy,y1=(null!=dragY1?dragY1*height:n1Layout.y)+n1Layout.dy,x2=(null!=dragX2?dragX2*width:n2Layout.x)+edgeLayout.ty,cpx1=x1,cpy1=y1*(1-curvature)+(y2=null!=dragY2?dragY2*height:n2Layout.y)*curvature,cpx2=x2,cpy2=y1*curvature+y2*(1-curvature)):(x1=(null!=dragX1?dragX1*width:n1Layout.x)+n1Layout.dx,y1=(null!=dragY1?dragY1*height:n1Layout.y)+edgeLayout.sy,cpx1=x1*(1-curvature)+(x2=null!=dragX2?dragX2*width:n2Layout.x)*curvature,cpy1=y1,cpx2=x1*curvature+x2*(1-curvature),cpy2=y2=(null!=dragY2?dragY2*height:n2Layout.y)+edgeLayout.ty),curve.setShape({x1:x1,y1:y1,x2:x2,y2:y2,cpx1:cpx1,cpy1:cpy1,cpx2:cpx2,cpy2:cpy2}),curve.useStyle(lineStyleModel.getItemStyle()),applyCurveStyle(curve.style,orient,edge);var defaultEdgeLabelText=""+edgeModel.get("value"),edgeLabelStateModels=getLabelStatesModels(edgeModel,"edgeLabel");setLabelStyle(curve,edgeLabelStateModels,{labelFetcher:{getFormattedLabel:function(dataIndex,stateName,dataType,labelDimIndex,formatter,extendParams){return seriesModel.getFormattedLabel(dataIndex,stateName,"edge",labelDimIndex,retrieve3(formatter,edgeLabelStateModels.normal&amp;&amp;edgeLabelStateModels.normal.get("formatter"),defaultEdgeLabelText),extendParams)}},labelDataIndex:edge.dataIndex,defaultText:defaultEdgeLabelText}),curve.setTextConfig({position:"inside"});var emphasisModel=edgeModel.getModel("emphasis");setStatesStylesFromModel(curve,edgeModel,"lineStyle",function(model){var style=model.getItemStyle();return applyCurveStyle(style,orient,edge),style}),group.add(curve),edgeData.setItemGraphicEl(edge.dataIndex,curve);var focus=emphasisModel.get("focus");toggleHoverEmphasis(curve,"adjacency"===focus?edge.getAdjacentDataIndices():"trajectory"===focus?edge.getTrajectoryDataIndices():focus,emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}),graph.eachNode(function(node){var layout2=node.getLayout(),itemModel=node.getModel(),dragX=itemModel.get("localX"),dragY=itemModel.get("localY"),emphasisModel=itemModel.getModel("emphasis"),borderRadius=itemModel.get(["itemStyle","borderRadius"])||0,rect=new Rect$2({shape:{x:null!=dragX?dragX*width:layout2.x,y:null!=dragY?dragY*height:layout2.y,width:layout2.dx,height:layout2.dy,r:borderRadius},style:itemModel.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(rect,getLabelStatesModels(itemModel),{labelFetcher:{getFormattedLabel:function(dataIndex,stateName){return seriesModel.getFormattedLabel(dataIndex,stateName,"node")}},labelDataIndex:node.dataIndex,defaultText:node.id}),rect.disableLabelAnimation=!0,rect.setStyle("fill",node.getVisual("color")),rect.setStyle("decal",node.getVisual("style").decal),setStatesStylesFromModel(rect,itemModel),group.add(rect),nodeData.setItemGraphicEl(node.dataIndex,rect),getECData(rect).dataType="node";var focus=emphasisModel.get("focus");toggleHoverEmphasis(rect,"adjacency"===focus?node.getAdjacentDataIndices():"trajectory"===focus?node.getTrajectoryDataIndices():focus,emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}),nodeData.eachItemGraphicEl(function(el,dataIndex){nodeData.getItemModel(dataIndex).get("draggable")&amp;&amp;(el.drift=function(dx,dy){sankeyView._focusAdjacencyDisabled=!0,this.shape.x+=dx,this.shape.y+=dy,this.dirty(),api.dispatchAction({type:"dragNode",seriesId:seriesModel.id,dataIndex:nodeData.getRawIndex(dataIndex),localX:this.shape.x/width,localY:this.shape.y/height})},el.ondragend=function(){sankeyView._focusAdjacencyDisabled=!1},el.draggable=!0,el.cursor="move")}),!this._data&amp;&amp;seriesModel.isAnimationEnabled()&amp;&amp;group.setClipPath(function createGridClipShape$1(rect,seriesModel,cb){var rectEl=new Rect$2({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return initProps(rectEl,{shape:{width:rect.width+20}},seriesModel,cb),rectEl}(group.getBoundingRect(),seriesModel,function(){group.removeClipPath()})),this._data=seriesModel.getData()},SankeyView2.prototype.dispose=function(){},SankeyView2.type="sankey",SankeyView2}(ChartView);function applyCurveStyle(curveProps,orient,edge){switch(curveProps.fill){case"source":curveProps.fill=edge.node1.getVisual("color"),curveProps.decal=edge.node1.getVisual("style").decal;break;case"target":curveProps.fill=edge.node2.getVisual("color"),curveProps.decal=edge.node2.getVisual("style").decal;break;case"gradient":var sourceColor=edge.node1.getVisual("color"),targetColor=edge.node2.getVisual("color");isString(sourceColor)&amp;&amp;isString(targetColor)&amp;&amp;(curveProps.fill=new LinearGradient(0,0,+("horizontal"===orient),+("vertical"===orient),[{color:sourceColor,offset:0},{color:targetColor,offset:1}]))}}var SankeySeriesModel=function(_super){function SankeySeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SankeySeriesModel2.type,_this}return __extends$1(SankeySeriesModel2,_super),SankeySeriesModel2.prototype.getInitialData=function(option,ecModel){var links=option.edges||option.links||[],nodes=option.data||option.nodes||[],levels=option.levels||[];this.levelModels=[];for(var levelModels=this.levelModels,i=0;i&lt;levels.length;i++)null!=levels[i].depth&amp;&amp;levels[i].depth&gt;=0&amp;&amp;(levelModels[levels[i].depth]=new Model(levels[i],this,ecModel));return createGraphFromNodeEdge(nodes,links,this,!0,function beforeLink(nodeData,edgeData){nodeData.wrapMethod("getItemModel",function(model,idx){var seriesModel=model.parentModel,layout2=seriesModel.getData().getItemLayout(idx);if(layout2){var nodeDepth=layout2.depth,levelModel=seriesModel.levelModels[nodeDepth];levelModel&amp;&amp;(model.parentModel=levelModel)}return model}),edgeData.wrapMethod("getItemModel",function(model,idx){var seriesModel=model.parentModel,layout2=seriesModel.getGraph().getEdgeByIndex(idx).node1.getLayout();if(layout2){var depth=layout2.depth,levelModel=seriesModel.levelModels[depth];levelModel&amp;&amp;(model.parentModel=levelModel)}return model})}).data},SankeySeriesModel2.prototype.setNodePosition=function(dataIndex,localPosition){var dataItem=(this.option.data||this.option.nodes)[dataIndex];dataItem.localX=localPosition[0],dataItem.localY=localPosition[1]},SankeySeriesModel2.prototype.getGraph=function(){return this.getData().graph},SankeySeriesModel2.prototype.getEdgeData=function(){return this.getGraph().edgeData},SankeySeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){function noValue(val){return isNaN(val)||null==val}if("edge"===dataType){var params=this.getDataParams(dataIndex,dataType),rawDataOpt=params.data,edgeValue=params.value;return createTooltipMarkup("nameValue",{name:rawDataOpt.source+" -- "+rawDataOpt.target,value:edgeValue,noValue:noValue(edgeValue)})}var value=this.getGraph().getNodeByIndex(dataIndex).getLayout().value,name_1=this.getDataParams(dataIndex,dataType).data.name;return createTooltipMarkup("nameValue",{name:null!=name_1?name_1+"":null,value:value,noValue:noValue(value)})},SankeySeriesModel2.prototype.optionUpdated=function(){},SankeySeriesModel2.prototype.getDataParams=function(dataIndex,dataType){var params=_super.prototype.getDataParams.call(this,dataIndex,dataType);if(null==params.value&amp;&amp;"node"===dataType){var nodeValue=this.getGraph().getNodeByIndex(dataIndex).getLayout().value;params.value=nodeValue}return params},SankeySeriesModel2.type="series.sankey",SankeySeriesModel2.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},SankeySeriesModel2}(SeriesModel);function sankeyLayout(ecModel,api){ecModel.eachSeriesByType("sankey",function(seriesModel){var nodeWidth=seriesModel.get("nodeWidth"),nodeGap=seriesModel.get("nodeGap"),layoutInfo=function getViewRect$1(seriesModel,api){return getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var width=layoutInfo.width,height=layoutInfo.height,graph=seriesModel.getGraph(),nodes=graph.nodes,edges=graph.edges;!function computeNodeValues(nodes){each$f(nodes,function(node){var value1=sum(node.outEdges,getEdgeValue),value2=sum(node.inEdges,getEdgeValue),nodeRawValue=node.getValue()||0,value=Math.max(value1,value2,nodeRawValue);node.setLayout({value:value},!0)})}(nodes),function layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations,orient,nodeAlign){(function computeNodeBreadths(nodes,edges,nodeWidth,width,height,orient,nodeAlign){for(var remainEdges=[],indegreeArr=[],zeroIndegrees=[],nextTargetNode=[],x=0,i=0;i&lt;edges.length;i++)remainEdges[i]=1;for(i=0;i&lt;nodes.length;i++)indegreeArr[i]=nodes[i].inEdges.length,0===indegreeArr[i]&amp;&amp;zeroIndegrees.push(nodes[i]);var maxNodeDepth=-1;for(;zeroIndegrees.length;){for(var idx=0;idx&lt;zeroIndegrees.length;idx++){var node=zeroIndegrees[idx],item=node.hostGraph.data.getRawDataItem(node.dataIndex),isItemDepth=null!=item.depth&amp;&amp;item.depth&gt;=0;isItemDepth&amp;&amp;item.depth&gt;maxNodeDepth&amp;&amp;(maxNodeDepth=item.depth),node.setLayout({depth:isItemDepth?item.depth:x},!0),"vertical"===orient?node.setLayout({dy:nodeWidth},!0):node.setLayout({dx:nodeWidth},!0);for(var edgeIdx=0;edgeIdx&lt;node.outEdges.length;edgeIdx++){var edge=node.outEdges[edgeIdx];remainEdges[edges.indexOf(edge)]=0;var targetNode=edge.node2;0===--indegreeArr[nodes.indexOf(targetNode)]&amp;&amp;nextTargetNode.indexOf(targetNode)&lt;0&amp;&amp;nextTargetNode.push(targetNode)}}++x,zeroIndegrees=nextTargetNode,nextTargetNode=[]}for(i=0;i&lt;remainEdges.length;i++)if(1===remainEdges[i])throw new Error("Sankey is a DAG, the original data has cycle!");var maxDepth=maxNodeDepth&gt;x-1?maxNodeDepth:x-1;nodeAlign&amp;&amp;"left"!==nodeAlign&amp;&amp;function adjustNodeWithNodeAlign(nodes,nodeAlign,orient,maxDepth){if("right"===nodeAlign){for(var nextSourceNode=[],remainNodes=nodes,nodeHeight=0;remainNodes.length;){for(var i=0;i&lt;remainNodes.length;i++){var node=remainNodes[i];node.setLayout({skNodeHeight:nodeHeight},!0);for(var j=0;j&lt;node.inEdges.length;j++){var edge=node.inEdges[j];nextSourceNode.indexOf(edge.node1)&lt;0&amp;&amp;nextSourceNode.push(edge.node1)}}remainNodes=nextSourceNode,nextSourceNode=[],++nodeHeight}each$f(nodes,function(node2){isNodeDepth(node2)||node2.setLayout({depth:Math.max(0,maxDepth-node2.getLayout().skNodeHeight)},!0)})}else"justify"===nodeAlign&amp;&amp;function moveSinksRight(nodes,maxDepth){each$f(nodes,function(node){isNodeDepth(node)||node.outEdges.length||node.setLayout({depth:maxDepth},!0)})}(nodes,maxDepth)}(nodes,nodeAlign,0,maxDepth);var kx="vertical"===orient?(height-nodeWidth)/maxDepth:(width-nodeWidth)/maxDepth;!function scaleNodeBreadths(nodes,kx,orient){each$f(nodes,function(node){var nodeDepth=node.getLayout().depth*kx;"vertical"===orient?node.setLayout({y:nodeDepth},!0):node.setLayout({x:nodeDepth},!0)})}(nodes,kx,orient)})(nodes,edges,nodeWidth,width,height,orient,nodeAlign),function computeNodeDepths(nodes,edges,height,width,nodeGap,iterations,orient){var nodesByBreadth=function prepareNodesByBreadth(nodes,orient){var nodesByBreadth=[],keyAttr="vertical"===orient?"y":"x",groupResult=groupData(nodes,function(node){return node.getLayout()[keyAttr]});return groupResult.keys.sort(function(a,b){return a-b}),each$f(groupResult.keys,function(key){nodesByBreadth.push(groupResult.buckets.get(key))}),nodesByBreadth}(nodes,orient);(function initializeNodeDepth(nodesByBreadth,edges,height,width,nodeGap,orient){var minKy=1/0;each$f(nodesByBreadth,function(nodes){var n=nodes.length,sum2=0;each$f(nodes,function(node){sum2+=node.getLayout().value});var ky="vertical"===orient?(width-(n-1)*nodeGap)/sum2:(height-(n-1)*nodeGap)/sum2;ky&lt;minKy&amp;&amp;(minKy=ky)}),each$f(nodesByBreadth,function(nodes){each$f(nodes,function(node,i){var nodeDy=node.getLayout().value*minKy;"vertical"===orient?(node.setLayout({x:i},!0),node.setLayout({dx:nodeDy},!0)):(node.setLayout({y:i},!0),node.setLayout({dy:nodeDy},!0))})}),each$f(edges,function(edge){var edgeDy=+edge.getValue()*minKy;edge.setLayout({dy:edgeDy},!0)})})(nodesByBreadth,edges,height,width,nodeGap,orient),resolveCollisions(nodesByBreadth,nodeGap,height,width,orient);for(var alpha=1;iterations&gt;0;iterations--)relaxRightToLeft(nodesByBreadth,alpha*=.99,orient),resolveCollisions(nodesByBreadth,nodeGap,height,width,orient),relaxLeftToRight(nodesByBreadth,alpha,orient),resolveCollisions(nodesByBreadth,nodeGap,height,width,orient)}(nodes,edges,height,width,nodeGap,iterations,orient),function computeEdgeDepths(nodes,orient){var keyAttr="vertical"===orient?"x":"y";each$f(nodes,function(node){node.outEdges.sort(function(a,b){return a.node2.getLayout()[keyAttr]-b.node2.getLayout()[keyAttr]}),node.inEdges.sort(function(a,b){return a.node1.getLayout()[keyAttr]-b.node1.getLayout()[keyAttr]})}),each$f(nodes,function(node){var sy=0,ty=0;each$f(node.outEdges,function(edge){edge.setLayout({sy:sy},!0),sy+=edge.getLayout().dy}),each$f(node.inEdges,function(edge){edge.setLayout({ty:ty},!0),ty+=edge.getLayout().dy})})}(nodes,orient)}(nodes,edges,nodeWidth,nodeGap,width,height,0!==filter(nodes,function(node){return 0===node.getLayout().value}).length?0:seriesModel.get("layoutIterations"),seriesModel.get("orient"),seriesModel.get("nodeAlign"))})}function isNodeDepth(node){var item=node.hostGraph.data.getRawDataItem(node.dataIndex);return null!=item.depth&amp;&amp;item.depth&gt;=0}function resolveCollisions(nodesByBreadth,nodeGap,height,width,orient){var keyAttr="vertical"===orient?"x":"y";each$f(nodesByBreadth,function(nodes){var nodeX,node,dy;nodes.sort(function(a,b){return a.getLayout()[keyAttr]-b.getLayout()[keyAttr]});for(var y0=0,n=nodes.length,nodeDyAttr="vertical"===orient?"dx":"dy",i=0;i&lt;n;i++)(dy=y0-(node=nodes[i]).getLayout()[keyAttr])&gt;0&amp;&amp;(nodeX=node.getLayout()[keyAttr]+dy,"vertical"===orient?node.setLayout({x:nodeX},!0):node.setLayout({y:nodeX},!0)),y0=node.getLayout()[keyAttr]+node.getLayout()[nodeDyAttr]+nodeGap;if((dy=y0-nodeGap-("vertical"===orient?width:height))&gt;0){nodeX=node.getLayout()[keyAttr]-dy,"vertical"===orient?node.setLayout({x:nodeX},!0):node.setLayout({y:nodeX},!0),y0=nodeX;for(i=n-2;i&gt;=0;--i)(dy=(node=nodes[i]).getLayout()[keyAttr]+node.getLayout()[nodeDyAttr]+nodeGap-y0)&gt;0&amp;&amp;(nodeX=node.getLayout()[keyAttr]-dy,"vertical"===orient?node.setLayout({x:nodeX},!0):node.setLayout({y:nodeX},!0)),y0=node.getLayout()[keyAttr]}})}function relaxRightToLeft(nodesByBreadth,alpha,orient){each$f(nodesByBreadth.slice().reverse(),function(nodes){each$f(nodes,function(node){if(node.outEdges.length){var y=sum(node.outEdges,weightedTarget,orient)/sum(node.outEdges,getEdgeValue);if(isNaN(y)){var len2=node.outEdges.length;y=len2?sum(node.outEdges,centerTarget,orient)/len2:0}if("vertical"===orient){var nodeX=node.getLayout().x+(y-center(node,orient))*alpha;node.setLayout({x:nodeX},!0)}else{var nodeY=node.getLayout().y+(y-center(node,orient))*alpha;node.setLayout({y:nodeY},!0)}}})})}function weightedTarget(edge,orient){return center(edge.node2,orient)*edge.getValue()}function centerTarget(edge,orient){return center(edge.node2,orient)}function weightedSource(edge,orient){return center(edge.node1,orient)*edge.getValue()}function centerSource(edge,orient){return center(edge.node1,orient)}function center(node,orient){return"vertical"===orient?node.getLayout().x+node.getLayout().dx/2:node.getLayout().y+node.getLayout().dy/2}function getEdgeValue(edge){return edge.getValue()}function sum(array,cb,orient){for(var sum2=0,len2=array.length,i=-1;++i&lt;len2;){var value=+cb(array[i],orient);isNaN(value)||(sum2+=value)}return sum2}function relaxLeftToRight(nodesByBreadth,alpha,orient){each$f(nodesByBreadth,function(nodes){each$f(nodes,function(node){if(node.inEdges.length){var y=sum(node.inEdges,weightedSource,orient)/sum(node.inEdges,getEdgeValue);if(isNaN(y)){var len2=node.inEdges.length;y=len2?sum(node.inEdges,centerSource,orient)/len2:0}if("vertical"===orient){var nodeX=node.getLayout().x+(y-center(node,orient))*alpha;node.setLayout({x:nodeX},!0)}else{var nodeY=node.getLayout().y+(y-center(node,orient))*alpha;node.setLayout({y:nodeY},!0)}}})})}function sankeyVisual(ecModel){ecModel.eachSeriesByType("sankey",function(seriesModel){var graph=seriesModel.getGraph(),nodes=graph.nodes,edges=graph.edges;if(nodes.length){var minValue_1=1/0,maxValue_1=-1/0;each$f(nodes,function(node){var nodeValue=node.getLayout().value;nodeValue&lt;minValue_1&amp;&amp;(minValue_1=nodeValue),nodeValue&gt;maxValue_1&amp;&amp;(maxValue_1=nodeValue)}),each$f(nodes,function(node){var mapValueToColor=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[minValue_1,maxValue_1],visual:seriesModel.get("color")}).mapValueToVisual(node.getLayout().value),customColor=node.getModel().get(["itemStyle","color"]);null!=customColor?(node.setVisual("color",customColor),node.setVisual("style",{fill:customColor})):(node.setVisual("color",mapValueToColor),node.setVisual("style",{fill:mapValueToColor}))})}edges.length&amp;&amp;each$f(edges,function(edge){var edgeStyle=edge.getModel().get("lineStyle");edge.setVisual("style",edgeStyle)})})}var WhiskerBoxCommonMixin=function(){function WhiskerBoxCommonMixin2(){}return WhiskerBoxCommonMixin2.prototype._hasEncodeRule=function(key){var encodeRules=this.getEncode();return encodeRules&amp;&amp;null!=encodeRules.get(key)},WhiskerBoxCommonMixin2.prototype.getInitialData=function(option,ecModel){var ordinalMeta,addOrdinal,xAxisModel=ecModel.getComponent("xAxis",this.get("xAxisIndex")),yAxisModel=ecModel.getComponent("yAxis",this.get("yAxisIndex")),xAxisType=xAxisModel.get("type"),yAxisType=yAxisModel.get("type");"category"===xAxisType?(option.layout="horizontal",ordinalMeta=xAxisModel.getOrdinalMeta(),addOrdinal=!this._hasEncodeRule("x")):"category"===yAxisType?(option.layout="vertical",ordinalMeta=yAxisModel.getOrdinalMeta(),addOrdinal=!this._hasEncodeRule("y")):option.layout=option.layout||"horizontal";var coordDims=["x","y"],baseAxisDimIndex="horizontal"===option.layout?0:1,baseAxisDim=this._baseAxisDim=coordDims[baseAxisDimIndex],otherAxisDim=coordDims[1-baseAxisDimIndex],axisModels=[xAxisModel,yAxisModel],baseAxisType=axisModels[baseAxisDimIndex].get("type"),otherAxisType=axisModels[1-baseAxisDimIndex].get("type"),data=option.data;if(data&amp;&amp;addOrdinal){var newOptionData_1=[];each$f(data,function(item,index){var newItem;isArray$1(item)?(newItem=item.slice(),item.unshift(index)):isArray$1(item.value)?((newItem=extend({},item)).value=newItem.value.slice(),item.value.unshift(index)):newItem=item,newOptionData_1.push(newItem)}),option.data=newOptionData_1}var defaultValueDimensions=this.defaultValueDimensions,coordDimensions=[{name:baseAxisDim,type:getDimensionTypeByAxis(baseAxisType),ordinalMeta:ordinalMeta,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:otherAxisDim,type:getDimensionTypeByAxis(otherAxisType),dimsDef:defaultValueDimensions.slice()}];return createSeriesDataSimply(this,{coordDimensions:coordDimensions,dimensionsCount:defaultValueDimensions.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,coordDimensions,this)})},WhiskerBoxCommonMixin2.prototype.getBaseAxis=function(){var dim=this._baseAxisDim;return this.ecModel.getComponent(dim+"Axis",this.get(dim+"AxisIndex")).axis},WhiskerBoxCommonMixin2}(),BoxplotSeriesModel=function(_super){function BoxplotSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=BoxplotSeriesModel2.type,_this.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],_this.visualDrawType="stroke",_this}return __extends$1(BoxplotSeriesModel2,_super),BoxplotSeriesModel2.type="series.boxplot",BoxplotSeriesModel2.dependencies=["xAxis","yAxis","grid"],BoxplotSeriesModel2.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},BoxplotSeriesModel2}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(_super){function BoxplotView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=BoxplotView2.type,_this}return __extends$1(BoxplotView2,_super),BoxplotView2.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),group=this.group,oldData=this._data;this._data||group.removeAll();var constDim="horizontal"===seriesModel.get("layout")?1:0;data.diff(oldData).add(function(newIdx){if(data.hasValue(newIdx)){var symbolEl=createNormalBox$1(data.getItemLayout(newIdx),data,newIdx,constDim,!0);data.setItemGraphicEl(newIdx,symbolEl),group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);if(data.hasValue(newIdx)){var itemLayout=data.getItemLayout(newIdx);symbolEl?(saveOldStyle(symbolEl),updateNormalBoxData(itemLayout,symbolEl,data,newIdx)):symbolEl=createNormalBox$1(itemLayout,data,newIdx,constDim),group.add(symbolEl),data.setItemGraphicEl(newIdx,symbolEl)}else group.remove(symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&amp;&amp;group.remove(el)}).execute(),this._data=data},BoxplotView2.prototype.remove=function(ecModel){var group=this.group,data=this._data;this._data=null,data&amp;&amp;data.eachItemGraphicEl(function(el){el&amp;&amp;group.remove(el)})},BoxplotView2.type="boxplot",BoxplotView2}(ChartView),BoxPathShape=function(){return function BoxPathShape2(){}}(),BoxPath=function(_super){function BoxPath2(opts){var _this=_super.call(this,opts)||this;return _this.type="boxplotBoxPath",_this}return __extends$1(BoxPath2,_super),BoxPath2.prototype.getDefaultShape=function(){return new BoxPathShape},BoxPath2.prototype.buildPath=function(ctx,shape){var ends=shape.points,i=0;for(ctx.moveTo(ends[i][0],ends[i][1]),i++;i&lt;4;i++)ctx.lineTo(ends[i][0],ends[i][1]);for(ctx.closePath();i&lt;ends.length;i++)ctx.moveTo(ends[i][0],ends[i][1]),i++,ctx.lineTo(ends[i][0],ends[i][1])},BoxPath2}(Path);function createNormalBox$1(itemLayout,data,dataIndex,constDim,isInit){var ends=itemLayout.ends,el=new BoxPath({shape:{points:isInit?transInit$1(ends,constDim,itemLayout):ends}});return updateNormalBoxData(itemLayout,el,data,dataIndex,isInit),el}function updateNormalBoxData(itemLayout,el,data,dataIndex,isInit){var seriesModel=data.hostModel;(0,graphic$1[isInit?"initProps":"updateProps"])(el,{shape:{points:itemLayout.ends}},seriesModel,dataIndex),el.useStyle(data.getItemVisual(dataIndex,"style")),el.style.strokeNoScale=!0,el.z2=100;var itemModel=data.getItemModel(dataIndex),emphasisModel=itemModel.getModel("emphasis");setStatesStylesFromModel(el,itemModel),toggleHoverEmphasis(el,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}function transInit$1(points2,dim,itemLayout){return map$1(points2,function(point){return(point=point.slice())[dim]=itemLayout.initBaseline,point})}var each$9=each$f;function boxplotLayout(ecModel){var groupResult=function groupSeriesByAxis(ecModel){var result=[],axisList=[];return ecModel.eachSeriesByType("boxplot",function(seriesModel){var baseAxis=seriesModel.getBaseAxis(),idx=indexOf(axisList,baseAxis);idx&lt;0&amp;&amp;(idx=axisList.length,axisList[idx]=baseAxis,result[idx]={axis:baseAxis,seriesModels:[]}),result[idx].seriesModels.push(seriesModel)}),result}(ecModel);each$9(groupResult,function(groupItem){var seriesModels=groupItem.seriesModels;seriesModels.length&amp;&amp;(!function calculateBase(groupItem){var bandWidth,baseAxis=groupItem.axis,seriesModels=groupItem.seriesModels,seriesCount=seriesModels.length,boxWidthList=groupItem.boxWidthList=[],boxOffsetList=groupItem.boxOffsetList=[],boundList=[];if("category"===baseAxis.type)bandWidth=baseAxis.getBandWidth();else{var maxDataCount_1=0;each$9(seriesModels,function(seriesModel){maxDataCount_1=Math.max(maxDataCount_1,seriesModel.getData().count())});var extent3=baseAxis.getExtent();bandWidth=Math.abs(extent3[1]-extent3[0])/maxDataCount_1}each$9(seriesModels,function(seriesModel){var boxWidthBound=seriesModel.get("boxWidth");isArray$1(boxWidthBound)||(boxWidthBound=[boxWidthBound,boxWidthBound]),boundList.push([parsePercent(boxWidthBound[0],bandWidth)||0,parsePercent(boxWidthBound[1],bandWidth)||0])});var availableWidth=.8*bandWidth-2,boxGap=availableWidth/seriesCount*.3,boxWidth=(availableWidth-boxGap*(seriesCount-1))/seriesCount,base2=boxWidth/2-availableWidth/2;each$9(seriesModels,function(seriesModel,idx){boxOffsetList.push(base2),base2+=boxGap+boxWidth,boxWidthList.push(Math.min(Math.max(boxWidth,boundList[idx][0]),boundList[idx][1]))})}(groupItem),each$9(seriesModels,function(seriesModel,idx){!function layoutSingleSeries(seriesModel,offset,boxWidth){var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),halfWidth=boxWidth/2,cDimIdx="horizontal"===seriesModel.get("layout")?0:1,vDimIdx=1-cDimIdx,coordDims=["x","y"],cDim=data.mapDimension(coordDims[cDimIdx]),vDims=data.mapDimensionsAll(coordDims[vDimIdx]);if(null==cDim||vDims.length&lt;5)return;for(var dataIndex=0;dataIndex&lt;data.count();dataIndex++){var axisDimVal=data.get(cDim,dataIndex),median=getPoint(axisDimVal,vDims[2],dataIndex),end1=getPoint(axisDimVal,vDims[0],dataIndex),end2=getPoint(axisDimVal,vDims[1],dataIndex),end4=getPoint(axisDimVal,vDims[3],dataIndex),end5=getPoint(axisDimVal,vDims[4],dataIndex),ends=[];addBodyEnd(ends,end2,!1),addBodyEnd(ends,end4,!0),ends.push(end1,end2,end5,end4),layEndLine(ends,end1),layEndLine(ends,end5),layEndLine(ends,median),data.setItemLayout(dataIndex,{initBaseline:median[vDimIdx],ends:ends})}function getPoint(axisDimVal2,dim,dataIndex2){var point,val=data.get(dim,dataIndex2),p=[];return p[cDimIdx]=axisDimVal2,p[vDimIdx]=val,isNaN(axisDimVal2)||isNaN(val)?point=[NaN,NaN]:(point=coordSys.dataToPoint(p))[cDimIdx]+=offset,point}function addBodyEnd(ends2,point,start2){var point1=point.slice(),point2=point.slice();point1[cDimIdx]+=halfWidth,point2[cDimIdx]-=halfWidth,start2?ends2.push(point1,point2):ends2.push(point2,point1)}function layEndLine(ends2,endCenter){var from=endCenter.slice(),to=endCenter.slice();from[cDimIdx]-=halfWidth,to[cDimIdx]+=halfWidth,ends2.push(from,to)}}(seriesModel,groupItem.boxOffsetList[idx],groupItem.boxWidthList[idx])}))})}var boxplotTransform={type:"echarts:boxplot",transform:function transform(params){var upstream=params.upstream;if("arrayRows"!==upstream.sourceFormat){throwError("")}var result=function prepareBoxplotData(rawData,opt){for(var boxData=[],outliers=[],boundIQR=(opt=opt||{}).boundIQR,useExtreme="none"===boundIQR||0===boundIQR,i=0;i&lt;rawData.length;i++){var ascList=asc$2(rawData[i].slice()),Q1=quantile(ascList,.25),Q2=quantile(ascList,.5),Q3=quantile(ascList,.75),min3=ascList[0],max3=ascList[ascList.length-1],bound=(null==boundIQR?1.5:boundIQR)*(Q3-Q1),low=useExtreme?min3:Math.max(min3,Q1-bound),high=useExtreme?max3:Math.min(max3,Q3+bound),itemNameFormatter=opt.itemNameFormatter,itemName=isFunction(itemNameFormatter)?itemNameFormatter({value:i}):isString(itemNameFormatter)?itemNameFormatter.replace("{value}",i+""):i+"";boxData.push([itemName,low,Q1,Q2,Q3,high]);for(var j=0;j&lt;ascList.length;j++){var dataItem=ascList[j];if(dataItem&lt;low||dataItem&gt;high){var outlier=[itemName,dataItem];outliers.push(outlier)}}}return{boxData:boxData,outliers:outliers}}(upstream.getRawData(),params.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:result.boxData},{data:result.outliers}]}};var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(sign,model){return model.get(sign&gt;0?positiveColorQuery:negativeColorQuery)}function getBorderColor(sign,model){return model.get(0===sign?dojiBorderColorQuery:sign&gt;0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(seriesModel,ecModel){if(!ecModel.isSeriesFiltered(seriesModel))return!seriesModel.pipelineContext.large&amp;&amp;{progress:function(params,data){for(var dataIndex;null!=(dataIndex=params.next());){var itemModel=data.getItemModel(dataIndex),sign=data.getItemLayout(dataIndex).sign,style=itemModel.getItemStyle();style.fill=getColor(sign,itemModel),style.stroke=getBorderColor(sign,itemModel)||style.fill,extend(data.ensureUniqueItemVisual(dataIndex,"style"),style)}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(_super){function CandlestickView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CandlestickView2.type,_this}return __extends$1(CandlestickView2,_super),CandlestickView2.prototype.render=function(seriesModel,ecModel,api){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(seriesModel),this._isLargeDraw?this._renderLarge(seriesModel):this._renderNormal(seriesModel)},CandlestickView2.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){this._clear(),this._updateDrawMode(seriesModel)},CandlestickView2.prototype.incrementalRender=function(params,seriesModel,ecModel,api){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(params,seriesModel):this._incrementalRenderNormal(params,seriesModel)},CandlestickView2.prototype.eachRendered=function(cb){traverseElements(this._progressiveEls||this.group,cb)},CandlestickView2.prototype._updateDrawMode=function(seriesModel){var isLargeDraw=seriesModel.pipelineContext.large;null!=this._isLargeDraw&amp;&amp;isLargeDraw===this._isLargeDraw||(this._isLargeDraw=isLargeDraw,this._clear())},CandlestickView2.prototype._renderNormal=function(seriesModel){var data=seriesModel.getData(),oldData=this._data,group=this.group,isSimpleBox=data.getLayout("isSimpleBox"),needsClip=seriesModel.get("clip",!0),coord=seriesModel.coordinateSystem,clipArea=coord.getArea&amp;&amp;coord.getArea();this._data||group.removeAll(),data.diff(oldData).add(function(newIdx){if(data.hasValue(newIdx)){var itemLayout=data.getItemLayout(newIdx);if(needsClip&amp;&amp;isNormalBoxClipped(clipArea,itemLayout))return;var el=createNormalBox(itemLayout,newIdx,!0);initProps(el,{shape:{points:itemLayout.ends}},seriesModel,newIdx),setBoxCommon(el,data,newIdx,isSimpleBox),group.add(el),data.setItemGraphicEl(newIdx,el)}}).update(function(newIdx,oldIdx){var el=oldData.getItemGraphicEl(oldIdx);if(data.hasValue(newIdx)){var itemLayout=data.getItemLayout(newIdx);needsClip&amp;&amp;isNormalBoxClipped(clipArea,itemLayout)?group.remove(el):(el?(updateProps$1(el,{shape:{points:itemLayout.ends}},seriesModel,newIdx),saveOldStyle(el)):el=createNormalBox(itemLayout),setBoxCommon(el,data,newIdx,isSimpleBox),group.add(el),data.setItemGraphicEl(newIdx,el))}else group.remove(el)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&amp;&amp;group.remove(el)}).execute(),this._data=data},CandlestickView2.prototype._renderLarge=function(seriesModel){this._clear(),createLarge(seriesModel,this.group);var clipPath=seriesModel.get("clip",!0)?createClipPath(seriesModel.coordinateSystem,!1,seriesModel):null;clipPath?this.group.setClipPath(clipPath):this.group.removeClipPath()},CandlestickView2.prototype._incrementalRenderNormal=function(params,seriesModel){for(var dataIndex,data=seriesModel.getData(),isSimpleBox=data.getLayout("isSimpleBox");null!=(dataIndex=params.next());){var el=createNormalBox(data.getItemLayout(dataIndex));setBoxCommon(el,data,dataIndex,isSimpleBox),el.incremental=!0,this.group.add(el),this._progressiveEls.push(el)}},CandlestickView2.prototype._incrementalRenderLarge=function(params,seriesModel){createLarge(seriesModel,this.group,this._progressiveEls,!0)},CandlestickView2.prototype.remove=function(ecModel){this._clear()},CandlestickView2.prototype._clear=function(){this.group.removeAll(),this._data=null},CandlestickView2.type="candlestick",CandlestickView2}(ChartView),NormalBoxPathShape=function(){return function NormalBoxPathShape2(){}}(),NormalBoxPath=function(_super){function NormalBoxPath2(opts){var _this=_super.call(this,opts)||this;return _this.type="normalCandlestickBox",_this}return __extends$1(NormalBoxPath2,_super),NormalBoxPath2.prototype.getDefaultShape=function(){return new NormalBoxPathShape},NormalBoxPath2.prototype.buildPath=function(ctx,shape){var ends=shape.points;this.__simpleBox?(ctx.moveTo(ends[4][0],ends[4][1]),ctx.lineTo(ends[6][0],ends[6][1])):(ctx.moveTo(ends[0][0],ends[0][1]),ctx.lineTo(ends[1][0],ends[1][1]),ctx.lineTo(ends[2][0],ends[2][1]),ctx.lineTo(ends[3][0],ends[3][1]),ctx.closePath(),ctx.moveTo(ends[4][0],ends[4][1]),ctx.lineTo(ends[5][0],ends[5][1]),ctx.moveTo(ends[6][0],ends[6][1]),ctx.lineTo(ends[7][0],ends[7][1]))},NormalBoxPath2}(Path);function createNormalBox(itemLayout,dataIndex,isInit){var ends=itemLayout.ends;return new NormalBoxPath({shape:{points:isInit?transInit(ends,itemLayout):ends},z2:100})}function isNormalBoxClipped(clipArea,itemLayout){for(var clipped=!0,i=0;i&lt;itemLayout.ends.length;i++)if(clipArea.contain(itemLayout.ends[i][0],itemLayout.ends[i][1])){clipped=!1;break}return clipped}function setBoxCommon(el,data,dataIndex,isSimpleBox){var itemModel=data.getItemModel(dataIndex);el.useStyle(data.getItemVisual(dataIndex,"style")),el.style.strokeNoScale=!0,el.__simpleBox=isSimpleBox,setStatesStylesFromModel(el,itemModel);var sign=data.getItemLayout(dataIndex).sign;each$f(el.states,function(state,stateName){var stateModel=itemModel.getModel(stateName),color2=getColor(sign,stateModel),borderColor=getBorderColor(sign,stateModel)||color2,stateStyle=state.style||(state.style={});color2&amp;&amp;(stateStyle.fill=color2),borderColor&amp;&amp;(stateStyle.stroke=borderColor)});var emphasisModel=itemModel.getModel("emphasis");toggleHoverEmphasis(el,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}function transInit(points2,itemLayout){return map$1(points2,function(point){return(point=point.slice())[1]=itemLayout.initBaseline,point})}var LargeBoxPathShape=function(){return function LargeBoxPathShape2(){}}(),LargeBoxPath=function(_super){function LargeBoxPath2(opts){var _this=_super.call(this,opts)||this;return _this.type="largeCandlestickBox",_this}return __extends$1(LargeBoxPath2,_super),LargeBoxPath2.prototype.getDefaultShape=function(){return new LargeBoxPathShape},LargeBoxPath2.prototype.buildPath=function(ctx,shape){for(var points2=shape.points,i=0;i&lt;points2.length;)if(this.__sign===points2[i++]){var x=points2[i++];ctx.moveTo(x,points2[i++]),ctx.lineTo(x,points2[i++])}else i+=3},LargeBoxPath2}(Path);function createLarge(seriesModel,group,progressiveEls,incremental){var largePoints=seriesModel.getData().getLayout("largePoints"),elP=new LargeBoxPath({shape:{points:largePoints},__sign:1,ignoreCoarsePointer:!0});group.add(elP);var elN=new LargeBoxPath({shape:{points:largePoints},__sign:-1,ignoreCoarsePointer:!0});group.add(elN);var elDoji=new LargeBoxPath({shape:{points:largePoints},__sign:0,ignoreCoarsePointer:!0});group.add(elDoji),setLargeStyle(1,elP,seriesModel),setLargeStyle(-1,elN,seriesModel),setLargeStyle(0,elDoji,seriesModel),incremental&amp;&amp;(elP.incremental=!0,elN.incremental=!0),progressiveEls&amp;&amp;progressiveEls.push(elP,elN)}function setLargeStyle(sign,el,seriesModel,data){var borderColor=getBorderColor(sign,seriesModel)||getColor(sign,seriesModel),itemStyle=seriesModel.getModel("itemStyle").getItemStyle(SKIP_PROPS);el.useStyle(itemStyle),el.style.fill=null,el.style.stroke=borderColor}var CandlestickSeriesModel=function(_super){function CandlestickSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CandlestickSeriesModel2.type,_this.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],_this}return __extends$1(CandlestickSeriesModel2,_super),CandlestickSeriesModel2.prototype.getShadowDim=function(){return"open"},CandlestickSeriesModel2.prototype.brushSelector=function(dataIndex,data,selectors){var itemLayout=data.getItemLayout(dataIndex);return itemLayout&amp;&amp;selectors.rect(itemLayout.brushRect)},CandlestickSeriesModel2.type="series.candlestick",CandlestickSeriesModel2.dependencies=["xAxis","yAxis","grid"],CandlestickSeriesModel2.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},CandlestickSeriesModel2}(SeriesModel);function candlestickPreprocessor(option){option&amp;&amp;isArray$1(option.series)&amp;&amp;each$f(option.series,function(seriesItem){isObject$3(seriesItem)&amp;&amp;"k"===seriesItem.type&amp;&amp;(seriesItem.type="candlestick")})}mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(seriesModel){var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),candleWidth=function calculateCandleWidth(seriesModel,data){var extent3,baseAxis=seriesModel.getBaseAxis(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():(extent3=baseAxis.getExtent(),Math.abs(extent3[1]-extent3[0])/data.count()),barMaxWidth=parsePercent(retrieve2(seriesModel.get("barMaxWidth"),bandWidth),bandWidth),barMinWidth=parsePercent(retrieve2(seriesModel.get("barMinWidth"),1),bandWidth),barWidth=seriesModel.get("barWidth");return null!=barWidth?parsePercent(barWidth,bandWidth):Math.max(Math.min(bandWidth/2,barMaxWidth),barMinWidth)}(seriesModel,data),coordDims=["x","y"],cDimI=data.getDimensionIndex(data.mapDimension(coordDims[0])),vDimsI=map$1(data.mapDimensionsAll(coordDims[1]),data.getDimensionIndex,data),openDimI=vDimsI[0],closeDimI=vDimsI[1],lowestDimI=vDimsI[2],highestDimI=vDimsI[3];if(data.setLayout({candleWidth:candleWidth,isSimpleBox:candleWidth&lt;=1.3}),!(cDimI&lt;0||vDimsI.length&lt;4))return{progress:seriesModel.pipelineContext.large?function largeProgress(params,data2){var point,dataIndex,points2=createFloat32Array(4*params.count),offset=0,tmpIn=[],tmpOut=[],store=data2.getStore(),hasDojiColor=!!seriesModel.get(["itemStyle","borderColorDoji"]);for(;null!=(dataIndex=params.next());){var axisDimVal=store.get(cDimI,dataIndex),openVal=store.get(openDimI,dataIndex),closeVal=store.get(closeDimI,dataIndex),lowestVal=store.get(lowestDimI,dataIndex),highestVal=store.get(highestDimI,dataIndex);isNaN(axisDimVal)||isNaN(lowestVal)||isNaN(highestVal)?(points2[offset++]=NaN,offset+=3):(points2[offset++]=getSign(store,dataIndex,openVal,closeVal,closeDimI,hasDojiColor),tmpIn[0]=axisDimVal,tmpIn[1]=lowestVal,point=coordSys.dataToPoint(tmpIn,null,tmpOut),points2[offset++]=point?point[0]:NaN,points2[offset++]=point?point[1]:NaN,tmpIn[1]=highestVal,point=coordSys.dataToPoint(tmpIn,null,tmpOut),points2[offset++]=point?point[1]:NaN)}data2.setLayout("largePoints",points2)}:function normalProgress(params,data2){var dataIndex,store=data2.getStore();for(;null!=(dataIndex=params.next());){var axisDimVal=store.get(cDimI,dataIndex),openVal=store.get(openDimI,dataIndex),closeVal=store.get(closeDimI,dataIndex),lowestVal=store.get(lowestDimI,dataIndex),highestVal=store.get(highestDimI,dataIndex),ocLow=Math.min(openVal,closeVal),ocHigh=Math.max(openVal,closeVal),ocLowPoint=getPoint(ocLow,axisDimVal),ocHighPoint=getPoint(ocHigh,axisDimVal),lowestPoint=getPoint(lowestVal,axisDimVal),highestPoint=getPoint(highestVal,axisDimVal),ends=[];addBodyEnd(ends,ocHighPoint,0),addBodyEnd(ends,ocLowPoint,1),ends.push(subPixelOptimizePoint(highestPoint),subPixelOptimizePoint(ocHighPoint),subPixelOptimizePoint(lowestPoint),subPixelOptimizePoint(ocLowPoint));var hasDojiColor=!!data2.getItemModel(dataIndex).get(["itemStyle","borderColorDoji"]);data2.setItemLayout(dataIndex,{sign:getSign(store,dataIndex,openVal,closeVal,closeDimI,hasDojiColor),initBaseline:openVal&gt;closeVal?ocHighPoint[1]:ocLowPoint[1],ends:ends,brushRect:makeBrushRect(lowestVal,highestVal,axisDimVal)})}function getPoint(val,axisDimVal2){var p=[];return p[0]=axisDimVal2,p[1]=val,isNaN(axisDimVal2)||isNaN(val)?[NaN,NaN]:coordSys.dataToPoint(p)}function addBodyEnd(ends2,point,start2){var point1=point.slice(),point2=point.slice();point1[0]=subPixelOptimize(point1[0]+candleWidth/2,1,!1),point2[0]=subPixelOptimize(point2[0]-candleWidth/2,1,!0),start2?ends2.push(point1,point2):ends2.push(point2,point1)}function makeBrushRect(lowestVal2,highestVal2,axisDimVal2){var pmin=getPoint(lowestVal2,axisDimVal2),pmax=getPoint(highestVal2,axisDimVal2);return pmin[0]-=candleWidth/2,pmax[0]-=candleWidth/2,{x:pmin[0],y:pmin[1],width:candleWidth,height:pmax[1]-pmin[1]}}function subPixelOptimizePoint(point){return point[0]=subPixelOptimize(point[0],1),point}}}}};function getSign(store,dataIndex,openVal,closeVal,closeDimI,hasDojiColor){return openVal&gt;closeVal?-1:openVal&lt;closeVal?1:hasDojiColor?0:dataIndex&gt;0?store.get(closeDimI,dataIndex-1)&lt;=closeVal?1:-1:1}function updateRipplePath(rippleGroup,effectCfg){var color2=effectCfg.rippleEffectColor||effectCfg.color;rippleGroup.eachChild(function(ripplePath){ripplePath.attr({z:effectCfg.z,zlevel:effectCfg.zlevel,style:{stroke:"stroke"===effectCfg.brushType?color2:null,fill:"fill"===effectCfg.brushType?color2:null}})})}var EffectSymbol=function(_super){function EffectSymbol2(data,idx){var _this=_super.call(this)||this,symbol=new Symbol$1(data,idx),rippleGroup=new Group$3;return _this.add(symbol),_this.add(rippleGroup),_this.updateData(data,idx),_this}return __extends$1(EffectSymbol2,_super),EffectSymbol2.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},EffectSymbol2.prototype.startEffectAnimation=function(effectCfg){for(var symbolType=effectCfg.symbolType,color2=effectCfg.color,rippleNumber=effectCfg.rippleNumber,rippleGroup=this.childAt(1),i=0;i&lt;rippleNumber;i++){var ripplePath=createSymbol$1(symbolType,-1,-1,2,2,color2);ripplePath.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var delay=-i/rippleNumber*effectCfg.period+effectCfg.effectOffset;ripplePath.animate("",!0).when(effectCfg.period,{scaleX:effectCfg.rippleScale/2,scaleY:effectCfg.rippleScale/2}).delay(delay).start(),ripplePath.animateStyle(!0).when(effectCfg.period,{opacity:0}).delay(delay).start(),rippleGroup.add(ripplePath)}updateRipplePath(rippleGroup,effectCfg)},EffectSymbol2.prototype.updateEffectAnimation=function(effectCfg){for(var oldEffectCfg=this._effectCfg,rippleGroup=this.childAt(1),DIFFICULT_PROPS=["symbolType","period","rippleScale","rippleNumber"],i=0;i&lt;DIFFICULT_PROPS.length;i++){var propName=DIFFICULT_PROPS[i];if(oldEffectCfg[propName]!==effectCfg[propName])return this.stopEffectAnimation(),void this.startEffectAnimation(effectCfg)}updateRipplePath(rippleGroup,effectCfg)},EffectSymbol2.prototype.highlight=function(){enterEmphasis(this)},EffectSymbol2.prototype.downplay=function(){leaveEmphasis(this)},EffectSymbol2.prototype.getSymbolType=function(){var symbol=this.childAt(0);return symbol&amp;&amp;symbol.getSymbolType()},EffectSymbol2.prototype.updateData=function(data,idx){var _this=this,seriesModel=data.hostModel;this.childAt(0).updateData(data,idx);var rippleGroup=this.childAt(1),itemModel=data.getItemModel(idx),symbolType=data.getItemVisual(idx,"symbol"),symbolSize=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize")),symbolStyle=data.getItemVisual(idx,"style"),color2=symbolStyle&amp;&amp;symbolStyle.fill,emphasisModel=itemModel.getModel("emphasis");rippleGroup.setScale(symbolSize),rippleGroup.traverse(function(ripplePath){ripplePath.setStyle("fill",color2)});var symbolOffset=normalizeSymbolOffset(data.getItemVisual(idx,"symbolOffset"),symbolSize);symbolOffset&amp;&amp;(rippleGroup.x=symbolOffset[0],rippleGroup.y=symbolOffset[1]);var symbolRotate=data.getItemVisual(idx,"symbolRotate");rippleGroup.rotation=(symbolRotate||0)*Math.PI/180||0;var effectCfg={};effectCfg.showEffectOn=seriesModel.get("showEffectOn"),effectCfg.rippleScale=itemModel.get(["rippleEffect","scale"]),effectCfg.brushType=itemModel.get(["rippleEffect","brushType"]),effectCfg.period=1e3*itemModel.get(["rippleEffect","period"]),effectCfg.effectOffset=idx/data.count(),effectCfg.z=seriesModel.getShallow("z")||0,effectCfg.zlevel=seriesModel.getShallow("zlevel")||0,effectCfg.symbolType=symbolType,effectCfg.color=color2,effectCfg.rippleEffectColor=itemModel.get(["rippleEffect","color"]),effectCfg.rippleNumber=itemModel.get(["rippleEffect","number"]),"render"===effectCfg.showEffectOn?(this._effectCfg?this.updateEffectAnimation(effectCfg):this.startEffectAnimation(effectCfg),this._effectCfg=effectCfg):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(toState){"emphasis"===toState?"render"!==effectCfg.showEffectOn&amp;&amp;_this.startEffectAnimation(effectCfg):"normal"===toState&amp;&amp;"render"!==effectCfg.showEffectOn&amp;&amp;_this.stopEffectAnimation()}),this._effectCfg=effectCfg,toggleHoverEmphasis(this,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))},EffectSymbol2.prototype.fadeOut=function(cb){cb&amp;&amp;cb()},EffectSymbol2}(Group$3),EffectScatterView=function(_super){function EffectScatterView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=EffectScatterView2.type,_this}return __extends$1(EffectScatterView2,_super),EffectScatterView2.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},EffectScatterView2.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),effectSymbolDraw=this._symbolDraw;effectSymbolDraw.updateData(data,{clipShape:this._getClipShape(seriesModel)}),this.group.add(effectSymbolDraw.group)},EffectScatterView2.prototype._getClipShape=function(seriesModel){var coordSys=seriesModel.coordinateSystem,clipArea=coordSys&amp;&amp;coordSys.getArea&amp;&amp;coordSys.getArea();return seriesModel.get("clip",!0)?clipArea:null},EffectScatterView2.prototype.updateTransform=function(seriesModel,ecModel,api){var data=seriesModel.getData();this.group.dirty();var res=pointsLayout("").reset(seriesModel,ecModel,api);res.progress&amp;&amp;res.progress({start:0,end:data.count(),count:data.count()},data),this._symbolDraw.updateLayout()},EffectScatterView2.prototype._updateGroupTransform=function(seriesModel){var coordSys=seriesModel.coordinateSystem;coordSys&amp;&amp;coordSys.getRoamTransform&amp;&amp;(this.group.transform=clone$2(coordSys.getRoamTransform()),this.group.decomposeTransform())},EffectScatterView2.prototype.remove=function(ecModel,api){this._symbolDraw&amp;&amp;this._symbolDraw.remove(!0)},EffectScatterView2.type="effectScatter",EffectScatterView2}(ChartView),EffectScatterSeriesModel=function(_super){function EffectScatterSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=EffectScatterSeriesModel2.type,_this.hasSymbolVisual=!0,_this}return __extends$1(EffectScatterSeriesModel2,_super),EffectScatterSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesData(null,this,{useEncodeDefaulter:!0})},EffectScatterSeriesModel2.prototype.brushSelector=function(dataIndex,data,selectors){return selectors.point(data.getItemLayout(dataIndex))},EffectScatterSeriesModel2.type="series.effectScatter",EffectScatterSeriesModel2.dependencies=["grid","polar"],EffectScatterSeriesModel2.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},EffectScatterSeriesModel2}(SeriesModel);var EffectLine=function(_super){function EffectLine2(lineData,idx,seriesScope){var _this=_super.call(this)||this;return _this.add(_this.createLine(lineData,idx,seriesScope)),_this._updateEffectSymbol(lineData,idx),_this}return __extends$1(EffectLine2,_super),EffectLine2.prototype.createLine=function(lineData,idx,seriesScope){return new Line(lineData,idx,seriesScope)},EffectLine2.prototype._updateEffectSymbol=function(lineData,idx){var effectModel=lineData.getItemModel(idx).getModel("effect"),size=effectModel.get("symbolSize"),symbolType=effectModel.get("symbol");isArray$1(size)||(size=[size,size]);var lineStyle=lineData.getItemVisual(idx,"style"),color2=effectModel.get("color")||lineStyle&amp;&amp;lineStyle.stroke,symbol=this.childAt(1);this._symbolType!==symbolType&amp;&amp;(this.remove(symbol),(symbol=createSymbol$1(symbolType,-.5,-.5,1,1,color2)).z2=100,symbol.culling=!0,this.add(symbol)),symbol&amp;&amp;(symbol.setStyle("shadowColor",color2),symbol.setStyle(effectModel.getItemStyle(["color"])),symbol.scaleX=size[0],symbol.scaleY=size[1],symbol.setColor(color2),this._symbolType=symbolType,this._symbolScale=size,this._updateEffectAnimation(lineData,effectModel,idx))},EffectLine2.prototype._updateEffectAnimation=function(lineData,effectModel,idx){var symbol=this.childAt(1);if(symbol){var points2=lineData.getItemLayout(idx),period=1e3*effectModel.get("period"),loop=effectModel.get("loop"),roundTrip=effectModel.get("roundTrip"),constantSpeed=effectModel.get("constantSpeed"),delayExpr=retrieve(effectModel.get("delay"),function(idx2){return idx2/lineData.count()*period/3});if(symbol.ignore=!0,this._updateAnimationPoints(symbol,points2),constantSpeed&gt;0&amp;&amp;(period=this._getLineLength(symbol)/constantSpeed*1e3),period!==this._period||loop!==this._loop||roundTrip!==this._roundTrip){symbol.stopAnimation();var delayNum=void 0;delayNum=isFunction(delayExpr)?delayExpr(idx):delayExpr,symbol.__t&gt;0&amp;&amp;(delayNum=-period*symbol.__t),this._animateSymbol(symbol,period,delayNum,loop,roundTrip)}this._period=period,this._loop=loop,this._roundTrip=roundTrip}},EffectLine2.prototype._animateSymbol=function(symbol,period,delayNum,loop,roundTrip){if(period&gt;0){symbol.__t=0;var self_1=this,animator=symbol.animate("",loop).when(roundTrip?2*period:period,{__t:roundTrip?2:1}).delay(delayNum).during(function(){self_1._updateSymbolPosition(symbol)});loop||animator.done(function(){self_1.remove(symbol)}),animator.start()}},EffectLine2.prototype._getLineLength=function(symbol){return dist$1(symbol.__p1,symbol.__cp1)+dist$1(symbol.__cp1,symbol.__p2)},EffectLine2.prototype._updateAnimationPoints=function(symbol,points2){symbol.__p1=points2[0],symbol.__p2=points2[1],symbol.__cp1=points2[2]||[(points2[0][0]+points2[1][0])/2,(points2[0][1]+points2[1][1])/2]},EffectLine2.prototype.updateData=function(lineData,idx,seriesScope){this.childAt(0).updateData(lineData,idx,seriesScope),this._updateEffectSymbol(lineData,idx)},EffectLine2.prototype._updateSymbolPosition=function(symbol){var p1=symbol.__p1,p2=symbol.__p2,cp1=symbol.__cp1,t=symbol.__t&lt;1?symbol.__t:2-symbol.__t,pos=[symbol.x,symbol.y],lastPos=pos.slice(),quadraticAt2=quadraticAt$1,quadraticDerivativeAt$1=quadraticDerivativeAt;pos[0]=quadraticAt2(p1[0],cp1[0],p2[0],t),pos[1]=quadraticAt2(p1[1],cp1[1],p2[1],t);var tx=symbol.__t&lt;1?quadraticDerivativeAt$1(p1[0],cp1[0],p2[0],t):quadraticDerivativeAt$1(p2[0],cp1[0],p1[0],1-t),ty=symbol.__t&lt;1?quadraticDerivativeAt$1(p1[1],cp1[1],p2[1],t):quadraticDerivativeAt$1(p2[1],cp1[1],p1[1],1-t);symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2,"line"!==this._symbolType&amp;&amp;"rect"!==this._symbolType&amp;&amp;"roundRect"!==this._symbolType||(void 0!==symbol.__lastT&amp;&amp;symbol.__lastT&lt;symbol.__t?(symbol.scaleY=1.05*dist$1(lastPos,pos),1===t&amp;&amp;(pos[0]=lastPos[0]+(pos[0]-lastPos[0])/2,pos[1]=lastPos[1]+(pos[1]-lastPos[1])/2)):1===symbol.__lastT?symbol.scaleY=2*dist$1(p1,pos):symbol.scaleY=this._symbolScale[1]),symbol.__lastT=symbol.__t,symbol.ignore=!1,symbol.x=pos[0],symbol.y=pos[1]},EffectLine2.prototype.updateLayout=function(lineData,idx){this.childAt(0).updateLayout(lineData,idx);var effectModel=lineData.getItemModel(idx).getModel("effect");this._updateEffectAnimation(lineData,effectModel,idx)},EffectLine2}(Group$3),Polyline=function(_super){function Polyline2(lineData,idx,seriesScope){var _this=_super.call(this)||this;return _this._createPolyline(lineData,idx,seriesScope),_this}return __extends$1(Polyline2,_super),Polyline2.prototype._createPolyline=function(lineData,idx,seriesScope){var points2=lineData.getItemLayout(idx),line=new Polyline$1({shape:{points:points2}});this.add(line),this._updateCommonStl(lineData,idx,seriesScope)},Polyline2.prototype.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;updateProps$1(this.childAt(0),{shape:{points:lineData.getItemLayout(idx)}},seriesModel,idx),this._updateCommonStl(lineData,idx,seriesScope)},Polyline2.prototype._updateCommonStl=function(lineData,idx,seriesScope){var line=this.childAt(0),itemModel=lineData.getItemModel(idx),emphasisLineStyle=seriesScope&amp;&amp;seriesScope.emphasisLineStyle,focus=seriesScope&amp;&amp;seriesScope.focus,blurScope=seriesScope&amp;&amp;seriesScope.blurScope,emphasisDisabled=seriesScope&amp;&amp;seriesScope.emphasisDisabled;if(!seriesScope||lineData.hasItemOption){var emphasisModel=itemModel.getModel("emphasis");emphasisLineStyle=emphasisModel.getModel("lineStyle").getLineStyle(),emphasisDisabled=emphasisModel.get("disabled"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope")}line.useStyle(lineData.getItemVisual(idx,"style")),line.style.fill=null,line.style.strokeNoScale=!0,line.ensureState("emphasis").style=emphasisLineStyle,toggleHoverEmphasis(this,focus,blurScope,emphasisDisabled)},Polyline2.prototype.updateLayout=function(lineData,idx){this.childAt(0).setShape("points",lineData.getItemLayout(idx))},Polyline2}(Group$3),EffectPolyline=function(_super){function EffectPolyline2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this._lastFrame=0,_this._lastFramePercent=0,_this}return __extends$1(EffectPolyline2,_super),EffectPolyline2.prototype.createLine=function(lineData,idx,seriesScope){return new Polyline(lineData,idx,seriesScope)},EffectPolyline2.prototype._updateAnimationPoints=function(symbol,points2){this._points=points2;for(var accLenArr=[0],len2=0,i=1;i&lt;points2.length;i++){var p1=points2[i-1],p2=points2[i];len2+=dist$1(p1,p2),accLenArr.push(len2)}if(0!==len2){for(i=0;i&lt;accLenArr.length;i++)accLenArr[i]/=len2;this._offsets=accLenArr,this._length=len2}else this._length=0},EffectPolyline2.prototype._getLineLength=function(){return this._length},EffectPolyline2.prototype._updateSymbolPosition=function(symbol){var t=symbol.__t&lt;1?symbol.__t:2-symbol.__t,points2=this._points,offsets=this._offsets,len2=points2.length;if(offsets){var frame,lastFrame=this._lastFrame;if(t&lt;this._lastFramePercent){for(frame=Math.min(lastFrame+1,len2-1);frame&gt;=0&amp;&amp;!(offsets[frame]&lt;=t);frame--);frame=Math.min(frame,len2-2)}else{for(frame=lastFrame;frame&lt;len2&amp;&amp;!(offsets[frame]&gt;t);frame++);frame=Math.min(frame-1,len2-2)}var p=(t-offsets[frame])/(offsets[frame+1]-offsets[frame]),p0=points2[frame],p1=points2[frame+1];symbol.x=p0[0]*(1-p)+p*p1[0],symbol.y=p0[1]*(1-p)+p*p1[1];var tx=symbol.__t&lt;1?p1[0]-p0[0]:p0[0]-p1[0],ty=symbol.__t&lt;1?p1[1]-p0[1]:p0[1]-p1[1];symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2,this._lastFrame=frame,this._lastFramePercent=t,symbol.ignore=!1}},EffectPolyline2}(EffectLine),LargeLinesPathShape=function(){return function LargeLinesPathShape2(){this.polyline=!1,this.curveness=0,this.segs=[]}}(),LargeLinesPath=function(_super){function LargeLinesPath2(opts){var _this=_super.call(this,opts)||this;return _this._off=0,_this.hoverDataIdx=-1,_this}return __extends$1(LargeLinesPath2,_super),LargeLinesPath2.prototype.reset=function(){this.notClear=!1,this._off=0},LargeLinesPath2.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},LargeLinesPath2.prototype.getDefaultShape=function(){return new LargeLinesPathShape},LargeLinesPath2.prototype.buildPath=function(ctx,shape){var i,segs=shape.segs,curveness=shape.curveness;if(shape.polyline)for(i=this._off;i&lt;segs.length;){var count2=segs[i++];if(count2&gt;0){ctx.moveTo(segs[i++],segs[i++]);for(var k=1;k&lt;count2;k++)ctx.lineTo(segs[i++],segs[i++])}}else for(i=this._off;i&lt;segs.length;){var x0=segs[i++],y0=segs[i++],x1=segs[i++],y1=segs[i++];if(ctx.moveTo(x0,y0),curveness&gt;0){var x2=(x0+x1)/2-(y0-y1)*curveness,y2=(y0+y1)/2-(x1-x0)*curveness;ctx.quadraticCurveTo(x2,y2,x1,y1)}else ctx.lineTo(x1,y1)}this.incremental&amp;&amp;(this._off=i,this.notClear=!0)},LargeLinesPath2.prototype.findDataIndex=function(x,y){var shape=this.shape,segs=shape.segs,curveness=shape.curveness,lineWidth=this.style.lineWidth;if(shape.polyline)for(var dataIndex=0,i=0;i&lt;segs.length;){var count2=segs[i++];if(count2&gt;0)for(var x0=segs[i++],y0=segs[i++],k=1;k&lt;count2;k++){if(containStroke$4(x0,y0,x1=segs[i++],y1=segs[i++],lineWidth,x,y))return dataIndex}dataIndex++}else for(dataIndex=0,i=0;i&lt;segs.length;){x0=segs[i++],y0=segs[i++];var x1=segs[i++],y1=segs[i++];if(curveness&gt;0){if(containStroke$2(x0,y0,(x0+x1)/2-(y0-y1)*curveness,(y0+y1)/2-(x1-x0)*curveness,x1,y1,lineWidth,x,y))return dataIndex}else if(containStroke$4(x0,y0,x1,y1,lineWidth,x,y))return dataIndex;dataIndex++}return-1},LargeLinesPath2.prototype.contain=function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect();return x=localPos[0],y=localPos[1],rect.contain(x,y)?(this.hoverDataIdx=this.findDataIndex(x,y))&gt;=0:(this.hoverDataIdx=-1,!1)},LargeLinesPath2.prototype.getBoundingRect=function(){var rect=this._rect;if(!rect){for(var points2=this.shape.segs,minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i&lt;points2.length;){var x=points2[i++],y=points2[i++];minX=Math.min(x,minX),maxX=Math.max(x,maxX),minY=Math.min(y,minY),maxY=Math.max(y,maxY)}rect=this._rect=new BoundingRect(minX,minY,maxX,maxY)}return rect},LargeLinesPath2}(Path),LargeLineDraw=function(){function LargeLineDraw2(){this.group=new Group$3}return LargeLineDraw2.prototype.updateData=function(data){this._clear();var lineEl=this._create();lineEl.setShape({segs:data.getLayout("linesPoints")}),this._setCommon(lineEl,data)},LargeLineDraw2.prototype.incrementalPrepareUpdate=function(data){this.group.removeAll(),this._clear()},LargeLineDraw2.prototype.incrementalUpdate=function(taskParams,data){var lastAdded=this._newAdded[0],linePoints=data.getLayout("linesPoints"),oldSegs=lastAdded&amp;&amp;lastAdded.shape.segs;if(oldSegs&amp;&amp;oldSegs.length&lt;2e4){var oldLen=oldSegs.length,newSegs=new Float32Array(oldLen+linePoints.length);newSegs.set(oldSegs),newSegs.set(linePoints,oldLen),lastAdded.setShape({segs:newSegs})}else{this._newAdded=[];var lineEl=this._create();lineEl.incremental=!0,lineEl.setShape({segs:linePoints}),this._setCommon(lineEl,data),lineEl.__startIndex=taskParams.start}},LargeLineDraw2.prototype.remove=function(){this._clear()},LargeLineDraw2.prototype.eachRendered=function(cb){this._newAdded[0]&amp;&amp;cb(this._newAdded[0])},LargeLineDraw2.prototype._create=function(){var lineEl=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(lineEl),this.group.add(lineEl),lineEl},LargeLineDraw2.prototype._setCommon=function(lineEl,data,isIncremental){var hostModel=data.hostModel;lineEl.setShape({polyline:hostModel.get("polyline"),curveness:hostModel.get(["lineStyle","curveness"])}),lineEl.useStyle(hostModel.getModel("lineStyle").getLineStyle()),lineEl.style.strokeNoScale=!0;var style=data.getVisual("style");style&amp;&amp;style.stroke&amp;&amp;lineEl.setStyle("stroke",style.stroke),lineEl.setStyle("fill",null);var ecData=getECData(lineEl);ecData.seriesIndex=hostModel.seriesIndex,lineEl.on("mousemove",function(e2){ecData.dataIndex=null;var dataIndex=lineEl.hoverDataIdx;dataIndex&gt;0&amp;&amp;(ecData.dataIndex=dataIndex+lineEl.__startIndex)})},LargeLineDraw2.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},LargeLineDraw2}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys){var isPolyline=seriesModel.get("polyline"),isLarge=seriesModel.pipelineContext.large;return{progress:function(params,lineData){var lineCoords=[];if(isLarge){var points2=void 0,segCount=params.end-params.start;if(isPolyline){for(var totalCoordsCount=0,i=params.start;i&lt;params.end;i++)totalCoordsCount+=seriesModel.getLineCoordsCount(i);points2=new Float32Array(segCount+2*totalCoordsCount)}else points2=new Float32Array(4*segCount);var offset=0,pt=[];for(i=params.start;i&lt;params.end;i++){var len2=seriesModel.getLineCoords(i,lineCoords);isPolyline&amp;&amp;(points2[offset++]=len2);for(var k=0;k&lt;len2;k++)pt=coordSys.dataToPoint(lineCoords[k],!1,pt),points2[offset++]=pt[0],points2[offset++]=pt[1]}lineData.setLayout("linesPoints",points2)}else for(i=params.start;i&lt;params.end;i++){var itemModel=lineData.getItemModel(i),pts=(len2=seriesModel.getLineCoords(i,lineCoords),[]);if(isPolyline)for(var j=0;j&lt;len2;j++)pts.push(coordSys.dataToPoint(lineCoords[j]));else{pts[0]=coordSys.dataToPoint(lineCoords[0]),pts[1]=coordSys.dataToPoint(lineCoords[1]);var curveness=itemModel.get(["lineStyle","curveness"]);+curveness&amp;&amp;(pts[2]=[(pts[0][0]+pts[1][0])/2-(pts[0][1]-pts[1][1])*curveness,(pts[0][1]+pts[1][1])/2-(pts[1][0]-pts[0][0])*curveness])}lineData.setItemLayout(i,pts)}}}}}},LinesView=function(_super){function LinesView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=LinesView2.type,_this}return __extends$1(LinesView2,_super),LinesView2.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),lineDraw=this._updateLineDraw(data,seriesModel),zlevel=seriesModel.get("zlevel"),trailLength=seriesModel.get(["effect","trailLength"]),zr=api.getZr(),isSvg="svg"===zr.painter.getType();isSvg||zr.painter.getLayer(zlevel).clear(!0),null==this._lastZlevel||isSvg||zr.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(seriesModel)&amp;&amp;trailLength&gt;0&amp;&amp;(isSvg||zr.configLayer(zlevel,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(trailLength/10+.9,1),0)})),lineDraw.updateData(data);var clipPath=seriesModel.get("clip",!0)&amp;&amp;createClipPath(seriesModel.coordinateSystem,!1,seriesModel);clipPath?this.group.setClipPath(clipPath):this.group.removeClipPath(),this._lastZlevel=zlevel,this._finished=!0},LinesView2.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){var data=seriesModel.getData();this._updateLineDraw(data,seriesModel).incrementalPrepareUpdate(data),this._clearLayer(api),this._finished=!1},LinesView2.prototype.incrementalRender=function(taskParams,seriesModel,ecModel){this._lineDraw.incrementalUpdate(taskParams,seriesModel.getData()),this._finished=taskParams.end===seriesModel.getData().count()},LinesView2.prototype.eachRendered=function(cb){this._lineDraw&amp;&amp;this._lineDraw.eachRendered(cb)},LinesView2.prototype.updateTransform=function(seriesModel,ecModel,api){var data=seriesModel.getData(),pipelineContext=seriesModel.pipelineContext;if(!this._finished||pipelineContext.large||pipelineContext.progressiveRender)return{update:!0};var res=linesLayout.reset(seriesModel,ecModel,api);res.progress&amp;&amp;res.progress({start:0,end:data.count(),count:data.count()},data),this._lineDraw.updateLayout(),this._clearLayer(api)},LinesView2.prototype._updateLineDraw=function(data,seriesModel){var lineDraw=this._lineDraw,hasEffect=this._showEffect(seriesModel),isPolyline=!!seriesModel.get("polyline"),isLargeDraw=seriesModel.pipelineContext.large;return lineDraw&amp;&amp;hasEffect===this._hasEffet&amp;&amp;isPolyline===this._isPolyline&amp;&amp;isLargeDraw===this._isLargeDraw||(lineDraw&amp;&amp;lineDraw.remove(),lineDraw=this._lineDraw=isLargeDraw?new LargeLineDraw:new LineDraw(isPolyline?hasEffect?EffectPolyline:Polyline:hasEffect?EffectLine:Line),this._hasEffet=hasEffect,this._isPolyline=isPolyline,this._isLargeDraw=isLargeDraw),this.group.add(lineDraw.group),lineDraw},LinesView2.prototype._showEffect=function(seriesModel){return!!seriesModel.get(["effect","show"])},LinesView2.prototype._clearLayer=function(api){var zr=api.getZr();"svg"===zr.painter.getType()||null==this._lastZlevel||zr.painter.getLayer(this._lastZlevel).clear(!0)},LinesView2.prototype.remove=function(ecModel,api){this._lineDraw&amp;&amp;this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(api)},LinesView2.prototype.dispose=function(ecModel,api){this.remove(ecModel,api)},LinesView2.type="lines",LinesView2}(ChartView),Uint32Arr="undefined"==typeof Uint32Array?Array:Uint32Array,Float64Arr="undefined"==typeof Float64Array?Array:Float64Array;function compatEc2(seriesOpt){var data=seriesOpt.data;data&amp;&amp;data[0]&amp;&amp;data[0][0]&amp;&amp;data[0][0].coord&amp;&amp;(seriesOpt.data=map$1(data,function(itemOpt){var target={coords:[itemOpt[0].coord,itemOpt[1].coord]};return itemOpt[0].name&amp;&amp;(target.fromName=itemOpt[0].name),itemOpt[1].name&amp;&amp;(target.toName=itemOpt[1].name),mergeAll([target,itemOpt[0],itemOpt[1]])}))}var LinesSeriesModel=function(_super){function LinesSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=LinesSeriesModel2.type,_this.visualStyleAccessPath="lineStyle",_this.visualDrawType="stroke",_this}return __extends$1(LinesSeriesModel2,_super),LinesSeriesModel2.prototype.init=function(option){option.data=option.data||[],compatEc2(option);var result=this._processFlatCoordsArray(option.data);this._flatCoords=result.flatCoords,this._flatCoordsOffset=result.flatCoordsOffset,result.flatCoords&amp;&amp;(option.data=new Float32Array(result.count)),_super.prototype.init.apply(this,arguments)},LinesSeriesModel2.prototype.mergeOption=function(option){if(compatEc2(option),option.data){var result=this._processFlatCoordsArray(option.data);this._flatCoords=result.flatCoords,this._flatCoordsOffset=result.flatCoordsOffset,result.flatCoords&amp;&amp;(option.data=new Float32Array(result.count))}_super.prototype.mergeOption.apply(this,arguments)},LinesSeriesModel2.prototype.appendData=function(params){var result=this._processFlatCoordsArray(params.data);result.flatCoords&amp;&amp;(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,result.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,result.flatCoordsOffset)):(this._flatCoords=result.flatCoords,this._flatCoordsOffset=result.flatCoordsOffset),params.data=new Float32Array(result.count)),this.getRawData().appendData(params.data)},LinesSeriesModel2.prototype._getCoordsFromItemModel=function(idx){var itemModel=this.getData().getItemModel(idx);return itemModel.option instanceof Array?itemModel.option:itemModel.getShallow("coords")},LinesSeriesModel2.prototype.getLineCoordsCount=function(idx){return this._flatCoordsOffset?this._flatCoordsOffset[2*idx+1]:this._getCoordsFromItemModel(idx).length},LinesSeriesModel2.prototype.getLineCoords=function(idx,out2){if(this._flatCoordsOffset){for(var offset=this._flatCoordsOffset[2*idx],len2=this._flatCoordsOffset[2*idx+1],i=0;i&lt;len2;i++)out2[i]=out2[i]||[],out2[i][0]=this._flatCoords[offset+2*i],out2[i][1]=this._flatCoords[offset+2*i+1];return len2}var coords=this._getCoordsFromItemModel(idx);for(i=0;i&lt;coords.length;i++)out2[i]=out2[i]||[],out2[i][0]=coords[i][0],out2[i][1]=coords[i][1];return coords.length},LinesSeriesModel2.prototype._processFlatCoordsArray=function(data){var startOffset=0;if(this._flatCoords&amp;&amp;(startOffset=this._flatCoords.length),isNumber(data[0])){for(var len2=data.length,coordsOffsetAndLenStorage=new Uint32Arr(len2),coordsStorage=new Float64Arr(len2),coordsCursor=0,offsetCursor=0,dataCount=0,i=0;i&lt;len2;){dataCount++;var count2=data[i++];coordsOffsetAndLenStorage[offsetCursor++]=coordsCursor+startOffset,coordsOffsetAndLenStorage[offsetCursor++]=count2;for(var k=0;k&lt;count2;k++){var x=data[i++],y=data[i++];coordsStorage[coordsCursor++]=x,coordsStorage[coordsCursor++]=y}}return{flatCoordsOffset:new Uint32Array(coordsOffsetAndLenStorage.buffer,0,offsetCursor),flatCoords:coordsStorage,count:dataCount}}return{flatCoordsOffset:null,flatCoords:null,count:data.length}},LinesSeriesModel2.prototype.getInitialData=function(option,ecModel){var lineData=new SeriesData(["value"],this);return lineData.hasItemOption=!1,lineData.initData(option.data,[],function(dataItem,dimName,dataIndex,dimIndex){if(dataItem instanceof Array)return NaN;lineData.hasItemOption=!0;var value=dataItem.value;return null!=value?value instanceof Array?value[dimIndex]:value:void 0}),lineData},LinesSeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var itemModel=this.getData().getItemModel(dataIndex),name=itemModel.get("name");if(name)return name;var fromName=itemModel.get("fromName"),toName=itemModel.get("toName"),nameArr=[];return null!=fromName&amp;&amp;nameArr.push(fromName),null!=toName&amp;&amp;nameArr.push(toName),createTooltipMarkup("nameValue",{name:nameArr.join(" &gt; ")})},LinesSeriesModel2.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},LinesSeriesModel2.prototype.getProgressive=function(){var progressive=this.option.progressive;return null==progressive?this.option.large?1e4:this.get("progressive"):progressive},LinesSeriesModel2.prototype.getProgressiveThreshold=function(){var progressiveThreshold=this.option.progressiveThreshold;return null==progressiveThreshold?this.option.large?2e4:this.get("progressiveThreshold"):progressiveThreshold},LinesSeriesModel2.prototype.getZLevelKey=function(){var effectModel=this.getModel("effect"),trailLength=effectModel.get("trailLength");return this.getData().count()&gt;this.getProgressiveThreshold()?this.id:effectModel.get("show")&amp;&amp;trailLength&gt;0?trailLength+"":""},LinesSeriesModel2.type="series.lines",LinesSeriesModel2.dependencies=["grid","polar","geo","calendar"],LinesSeriesModel2.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},LinesSeriesModel2}(SeriesModel);function normalize(a){return a instanceof Array||(a=[a,a]),a}var linesVisual={seriesType:"lines",reset:function(seriesModel){var symbolType=normalize(seriesModel.get("symbol")),symbolSize=normalize(seriesModel.get("symbolSize")),data=seriesModel.getData();return data.setVisual("fromSymbol",symbolType&amp;&amp;symbolType[0]),data.setVisual("toSymbol",symbolType&amp;&amp;symbolType[1]),data.setVisual("fromSymbolSize",symbolSize&amp;&amp;symbolSize[0]),data.setVisual("toSymbolSize",symbolSize&amp;&amp;symbolSize[1]),{dataEach:data.hasItemOption?function dataEach(data2,idx){var itemModel=data2.getItemModel(idx),symbolType2=normalize(itemModel.getShallow("symbol",!0)),symbolSize2=normalize(itemModel.getShallow("symbolSize",!0));symbolType2[0]&amp;&amp;data2.setItemVisual(idx,"fromSymbol",symbolType2[0]),symbolType2[1]&amp;&amp;data2.setItemVisual(idx,"toSymbol",symbolType2[1]),symbolSize2[0]&amp;&amp;data2.setItemVisual(idx,"fromSymbolSize",symbolSize2[0]),symbolSize2[1]&amp;&amp;data2.setItemVisual(idx,"toSymbolSize",symbolSize2[1])}:null}}};var HeatmapLayer=function(){function HeatmapLayer2(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var canvas=platformApi.createCanvas();this.canvas=canvas}return HeatmapLayer2.prototype.update=function(data,width,height,normalize2,colorFunc,isInRange){var brush2=this._getBrush(),gradientInRange=this._getGradient(colorFunc,"inRange"),gradientOutOfRange=this._getGradient(colorFunc,"outOfRange"),r=this.pointSize+this.blurSize,canvas=this.canvas,ctx=canvas.getContext("2d"),len2=data.length;canvas.width=width,canvas.height=height;for(var i=0;i&lt;len2;++i){var p=data[i],x=p[0],y=p[1],alpha=normalize2(p[2]);ctx.globalAlpha=alpha,ctx.drawImage(brush2,x-r,y-r)}if(!canvas.width||!canvas.height)return canvas;for(var imageData=ctx.getImageData(0,0,canvas.width,canvas.height),pixels=imageData.data,offset=0,pixelLen=pixels.length,minOpacity=this.minOpacity,diffOpacity=this.maxOpacity-minOpacity;offset&lt;pixelLen;){alpha=pixels[offset+3]/256;var gradientOffset=4*Math.floor(255*alpha);if(alpha&gt;0){var gradient=isInRange(alpha)?gradientInRange:gradientOutOfRange;alpha&gt;0&amp;&amp;(alpha=alpha*diffOpacity+minOpacity),pixels[offset++]=gradient[gradientOffset],pixels[offset++]=gradient[gradientOffset+1],pixels[offset++]=gradient[gradientOffset+2],pixels[offset++]=gradient[gradientOffset+3]*alpha*256}else offset+=4}return ctx.putImageData(imageData,0,0),canvas},HeatmapLayer2.prototype._getBrush=function(){var brushCanvas=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),r=this.pointSize+this.blurSize,d=2*r;brushCanvas.width=d,brushCanvas.height=d;var ctx=brushCanvas.getContext("2d");return ctx.clearRect(0,0,d,d),ctx.shadowOffsetX=d,ctx.shadowBlur=this.blurSize,ctx.shadowColor="#000",ctx.beginPath(),ctx.arc(-r,r,this.pointSize,0,2*Math.PI,!0),ctx.closePath(),ctx.fill(),brushCanvas},HeatmapLayer2.prototype._getGradient=function(colorFunc,state){for(var gradientPixels=this._gradientPixels,pixelsSingleState=gradientPixels[state]||(gradientPixels[state]=new Uint8ClampedArray(1024)),color2=[0,0,0,0],off=0,i=0;i&lt;256;i++)colorFunc[state](i/255,!0,color2),pixelsSingleState[off++]=color2[0],pixelsSingleState[off++]=color2[1],pixelsSingleState[off++]=color2[2],pixelsSingleState[off++]=color2[3];return pixelsSingleState},HeatmapLayer2}();function isGeoCoordSys(coordSys){var dimensions=coordSys.dimensions;return"lng"===dimensions[0]&amp;&amp;"lat"===dimensions[1]}var HeatmapView=function(_super){function HeatmapView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=HeatmapView2.type,_this}return __extends$1(HeatmapView2,_super),HeatmapView2.prototype.render=function(seriesModel,ecModel,api){var visualMapOfThisSeries;ecModel.eachComponent("visualMap",function(visualMap){visualMap.eachTargetSeries(function(targetSeries){targetSeries===seriesModel&amp;&amp;(visualMapOfThisSeries=visualMap)})}),this._progressiveEls=null,this.group.removeAll();var coordSys=seriesModel.coordinateSystem;"cartesian2d"===coordSys.type||"calendar"===coordSys.type?this._renderOnCartesianAndCalendar(seriesModel,api,0,seriesModel.getData().count()):isGeoCoordSys(coordSys)&amp;&amp;this._renderOnGeo(coordSys,seriesModel,visualMapOfThisSeries,api)},HeatmapView2.prototype.incrementalPrepareRender=function(seriesModel,ecModel,api){this.group.removeAll()},HeatmapView2.prototype.incrementalRender=function(params,seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;coordSys&amp;&amp;(isGeoCoordSys(coordSys)?this.render(seriesModel,ecModel,api):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(seriesModel,api,params.start,params.end,!0)))},HeatmapView2.prototype.eachRendered=function(cb){traverseElements(this._progressiveEls||this.group,cb)},HeatmapView2.prototype._renderOnCartesianAndCalendar=function(seriesModel,api,start2,end2,incremental){var width,height,xAxisExtent,yAxisExtent,coordSys=seriesModel.coordinateSystem,isCartesian2d=isCoordinateSystemType(coordSys,"cartesian2d");if(isCartesian2d){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y");width=xAxis.getBandWidth()+.5,height=yAxis.getBandWidth()+.5,xAxisExtent=xAxis.scale.getExtent(),yAxisExtent=yAxis.scale.getExtent()}for(var group=this.group,data=seriesModel.getData(),emphasisStyle=seriesModel.getModel(["emphasis","itemStyle"]).getItemStyle(),blurStyle=seriesModel.getModel(["blur","itemStyle"]).getItemStyle(),selectStyle=seriesModel.getModel(["select","itemStyle"]).getItemStyle(),borderRadius=seriesModel.get(["itemStyle","borderRadius"]),labelStatesModels=getLabelStatesModels(seriesModel),emphasisModel=seriesModel.getModel("emphasis"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),emphasisDisabled=emphasisModel.get("disabled"),dataDims=isCartesian2d?[data.mapDimension("x"),data.mapDimension("y"),data.mapDimension("value")]:[data.mapDimension("time"),data.mapDimension("value")],idx=start2;idx&lt;end2;idx++){var rect=void 0,style=data.getItemVisual(idx,"style");if(isCartesian2d){var dataDimX=data.get(dataDims[0],idx),dataDimY=data.get(dataDims[1],idx);if(isNaN(data.get(dataDims[2],idx))||isNaN(dataDimX)||isNaN(dataDimY)||dataDimX&lt;xAxisExtent[0]||dataDimX&gt;xAxisExtent[1]||dataDimY&lt;yAxisExtent[0]||dataDimY&gt;yAxisExtent[1])continue;var point=coordSys.dataToPoint([dataDimX,dataDimY]);rect=new Rect$2({shape:{x:point[0]-width/2,y:point[1]-height/2,width:width,height:height},style:style})}else{if(isNaN(data.get(dataDims[1],idx)))continue;rect=new Rect$2({z2:1,shape:coordSys.dataToRect([data.get(dataDims[0],idx)]).contentShape,style:style})}if(data.hasItemOption){var itemModel=data.getItemModel(idx),emphasisModel_1=itemModel.getModel("emphasis");emphasisStyle=emphasisModel_1.getModel("itemStyle").getItemStyle(),blurStyle=itemModel.getModel(["blur","itemStyle"]).getItemStyle(),selectStyle=itemModel.getModel(["select","itemStyle"]).getItemStyle(),borderRadius=itemModel.get(["itemStyle","borderRadius"]),focus=emphasisModel_1.get("focus"),blurScope=emphasisModel_1.get("blurScope"),emphasisDisabled=emphasisModel_1.get("disabled"),labelStatesModels=getLabelStatesModels(itemModel)}rect.shape.r=borderRadius;var rawValue=seriesModel.getRawValue(idx),defaultText="-";rawValue&amp;&amp;null!=rawValue[2]&amp;&amp;(defaultText=rawValue[2]+""),setLabelStyle(rect,labelStatesModels,{labelFetcher:seriesModel,labelDataIndex:idx,defaultOpacity:style.opacity,defaultText:defaultText}),rect.ensureState("emphasis").style=emphasisStyle,rect.ensureState("blur").style=blurStyle,rect.ensureState("select").style=selectStyle,toggleHoverEmphasis(rect,focus,blurScope,emphasisDisabled),rect.incremental=incremental,incremental&amp;&amp;(rect.states.emphasis.hoverLayer=!0),group.add(rect),data.setItemGraphicEl(idx,rect),this._progressiveEls&amp;&amp;this._progressiveEls.push(rect)}},HeatmapView2.prototype._renderOnGeo=function(geo,seriesModel,visualMapModel,api){var inRangeVisuals=visualMapModel.targetVisuals.inRange,outOfRangeVisuals=visualMapModel.targetVisuals.outOfRange,data=seriesModel.getData(),hmLayer=this._hmLayer||this._hmLayer||new HeatmapLayer;hmLayer.blurSize=seriesModel.get("blurSize"),hmLayer.pointSize=seriesModel.get("pointSize"),hmLayer.minOpacity=seriesModel.get("minOpacity"),hmLayer.maxOpacity=seriesModel.get("maxOpacity");var rect=geo.getViewRect().clone(),roamTransform=geo.getRoamTransform();rect.applyTransform(roamTransform);var x=Math.max(rect.x,0),y=Math.max(rect.y,0),x2=Math.min(rect.width+rect.x,api.getWidth()),y2=Math.min(rect.height+rect.y,api.getHeight()),width=x2-x,height=y2-y,dims=[data.mapDimension("lng"),data.mapDimension("lat"),data.mapDimension("value")],points2=data.mapArray(dims,function(lng,lat,value){var pt=geo.dataToPoint([lng,lat]);return pt[0]-=x,pt[1]-=y,pt.push(value),pt}),dataExtent=visualMapModel.getExtent(),isInRange="visualMap.continuous"===visualMapModel.type?function getIsInContinuousRange(dataExtent,range){var dataSpan=dataExtent[1]-dataExtent[0];return range=[(range[0]-dataExtent[0])/dataSpan,(range[1]-dataExtent[0])/dataSpan],function(val){return val&gt;=range[0]&amp;&amp;val&lt;=range[1]}}(dataExtent,visualMapModel.option.range):function getIsInPiecewiseRange(dataExtent,pieceList,selected){var dataSpan=dataExtent[1]-dataExtent[0],len2=(pieceList=map$1(pieceList,function(piece){return{interval:[(piece.interval[0]-dataExtent[0])/dataSpan,(piece.interval[1]-dataExtent[0])/dataSpan]}})).length,lastIndex=0;return function(val){var i;for(i=lastIndex;i&lt;len2;i++)if((interval=pieceList[i].interval)[0]&lt;=val&amp;&amp;val&lt;=interval[1]){lastIndex=i;break}if(i===len2)for(i=lastIndex-1;i&gt;=0;i--){var interval;if((interval=pieceList[i].interval)[0]&lt;=val&amp;&amp;val&lt;=interval[1]){lastIndex=i;break}}return i&gt;=0&amp;&amp;i&lt;len2&amp;&amp;selected[i]}}(dataExtent,visualMapModel.getPieceList(),visualMapModel.option.selected);hmLayer.update(points2,width,height,inRangeVisuals.color.getNormalizer(),{inRange:inRangeVisuals.color.getColorMapper(),outOfRange:outOfRangeVisuals.color.getColorMapper()},isInRange);var img=new ZRImage({style:{width:width,height:height,x:x,y:y,image:hmLayer.canvas},silent:!0});this.group.add(img)},HeatmapView2.type="heatmap",HeatmapView2}(ChartView),HeatmapSeriesModel=function(_super){function HeatmapSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=HeatmapSeriesModel2.type,_this}return __extends$1(HeatmapSeriesModel2,_super),HeatmapSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesData(null,this,{generateCoord:"value"})},HeatmapSeriesModel2.prototype.preventIncremental=function(){var coordSysCreator=CoordinateSystemManager.get(this.get("coordinateSystem"));if(coordSysCreator&amp;&amp;coordSysCreator.dimensions)return"lng"===coordSysCreator.dimensions[0]&amp;&amp;"lat"===coordSysCreator.dimensions[1]},HeatmapSeriesModel2.type="series.heatmap",HeatmapSeriesModel2.dependencies=["grid","geo","calendar"],HeatmapSeriesModel2.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},HeatmapSeriesModel2}(SeriesModel);function install$v(registers){registers.registerChartView(HeatmapView),registers.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(_super){function PictorialBarView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=PictorialBarView2.type,_this}return __extends$1(PictorialBarView2,_super),PictorialBarView2.prototype.render=function(seriesModel,ecModel,api){var group=this.group,data=seriesModel.getData(),oldData=this._data,cartesian=seriesModel.coordinateSystem,isHorizontal=cartesian.getBaseAxis().isHorizontal(),coordSysRect=cartesian.master.getRect(),opt={ecSize:{width:api.getWidth(),height:api.getHeight()},seriesModel:seriesModel,coordSys:cartesian,coordSysExtent:[[coordSysRect.x,coordSysRect.x+coordSysRect.width],[coordSysRect.y,coordSysRect.y+coordSysRect.height]],isHorizontal:isHorizontal,valueDim:LAYOUT_ATTRS[+isHorizontal],categoryDim:LAYOUT_ATTRS[1-+isHorizontal]};data.diff(oldData).add(function(dataIndex){if(data.hasValue(dataIndex)){var itemModel=getItemModel(data,dataIndex),symbolMeta=getSymbolMeta(data,dataIndex,itemModel,opt),bar=createBar(data,opt,symbolMeta);data.setItemGraphicEl(dataIndex,bar),group.add(bar),updateCommon(bar,opt,symbolMeta)}}).update(function(newIndex,oldIndex){var bar=oldData.getItemGraphicEl(oldIndex);if(data.hasValue(newIndex)){var itemModel=getItemModel(data,newIndex),symbolMeta=getSymbolMeta(data,newIndex,itemModel,opt),pictorialShapeStr=getShapeStr(data,symbolMeta);bar&amp;&amp;pictorialShapeStr!==bar.__pictorialShapeStr&amp;&amp;(group.remove(bar),data.setItemGraphicEl(newIndex,null),bar=null),bar?function updateBar(bar,opt,symbolMeta){var animationModel=symbolMeta.animationModel,dataIndex=symbolMeta.dataIndex,bundle=bar.__pictorialBundle;updateProps$1(bundle,{x:symbolMeta.bundlePosition[0],y:symbolMeta.bundlePosition[1]},animationModel,dataIndex),symbolMeta.symbolRepeat?createOrUpdateRepeatSymbols(bar,opt,symbolMeta,!0):createOrUpdateSingleSymbol(bar,opt,symbolMeta,!0);createOrUpdateBarRect(bar,symbolMeta,!0),createOrUpdateClip(bar,opt,symbolMeta,!0)}(bar,opt,symbolMeta):bar=createBar(data,opt,symbolMeta,!0),data.setItemGraphicEl(newIndex,bar),bar.__pictorialSymbolMeta=symbolMeta,group.add(bar),updateCommon(bar,opt,symbolMeta)}else group.remove(bar)}).remove(function(dataIndex){var bar=oldData.getItemGraphicEl(dataIndex);bar&amp;&amp;removeBar(oldData,dataIndex,bar.__pictorialSymbolMeta.animationModel,bar)}).execute();var clipPath=seriesModel.get("clip",!0)?createClipPath(seriesModel.coordinateSystem,!1,seriesModel):null;return clipPath?group.setClipPath(clipPath):group.removeClipPath(),this._data=data,this.group},PictorialBarView2.prototype.remove=function(ecModel,api){var group=this.group,data=this._data;ecModel.get("animation")?data&amp;&amp;data.eachItemGraphicEl(function(bar){removeBar(data,getECData(bar).dataIndex,ecModel,bar)}):group.removeAll()},PictorialBarView2.type="pictorialBar",PictorialBarView2}(ChartView);function getSymbolMeta(data,dataIndex,itemModel,opt){var layout2=data.getItemLayout(dataIndex),symbolRepeat=itemModel.get("symbolRepeat"),symbolClip=itemModel.get("symbolClip"),symbolPosition=itemModel.get("symbolPosition")||"start",rotation=(itemModel.get("symbolRotate")||0)*Math.PI/180||0,symbolPatternSize=itemModel.get("symbolPatternSize")||2,isAnimationEnabled2=itemModel.isAnimationEnabled(),symbolMeta={dataIndex:dataIndex,layout:layout2,itemModel:itemModel,symbolType:data.getItemVisual(dataIndex,"symbol")||"circle",style:data.getItemVisual(dataIndex,"style"),symbolClip:symbolClip,symbolRepeat:symbolRepeat,symbolRepeatDirection:itemModel.get("symbolRepeatDirection"),symbolPatternSize:symbolPatternSize,rotation:rotation,animationModel:isAnimationEnabled2?itemModel:null,hoverScale:isAnimationEnabled2&amp;&amp;itemModel.get(["emphasis","scale"]),z2:itemModel.getShallow("z",!0)||0};!function prepareBarLength(itemModel,symbolRepeat,layout2,opt,outputSymbolMeta){var boundingLength,valueDim=opt.valueDim,symbolBoundingData=itemModel.get("symbolBoundingData"),valueAxis2=opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis()),zeroPx=valueAxis2.toGlobalCoord(valueAxis2.dataToCoord(0)),pxSignIdx=1-+(layout2[valueDim.wh]&lt;=0);if(isArray$1(symbolBoundingData)){var symbolBoundingExtent=[convertToCoordOnAxis(valueAxis2,symbolBoundingData[0])-zeroPx,convertToCoordOnAxis(valueAxis2,symbolBoundingData[1])-zeroPx];symbolBoundingExtent[1]&lt;symbolBoundingExtent[0]&amp;&amp;symbolBoundingExtent.reverse(),boundingLength=symbolBoundingExtent[pxSignIdx]}else boundingLength=null!=symbolBoundingData?convertToCoordOnAxis(valueAxis2,symbolBoundingData)-zeroPx:symbolRepeat?opt.coordSysExtent[valueDim.index][pxSignIdx]-zeroPx:layout2[valueDim.wh];outputSymbolMeta.boundingLength=boundingLength,symbolRepeat&amp;&amp;(outputSymbolMeta.repeatCutLength=layout2[valueDim.wh]);var isXAxis="x"===valueDim.xy,isInverse=valueAxis2.inverse;outputSymbolMeta.pxSign=isXAxis&amp;&amp;!isInverse||!isXAxis&amp;&amp;isInverse?boundingLength&gt;=0?1:-1:boundingLength&gt;0?1:-1}(itemModel,symbolRepeat,layout2,opt,symbolMeta),function prepareSymbolSize(data,dataIndex,layout2,symbolRepeat,symbolClip,boundingLength,pxSign,symbolPatternSize,opt,outputSymbolMeta){var parsedSymbolSize,valueDim=opt.valueDim,categoryDim=opt.categoryDim,categorySize=Math.abs(layout2[categoryDim.wh]),symbolSize=data.getItemVisual(dataIndex,"symbolSize");parsedSymbolSize=isArray$1(symbolSize)?symbolSize.slice():null==symbolSize?["100%","100%"]:[symbolSize,symbolSize];parsedSymbolSize[categoryDim.index]=parsePercent(parsedSymbolSize[categoryDim.index],categorySize),parsedSymbolSize[valueDim.index]=parsePercent(parsedSymbolSize[valueDim.index],symbolRepeat?categorySize:Math.abs(boundingLength)),outputSymbolMeta.symbolSize=parsedSymbolSize;var symbolScale=outputSymbolMeta.symbolScale=[parsedSymbolSize[0]/symbolPatternSize,parsedSymbolSize[1]/symbolPatternSize];symbolScale[valueDim.index]*=(opt.isHorizontal?-1:1)*pxSign}(data,dataIndex,layout2,symbolRepeat,0,symbolMeta.boundingLength,symbolMeta.pxSign,symbolPatternSize,opt,symbolMeta),function prepareLineWidth(itemModel,symbolScale,rotation,opt,outputSymbolMeta){var valueLineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY)||0;valueLineWidth&amp;&amp;(pathForLineWidth.attr({scaleX:symbolScale[0],scaleY:symbolScale[1],rotation:rotation}),pathForLineWidth.updateTransform(),valueLineWidth/=pathForLineWidth.getLineScale(),valueLineWidth*=symbolScale[opt.valueDim.index]);outputSymbolMeta.valueLineWidth=valueLineWidth||0}(itemModel,symbolMeta.symbolScale,rotation,opt,symbolMeta);var symbolSize=symbolMeta.symbolSize,symbolOffset=normalizeSymbolOffset(itemModel.get("symbolOffset"),symbolSize);return function prepareLayoutInfo(itemModel,symbolSize,layout2,symbolRepeat,symbolClip,symbolOffset,symbolPosition,valueLineWidth,boundingLength,repeatCutLength,opt,outputSymbolMeta){var categoryDim=opt.categoryDim,valueDim=opt.valueDim,pxSign=outputSymbolMeta.pxSign,unitLength=Math.max(symbolSize[valueDim.index]+valueLineWidth,0),pathLen=unitLength;if(symbolRepeat){var absBoundingLength=Math.abs(boundingLength),symbolMargin=retrieve(itemModel.get("symbolMargin"),"15%")+"",hasEndGap=!1;symbolMargin.lastIndexOf("!")===symbolMargin.length-1&amp;&amp;(hasEndGap=!0,symbolMargin=symbolMargin.slice(0,symbolMargin.length-1));var symbolMarginNumeric=parsePercent(symbolMargin,symbolSize[valueDim.index]),uLenWithMargin=Math.max(unitLength+2*symbolMarginNumeric,0),endFix=hasEndGap?0:2*symbolMarginNumeric,repeatSpecified=isNumeric(symbolRepeat),repeatTimes=repeatSpecified?symbolRepeat:toIntTimes((absBoundingLength+endFix)/uLenWithMargin);uLenWithMargin=unitLength+2*(symbolMarginNumeric=(absBoundingLength-repeatTimes*unitLength)/2/(hasEndGap?repeatTimes:Math.max(repeatTimes-1,1))),endFix=hasEndGap?0:2*symbolMarginNumeric,repeatSpecified||"fixed"===symbolRepeat||(repeatTimes=repeatCutLength?toIntTimes((Math.abs(repeatCutLength)+endFix)/uLenWithMargin):0),pathLen=repeatTimes*uLenWithMargin-endFix,outputSymbolMeta.repeatTimes=repeatTimes,outputSymbolMeta.symbolMargin=symbolMarginNumeric}var sizeFix=pxSign*(pathLen/2),pathPosition=outputSymbolMeta.pathPosition=[];pathPosition[categoryDim.index]=layout2[categoryDim.wh]/2,pathPosition[valueDim.index]="start"===symbolPosition?sizeFix:"end"===symbolPosition?boundingLength-sizeFix:boundingLength/2,symbolOffset&amp;&amp;(pathPosition[0]+=symbolOffset[0],pathPosition[1]+=symbolOffset[1]);var bundlePosition=outputSymbolMeta.bundlePosition=[];bundlePosition[categoryDim.index]=layout2[categoryDim.xy],bundlePosition[valueDim.index]=layout2[valueDim.xy];var barRectShape=outputSymbolMeta.barRectShape=extend({},layout2);barRectShape[valueDim.wh]=pxSign*Math.max(Math.abs(layout2[valueDim.wh]),Math.abs(pathPosition[valueDim.index]+sizeFix)),barRectShape[categoryDim.wh]=layout2[categoryDim.wh];var clipShape=outputSymbolMeta.clipShape={};clipShape[categoryDim.xy]=-layout2[categoryDim.xy],clipShape[categoryDim.wh]=opt.ecSize[categoryDim.wh],clipShape[valueDim.xy]=0,clipShape[valueDim.wh]=layout2[valueDim.wh]}(itemModel,symbolSize,layout2,symbolRepeat,0,symbolOffset,symbolPosition,symbolMeta.valueLineWidth,symbolMeta.boundingLength,symbolMeta.repeatCutLength,opt,symbolMeta),symbolMeta}function convertToCoordOnAxis(axis,value){return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)))}function createPath(symbolMeta){var symbolPatternSize=symbolMeta.symbolPatternSize,path=createSymbol$1(symbolMeta.symbolType,-symbolPatternSize/2,-symbolPatternSize/2,symbolPatternSize,symbolPatternSize);return path.attr({culling:!0}),"image"!==path.type&amp;&amp;path.setStyle({strokeNoScale:!0}),path}function createOrUpdateRepeatSymbols(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle,symbolSize=symbolMeta.symbolSize,valueLineWidth=symbolMeta.valueLineWidth,pathPosition=symbolMeta.pathPosition,valueDim=opt.valueDim,repeatTimes=symbolMeta.repeatTimes||0,index=0,unit=symbolSize[opt.valueDim.index]+valueLineWidth+2*symbolMeta.symbolMargin;for(eachPath(bar,function(path2){path2.__pictorialAnimationIndex=index,path2.__pictorialRepeatTimes=repeatTimes,index&lt;repeatTimes?updateAttr(path2,null,makeTarget(index),symbolMeta,isUpdate):updateAttr(path2,null,{scaleX:0,scaleY:0},symbolMeta,isUpdate,function(){bundle.remove(path2)}),index++});index&lt;repeatTimes;index++){var path=createPath(symbolMeta);path.__pictorialAnimationIndex=index,path.__pictorialRepeatTimes=repeatTimes,bundle.add(path);var target=makeTarget(index);updateAttr(path,{x:target.x,y:target.y,scaleX:0,scaleY:0},{scaleX:target.scaleX,scaleY:target.scaleY,rotation:target.rotation},symbolMeta,isUpdate)}function makeTarget(index2){var position2=pathPosition.slice(),pxSign=symbolMeta.pxSign,i=index2;return("start"===symbolMeta.symbolRepeatDirection?pxSign&gt;0:pxSign&lt;0)&amp;&amp;(i=repeatTimes-1-index2),position2[valueDim.index]=unit*(i-repeatTimes/2+.5)+pathPosition[valueDim.index],{x:position2[0],y:position2[1],scaleX:symbolMeta.symbolScale[0],scaleY:symbolMeta.symbolScale[1],rotation:symbolMeta.rotation}}}function createOrUpdateSingleSymbol(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle,mainPath=bar.__pictorialMainPath;mainPath?updateAttr(mainPath,null,{x:symbolMeta.pathPosition[0],y:symbolMeta.pathPosition[1],scaleX:symbolMeta.symbolScale[0],scaleY:symbolMeta.symbolScale[1],rotation:symbolMeta.rotation},symbolMeta,isUpdate):(mainPath=bar.__pictorialMainPath=createPath(symbolMeta),bundle.add(mainPath),updateAttr(mainPath,{x:symbolMeta.pathPosition[0],y:symbolMeta.pathPosition[1],scaleX:0,scaleY:0,rotation:symbolMeta.rotation},{scaleX:symbolMeta.symbolScale[0],scaleY:symbolMeta.symbolScale[1]},symbolMeta,isUpdate))}function createOrUpdateBarRect(bar,symbolMeta,isUpdate){var rectShape=extend({},symbolMeta.barRectShape),barRect=bar.__pictorialBarRect;barRect?updateAttr(barRect,null,{shape:rectShape},symbolMeta,isUpdate):((barRect=bar.__pictorialBarRect=new Rect$2({z2:2,shape:rectShape,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,bar.add(barRect))}function createOrUpdateClip(bar,opt,symbolMeta,isUpdate){if(symbolMeta.symbolClip){var clipPath=bar.__pictorialClipPath,clipShape=extend({},symbolMeta.clipShape),valueDim=opt.valueDim,animationModel=symbolMeta.animationModel,dataIndex=symbolMeta.dataIndex;if(clipPath)updateProps$1(clipPath,{shape:clipShape},animationModel,dataIndex);else{clipShape[valueDim.wh]=0,clipPath=new Rect$2({shape:clipShape}),bar.__pictorialBundle.setClipPath(clipPath),bar.__pictorialClipPath=clipPath;var target={};target[valueDim.wh]=symbolMeta.clipShape[valueDim.wh],graphic$1[isUpdate?"updateProps":"initProps"](clipPath,{shape:target},animationModel,dataIndex)}}}function getItemModel(data,dataIndex){var itemModel=data.getItemModel(dataIndex);return itemModel.getAnimationDelayParams=getAnimationDelayParams,itemModel.isAnimationEnabled=isAnimationEnabled,itemModel}function getAnimationDelayParams(path){return{index:path.__pictorialAnimationIndex,count:path.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&amp;&amp;!!this.getShallow("animation")}function createBar(data,opt,symbolMeta,isUpdate){var bar=new Group$3,bundle=new Group$3;return bar.add(bundle),bar.__pictorialBundle=bundle,bundle.x=symbolMeta.bundlePosition[0],bundle.y=symbolMeta.bundlePosition[1],symbolMeta.symbolRepeat?createOrUpdateRepeatSymbols(bar,opt,symbolMeta):createOrUpdateSingleSymbol(bar,0,symbolMeta),createOrUpdateBarRect(bar,symbolMeta,isUpdate),createOrUpdateClip(bar,opt,symbolMeta,isUpdate),bar.__pictorialShapeStr=getShapeStr(data,symbolMeta),bar.__pictorialSymbolMeta=symbolMeta,bar}function removeBar(data,dataIndex,animationModel,bar){var labelRect=bar.__pictorialBarRect;labelRect&amp;&amp;labelRect.removeTextContent();var paths=[];eachPath(bar,function(path){paths.push(path)}),bar.__pictorialMainPath&amp;&amp;paths.push(bar.__pictorialMainPath),bar.__pictorialClipPath&amp;&amp;(animationModel=null),each$f(paths,function(path){removeElement(path,{scaleX:0,scaleY:0},animationModel,dataIndex,function(){bar.parent&amp;&amp;bar.parent.remove(bar)})}),data.setItemGraphicEl(dataIndex,null)}function getShapeStr(data,symbolMeta){return[data.getItemVisual(symbolMeta.dataIndex,"symbol")||"none",!!symbolMeta.symbolRepeat,!!symbolMeta.symbolClip].join(":")}function eachPath(bar,cb,context){each$f(bar.__pictorialBundle.children(),function(el){el!==bar.__pictorialBarRect&amp;&amp;cb.call(context,el)})}function updateAttr(el,immediateAttrs,animationAttrs,symbolMeta,isUpdate,cb){immediateAttrs&amp;&amp;el.attr(immediateAttrs),symbolMeta.symbolClip&amp;&amp;!isUpdate?animationAttrs&amp;&amp;el.attr(animationAttrs):animationAttrs&amp;&amp;graphic$1[isUpdate?"updateProps":"initProps"](el,animationAttrs,symbolMeta.animationModel,symbolMeta.dataIndex,cb)}function updateCommon(bar,opt,symbolMeta){var dataIndex=symbolMeta.dataIndex,itemModel=symbolMeta.itemModel,emphasisModel=itemModel.getModel("emphasis"),emphasisStyle=emphasisModel.getModel("itemStyle").getItemStyle(),blurStyle=itemModel.getModel(["blur","itemStyle"]).getItemStyle(),selectStyle=itemModel.getModel(["select","itemStyle"]).getItemStyle(),cursorStyle=itemModel.getShallow("cursor"),focus=emphasisModel.get("focus"),blurScope=emphasisModel.get("blurScope"),hoverScale=emphasisModel.get("scale");eachPath(bar,function(path){if(path instanceof ZRImage){var pathStyle=path.style;path.useStyle(extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},symbolMeta.style))}else path.useStyle(symbolMeta.style);var emphasisState=path.ensureState("emphasis");emphasisState.style=emphasisStyle,hoverScale&amp;&amp;(emphasisState.scaleX=1.1*path.scaleX,emphasisState.scaleY=1.1*path.scaleY),path.ensureState("blur").style=blurStyle,path.ensureState("select").style=selectStyle,cursorStyle&amp;&amp;(path.cursor=cursorStyle),path.z2=symbolMeta.z2});var barPositionOutside=opt.valueDim.posDesc[+(symbolMeta.boundingLength&gt;0)],barRect=bar.__pictorialBarRect;barRect.ignoreClip=!0,setLabelStyle(barRect,getLabelStatesModels(itemModel),{labelFetcher:opt.seriesModel,labelDataIndex:dataIndex,defaultText:getDefaultLabel(opt.seriesModel.getData(),dataIndex),inheritColor:symbolMeta.style.fill,defaultOpacity:symbolMeta.style.opacity,defaultOutsidePosition:barPositionOutside}),toggleHoverEmphasis(bar,focus,blurScope,emphasisModel.get("disabled"))}function toIntTimes(times){var roundedTimes=Math.round(times);return Math.abs(times-roundedTimes)&lt;1e-4?roundedTimes:Math.ceil(times)}var PictorialBarSeriesModel=function(_super){function PictorialBarSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=PictorialBarSeriesModel2.type,_this.hasSymbolVisual=!0,_this.defaultSymbol="roundRect",_this}return __extends$1(PictorialBarSeriesModel2,_super),PictorialBarSeriesModel2.prototype.getInitialData=function(option){return option.stack=null,_super.prototype.getInitialData.apply(this,arguments)},PictorialBarSeriesModel2.type="series.pictorialBar",PictorialBarSeriesModel2.dependencies=["grid"],PictorialBarSeriesModel2.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),PictorialBarSeriesModel2}(BaseBarSeriesModel);var ThemeRiverView=function(_super){function ThemeRiverView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ThemeRiverView2.type,_this._layers=[],_this}return __extends$1(ThemeRiverView2,_super),ThemeRiverView2.prototype.render=function(seriesModel,ecModel,api){var data=seriesModel.getData(),self2=this,group=this.group,layersSeries=seriesModel.getLayerSeries(),layoutInfo=data.getLayout("layoutInfo"),rect=layoutInfo.rect,boundaryGap=layoutInfo.boundaryGap;function keyGetter(item){return item.name}group.x=0,group.y=rect.y+boundaryGap[0];var dataDiffer=new DataDiffer(this._layersSeries||[],layersSeries,keyGetter,keyGetter),newLayersGroups=[];function process(status,idx,oldIdx){var oldLayersGroups=self2._layers;if("remove"!==status){for(var style,polygon,points0=[],points1=[],indices=layersSeries[idx].indices,j=0;j&lt;indices.length;j++){var layout2=data.getItemLayout(indices[j]),x=layout2.x,y0=layout2.y0,y=layout2.y;points0.push(x,y0),points1.push(x,y0+y),style=data.getItemVisual(indices[j],"style")}var textLayout=data.getItemLayout(indices[0]),margin=seriesModel.getModel("label").get("margin"),emphasisModel=seriesModel.getModel("emphasis");if("add"===status){var layerGroup=newLayersGroups[idx]=new Group$3;polygon=new ECPolygon({shape:{points:points0,stackedOnPoints:points1,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),layerGroup.add(polygon),group.add(layerGroup),seriesModel.isAnimationEnabled()&amp;&amp;polygon.setClipPath(function createGridClipShape(rect,seriesModel,cb){var rectEl=new Rect$2({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return initProps(rectEl,{shape:{x:rect.x-50,width:rect.width+100,height:rect.height+20}},seriesModel,cb),rectEl}(polygon.getBoundingRect(),seriesModel,function(){polygon.removeClipPath()}))}else{layerGroup=oldLayersGroups[oldIdx];polygon=layerGroup.childAt(0),group.add(layerGroup),newLayersGroups[idx]=layerGroup,updateProps$1(polygon,{shape:{points:points0,stackedOnPoints:points1}},seriesModel),saveOldStyle(polygon)}setLabelStyle(polygon,getLabelStatesModels(seriesModel),{labelDataIndex:indices[j-1],defaultText:data.getName(indices[j-1]),inheritColor:style.fill},{normal:{verticalAlign:"middle"}}),polygon.setTextConfig({position:null,local:!0});var labelEl=polygon.getTextContent();labelEl&amp;&amp;(labelEl.x=textLayout.x-margin,labelEl.y=textLayout.y0+textLayout.y/2),polygon.useStyle(style),data.setItemGraphicEl(idx,polygon),setStatesStylesFromModel(polygon,seriesModel),toggleHoverEmphasis(polygon,emphasisModel.get("focus"),emphasisModel.get("blurScope"),emphasisModel.get("disabled"))}else group.remove(oldLayersGroups[idx])}dataDiffer.add(bind$1(process,this,"add")).update(bind$1(process,this,"update")).remove(bind$1(process,this,"remove")).execute(),this._layersSeries=layersSeries,this._layers=newLayersGroups},ThemeRiverView2.type="themeRiver",ThemeRiverView2}(ChartView);var ThemeRiverSeriesModel=function(_super){function ThemeRiverSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ThemeRiverSeriesModel2.type,_this}return __extends$1(ThemeRiverSeriesModel2,_super),ThemeRiverSeriesModel2.prototype.init=function(option){_super.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},ThemeRiverSeriesModel2.prototype.fixData=function(data){var rawDataLength=data.length,timeValueKeys={},groupResult=groupData(data,function(item){return timeValueKeys.hasOwnProperty(item[0]+"")||(timeValueKeys[item[0]+""]=-1),item[2]}),layerData=[];groupResult.buckets.each(function(items,key){layerData.push({name:key,dataList:items})});for(var layerNum=layerData.length,k=0;k&lt;layerNum;++k){for(var name_1=layerData[k].name,j=0;j&lt;layerData[k].dataList.length;++j){var timeValue=layerData[k].dataList[j][0]+"";timeValueKeys[timeValue]=k}for(var timeValue in timeValueKeys)timeValueKeys.hasOwnProperty(timeValue)&amp;&amp;timeValueKeys[timeValue]!==k&amp;&amp;(timeValueKeys[timeValue]=k,data[rawDataLength]=[timeValue,0,name_1],rawDataLength++)}return data},ThemeRiverSeriesModel2.prototype.getInitialData=function(option,ecModel){for(var axisType=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0].get("type"),filterData=filter(option.data,function(dataItem){return void 0!==dataItem[2]}),data=this.fixData(filterData||[]),nameList=[],nameMap=this.nameMap=createHashMap(),count2=0,i=0;i&lt;data.length;++i)nameList.push(data[i][2]),nameMap.get(data[i][2])||(nameMap.set(data[i][2],count2),count2++);var dimensions=prepareSeriesDataSchema(data,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(axisType)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,list=new SeriesData(dimensions,this);return list.initData(data),list},ThemeRiverSeriesModel2.prototype.getLayerSeries=function(){for(var data=this.getData(),lenCount=data.count(),indexArr=[],i=0;i&lt;lenCount;++i)indexArr[i]=i;var timeDim=data.mapDimension("single"),groupResult=groupData(indexArr,function(index){return data.get("name",index)}),layerSeries=[];return groupResult.buckets.each(function(items,key){items.sort(function(index1,index2){return data.get(timeDim,index1)-data.get(timeDim,index2)}),layerSeries.push({name:key,indices:items})}),layerSeries},ThemeRiverSeriesModel2.prototype.getAxisTooltipData=function(dim,value,baseAxis){isArray$1(dim)||(dim=dim?[dim]:[]);for(var nestestValue,data=this.getData(),layerSeries=this.getLayerSeries(),indices=[],layerNum=layerSeries.length,i=0;i&lt;layerNum;++i){for(var minDist=Number.MAX_VALUE,nearestIdx=-1,pointNum=layerSeries[i].indices.length,j=0;j&lt;pointNum;++j){var theValue=data.get(dim[0],layerSeries[i].indices[j]),dist2=Math.abs(theValue-value);dist2&lt;=minDist&amp;&amp;(nestestValue=theValue,minDist=dist2,nearestIdx=layerSeries[i].indices[j])}indices.push(nearestIdx)}return{dataIndices:indices,nestestValue:nestestValue}},ThemeRiverSeriesModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var data=this.getData();return createTooltipMarkup("nameValue",{name:data.getName(dataIndex),value:data.get(data.mapDimension("value"),dataIndex)})},ThemeRiverSeriesModel2.type="series.themeRiver",ThemeRiverSeriesModel2.dependencies=["singleAxis"],ThemeRiverSeriesModel2.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},ThemeRiverSeriesModel2}(SeriesModel);function themeRiverLayout(ecModel,api){ecModel.eachSeriesByType("themeRiver",function(seriesModel){var data=seriesModel.getData(),single=seriesModel.coordinateSystem,layoutInfo={},rect=single.getRect();layoutInfo.rect=rect;var boundaryGap=seriesModel.get("boundaryGap"),axis=single.getAxis();(layoutInfo.boundaryGap=boundaryGap,"horizontal"===axis.orient)?(boundaryGap[0]=parsePercent(boundaryGap[0],rect.height),boundaryGap[1]=parsePercent(boundaryGap[1],rect.height),doThemeRiverLayout(data,seriesModel,rect.height-boundaryGap[0]-boundaryGap[1])):(boundaryGap[0]=parsePercent(boundaryGap[0],rect.width),boundaryGap[1]=parsePercent(boundaryGap[1],rect.width),doThemeRiverLayout(data,seriesModel,rect.width-boundaryGap[0]-boundaryGap[1]));data.setLayout("layoutInfo",layoutInfo)})}function doThemeRiverLayout(data,seriesModel,height){if(data.count())for(var baseY0,coordSys=seriesModel.coordinateSystem,layerSeries=seriesModel.getLayerSeries(),timeDim=data.mapDimension("single"),valueDim=data.mapDimension("value"),layerPoints=map$1(layerSeries,function(singleLayer){return map$1(singleLayer.indices,function(idx){var pt=coordSys.dataToPoint(data.get(timeDim,idx));return pt[1]=data.get(valueDim,idx),pt})}),base2=function computeBaseline(data){for(var layerNum=data.length,pointNum=data[0].length,sums=[],y0=[],max3=0,i=0;i&lt;pointNum;++i){for(var temp=0,j=0;j&lt;layerNum;++j)temp+=data[j][i][1];temp&gt;max3&amp;&amp;(max3=temp),sums.push(temp)}for(var k=0;k&lt;pointNum;++k)y0[k]=(max3-sums[k])/2;max3=0;for(var l=0;l&lt;pointNum;++l){var sum2=sums[l]+y0[l];sum2&gt;max3&amp;&amp;(max3=sum2)}return{y0:y0,max:max3}}(layerPoints),baseLine=base2.y0,ky=height/base2.max,n=layerSeries.length,m2=layerSeries[0].indices.length,j=0;j&lt;m2;++j){baseY0=baseLine[j]*ky,data.setItemLayout(layerSeries[0].indices[j],{layerIndex:0,x:layerPoints[0][j][0],y0:baseY0,y:layerPoints[0][j][1]*ky});for(var i=1;i&lt;n;++i)baseY0+=layerPoints[i-1][j][1]*ky,data.setItemLayout(layerSeries[i].indices[j],{layerIndex:i,x:layerPoints[i][j][0],y0:baseY0,y:layerPoints[i][j][1]*ky})}}var SunburstPiece=function(_super){function SunburstPiece2(node,seriesModel,ecModel,api){var _this=_super.call(this)||this;_this.z2=2,_this.textConfig={inside:!0},getECData(_this).seriesIndex=seriesModel.seriesIndex;var text=new ZRText({z2:4,silent:node.getModel().get(["label","silent"])});return _this.setTextContent(text),_this.updateData(!0,node,seriesModel,ecModel,api),_this}return __extends$1(SunburstPiece2,_super),SunburstPiece2.prototype.updateData=function(firstCreate,node,seriesModel,ecModel,api){this.node=node,node.piece=this,seriesModel=seriesModel||this._seriesModel,ecModel=ecModel||this._ecModel;var sector=this;getECData(sector).dataIndex=node.dataIndex;var itemModel=node.getModel(),emphasisModel=itemModel.getModel("emphasis"),layout2=node.getLayout(),sectorShape=extend({},layout2);sectorShape.label=null;var normalStyle=node.getVisual("style");normalStyle.lineJoin="bevel";var decal=node.getVisual("decal");decal&amp;&amp;(normalStyle.decal=createOrUpdatePatternFromDecal(decal,api));var cornerRadius=getSectorCornerRadius(itemModel.getModel("itemStyle"),sectorShape,!0);extend(sectorShape,cornerRadius),each$f(SPECIAL_STATES,function(stateName){var state=sector.ensureState(stateName),itemStyleModel=itemModel.getModel([stateName,"itemStyle"]);state.style=itemStyleModel.getItemStyle();var cornerRadius2=getSectorCornerRadius(itemStyleModel,sectorShape);cornerRadius2&amp;&amp;(state.shape=cornerRadius2)}),firstCreate?(sector.setShape(sectorShape),sector.shape.r=layout2.r0,initProps(sector,{shape:{r:layout2.r}},seriesModel,node.dataIndex)):(updateProps$1(sector,{shape:sectorShape},seriesModel),saveOldStyle(sector)),sector.useStyle(normalStyle),this._updateLabel(seriesModel);var cursorStyle=itemModel.getShallow("cursor");cursorStyle&amp;&amp;sector.attr("cursor",cursorStyle),this._seriesModel=seriesModel||this._seriesModel,this._ecModel=ecModel||this._ecModel;var focus=emphasisModel.get("focus");toggleHoverEmphasis(this,"relative"===focus?concatArray(node.getAncestorsIndices(),node.getDescendantIndices()):"ancestor"===focus?node.getAncestorsIndices():"descendant"===focus?node.getDescendantIndices():focus,emphasisModel.get("blurScope"),emphasisModel.get("disabled"))},SunburstPiece2.prototype._updateLabel=function(seriesModel){var _this=this,itemModel=this.node.getModel(),normalLabelModel=itemModel.getModel("label"),layout2=this.node.getLayout(),angle=layout2.endAngle-layout2.startAngle,midAngle=(layout2.startAngle+layout2.endAngle)/2,dx=Math.cos(midAngle),dy=Math.sin(midAngle),sector=this,label=sector.getTextContent(),dataIndex=this.node.dataIndex,labelMinAngle=normalLabelModel.get("minAngle")/180*Math.PI,isNormalShown=normalLabelModel.get("show")&amp;&amp;!(null!=labelMinAngle&amp;&amp;Math.abs(angle)&lt;labelMinAngle);function getLabelAttr(model,name){var stateAttr=model.get(name);return null==stateAttr?normalLabelModel.get(name):stateAttr}label.ignore=!isNormalShown,each$f(DISPLAY_STATES,function(stateName){var labelStateModel="normal"===stateName?itemModel.getModel("label"):itemModel.getModel([stateName,"label"]),isNormal="normal"===stateName,state=isNormal?label:label.ensureState(stateName),text=seriesModel.getFormattedLabel(dataIndex,stateName);isNormal&amp;&amp;(text=text||_this.node.name),state.style=createTextStyle$1(labelStateModel,{},null,"normal"!==stateName,!0),text&amp;&amp;(state.style.text=text);var isShown=labelStateModel.get("show");null==isShown||isNormal||(state.ignore=!isShown);var r,labelPosition=getLabelAttr(labelStateModel,"position"),sectorState=isNormal?sector:sector.states[stateName],labelColor=sectorState.style.fill;sectorState.textConfig={outsideFill:"inherit"===labelStateModel.get("color")?labelColor:null,inside:"outside"!==labelPosition};var labelPadding=getLabelAttr(labelStateModel,"distance")||0,textAlign=getLabelAttr(labelStateModel,"align"),rotateType=getLabelAttr(labelStateModel,"rotate"),flipStartAngle=.5*Math.PI,flipEndAngle=1.5*Math.PI,midAngleNormal=normalizeRadian("tangential"===rotateType?Math.PI/2-midAngle:midAngle),needsFlip=midAngleNormal&gt;flipStartAngle&amp;&amp;!isRadianAroundZero(midAngleNormal-flipStartAngle)&amp;&amp;midAngleNormal&lt;flipEndAngle;"outside"===labelPosition?(r=layout2.r+labelPadding,textAlign=needsFlip?"right":"left"):textAlign&amp;&amp;"center"!==textAlign?"left"===textAlign?(r=layout2.r0+labelPadding,textAlign=needsFlip?"right":"left"):"right"===textAlign&amp;&amp;(r=layout2.r-labelPadding,textAlign=needsFlip?"left":"right"):(r=angle===2*Math.PI&amp;&amp;0===layout2.r0?0:(layout2.r+layout2.r0)/2,textAlign="center"),state.style.align=textAlign,state.style.verticalAlign=getLabelAttr(labelStateModel,"verticalAlign")||"middle",state.x=r*dx+layout2.cx,state.y=r*dy+layout2.cy;var rotate2=0;"radial"===rotateType?rotate2=normalizeRadian(-midAngle)+(needsFlip?Math.PI:0):"tangential"===rotateType?rotate2=normalizeRadian(Math.PI/2-midAngle)+(needsFlip?Math.PI:0):isNumber(rotateType)&amp;&amp;(rotate2=rotateType*Math.PI/180),state.rotation=normalizeRadian(rotate2)}),label.dirtyStyle()},SunburstPiece2}(Sector);var SunburstView=function(_super){function SunburstView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SunburstView2.type,_this}return __extends$1(SunburstView2,_super),SunburstView2.prototype.render=function(seriesModel,ecModel,api,payload){var self2=this;this.seriesModel=seriesModel,this.api=api,this.ecModel=ecModel;var data=seriesModel.getData(),virtualRoot=data.tree.root,newRoot=seriesModel.getViewRoot(),group=this.group,renderLabelForZeroData=seriesModel.get("renderLabelForZeroData"),newChildren=[];newRoot.eachNode(function(node){newChildren.push(node)});var oldChildren=this._oldChildren||[];!function dualTravel(newChildren2,oldChildren2){if(0===newChildren2.length&amp;&amp;0===oldChildren2.length)return;function getKey2(node){return node.getId()}function processNode(newIdx,oldIdx){!function doRenderNode(newNode,oldNode){renderLabelForZeroData||!newNode||newNode.getValue()||(newNode=null);if(newNode!==virtualRoot&amp;&amp;oldNode!==virtualRoot)if(oldNode&amp;&amp;oldNode.piece)newNode?(oldNode.piece.updateData(!1,newNode,seriesModel,ecModel,api),data.setItemGraphicEl(newNode.dataIndex,oldNode.piece)):function removeNode2(node){if(!node)return;node.piece&amp;&amp;(group.remove(node.piece),node.piece=null)}(oldNode);else if(newNode){var piece=new SunburstPiece(newNode,seriesModel,ecModel,api);group.add(piece),data.setItemGraphicEl(newNode.dataIndex,piece)}}(null==newIdx?null:newChildren2[newIdx],null==oldIdx?null:oldChildren2[oldIdx])}new DataDiffer(oldChildren2,newChildren2,getKey2,getKey2).add(processNode).update(processNode).remove(curry$1(processNode,null)).execute()}(newChildren,oldChildren),function renderRollUp(virtualRoot2,viewRoot){viewRoot.depth&gt;0?(self2.virtualPiece?self2.virtualPiece.updateData(!1,virtualRoot2,seriesModel,ecModel,api):(self2.virtualPiece=new SunburstPiece(virtualRoot2,seriesModel,ecModel,api),group.add(self2.virtualPiece)),viewRoot.piece.off("click"),self2.virtualPiece.on("click",function(e2){self2._rootToNode(viewRoot.parentNode)})):self2.virtualPiece&amp;&amp;(group.remove(self2.virtualPiece),self2.virtualPiece=null)}(virtualRoot,newRoot),this._initEvents(),this._oldChildren=newChildren},SunburstView2.prototype._initEvents=function(){var _this=this;this.group.off("click"),this.group.on("click",function(e2){var targetFound=!1;_this.seriesModel.getViewRoot().eachNode(function(node){if(!targetFound&amp;&amp;node.piece&amp;&amp;node.piece===e2.target){var nodeClick=node.getModel().get("nodeClick");if("rootToNode"===nodeClick)_this._rootToNode(node);else if("link"===nodeClick){var itemModel=node.getModel(),link=itemModel.get("link");if(link)windowOpen(link,itemModel.get("target",!0)||"_blank")}targetFound=!0}})})},SunburstView2.prototype._rootToNode=function(node){node!==this.seriesModel.getViewRoot()&amp;&amp;this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:node})},SunburstView2.prototype.containPoint=function(point,seriesModel){var itemLayout=seriesModel.getData().getItemLayout(0);if(itemLayout){var dx=point[0]-itemLayout.cx,dy=point[1]-itemLayout.cy,radius=Math.sqrt(dx*dx+dy*dy);return radius&lt;=itemLayout.r&amp;&amp;radius&gt;=itemLayout.r0}},SunburstView2.type="sunburst",SunburstView2}(ChartView),SunburstSeriesModel=function(_super){function SunburstSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SunburstSeriesModel2.type,_this.ignoreStyleOnData=!0,_this}return __extends$1(SunburstSeriesModel2,_super),SunburstSeriesModel2.prototype.getInitialData=function(option,ecModel){var root={name:option.name,children:option.data};completeTreeValue(root);var levelModels=this._levelModels=map$1(option.levels||[],function(levelDefine){return new Model(levelDefine,this,ecModel)},this),tree=Tree.createTree(root,this,function beforeLink(nodeData){nodeData.wrapMethod("getItemModel",function(model,idx){var node=tree.getNodeByDataIndex(idx),levelModel=levelModels[node.depth];return levelModel&amp;&amp;(model.parentModel=levelModel),model})});return tree.data},SunburstSeriesModel2.prototype.optionUpdated=function(){this.resetViewRoot()},SunburstSeriesModel2.prototype.getDataParams=function(dataIndex){var params=_super.prototype.getDataParams.apply(this,arguments),node=this.getData().tree.getNodeByDataIndex(dataIndex);return params.treePathInfo=wrapTreePathInfo(node,this),params},SunburstSeriesModel2.prototype.getLevelModel=function(node){return this._levelModels&amp;&amp;this._levelModels[node.depth]},SunburstSeriesModel2.prototype.getViewRoot=function(){return this._viewRoot},SunburstSeriesModel2.prototype.resetViewRoot=function(viewRoot){viewRoot?this._viewRoot=viewRoot:viewRoot=this._viewRoot;var root=this.getRawData().tree.root;viewRoot&amp;&amp;(viewRoot===root||root.contains(viewRoot))||(this._viewRoot=root)},SunburstSeriesModel2.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},SunburstSeriesModel2.type="series.sunburst",SunburstSeriesModel2.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},SunburstSeriesModel2}(SeriesModel);function completeTreeValue(dataNode){var sum2=0;each$f(dataNode.children,function(child){completeTreeValue(child);var childValue=child.value;isArray$1(childValue)&amp;&amp;(childValue=childValue[0]),sum2+=childValue});var thisValue=dataNode.value;isArray$1(thisValue)&amp;&amp;(thisValue=thisValue[0]),(null==thisValue||isNaN(thisValue))&amp;&amp;(thisValue=sum2),thisValue&lt;0&amp;&amp;(thisValue=0),isArray$1(dataNode.value)?dataNode.value[0]=thisValue:dataNode.value=thisValue}var RADIAN=Math.PI/180;function sunburstLayout(seriesType2,ecModel,api){ecModel.eachSeriesByType(seriesType2,function(seriesModel){var center2=seriesModel.get("center"),radius=seriesModel.get("radius");isArray$1(radius)||(radius=[0,radius]),isArray$1(center2)||(center2=[center2,center2]);var width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height),cx=parsePercent(center2[0],width),cy=parsePercent(center2[1],height),r0=parsePercent(radius[0],size/2),r=parsePercent(radius[1],size/2),startAngle=-seriesModel.get("startAngle")*RADIAN,minAngle=seriesModel.get("minAngle")*RADIAN,virtualRoot=seriesModel.getData().tree.root,treeRoot=seriesModel.getViewRoot(),rootDepth=treeRoot.depth,sort2=seriesModel.get("sort");null!=sort2&amp;&amp;initChildren(treeRoot,sort2);var validDataCount=0;each$f(treeRoot.children,function(child){!isNaN(child.getValue())&amp;&amp;validDataCount++});var sum2=treeRoot.getValue(),unitRadian=Math.PI/(sum2||validDataCount)*2,renderRollupNode=treeRoot.depth&gt;0,levels=treeRoot.height-(renderRollupNode?-1:1),rPerLevel=(r-r0)/(levels||1),clockwise=seriesModel.get("clockwise"),stillShowZeroSum=seriesModel.get("stillShowZeroSum"),dir3=clockwise?1:-1,renderNode2=function(node,startAngle2){if(node){var endAngle=startAngle2;if(node!==virtualRoot){var value=node.getValue(),angle2=0===sum2&amp;&amp;stillShowZeroSum?unitRadian:value*unitRadian;angle2&lt;minAngle&amp;&amp;(angle2=minAngle),endAngle=startAngle2+dir3*angle2;var depth=node.depth-rootDepth-(renderRollupNode?-1:1),rStart2=r0+rPerLevel*depth,rEnd2=r0+rPerLevel*(depth+1),levelModel=seriesModel.getLevelModel(node);if(levelModel){var r0_1=levelModel.get("r0",!0),r_1=levelModel.get("r",!0),radius_1=levelModel.get("radius",!0);null!=radius_1&amp;&amp;(r0_1=radius_1[0],r_1=radius_1[1]),null!=r0_1&amp;&amp;(rStart2=parsePercent(r0_1,size/2)),null!=r_1&amp;&amp;(rEnd2=parsePercent(r_1,size/2))}node.setLayout({angle:angle2,startAngle:startAngle2,endAngle:endAngle,clockwise:clockwise,cx:cx,cy:cy,r0:rStart2,r:rEnd2})}if(node.children&amp;&amp;node.children.length){var siblingAngle_1=0;each$f(node.children,function(node2){siblingAngle_1+=renderNode2(node2,startAngle2+siblingAngle_1)})}return endAngle-startAngle2}};if(renderRollupNode){var rStart=r0,rEnd=r0+rPerLevel,angle=2*Math.PI;virtualRoot.setLayout({angle:angle,startAngle:startAngle,endAngle:startAngle+angle,clockwise:clockwise,cx:cx,cy:cy,r0:rStart,r:rEnd})}renderNode2(treeRoot,startAngle)})}function initChildren(node,sortOrder){var children=node.children||[];node.children=function sort(children,sortOrder){if(isFunction(sortOrder)){var sortTargets=map$1(children,function(child,idx){var value=child.getValue();return{params:{depth:child.depth,height:child.height,dataIndex:child.dataIndex,getValue:function(){return value}},index:idx}});return sortTargets.sort(function(a,b){return sortOrder(a.params,b.params)}),map$1(sortTargets,function(target){return children[target.index]})}var isAsc_1="asc"===sortOrder;return children.sort(function(a,b){var diff=(a.getValue()-b.getValue())*(isAsc_1?1:-1);return 0===diff?(a.dataIndex-b.dataIndex)*(isAsc_1?-1:1):diff})}(children,sortOrder),children.length&amp;&amp;each$f(node.children,function(child){initChildren(child,sortOrder)})}function sunburstVisual(ecModel){var paletteScope={};ecModel.eachSeriesByType("sunburst",function(seriesModel){var data=seriesModel.getData(),tree=data.tree;tree.eachNode(function(node){var style=node.getModel().getModel("itemStyle").getItemStyle();style.fill||(style.fill=function pickColor(node,seriesModel,treeHeight){for(var current=node;current&amp;&amp;current.depth&gt;1;)current=current.parentNode;var color2=seriesModel.getColorFromPalette(current.name||current.dataIndex+"",paletteScope);return node.depth&gt;1&amp;&amp;isString(color2)&amp;&amp;(color2=lift(color2,(node.depth-1)/(treeHeight-1)*.5)),color2}(node,seriesModel,tree.root.height)),extend(data.ensureUniqueItemVisual(node.dataIndex,"style"),style)})})}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(_super){function CustomSeriesModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CustomSeriesModel2.type,_this}return __extends$1(CustomSeriesModel2,_super),CustomSeriesModel2.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},CustomSeriesModel2.prototype.getInitialData=function(option,ecModel){return createSeriesData(null,this)},CustomSeriesModel2.prototype.getDataParams=function(dataIndex,dataType,el){var params=_super.prototype.getDataParams.call(this,dataIndex,dataType);return el&amp;&amp;(params.info=customInnerStore(el).info),params},CustomSeriesModel2.type="series.custom",CustomSeriesModel2.dependencies=["grid","polar","geo","singleAxis","calendar"],CustomSeriesModel2.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},CustomSeriesModel2}(SeriesModel);function dataToCoordSize$3(dataSize,dataItem){return dataItem=dataItem||[0,0],map$1(["x","y"],function(dim,dimIdx){var axis=this.getAxis(dim),val=dataItem[dimIdx],halfSize=dataSize[dimIdx]/2;return"category"===axis.type?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))},this)}function dataToCoordSize$2(dataSize,dataItem){return dataItem=dataItem||[0,0],map$1([0,1],function(dimIdx){var val=dataItem[dimIdx],halfSize=dataSize[dimIdx]/2,p1=[],p2=[];return p1[dimIdx]=val-halfSize,p2[dimIdx]=val+halfSize,p1[1-dimIdx]=p2[1-dimIdx]=dataItem[1-dimIdx],Math.abs(this.dataToPoint(p1)[dimIdx]-this.dataToPoint(p2)[dimIdx])},this)}function dataToCoordSize$1(dataSize,dataItem){var axis=this.getAxis(),val=dataItem instanceof Array?dataItem[0]:dataItem,halfSize=(dataSize instanceof Array?dataSize[0]:dataSize)/2;return"category"===axis.type?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))}function dataToCoordSize(dataSize,dataItem){return dataItem=dataItem||[0,0],map$1(["Radius","Angle"],function(dim,dimIdx){var axis=this["get"+dim+"Axis"](),val=dataItem[dimIdx],halfSize=dataSize[dimIdx]/2,result="category"===axis.type?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize));return"Angle"===dim&amp;&amp;(result=result*Math.PI/180),result},this)}function isEC4CompatibleStyle(style,elType,hasOwnTextContentOption,hasOwnTextConfig){return style&amp;&amp;(style.legacy||!1!==style.legacy&amp;&amp;!hasOwnTextContentOption&amp;&amp;!hasOwnTextConfig&amp;&amp;"tspan"!==elType&amp;&amp;("text"===elType||hasOwn(style,"text")))}function convertFromEC4CompatibleStyle(hostStyle,elType,isNormal){var textConfig,textContent,textContentStyle,srcStyle=hostStyle;if("text"===elType)textContentStyle=srcStyle;else{textContentStyle={},hasOwn(srcStyle,"text")&amp;&amp;(textContentStyle.text=srcStyle.text),hasOwn(srcStyle,"rich")&amp;&amp;(textContentStyle.rich=srcStyle.rich),hasOwn(srcStyle,"textFill")&amp;&amp;(textContentStyle.fill=srcStyle.textFill),hasOwn(srcStyle,"textStroke")&amp;&amp;(textContentStyle.stroke=srcStyle.textStroke),hasOwn(srcStyle,"fontFamily")&amp;&amp;(textContentStyle.fontFamily=srcStyle.fontFamily),hasOwn(srcStyle,"fontSize")&amp;&amp;(textContentStyle.fontSize=srcStyle.fontSize),hasOwn(srcStyle,"fontStyle")&amp;&amp;(textContentStyle.fontStyle=srcStyle.fontStyle),hasOwn(srcStyle,"fontWeight")&amp;&amp;(textContentStyle.fontWeight=srcStyle.fontWeight),textContent={type:"text",style:textContentStyle,silent:!0},textConfig={};var hasOwnPos=hasOwn(srcStyle,"textPosition");isNormal?textConfig.position=hasOwnPos?srcStyle.textPosition:"inside":hasOwnPos&amp;&amp;(textConfig.position=srcStyle.textPosition),hasOwn(srcStyle,"textPosition")&amp;&amp;(textConfig.position=srcStyle.textPosition),hasOwn(srcStyle,"textOffset")&amp;&amp;(textConfig.offset=srcStyle.textOffset),hasOwn(srcStyle,"textRotation")&amp;&amp;(textConfig.rotation=srcStyle.textRotation),hasOwn(srcStyle,"textDistance")&amp;&amp;(textConfig.distance=srcStyle.textDistance)}return convertEC4CompatibleRichItem(textContentStyle,hostStyle),each$f(textContentStyle.rich,function(richItem){convertEC4CompatibleRichItem(richItem,richItem)}),{textConfig:textConfig,textContent:textContent}}function convertEC4CompatibleRichItem(out2,richItem){richItem&amp;&amp;(richItem.font=richItem.textFont||richItem.font,hasOwn(richItem,"textStrokeWidth")&amp;&amp;(out2.lineWidth=richItem.textStrokeWidth),hasOwn(richItem,"textAlign")&amp;&amp;(out2.align=richItem.textAlign),hasOwn(richItem,"textVerticalAlign")&amp;&amp;(out2.verticalAlign=richItem.textVerticalAlign),hasOwn(richItem,"textLineHeight")&amp;&amp;(out2.lineHeight=richItem.textLineHeight),hasOwn(richItem,"textWidth")&amp;&amp;(out2.width=richItem.textWidth),hasOwn(richItem,"textHeight")&amp;&amp;(out2.height=richItem.textHeight),hasOwn(richItem,"textBackgroundColor")&amp;&amp;(out2.backgroundColor=richItem.textBackgroundColor),hasOwn(richItem,"textPadding")&amp;&amp;(out2.padding=richItem.textPadding),hasOwn(richItem,"textBorderColor")&amp;&amp;(out2.borderColor=richItem.textBorderColor),hasOwn(richItem,"textBorderWidth")&amp;&amp;(out2.borderWidth=richItem.textBorderWidth),hasOwn(richItem,"textBorderRadius")&amp;&amp;(out2.borderRadius=richItem.textBorderRadius),hasOwn(richItem,"textBoxShadowColor")&amp;&amp;(out2.shadowColor=richItem.textBoxShadowColor),hasOwn(richItem,"textBoxShadowBlur")&amp;&amp;(out2.shadowBlur=richItem.textBoxShadowBlur),hasOwn(richItem,"textBoxShadowOffsetX")&amp;&amp;(out2.shadowOffsetX=richItem.textBoxShadowOffsetX),hasOwn(richItem,"textBoxShadowOffsetY")&amp;&amp;(out2.shadowOffsetY=richItem.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(itemStl,txStl,txCfg){var out2=itemStl;out2.textPosition=out2.textPosition||txCfg.position||"inside",null!=txCfg.offset&amp;&amp;(out2.textOffset=txCfg.offset),null!=txCfg.rotation&amp;&amp;(out2.textRotation=txCfg.rotation),null!=txCfg.distance&amp;&amp;(out2.textDistance=txCfg.distance);var isInside=out2.textPosition.indexOf("inside")&gt;=0,hostFill=itemStl.fill||"#000";convertToEC4RichItem(out2,txStl);var textFillNotSet=null==out2.textFill;return isInside?textFillNotSet&amp;&amp;(out2.textFill=txCfg.insideFill||"#fff",!out2.textStroke&amp;&amp;txCfg.insideStroke&amp;&amp;(out2.textStroke=txCfg.insideStroke),!out2.textStroke&amp;&amp;(out2.textStroke=hostFill),null==out2.textStrokeWidth&amp;&amp;(out2.textStrokeWidth=2)):(textFillNotSet&amp;&amp;(out2.textFill=itemStl.fill||txCfg.outsideFill||"#000"),!out2.textStroke&amp;&amp;txCfg.outsideStroke&amp;&amp;(out2.textStroke=txCfg.outsideStroke)),out2.text=txStl.text,out2.rich=txStl.rich,each$f(txStl.rich,function(richItem){convertToEC4RichItem(richItem,richItem)}),out2}function convertToEC4RichItem(out2,richItem){richItem&amp;&amp;(hasOwn(richItem,"fill")&amp;&amp;(out2.textFill=richItem.fill),hasOwn(richItem,"stroke")&amp;&amp;(out2.textStroke=richItem.fill),hasOwn(richItem,"lineWidth")&amp;&amp;(out2.textStrokeWidth=richItem.lineWidth),hasOwn(richItem,"font")&amp;&amp;(out2.font=richItem.font),hasOwn(richItem,"fontStyle")&amp;&amp;(out2.fontStyle=richItem.fontStyle),hasOwn(richItem,"fontWeight")&amp;&amp;(out2.fontWeight=richItem.fontWeight),hasOwn(richItem,"fontSize")&amp;&amp;(out2.fontSize=richItem.fontSize),hasOwn(richItem,"fontFamily")&amp;&amp;(out2.fontFamily=richItem.fontFamily),hasOwn(richItem,"align")&amp;&amp;(out2.textAlign=richItem.align),hasOwn(richItem,"verticalAlign")&amp;&amp;(out2.textVerticalAlign=richItem.verticalAlign),hasOwn(richItem,"lineHeight")&amp;&amp;(out2.textLineHeight=richItem.lineHeight),hasOwn(richItem,"width")&amp;&amp;(out2.textWidth=richItem.width),hasOwn(richItem,"height")&amp;&amp;(out2.textHeight=richItem.height),hasOwn(richItem,"backgroundColor")&amp;&amp;(out2.textBackgroundColor=richItem.backgroundColor),hasOwn(richItem,"padding")&amp;&amp;(out2.textPadding=richItem.padding),hasOwn(richItem,"borderColor")&amp;&amp;(out2.textBorderColor=richItem.borderColor),hasOwn(richItem,"borderWidth")&amp;&amp;(out2.textBorderWidth=richItem.borderWidth),hasOwn(richItem,"borderRadius")&amp;&amp;(out2.textBorderRadius=richItem.borderRadius),hasOwn(richItem,"shadowColor")&amp;&amp;(out2.textBoxShadowColor=richItem.shadowColor),hasOwn(richItem,"shadowBlur")&amp;&amp;(out2.textBoxShadowBlur=richItem.shadowBlur),hasOwn(richItem,"shadowOffsetX")&amp;&amp;(out2.textBoxShadowOffsetX=richItem.shadowOffsetX),hasOwn(richItem,"shadowOffsetY")&amp;&amp;(out2.textBoxShadowOffsetY=richItem.shadowOffsetY),hasOwn(richItem,"textShadowColor")&amp;&amp;(out2.textShadowColor=richItem.textShadowColor),hasOwn(richItem,"textShadowBlur")&amp;&amp;(out2.textShadowBlur=richItem.textShadowBlur),hasOwn(richItem,"textShadowOffsetX")&amp;&amp;(out2.textShadowOffsetX=richItem.textShadowOffsetX),hasOwn(richItem,"textShadowOffsetY")&amp;&amp;(out2.textShadowOffsetY=richItem.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(obj,key){return obj[key]=1,obj},{}),TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(animationType,el,elOption,parentModel,dataIndex){var animationProp=animationType+"Animation",config=getAnimationConfig(animationType,parentModel,dataIndex)||{},userDuring=transitionInnerStore(el).userDuring;return config.duration&gt;0&amp;&amp;(config.during=userDuring?bind$1(duringCall,{el:el,userDuring:userDuring}):null,config.setToFinal=!0,config.scope=animationType),extend(config,elOption[animationProp]),config}function applyUpdateTransition(el,elOption,animatableModel,opts){var dataIndex=(opts=opts||{}).dataIndex,isInit=opts.isInit,clearStyle=opts.clearStyle,hasAnimation=animatableModel.isAnimationEnabled(),store=transitionInnerStore(el),styleOpt=elOption.style;store.userDuring=elOption.during;var transFromProps={},propsToSet={};if(function prepareTransformAllPropsFinal(el,elOption,allProps){for(var i=0;i&lt;LEGACY_TRANSFORM_PROPS.length;i++){var legacyName=LEGACY_TRANSFORM_PROPS[i],xyName=LEGACY_TRANSFORM_PROPS_MAP[legacyName],legacyArr=elOption[legacyName];legacyArr&amp;&amp;(allProps[xyName[0]]=legacyArr[0],allProps[xyName[1]]=legacyArr[1])}for(i=0;i&lt;TRANSFORMABLE_PROPS.length;i++){var key=TRANSFORMABLE_PROPS[i];null!=elOption[key]&amp;&amp;(allProps[key]=elOption[key])}}(0,elOption,propsToSet),prepareShapeOrExtraAllPropsFinal("shape",elOption,propsToSet),prepareShapeOrExtraAllPropsFinal("extra",elOption,propsToSet),!isInit&amp;&amp;hasAnimation&amp;&amp;(!function prepareTransformTransitionFrom(el,elOption,transFromProps){for(var transition=elOption.transition,transitionKeys=isTransitionAll(transition)?TRANSFORMABLE_PROPS:normalizeToArray(transition||[]),i=0;i&lt;transitionKeys.length;i++){var key=transitionKeys[i];if("style"!==key&amp;&amp;"shape"!==key&amp;&amp;"extra"!==key){var elVal=el[key];transFromProps[key]=elVal}}}(el,elOption,transFromProps),prepareShapeOrExtraTransitionFrom("shape",el,elOption,transFromProps),prepareShapeOrExtraTransitionFrom("extra",el,elOption,transFromProps),function prepareStyleTransitionFrom(fromEl,elOption,styleOpt,transFromProps){if(!styleOpt)return;var transFromStyleProps,fromElStyle=fromEl.style;if(fromElStyle){var styleTransition=styleOpt.transition,elTransition=elOption.transition;if(styleTransition&amp;&amp;!isTransitionAll(styleTransition)){var transitionKeys=normalizeToArray(styleTransition);!transFromStyleProps&amp;&amp;(transFromStyleProps=transFromProps.style={});for(var i=0;i&lt;transitionKeys.length;i++){var elVal=fromElStyle[key=transitionKeys[i]];transFromStyleProps[key]=elVal}}else if(fromEl.getAnimationStyleProps&amp;&amp;(isTransitionAll(elTransition)||isTransitionAll(styleTransition)||indexOf(elTransition,"style")&gt;=0)){var animationProps=fromEl.getAnimationStyleProps(),animationStyleProps=animationProps?animationProps.style:null;if(animationStyleProps){!transFromStyleProps&amp;&amp;(transFromStyleProps=transFromProps.style={});var styleKeys=keys(styleOpt);for(i=0;i&lt;styleKeys.length;i++){var key;if(animationStyleProps[key=styleKeys[i]]){elVal=fromElStyle[key];transFromStyleProps[key]=elVal}}}}}}(el,elOption,styleOpt,transFromProps)),propsToSet.style=styleOpt,function applyPropsDirectly(el,allPropsFinal,clearStyle){var styleOpt=allPropsFinal.style;if(!el.isGroup&amp;&amp;styleOpt){if(clearStyle){el.useStyle({});for(var animators=el.animators,i=0;i&lt;animators.length;i++){var animator=animators[i];"style"===animator.targetName&amp;&amp;animator.changeTarget(el.style)}}el.setStyle(styleOpt)}allPropsFinal&amp;&amp;(allPropsFinal.style=null,allPropsFinal&amp;&amp;el.attr(allPropsFinal),allPropsFinal.style=styleOpt)}(el,propsToSet,clearStyle),function applyMiscProps(el,elOption){hasOwn(elOption,"silent")&amp;&amp;(el.silent=elOption.silent),hasOwn(elOption,"ignore")&amp;&amp;(el.ignore=elOption.ignore),el instanceof Displayable&amp;&amp;hasOwn(elOption,"invisible")&amp;&amp;(el.invisible=elOption.invisible);el instanceof Path&amp;&amp;hasOwn(elOption,"autoBatch")&amp;&amp;(el.autoBatch=elOption.autoBatch)}(el,elOption),hasAnimation)if(isInit){var enterFromProps_1={};each$f(ELEMENT_ANIMATABLE_PROPS,function(propName){var prop=propName?elOption[propName]:elOption;prop&amp;&amp;prop.enterFrom&amp;&amp;(propName&amp;&amp;(enterFromProps_1[propName]=enterFromProps_1[propName]||{}),extend(propName?enterFromProps_1[propName]:enterFromProps_1,prop.enterFrom))});var config=getElementAnimationConfig("enter",el,elOption,animatableModel,dataIndex);config.duration&gt;0&amp;&amp;el.animateFrom(enterFromProps_1,config)}else!function applyPropsTransition(el,elOption,dataIndex,model,transFromProps){if(transFromProps){var config=getElementAnimationConfig("update",el,elOption,model,dataIndex);config.duration&gt;0&amp;&amp;el.animateFrom(transFromProps,config)}}(el,elOption,dataIndex||0,animatableModel,transFromProps);updateLeaveTo(el,elOption),styleOpt?el.dirty():el.markRedraw()}function updateLeaveTo(el,elOption){for(var leaveToProps=transitionInnerStore(el).leaveToProps,i=0;i&lt;ELEMENT_ANIMATABLE_PROPS.length;i++){var propName=ELEMENT_ANIMATABLE_PROPS[i],prop=propName?elOption[propName]:elOption;prop&amp;&amp;prop.leaveTo&amp;&amp;(leaveToProps||(leaveToProps=transitionInnerStore(el).leaveToProps={}),propName&amp;&amp;(leaveToProps[propName]=leaveToProps[propName]||{}),extend(propName?leaveToProps[propName]:leaveToProps,prop.leaveTo))}}function applyLeaveTransition(el,elOption,animatableModel,onRemove){if(el){var parent_1=el.parent,leaveToProps=transitionInnerStore(el).leaveToProps;if(leaveToProps){var config=getElementAnimationConfig("update",el,elOption,animatableModel,0);config.done=function(){parent_1.remove(el)},el.animateTo(leaveToProps,config)}else parent_1.remove(el)}}function isTransitionAll(transition){return"all"===transition}var tmpDuringScope={},transitionDuringAPI={setTransform:function(key,val){return tmpDuringScope.el[key]=val,this},getTransform:function(key){return tmpDuringScope.el[key]},setShape:function(key,val){var el=tmpDuringScope.el;return(el.shape||(el.shape={}))[key]=val,el.dirtyShape&amp;&amp;el.dirtyShape(),this},getShape:function(key){var shape=tmpDuringScope.el.shape;if(shape)return shape[key]},setStyle:function(key,val){var el=tmpDuringScope.el,style=el.style;return style&amp;&amp;(style[key]=val,el.dirtyStyle&amp;&amp;el.dirtyStyle()),this},getStyle:function(key){var style=tmpDuringScope.el.style;if(style)return style[key]},setExtra:function(key,val){return(tmpDuringScope.el.extra||(tmpDuringScope.el.extra={}))[key]=val,this},getExtra:function(key){var extra=tmpDuringScope.el.extra;if(extra)return extra[key]}};function duringCall(){var el=this.el;if(el){var latestUserDuring=transitionInnerStore(el).userDuring,scopeUserDuring=this.userDuring;latestUserDuring===scopeUserDuring?(tmpDuringScope.el=el,scopeUserDuring(transitionDuringAPI)):this.el=this.userDuring=null}}function prepareShapeOrExtraTransitionFrom(mainAttr,fromEl,elOption,transFromProps){var attrOpt=elOption[mainAttr];if(attrOpt){var transFromPropsInAttr,elPropsInAttr=fromEl[mainAttr];if(elPropsInAttr){var transition=elOption.transition,attrTransition=attrOpt.transition;if(attrTransition)if(!transFromPropsInAttr&amp;&amp;(transFromPropsInAttr=transFromProps[mainAttr]={}),isTransitionAll(attrTransition))extend(transFromPropsInAttr,elPropsInAttr);else for(var transitionKeys=normalizeToArray(attrTransition),i=0;i&lt;transitionKeys.length;i++){var elVal=elPropsInAttr[key=transitionKeys[i]];transFromPropsInAttr[key]=elVal}else if(isTransitionAll(transition)||indexOf(transition,mainAttr)&gt;=0){!transFromPropsInAttr&amp;&amp;(transFromPropsInAttr=transFromProps[mainAttr]={});var elPropsInAttrKeys=keys(elPropsInAttr);for(i=0;i&lt;elPropsInAttrKeys.length;i++){var key;elVal=elPropsInAttr[key=elPropsInAttrKeys[i]];isNonStyleTransitionEnabled(attrOpt[key],elVal)&amp;&amp;(transFromPropsInAttr[key]=elVal)}}}}}function prepareShapeOrExtraAllPropsFinal(mainAttr,elOption,allProps){var attrOpt=elOption[mainAttr];if(attrOpt)for(var allPropsInAttr=allProps[mainAttr]={},keysInAttr=keys(attrOpt),i=0;i&lt;keysInAttr.length;i++){var key=keysInAttr[i];allPropsInAttr[key]=cloneValue(attrOpt[key])}}function isNonStyleTransitionEnabled(optVal,elVal){return isArrayLike(optVal)?optVal!==elVal:null!=optVal&amp;&amp;isFinite(optVal)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(el){el.stopAnimation("keyframe"),el.attr(getStateToRestore(el))}function applyKeyframeAnimation(el,animationOpts,animatableModel){if(animatableModel.isAnimationEnabled()&amp;&amp;animationOpts)if(isArray$1(animationOpts))each$f(animationOpts,function(singleAnimationOpts){applyKeyframeAnimation(el,singleAnimationOpts,animatableModel)});else{var keyframes=animationOpts.keyframes,duration=animationOpts.duration;if(animatableModel&amp;&amp;null==duration){var config=getAnimationConfig("enter",animatableModel,0);duration=config&amp;&amp;config.duration}if(keyframes&amp;&amp;duration){var stateToRestore=getStateToRestore(el);each$f(ELEMENT_ANIMATABLE_PROPS,function(targetPropName){var animator;targetPropName&amp;&amp;!el[targetPropName]||(keyframes.sort(function(a,b){return a.percent-b.percent}),each$f(keyframes,function(kf){var animators=el.animators,kfValues=targetPropName?kf[targetPropName]:kf;if(kfValues){var propKeys=keys(kfValues);if(targetPropName||(propKeys=filter(propKeys,function(key){return indexOf(KEYFRAME_EXCLUDE_KEYS,key)&lt;0})),propKeys.length){animator||((animator=el.animate(targetPropName,animationOpts.loop,!0)).scope="keyframe");for(var i=0;i&lt;animators.length;i++)animators[i]!==animator&amp;&amp;animators[i].targetName===animator.targetName&amp;&amp;animators[i].stopTracks(propKeys);targetPropName&amp;&amp;(stateToRestore[targetPropName]=stateToRestore[targetPropName]||{});var savedTarget=targetPropName?stateToRestore[targetPropName]:stateToRestore;each$f(propKeys,function(key){savedTarget[key]=((targetPropName?el[targetPropName]:el)||{})[key]}),animator.whenWithKeys(duration*kf.percent,kfValues,propKeys,kf.easing)}}}),animator&amp;&amp;animator.delay(animationOpts.delay||0).duration(duration).start(animationOpts.easing))})}}}var NORMAL="normal",STATES=["normal","emphasis","blur","select"],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:["emphasis","itemStyle"],blur:["blur","itemStyle"],select:["select","itemStyle"]},PATH_LABEL={normal:["label"],emphasis:["emphasis","label"],blur:["blur","label"],select:["select","label"]},DEFAULT_TRANSITION=["x","y"],attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:function cartesianPrepareCustom(coordSys){var rect=coordSys.master.getRect();return{coordSys:{type:"cartesian2d",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:function(data){return coordSys.dataToPoint(data)},size:bind$1(dataToCoordSize$3,coordSys)}}},geo:function geoPrepareCustom(coordSys){var rect=coordSys.getBoundingRect();return{coordSys:{type:"geo",x:rect.x,y:rect.y,width:rect.width,height:rect.height,zoom:coordSys.getZoom()},api:{coord:function(data){return coordSys.dataToPoint(data)},size:bind$1(dataToCoordSize$2,coordSys)}}},single:function singlePrepareCustom(coordSys){var rect=coordSys.getRect();return{coordSys:{type:"singleAxis",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:function(val){return coordSys.dataToPoint(val)},size:bind$1(dataToCoordSize$1,coordSys)}}},polar:function polarPrepareCustom(coordSys){var radiusAxis=coordSys.getRadiusAxis(),angleAxis=coordSys.getAngleAxis(),radius=radiusAxis.getExtent();return radius[0]&gt;radius[1]&amp;&amp;radius.reverse(),{coordSys:{type:"polar",cx:coordSys.cx,cy:coordSys.cy,r:radius[1],r0:radius[0]},api:{coord:function(data){var radius2=radiusAxis.dataToRadius(data[0]),angle=angleAxis.dataToAngle(data[1]),coord=coordSys.coordToPoint([radius2,angle]);return coord.push(radius2,angle*Math.PI/180),coord},size:bind$1(dataToCoordSize,coordSys)}}},calendar:function calendarPrepareCustom(coordSys){var rect=coordSys.getRect(),rangeInfo=coordSys.getRangeInfo();return{coordSys:{type:"calendar",x:rect.x,y:rect.y,width:rect.width,height:rect.height,cellWidth:coordSys.getCellWidth(),cellHeight:coordSys.getCellHeight(),rangeInfo:{start:rangeInfo.start,end:rangeInfo.end,weeks:rangeInfo.weeks,dayCount:rangeInfo.allDay}},api:{coord:function(data,clamp2){return coordSys.dataToPoint(data,clamp2)}}}}};function isPath(el){return el instanceof Path}function isDisplayable(el){return el instanceof Displayable}var CustomChartView=function(_super){function CustomChartView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CustomChartView2.type,_this}return __extends$1(CustomChartView2,_super),CustomChartView2.prototype.render=function(customSeries,ecModel,api,payload){this._progressiveEls=null;var oldData=this._data,data=customSeries.getData(),group=this.group,renderItem=makeRenderItem(customSeries,data,ecModel,api);oldData||group.removeAll(),data.diff(oldData).add(function(newIdx){createOrUpdateItem(api,null,newIdx,renderItem(newIdx,payload),customSeries,group,data)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&amp;&amp;applyLeaveTransition(el,customInnerStore(el).option,customSeries)}).update(function(newIdx,oldIdx){var oldEl=oldData.getItemGraphicEl(oldIdx);createOrUpdateItem(api,oldEl,newIdx,renderItem(newIdx,payload),customSeries,group,data)}).execute();var clipPath=customSeries.get("clip",!0)?createClipPath(customSeries.coordinateSystem,!1,customSeries):null;clipPath?group.setClipPath(clipPath):group.removeClipPath(),this._data=data},CustomChartView2.prototype.incrementalPrepareRender=function(customSeries,ecModel,api){this.group.removeAll(),this._data=null},CustomChartView2.prototype.incrementalRender=function(params,customSeries,ecModel,api,payload){var data=customSeries.getData(),renderItem=makeRenderItem(customSeries,data,ecModel,api),progressiveEls=this._progressiveEls=[];function setIncrementalAndHoverLayer(el2){el2.isGroup||(el2.incremental=!0,el2.ensureState("emphasis").hoverLayer=!0)}for(var idx=params.start;idx&lt;params.end;idx++){var el=createOrUpdateItem(null,null,idx,renderItem(idx,payload),customSeries,this.group,data);el&amp;&amp;(el.traverse(setIncrementalAndHoverLayer),progressiveEls.push(el))}},CustomChartView2.prototype.eachRendered=function(cb){traverseElements(this._progressiveEls||this.group,cb)},CustomChartView2.prototype.filterForExposedEvent=function(eventType,query,targetEl,packedEvent){var elementName=query.element;if(null==elementName||targetEl.name===elementName)return!0;for(;(targetEl=targetEl.__hostTarget||targetEl.parent)&amp;&amp;targetEl!==this.group;)if(targetEl.name===elementName)return!0;return!1},CustomChartView2.type="custom",CustomChartView2}(ChartView);function createEl$1(elOption){var el,graphicType=elOption.type;if("path"===graphicType){var shape=elOption.shape,pathRect=null!=shape.width&amp;&amp;null!=shape.height?{x:shape.x||0,y:shape.y||0,width:shape.width,height:shape.height}:null,pathData=getPathData(shape);el=makePath(pathData,null,pathRect,shape.layout||"center"),customInnerStore(el).customPathData=pathData}else if("image"===graphicType)el=new ZRImage({}),customInnerStore(el).customImagePath=elOption.style.image;else if("text"===graphicType)el=new ZRText({});else if("group"===graphicType)el=new Group$3;else{if("compoundPath"===graphicType)throw new Error('"compoundPath" is not supported yet.');var Clz=getShapeClass(graphicType);if(!Clz){throwError("")}el=new Clz}return customInnerStore(el).customGraphicType=graphicType,el.name=elOption.name,el.z2EmphasisLift=1,el.z2SelectLift=1,el}function updateElNormal(api,el,dataIndex,elOption,attachedTxInfo,seriesModel,isInit){stopPreviousKeyframeAnimationAndRestore(el);var txCfgOpt=attachedTxInfo&amp;&amp;attachedTxInfo.normal.cfg;txCfgOpt&amp;&amp;el.setTextConfig(txCfgOpt),elOption&amp;&amp;null==elOption.transition&amp;&amp;(elOption.transition=DEFAULT_TRANSITION);var styleOpt=elOption&amp;&amp;elOption.style;if(styleOpt){if("text"===el.type){var textOptionStyle=styleOpt;hasOwn(textOptionStyle,"textFill")&amp;&amp;(textOptionStyle.fill=textOptionStyle.textFill),hasOwn(textOptionStyle,"textStroke")&amp;&amp;(textOptionStyle.stroke=textOptionStyle.textStroke)}var decalPattern=void 0,decalObj=isPath(el)?styleOpt.decal:null;api&amp;&amp;decalObj&amp;&amp;(decalObj.dirty=!0,decalPattern=createOrUpdatePatternFromDecal(decalObj,api)),styleOpt.__decalPattern=decalPattern}isDisplayable(el)&amp;&amp;(styleOpt&amp;&amp;(decalPattern=styleOpt.__decalPattern)&amp;&amp;(styleOpt.decal=decalPattern));applyUpdateTransition(el,elOption,seriesModel,{dataIndex:dataIndex,isInit:isInit,clearStyle:!0}),applyKeyframeAnimation(el,elOption.keyframeAnimation,seriesModel)}function updateElOnState(state,el,elStateOpt,styleOpt,attachedTxInfo){var elDisplayable=el.isGroup?null:el,txCfgOpt=attachedTxInfo&amp;&amp;attachedTxInfo[state].cfg;if(elDisplayable){var stateObj=elDisplayable.ensureState(state);if(!1===styleOpt){var existingEmphasisState=elDisplayable.getState(state);existingEmphasisState&amp;&amp;(existingEmphasisState.style=null)}else stateObj.style=styleOpt||null;txCfgOpt&amp;&amp;(stateObj.textConfig=txCfgOpt),setDefaultStateProxy(elDisplayable)}}function updateZForEachState(elDisplayable,elOption,state){var isNormal="normal"===state,elStateOpt=isNormal?elOption:retrieveStateOption(elOption,state),optZ2=elStateOpt?elStateOpt.z2:null;null!=optZ2&amp;&amp;((isNormal?elDisplayable:elDisplayable.ensureState(state)).z2=optZ2||0)}function makeRenderItem(customSeries,data,ecModel,api){var renderItem=customSeries.get("renderItem"),coordSys=customSeries.coordinateSystem,prepareResult2={};coordSys&amp;&amp;(prepareResult2=coordSys.prepareCustoms?coordSys.prepareCustoms(coordSys):prepareCustoms[coordSys.type](coordSys));for(var currDataIndexInside,currItemModel,userAPI=defaults({getWidth:api.getWidth,getHeight:api.getHeight,getZr:api.getZr,getDevicePixelRatio:api.getDevicePixelRatio,value:function value(dim,dataIndexInside){return null==dataIndexInside&amp;&amp;(dataIndexInside=currDataIndexInside),data.getStore().get(data.getDimensionIndex(dim||0),dataIndexInside)},style:function style(userProps,dataIndexInside){null==dataIndexInside&amp;&amp;(dataIndexInside=currDataIndexInside);var style2=data.getItemVisual(dataIndexInside,"style"),visualColor=style2&amp;&amp;style2.fill,opacity=style2&amp;&amp;style2.opacity,itemStyle=getItemStyleModel(dataIndexInside,"normal").getItemStyle();null!=visualColor&amp;&amp;(itemStyle.fill=visualColor),null!=opacity&amp;&amp;(itemStyle.opacity=opacity);var opt={inheritColor:isString(visualColor)?visualColor:"#000"},labelModel=getLabelModel(dataIndexInside,"normal"),textStyle=createTextStyle$1(labelModel,null,opt,!1,!0);textStyle.text=labelModel.getShallow("show")?retrieve2(customSeries.getFormattedLabel(dataIndexInside,"normal"),getDefaultLabel(data,dataIndexInside)):null;var textConfig=createTextConfig(labelModel,opt,!1);return preFetchFromExtra(userProps,itemStyle),itemStyle=convertToEC4StyleForCustomSerise(itemStyle,textStyle,textConfig),userProps&amp;&amp;applyUserPropsAfter(itemStyle,userProps),itemStyle.legacy=!0,itemStyle},ordinalRawValue:function ordinalRawValue(dim,dataIndexInside){null==dataIndexInside&amp;&amp;(dataIndexInside=currDataIndexInside),dim=dim||0;var dimInfo=data.getDimensionInfo(dim);if(!dimInfo){var dimIndex=data.getDimensionIndex(dim);return dimIndex&gt;=0?data.getStore().get(dimIndex,dataIndexInside):void 0}var val=data.get(dimInfo.name,dataIndexInside),ordinalMeta=dimInfo&amp;&amp;dimInfo.ordinalMeta;return ordinalMeta?ordinalMeta.categories[val]:val},styleEmphasis:function styleEmphasis(userProps,dataIndexInside){null==dataIndexInside&amp;&amp;(dataIndexInside=currDataIndexInside);var itemStyle=getItemStyleModel(dataIndexInside,"emphasis").getItemStyle(),labelModel=getLabelModel(dataIndexInside,"emphasis"),textStyle=createTextStyle$1(labelModel,null,null,!0,!0);textStyle.text=labelModel.getShallow("show")?retrieve3(customSeries.getFormattedLabel(dataIndexInside,"emphasis"),customSeries.getFormattedLabel(dataIndexInside,"normal"),getDefaultLabel(data,dataIndexInside)):null;var textConfig=createTextConfig(labelModel,null,!0);return preFetchFromExtra(userProps,itemStyle),itemStyle=convertToEC4StyleForCustomSerise(itemStyle,textStyle,textConfig),userProps&amp;&amp;applyUserPropsAfter(itemStyle,userProps),itemStyle.legacy=!0,itemStyle},visual:function visual(visualType,dataIndexInside){if(null==dataIndexInside&amp;&amp;(dataIndexInside=currDataIndexInside),hasOwn(STYLE_VISUAL_TYPE,visualType)){var style_1=data.getItemVisual(dataIndexInside,"style");return style_1?style_1[STYLE_VISUAL_TYPE[visualType]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,visualType))return data.getItemVisual(dataIndexInside,visualType)},barLayout:function barLayout(opt){if("cartesian2d"===coordSys.type){return function getLayoutOnAxis(opt){var params=[],baseAxis=opt.axis;if("category"===baseAxis.type){for(var bandWidth=baseAxis.getBandWidth(),i=0;i&lt;opt.count;i++)params.push(defaults({bandWidth:bandWidth,axisKey:"axis0",stackId:"__ec_stack_"+i},opt));var widthAndOffsets=doCalBarWidthAndOffset(params),result=[];for(i=0;i&lt;opt.count;i++){var item=widthAndOffsets.axis0["__ec_stack_"+i];item.offsetCenter=item.offset+item.width/2,result.push(item)}return result}}(defaults({axis:coordSys.getBaseAxis()},opt))}},currentSeriesIndices:function currentSeriesIndices(){return ecModel.getCurrentSeriesIndices()},font:function font(opt){return getFont(opt,ecModel)}},prepareResult2.api||{}),userParams={context:{},seriesId:customSeries.id,seriesName:customSeries.name,seriesIndex:customSeries.seriesIndex,coordSys:prepareResult2.coordSys,dataInsideLength:data.count(),encode:wrapEncodeDef(customSeries.getData())},currItemStyleModels={},currLabelModels={},seriesItemStyleModels={},seriesLabelModels={},i=0;i&lt;STATES.length;i++){var stateName=STATES[i];seriesItemStyleModels[stateName]=customSeries.getModel(PATH_ITEM_STYLE[stateName]),seriesLabelModels[stateName]=customSeries.getModel(PATH_LABEL[stateName])}function getItemModel2(dataIndexInside){return dataIndexInside===currDataIndexInside?currItemModel||(currItemModel=data.getItemModel(dataIndexInside)):data.getItemModel(dataIndexInside)}function getItemStyleModel(dataIndexInside,state){return data.hasItemOption?dataIndexInside===currDataIndexInside?currItemStyleModels[state]||(currItemStyleModels[state]=getItemModel2(dataIndexInside).getModel(PATH_ITEM_STYLE[state])):getItemModel2(dataIndexInside).getModel(PATH_ITEM_STYLE[state]):seriesItemStyleModels[state]}function getLabelModel(dataIndexInside,state){return data.hasItemOption?dataIndexInside===currDataIndexInside?currLabelModels[state]||(currLabelModels[state]=getItemModel2(dataIndexInside).getModel(PATH_LABEL[state])):getItemModel2(dataIndexInside).getModel(PATH_LABEL[state]):seriesLabelModels[state]}return function(dataIndexInside,payload){return currDataIndexInside=dataIndexInside,currItemModel=null,currItemStyleModels={},currLabelModels={},renderItem&amp;&amp;renderItem(defaults({dataIndexInside:dataIndexInside,dataIndex:data.getRawIndex(dataIndexInside),actionType:payload?payload.type:null},userParams),userAPI)};function applyUserPropsAfter(itemStyle,extra){for(var key in extra)hasOwn(extra,key)&amp;&amp;(itemStyle[key]=extra[key])}function preFetchFromExtra(extra,itemStyle){extra&amp;&amp;(extra.textFill&amp;&amp;(itemStyle.textFill=extra.textFill),extra.textPosition&amp;&amp;(itemStyle.textPosition=extra.textPosition))}}function wrapEncodeDef(data){var encodeDef={};return each$f(data.dimensions,function(dimName){var dimInfo=data.getDimensionInfo(dimName);if(!dimInfo.isExtraCoord){var coordDim=dimInfo.coordDim;(encodeDef[coordDim]=encodeDef[coordDim]||[])[dimInfo.coordDimIndex]=data.getDimensionIndex(dimName)}}),encodeDef}function createOrUpdateItem(api,existsEl,dataIndex,elOption,seriesModel,group,data){if(elOption){var el=doCreateOrUpdateEl(api,existsEl,dataIndex,elOption,seriesModel,group);return el&amp;&amp;data.setItemGraphicEl(dataIndex,el),el&amp;&amp;toggleHoverEmphasis(el,elOption.focus,elOption.blurScope,elOption.emphasisDisabled),el}group.remove(existsEl)}function doCreateOrUpdateEl(api,existsEl,dataIndex,elOption,seriesModel,group){var toBeReplacedIdx=-1,oldEl=existsEl;existsEl&amp;&amp;doesElNeedRecreate(existsEl,elOption,seriesModel)&amp;&amp;(toBeReplacedIdx=indexOf(group.childrenRef(),existsEl),existsEl=null);var isInit=!existsEl,el=existsEl;el?el.clearStates():(el=createEl$1(elOption),oldEl&amp;&amp;function copyElement(sourceEl,targetEl){targetEl.copyTransform(sourceEl),isDisplayable(targetEl)&amp;&amp;isDisplayable(sourceEl)&amp;&amp;(targetEl.setStyle(sourceEl.style),targetEl.z=sourceEl.z,targetEl.z2=sourceEl.z2,targetEl.zlevel=sourceEl.zlevel,targetEl.invisible=sourceEl.invisible,targetEl.ignore=sourceEl.ignore,isPath(targetEl)&amp;&amp;isPath(sourceEl)&amp;&amp;targetEl.setShape(sourceEl.shape))}(oldEl,el)),!1===elOption.morph?el.disableMorphing=!0:el.disableMorphing&amp;&amp;(el.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,function doCreateOrUpdateAttachedTx(el,dataIndex,elOption,seriesModel,isInit,attachedTxInfo){if(el.isGroup)return;processTxInfo(elOption,null,attachedTxInfo),processTxInfo(elOption,"emphasis",attachedTxInfo);var txConOptNormal=attachedTxInfo.normal.conOpt,txConOptEmphasis=attachedTxInfo.emphasis.conOpt,txConOptBlur=attachedTxInfo.blur.conOpt,txConOptSelect=attachedTxInfo.select.conOpt;if(null!=txConOptNormal||null!=txConOptEmphasis||null!=txConOptSelect||null!=txConOptBlur){var textContent=el.getTextContent();if(!1===txConOptNormal)textContent&amp;&amp;el.removeTextContent();else{txConOptNormal=attachedTxInfo.normal.conOpt=txConOptNormal||{type:"text"},textContent?textContent.clearStates():(textContent=createEl$1(txConOptNormal),el.setTextContent(textContent)),updateElNormal(null,textContent,dataIndex,txConOptNormal,null,seriesModel,isInit);for(var txConStlOptNormal=txConOptNormal&amp;&amp;txConOptNormal.style,i=0;i&lt;STATES.length;i++){var stateName=STATES[i];if(stateName!==NORMAL){var txConOptOtherState=attachedTxInfo[stateName].conOpt;updateElOnState(stateName,textContent,0,retrieveStyleOptionOnState(txConOptNormal,txConOptOtherState,stateName),null)}}txConStlOptNormal?textContent.dirty():textContent.markRedraw()}}}(el,dataIndex,elOption,seriesModel,isInit,attachedTxInfoTmp),function doCreateOrUpdateClipPath(el,dataIndex,elOption,seriesModel,isInit){var clipPathOpt=elOption.clipPath;if(!1===clipPathOpt)el&amp;&amp;el.getClipPath()&amp;&amp;el.removeClipPath();else if(clipPathOpt){var clipPath=el.getClipPath();clipPath&amp;&amp;doesElNeedRecreate(clipPath,clipPathOpt,seriesModel)&amp;&amp;(clipPath=null),clipPath||(clipPath=createEl$1(clipPathOpt),el.setClipPath(clipPath)),updateElNormal(null,clipPath,dataIndex,clipPathOpt,null,seriesModel,isInit)}}(el,dataIndex,elOption,seriesModel,isInit),updateElNormal(api,el,dataIndex,elOption,attachedTxInfoTmp,seriesModel,isInit),hasOwn(elOption,"info")&amp;&amp;(customInnerStore(el).info=elOption.info);for(var i=0;i&lt;STATES.length;i++){var stateName=STATES[i];if(stateName!==NORMAL){var otherStateOpt=retrieveStateOption(elOption,stateName);updateElOnState(stateName,el,0,retrieveStyleOptionOnState(elOption,otherStateOpt,stateName),attachedTxInfoTmp)}}return function updateZ(el,elOption,seriesModel){if(!el.isGroup){var elDisplayable=el,currentZ=seriesModel.currentZ,currentZLevel=seriesModel.currentZLevel;elDisplayable.z=currentZ,elDisplayable.zlevel=currentZLevel;var optZ2=elOption.z2;null!=optZ2&amp;&amp;(elDisplayable.z2=optZ2||0);for(var i=0;i&lt;STATES.length;i++)updateZForEachState(elDisplayable,elOption,STATES[i])}}(el,elOption,seriesModel),"group"===elOption.type&amp;&amp;function mergeChildren(api,el,dataIndex,elOption,seriesModel){var newChildren=elOption.children,newLen=newChildren?newChildren.length:0,mergeChildren2=elOption.$mergeChildren,byName="byName"===mergeChildren2||elOption.diffChildrenByName,notMerge=!1===mergeChildren2;if(!newLen&amp;&amp;!byName&amp;&amp;!notMerge)return;if(byName)return void function diffGroupChildren(context){new DataDiffer(context.oldChildren,context.newChildren,getKey,getKey,context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}({api:api,oldChildren:el.children()||[],newChildren:newChildren||[],dataIndex:dataIndex,seriesModel:seriesModel,group:el});notMerge&amp;&amp;el.removeAll();for(var index=0;index&lt;newLen;index++){var newChild=newChildren[index],oldChild=el.childAt(index);newChild?(null==newChild.ignore&amp;&amp;(newChild.ignore=!1),doCreateOrUpdateEl(api,oldChild,dataIndex,newChild,seriesModel,el)):oldChild.ignore=!0}for(var i=el.childCount()-1;i&gt;=index;i--){var child=el.childAt(i);removeChildFromGroup(el,child,seriesModel)}}(api,el,dataIndex,elOption,seriesModel),toBeReplacedIdx&gt;=0?group.replaceAt(el,toBeReplacedIdx):group.add(el),el}function doesElNeedRecreate(el,elOption,seriesModel){var elInner=customInnerStore(el),elOptionType=elOption.type,elOptionShape=elOption.shape,elOptionStyle=elOption.style;return seriesModel.isUniversalTransitionEnabled()||null!=elOptionType&amp;&amp;elOptionType!==elInner.customGraphicType||"path"===elOptionType&amp;&amp;function hasOwnPathData(shape){return shape&amp;&amp;(hasOwn(shape,"pathData")||hasOwn(shape,"d"))}(elOptionShape)&amp;&amp;getPathData(elOptionShape)!==elInner.customPathData||"image"===elOptionType&amp;&amp;hasOwn(elOptionStyle,"image")&amp;&amp;elOptionStyle.image!==elInner.customImagePath}function processTxInfo(elOption,state,attachedTxInfo){var stateOpt=state?retrieveStateOption(elOption,state):elOption,styleOpt=state?retrieveStyleOptionOnState(elOption,stateOpt,"emphasis"):elOption.style,elType=elOption.type,txCfg=stateOpt?stateOpt.textConfig:null,txConOptNormal=elOption.textContent,txConOpt=txConOptNormal?state?retrieveStateOption(txConOptNormal,state):txConOptNormal:null;if(styleOpt&amp;&amp;(attachedTxInfo.isLegacy||isEC4CompatibleStyle(styleOpt,elType,!!txCfg,!!txConOpt))){attachedTxInfo.isLegacy=!0;var convertResult=convertFromEC4CompatibleStyle(styleOpt,elType,!state);!txCfg&amp;&amp;convertResult.textConfig&amp;&amp;(txCfg=convertResult.textConfig),!txConOpt&amp;&amp;convertResult.textContent&amp;&amp;(txConOpt=convertResult.textContent)}if(!state&amp;&amp;txConOpt){var txConOptNormal_1=txConOpt;!txConOptNormal_1.type&amp;&amp;(txConOptNormal_1.type="text")}var info=state?attachedTxInfo[state]:attachedTxInfo.normal;info.cfg=txCfg,info.conOpt=txConOpt}function retrieveStateOption(elOption,state){return state?elOption?elOption[state]:null:elOption}function retrieveStyleOptionOnState(stateOptionNormal,stateOption,state){var style=stateOption&amp;&amp;stateOption.style;return null==style&amp;&amp;"emphasis"===state&amp;&amp;stateOptionNormal&amp;&amp;(style=stateOptionNormal.styleEmphasis),style}function removeChildFromGroup(group,child,seriesModel){child&amp;&amp;applyLeaveTransition(child,customInnerStore(group).option,seriesModel)}function getKey(item,idx){var name=item&amp;&amp;item.name;return null!=name?name:"e\0\0"+idx}function processAddUpdate(newIndex,oldIndex){var context=this.context,childOption=null!=newIndex?context.newChildren[newIndex]:null,child=null!=oldIndex?context.oldChildren[oldIndex]:null;doCreateOrUpdateEl(context.api,child,context.dataIndex,childOption,context.seriesModel,context.group)}function processRemove(oldIndex){var context=this.context,child=context.oldChildren[oldIndex];child&amp;&amp;applyLeaveTransition(child,customInnerStore(child).option,context.seriesModel)}function getPathData(shape){return shape&amp;&amp;(shape.pathData||shape.d)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function BaseAxisPointer2(){this._dragging=!1,this.animationThreshold=15}return BaseAxisPointer2.prototype.render=function(axisModel,axisPointerModel,api,forceRender){var value=axisPointerModel.get("value"),status=axisPointerModel.get("status");if(this._axisModel=axisModel,this._axisPointerModel=axisPointerModel,this._api=api,forceRender||this._lastValue!==value||this._lastStatus!==status){this._lastValue=value,this._lastStatus=status;var group=this._group,handle=this._handle;if(!status||"hide"===status)return group&amp;&amp;group.hide(),void(handle&amp;&amp;handle.hide());group&amp;&amp;group.show(),handle&amp;&amp;handle.show();var elOption={};this.makeElOption(elOption,value,axisModel,axisPointerModel,api);var graphicKey=elOption.graphicKey;graphicKey!==this._lastGraphicKey&amp;&amp;this.clear(api),this._lastGraphicKey=graphicKey;var moveAnimation=this._moveAnimation=this.determineAnimation(axisModel,axisPointerModel);if(group){var doUpdateProps=curry$1(updateProps,axisPointerModel,moveAnimation);this.updatePointerEl(group,elOption,doUpdateProps),this.updateLabelEl(group,elOption,doUpdateProps,axisPointerModel)}else group=this._group=new Group$3,this.createPointerEl(group,elOption,axisModel,axisPointerModel),this.createLabelEl(group,elOption,axisModel,axisPointerModel),api.getZr().add(group);updateMandatoryProps(group,axisPointerModel,!0),this._renderHandle(value)}},BaseAxisPointer2.prototype.remove=function(api){this.clear(api)},BaseAxisPointer2.prototype.dispose=function(api){this.clear(api)},BaseAxisPointer2.prototype.determineAnimation=function(axisModel,axisPointerModel){var animation=axisPointerModel.get("animation"),axis=axisModel.axis,isCategoryAxis="category"===axis.type,useSnap=axisPointerModel.get("snap");if(!useSnap&amp;&amp;!isCategoryAxis)return!1;if("auto"===animation||null==animation){var animationThreshold=this.animationThreshold;if(isCategoryAxis&amp;&amp;axis.getBandWidth()&gt;animationThreshold)return!0;if(useSnap){var seriesDataCount=getAxisInfo$1(axisModel).seriesDataCount,axisExtent=axis.getExtent();return Math.abs(axisExtent[0]-axisExtent[1])/seriesDataCount&gt;animationThreshold}return!1}return!0===animation},BaseAxisPointer2.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){},BaseAxisPointer2.prototype.createPointerEl=function(group,elOption,axisModel,axisPointerModel){var pointerOption=elOption.pointer;if(pointerOption){var pointerEl=inner$b(group).pointerEl=new graphic$1[pointerOption.type](clone$1(elOption.pointer));group.add(pointerEl)}},BaseAxisPointer2.prototype.createLabelEl=function(group,elOption,axisModel,axisPointerModel){if(elOption.label){var labelEl=inner$b(group).labelEl=new ZRText(clone$1(elOption.label));group.add(labelEl),updateLabelShowHide(labelEl,axisPointerModel)}},BaseAxisPointer2.prototype.updatePointerEl=function(group,elOption,updateProps2){var pointerEl=inner$b(group).pointerEl;pointerEl&amp;&amp;elOption.pointer&amp;&amp;(pointerEl.setStyle(elOption.pointer.style),updateProps2(pointerEl,{shape:elOption.pointer.shape}))},BaseAxisPointer2.prototype.updateLabelEl=function(group,elOption,updateProps2,axisPointerModel){var labelEl=inner$b(group).labelEl;labelEl&amp;&amp;(labelEl.setStyle(elOption.label.style),updateProps2(labelEl,{x:elOption.label.x,y:elOption.label.y}),updateLabelShowHide(labelEl,axisPointerModel))},BaseAxisPointer2.prototype._renderHandle=function(value){if(!this._dragging&amp;&amp;this.updateHandleTransform){var isInit,axisPointerModel=this._axisPointerModel,zr=this._api.getZr(),handle=this._handle,handleModel=axisPointerModel.getModel("handle"),status=axisPointerModel.get("status");if(!handleModel.get("show")||!status||"hide"===status)return handle&amp;&amp;zr.remove(handle),void(this._handle=null);this._handle||(isInit=!0,handle=this._handle=createIcon(handleModel.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e2){stop(e2.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),zr.add(handle)),updateMandatoryProps(handle,axisPointerModel,!1),handle.setStyle(handleModel.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var handleSize=handleModel.get("size");isArray$1(handleSize)||(handleSize=[handleSize,handleSize]),handle.scaleX=handleSize[0]/2,handle.scaleY=handleSize[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",handleModel.get("throttle")||0,"fixRate"),this._moveHandleToValue(value,isInit)}},BaseAxisPointer2.prototype._moveHandleToValue=function(value,isInit){updateProps(this._axisPointerModel,!isInit&amp;&amp;this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(value,this._axisModel,this._axisPointerModel)))},BaseAxisPointer2.prototype._onHandleDragMove=function(dx,dy){var handle=this._handle;if(handle){this._dragging=!0;var trans=this.updateHandleTransform(getHandleTransProps(handle),[dx,dy],this._axisModel,this._axisPointerModel);this._payloadInfo=trans,handle.stopAnimation(),handle.attr(getHandleTransProps(trans)),inner$b(handle).lastProp=null,this._doDispatchAxisPointer()}},BaseAxisPointer2.prototype._doDispatchAxisPointer=function(){if(this._handle){var payloadInfo=this._payloadInfo,axisModel=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:payloadInfo.cursorPoint[0],y:payloadInfo.cursorPoint[1],tooltipOption:payloadInfo.tooltipOption,axesInfo:[{axisDim:axisModel.axis.dim,axisIndex:axisModel.componentIndex}]})}},BaseAxisPointer2.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var value=this._axisPointerModel.get("value");this._moveHandleToValue(value),this._api.dispatchAction({type:"hideTip"})}},BaseAxisPointer2.prototype.clear=function(api){this._lastValue=null,this._lastStatus=null;var zr=api.getZr(),group=this._group,handle=this._handle;zr&amp;&amp;group&amp;&amp;(this._lastGraphicKey=null,group&amp;&amp;zr.remove(group),handle&amp;&amp;zr.remove(handle),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},BaseAxisPointer2.prototype.doClear=function(){},BaseAxisPointer2.prototype.buildLabel=function(xy,wh,xDimIndex){return{x:xy[xDimIndex=xDimIndex||0],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}},BaseAxisPointer2}();function updateProps(animationModel,moveAnimation,el,props){propsEqual(inner$b(el).lastProp,props)||(inner$b(el).lastProp=props,moveAnimation?updateProps$1(el,props,animationModel):(el.stopAnimation(),el.attr(props)))}function propsEqual(lastProps,newProps){if(isObject$3(lastProps)&amp;&amp;isObject$3(newProps)){var equals_1=!0;return each$f(newProps,function(item,key){equals_1=equals_1&amp;&amp;propsEqual(lastProps[key],item)}),!!equals_1}return lastProps===newProps}function updateLabelShowHide(labelEl,axisPointerModel){labelEl[axisPointerModel.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(trans){return{x:trans.x||0,y:trans.y||0,rotation:trans.rotation||0}}function updateMandatoryProps(group,axisPointerModel,silent){var z=axisPointerModel.get("z"),zlevel=axisPointerModel.get("zlevel");group&amp;&amp;group.traverse(function(el){"group"!==el.type&amp;&amp;(null!=z&amp;&amp;(el.z=z),null!=zlevel&amp;&amp;(el.zlevel=zlevel),el.silent=silent)})}function buildElStyle(axisPointerModel){var style,axisPointerType=axisPointerModel.get("type"),styleModel=axisPointerModel.getModel(axisPointerType+"Style");return"line"===axisPointerType?(style=styleModel.getLineStyle()).fill=null:"shadow"===axisPointerType&amp;&amp;((style=styleModel.getAreaStyle()).stroke=null),style}function buildLabelElOption(elOption,axisModel,axisPointerModel,api,labelPos){var text=getValueLabel(axisPointerModel.get("value"),axisModel.axis,axisModel.ecModel,axisPointerModel.get("seriesDataIndices"),{precision:axisPointerModel.get(["label","precision"]),formatter:axisPointerModel.get(["label","formatter"])}),labelModel=axisPointerModel.getModel("label"),paddings=normalizeCssArray(labelModel.get("padding")||0),font=labelModel.getFont(),textRect=getBoundingRect(text,font),position2=labelPos.position,width=textRect.width+paddings[1]+paddings[3],height=textRect.height+paddings[0]+paddings[2],align=labelPos.align;"right"===align&amp;&amp;(position2[0]-=width),"center"===align&amp;&amp;(position2[0]-=width/2);var verticalAlign=labelPos.verticalAlign;"bottom"===verticalAlign&amp;&amp;(position2[1]-=height),"middle"===verticalAlign&amp;&amp;(position2[1]-=height/2),function confineInContainer(position2,width,height,api){var viewWidth=api.getWidth(),viewHeight=api.getHeight();position2[0]=Math.min(position2[0]+width,viewWidth)-width,position2[1]=Math.min(position2[1]+height,viewHeight)-height,position2[0]=Math.max(position2[0],0),position2[1]=Math.max(position2[1],0)}(position2,width,height,api);var bgColor=labelModel.get("backgroundColor");bgColor&amp;&amp;"auto"!==bgColor||(bgColor=axisModel.get(["axisLine","lineStyle","color"])),elOption.label={x:position2[0],y:position2[1],style:createTextStyle$1(labelModel,{text:text,font:font,fill:labelModel.getTextColor(),padding:paddings,backgroundColor:bgColor}),z2:10}}function getValueLabel(value,axis,ecModel,seriesDataIndices,opt){value=axis.scale.parse(value);var text=axis.scale.getLabel({value:value},{precision:opt.precision}),formatter=opt.formatter;if(formatter){var params_1={value:getAxisRawValue(axis,{value:value}),axisDimension:axis.dim,axisIndex:axis.index,seriesData:[]};each$f(seriesDataIndices,function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex),dataIndex=idxItem.dataIndexInside,dataParams=series&amp;&amp;series.getDataParams(dataIndex);dataParams&amp;&amp;params_1.seriesData.push(dataParams)}),isString(formatter)?text=formatter.replace("{value}",text):isFunction(formatter)&amp;&amp;(text=formatter(params_1))}return text}function getTransformedPosition(axis,value,layoutInfo){var transform2=[1,0,0,1,0,0];return rotate(transform2,transform2,layoutInfo.rotation),translate(transform2,transform2,layoutInfo.position),applyTransform([axis.dataToCoord(value),(layoutInfo.labelOffset||0)+(layoutInfo.labelDirection||1)*(layoutInfo.labelMargin||0)],transform2)}function buildCartesianSingleLabelElOption(value,elOption,layoutInfo,axisModel,axisPointerModel,api){var textLayout=AxisBuilder.innerTextLayout(layoutInfo.rotation,0,layoutInfo.labelDirection);layoutInfo.labelMargin=axisPointerModel.get(["label","margin"]),buildLabelElOption(elOption,axisModel,axisPointerModel,api,{position:getTransformedPosition(axisModel.axis,value,layoutInfo),align:textLayout.textAlign,verticalAlign:textLayout.textVerticalAlign})}function makeLineShape(p1,p2,xDimIndex){return{x1:p1[xDimIndex=xDimIndex||0],y1:p1[1-xDimIndex],x2:p2[xDimIndex],y2:p2[1-xDimIndex]}}function makeRectShape(xy,wh,xDimIndex){return{x:xy[xDimIndex=xDimIndex||0],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}}function makeSectorShape(cx,cy,r0,r,startAngle,endAngle){return{cx:cx,cy:cy,r0:r0,r:r,startAngle:startAngle,endAngle:endAngle,clockwise:!0}}var CartesianAxisPointer=function(_super){function CartesianAxisPointer2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(CartesianAxisPointer2,_super),CartesianAxisPointer2.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis,grid=axis.grid,axisPointerType=axisPointerModel.get("type"),otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent(),pixelValue=axis.toGlobalCoord(axis.dataToCoord(value,!0));if(axisPointerType&amp;&amp;"none"!==axisPointerType){var elStyle=buildElStyle(axisPointerModel),pointerOption=pointerShapeBuilder$2[axisPointerType](axis,pixelValue,otherExtent);pointerOption.style=elStyle,elOption.graphicKey=pointerOption.type,elOption.pointer=pointerOption}buildCartesianSingleLabelElOption(value,elOption,layout$2(grid.model,axisModel),axisModel,axisPointerModel,api)},CartesianAxisPointer2.prototype.getHandleTransform=function(value,axisModel,axisPointerModel){var layoutInfo=layout$2(axisModel.axis.grid.model,axisModel,{labelInside:!1});layoutInfo.labelMargin=axisPointerModel.get(["handle","margin"]);var pos=getTransformedPosition(axisModel.axis,value,layoutInfo);return{x:pos[0],y:pos[1],rotation:layoutInfo.rotation+(layoutInfo.labelDirection&lt;0?Math.PI:0)}},CartesianAxisPointer2.prototype.updateHandleTransform=function(transform2,delta,axisModel,axisPointerModel){var axis=axisModel.axis,grid=axis.grid,axisExtent=axis.getGlobalExtent(!0),otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent(),dimIndex="x"===axis.dim?0:1,currPosition=[transform2.x,transform2.y];currPosition[dimIndex]+=delta[dimIndex],currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]),currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var cursorOtherValue=(otherExtent[1]+otherExtent[0])/2,cursorPoint=[cursorOtherValue,cursorOtherValue];cursorPoint[dimIndex]=currPosition[dimIndex];return{x:currPosition[0],y:currPosition[1],rotation:transform2.rotation,cursorPoint:cursorPoint,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][dimIndex]}},CartesianAxisPointer2}(BaseAxisPointer);function getCartesian(grid,axis){var opt={};return opt[axis.dim+"AxisIndex"]=axis.index,grid.getCartesian(opt)}var pointerShapeBuilder$2={line:function(axis,pixelValue,otherExtent){return{type:"Line",subPixelOptimize:!0,shape:makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getAxisDimIndex(axis))}},shadow:function(axis,pixelValue,otherExtent){var bandWidth=Math.max(1,axis.getBandWidth()),span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getAxisDimIndex(axis))}}};function getAxisDimIndex(axis){return"x"===axis.dim?0:1}var AxisPointerModel=function(_super){function AxisPointerModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=AxisPointerModel2.type,_this}return __extends$1(AxisPointerModel2,_super),AxisPointerModel2.type="axisPointer",AxisPointerModel2.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},AxisPointerModel2}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(key,api,handler){if(!env.node){var zr=api.getZr();inner$a(zr).records||(inner$a(zr).records={}),function initGlobalListeners(zr,api){if(inner$a(zr).initialized)return;function useHandler(eventType,cb){zr.on(eventType,function(e2){var dis=function makeDispatchAction$1(api){var pendings={showTip:[],hideTip:[]},dispatchAction2=function(payload){var pendingList=pendings[payload.type];pendingList?pendingList.push(payload):(payload.dispatchAction=dispatchAction2,api.dispatchAction(payload))};return{dispatchAction:dispatchAction2,pendings:pendings}}(api);each$8(inner$a(zr).records,function(record){record&amp;&amp;cb(record,e2,dis.dispatchAction)}),function dispatchTooltipFinally(pendings,api){var actuallyPayload,showLen=pendings.showTip.length,hideLen=pendings.hideTip.length;showLen?actuallyPayload=pendings.showTip[showLen-1]:hideLen&amp;&amp;(actuallyPayload=pendings.hideTip[hideLen-1]);actuallyPayload&amp;&amp;(actuallyPayload.dispatchAction=null,api.dispatchAction(actuallyPayload))}(dis.pendings,api)})}inner$a(zr).initialized=!0,useHandler("click",curry$1(doEnter,"click")),useHandler("mousemove",curry$1(doEnter,"mousemove")),useHandler("globalout",onLeave)}(zr,api),(inner$a(zr).records[key]||(inner$a(zr).records[key]={})).handler=handler}}function onLeave(record,e2,dispatchAction2){record.handler("leave",null,dispatchAction2)}function doEnter(currTrigger,record,e2,dispatchAction2){record.handler(currTrigger,e2,dispatchAction2)}function unregister(key,api){if(!env.node){var zr=api.getZr();(inner$a(zr).records||{})[key]&amp;&amp;(inner$a(zr).records[key]=null)}}var AxisPointerView=function(_super){function AxisPointerView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=AxisPointerView2.type,_this}return __extends$1(AxisPointerView2,_super),AxisPointerView2.prototype.render=function(globalAxisPointerModel,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip"),triggerOn=globalAxisPointerModel.get("triggerOn")||globalTooltipModel&amp;&amp;globalTooltipModel.get("triggerOn")||"mousemove|click";register("axisPointer",api,function(currTrigger,e2,dispatchAction2){"none"!==triggerOn&amp;&amp;("leave"===currTrigger||triggerOn.indexOf(currTrigger)&gt;=0)&amp;&amp;dispatchAction2({type:"updateAxisPointer",currTrigger:currTrigger,x:e2&amp;&amp;e2.offsetX,y:e2&amp;&amp;e2.offsetY})})},AxisPointerView2.prototype.remove=function(ecModel,api){unregister("axisPointer",api)},AxisPointerView2.prototype.dispose=function(ecModel,api){unregister("axisPointer",api)},AxisPointerView2.type="axisPointer",AxisPointerView2}(ComponentView);function findPointFromSeries(finder,ecModel){var seriesModel,point=[],seriesIndex=finder.seriesIndex;if(null==seriesIndex||!(seriesModel=ecModel.getSeriesByIndex(seriesIndex)))return{point:[]};var data=seriesModel.getData(),dataIndex=queryDataIndex(data,finder);if(null==dataIndex||dataIndex&lt;0||isArray$1(dataIndex))return{point:[]};var el=data.getItemGraphicEl(dataIndex),coordSys=seriesModel.coordinateSystem;if(seriesModel.getTooltipPosition)point=seriesModel.getTooltipPosition(dataIndex)||[];else if(coordSys&amp;&amp;coordSys.dataToPoint)if(finder.isStacked){var baseAxis=coordSys.getBaseAxis(),valueAxisDim=coordSys.getOtherAxis(baseAxis).dim,baseAxisDim=baseAxis.dim,baseDataOffset="x"===valueAxisDim||"radius"===valueAxisDim?1:0,baseDim=data.mapDimension(baseAxisDim),stackedData=[];stackedData[baseDataOffset]=data.get(baseDim,dataIndex),stackedData[1-baseDataOffset]=data.get(data.getCalculationInfo("stackResultDimension"),dataIndex),point=coordSys.dataToPoint(stackedData)||[]}else point=coordSys.dataToPoint(data.getValues(map$1(coordSys.dimensions,function(dim){return data.mapDimension(dim)}),dataIndex))||[];else if(el){var rect=el.getBoundingRect().clone();rect.applyTransform(el.transform),point=[rect.x+rect.width/2,rect.y+rect.height/2]}return{point:point,el:el}}var inner$9=makeInner();function axisTrigger(payload,ecModel,api){var currTrigger=payload.currTrigger,point=[payload.x,payload.y],finder=payload,dispatchAction2=payload.dispatchAction||bind$1(api.dispatchAction,api),coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(coordSysAxesInfo){illegalPoint(point)&amp;&amp;(point=findPointFromSeries({seriesIndex:finder.seriesIndex,dataIndex:finder.dataIndex},ecModel).point);var isIllegalPoint=illegalPoint(point),inputAxesInfo=finder.axesInfo,axesInfo=coordSysAxesInfo.axesInfo,shouldHide="leave"===currTrigger||illegalPoint(point),outputPayload={},showValueMap={},dataByCoordSys={list:[],map:{}},updaters={showPointer:curry$1(showPointer,showValueMap),showTooltip:curry$1(showTooltip,dataByCoordSys)};each$f(coordSysAxesInfo.coordSysMap,function(coordSys,coordSysKey){var coordSysContainsPoint=isIllegalPoint||coordSys.containPoint(point);each$f(coordSysAxesInfo.coordSysAxesInfo[coordSysKey],function(axisInfo,key){var axis=axisInfo.axis,inputAxisInfo=function findInputAxisInfo(inputAxesInfo,axisInfo){for(var i=0;i&lt;(inputAxesInfo||[]).length;i++){var inputAxisInfo=inputAxesInfo[i];if(axisInfo.axis.dim===inputAxisInfo.axisDim&amp;&amp;axisInfo.axis.model.componentIndex===inputAxisInfo.axisIndex)return inputAxisInfo}}(inputAxesInfo,axisInfo);if(!shouldHide&amp;&amp;coordSysContainsPoint&amp;&amp;(!inputAxesInfo||inputAxisInfo)){var val=inputAxisInfo&amp;&amp;inputAxisInfo.value;null!=val||isIllegalPoint||(val=axis.pointToData(point)),null!=val&amp;&amp;processOnAxis(axisInfo,val,updaters,!1,outputPayload)}})});var linkTriggers={};return each$f(axesInfo,function(tarAxisInfo,tarKey){var linkGroup=tarAxisInfo.linkGroup;linkGroup&amp;&amp;!showValueMap[tarKey]&amp;&amp;each$f(linkGroup.axesInfo,function(srcAxisInfo,srcKey){var srcValItem=showValueMap[srcKey];if(srcAxisInfo!==tarAxisInfo&amp;&amp;srcValItem){var val=srcValItem.value;linkGroup.mapper&amp;&amp;(val=tarAxisInfo.axis.scale.parse(linkGroup.mapper(val,makeMapperParam(srcAxisInfo),makeMapperParam(tarAxisInfo)))),linkTriggers[tarAxisInfo.key]=val}})}),each$f(linkTriggers,function(val,tarKey){processOnAxis(axesInfo[tarKey],val,updaters,!0,outputPayload)}),function updateModelActually(showValueMap,axesInfo,outputPayload){var outputAxesInfo=outputPayload.axesInfo=[];each$f(axesInfo,function(axisInfo,key){var option=axisInfo.axisPointerModel.option,valItem=showValueMap[key];valItem?(!axisInfo.useHandle&amp;&amp;(option.status="show"),option.value=valItem.value,option.seriesDataIndices=(valItem.payloadBatch||[]).slice()):!axisInfo.useHandle&amp;&amp;(option.status="hide"),"show"===option.status&amp;&amp;outputAxesInfo.push({axisDim:axisInfo.axis.dim,axisIndex:axisInfo.axis.model.componentIndex,value:option.value})})}(showValueMap,axesInfo,outputPayload),function dispatchTooltipActually(dataByCoordSys,point,payload,dispatchAction2){if(illegalPoint(point)||!dataByCoordSys.list.length)return void dispatchAction2({type:"hideTip"});var sampleItem=((dataByCoordSys.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};dispatchAction2({type:"showTip",escapeConnect:!0,x:point[0],y:point[1],tooltipOption:payload.tooltipOption,position:payload.position,dataIndexInside:sampleItem.dataIndexInside,dataIndex:sampleItem.dataIndex,seriesIndex:sampleItem.seriesIndex,dataByCoordSys:dataByCoordSys.list})}(dataByCoordSys,point,payload,dispatchAction2),function dispatchHighDownActually(axesInfo,dispatchAction2,api){var zr=api.getZr(),highDownKey="axisPointerLastHighlights",lastHighlights=inner$9(zr)[highDownKey]||{},newHighlights=inner$9(zr)[highDownKey]={};each$f(axesInfo,function(axisInfo,key){var option=axisInfo.axisPointerModel.option;"show"===option.status&amp;&amp;axisInfo.triggerEmphasis&amp;&amp;each$f(option.seriesDataIndices,function(batchItem){var key2=batchItem.seriesIndex+" | "+batchItem.dataIndex;newHighlights[key2]=batchItem})});var toHighlight=[],toDownplay=[];each$f(lastHighlights,function(batchItem,key){!newHighlights[key]&amp;&amp;toDownplay.push(batchItem)}),each$f(newHighlights,function(batchItem,key){!lastHighlights[key]&amp;&amp;toHighlight.push(batchItem)}),toDownplay.length&amp;&amp;api.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:toDownplay}),toHighlight.length&amp;&amp;api.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:toHighlight})}(axesInfo,0,api),outputPayload}}function processOnAxis(axisInfo,newValue,updaters,noSnap,outputFinder){var axis=axisInfo.axis;if(!axis.scale.isBlank()&amp;&amp;axis.containData(newValue))if(axisInfo.involveSeries){var payloadInfo=function buildPayloadsBySeries(value,axisInfo){var axis=axisInfo.axis,dim=axis.dim,snapToValue=value,payloadBatch=[],minDist=Number.MAX_VALUE,minDiff=-1;return each$f(axisInfo.seriesModels,function(series,idx){var seriesNestestValue,dataIndices,dataDim=series.getData().mapDimensionsAll(dim);if(series.getAxisTooltipData){var result=series.getAxisTooltipData(dataDim,value,axis);dataIndices=result.dataIndices,seriesNestestValue=result.nestestValue}else{if(!(dataIndices=series.getData().indicesOfNearest(dataDim[0],value,"category"===axis.type?.5:null)).length)return;seriesNestestValue=series.getData().get(dataDim[0],dataIndices[0])}if(null!=seriesNestestValue&amp;&amp;isFinite(seriesNestestValue)){var diff=value-seriesNestestValue,dist2=Math.abs(diff);dist2&lt;=minDist&amp;&amp;((dist2&lt;minDist||diff&gt;=0&amp;&amp;minDiff&lt;0)&amp;&amp;(minDist=dist2,minDiff=diff,snapToValue=seriesNestestValue,payloadBatch.length=0),each$f(dataIndices,function(dataIndex){payloadBatch.push({seriesIndex:series.seriesIndex,dataIndexInside:dataIndex,dataIndex:series.getData().getRawIndex(dataIndex)})}))}}),{payloadBatch:payloadBatch,snapToValue:snapToValue}}(newValue,axisInfo),payloadBatch=payloadInfo.payloadBatch,snapToValue=payloadInfo.snapToValue;payloadBatch[0]&amp;&amp;null==outputFinder.seriesIndex&amp;&amp;extend(outputFinder,payloadBatch[0]),!noSnap&amp;&amp;axisInfo.snap&amp;&amp;axis.containData(snapToValue)&amp;&amp;null!=snapToValue&amp;&amp;(newValue=snapToValue),updaters.showPointer(axisInfo,newValue,payloadBatch),updaters.showTooltip(axisInfo,payloadInfo,snapToValue)}else updaters.showPointer(axisInfo,newValue)}function showPointer(showValueMap,axisInfo,value,payloadBatch){showValueMap[axisInfo.key]={value:value,payloadBatch:payloadBatch}}function showTooltip(dataByCoordSys,axisInfo,payloadInfo,value){var payloadBatch=payloadInfo.payloadBatch,axis=axisInfo.axis,axisModel=axis.model,axisPointerModel=axisInfo.axisPointerModel;if(axisInfo.triggerTooltip&amp;&amp;payloadBatch.length){var coordSysModel=axisInfo.coordSys.model,coordSysKey=makeKey(coordSysModel),coordSysItem=dataByCoordSys.map[coordSysKey];coordSysItem||(coordSysItem=dataByCoordSys.map[coordSysKey]={coordSysId:coordSysModel.id,coordSysIndex:coordSysModel.componentIndex,coordSysType:coordSysModel.type,coordSysMainType:coordSysModel.mainType,dataByAxis:[]},dataByCoordSys.list.push(coordSysItem)),coordSysItem.dataByAxis.push({axisDim:axis.dim,axisIndex:axisModel.componentIndex,axisType:axisModel.type,axisId:axisModel.id,value:value,valueLabelOpt:{precision:axisPointerModel.get(["label","precision"]),formatter:axisPointerModel.get(["label","formatter"])},seriesDataIndices:payloadBatch.slice()})}}function makeMapperParam(axisInfo){var axisModel=axisInfo.axis.model,item={},dim=item.axisDim=axisInfo.axis.dim;return item.axisIndex=item[dim+"AxisIndex"]=axisModel.componentIndex,item.axisName=item[dim+"AxisName"]=axisModel.name,item.axisId=item[dim+"AxisId"]=axisModel.id,item}function illegalPoint(point){return!point||null==point[0]||isNaN(point[0])||null==point[1]||isNaN(point[1])}function install$q(registers){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),registers.registerComponentModel(AxisPointerModel),registers.registerComponentView(AxisPointerView),registers.registerPreprocessor(function(option){if(option){(!option.axisPointer||0===option.axisPointer.length)&amp;&amp;(option.axisPointer={});var link=option.axisPointer.link;link&amp;&amp;!isArray$1(link)&amp;&amp;(option.axisPointer.link=[link])}}),registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC,function(ecModel,api){ecModel.getComponent("axisPointer").coordSysAxesInfo=collect(ecModel,api)}),registers.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(registers){use(install$N),use(install$q)}var PolarAxisPointer=function(_super){function PolarAxisPointer2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(PolarAxisPointer2,_super),PolarAxisPointer2.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;"angle"===axis.dim&amp;&amp;(this.animationThreshold=Math.PI/18);var polar=axis.polar,otherExtent=polar.getOtherAxis(axis).getExtent(),coordValue=axis.dataToCoord(value),axisPointerType=axisPointerModel.get("type");if(axisPointerType&amp;&amp;"none"!==axisPointerType){var elStyle=buildElStyle(axisPointerModel),pointerOption=pointerShapeBuilder$1[axisPointerType](axis,polar,coordValue,otherExtent);pointerOption.style=elStyle,elOption.graphicKey=pointerOption.type,elOption.pointer=pointerOption}var labelPos=function getLabelPosition(value,axisModel,axisPointerModel,polar,labelMargin){var axis=axisModel.axis,coord=axis.dataToCoord(value),axisAngle=polar.getAngleAxis().getExtent()[0];axisAngle=axisAngle/180*Math.PI;var position2,align,verticalAlign,radiusExtent=polar.getRadiusAxis().getExtent();if("radius"===axis.dim){var transform2=[1,0,0,1,0,0];rotate(transform2,transform2,axisAngle),translate(transform2,transform2,[polar.cx,polar.cy]),position2=applyTransform([coord,-labelMargin],transform2);var labelRotation=axisModel.getModel("axisLabel").get("rotate")||0,labelLayout2=AxisBuilder.innerTextLayout(axisAngle,labelRotation*Math.PI/180,-1);align=labelLayout2.textAlign,verticalAlign=labelLayout2.textVerticalAlign}else{var r=radiusExtent[1];position2=polar.coordToPoint([r+labelMargin,coord]);var cx=polar.cx,cy=polar.cy;align=Math.abs(position2[0]-cx)/r&lt;.3?"center":position2[0]&gt;cx?"left":"right",verticalAlign=Math.abs(position2[1]-cy)/r&lt;.3?"middle":position2[1]&gt;cy?"top":"bottom"}return{position:position2,align:align,verticalAlign:verticalAlign}}(value,axisModel,0,polar,axisPointerModel.get(["label","margin"]));buildLabelElOption(elOption,axisModel,axisPointerModel,api,labelPos)},PolarAxisPointer2}(BaseAxisPointer);var pointerShapeBuilder$1={line:function(axis,polar,coordValue,otherExtent){return"angle"===axis.dim?{type:"Line",shape:makeLineShape(polar.coordToPoint([otherExtent[0],coordValue]),polar.coordToPoint([otherExtent[1],coordValue]))}:{type:"Circle",shape:{cx:polar.cx,cy:polar.cy,r:coordValue}}},shadow:function(axis,polar,coordValue,otherExtent){var bandWidth=Math.max(1,axis.getBandWidth()),radian=Math.PI/180;return"angle"===axis.dim?{type:"Sector",shape:makeSectorShape(polar.cx,polar.cy,otherExtent[0],otherExtent[1],(-coordValue-bandWidth/2)*radian,(bandWidth/2-coordValue)*radian)}:{type:"Sector",shape:makeSectorShape(polar.cx,polar.cy,coordValue-bandWidth/2,coordValue+bandWidth/2,0,2*Math.PI)}}},PolarModel=function(_super){function PolarModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=PolarModel2.type,_this}return __extends$1(PolarModel2,_super),PolarModel2.prototype.findAxisModel=function(axisType){var foundAxisModel;return this.ecModel.eachComponent(axisType,function(axisModel){axisModel.getCoordSysModel()===this&amp;&amp;(foundAxisModel=axisModel)},this),foundAxisModel},PolarModel2.type="polar",PolarModel2.dependencies=["radiusAxis","angleAxis"],PolarModel2.defaultOption={z:0,center:["50%","50%"],radius:"80%"},PolarModel2}(ComponentModel),PolarAxisModel=function(_super){function PolarAxisModel2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(PolarAxisModel2,_super),PolarAxisModel2.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},PolarAxisModel2.type="polarAxis",PolarAxisModel2}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(_super){function AngleAxisModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=AngleAxisModel2.type,_this}return __extends$1(AngleAxisModel2,_super),AngleAxisModel2.type="angleAxis",AngleAxisModel2}(PolarAxisModel),RadiusAxisModel=function(_super){function RadiusAxisModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=RadiusAxisModel2.type,_this}return __extends$1(RadiusAxisModel2,_super),RadiusAxisModel2.type="radiusAxis",RadiusAxisModel2}(PolarAxisModel),RadiusAxis=function(_super){function RadiusAxis2(scale2,radiusExtent){return _super.call(this,"radius",scale2,radiusExtent)||this}return __extends$1(RadiusAxis2,_super),RadiusAxis2.prototype.pointToData=function(point,clamp2){return this.polar.pointToData(point,clamp2)["radius"===this.dim?0:1]},RadiusAxis2}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord,RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(_super){function AngleAxis2(scale2,angleExtent){return _super.call(this,"angle",scale2,angleExtent||[0,360])||this}return __extends$1(AngleAxis2,_super),AngleAxis2.prototype.pointToData=function(point,clamp2){return this.polar.pointToData(point,clamp2)["radius"===this.dim?0:1]},AngleAxis2.prototype.calculateCategoryInterval=function(){var labelModel=this.getLabelModel(),ordinalScale=this.scale,ordinalExtent=ordinalScale.getExtent(),tickCount=ordinalScale.count();if(ordinalExtent[1]-ordinalExtent[0]&lt;1)return 0;var tickValue=ordinalExtent[0],unitSpan=this.dataToCoord(tickValue+1)-this.dataToCoord(tickValue),unitH=Math.abs(unitSpan),rect=getBoundingRect(null==tickValue?"":tickValue+"",labelModel.getFont(),"center","top"),dh=Math.max(rect.height,7)/unitH;isNaN(dh)&amp;&amp;(dh=1/0);var interval=Math.max(0,Math.floor(dh)),cache=inner$8(this.model),lastAutoInterval=cache.lastAutoInterval,lastTickCount=cache.lastTickCount;return null!=lastAutoInterval&amp;&amp;null!=lastTickCount&amp;&amp;Math.abs(lastAutoInterval-interval)&lt;=1&amp;&amp;Math.abs(lastTickCount-tickCount)&lt;=1&amp;&amp;lastAutoInterval&gt;interval?interval=lastAutoInterval:(cache.lastTickCount=tickCount,cache.lastAutoInterval=interval),interval},AngleAxis2}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord,AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function Polar2(name){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=name||"",this._radiusAxis.polar=this._angleAxis.polar=this}return Polar2.prototype.containPoint=function(point){var coord=this.pointToCoord(point);return this._radiusAxis.contain(coord[0])&amp;&amp;this._angleAxis.contain(coord[1])},Polar2.prototype.containData=function(data){return this._radiusAxis.containData(data[0])&amp;&amp;this._angleAxis.containData(data[1])},Polar2.prototype.getAxis=function(dim){return this["_"+dim+"Axis"]},Polar2.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},Polar2.prototype.getAxesByScale=function(scaleType){var axes=[],angleAxis=this._angleAxis,radiusAxis=this._radiusAxis;return angleAxis.scale.type===scaleType&amp;&amp;axes.push(angleAxis),radiusAxis.scale.type===scaleType&amp;&amp;axes.push(radiusAxis),axes},Polar2.prototype.getAngleAxis=function(){return this._angleAxis},Polar2.prototype.getRadiusAxis=function(){return this._radiusAxis},Polar2.prototype.getOtherAxis=function(axis){var angleAxis=this._angleAxis;return axis===angleAxis?this._radiusAxis:angleAxis},Polar2.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},Polar2.prototype.getTooltipAxes=function(dim){var baseAxis=null!=dim&amp;&amp;"auto"!==dim?this.getAxis(dim):this.getBaseAxis();return{baseAxes:[baseAxis],otherAxes:[this.getOtherAxis(baseAxis)]}},Polar2.prototype.dataToPoint=function(data,clamp2){return this.coordToPoint([this._radiusAxis.dataToRadius(data[0],clamp2),this._angleAxis.dataToAngle(data[1],clamp2)])},Polar2.prototype.pointToData=function(point,clamp2){var coord=this.pointToCoord(point);return[this._radiusAxis.radiusToData(coord[0],clamp2),this._angleAxis.angleToData(coord[1],clamp2)]},Polar2.prototype.pointToCoord=function(point){var dx=point[0]-this.cx,dy=point[1]-this.cy,angleAxis=this.getAngleAxis(),extent3=angleAxis.getExtent(),minAngle=Math.min(extent3[0],extent3[1]),maxAngle=Math.max(extent3[0],extent3[1]);angleAxis.inverse?minAngle=maxAngle-360:maxAngle=minAngle+360;var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius,dy/=radius;for(var radian=Math.atan2(-dy,dx)/Math.PI*180,dir3=radian&lt;minAngle?1:-1;radian&lt;minAngle||radian&gt;maxAngle;)radian+=360*dir3;return[radius,radian]},Polar2.prototype.coordToPoint=function(coord){var radius=coord[0],radian=coord[1]/180*Math.PI;return[Math.cos(radian)*radius+this.cx,-Math.sin(radian)*radius+this.cy]},Polar2.prototype.getArea=function(){var angleAxis=this.getAngleAxis(),radiusExtent=this.getRadiusAxis().getExtent().slice();radiusExtent[0]&gt;radiusExtent[1]&amp;&amp;radiusExtent.reverse();var angleExtent=angleAxis.getExtent(),RADIAN2=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:radiusExtent[0],r:radiusExtent[1],startAngle:-angleExtent[0]*RADIAN2,endAngle:-angleExtent[1]*RADIAN2,clockwise:angleAxis.inverse,contain:function(x,y){var dx=x-this.cx,dy=y-this.cy,d2=dx*dx+dy*dy,r=this.r,r0=this.r0;return r!==r0&amp;&amp;d2-1e-4&lt;=r*r&amp;&amp;d2+1e-4&gt;=r0*r0}}},Polar2.prototype.convertToPixel=function(ecModel,finder,value){return getCoordSys$2(finder)===this?this.dataToPoint(value):null},Polar2.prototype.convertFromPixel=function(ecModel,finder,pixel){return getCoordSys$2(finder)===this?this.pointToData(pixel):null},Polar2}();function getCoordSys$2(finder){var seriesModel=finder.seriesModel,polarModel=finder.polarModel;return polarModel&amp;&amp;polarModel.coordinateSystem||seriesModel&amp;&amp;seriesModel.coordinateSystem}function updatePolarScale(ecModel,api){var polar=this,angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis();if(angleAxis.scale.setExtent(1/0,-1/0),radiusAxis.scale.setExtent(1/0,-1/0),ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===polar){var data_1=seriesModel.getData();each$f(getDataDimensionsOnAxis(data_1,"radius"),function(dim){radiusAxis.scale.unionExtentFromData(data_1,dim)}),each$f(getDataDimensionsOnAxis(data_1,"angle"),function(dim){angleAxis.scale.unionExtentFromData(data_1,dim)})}}),niceScaleExtent(angleAxis.scale,angleAxis.model),niceScaleExtent(radiusAxis.scale,radiusAxis.model),"category"===angleAxis.type&amp;&amp;!angleAxis.onBand){var extent3=angleAxis.getExtent(),diff=360/angleAxis.scale.count();angleAxis.inverse?extent3[1]+=diff:extent3[1]-=diff,angleAxis.setExtent(extent3[0],extent3[1])}}function setAxis(axis,axisModel){var _a2;if(axis.type=axisModel.get("type"),axis.scale=createScaleByModel$1(axisModel),axis.onBand=axisModel.get("boundaryGap")&amp;&amp;"category"===axis.type,axis.inverse=axisModel.get("inverse"),function isAngleAxisModel(axisModel){return"angleAxis"===axisModel.mainType}(axisModel)){axis.inverse=axis.inverse!==axisModel.get("clockwise");var startAngle=axisModel.get("startAngle"),endAngle=null!==(_a2=axisModel.get("endAngle"))&amp;&amp;void 0!==_a2?_a2:startAngle+(axis.inverse?-360:360);axis.setExtent(startAngle,endAngle)}axisModel.axis=axis,axis.model=axisModel}var polarCreator={dimensions:polarDimensions,create:function(ecModel,api){var polarList=[];return ecModel.eachComponent("polar",function(polarModel,idx){var polar=new Polar(idx+"");polar.update=updatePolarScale;var radiusAxis=polar.getRadiusAxis(),angleAxis=polar.getAngleAxis(),radiusAxisModel=polarModel.findAxisModel("radiusAxis"),angleAxisModel=polarModel.findAxisModel("angleAxis");setAxis(radiusAxis,radiusAxisModel),setAxis(angleAxis,angleAxisModel),function resizePolar(polar,polarModel,api){var center2=polarModel.get("center"),width=api.getWidth(),height=api.getHeight();polar.cx=parsePercent(center2[0],width),polar.cy=parsePercent(center2[1],height);var radiusAxis=polar.getRadiusAxis(),size=Math.min(width,height)/2,radius=polarModel.get("radius");null==radius?radius=[0,"100%"]:isArray$1(radius)||(radius=[0,radius]);var parsedRadius=[parsePercent(radius[0],size),parsePercent(radius[1],size)];radiusAxis.inverse?radiusAxis.setExtent(parsedRadius[1],parsedRadius[0]):radiusAxis.setExtent(parsedRadius[0],parsedRadius[1])}(polar,polarModel,api),polarList.push(polar),polarModel.coordinateSystem=polar,polar.model=polarModel}),ecModel.eachSeries(function(seriesModel){if("polar"===seriesModel.get("coordinateSystem")){var polarModel=seriesModel.getReferringComponents("polar",SINGLE_REFERRING).models[0];seriesModel.coordinateSystem=polarModel.coordinateSystem}}),polarList}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(polar,rExtent,angle){rExtent[1]&gt;rExtent[0]&amp;&amp;(rExtent=rExtent.slice().reverse());var start2=polar.coordToPoint([rExtent[0],angle]),end2=polar.coordToPoint([rExtent[1],angle]);return{x1:start2[0],y1:start2[1],x2:end2[0],y2:end2[1]}}function getRadiusIdx(polar){return polar.getRadiusAxis().inverse?0:1}function fixAngleOverlap(list){var firstItem=list[0],lastItem=list[list.length-1];firstItem&amp;&amp;lastItem&amp;&amp;Math.abs(Math.abs(firstItem.coord-lastItem.coord)-360)&lt;1e-4&amp;&amp;list.pop()}var AngleAxisView=function(_super){function AngleAxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=AngleAxisView2.type,_this.axisPointerClass="PolarAxisPointer",_this}return __extends$1(AngleAxisView2,_super),AngleAxisView2.prototype.render=function(angleAxisModel,ecModel){if(this.group.removeAll(),angleAxisModel.get("show")){var angleAxis=angleAxisModel.axis,polar=angleAxis.polar,radiusExtent=polar.getRadiusAxis().getExtent(),ticksAngles=angleAxis.getTicksCoords(),minorTickAngles=angleAxis.getMinorTicksCoords(),labels=map$1(angleAxis.getViewLabels(),function(labelItem){labelItem=clone$4(labelItem);var scale2=angleAxis.scale,tickValue="ordinal"===scale2.type?scale2.getRawOrdinalNumber(labelItem.tickValue):labelItem.tickValue;return labelItem.coord=angleAxis.dataToCoord(tickValue),labelItem});fixAngleOverlap(labels),fixAngleOverlap(ticksAngles),each$f(elementList,function(name){!angleAxisModel.get([name,"show"])||angleAxis.scale.isBlank()&amp;&amp;"axisLine"!==name||angelAxisElementsBuilders[name](this.group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent,labels)},this)}},AngleAxisView2.type="angleAxis",AngleAxisView2}(AxisView),angelAxisElementsBuilders={axisLine:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){var shape,lineStyleModel=angleAxisModel.getModel(["axisLine","lineStyle"]),angleAxis=polar.getAngleAxis(),RADIAN2=Math.PI/180,angleExtent=angleAxis.getExtent(),rId=getRadiusIdx(polar),r0Id=rId?0:1,shapeType=360===Math.abs(angleExtent[1]-angleExtent[0])?"Circle":"Arc";(shape=0===radiusExtent[r0Id]?new graphic$1[shapeType]({shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[rId],startAngle:-angleExtent[0]*RADIAN2,endAngle:-angleExtent[1]*RADIAN2,clockwise:angleAxis.inverse},style:lineStyleModel.getLineStyle(),z2:1,silent:!0}):new Ring({shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[rId],r0:radiusExtent[r0Id]},style:lineStyleModel.getLineStyle(),z2:1,silent:!0})).style.fill=null,group.add(shape)},axisTick:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){var tickModel=angleAxisModel.getModel("axisTick"),tickLen=(tickModel.get("inside")?-1:1)*tickModel.get("length"),radius=radiusExtent[getRadiusIdx(polar)],lines=map$1(ticksAngles,function(tickAngleItem){return new Line$1({shape:getAxisLineShape(polar,[radius,radius+tickLen],tickAngleItem.coord)})});group.add(mergePath(lines,{style:defaults(tickModel.getModel("lineStyle").getLineStyle(),{stroke:angleAxisModel.get(["axisLine","lineStyle","color"])})}))},minorTick:function(group,angleAxisModel,polar,tickAngles,minorTickAngles,radiusExtent){if(minorTickAngles.length){for(var tickModel=angleAxisModel.getModel("axisTick"),minorTickModel=angleAxisModel.getModel("minorTick"),tickLen=(tickModel.get("inside")?-1:1)*minorTickModel.get("length"),radius=radiusExtent[getRadiusIdx(polar)],lines=[],i=0;i&lt;minorTickAngles.length;i++)for(var k=0;k&lt;minorTickAngles[i].length;k++)lines.push(new Line$1({shape:getAxisLineShape(polar,[radius,radius+tickLen],minorTickAngles[i][k].coord)}));group.add(mergePath(lines,{style:defaults(minorTickModel.getModel("lineStyle").getLineStyle(),defaults(tickModel.getLineStyle(),{stroke:angleAxisModel.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent,labels){var rawCategoryData=angleAxisModel.getCategories(!0),commonLabelModel=angleAxisModel.getModel("axisLabel"),labelMargin=commonLabelModel.get("margin"),triggerEvent=angleAxisModel.get("triggerEvent");each$f(labels,function(labelItem,idx){var labelModel=commonLabelModel,tickValue=labelItem.tickValue,r=radiusExtent[getRadiusIdx(polar)],p=polar.coordToPoint([r+labelMargin,labelItem.coord]),cx=polar.cx,cy=polar.cy,labelTextAlign=Math.abs(p[0]-cx)/r&lt;.3?"center":p[0]&gt;cx?"left":"right",labelTextVerticalAlign=Math.abs(p[1]-cy)/r&lt;.3?"middle":p[1]&gt;cy?"top":"bottom";if(rawCategoryData&amp;&amp;rawCategoryData[tickValue]){var rawCategoryItem=rawCategoryData[tickValue];isObject$3(rawCategoryItem)&amp;&amp;rawCategoryItem.textStyle&amp;&amp;(labelModel=new Model(rawCategoryItem.textStyle,commonLabelModel,commonLabelModel.ecModel))}var textEl=new ZRText({silent:AxisBuilder.isLabelSilent(angleAxisModel),style:createTextStyle$1(labelModel,{x:p[0],y:p[1],fill:labelModel.getTextColor()||angleAxisModel.get(["axisLine","lineStyle","color"]),text:labelItem.formattedLabel,align:labelTextAlign,verticalAlign:labelTextVerticalAlign})});if(group.add(textEl),triggerEvent){var eventData=AxisBuilder.makeAxisEventDataBase(angleAxisModel);eventData.targetType="axisLabel",eventData.value=labelItem.rawLabel,getECData(textEl).eventData=eventData}},this)},splitLine:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){var lineStyleModel=angleAxisModel.getModel("splitLine").getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var splitLines=[],i=0;i&lt;ticksAngles.length;i++){var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new Line$1({shape:getAxisLineShape(polar,radiusExtent,ticksAngles[i].coord)}))}for(i=0;i&lt;splitLines.length;i++)group.add(mergePath(splitLines[i],{style:defaults({stroke:lineColors[i%lineColors.length]},lineStyleModel.getLineStyle()),silent:!0,z:angleAxisModel.get("z")}))},minorSplitLine:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){if(minorTickAngles.length){for(var lineStyleModel=angleAxisModel.getModel("minorSplitLine").getModel("lineStyle"),lines=[],i=0;i&lt;minorTickAngles.length;i++)for(var k=0;k&lt;minorTickAngles[i].length;k++)lines.push(new Line$1({shape:getAxisLineShape(polar,radiusExtent,minorTickAngles[i][k].coord)}));group.add(mergePath(lines,{style:lineStyleModel.getLineStyle(),silent:!0,z:angleAxisModel.get("z")}))}},splitArea:function(group,angleAxisModel,polar,ticksAngles,minorTickAngles,radiusExtent){if(ticksAngles.length){var areaStyleModel=angleAxisModel.getModel("splitArea").getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];for(var splitAreas=[],RADIAN2=Math.PI/180,prevAngle=-ticksAngles[0].coord*RADIAN2,r0=Math.min(radiusExtent[0],radiusExtent[1]),r1=Math.max(radiusExtent[0],radiusExtent[1]),clockwise=angleAxisModel.get("clockwise"),i=1,len2=ticksAngles.length;i&lt;=len2;i++){var coord=i===len2?ticksAngles[0].coord:ticksAngles[i].coord,colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],splitAreas[colorIndex].push(new Sector({shape:{cx:polar.cx,cy:polar.cy,r0:r0,r:r1,startAngle:prevAngle,endAngle:-coord*RADIAN2,clockwise:clockwise},silent:!0})),prevAngle=-coord*RADIAN2}for(i=0;i&lt;splitAreas.length;i++)group.add(mergePath(splitAreas[i],{style:defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(_super){function RadiusAxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=RadiusAxisView2.type,_this.axisPointerClass="PolarAxisPointer",_this}return __extends$1(RadiusAxisView2,_super),RadiusAxisView2.prototype.render=function(radiusAxisModel,ecModel){if(this.group.removeAll(),radiusAxisModel.get("show")){var oldAxisGroup=this._axisGroup,newAxisGroup=this._axisGroup=new Group$3;this.group.add(newAxisGroup);var radiusAxis=radiusAxisModel.axis,polar=radiusAxis.polar,angleAxis=polar.getAngleAxis(),ticksCoords=radiusAxis.getTicksCoords(),minorTicksCoords=radiusAxis.getMinorTicksCoords(),axisAngle=angleAxis.getExtent()[0],radiusExtent=radiusAxis.getExtent(),layout2=function layoutAxis(polar,radiusAxisModel,axisAngle){return{position:[polar.cx,polar.cy],rotation:axisAngle/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:radiusAxisModel.getModel("axisLabel").get("rotate"),z2:1}}(polar,radiusAxisModel,axisAngle),axisBuilder=new AxisBuilder(radiusAxisModel,layout2);each$f(axisBuilderAttrs$1,axisBuilder.add,axisBuilder),newAxisGroup.add(axisBuilder.getGroup()),groupTransition(oldAxisGroup,newAxisGroup,radiusAxisModel),each$f(selfBuilderAttrs$1,function(name){radiusAxisModel.get([name,"show"])&amp;&amp;!radiusAxis.scale.isBlank()&amp;&amp;axisElementBuilders$1[name](this.group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords,minorTicksCoords)},this)}},RadiusAxisView2.type="radiusAxis",RadiusAxisView2}(AxisView),axisElementBuilders$1={splitLine:function(group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){var lineStyleModel=radiusAxisModel.getModel("splitLine").getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0,angleAxis=polar.getAngleAxis(),RADIAN2=Math.PI/180,angleExtent=angleAxis.getExtent(),shapeType=360===Math.abs(angleExtent[1]-angleExtent[0])?"Circle":"Arc";lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var splitLines=[],i=0;i&lt;ticksCoords.length;i++){var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new graphic$1[shapeType]({shape:{cx:polar.cx,cy:polar.cy,r:Math.max(ticksCoords[i].coord,0),startAngle:-angleExtent[0]*RADIAN2,endAngle:-angleExtent[1]*RADIAN2,clockwise:angleAxis.inverse}}))}for(i=0;i&lt;splitLines.length;i++)group.add(mergePath(splitLines[i],{style:defaults({stroke:lineColors[i%lineColors.length],fill:null},lineStyleModel.getLineStyle()),silent:!0}))},minorSplitLine:function(group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords,minorTicksCoords){if(minorTicksCoords.length){for(var lineStyleModel=radiusAxisModel.getModel("minorSplitLine").getModel("lineStyle"),lines=[],i=0;i&lt;minorTicksCoords.length;i++)for(var k=0;k&lt;minorTicksCoords[i].length;k++)lines.push(new Circle({shape:{cx:polar.cx,cy:polar.cy,r:minorTicksCoords[i][k].coord}}));group.add(mergePath(lines,{style:defaults({fill:null},lineStyleModel.getLineStyle()),silent:!0}))}},splitArea:function(group,radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){if(ticksCoords.length){var areaStyleModel=radiusAxisModel.getModel("splitArea").getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];for(var splitAreas=[],prevRadius=ticksCoords[0].coord,i=1;i&lt;ticksCoords.length;i++){var colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],splitAreas[colorIndex].push(new Sector({shape:{cx:polar.cx,cy:polar.cy,r0:prevRadius,r:ticksCoords[i].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),prevRadius=ticksCoords[i].coord}for(i=0;i&lt;splitAreas.length;i++)group.add(mergePath(splitAreas[i],{style:defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:!0}))}}};function getSeriesStackId(seriesModel){return seriesModel.get("stack")||"__ec_stack_"+seriesModel.seriesIndex}function getAxisKey(polar,axis){return axis.dim+polar.model.componentIndex}function barLayoutPolar(seriesType2,ecModel,api){var lastStackCoords={},barWidthAndOffset=function calRadialBar(barSeries){var columnsMap={};each$f(barSeries,function(seriesModel,idx){var data=seriesModel.getData(),polar=seriesModel.coordinateSystem,baseAxis=polar.getBaseAxis(),axisKey=getAxisKey(polar,baseAxis),axisExtent=baseAxis.getExtent(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():Math.abs(axisExtent[1]-axisExtent[0])/data.count(),columnsOnAxis=columnsMap[axisKey]||{bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},stacks=columnsOnAxis.stacks;columnsMap[axisKey]=columnsOnAxis;var stackId=getSeriesStackId(seriesModel);stacks[stackId]||columnsOnAxis.autoWidthCount++,stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=parsePercent(seriesModel.get("barWidth"),bandWidth),barMaxWidth=parsePercent(seriesModel.get("barMaxWidth"),bandWidth),barGap=seriesModel.get("barGap"),barCategoryGap=seriesModel.get("barCategoryGap");barWidth&amp;&amp;!stacks[stackId].width&amp;&amp;(barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth),stacks[stackId].width=barWidth,columnsOnAxis.remainedWidth-=barWidth),barMaxWidth&amp;&amp;(stacks[stackId].maxWidth=barMaxWidth),null!=barGap&amp;&amp;(columnsOnAxis.gap=barGap),null!=barCategoryGap&amp;&amp;(columnsOnAxis.categoryGap=barCategoryGap)});var result={};return each$f(columnsMap,function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks,bandWidth=columnsOnAxis.bandWidth,categoryGap=parsePercent(columnsOnAxis.categoryGap,bandWidth),barGapPercent=parsePercent(columnsOnAxis.gap,1),remainedWidth=columnsOnAxis.remainedWidth,autoWidthCount=columnsOnAxis.autoWidthCount,autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0),each$f(stacks,function(column,stack){var maxWidth=column.maxWidth;maxWidth&amp;&amp;maxWidth&lt;autoWidth&amp;&amp;(maxWidth=Math.min(maxWidth,remainedWidth),column.width&amp;&amp;(maxWidth=Math.min(maxWidth,column.width)),remainedWidth-=maxWidth,column.width=maxWidth,autoWidthCount--)}),autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent),autoWidth=Math.max(autoWidth,0);var lastColumn,widthSum=0;each$f(stacks,function(column,idx){column.width||(column.width=autoWidth),lastColumn=column,widthSum+=column.width*(1+barGapPercent)}),lastColumn&amp;&amp;(widthSum-=lastColumn.width*barGapPercent);var offset=-widthSum/2;each$f(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{offset:offset,width:column.width},offset+=column.width*(1+barGapPercent)})}),result}(filter(ecModel.getSeriesByType(seriesType2),function(seriesModel){return!ecModel.isSeriesFiltered(seriesModel)&amp;&amp;seriesModel.coordinateSystem&amp;&amp;"polar"===seriesModel.coordinateSystem.type}));ecModel.eachSeriesByType(seriesType2,function(seriesModel){if("polar"===seriesModel.coordinateSystem.type){var data=seriesModel.getData(),polar=seriesModel.coordinateSystem,baseAxis=polar.getBaseAxis(),axisKey=getAxisKey(polar,baseAxis),stackId=getSeriesStackId(seriesModel),columnLayoutInfo=barWidthAndOffset[axisKey][stackId],columnOffset=columnLayoutInfo.offset,columnWidth=columnLayoutInfo.width,valueAxis2=polar.getOtherAxis(baseAxis),cx=seriesModel.coordinateSystem.cx,cy=seriesModel.coordinateSystem.cy,barMinHeight=seriesModel.get("barMinHeight")||0,barMinAngle=seriesModel.get("barMinAngle")||0;lastStackCoords[stackId]=lastStackCoords[stackId]||[];for(var valueDim=data.mapDimension(valueAxis2.dim),baseDim=data.mapDimension(baseAxis.dim),stacked=isDimensionStacked(data,valueDim),clampLayout="radius"!==baseAxis.dim||!seriesModel.get("roundCap",!0),startValue=valueAxis2.model.get("startValue"),valueAxisStart=valueAxis2.dataToCoord(startValue||0),idx=0,len2=data.count();idx&lt;len2;idx++){var value=data.get(valueDim,idx),baseValue=data.get(baseDim,idx),sign=value&gt;=0?"p":"n",baseCoord=valueAxisStart;stacked&amp;&amp;(lastStackCoords[stackId][baseValue]||(lastStackCoords[stackId][baseValue]={p:valueAxisStart,n:valueAxisStart}),baseCoord=lastStackCoords[stackId][baseValue][sign]);var r0=void 0,r=void 0,startAngle=void 0,endAngle=void 0;if("radius"===valueAxis2.dim){var radiusSpan=valueAxis2.dataToCoord(value)-valueAxisStart,angle=baseAxis.dataToCoord(baseValue);Math.abs(radiusSpan)&lt;barMinHeight&amp;&amp;(radiusSpan=(radiusSpan&lt;0?-1:1)*barMinHeight),r0=baseCoord,r=baseCoord+radiusSpan,endAngle=(startAngle=angle-columnOffset)-columnWidth,stacked&amp;&amp;(lastStackCoords[stackId][baseValue][sign]=r)}else{var angleSpan=valueAxis2.dataToCoord(value,clampLayout)-valueAxisStart,radius=baseAxis.dataToCoord(baseValue);Math.abs(angleSpan)&lt;barMinAngle&amp;&amp;(angleSpan=(angleSpan&lt;0?-1:1)*barMinAngle),r=(r0=radius+columnOffset)+columnWidth,startAngle=baseCoord,endAngle=baseCoord+angleSpan,stacked&amp;&amp;(lastStackCoords[stackId][baseValue][sign]=endAngle)}data.setItemLayout(idx,{cx:cx,cy:cy,r0:r0,r:r,startAngle:-startAngle*Math.PI/180,endAngle:-endAngle*Math.PI/180,clockwise:startAngle&gt;=endAngle})}}})}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(_super){function PolarView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=PolarView2.type,_this}return __extends$1(PolarView2,_super),PolarView2.type="polar",PolarView2}(ComponentView);function layout$1(axisModel,opt){opt=opt||{};var single=axisModel.coordinateSystem,axis=axisModel.axis,layout2={},axisPosition=axis.position,orient=axis.orient,rect=single.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],positionMap={horizontal:{top:rectBound[2],bottom:rectBound[3]},vertical:{left:rectBound[0],right:rectBound[1]}};layout2.position=["vertical"===orient?positionMap.vertical[axisPosition]:rectBound[0],"horizontal"===orient?positionMap.horizontal[axisPosition]:rectBound[3]];layout2.rotation=Math.PI/2*{horizontal:0,vertical:1}[orient];layout2.labelDirection=layout2.tickDirection=layout2.nameDirection={top:-1,bottom:1,right:1,left:-1}[axisPosition],axisModel.get(["axisTick","inside"])&amp;&amp;(layout2.tickDirection=-layout2.tickDirection),retrieve(opt.labelInside,axisModel.get(["axisLabel","inside"]))&amp;&amp;(layout2.labelDirection=-layout2.labelDirection);var labelRotation=opt.rotate;return null==labelRotation&amp;&amp;(labelRotation=axisModel.get(["axisLabel","rotate"])),layout2.labelRotation="top"===axisPosition?-labelRotation:labelRotation,layout2.z2=1,layout2}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(_super){function SingleAxisView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SingleAxisView2.type,_this.axisPointerClass="SingleAxisPointer",_this}return __extends$1(SingleAxisView2,_super),SingleAxisView2.prototype.render=function(axisModel,ecModel,api,payload){var group=this.group;group.removeAll();var oldAxisGroup=this._axisGroup;this._axisGroup=new Group$3;var layout2=layout$1(axisModel),axisBuilder=new AxisBuilder(axisModel,layout2);each$f(axisBuilderAttrs,axisBuilder.add,axisBuilder),group.add(this._axisGroup),group.add(axisBuilder.getGroup()),each$f(selfBuilderAttrs,function(name){axisModel.get([name,"show"])&amp;&amp;axisElementBuilders[name](this,this.group,this._axisGroup,axisModel)},this),groupTransition(oldAxisGroup,this._axisGroup,axisModel),_super.prototype.render.call(this,axisModel,ecModel,api,payload)},SingleAxisView2.prototype.remove=function(){rectCoordAxisHandleRemove(this)},SingleAxisView2.type="singleAxis",SingleAxisView2}(AxisView),axisElementBuilders={splitLine:function(axisView,group,axisGroup,axisModel){var axis=axisModel.axis;if(!axis.scale.isBlank()){var splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color");lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var lineWidth=lineStyleModel.get("width"),gridRect=axisModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),splitLines=[],lineCount=0,ticksCoords=axis.getTicksCoords({tickModel:splitLineModel}),p1=[],p2=[],i=0;i&lt;ticksCoords.length;++i){var tickCoord=axis.toGlobalCoord(ticksCoords[i].coord);isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var line=new Line$1({shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},silent:!0});subPixelOptimizeLine(line.shape,lineWidth);var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(line)}var lineStyle=lineStyleModel.getLineStyle(["color"]);for(i=0;i&lt;splitLines.length;++i)group.add(mergePath(splitLines[i],{style:defaults({stroke:lineColors[i%lineColors.length]},lineStyle),silent:!0}))}},splitArea:function(axisView,group,axisGroup,axisModel){rectCoordAxisBuildSplitArea(axisView,axisGroup,axisModel,axisModel)}},SingleAxisModel=function(_super){function SingleAxisModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SingleAxisModel2.type,_this}return __extends$1(SingleAxisModel2,_super),SingleAxisModel2.prototype.getCoordSysModel=function(){return this},SingleAxisModel2.type="singleAxis",SingleAxisModel2.layoutMode="box",SingleAxisModel2.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},SingleAxisModel2}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(_super){function SingleAxis2(dim,scale2,coordExtent,axisType,position2){var _this=_super.call(this,dim,scale2,coordExtent)||this;return _this.type=axisType||"value",_this.position=position2||"bottom",_this}return __extends$1(SingleAxis2,_super),SingleAxis2.prototype.isHorizontal=function(){var position2=this.position;return"top"===position2||"bottom"===position2},SingleAxis2.prototype.pointToData=function(point,clamp2){return this.coordinateSystem.pointToData(point)[0]},SingleAxis2}(Axis),singleDimensions=["single"],Single=function(){function Single2(axisModel,ecModel,api){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=axisModel,this._init(axisModel,ecModel,api)}return Single2.prototype._init=function(axisModel,ecModel,api){var dim=this.dimension,axis=new SingleAxis(dim,createScaleByModel$1(axisModel),[0,0],axisModel.get("type"),axisModel.get("position")),isCategory2="category"===axis.type;axis.onBand=isCategory2&amp;&amp;axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axis.orient=axisModel.get("orient"),axisModel.axis=axis,axis.model=axisModel,axis.coordinateSystem=this,this._axis=axis},Single2.prototype.update=function(ecModel,api){ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===this){var data_1=seriesModel.getData();each$f(data_1.mapDimensionsAll(this.dimension),function(dim){this._axis.scale.unionExtentFromData(data_1,dim)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},Single2.prototype.resize=function(axisModel,api){this._rect=getLayoutRect({left:axisModel.get("left"),top:axisModel.get("top"),right:axisModel.get("right"),bottom:axisModel.get("bottom"),width:axisModel.get("width"),height:axisModel.get("height")},{width:api.getWidth(),height:api.getHeight()}),this._adjustAxis()},Single2.prototype.getRect=function(){return this._rect},Single2.prototype._adjustAxis=function(){var rect=this._rect,axis=this._axis,isHorizontal=axis.isHorizontal(),extent3=isHorizontal?[0,rect.width]:[0,rect.height],idx=axis.inverse?1:0;axis.setExtent(extent3[idx],extent3[1-idx]),this._updateAxisTransform(axis,isHorizontal?rect.x:rect.y)},Single2.prototype._updateAxisTransform=function(axis,coordBase){var axisExtent=axis.getExtent(),extentSum=axisExtent[0]+axisExtent[1],isHorizontal=axis.isHorizontal();axis.toGlobalCoord=isHorizontal?function(coord){return coord+coordBase}:function(coord){return extentSum-coord+coordBase},axis.toLocalCoord=isHorizontal?function(coord){return coord-coordBase}:function(coord){return extentSum-coord+coordBase}},Single2.prototype.getAxis=function(){return this._axis},Single2.prototype.getBaseAxis=function(){return this._axis},Single2.prototype.getAxes=function(){return[this._axis]},Single2.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},Single2.prototype.containPoint=function(point){var rect=this.getRect(),axis=this.getAxis();return"horizontal"===axis.orient?axis.contain(axis.toLocalCoord(point[0]))&amp;&amp;point[1]&gt;=rect.y&amp;&amp;point[1]&lt;=rect.y+rect.height:axis.contain(axis.toLocalCoord(point[1]))&amp;&amp;point[0]&gt;=rect.y&amp;&amp;point[0]&lt;=rect.y+rect.height},Single2.prototype.pointToData=function(point){var axis=this.getAxis();return[axis.coordToData(axis.toLocalCoord(point["horizontal"===axis.orient?0:1]))]},Single2.prototype.dataToPoint=function(val){var axis=this.getAxis(),rect=this.getRect(),pt=[],idx="horizontal"===axis.orient?0:1;return val instanceof Array&amp;&amp;(val=val[0]),pt[idx]=axis.toGlobalCoord(axis.dataToCoord(+val)),pt[1-idx]=0===idx?rect.y+rect.height/2:rect.x+rect.width/2,pt},Single2.prototype.convertToPixel=function(ecModel,finder,value){return getCoordSys$1(finder)===this?this.dataToPoint(value):null},Single2.prototype.convertFromPixel=function(ecModel,finder,pixel){return getCoordSys$1(finder)===this?this.pointToData(pixel):null},Single2}();function getCoordSys$1(finder){var seriesModel=finder.seriesModel,singleModel=finder.singleAxisModel;return singleModel&amp;&amp;singleModel.coordinateSystem||seriesModel&amp;&amp;seriesModel.coordinateSystem}var singleCreator={create:function create(ecModel,api){var singles=[];return ecModel.eachComponent("singleAxis",function(axisModel,idx){var single=new Single(axisModel,ecModel,api);single.name="single_"+idx,single.resize(axisModel,api),axisModel.coordinateSystem=single,singles.push(single)}),ecModel.eachSeries(function(seriesModel){if("singleAxis"===seriesModel.get("coordinateSystem")){var singleAxisModel=seriesModel.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];seriesModel.coordinateSystem=singleAxisModel&amp;&amp;singleAxisModel.coordinateSystem}}),singles},dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(_super){function SingleAxisPointer2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(SingleAxisPointer2,_super),SingleAxisPointer2.prototype.makeElOption=function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis,coordSys=axis.coordinateSystem,otherExtent=getGlobalExtent(coordSys,1-getPointDimIndex(axis)),pixelValue=coordSys.dataToPoint(value)[0],axisPointerType=axisPointerModel.get("type");if(axisPointerType&amp;&amp;"none"!==axisPointerType){var elStyle=buildElStyle(axisPointerModel),pointerOption=pointerShapeBuilder[axisPointerType](axis,pixelValue,otherExtent);pointerOption.style=elStyle,elOption.graphicKey=pointerOption.type,elOption.pointer=pointerOption}buildCartesianSingleLabelElOption(value,elOption,layout$1(axisModel),axisModel,axisPointerModel,api)},SingleAxisPointer2.prototype.getHandleTransform=function(value,axisModel,axisPointerModel){var layoutInfo=layout$1(axisModel,{labelInside:!1});layoutInfo.labelMargin=axisPointerModel.get(["handle","margin"]);var position2=getTransformedPosition(axisModel.axis,value,layoutInfo);return{x:position2[0],y:position2[1],rotation:layoutInfo.rotation+(layoutInfo.labelDirection&lt;0?Math.PI:0)}},SingleAxisPointer2.prototype.updateHandleTransform=function(transform2,delta,axisModel,axisPointerModel){var axis=axisModel.axis,coordSys=axis.coordinateSystem,dimIndex=getPointDimIndex(axis),axisExtent=getGlobalExtent(coordSys,dimIndex),currPosition=[transform2.x,transform2.y];currPosition[dimIndex]+=delta[dimIndex],currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]),currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var otherExtent=getGlobalExtent(coordSys,1-dimIndex),cursorOtherValue=(otherExtent[1]+otherExtent[0])/2,cursorPoint=[cursorOtherValue,cursorOtherValue];return cursorPoint[dimIndex]=currPosition[dimIndex],{x:currPosition[0],y:currPosition[1],rotation:transform2.rotation,cursorPoint:cursorPoint,tooltipOption:{verticalAlign:"middle"}}},SingleAxisPointer2}(BaseAxisPointer),pointerShapeBuilder={line:function(axis,pixelValue,otherExtent){return{type:"Line",subPixelOptimize:!0,shape:makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getPointDimIndex(axis))}},shadow:function(axis,pixelValue,otherExtent){var bandWidth=axis.getBandWidth(),span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getPointDimIndex(axis))}}};function getPointDimIndex(axis){return axis.isHorizontal()?0:1}function getGlobalExtent(coordSys,dimIndex){var rect=coordSys.getRect();return[rect[XY$1[dimIndex]],rect[XY$1[dimIndex]]+rect[WH$1[dimIndex]]]}var SingleView=function(_super){function SingleView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SingleView2.type,_this}return __extends$1(SingleView2,_super),SingleView2.type="single",SingleView2}(ComponentView);var CalendarModel=function(_super){function CalendarModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CalendarModel2.type,_this}return __extends$1(CalendarModel2,_super),CalendarModel2.prototype.init=function(option,parentModel,ecModel){var inputPositionParams=getLayoutParams(option);_super.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(option,inputPositionParams)},CalendarModel2.prototype.mergeOption=function(option){_super.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,option)},CalendarModel2.prototype.getCellSize=function(){return this.option.cellSize},CalendarModel2.type="calendar",CalendarModel2.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},CalendarModel2}(ComponentModel);function mergeAndNormalizeLayoutParams$1(target,raw){var cellSizeArr,cellSize=target.cellSize;1===(cellSizeArr=isArray$1(cellSize)?cellSize:target.cellSize=[cellSize,cellSize]).length&amp;&amp;(cellSizeArr[1]=cellSizeArr[0]);var ignoreSize=map$1([0,1],function(hvIdx){return function sizeCalculable(option,hvIdx){return null!=option[HV_NAMES[hvIdx][0]]||null!=option[HV_NAMES[hvIdx][1]]&amp;&amp;null!=option[HV_NAMES[hvIdx][2]]}(raw,hvIdx)&amp;&amp;(cellSizeArr[hvIdx]="auto"),null!=cellSizeArr[hvIdx]&amp;&amp;"auto"!==cellSizeArr[hvIdx]});mergeLayoutParam(target,raw,{type:"box",ignoreSize:ignoreSize})}var CalendarView=function(_super){function CalendarView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=CalendarView2.type,_this}return __extends$1(CalendarView2,_super),CalendarView2.prototype.render=function(calendarModel,ecModel,api){var group=this.group;group.removeAll();var coordSys=calendarModel.coordinateSystem,rangeData=coordSys.getRangeInfo(),orient=coordSys.getOrient(),localeModel=ecModel.getLocaleModel();this._renderDayRect(calendarModel,rangeData,group),this._renderLines(calendarModel,rangeData,orient,group),this._renderYearText(calendarModel,rangeData,orient,group),this._renderMonthText(calendarModel,localeModel,orient,group),this._renderWeekText(calendarModel,localeModel,rangeData,orient,group)},CalendarView2.prototype._renderDayRect=function(calendarModel,rangeData,group){for(var coordSys=calendarModel.coordinateSystem,itemRectStyleModel=calendarModel.getModel("itemStyle").getItemStyle(),sw=coordSys.getCellWidth(),sh=coordSys.getCellHeight(),i=rangeData.start.time;i&lt;=rangeData.end.time;i=coordSys.getNextNDay(i,1).time){var point=coordSys.dataToRect([i],!1).tl,rect=new Rect$2({shape:{x:point[0],y:point[1],width:sw,height:sh},cursor:"default",style:itemRectStyleModel});group.add(rect)}},CalendarView2.prototype._renderLines=function(calendarModel,rangeData,orient,group){var self2=this,coordSys=calendarModel.coordinateSystem,lineStyleModel=calendarModel.getModel(["splitLine","lineStyle"]).getLineStyle(),show=calendarModel.get(["splitLine","show"]),lineWidth=lineStyleModel.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var firstDay=rangeData.start,i=0;firstDay.time&lt;=rangeData.end.time;i++){addPoints(firstDay.formatedDate),0===i&amp;&amp;(firstDay=coordSys.getDateInfo(rangeData.start.y+"-"+rangeData.start.m));var date=firstDay.date;date.setMonth(date.getMonth()+1),firstDay=coordSys.getDateInfo(date)}function addPoints(date2){self2._firstDayOfMonth.push(coordSys.getDateInfo(date2)),self2._firstDayPoints.push(coordSys.dataToRect([date2],!1).tl);var points2=self2._getLinePointsOfOneWeek(calendarModel,date2,orient);self2._tlpoints.push(points2[0]),self2._blpoints.push(points2[points2.length-1]),show&amp;&amp;self2._drawSplitline(points2,lineStyleModel,group)}addPoints(coordSys.getNextNDay(rangeData.end.time,1).formatedDate),show&amp;&amp;this._drawSplitline(self2._getEdgesPoints(self2._tlpoints,lineWidth,orient),lineStyleModel,group),show&amp;&amp;this._drawSplitline(self2._getEdgesPoints(self2._blpoints,lineWidth,orient),lineStyleModel,group)},CalendarView2.prototype._getEdgesPoints=function(points2,lineWidth,orient){var rs=[points2[0].slice(),points2[points2.length-1].slice()],idx="horizontal"===orient?0:1;return rs[0][idx]=rs[0][idx]-lineWidth/2,rs[1][idx]=rs[1][idx]+lineWidth/2,rs},CalendarView2.prototype._drawSplitline=function(points2,lineStyle,group){var poyline=new Polyline$1({z2:20,shape:{points:points2},style:lineStyle});group.add(poyline)},CalendarView2.prototype._getLinePointsOfOneWeek=function(calendarModel,date,orient){for(var coordSys=calendarModel.coordinateSystem,parsedDate=coordSys.getDateInfo(date),points2=[],i=0;i&lt;7;i++){var tmpD=coordSys.getNextNDay(parsedDate.time,i),point=coordSys.dataToRect([tmpD.time],!1);points2[2*tmpD.day]=point.tl,points2[2*tmpD.day+1]=point["horizontal"===orient?"bl":"tr"]}return points2},CalendarView2.prototype._formatterLabel=function(formatter,params){return isString(formatter)&amp;&amp;formatter?function formatTplSimple(tpl,param,encode){return each$f(param,function(value,key){tpl=tpl.replace("{"+key+"}",value)}),tpl}(formatter,params):isFunction(formatter)?formatter(params):params.nameMap},CalendarView2.prototype._yearTextPositionControl=function(textEl,point,orient,position2,margin){var x=point[0],y=point[1],aligns=["center","bottom"];"bottom"===position2?(y+=margin,aligns=["center","top"]):"left"===position2?x-=margin:"right"===position2?(x+=margin,aligns=["center","top"]):y-=margin;var rotate2=0;return"left"!==position2&amp;&amp;"right"!==position2||(rotate2=Math.PI/2),{rotation:rotate2,x:x,y:y,style:{align:aligns[0],verticalAlign:aligns[1]}}},CalendarView2.prototype._renderYearText=function(calendarModel,rangeData,orient,group){var yearLabel=calendarModel.getModel("yearLabel");if(yearLabel.get("show")){var margin=yearLabel.get("margin"),pos=yearLabel.get("position");pos||(pos="horizontal"!==orient?"top":"left");var points2=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],xc=(points2[0][0]+points2[1][0])/2,yc=(points2[0][1]+points2[1][1])/2,idx="horizontal"===orient?0:1,posPoints={top:[xc,points2[idx][1]],bottom:[xc,points2[1-idx][1]],left:[points2[1-idx][0],yc],right:[points2[idx][0],yc]},name=rangeData.start.y;+rangeData.end.y&gt;+rangeData.start.y&amp;&amp;(name=name+"-"+rangeData.end.y);var formatter=yearLabel.get("formatter"),params={start:rangeData.start.y,end:rangeData.end.y,nameMap:name},content=this._formatterLabel(formatter,params),yearText=new ZRText({z2:30,style:createTextStyle$1(yearLabel,{text:content}),silent:yearLabel.get("silent")});yearText.attr(this._yearTextPositionControl(yearText,posPoints[pos],orient,pos,margin)),group.add(yearText)}},CalendarView2.prototype._monthTextPositionControl=function(point,isCenter,orient,position2,margin){var align="left",vAlign="top",x=point[0],y=point[1];return"horizontal"===orient?(y+=margin,isCenter&amp;&amp;(align="center"),"start"===position2&amp;&amp;(vAlign="bottom")):(x+=margin,isCenter&amp;&amp;(vAlign="middle"),"start"===position2&amp;&amp;(align="right")),{x:x,y:y,align:align,verticalAlign:vAlign}},CalendarView2.prototype._renderMonthText=function(calendarModel,localeModel,orient,group){var monthLabel=calendarModel.getModel("monthLabel");if(monthLabel.get("show")){var nameMap=monthLabel.get("nameMap"),margin=monthLabel.get("margin"),pos=monthLabel.get("position"),align=monthLabel.get("align"),termPoints=[this._tlpoints,this._blpoints];nameMap&amp;&amp;!isString(nameMap)||(nameMap&amp;&amp;(localeModel=getLocaleModel(nameMap)||localeModel),nameMap=localeModel.get(["time","monthAbbr"])||[]);var idx="start"===pos?0:1,axis="horizontal"===orient?0:1;margin="start"===pos?-margin:margin;for(var isCenter="center"===align,labelSilent=monthLabel.get("silent"),i=0;i&lt;termPoints[idx].length-1;i++){var tmp=termPoints[idx][i].slice(),firstDay=this._firstDayOfMonth[i];if(isCenter){var firstDayPoints=this._firstDayPoints[i];tmp[axis]=(firstDayPoints[axis]+termPoints[0][i+1][axis])/2}var formatter=monthLabel.get("formatter"),name_1=nameMap[+firstDay.m-1],params={yyyy:firstDay.y,yy:(firstDay.y+"").slice(2),MM:firstDay.m,M:+firstDay.m,nameMap:name_1},content=this._formatterLabel(formatter,params),monthText=new ZRText({z2:30,style:extend(createTextStyle$1(monthLabel,{text:content}),this._monthTextPositionControl(tmp,isCenter,orient,pos,margin)),silent:labelSilent});group.add(monthText)}}},CalendarView2.prototype._weekTextPositionControl=function(point,orient,position2,margin,cellSize){var align="center",vAlign="middle",x=point[0],y=point[1],isStart="start"===position2;return"horizontal"===orient?(x=x+margin+(isStart?1:-1)*cellSize[0]/2,align=isStart?"right":"left"):(y=y+margin+(isStart?1:-1)*cellSize[1]/2,vAlign=isStart?"bottom":"top"),{x:x,y:y,align:align,verticalAlign:vAlign}},CalendarView2.prototype._renderWeekText=function(calendarModel,localeModel,rangeData,orient,group){var dayLabel=calendarModel.getModel("dayLabel");if(dayLabel.get("show")){var coordSys=calendarModel.coordinateSystem,pos=dayLabel.get("position"),nameMap=dayLabel.get("nameMap"),margin=dayLabel.get("margin"),firstDayOfWeek=coordSys.getFirstDayOfWeek();if(!nameMap||isString(nameMap))nameMap&amp;&amp;(localeModel=getLocaleModel(nameMap)||localeModel),nameMap=localeModel.get(["time","dayOfWeekShort"])||map$1(localeModel.get(["time","dayOfWeekAbbr"]),function(val){return val[0]});var start2=coordSys.getNextNDay(rangeData.end.time,7-rangeData.lweek).time,cellSize=[coordSys.getCellWidth(),coordSys.getCellHeight()];margin=parsePercent(margin,Math.min(cellSize[1],cellSize[0])),"start"===pos&amp;&amp;(start2=coordSys.getNextNDay(rangeData.start.time,-(7+rangeData.fweek)).time,margin=-margin);for(var labelSilent=dayLabel.get("silent"),i=0;i&lt;7;i++){var day,tmpD=coordSys.getNextNDay(start2,i),point=coordSys.dataToRect([tmpD.time],!1).center;day=Math.abs((i+firstDayOfWeek)%7);var weekText=new ZRText({z2:30,style:extend(createTextStyle$1(dayLabel,{text:nameMap[day]}),this._weekTextPositionControl(point,orient,pos,margin,cellSize)),silent:labelSilent});group.add(weekText)}}},CalendarView2.type="calendar",CalendarView2}(ComponentView),Calendar=function(){function Calendar2(calendarModel,ecModel,api){this.type="calendar",this.dimensions=Calendar2.dimensions,this.getDimensionsInfo=Calendar2.getDimensionsInfo,this._model=calendarModel}return Calendar2.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},Calendar2.prototype.getRangeInfo=function(){return this._rangeInfo},Calendar2.prototype.getModel=function(){return this._model},Calendar2.prototype.getRect=function(){return this._rect},Calendar2.prototype.getCellWidth=function(){return this._sw},Calendar2.prototype.getCellHeight=function(){return this._sh},Calendar2.prototype.getOrient=function(){return this._orient},Calendar2.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},Calendar2.prototype.getDateInfo=function(date){var y=(date=parseDate(date)).getFullYear(),m2=date.getMonth()+1,mStr=m2&lt;10?"0"+m2:""+m2,d=date.getDate(),dStr=d&lt;10?"0"+d:""+d,day=date.getDay();return{y:y+"",m:mStr,d:dStr,day:day=Math.abs((day+7-this.getFirstDayOfWeek())%7),time:date.getTime(),formatedDate:y+"-"+mStr+"-"+dStr,date:date}},Calendar2.prototype.getNextNDay=function(date,n){return 0===(n=n||0)||(date=new Date(this.getDateInfo(date).time)).setDate(date.getDate()+n),this.getDateInfo(date)},Calendar2.prototype.update=function(ecModel,api){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var weeks=this._rangeInfo.weeks||1,whNames=["width","height"],cellSize=this._model.getCellSize().slice(),layoutParams=this._model.getBoxLayoutParams(),cellNumbers="horizontal"===this._orient?[weeks,7]:[7,weeks];each$f([0,1],function(idx){cellSizeSpecified(cellSize,idx)&amp;&amp;(layoutParams[whNames[idx]]=cellSize[idx]*cellNumbers[idx])});var whGlobal={width:api.getWidth(),height:api.getHeight()},calendarRect=this._rect=getLayoutRect(layoutParams,whGlobal);function cellSizeSpecified(cellSize2,idx){return null!=cellSize2[idx]&amp;&amp;"auto"!==cellSize2[idx]}each$f([0,1],function(idx){cellSizeSpecified(cellSize,idx)||(cellSize[idx]=calendarRect[whNames[idx]]/cellNumbers[idx])}),this._sw=cellSize[0],this._sh=cellSize[1]},Calendar2.prototype.dataToPoint=function(data,clamp2){isArray$1(data)&amp;&amp;(data=data[0]),null==clamp2&amp;&amp;(clamp2=!0);var dayInfo=this.getDateInfo(data),range=this._rangeInfo,date=dayInfo.formatedDate;if(clamp2&amp;&amp;!(dayInfo.time&gt;=range.start.time&amp;&amp;dayInfo.time&lt;range.end.time+864e5))return[NaN,NaN];var week=dayInfo.day,nthWeek=this._getRangeInfo([range.start.time,date]).nthWeek;return"vertical"===this._orient?[this._rect.x+week*this._sw+this._sw/2,this._rect.y+nthWeek*this._sh+this._sh/2]:[this._rect.x+nthWeek*this._sw+this._sw/2,this._rect.y+week*this._sh+this._sh/2]},Calendar2.prototype.pointToData=function(point){var date=this.pointToDate(point);return date&amp;&amp;date.time},Calendar2.prototype.dataToRect=function(data,clamp2){var point=this.dataToPoint(data,clamp2);return{contentShape:{x:point[0]-(this._sw-this._lineWidth)/2,y:point[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:point,tl:[point[0]-this._sw/2,point[1]-this._sh/2],tr:[point[0]+this._sw/2,point[1]-this._sh/2],br:[point[0]+this._sw/2,point[1]+this._sh/2],bl:[point[0]-this._sw/2,point[1]+this._sh/2]}},Calendar2.prototype.pointToDate=function(point){var nthX=Math.floor((point[0]-this._rect.x)/this._sw)+1,nthY=Math.floor((point[1]-this._rect.y)/this._sh)+1,range=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(nthY,nthX-1,range):this._getDateByWeeksAndDay(nthX,nthY-1,range)},Calendar2.prototype.convertToPixel=function(ecModel,finder,value){var coordSys=getCoordSys(finder);return coordSys===this?coordSys.dataToPoint(value):null},Calendar2.prototype.convertFromPixel=function(ecModel,finder,pixel){var coordSys=getCoordSys(finder);return coordSys===this?coordSys.pointToData(pixel):null},Calendar2.prototype.containPoint=function(point){return console.warn("Not implemented."),!1},Calendar2.prototype._initRangeOption=function(){var normalizedRange,range=this._model.get("range");if(isArray$1(range)&amp;&amp;1===range.length&amp;&amp;(range=range[0]),isArray$1(range))normalizedRange=range;else{var rangeStr=range.toString();if(/^\d{4}$/.test(rangeStr)&amp;&amp;(normalizedRange=[rangeStr+"-01-01",rangeStr+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(rangeStr)){var start2=this.getDateInfo(rangeStr),firstDay=start2.date;firstDay.setMonth(firstDay.getMonth()+1);var end2=this.getNextNDay(firstDay,-1);normalizedRange=[start2.formatedDate,end2.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(rangeStr)&amp;&amp;(normalizedRange=[rangeStr,rangeStr])}if(!normalizedRange)return range;var tmp=this._getRangeInfo(normalizedRange);return tmp.start.time&gt;tmp.end.time&amp;&amp;normalizedRange.reverse(),normalizedRange},Calendar2.prototype._getRangeInfo=function(range){var reversed,parsedRange=[this.getDateInfo(range[0]),this.getDateInfo(range[1])];parsedRange[0].time&gt;parsedRange[1].time&amp;&amp;(reversed=!0,parsedRange.reverse());var allDay=Math.floor(parsedRange[1].time/864e5)-Math.floor(parsedRange[0].time/864e5)+1,date=new Date(parsedRange[0].time),startDateNum=date.getDate(),endDateNum=parsedRange[1].date.getDate();date.setDate(startDateNum+allDay-1);var dateNum=date.getDate();if(dateNum!==endDateNum)for(var sign=date.getTime()-parsedRange[1].time&gt;0?1:-1;(dateNum=date.getDate())!==endDateNum&amp;&amp;(date.getTime()-parsedRange[1].time)*sign&gt;0;)allDay-=sign,date.setDate(dateNum-sign);var weeks=Math.floor((allDay+parsedRange[0].day+6)/7),nthWeek=reversed?1-weeks:weeks-1;return reversed&amp;&amp;parsedRange.reverse(),{range:[parsedRange[0].formatedDate,parsedRange[1].formatedDate],start:parsedRange[0],end:parsedRange[1],allDay:allDay,weeks:weeks,nthWeek:nthWeek,fweek:parsedRange[0].day,lweek:parsedRange[1].day}},Calendar2.prototype._getDateByWeeksAndDay=function(nthWeek,day,range){var rangeInfo=this._getRangeInfo(range);if(nthWeek&gt;rangeInfo.weeks||0===nthWeek&amp;&amp;day&lt;rangeInfo.fweek||nthWeek===rangeInfo.weeks&amp;&amp;day&gt;rangeInfo.lweek)return null;var nthDay=7*(nthWeek-1)-rangeInfo.fweek+day,date=new Date(rangeInfo.start.time);return date.setDate(+rangeInfo.start.d+nthDay),this.getDateInfo(date)},Calendar2.create=function(ecModel,api){var calendarList=[];return ecModel.eachComponent("calendar",function(calendarModel){var calendar=new Calendar2(calendarModel);calendarList.push(calendar),calendarModel.coordinateSystem=calendar}),ecModel.eachSeries(function(calendarSeries){"calendar"===calendarSeries.get("coordinateSystem")&amp;&amp;(calendarSeries.coordinateSystem=calendarList[calendarSeries.get("calendarIndex")||0])}),calendarList},Calendar2.dimensions=["time","value"],Calendar2}();function getCoordSys(finder){var calendarModel=finder.calendarModel,seriesModel=finder.seriesModel;return calendarModel?calendarModel.coordinateSystem:seriesModel?seriesModel.coordinateSystem:null}function isSetLoc(obj,props){var isSet;return each$f(props,function(prop){null!=obj[prop]&amp;&amp;"auto"!==obj[prop]&amp;&amp;(isSet=!0)}),isSet}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(target,source,targetProp){if(targetProp&amp;&amp;(!target[targetProp]&amp;&amp;source[targetProp]&amp;&amp;(target[targetProp]={}),target=target[targetProp],source=source[targetProp]),target&amp;&amp;source)for(var props=targetProp?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,i=0;i&lt;props.length;i++){var prop=props[i];null==target[prop]&amp;&amp;null!=source[prop]&amp;&amp;(target[prop]=source[prop])}}var GraphicComponentModel=function(_super){function GraphicComponentModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GraphicComponentModel2.type,_this.preventAutoZ=!0,_this}return __extends$1(GraphicComponentModel2,_super),GraphicComponentModel2.prototype.mergeOption=function(option,ecModel){var elements=this.option.elements;this.option.elements=null,_super.prototype.mergeOption.call(this,option,ecModel),this.option.elements=elements},GraphicComponentModel2.prototype.optionUpdated=function(newOption,isInit){var thisOption=this.option,newList=(isInit?thisOption:newOption).elements,existList=thisOption.elements=isInit?[]:thisOption.elements,flattenedList=[];this._flatten(newList,flattenedList,null);var mappingResult=mappingToExists(existList,flattenedList,"normalMerge"),elOptionsToUpdate=this._elOptionsToUpdate=[];each$f(mappingResult,function(resultItem,index){var newElOption=resultItem.newOption;newElOption&amp;&amp;(elOptionsToUpdate.push(newElOption),function setKeyInfoToNewElOption(resultItem,newElOption){var existElOption=resultItem.existing;if(newElOption.id=resultItem.keyInfo.id,!newElOption.type&amp;&amp;existElOption&amp;&amp;(newElOption.type=existElOption.type),null==newElOption.parentId){var newElParentOption=newElOption.parentOption;newElParentOption?newElOption.parentId=newElParentOption.id:existElOption&amp;&amp;(newElOption.parentId=existElOption.parentId)}newElOption.parentOption=null}(resultItem,newElOption),function mergeNewElOptionToExist(existList,index,newElOption){var newElOptCopy=extend({},newElOption),existElOption=existList[index],$action=newElOption.$action||"merge";"merge"===$action?existElOption?(merge(existElOption,newElOptCopy,!0),mergeLayoutParam(existElOption,newElOptCopy,{ignoreSize:!0}),copyLayoutParams(newElOption,existElOption),copyTransitionInfo(newElOption,existElOption),copyTransitionInfo(newElOption,existElOption,"shape"),copyTransitionInfo(newElOption,existElOption,"style"),copyTransitionInfo(newElOption,existElOption,"extra"),newElOption.clipPath=existElOption.clipPath):existList[index]=newElOptCopy:"replace"===$action?existList[index]=newElOptCopy:"remove"===$action&amp;&amp;existElOption&amp;&amp;(existList[index]=null)}(existList,index,newElOption),function setLayoutInfoToExist(existItem,newElOption){if(existItem&amp;&amp;(existItem.hv=newElOption.hv=[isSetLoc(newElOption,["left","right"]),isSetLoc(newElOption,["top","bottom"])],"group"===existItem.type)){var existingGroupOpt=existItem,newGroupOpt=newElOption;null==existingGroupOpt.width&amp;&amp;(existingGroupOpt.width=newGroupOpt.width=0),null==existingGroupOpt.height&amp;&amp;(existingGroupOpt.height=newGroupOpt.height=0)}}(existList[index],newElOption))},this),thisOption.elements=filter(existList,function(item){return item&amp;&amp;delete item.$action,null!=item})},GraphicComponentModel2.prototype._flatten=function(optionList,result,parentOption){each$f(optionList,function(option){if(option){parentOption&amp;&amp;(option.parentOption=parentOption),result.push(option);var children=option.children;children&amp;&amp;children.length&amp;&amp;this._flatten(children,result,option),delete option.children}},this)},GraphicComponentModel2.prototype.useElOptionsToUpdate=function(){var els=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,els},GraphicComponentModel2.type="graphic",GraphicComponentModel2.defaultOption={elements:[]},GraphicComponentModel2}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(_super){function GraphicComponentView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=GraphicComponentView2.type,_this}return __extends$1(GraphicComponentView2,_super),GraphicComponentView2.prototype.init=function(){this._elMap=createHashMap()},GraphicComponentView2.prototype.render=function(graphicModel,ecModel,api){graphicModel!==this._lastGraphicModel&amp;&amp;this._clear(),this._lastGraphicModel=graphicModel,this._updateElements(graphicModel),this._relocate(graphicModel,api)},GraphicComponentView2.prototype._updateElements=function(graphicModel){var elOptionsToUpdate=graphicModel.useElOptionsToUpdate();if(elOptionsToUpdate){var elMap=this._elMap,rootGroup=this.group,globalZ=graphicModel.get("z"),globalZLevel=graphicModel.get("zlevel");each$f(elOptionsToUpdate,function(elOption){var id=convertOptionIdName(elOption.id,null),elExisting=null!=id?elMap.get(id):null,parentId=convertOptionIdName(elOption.parentId,null),targetElParent=null!=parentId?elMap.get(parentId):rootGroup,elType=elOption.type,elOptionStyle=elOption.style;"text"===elType&amp;&amp;elOptionStyle&amp;&amp;elOption.hv&amp;&amp;elOption.hv[1]&amp;&amp;(elOptionStyle.textVerticalAlign=elOptionStyle.textBaseline=elOptionStyle.verticalAlign=elOptionStyle.align=null);var textContentOption=elOption.textContent,textConfig=elOption.textConfig;if(elOptionStyle&amp;&amp;isEC4CompatibleStyle(elOptionStyle,elType,!!textConfig,!!textContentOption)){var convertResult=convertFromEC4CompatibleStyle(elOptionStyle,elType,!0);!textConfig&amp;&amp;convertResult.textConfig&amp;&amp;(textConfig=elOption.textConfig=convertResult.textConfig),!textContentOption&amp;&amp;convertResult.textContent&amp;&amp;(textContentOption=convertResult.textContent)}var elOptionCleaned=function getCleanedElOption(elOption){return elOption=extend({},elOption),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(name){delete elOption[name]}),elOption}(elOption),$action=elOption.$action||"merge",isMerge="merge"===$action,isReplace="replace"===$action;if(isMerge){var el_1=elExisting;(isInit=!elExisting)?el_1=createEl(id,targetElParent,elOption.type,elMap):(el_1&amp;&amp;(inner$7(el_1).isNew=!1),stopPreviousKeyframeAnimationAndRestore(el_1)),el_1&amp;&amp;(applyUpdateTransition(el_1,elOptionCleaned,graphicModel,{isInit:isInit}),updateCommonAttrs(el_1,elOption,globalZ,globalZLevel))}else if(isReplace){removeEl$1(elExisting,elOption,elMap,graphicModel);var el_2=createEl(id,targetElParent,elOption.type,elMap);el_2&amp;&amp;(applyUpdateTransition(el_2,elOptionCleaned,graphicModel,{isInit:!0}),updateCommonAttrs(el_2,elOption,globalZ,globalZLevel))}else"remove"===$action&amp;&amp;(updateLeaveTo(elExisting,elOption),removeEl$1(elExisting,elOption,elMap,graphicModel));var el=elMap.get(id);if(el&amp;&amp;textContentOption)if(isMerge){var textContentExisting=el.getTextContent();textContentExisting?textContentExisting.attr(textContentOption):el.setTextContent(new ZRText(textContentOption))}else isReplace&amp;&amp;el.setTextContent(new ZRText(textContentOption));if(el){var clipPathOption=elOption.clipPath;if(clipPathOption){var clipPathType=clipPathOption.type,clipPath=void 0,isInit=!1;if(isMerge){var oldClipPath=el.getClipPath();clipPath=(isInit=!oldClipPath||inner$7(oldClipPath).type!==clipPathType)?newEl(clipPathType):oldClipPath}else isReplace&amp;&amp;(isInit=!0,clipPath=newEl(clipPathType));el.setClipPath(clipPath),applyUpdateTransition(clipPath,clipPathOption,graphicModel,{isInit:isInit}),applyKeyframeAnimation(clipPath,clipPathOption.keyframeAnimation,graphicModel)}var elInner=inner$7(el);el.setTextConfig(textConfig),elInner.option=elOption,function setEventData(el,graphicModel,elOption){var eventData=getECData(el).eventData;el.silent||el.ignore||eventData||(eventData=getECData(el).eventData={componentType:"graphic",componentIndex:graphicModel.componentIndex,name:el.name});eventData&amp;&amp;(eventData.info=elOption.info)}(el,graphicModel,elOption),setTooltipConfig({el:el,componentModel:graphicModel,itemName:el.name,itemTooltipOption:elOption.tooltip}),applyKeyframeAnimation(el,elOption.keyframeAnimation,graphicModel)}})}},GraphicComponentView2.prototype._relocate=function(graphicModel,api){for(var elOptions=graphicModel.option.elements,rootGroup=this.group,elMap=this._elMap,apiWidth=api.getWidth(),apiHeight=api.getHeight(),xy=["x","y"],i=0;i&lt;elOptions.length;i++){if((el=null!=(id=convertOptionIdName((elOption=elOptions[i]).id,null))?elMap.get(id):null)&amp;&amp;el.isGroup){var isParentRoot=(parentEl=el.parent)===rootGroup,elInner=inner$7(el),parentElInner=inner$7(parentEl);elInner.width=parsePercent(elInner.option.width,isParentRoot?apiWidth:parentElInner.width)||0,elInner.height=parsePercent(elInner.option.height,isParentRoot?apiHeight:parentElInner.height)||0}}for(i=elOptions.length-1;i&gt;=0;i--){var elOption,id,el;if(el=null!=(id=convertOptionIdName((elOption=elOptions[i]).id,null))?elMap.get(id):null){var parentEl=el.parent,layoutPos=(parentElInner=inner$7(parentEl),{}),layouted=positionElement(el,elOption,parentEl===rootGroup?{width:apiWidth,height:apiHeight}:{width:parentElInner.width,height:parentElInner.height},null,{hv:elOption.hv,boundingMode:elOption.bounding},layoutPos);if(!inner$7(el).isNew&amp;&amp;layouted){for(var transition=elOption.transition,animatePos={},k=0;k&lt;xy.length;k++){var key=xy[k],val=layoutPos[key];transition&amp;&amp;(isTransitionAll(transition)||indexOf(transition,key)&gt;=0)?animatePos[key]=val:el[key]=val}updateProps$1(el,animatePos,graphicModel,0)}else el.attr(layoutPos)}}},GraphicComponentView2.prototype._clear=function(){var _this=this,elMap=this._elMap;elMap.each(function(el){removeEl$1(el,inner$7(el).option,elMap,_this._lastGraphicModel)}),this._elMap=createHashMap()},GraphicComponentView2.prototype.dispose=function(){this._clear()},GraphicComponentView2.type="graphic",GraphicComponentView2}(ComponentView);function newEl(graphicType){var el=new(hasOwn(nonShapeGraphicElements,graphicType)?nonShapeGraphicElements[graphicType]:getShapeClass(graphicType))({});return inner$7(el).type=graphicType,el}function createEl(id,targetElParent,graphicType,elMap){var el=newEl(graphicType);return targetElParent.add(el),elMap.set(id,el),inner$7(el).id=id,inner$7(el).isNew=!0,el}function removeEl$1(elExisting,elOption,elMap,graphicModel){elExisting&amp;&amp;elExisting.parent&amp;&amp;("group"===elExisting.type&amp;&amp;elExisting.traverse(function(el){removeEl$1(el,elOption,elMap,graphicModel)}),applyLeaveTransition(elExisting,elOption,graphicModel),elMap.removeKey(inner$7(elExisting).id))}function updateCommonAttrs(el,elOption,defaultZ,defaultZlevel){el.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",defaultZlevel||0],["z",defaultZ||0],["z2",0]],function(item){var prop=item[0];hasOwn(elOption,prop)?el[prop]=retrieve2(elOption[prop],item[1]):null==el[prop]&amp;&amp;(el[prop]=item[1])}),each$f(keys(elOption),function(key){if(0===key.indexOf("on")){var val=elOption[key];el[key]=isFunction(val)?val:null}}),hasOwn(elOption,"draggable")&amp;&amp;(el.draggable=elOption.draggable),null!=elOption.name&amp;&amp;(el.name=elOption.name),null!=elOption.id&amp;&amp;(el.id=elOption.id)}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function getAxisMainType(axisDim){return axisDim+"Axis"}function findEffectedDataZooms(ecModel,payload){var foundNewLink,axisRecords=createHashMap(),effectedModels=[],effectedModelMap=createHashMap();ecModel.eachComponent({mainType:"dataZoom",query:payload},function(dataZoomModel){effectedModelMap.get(dataZoomModel.uid)||addToEffected(dataZoomModel)});do{foundNewLink=!1,ecModel.eachComponent("dataZoom",processSingle)}while(foundNewLink);function processSingle(dataZoomModel){!effectedModelMap.get(dataZoomModel.uid)&amp;&amp;function isLinked(dataZoomModel){var isLink=!1;return dataZoomModel.eachTargetAxis(function(axisDim,axisIndex){var axisIdxArr=axisRecords.get(axisDim);axisIdxArr&amp;&amp;axisIdxArr[axisIndex]&amp;&amp;(isLink=!0)}),isLink}(dataZoomModel)&amp;&amp;(addToEffected(dataZoomModel),foundNewLink=!0)}function addToEffected(dataZoom){effectedModelMap.set(dataZoom.uid,!0),effectedModels.push(dataZoom),function markAxisControlled(dataZoomModel){dataZoomModel.eachTargetAxis(function(axisDim,axisIndex){(axisRecords.get(axisDim)||axisRecords.set(axisDim,[]))[axisIndex]=!0})}(dataZoom)}return effectedModels}function collectReferCoordSysModelInfo(dataZoomModel){var ecModel=dataZoomModel.ecModel,coordSysInfoWrap={infoList:[],infoMap:createHashMap()};return dataZoomModel.eachTargetAxis(function(axisDim,axisIndex){var axisModel=ecModel.getComponent(getAxisMainType(axisDim),axisIndex);if(axisModel){var coordSysModel=axisModel.getCoordSysModel();if(coordSysModel){var coordSysUid=coordSysModel.uid,coordSysInfo=coordSysInfoWrap.infoMap.get(coordSysUid);coordSysInfo||(coordSysInfo={model:coordSysModel,axisModels:[]},coordSysInfoWrap.infoList.push(coordSysInfo),coordSysInfoWrap.infoMap.set(coordSysUid,coordSysInfo)),coordSysInfo.axisModels.push(axisModel)}}}),coordSysInfoWrap}var DataZoomAxisInfo=function(){function DataZoomAxisInfo2(){this.indexList=[],this.indexMap=[]}return DataZoomAxisInfo2.prototype.add=function(axisCmptIdx){this.indexMap[axisCmptIdx]||(this.indexList.push(axisCmptIdx),this.indexMap[axisCmptIdx]=!0)},DataZoomAxisInfo2}(),DataZoomModel=function(_super){function DataZoomModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=DataZoomModel2.type,_this._autoThrottle=!0,_this._noTarget=!0,_this._rangePropMode=["percent","percent"],_this}return __extends$1(DataZoomModel2,_super),DataZoomModel2.prototype.init=function(option,parentModel,ecModel){var inputRawOption=retrieveRawOption(option);this.settledOption=inputRawOption,this.mergeDefaultAndTheme(option,ecModel),this._doInit(inputRawOption)},DataZoomModel2.prototype.mergeOption=function(newOption){var inputRawOption=retrieveRawOption(newOption);merge(this.option,newOption,!0),merge(this.settledOption,inputRawOption,!0),this._doInit(inputRawOption)},DataZoomModel2.prototype._doInit=function(inputRawOption){var thisOption=this.option;this._setDefaultThrottle(inputRawOption),this._updateRangeUse(inputRawOption);var settledOption=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(names,index){"value"===this._rangePropMode[index]&amp;&amp;(thisOption[names[0]]=settledOption[names[0]]=null)},this),this._resetTarget()},DataZoomModel2.prototype._resetTarget=function(){var optionOrient=this.get("orient",!0),targetAxisIndexMap=this._targetAxisInfoMap=createHashMap();this._fillSpecifiedTargetAxis(targetAxisIndexMap)?this._orient=optionOrient||this._makeAutoOrientByTargetAxis():(this._orient=optionOrient||"horizontal",this._fillAutoTargetAxisByOrient(targetAxisIndexMap,this._orient)),this._noTarget=!0,targetAxisIndexMap.each(function(axisInfo){axisInfo.indexList.length&amp;&amp;(this._noTarget=!1)},this)},DataZoomModel2.prototype._fillSpecifiedTargetAxis=function(targetAxisIndexMap){var hasAxisSpecified=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(axisDim){var refering=this.getReferringComponents(getAxisMainType(axisDim),MULTIPLE_REFERRING);if(refering.specified){hasAxisSpecified=!0;var axisInfo=new DataZoomAxisInfo;each$f(refering.models,function(axisModel){axisInfo.add(axisModel.componentIndex)}),targetAxisIndexMap.set(axisDim,axisInfo)}},this),hasAxisSpecified},DataZoomModel2.prototype._fillAutoTargetAxisByOrient=function(targetAxisIndexMap,orient){var ecModel=this.ecModel,needAuto=!0;if(needAuto){var axisDim="vertical"===orient?"y":"x";setParallelAxis(ecModel.findComponents({mainType:axisDim+"Axis"}),axisDim)}needAuto&amp;&amp;setParallelAxis(ecModel.findComponents({mainType:"singleAxis",filter:function(axisModel){return axisModel.get("orient",!0)===orient}}),"single");function setParallelAxis(axisModels2,axisDim2){var axisModel=axisModels2[0];if(axisModel){var axisInfo=new DataZoomAxisInfo;if(axisInfo.add(axisModel.componentIndex),targetAxisIndexMap.set(axisDim2,axisInfo),needAuto=!1,"x"===axisDim2||"y"===axisDim2){var gridModel_1=axisModel.getReferringComponents("grid",SINGLE_REFERRING).models[0];gridModel_1&amp;&amp;each$f(axisModels2,function(axModel){axisModel.componentIndex!==axModel.componentIndex&amp;&amp;gridModel_1===axModel.getReferringComponents("grid",SINGLE_REFERRING).models[0]&amp;&amp;axisInfo.add(axModel.componentIndex)})}}}needAuto&amp;&amp;each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(axisDim2){if(needAuto){var axisModels2=ecModel.findComponents({mainType:getAxisMainType(axisDim2),filter:function(axisModel){return"category"===axisModel.get("type",!0)}});if(axisModels2[0]){var axisInfo=new DataZoomAxisInfo;axisInfo.add(axisModels2[0].componentIndex),targetAxisIndexMap.set(axisDim2,axisInfo),needAuto=!1}}},this)},DataZoomModel2.prototype._makeAutoOrientByTargetAxis=function(){var dim;return this.eachTargetAxis(function(axisDim){!dim&amp;&amp;(dim=axisDim)},this),"y"===dim?"vertical":"horizontal"},DataZoomModel2.prototype._setDefaultThrottle=function(inputRawOption){if(inputRawOption.hasOwnProperty("throttle")&amp;&amp;(this._autoThrottle=!1),this._autoThrottle){var globalOption=this.ecModel.option;this.option.throttle=globalOption.animation&amp;&amp;globalOption.animationDurationUpdate&gt;0?100:20}},DataZoomModel2.prototype._updateRangeUse=function(inputRawOption){var rangePropMode=this._rangePropMode,rangeModeInOption=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(names,index){var percentSpecified=null!=inputRawOption[names[0]],valueSpecified=null!=inputRawOption[names[1]];percentSpecified&amp;&amp;!valueSpecified?rangePropMode[index]="percent":!percentSpecified&amp;&amp;valueSpecified?rangePropMode[index]="value":rangeModeInOption?rangePropMode[index]=rangeModeInOption[index]:percentSpecified&amp;&amp;(rangePropMode[index]="percent")})},DataZoomModel2.prototype.noTarget=function(){return this._noTarget},DataZoomModel2.prototype.getFirstTargetAxisModel=function(){var firstAxisModel;return this.eachTargetAxis(function(axisDim,axisIndex){null==firstAxisModel&amp;&amp;(firstAxisModel=this.ecModel.getComponent(getAxisMainType(axisDim),axisIndex))},this),firstAxisModel},DataZoomModel2.prototype.eachTargetAxis=function(callback,context){this._targetAxisInfoMap.each(function(axisInfo,axisDim){each$f(axisInfo.indexList,function(axisIndex){callback.call(context,axisDim,axisIndex)})})},DataZoomModel2.prototype.getAxisProxy=function(axisDim,axisIndex){var axisModel=this.getAxisModel(axisDim,axisIndex);if(axisModel)return axisModel.__dzAxisProxy},DataZoomModel2.prototype.getAxisModel=function(axisDim,axisIndex){var axisInfo=this._targetAxisInfoMap.get(axisDim);if(axisInfo&amp;&amp;axisInfo.indexMap[axisIndex])return this.ecModel.getComponent(getAxisMainType(axisDim),axisIndex)},DataZoomModel2.prototype.setRawRange=function(opt){var thisOption=this.option,settledOption=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(names){null==opt[names[0]]&amp;&amp;null==opt[names[1]]||(thisOption[names[0]]=settledOption[names[0]]=opt[names[0]],thisOption[names[1]]=settledOption[names[1]]=opt[names[1]])},this),this._updateRangeUse(opt)},DataZoomModel2.prototype.setCalculatedRange=function(opt){var option=this.option;each$f(["start","startValue","end","endValue"],function(name){option[name]=opt[name]})},DataZoomModel2.prototype.getPercentRange=function(){var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy)return axisProxy.getDataPercentWindow()},DataZoomModel2.prototype.getValueRange=function(axisDim,axisIndex){if(null!=axisDim||null!=axisIndex)return this.getAxisProxy(axisDim,axisIndex).getDataValueWindow();var axisProxy=this.findRepresentativeAxisProxy();return axisProxy?axisProxy.getDataValueWindow():void 0},DataZoomModel2.prototype.findRepresentativeAxisProxy=function(axisModel){if(axisModel)return axisModel.__dzAxisProxy;for(var firstProxy,axisDimList=this._targetAxisInfoMap.keys(),i=0;i&lt;axisDimList.length;i++)for(var axisDim=axisDimList[i],axisInfo=this._targetAxisInfoMap.get(axisDim),j=0;j&lt;axisInfo.indexList.length;j++){var proxy=this.getAxisProxy(axisDim,axisInfo.indexList[j]);if(proxy.hostedBy(this))return proxy;firstProxy||(firstProxy=proxy)}return firstProxy},DataZoomModel2.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},DataZoomModel2.prototype.getOrient=function(){return this._orient},DataZoomModel2.type="dataZoom",DataZoomModel2.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],DataZoomModel2.defaultOption={z:4,filterMode:"filter",start:0,end:100},DataZoomModel2}(ComponentModel);function retrieveRawOption(option){var ret={};return each$f(["start","end","startValue","endValue","throttle"],function(name){option.hasOwnProperty(name)&amp;&amp;(ret[name]=option[name])}),ret}var SelectDataZoomModel=function(_super){function SelectDataZoomModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SelectDataZoomModel2.type,_this}return __extends$1(SelectDataZoomModel2,_super),SelectDataZoomModel2.type="dataZoom.select",SelectDataZoomModel2}(DataZoomModel),DataZoomView=function(_super){function DataZoomView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=DataZoomView2.type,_this}return __extends$1(DataZoomView2,_super),DataZoomView2.prototype.render=function(dataZoomModel,ecModel,api,payload){this.dataZoomModel=dataZoomModel,this.ecModel=ecModel,this.api=api},DataZoomView2.type="dataZoom",DataZoomView2}(ComponentView),SelectDataZoomView=function(_super){function SelectDataZoomView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SelectDataZoomView2.type,_this}return __extends$1(SelectDataZoomView2,_super),SelectDataZoomView2.type="dataZoom.select",SelectDataZoomView2}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function AxisProxy2(dimName,axisIndex,dataZoomModel,ecModel){this._dimName=dimName,this._axisIndex=axisIndex,this.ecModel=ecModel,this._dataZoomModel=dataZoomModel}return AxisProxy2.prototype.hostedBy=function(dataZoomModel){return this._dataZoomModel===dataZoomModel},AxisProxy2.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},AxisProxy2.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},AxisProxy2.prototype.getTargetSeriesModels=function(){var seriesModels=[];return this.ecModel.eachSeries(function(seriesModel){if(function isCoordSupported(seriesModel){var coordType=seriesModel.get("coordinateSystem");return indexOf(SERIES_COORDS,coordType)&gt;=0}(seriesModel)){var axisMainType=getAxisMainType(this._dimName),axisModel=seriesModel.getReferringComponents(axisMainType,SINGLE_REFERRING).models[0];axisModel&amp;&amp;this._axisIndex===axisModel.componentIndex&amp;&amp;seriesModels.push(seriesModel)}},this),seriesModels},AxisProxy2.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},AxisProxy2.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},AxisProxy2.prototype.calculateDataWindow=function(opt){var hasPropModeValue,dataExtent=this._dataExtent,scale2=this.getAxisModel().axis.scale,rangePropMode=this._dataZoomModel.getRangePropMode(),percentExtent=[0,100],percentWindow=[],valueWindow=[];each$7(["start","end"],function(prop,idx){var boundPercent=opt[prop],boundValue=opt[prop+"Value"];"percent"===rangePropMode[idx]?(null==boundPercent&amp;&amp;(boundPercent=percentExtent[idx]),boundValue=scale2.parse(linearMap$2(boundPercent,percentExtent,dataExtent))):(hasPropModeValue=!0,boundPercent=linearMap$2(boundValue=null==boundValue?dataExtent[idx]:scale2.parse(boundValue),dataExtent,percentExtent)),valueWindow[idx]=null==boundValue||isNaN(boundValue)?dataExtent[idx]:boundValue,percentWindow[idx]=null==boundPercent||isNaN(boundPercent)?percentExtent[idx]:boundPercent}),asc$1(valueWindow),asc$1(percentWindow);var spans=this._minMaxSpan;function restrictSet(fromWindow,toWindow,fromExtent,toExtent,toValue){var suffix=toValue?"Span":"ValueSpan";sliderMove(0,fromWindow,fromExtent,"all",spans["min"+suffix],spans["max"+suffix]);for(var i=0;i&lt;2;i++)toWindow[i]=linearMap$2(fromWindow[i],fromExtent,toExtent,!0),toValue&amp;&amp;(toWindow[i]=scale2.parse(toWindow[i]))}return hasPropModeValue?restrictSet(valueWindow,percentWindow,dataExtent,percentExtent,!1):restrictSet(percentWindow,valueWindow,percentExtent,dataExtent,!0),{valueWindow:valueWindow,percentWindow:percentWindow}},AxisProxy2.prototype.reset=function(dataZoomModel){if(dataZoomModel===this._dataZoomModel){var targetSeries=this.getTargetSeriesModels();this._dataExtent=function calculateDataExtent(axisProxy,axisDim,seriesModels){var dataExtent=[1/0,-1/0];each$7(seriesModels,function(seriesModel){!function unionAxisExtentFromData(dataExtent,data,axisDim){data&amp;&amp;each$f(getDataDimensionsOnAxis(data,axisDim),function(dim){var seriesExtent=data.getApproximateExtent(dim);seriesExtent[0]&lt;dataExtent[0]&amp;&amp;(dataExtent[0]=seriesExtent[0]),seriesExtent[1]&gt;dataExtent[1]&amp;&amp;(dataExtent[1]=seriesExtent[1])})}(dataExtent,seriesModel.getData(),axisDim)});var axisModel=axisProxy.getAxisModel(),rawExtentResult=ensureScaleRawExtentInfo(axisModel.axis.scale,axisModel,dataExtent).calculate();return[rawExtentResult.min,rawExtentResult.max]}(this,this._dimName,targetSeries),this._updateMinMaxSpan();var dataWindow=this.calculateDataWindow(dataZoomModel.settledOption);this._valueWindow=dataWindow.valueWindow,this._percentWindow=dataWindow.percentWindow,this._setAxisModel()}},AxisProxy2.prototype.filterData=function(dataZoomModel,api){if(dataZoomModel===this._dataZoomModel){var axisDim=this._dimName,seriesModels=this.getTargetSeriesModels(),filterMode=dataZoomModel.get("filterMode"),valueWindow=this._valueWindow;"none"!==filterMode&amp;&amp;each$7(seriesModels,function(seriesModel){var seriesData=seriesModel.getData(),dataDims=seriesData.mapDimensionsAll(axisDim);if(dataDims.length){if("weakFilter"===filterMode){var store_1=seriesData.getStore(),dataDimIndices_1=map$1(dataDims,function(dim){return seriesData.getDimensionIndex(dim)},seriesData);seriesData.filterSelf(function(dataIndex){for(var leftOut,rightOut,hasValue,i=0;i&lt;dataDims.length;i++){var value=store_1.get(dataDimIndices_1[i],dataIndex),thisHasValue=!isNaN(value),thisLeftOut=value&lt;valueWindow[0],thisRightOut=value&gt;valueWindow[1];if(thisHasValue&amp;&amp;!thisLeftOut&amp;&amp;!thisRightOut)return!0;thisHasValue&amp;&amp;(hasValue=!0),thisLeftOut&amp;&amp;(leftOut=!0),thisRightOut&amp;&amp;(rightOut=!0)}return hasValue&amp;&amp;leftOut&amp;&amp;rightOut})}else each$7(dataDims,function(dim){if("empty"===filterMode)seriesModel.setData(seriesData=seriesData.map(dim,function(value){return function isInWindow(value){return value&gt;=valueWindow[0]&amp;&amp;value&lt;=valueWindow[1]}(value)?value:NaN}));else{var range={};range[dim]=valueWindow,seriesData.selectRange(range)}});each$7(dataDims,function(dim){seriesData.setApproximateExtent(valueWindow,dim)})}})}},AxisProxy2.prototype._updateMinMaxSpan=function(){var minMaxSpan=this._minMaxSpan={},dataZoomModel=this._dataZoomModel,dataExtent=this._dataExtent;each$7(["min","max"],function(minMax){var percentSpan=dataZoomModel.get(minMax+"Span"),valueSpan=dataZoomModel.get(minMax+"ValueSpan");null!=valueSpan&amp;&amp;(valueSpan=this.getAxisModel().axis.scale.parse(valueSpan)),null!=valueSpan?percentSpan=linearMap$2(dataExtent[0]+valueSpan,dataExtent,[0,100],!0):null!=percentSpan&amp;&amp;(valueSpan=linearMap$2(percentSpan,[0,100],dataExtent,!0)-dataExtent[0]),minMaxSpan[minMax+"Span"]=percentSpan,minMaxSpan[minMax+"ValueSpan"]=valueSpan},this)},AxisProxy2.prototype._setAxisModel=function(){var axisModel=this.getAxisModel(),percentWindow=this._percentWindow,valueWindow=this._valueWindow;if(percentWindow){var precision=getPixelPrecision(valueWindow,[0,500]);precision=Math.min(precision,20);var rawExtentInfo=axisModel.axis.scale.rawExtentInfo;0!==percentWindow[0]&amp;&amp;rawExtentInfo.setDeterminedMinMax("min",+valueWindow[0].toFixed(precision)),100!==percentWindow[1]&amp;&amp;rawExtentInfo.setDeterminedMinMax("max",+valueWindow[1].toFixed(precision)),rawExtentInfo.freeze()}},AxisProxy2}();var dataZoomProcessor={getTargetSeries:function(ecModel){function eachAxisModel(cb){ecModel.eachComponent("dataZoom",function(dataZoomModel){dataZoomModel.eachTargetAxis(function(axisDim,axisIndex){var axisModel=ecModel.getComponent(getAxisMainType(axisDim),axisIndex);cb(axisDim,axisIndex,axisModel,dataZoomModel)})})}eachAxisModel(function(axisDim,axisIndex,axisModel,dataZoomModel){axisModel.__dzAxisProxy=null});var proxyList=[];eachAxisModel(function(axisDim,axisIndex,axisModel,dataZoomModel){axisModel.__dzAxisProxy||(axisModel.__dzAxisProxy=new AxisProxy(axisDim,axisIndex,dataZoomModel,ecModel),proxyList.push(axisModel.__dzAxisProxy))});var seriesModelMap=createHashMap();return each$f(proxyList,function(axisProxy){each$f(axisProxy.getTargetSeriesModels(),function(seriesModel){seriesModelMap.set(seriesModel.uid,seriesModel)})}),seriesModelMap},overallReset:function(ecModel,api){ecModel.eachComponent("dataZoom",function(dataZoomModel){dataZoomModel.eachTargetAxis(function(axisDim,axisIndex){dataZoomModel.getAxisProxy(axisDim,axisIndex).reset(dataZoomModel)}),dataZoomModel.eachTargetAxis(function(axisDim,axisIndex){dataZoomModel.getAxisProxy(axisDim,axisIndex).filterData(dataZoomModel,api)})}),ecModel.eachComponent("dataZoom",function(dataZoomModel){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();if(axisProxy){var percentRange=axisProxy.getDataPercentWindow(),valueRange=axisProxy.getDataValueWindow();dataZoomModel.setCalculatedRange({start:percentRange[0],end:percentRange[1],startValue:valueRange[0],endValue:valueRange[1]})}})}};var installed$1=!1;function installCommon$1(registers){installed$1||(installed$1=!0,registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),function installDataZoomAction(registers){registers.registerAction("dataZoom",function(payload,ecModel){each$f(findEffectedDataZooms(ecModel,payload),function(dataZoomModel){dataZoomModel.setRawRange({start:payload.start,end:payload.end,startValue:payload.startValue,endValue:payload.endValue})})})}(registers),registers.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(registers){registers.registerComponentModel(SelectDataZoomModel),registers.registerComponentView(SelectDataZoomView),installCommon$1(registers)}var ToolboxFeature=function(){return function ToolboxFeature2(){}}(),features={};function registerFeature(name,ctor){features[name]=ctor}function getFeature(name){return features[name]}var ToolboxModel=function(_super){function ToolboxModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ToolboxModel2.type,_this}return __extends$1(ToolboxModel2,_super),ToolboxModel2.prototype.optionUpdated=function(){_super.prototype.optionUpdated.apply(this,arguments);var ecModel=this.ecModel;each$f(this.option.feature,function(featureOpt,featureName){var Feature=getFeature(featureName);Feature&amp;&amp;(Feature.getDefaultOption&amp;&amp;(Feature.defaultOption=Feature.getDefaultOption(ecModel)),merge(featureOpt,Feature.defaultOption))})},ToolboxModel2.type="toolbox",ToolboxModel2.layoutMode={type:"box",ignoreSize:!0},ToolboxModel2.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},ToolboxModel2}(ComponentModel);function makeBackground(rect,componentModel){var padding=normalizeCssArray(componentModel.get("padding")),style=componentModel.getItemStyle(["color","opacity"]);return style.fill=componentModel.get("backgroundColor"),rect=new Rect$2({shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[1]+padding[3],height:rect.height+padding[0]+padding[2],r:componentModel.get("borderRadius")},style:style,silent:!0,z2:-1})}var ToolboxView=function(_super){function ToolboxView2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(ToolboxView2,_super),ToolboxView2.prototype.render=function(toolboxModel,ecModel,api,payload){var group=this.group;if(group.removeAll(),toolboxModel.get("show")){var itemSize=+toolboxModel.get("itemSize"),isVertical="vertical"===toolboxModel.get("orient"),featureOpts=toolboxModel.get("feature")||{},features2=this._features||(this._features={}),featureNames=[];each$f(featureOpts,function(opt,name){featureNames.push(name)}),new DataDiffer(this._featureNames||[],featureNames).add(processFeature).update(processFeature).remove(curry$1(processFeature,null)).execute(),this._featureNames=featureNames,function layout(group,componentModel,api){var boxLayoutParams=componentModel.getBoxLayoutParams(),padding=componentModel.get("padding"),viewportSize={width:api.getWidth(),height:api.getHeight()},rect=getLayoutRect(boxLayoutParams,viewportSize,padding);box(componentModel.get("orient"),group,componentModel.get("itemGap"),rect.width,rect.height),positionElement(group,boxLayoutParams,viewportSize,padding)}(group,toolboxModel,api),group.add(makeBackground(group.getBoundingRect(),toolboxModel)),isVertical||group.eachChild(function(icon){var titleText=icon.__title,emphasisState=icon.ensureState("emphasis"),emphasisTextConfig=emphasisState.textConfig||(emphasisState.textConfig={}),textContent=icon.getTextContent(),emphasisTextState=textContent&amp;&amp;textContent.ensureState("emphasis");if(emphasisTextState&amp;&amp;!isFunction(emphasisTextState)&amp;&amp;titleText){var emphasisTextStyle=emphasisTextState.style||(emphasisTextState.style={}),rect=getBoundingRect(titleText,ZRText.makeFont(emphasisTextStyle)),offsetX=icon.x+group.x,needPutOnTop=!1;icon.y+group.y+itemSize+rect.height&gt;api.getHeight()&amp;&amp;(emphasisTextConfig.position="top",needPutOnTop=!0);var topOffset=needPutOnTop?-5-rect.height:itemSize+10;offsetX+rect.width/2&gt;api.getWidth()?(emphasisTextConfig.position=["100%",topOffset],emphasisTextStyle.align="right"):offsetX-rect.width/2&lt;0&amp;&amp;(emphasisTextConfig.position=[0,topOffset],emphasisTextStyle.align="left")}})}function processFeature(newIndex,oldIndex){var feature,featureName=featureNames[newIndex],oldName=featureNames[oldIndex],featureOpt=featureOpts[featureName],featureModel=new Model(featureOpt,toolboxModel,toolboxModel.ecModel);if(payload&amp;&amp;null!=payload.newTitle&amp;&amp;payload.featureName===featureName&amp;&amp;(featureOpt.title=payload.newTitle),featureName&amp;&amp;!oldName){if(function isUserFeatureName(featureName){return 0===featureName.indexOf("my")}(featureName))feature={onclick:featureModel.option.onclick,featureName:featureName};else{var Feature=getFeature(featureName);if(!Feature)return;feature=new Feature}features2[featureName]=feature}else if(!(feature=features2[oldName]))return;feature.uid=getUID("toolbox-feature"),feature.model=featureModel,feature.ecModel=ecModel,feature.api=api;var isToolboxFeature=feature instanceof ToolboxFeature;featureName||!oldName?!featureModel.get("show")||isToolboxFeature&amp;&amp;feature.unusable?isToolboxFeature&amp;&amp;feature.remove&amp;&amp;feature.remove(ecModel,api):(!function createIconPaths(featureModel,feature,featureName){var iconsMap,titlesMap,iconStyleModel=featureModel.getModel("iconStyle"),iconStyleEmphasisModel=featureModel.getModel(["emphasis","iconStyle"]),icons=feature instanceof ToolboxFeature&amp;&amp;feature.getIcons?feature.getIcons():featureModel.get("icon"),titles=featureModel.get("title")||{};isString(icons)?(iconsMap={})[featureName]=icons:iconsMap=icons;isString(titles)?(titlesMap={})[featureName]=titles:titlesMap=titles;var iconPaths=featureModel.iconPaths={};each$f(iconsMap,function(iconStr,iconName){var path=createIcon(iconStr,{},{x:-itemSize/2,y:-itemSize/2,width:itemSize,height:itemSize});path.setStyle(iconStyleModel.getItemStyle()),path.ensureState("emphasis").style=iconStyleEmphasisModel.getItemStyle();var textContent=new ZRText({style:{text:titlesMap[iconName],align:iconStyleEmphasisModel.get("textAlign"),borderRadius:iconStyleEmphasisModel.get("textBorderRadius"),padding:iconStyleEmphasisModel.get("textPadding"),fill:null,font:getFont({fontStyle:iconStyleEmphasisModel.get("textFontStyle"),fontFamily:iconStyleEmphasisModel.get("textFontFamily"),fontSize:iconStyleEmphasisModel.get("textFontSize"),fontWeight:iconStyleEmphasisModel.get("textFontWeight")},ecModel)},ignore:!0});path.setTextContent(textContent),setTooltipConfig({el:path,componentModel:toolboxModel,itemName:iconName,formatterParamsExtra:{title:titlesMap[iconName]}}),path.__title=titlesMap[iconName],path.on("mouseover",function(){var hoverStyle=iconStyleEmphasisModel.getItemStyle(),defaultTextPosition=isVertical?null==toolboxModel.get("right")&amp;&amp;"right"!==toolboxModel.get("left")?"right":"left":null==toolboxModel.get("bottom")&amp;&amp;"bottom"!==toolboxModel.get("top")?"bottom":"top";textContent.setStyle({fill:iconStyleEmphasisModel.get("textFill")||hoverStyle.fill||hoverStyle.stroke||"#000",backgroundColor:iconStyleEmphasisModel.get("textBackgroundColor")}),path.setTextConfig({position:iconStyleEmphasisModel.get("textPosition")||defaultTextPosition}),textContent.ignore=!toolboxModel.get("showTitle"),api.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==featureModel.get(["iconStatus",iconName])&amp;&amp;api.leaveEmphasis(this),textContent.hide()}),("emphasis"===featureModel.get(["iconStatus",iconName])?enterEmphasis:leaveEmphasis)(path),group.add(path),path.on("click",bind$1(feature.onclick,feature,ecModel,api,iconName)),iconPaths[iconName]=path})}(featureModel,feature,featureName),featureModel.setIconStatus=function(iconName,status){var option=this.option,iconPaths=this.iconPaths;option.iconStatus=option.iconStatus||{},option.iconStatus[iconName]=status,iconPaths[iconName]&amp;&amp;("emphasis"===status?enterEmphasis:leaveEmphasis)(iconPaths[iconName])},feature instanceof ToolboxFeature&amp;&amp;feature.render&amp;&amp;feature.render(featureModel,ecModel,api,payload)):isToolboxFeature&amp;&amp;feature.dispose&amp;&amp;feature.dispose(ecModel,api)}},ToolboxView2.prototype.updateView=function(toolboxModel,ecModel,api,payload){each$f(this._features,function(feature){feature instanceof ToolboxFeature&amp;&amp;feature.updateView&amp;&amp;feature.updateView(feature.model,ecModel,api,payload)})},ToolboxView2.prototype.remove=function(ecModel,api){each$f(this._features,function(feature){feature instanceof ToolboxFeature&amp;&amp;feature.remove&amp;&amp;feature.remove(ecModel,api)}),this.group.removeAll()},ToolboxView2.prototype.dispose=function(ecModel,api){each$f(this._features,function(feature){feature instanceof ToolboxFeature&amp;&amp;feature.dispose&amp;&amp;feature.dispose(ecModel,api)})},ToolboxView2.type="toolbox",ToolboxView2}(ComponentView);var SaveAsImage=function(_super){function SaveAsImage2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(SaveAsImage2,_super),SaveAsImage2.prototype.onclick=function(ecModel,api){var model=this.model,title=model.get("name")||ecModel.get("title.0.text")||"echarts",isSvg="svg"===api.getZr().painter.getType(),type=isSvg?"svg":model.get("type",!0)||"png",url=api.getConnectedDataURL({type:type,backgroundColor:model.get("backgroundColor",!0)||ecModel.get("backgroundColor")||"#fff",connectedBackgroundColor:model.get("connectedBackgroundColor"),excludeComponents:model.get("excludeComponents"),pixelRatio:model.get("pixelRatio")}),browser=env.browser;if("function"!=typeof MouseEvent||!browser.newEdge&amp;&amp;(browser.ie||browser.edge))if(window.navigator.msSaveOrOpenBlob||isSvg){var parts=url.split(","),base64Encoded=parts[0].indexOf("base64")&gt;-1,bstr=isSvg?decodeURIComponent(parts[1]):parts[1];base64Encoded&amp;&amp;(bstr=window.atob(bstr));var filename=title+"."+type;if(window.navigator.msSaveOrOpenBlob){for(var n=bstr.length,u8arr=new Uint8Array(n);n--;)u8arr[n]=bstr.charCodeAt(n);var blob=new Blob([u8arr]);window.navigator.msSaveOrOpenBlob(blob,filename)}else{var frame=document.createElement("iframe");document.body.appendChild(frame);var cw=frame.contentWindow,doc=cw.document;doc.open("image/svg+xml","replace"),doc.write(bstr),doc.close(),cw.focus(),doc.execCommand("SaveAs",!0,filename),document.body.removeChild(frame)}}else{var lang=model.get("lang"),html='&lt;body style="margin:0;"&gt;&lt;img src="'+url+'" style="max-width:100%;" title="'+(lang&amp;&amp;lang[0]||"")+'" /&gt;&lt;/body&gt;',tab=window.open();tab.document.write(html),tab.document.title=title}else{var $a=document.createElement("a");$a.download=title+"."+type,$a.target="_blank",$a.href=url;var evt=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});$a.dispatchEvent(evt)}},SaveAsImage2.getDefaultOption=function(ecModel){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:ecModel.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:ecModel.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},SaveAsImage2}(ToolboxFeature),radioTypes=[["line","bar"],["stack"]],MagicType=function(_super){function MagicType2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(MagicType2,_super),MagicType2.prototype.getIcons=function(){var model=this.model,availableIcons=model.get("icon"),icons={};return each$f(model.get("type"),function(type){availableIcons[type]&amp;&amp;(icons[type]=availableIcons[type])}),icons},MagicType2.getDefaultOption=function(ecModel){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:ecModel.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},MagicType2.prototype.onclick=function(ecModel,api,type){var model=this.model,seriesIndex=model.get(["seriesIndex",type]);if(seriesOptGenreator[type]){var newTitle,newOption={series:[]};each$f(radioTypes,function(radio){indexOf(radio,type)&gt;=0&amp;&amp;each$f(radio,function(item){model.setIconStatus(item,"normal")})}),model.setIconStatus(type,"emphasis"),ecModel.eachComponent({mainType:"series",query:null==seriesIndex?null:{seriesIndex:seriesIndex}},function(seriesModel){var seriesType2=seriesModel.subType,seriesId=seriesModel.id,newSeriesOpt=seriesOptGenreator[type](seriesType2,seriesId,seriesModel,model);newSeriesOpt&amp;&amp;(defaults(newSeriesOpt,seriesModel.option),newOption.series.push(newSeriesOpt));var coordSys=seriesModel.coordinateSystem;if(coordSys&amp;&amp;"cartesian2d"===coordSys.type&amp;&amp;("line"===type||"bar"===type)){var categoryAxis2=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis2){var axisType=categoryAxis2.dim+"Axis",axisIndex=seriesModel.getReferringComponents(axisType,SINGLE_REFERRING).models[0].componentIndex;newOption[axisType]=newOption[axisType]||[];for(var i=0;i&lt;=axisIndex;i++)newOption[axisType][axisIndex]=newOption[axisType][axisIndex]||{};newOption[axisType][axisIndex].boundaryGap="bar"===type}}});var currentType=type;"stack"===type&amp;&amp;(newTitle=merge({stack:model.option.title.tiled,tiled:model.option.title.stack},model.option.title),"emphasis"!==model.get(["iconStatus",type])&amp;&amp;(currentType="tiled")),api.dispatchAction({type:"changeMagicType",currentType:currentType,newOption:newOption,newTitle:newTitle,featureName:"magicType"})}},MagicType2}(ToolboxFeature),seriesOptGenreator={line:function(seriesType2,seriesId,seriesModel,model){if("bar"===seriesType2)return merge({id:seriesId,type:"line",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get(["option","line"])||{},!0)},bar:function(seriesType2,seriesId,seriesModel,model){if("line"===seriesType2)return merge({id:seriesId,type:"bar",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get(["option","bar"])||{},!0)},stack:function(seriesType2,seriesId,seriesModel,model){var isStack="__ec_magicType_stack__"===seriesModel.get("stack");if("line"===seriesType2||"bar"===seriesType2)return model.setIconStatus("stack",isStack?"normal":"emphasis"),merge({id:seriesId,stack:isStack?"":"__ec_magicType_stack__"},model.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.mergeOption(payload.newOption)});var BLOCK_SPLITER=new Array(60).join("-");function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var itemSplitRegex=new RegExp("[\t]+","g");function parseContents(str,blockMetaList){var blocks=str.split(new RegExp("\n*"+BLOCK_SPLITER+"\n*","g")),newOption={series:[]};return each$f(blocks,function(block,idx){if(function isTSVFormat(block){if(block.slice(0,block.indexOf("\n")).indexOf("\t")&gt;=0)return!0}(block)){var result=function parseTSVContents(tsv){for(var tsvLines=tsv.split(/\n+/g),categories=[],series=map$1(trim(tsvLines.shift()).split(itemSplitRegex),function(header){return{name:header,data:[]}}),i=0;i&lt;tsvLines.length;i++){var items=trim(tsvLines[i]).split(itemSplitRegex);categories.push(items.shift());for(var j=0;j&lt;items.length;j++)series[j]&amp;&amp;(series[j].data[i]=items[j])}return{series:series,categories:categories}}(block),blockMeta=blockMetaList[idx],axisKey=blockMeta.axisDim+"Axis";blockMeta&amp;&amp;(newOption[axisKey]=newOption[axisKey]||[],newOption[axisKey][blockMeta.axisIndex]={data:result.categories},newOption.series=newOption.series.concat(result.series))}else{result=function parseListContents(str){for(var lines=str.split(/\n+/g),seriesName=trim(lines.shift()),data=[],i=0;i&lt;lines.length;i++){var line=trim(lines[i]);if(line){var items=line.split(itemSplitRegex),name_1="",value=void 0,hasName=!1;isNaN(items[0])?(hasName=!0,name_1=items[0],items=items.slice(1),data[i]={name:name_1,value:[]},value=data[i].value):value=data[i]=[];for(var j=0;j&lt;items.length;j++)value.push(+items[j]);1===value.length&amp;&amp;(hasName?data[i].value=value[0]:data[i]=value[0])}}return{name:seriesName,data:data}}(block);newOption.series.push(result)}}),newOption}var DataView=function(_super){function DataView2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(DataView2,_super),DataView2.prototype.onclick=function(ecModel,api){setTimeout(function(){api.dispatchAction({type:"hideTip"})});var container=api.getDom(),model=this.model;this._dom&amp;&amp;container.removeChild(this._dom);var root=document.createElement("div");root.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",root.style.backgroundColor=model.get("backgroundColor")||"#fff";var header=document.createElement("h4"),lang=model.get("lang")||[];header.innerHTML=lang[0]||model.get("title"),header.style.cssText="margin:10px 20px",header.style.color=model.get("textColor");var viewMain=document.createElement("div"),textarea=document.createElement("textarea");viewMain.style.cssText="overflow:auto";var optionToContent=model.get("optionToContent"),contentToOption=model.get("contentToOption"),result=function getContentFromModel(ecModel){var series,groups,tables,result=function groupSeries(ecModel){var seriesGroupByCategoryAxis={},otherSeries=[],meta=[];return ecModel.eachRawSeries(function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"cartesian2d"!==coordSys.type&amp;&amp;"polar"!==coordSys.type)otherSeries.push(seriesModel);else{var baseAxis=coordSys.getBaseAxis();if("category"===baseAxis.type){var key=baseAxis.dim+"_"+baseAxis.index;seriesGroupByCategoryAxis[key]||(seriesGroupByCategoryAxis[key]={categoryAxis:baseAxis,valueAxis:coordSys.getOtherAxis(baseAxis),series:[]},meta.push({axisDim:baseAxis.dim,axisIndex:baseAxis.index})),seriesGroupByCategoryAxis[key].series.push(seriesModel)}else otherSeries.push(seriesModel)}}),{seriesGroupByCategoryAxis:seriesGroupByCategoryAxis,other:otherSeries,meta:meta}}(ecModel);return{value:filter([(groups=result.seriesGroupByCategoryAxis,tables=[],each$f(groups,function(group,key){var categoryAxis2=group.categoryAxis,valueAxisDim=group.valueAxis.dim,headers=[" "].concat(map$1(group.series,function(series){return series.name})),columns=[categoryAxis2.model.getCategories()];each$f(group.series,function(series){var rawData=series.getRawData();columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim),function(val){return val}))});for(var lines=[headers.join("\t")],i=0;i&lt;columns[0].length;i++){for(var items=[],j=0;j&lt;columns.length;j++)items.push(columns[j][i]);lines.push(items.join("\t"))}tables.push(lines.join("\n"))}),tables.join("\n\n"+BLOCK_SPLITER+"\n\n")),(series=result.other,map$1(series,function(series2){var data=series2.getRawData(),lines=[series2.name],vals=[];return data.each(data.dimensions,function(){for(var argLen=arguments.length,dataIndex=arguments[argLen-1],name=data.getName(dataIndex),i=0;i&lt;argLen-1;i++)vals[i]=arguments[i];lines.push((name?name+"\t":"")+vals.join("\t"))}),lines.join("\n")}).join("\n\n"+BLOCK_SPLITER+"\n\n"))],function(str){return!!str.replace(/[\n\t\s]/g,"")}).join("\n\n"+BLOCK_SPLITER+"\n\n"),meta:result.meta}}(ecModel);if(isFunction(optionToContent)){var htmlOrDom=optionToContent(api.getOption());isString(htmlOrDom)?viewMain.innerHTML=htmlOrDom:isDom(htmlOrDom)&amp;&amp;viewMain.appendChild(htmlOrDom)}else{textarea.readOnly=model.get("readOnly");var style=textarea.style;style.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",style.color=model.get("textColor"),style.borderColor=model.get("textareaBorderColor"),style.backgroundColor=model.get("textareaColor"),textarea.value=result.value,viewMain.appendChild(textarea)}var blockMetaList=result.meta,buttonContainer=document.createElement("div");buttonContainer.style.cssText="position:absolute;bottom:5px;left:0;right:0";var buttonStyle="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",closeButton=document.createElement("div"),refreshButton=document.createElement("div");buttonStyle+=";background-color:"+model.get("buttonColor"),buttonStyle+=";color:"+model.get("buttonTextColor");var self2=this;function close(){container.removeChild(root),self2._dom=null}addEventListener(closeButton,"click",close),addEventListener(refreshButton,"click",function(){if(null==contentToOption&amp;&amp;null!=optionToContent||null!=contentToOption&amp;&amp;null==optionToContent)close();else{var newOption;try{newOption=isFunction(contentToOption)?contentToOption(viewMain,api.getOption()):parseContents(textarea.value,blockMetaList)}catch(e2){throw close(),new Error("Data view format error "+e2)}newOption&amp;&amp;api.dispatchAction({type:"changeDataView",newOption:newOption}),close()}}),closeButton.innerHTML=lang[1],refreshButton.innerHTML=lang[2],refreshButton.style.cssText=closeButton.style.cssText=buttonStyle,!model.get("readOnly")&amp;&amp;buttonContainer.appendChild(refreshButton),buttonContainer.appendChild(closeButton),root.appendChild(header),root.appendChild(viewMain),root.appendChild(buttonContainer),viewMain.style.height=container.clientHeight-80+"px",container.appendChild(root),this._dom=root},DataView2.prototype.remove=function(ecModel,api){this._dom&amp;&amp;api.getDom().removeChild(this._dom)},DataView2.prototype.dispose=function(ecModel,api){this.remove(ecModel,api)},DataView2.getDefaultOption=function(ecModel){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:ecModel.getLocaleModel().get(["toolbox","dataView","title"]),lang:ecModel.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},DataView2}(ToolboxFeature);function tryMergeDataOption(newData,originalData){return map$1(newData,function(newVal,idx){var original=originalData&amp;&amp;originalData[idx];if(isObject$3(original)&amp;&amp;!isArray$1(original)){isObject$3(newVal)&amp;&amp;!isArray$1(newVal)||(newVal={value:newVal});var shouldDeleteName=null!=original.name&amp;&amp;null==newVal.name;return newVal=defaults(newVal,original),shouldDeleteName&amp;&amp;delete newVal.name,newVal}return newVal})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(payload,ecModel){var newSeriesOptList=[];each$f(payload.newOption.series,function(seriesOpt){var seriesModel=ecModel.getSeriesByName(seriesOpt.name)[0];if(seriesModel){var originalData=seriesModel.get("data");newSeriesOptList.push({name:seriesOpt.name,data:tryMergeDataOption(seriesOpt.data,originalData)})}else newSeriesOptList.push(extend({type:"scatter"},seriesOpt))}),ecModel.mergeOption(defaults({series:newSeriesOptList},payload.newOption))});var each$6=each$f,inner$6=makeInner();function getStoreSnapshots(ecModel){var store=inner$6(ecModel);return store.snapshots||(store.snapshots=[{}]),store.snapshots}var RestoreOption=function(_super){function RestoreOption2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(RestoreOption2,_super),RestoreOption2.prototype.onclick=function(ecModel,api){!function clear(ecModel){inner$6(ecModel).snapshots=null}(ecModel),api.dispatchAction({type:"restore",from:this.uid})},RestoreOption2.getDefaultOption=function(ecModel){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:ecModel.getLocaleModel().get(["toolbox","restore","title"])}},RestoreOption2}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function BrushTargetManager2(finder,ecModel,opt){var _this=this;this._targetInfoList=[];var foundCpts=parseFinder(ecModel,finder);each$f(targetInfoBuilders,function(builder,type){(!opt||!opt.include||indexOf(opt.include,type)&gt;=0)&amp;&amp;builder(foundCpts,_this._targetInfoList)})}return BrushTargetManager2.prototype.setOutputRanges=function(areas,ecModel){return this.matchOutputRanges(areas,ecModel,function(area,coordRange,coordSys){if((area.coordRanges||(area.coordRanges=[])).push(coordRange),!area.coordRange){area.coordRange=coordRange;var result=coordConvert[area.brushType](0,coordSys,coordRange);area.__rangeOffset={offset:diffProcessor[area.brushType](result.values,area.range,[1,1]),xyMinMax:result.xyMinMax}}}),areas},BrushTargetManager2.prototype.matchOutputRanges=function(areas,ecModel,cb){each$f(areas,function(area){var targetInfo=this.findTargetInfo(area,ecModel);targetInfo&amp;&amp;!0!==targetInfo&amp;&amp;each$f(targetInfo.coordSyses,function(coordSys){var result=coordConvert[area.brushType](1,coordSys,area.range,!0);cb(area,result.values,coordSys,ecModel)})},this)},BrushTargetManager2.prototype.setInputRanges=function(areas,ecModel){each$f(areas,function(area){var targetInfo=this.findTargetInfo(area,ecModel);if(area.range=area.range||[],targetInfo&amp;&amp;!0!==targetInfo){area.panelId=targetInfo.panelId;var result=coordConvert[area.brushType](0,targetInfo.coordSys,area.coordRange),rangeOffset=area.__rangeOffset;area.range=rangeOffset?diffProcessor[area.brushType](result.values,rangeOffset.offset,function getScales(xyMinMaxCurr,xyMinMaxOrigin){var sizeCurr=getSize(xyMinMaxCurr),sizeOrigin=getSize(xyMinMaxOrigin),scales=[sizeCurr[0]/sizeOrigin[0],sizeCurr[1]/sizeOrigin[1]];return isNaN(scales[0])&amp;&amp;(scales[0]=1),isNaN(scales[1])&amp;&amp;(scales[1]=1),scales}(result.xyMinMax,rangeOffset.xyMinMax)):result.values}},this)},BrushTargetManager2.prototype.makePanelOpts=function(api,getDefaultBrushType){return map$1(this._targetInfoList,function(targetInfo){var rect=targetInfo.getPanelRect();return{panelId:targetInfo.panelId,defaultBrushType:getDefaultBrushType?getDefaultBrushType(targetInfo):null,clipPath:makeRectPanelClipPath(rect),isTargetByCursor:makeRectIsTargetByCursor(rect,api,targetInfo.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(rect)}})},BrushTargetManager2.prototype.controlSeries=function(area,seriesModel,ecModel){var targetInfo=this.findTargetInfo(area,ecModel);return!0===targetInfo||targetInfo&amp;&amp;indexOf(targetInfo.coordSyses,seriesModel.coordinateSystem)&gt;=0},BrushTargetManager2.prototype.findTargetInfo=function(area,ecModel){for(var targetInfoList=this._targetInfoList,foundCpts=parseFinder(ecModel,area),i=0;i&lt;targetInfoList.length;i++){var targetInfo=targetInfoList[i],areaPanelId=area.panelId;if(areaPanelId){if(targetInfo.panelId===areaPanelId)return targetInfo}else for(var j=0;j&lt;targetInfoMatchers.length;j++)if(targetInfoMatchers[j](foundCpts,targetInfo))return targetInfo}return!0},BrushTargetManager2}();function formatMinMax(minMax){return minMax[0]&gt;minMax[1]&amp;&amp;minMax.reverse(),minMax}function parseFinder(ecModel,finder){return parseFinder$1(ecModel,finder,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(foundCpts,targetInfoList){var xAxisModels=foundCpts.xAxisModels,yAxisModels=foundCpts.yAxisModels,gridModels=foundCpts.gridModels,gridModelMap=createHashMap(),xAxesHas={},yAxesHas={};(xAxisModels||yAxisModels||gridModels)&amp;&amp;(each$f(xAxisModels,function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel),xAxesHas[gridModel.id]=!0}),each$f(yAxisModels,function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel),yAxesHas[gridModel.id]=!0}),each$f(gridModels,function(gridModel){gridModelMap.set(gridModel.id,gridModel),xAxesHas[gridModel.id]=!0,yAxesHas[gridModel.id]=!0}),gridModelMap.each(function(gridModel){var grid=gridModel.coordinateSystem,cartesians=[];each$f(grid.getCartesians(),function(cartesian,index){(indexOf(xAxisModels,cartesian.getAxis("x").model)&gt;=0||indexOf(yAxisModels,cartesian.getAxis("y").model)&gt;=0)&amp;&amp;cartesians.push(cartesian)}),targetInfoList.push({panelId:"grid--"+gridModel.id,gridModel:gridModel,coordSysModel:gridModel,coordSys:cartesians[0],coordSyses:cartesians,getPanelRect:panelRectBuilders.grid,xAxisDeclared:xAxesHas[gridModel.id],yAxisDeclared:yAxesHas[gridModel.id]})}))},geo:function(foundCpts,targetInfoList){each$f(foundCpts.geoModels,function(geoModel){var coordSys=geoModel.coordinateSystem;targetInfoList.push({panelId:"geo--"+geoModel.id,geoModel:geoModel,coordSysModel:geoModel,coordSys:coordSys,coordSyses:[coordSys],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(foundCpts,targetInfo){var xAxisModel=foundCpts.xAxisModel,yAxisModel=foundCpts.yAxisModel,gridModel=foundCpts.gridModel;return!gridModel&amp;&amp;xAxisModel&amp;&amp;(gridModel=xAxisModel.axis.grid.model),!gridModel&amp;&amp;yAxisModel&amp;&amp;(gridModel=yAxisModel.axis.grid.model),gridModel&amp;&amp;gridModel===targetInfo.gridModel},function(foundCpts,targetInfo){var geoModel=foundCpts.geoModel;return geoModel&amp;&amp;geoModel===targetInfo.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var coordSys=this.coordSys,rect=coordSys.getBoundingRect().clone();return rect.applyTransform(getTransform$1(coordSys)),rect}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(to,coordSys,rangeOrCoordRange,clamp2){var xminymin=to?coordSys.pointToData([rangeOrCoordRange[0][0],rangeOrCoordRange[1][0]],clamp2):coordSys.dataToPoint([rangeOrCoordRange[0][0],rangeOrCoordRange[1][0]],clamp2),xmaxymax=to?coordSys.pointToData([rangeOrCoordRange[0][1],rangeOrCoordRange[1][1]],clamp2):coordSys.dataToPoint([rangeOrCoordRange[0][1],rangeOrCoordRange[1][1]],clamp2),values=[formatMinMax([xminymin[0],xmaxymax[0]]),formatMinMax([xminymin[1],xmaxymax[1]])];return{values:values,xyMinMax:values}},polygon:function(to,coordSys,rangeOrCoordRange,clamp2){var xyMinMax=[[1/0,-1/0],[1/0,-1/0]];return{values:map$1(rangeOrCoordRange,function(item){var p=to?coordSys.pointToData(item,clamp2):coordSys.dataToPoint(item,clamp2);return xyMinMax[0][0]=Math.min(xyMinMax[0][0],p[0]),xyMinMax[1][0]=Math.min(xyMinMax[1][0],p[1]),xyMinMax[0][1]=Math.max(xyMinMax[0][1],p[0]),xyMinMax[1][1]=Math.max(xyMinMax[1][1],p[1]),p}),xyMinMax:xyMinMax}}};function axisConvert(axisNameIndex,to,coordSys,rangeOrCoordRange){var axis=coordSys.getAxis(["x","y"][axisNameIndex]),values=formatMinMax(map$1([0,1],function(i){return to?axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]),!0):axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]))})),xyMinMax=[];return xyMinMax[axisNameIndex]=values,xyMinMax[1-axisNameIndex]=[NaN,NaN],{values:values,xyMinMax:xyMinMax}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(values,refer,scales){return[[values[0][0]-scales[0]*refer[0][0],values[0][1]-scales[0]*refer[0][1]],[values[1][0]-scales[1]*refer[1][0],values[1][1]-scales[1]*refer[1][1]]]},polygon:function(values,refer,scales){return map$1(values,function(item,idx){return[item[0]-scales[0]*refer[idx][0],item[1]-scales[1]*refer[idx][1]]})}};function axisDiffProcessor(axisNameIndex,values,refer,scales){return[values[0]-scales[axisNameIndex]*refer[0],values[1]-scales[axisNameIndex]*refer[1]]}function getSize(xyMinMax){return xyMinMax?[xyMinMax[0][1]-xyMinMax[0][0],xyMinMax[1][1]-xyMinMax[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=function makeInternalComponentId(idSuffix){return"\0_ec_\0"+idSuffix}("toolbox-dataZoom_"),DataZoomFeature=function(_super){function DataZoomFeature2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(DataZoomFeature2,_super),DataZoomFeature2.prototype.render=function(featureModel,ecModel,api,payload){this._brushController||(this._brushController=new BrushController(api.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),function updateZoomBtnStatus(featureModel,ecModel,view,payload,api){var zoomActive=view._isZoomActive;payload&amp;&amp;"takeGlobalCursor"===payload.type&amp;&amp;(zoomActive="dataZoomSelect"===payload.key&amp;&amp;payload.dataZoomSelectActive);view._isZoomActive=zoomActive,featureModel.setIconStatus("zoom",zoomActive?"emphasis":"normal");var brushTargetManager=new BrushTargetManager(makeAxisFinder(featureModel),ecModel,{include:["grid"]}),panels=brushTargetManager.makePanelOpts(api,function(targetInfo){return targetInfo.xAxisDeclared&amp;&amp;!targetInfo.yAxisDeclared?"lineX":!targetInfo.xAxisDeclared&amp;&amp;targetInfo.yAxisDeclared?"lineY":"rect"});view._brushController.setPanels(panels).enableBrush(!(!zoomActive||!panels.length)&amp;&amp;{brushType:"auto",brushStyle:featureModel.getModel("brushStyle").getItemStyle()})}(featureModel,ecModel,this,payload,api),function updateBackBtnStatus(featureModel,ecModel){featureModel.setIconStatus("back",function count(ecModel){return getStoreSnapshots(ecModel).length}(ecModel)&gt;1?"emphasis":"normal")}(featureModel,ecModel)},DataZoomFeature2.prototype.onclick=function(ecModel,api,type){handlers[type].call(this)},DataZoomFeature2.prototype.remove=function(ecModel,api){this._brushController&amp;&amp;this._brushController.unmount()},DataZoomFeature2.prototype.dispose=function(ecModel,api){this._brushController&amp;&amp;this._brushController.dispose()},DataZoomFeature2.prototype._onBrush=function(eventParam){var areas=eventParam.areas;if(eventParam.isEnd&amp;&amp;areas.length){var snapshot={},ecModel=this.ecModel;this._brushController.updateCovers([]),new BrushTargetManager(makeAxisFinder(this.model),ecModel,{include:["grid"]}).matchOutputRanges(areas,ecModel,function(area,coordRange,coordSys){if("cartesian2d"===coordSys.type){var brushType=area.brushType;"rect"===brushType?(setBatch("x",coordSys,coordRange[0]),setBatch("y",coordSys,coordRange[1])):setBatch({lineX:"x",lineY:"y"}[brushType],coordSys,coordRange)}}),function push(ecModel,newSnapshot){var storedSnapshots=getStoreSnapshots(ecModel);each$6(newSnapshot,function(batchItem,dataZoomId){for(var i=storedSnapshots.length-1;i&gt;=0&amp;&amp;!storedSnapshots[i][dataZoomId];i--);if(i&lt;0){var dataZoomModel=ecModel.queryComponents({mainType:"dataZoom",subType:"select",id:dataZoomId})[0];if(dataZoomModel){var percentRange=dataZoomModel.getPercentRange();storedSnapshots[0][dataZoomId]={dataZoomId:dataZoomId,start:percentRange[0],end:percentRange[1]}}}}),storedSnapshots.push(newSnapshot)}(ecModel,snapshot),this._dispatchZoomAction(snapshot)}function setBatch(dimName,coordSys,minMax){var axis=coordSys.getAxis(dimName),axisModel=axis.model,dataZoomModel=function findDataZoom(dimName,axisModel,ecModel2){var found;return ecModel2.eachComponent({mainType:"dataZoom",subType:"select"},function(dzModel){dzModel.getAxisModel(dimName,axisModel.componentIndex)&amp;&amp;(found=dzModel)}),found}(dimName,axisModel,ecModel),minMaxSpan=dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();null==minMaxSpan.minValueSpan&amp;&amp;null==minMaxSpan.maxValueSpan||(minMax=sliderMove(0,minMax.slice(),axis.scale.getExtent(),0,minMaxSpan.minValueSpan,minMaxSpan.maxValueSpan)),dataZoomModel&amp;&amp;(snapshot[dataZoomModel.id]={dataZoomId:dataZoomModel.id,startValue:minMax[0],endValue:minMax[1]})}},DataZoomFeature2.prototype._dispatchZoomAction=function(snapshot){var batch=[];each$5(snapshot,function(batchItem,dataZoomId){batch.push(clone$4(batchItem))}),batch.length&amp;&amp;this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:batch})},DataZoomFeature2.getDefaultOption=function(ecModel){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:ecModel.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},DataZoomFeature2}(ToolboxFeature),handlers={zoom:function(){var nextActive=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:nextActive})},back:function(){this._dispatchZoomAction(function pop(ecModel){var storedSnapshots=getStoreSnapshots(ecModel),head=storedSnapshots[storedSnapshots.length-1];storedSnapshots.length&gt;1&amp;&amp;storedSnapshots.pop();var snapshot={};return each$6(head,function(batchItem,dataZoomId){for(var i=storedSnapshots.length-1;i&gt;=0;i--)if(batchItem=storedSnapshots[i][dataZoomId]){snapshot[dataZoomId]=batchItem;break}}),snapshot}(this.ecModel))}};function makeAxisFinder(dzFeatureModel){var setting={xAxisIndex:dzFeatureModel.get("xAxisIndex",!0),yAxisIndex:dzFeatureModel.get("yAxisIndex",!0),xAxisId:dzFeatureModel.get("xAxisId",!0),yAxisId:dzFeatureModel.get("yAxisId",!0)};return null==setting.xAxisIndex&amp;&amp;null==setting.xAxisId&amp;&amp;(setting.xAxisIndex="all"),null==setting.yAxisIndex&amp;&amp;null==setting.yAxisId&amp;&amp;(setting.yAxisIndex="all"),setting}!function registerInternalOptionCreator(mainType,creator){assert(null==internalOptionCreatorMap.get(mainType)&amp;&amp;creator),internalOptionCreatorMap.set(mainType,creator)}("dataZoom",function(ecModel){var toolboxModel=ecModel.getComponent("toolbox",0),featureDataZoomPath=["feature","dataZoom"];if(toolboxModel&amp;&amp;null!=toolboxModel.get(featureDataZoomPath)){var dzFeatureModel=toolboxModel.getModel(featureDataZoomPath),dzOptions=[],finderResult=parseFinder$1(ecModel,makeAxisFinder(dzFeatureModel));return each$5(finderResult.xAxisModels,function(axisModel){return buildInternalOptions(axisModel,"xAxis","xAxisIndex")}),each$5(finderResult.yAxisModels,function(axisModel){return buildInternalOptions(axisModel,"yAxis","yAxisIndex")}),dzOptions}function buildInternalOptions(axisModel,axisMainType,axisIndexPropName){var axisIndex=axisModel.componentIndex,newOpt={type:"select",$fromToolbox:!0,filterMode:dzFeatureModel.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+axisMainType+axisIndex};newOpt[axisIndexPropName]=axisIndex,dzOptions.push(newOpt)}});var TooltipModel=function(_super){function TooltipModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TooltipModel2.type,_this}return __extends$1(TooltipModel2,_super),TooltipModel2.type="tooltip",TooltipModel2.dependencies=["axisPointer"],TooltipModel2.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},TooltipModel2}(ComponentModel);function shouldTooltipConfine(tooltipModel){var confineOption=tooltipModel.get("confine");return null!=confineOption?!!confineOption:"richText"===tooltipModel.get("renderMode")}function testStyle(styleProps){if(env.domSupported)for(var style=document.documentElement.style,i=0,len2=styleProps.length;i&lt;len2;i++)if(styleProps[i]in style)return styleProps[i]}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function toCSSVendorPrefix(styleVendor,styleProp){if(!styleVendor)return styleProp;styleProp=toCamelCase(styleProp,!0);var idx=styleVendor.indexOf(styleProp);return(styleVendor=-1===idx?styleProp:"-"+styleVendor.slice(0,idx)+"-"+styleProp).toLowerCase()}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function assembleTransform(x,y,toString){var x0=x.toFixed(0)+"px",y0=y.toFixed(0)+"px";if(!env.transformSupported)return toString?"top:"+y0+";left:"+x0+";":[["top",y0],["left",x0]];var is3d=env.transform3dSupported,translate2="translate"+(is3d?"3d":"")+"("+x0+","+y0+(is3d?",0":"")+")";return toString?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+translate2+";":[["top",0],["left",0],[TRANSFORM_VENDOR,translate2]]}function assembleCssText(tooltipModel,enableTransition,onlyFade){var cssText=[],transitionDuration=tooltipModel.get("transitionDuration"),backgroundColor2=tooltipModel.get("backgroundColor"),shadowBlur=tooltipModel.get("shadowBlur"),shadowColor=tooltipModel.get("shadowColor"),shadowOffsetX=tooltipModel.get("shadowOffsetX"),shadowOffsetY=tooltipModel.get("shadowOffsetY"),textStyleModel=tooltipModel.getModel("textStyle"),padding=getPaddingFromTooltipModel(tooltipModel,"html"),boxShadow=shadowOffsetX+"px "+shadowOffsetY+"px "+shadowBlur+"px "+shadowColor;return cssText.push("box-shadow:"+boxShadow),enableTransition&amp;&amp;transitionDuration&amp;&amp;cssText.push(function assembleTransition(duration,onlyFade){var transitionOption=" "+duration/2+"s cubic-bezier(0.23,1,0.32,1)",transitionText="opacity"+transitionOption+",visibility"+transitionOption;return onlyFade||(transitionOption=" "+duration+"s cubic-bezier(0.23,1,0.32,1)",transitionText+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+transitionOption:",left"+transitionOption+",top"+transitionOption),CSS_TRANSITION_VENDOR+":"+transitionText}(transitionDuration,onlyFade)),backgroundColor2&amp;&amp;cssText.push("background-color:"+backgroundColor2),each$f(["width","color","radius"],function(name){var borderName="border-"+name,camelCase=toCamelCase(borderName),val=tooltipModel.get(camelCase);null!=val&amp;&amp;cssText.push(borderName+":"+val+("color"===name?"":"px"))}),cssText.push(function assembleFont(textStyleModel){var cssText=[],fontSize=textStyleModel.get("fontSize"),color2=textStyleModel.getTextColor();color2&amp;&amp;cssText.push("color:"+color2),cssText.push("font:"+textStyleModel.getFont());var lineHeight=retrieve2(textStyleModel.get("lineHeight"),Math.round(3*fontSize/2));fontSize&amp;&amp;cssText.push("line-height:"+lineHeight+"px");var shadowColor=textStyleModel.get("textShadowColor"),shadowBlur=textStyleModel.get("textShadowBlur")||0,shadowOffsetX=textStyleModel.get("textShadowOffsetX")||0,shadowOffsetY=textStyleModel.get("textShadowOffsetY")||0;return shadowColor&amp;&amp;shadowBlur&amp;&amp;cssText.push("text-shadow:"+shadowOffsetX+"px "+shadowOffsetY+"px "+shadowBlur+"px "+shadowColor),each$f(["decoration","align"],function(name){var val=textStyleModel.get(name);val&amp;&amp;cssText.push("text-"+name+":"+val)}),cssText.join(";")}(textStyleModel)),null!=padding&amp;&amp;cssText.push("padding:"+normalizeCssArray(padding).join("px ")+"px"),cssText.join(";")+";"}function makeStyleCoord$1(out2,zr,container,zrX,zrY){var zrPainter=zr&amp;&amp;zr.painter;if(container){var zrViewportRoot=zrPainter&amp;&amp;zrPainter.getViewportRoot();zrViewportRoot&amp;&amp;function transformLocalCoord(out2,elFrom,elTarget,inX,inY){return transformCoordWithViewport(_calcOut$1,elFrom,inX,inY,!0)&amp;&amp;transformCoordWithViewport(out2,elTarget,_calcOut$1[0],_calcOut$1[1])}(out2,zrViewportRoot,container,zrX,zrY)}else{out2[0]=zrX,out2[1]=zrY;var viewportRootOffset=zrPainter&amp;&amp;zrPainter.getViewportRootOffset();viewportRootOffset&amp;&amp;(out2[0]+=viewportRootOffset.offsetLeft,out2[1]+=viewportRootOffset.offsetTop)}out2[2]=out2[0]/zr.getWidth(),out2[3]=out2[1]/zr.getHeight()}var TooltipHTMLContent=function(){function TooltipHTMLContent2(api,opt){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var el=document.createElement("div");el.domBelongToZr=!0,this.el=el;var zr=this._zr=api.getZr(),appendTo=opt.appendTo,container=appendTo&amp;&amp;(isString(appendTo)?document.querySelector(appendTo):isDom(appendTo)?appendTo:isFunction(appendTo)&amp;&amp;appendTo(api.getDom()));makeStyleCoord$1(this._styleCoord,zr,container,api.getWidth()/2,api.getHeight()/2),(container||api.getDom()).appendChild(el),this._api=api,this._container=container;var self2=this;el.onmouseenter=function(){self2._enterable&amp;&amp;(clearTimeout(self2._hideTimeout),self2._show=!0),self2._inContent=!0},el.onmousemove=function(e2){if(e2=e2||window.event,!self2._enterable){var handler=zr.handler;normalizeEvent(zr.painter.getViewportRoot(),e2,!0),handler.dispatch("mousemove",e2)}},el.onmouseleave=function(){self2._inContent=!1,self2._enterable&amp;&amp;self2._show&amp;&amp;self2.hideLater(self2._hideDelay)}}return TooltipHTMLContent2.prototype.update=function(tooltipModel){if(!this._container){var container=this._api.getDom(),position2=function getComputedStyle(el,style){var stl=el.currentStyle||document.defaultView&amp;&amp;document.defaultView.getComputedStyle(el);return stl?stl[style]:null}(container,"position"),domStyle=container.style;"absolute"!==domStyle.position&amp;&amp;"absolute"!==position2&amp;&amp;(domStyle.position="relative")}var alwaysShowContent=tooltipModel.get("alwaysShowContent");alwaysShowContent&amp;&amp;this._moveIfResized(),this._alwaysShowContent=alwaysShowContent,this.el.className=tooltipModel.get("className")||""},TooltipHTMLContent2.prototype.show=function(tooltipModel,nearPointColor){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var el=this.el,style=el.style,styleCoord=this._styleCoord;el.innerHTML?style.cssText=gCssText+assembleCssText(tooltipModel,!this._firstShow,this._longHide)+assembleTransform(styleCoord[0],styleCoord[1],!0)+"border-color:"+convertToColorString(nearPointColor)+";"+(tooltipModel.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):style.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},TooltipHTMLContent2.prototype.setContent=function(content,markers,tooltipModel,borderColor,arrowPosition){var el=this.el;if(null!=content){var arrow="";if(isString(arrowPosition)&amp;&amp;"item"===tooltipModel.get("trigger")&amp;&amp;!shouldTooltipConfine(tooltipModel)&amp;&amp;(arrow=function assembleArrow(tooltipModel,borderColor,arrowPosition){if(!isString(arrowPosition)||"inside"===arrowPosition)return"";var backgroundColor2=tooltipModel.get("backgroundColor"),borderWidth=tooltipModel.get("borderWidth");borderColor=convertToColorString(borderColor);var rotateDeg,arrowPos=function mirrorPos(pos){return"left"===pos?"right":"right"===pos?"left":"top"===pos?"bottom":"top"}(arrowPosition),arrowSize=Math.max(1.5*Math.round(borderWidth),6),positionStyle="",transformStyle=CSS_TRANSFORM_VENDOR+":";indexOf(["left","right"],arrowPos)&gt;-1?(positionStyle+="top:50%",transformStyle+="translateY(-50%) rotate("+(rotateDeg="left"===arrowPos?-225:-45)+"deg)"):(positionStyle+="left:50%",transformStyle+="translateX(-50%) rotate("+(rotateDeg="top"===arrowPos?225:45)+"deg)");var rotateRadian=rotateDeg*Math.PI/180,arrowWH=arrowSize+borderWidth,rotatedWH=arrowWH*Math.abs(Math.cos(rotateRadian))+arrowWH*Math.abs(Math.sin(rotateRadian)),borderStyle=borderColor+" solid "+borderWidth+"px;";return'&lt;div style="'+["position:absolute;width:"+arrowSize+"px;height:"+arrowSize+"px;z-index:-1;",(positionStyle+=";"+arrowPos+":-"+Math.round(100*((rotatedWH-Math.SQRT2*borderWidth)/2+Math.SQRT2*borderWidth-(rotatedWH-arrowWH)/2))/100+"px")+";"+transformStyle+";","border-bottom:"+borderStyle,"border-right:"+borderStyle,"background-color:"+backgroundColor2+";"].join("")+'"&gt;&lt;/div&gt;'}(tooltipModel,borderColor,arrowPosition)),isString(content))el.innerHTML=content+arrow;else if(content){el.innerHTML="",isArray$1(content)||(content=[content]);for(var i=0;i&lt;content.length;i++)isDom(content[i])&amp;&amp;content[i].parentNode!==el&amp;&amp;el.appendChild(content[i]);if(arrow&amp;&amp;el.childNodes.length){var arrowEl=document.createElement("div");arrowEl.innerHTML=arrow,el.appendChild(arrowEl)}}}else el.innerHTML=""},TooltipHTMLContent2.prototype.setEnterable=function(enterable){this._enterable=enterable},TooltipHTMLContent2.prototype.getSize=function(){var el=this.el;return el?[el.offsetWidth,el.offsetHeight]:[0,0]},TooltipHTMLContent2.prototype.moveTo=function(zrX,zrY){if(this.el){var styleCoord=this._styleCoord;if(makeStyleCoord$1(styleCoord,this._zr,this._container,zrX,zrY),null!=styleCoord[0]&amp;&amp;null!=styleCoord[1]){var style_1=this.el.style;each$f(assembleTransform(styleCoord[0],styleCoord[1]),function(transform2){style_1[transform2[0]]=transform2[1]})}}},TooltipHTMLContent2.prototype._moveIfResized=function(){var ratioX=this._styleCoord[2],ratioY=this._styleCoord[3];this.moveTo(ratioX*this._zr.getWidth(),ratioY*this._zr.getHeight())},TooltipHTMLContent2.prototype.hide=function(){var _this=this,style=this.el.style;style.visibility="hidden",style.opacity="0",env.transform3dSupported&amp;&amp;(style.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return _this._longHide=!0},500)},TooltipHTMLContent2.prototype.hideLater=function(time2){!this._show||this._inContent&amp;&amp;this._enterable||this._alwaysShowContent||(time2?(this._hideDelay=time2,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),time2)):this.hide())},TooltipHTMLContent2.prototype.isShow=function(){return this._show},TooltipHTMLContent2.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var parentNode2=this.el.parentNode;parentNode2&amp;&amp;parentNode2.removeChild(this.el),this.el=this._container=null},TooltipHTMLContent2}(),TooltipRichContent=function(){function TooltipRichContent2(api){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=api.getZr(),makeStyleCoord(this._styleCoord,this._zr,api.getWidth()/2,api.getHeight()/2)}return TooltipRichContent2.prototype.update=function(tooltipModel){var alwaysShowContent=tooltipModel.get("alwaysShowContent");alwaysShowContent&amp;&amp;this._moveIfResized(),this._alwaysShowContent=alwaysShowContent},TooltipRichContent2.prototype.show=function(){this._hideTimeout&amp;&amp;clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},TooltipRichContent2.prototype.setContent=function(content,markupStyleCreator,tooltipModel,borderColor,arrowPosition){var _this=this;isObject$3(content)&amp;&amp;throwError(""),this.el&amp;&amp;this._zr.remove(this.el);var textStyleModel=tooltipModel.getModel("textStyle");this.el=new ZRText({style:{rich:markupStyleCreator.richTextStyles,text:content,lineHeight:22,borderWidth:1,borderColor:borderColor,textShadowColor:textStyleModel.get("textShadowColor"),fill:tooltipModel.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(tooltipModel,"richText"),verticalAlign:"top",align:"left"},z:tooltipModel.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(propName){_this.el.style[propName]=tooltipModel.get(propName)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(propName){_this.el.style[propName]=textStyleModel.get(propName)||0}),this._zr.add(this.el);var self2=this;this.el.on("mouseover",function(){self2._enterable&amp;&amp;(clearTimeout(self2._hideTimeout),self2._show=!0),self2._inContent=!0}),this.el.on("mouseout",function(){self2._enterable&amp;&amp;self2._show&amp;&amp;self2.hideLater(self2._hideDelay),self2._inContent=!1})},TooltipRichContent2.prototype.setEnterable=function(enterable){this._enterable=enterable},TooltipRichContent2.prototype.getSize=function(){var el=this.el,bounding=this.el.getBoundingRect(),shadowOuterSize=calcShadowOuterSize(el.style);return[bounding.width+shadowOuterSize.left+shadowOuterSize.right,bounding.height+shadowOuterSize.top+shadowOuterSize.bottom]},TooltipRichContent2.prototype.moveTo=function(x,y){var el=this.el;if(el){var styleCoord=this._styleCoord;makeStyleCoord(styleCoord,this._zr,x,y),x=styleCoord[0],y=styleCoord[1];var style=el.style,borderWidth=mathMaxWith0(style.borderWidth||0),shadowOuterSize=calcShadowOuterSize(style);el.x=x+borderWidth+shadowOuterSize.left,el.y=y+borderWidth+shadowOuterSize.top,el.markRedraw()}},TooltipRichContent2.prototype._moveIfResized=function(){var ratioX=this._styleCoord[2],ratioY=this._styleCoord[3];this.moveTo(ratioX*this._zr.getWidth(),ratioY*this._zr.getHeight())},TooltipRichContent2.prototype.hide=function(){this.el&amp;&amp;this.el.hide(),this._show=!1},TooltipRichContent2.prototype.hideLater=function(time2){!this._show||this._inContent&amp;&amp;this._enterable||this._alwaysShowContent||(time2?(this._hideDelay=time2,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),time2)):this.hide())},TooltipRichContent2.prototype.isShow=function(){return this._show},TooltipRichContent2.prototype.dispose=function(){this._zr.remove(this.el)},TooltipRichContent2}();function mathMaxWith0(val){return Math.max(0,val)}function calcShadowOuterSize(style){var shadowBlur=mathMaxWith0(style.shadowBlur||0),shadowOffsetX=mathMaxWith0(style.shadowOffsetX||0),shadowOffsetY=mathMaxWith0(style.shadowOffsetY||0);return{left:mathMaxWith0(shadowBlur-shadowOffsetX),right:mathMaxWith0(shadowBlur+shadowOffsetX),top:mathMaxWith0(shadowBlur-shadowOffsetY),bottom:mathMaxWith0(shadowBlur+shadowOffsetY)}}function makeStyleCoord(out2,zr,zrX,zrY){out2[0]=zrX,out2[1]=zrY,out2[2]=out2[0]/zr.getWidth(),out2[3]=out2[1]/zr.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(_super){function TooltipView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TooltipView2.type,_this}return __extends$1(TooltipView2,_super),TooltipView2.prototype.init=function(ecModel,api){if(!env.node&amp;&amp;api.getDom()){var tooltipModel=ecModel.getComponent("tooltip"),renderMode=this._renderMode=function getTooltipRenderMode(renderModeOption){return"auto"===renderModeOption?env.domSupported?"html":"richText":renderModeOption||"html"}(tooltipModel.get("renderMode"));this._tooltipContent="richText"===renderMode?new TooltipRichContent(api):new TooltipHTMLContent(api,{appendTo:tooltipModel.get("appendToBody",!0)?"body":tooltipModel.get("appendTo",!0)})}},TooltipView2.prototype.render=function(tooltipModel,ecModel,api){if(!env.node&amp;&amp;api.getDom()){this.group.removeAll(),this._tooltipModel=tooltipModel,this._ecModel=ecModel,this._api=api;var tooltipContent=this._tooltipContent;tooltipContent.update(tooltipModel),tooltipContent.setEnterable(tooltipModel.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&amp;&amp;tooltipModel.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},TooltipView2.prototype._initGlobalListener=function(){var triggerOn=this._tooltipModel.get("triggerOn");register("itemTooltip",this._api,bind$1(function(currTrigger,e2,dispatchAction2){"none"!==triggerOn&amp;&amp;(triggerOn.indexOf(currTrigger)&gt;=0?this._tryShow(e2,dispatchAction2):"leave"===currTrigger&amp;&amp;this._hide(dispatchAction2))},this))},TooltipView2.prototype._keepShow=function(){var tooltipModel=this._tooltipModel,ecModel=this._ecModel,api=this._api,triggerOn=tooltipModel.get("triggerOn");if(null!=this._lastX&amp;&amp;null!=this._lastY&amp;&amp;"none"!==triggerOn&amp;&amp;"click"!==triggerOn){var self_1=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!api.isDisposed()&amp;&amp;self_1.manuallyShowTip(tooltipModel,ecModel,api,{x:self_1._lastX,y:self_1._lastY,dataByCoordSys:self_1._lastDataByCoordSys})})}},TooltipView2.prototype.manuallyShowTip=function(tooltipModel,ecModel,api,payload){if(payload.from!==this.uid&amp;&amp;!env.node&amp;&amp;api.getDom()){var dispatchAction2=makeDispatchAction(payload,api);this._ticket="";var dataByCoordSys=payload.dataByCoordSys,cmptRef=function findComponentReference(payload,ecModel,api){var queryOptionMap=preParseFinder(payload).queryOptionMap,componentMainType=queryOptionMap.keys()[0];if(!componentMainType||"series"===componentMainType)return;var queryResult=queryReferringComponents(ecModel,componentMainType,queryOptionMap.get(componentMainType),{useDefault:!1,enableAll:!1,enableNone:!1}),model=queryResult.models[0];if(!model)return;var el,view=api.getViewOfComponentModel(model);if(view.group.traverse(function(subEl){var tooltipConfig=getECData(subEl).tooltipConfig;if(tooltipConfig&amp;&amp;tooltipConfig.name===payload.name)return el=subEl,!0}),el)return{componentMainType:componentMainType,componentIndex:model.componentIndex,el:el}}(payload,ecModel,api);if(cmptRef){var rect=cmptRef.el.getBoundingRect().clone();rect.applyTransform(cmptRef.el.transform),this._tryShow({offsetX:rect.x+rect.width/2,offsetY:rect.y+rect.height/2,target:cmptRef.el,position:payload.position,positionDefault:"bottom"},dispatchAction2)}else if(payload.tooltip&amp;&amp;null!=payload.x&amp;&amp;null!=payload.y){var el=proxyRect;el.x=payload.x,el.y=payload.y,el.update(),getECData(el).tooltipConfig={name:null,option:payload.tooltip},this._tryShow({offsetX:payload.x,offsetY:payload.y,target:el},dispatchAction2)}else if(dataByCoordSys)this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,dataByCoordSys:dataByCoordSys,tooltipOption:payload.tooltipOption},dispatchAction2);else if(null!=payload.seriesIndex){if(this._manuallyAxisShowTip(tooltipModel,ecModel,api,payload))return;var pointInfo=findPointFromSeries(payload,ecModel),cx=pointInfo.point[0],cy=pointInfo.point[1];null!=cx&amp;&amp;null!=cy&amp;&amp;this._tryShow({offsetX:cx,offsetY:cy,target:pointInfo.el,position:payload.position,positionDefault:"bottom"},dispatchAction2)}else null!=payload.x&amp;&amp;null!=payload.y&amp;&amp;(api.dispatchAction({type:"updateAxisPointer",x:payload.x,y:payload.y}),this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,target:api.getZr().findHover(payload.x,payload.y).target},dispatchAction2))}},TooltipView2.prototype.manuallyHideTip=function(tooltipModel,ecModel,api,payload){var tooltipContent=this._tooltipContent;this._tooltipModel&amp;&amp;tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,payload.from!==this.uid&amp;&amp;this._hide(makeDispatchAction(payload,api))},TooltipView2.prototype._manuallyAxisShowTip=function(tooltipModel,ecModel,api,payload){var seriesIndex=payload.seriesIndex,dataIndex=payload.dataIndex,coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(null!=seriesIndex&amp;&amp;null!=dataIndex&amp;&amp;null!=coordSysAxesInfo){var seriesModel=ecModel.getSeriesByIndex(seriesIndex);if(seriesModel)if("axis"===buildTooltipModel([seriesModel.getData().getItemModel(dataIndex),seriesModel,(seriesModel.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return api.dispatchAction({type:"updateAxisPointer",seriesIndex:seriesIndex,dataIndex:dataIndex,position:payload.position}),!0}},TooltipView2.prototype._tryShow=function(e2,dispatchAction2){var el=e2.target;if(this._tooltipModel){this._lastX=e2.offsetX,this._lastY=e2.offsetY;var dataByCoordSys=e2.dataByCoordSys;if(dataByCoordSys&amp;&amp;dataByCoordSys.length)this._showAxisTooltip(dataByCoordSys,e2);else if(el){var seriesDispatcher_1,cmptDispatcher_1;if("legend"===getECData(el).ssrType)return;this._lastDataByCoordSys=null,findEventDispatcher(el,function(target){return null!=getECData(target).dataIndex?(seriesDispatcher_1=target,!0):null!=getECData(target).tooltipConfig?(cmptDispatcher_1=target,!0):void 0},!0),seriesDispatcher_1?this._showSeriesItemTooltip(e2,seriesDispatcher_1,dispatchAction2):cmptDispatcher_1?this._showComponentItemTooltip(e2,cmptDispatcher_1,dispatchAction2):this._hide(dispatchAction2)}else this._lastDataByCoordSys=null,this._hide(dispatchAction2)}},TooltipView2.prototype._showOrMove=function(tooltipModel,cb){var delay=tooltipModel.get("showDelay");cb=bind$1(cb,this),clearTimeout(this._showTimout),delay&gt;0?this._showTimout=setTimeout(cb,delay):cb()},TooltipView2.prototype._showAxisTooltip=function(dataByCoordSys,e2){var ecModel=this._ecModel,globalTooltipModel=this._tooltipModel,point=[e2.offsetX,e2.offsetY],singleTooltipModel=buildTooltipModel([e2.tooltipOption],globalTooltipModel),renderMode=this._renderMode,cbParamsList=[],articleMarkup=createTooltipMarkup("section",{blocks:[],noHeader:!0}),markupTextArrLegacy=[],markupStyleCreator=new TooltipMarkupStyleCreator;each$f(dataByCoordSys,function(itemCoordSys){each$f(itemCoordSys.dataByAxis,function(axisItem){var axisModel=ecModel.getComponent(axisItem.axisDim+"Axis",axisItem.axisIndex),axisValue=axisItem.value;if(axisModel&amp;&amp;null!=axisValue){var axisValueLabel=getValueLabel(axisValue,axisModel.axis,ecModel,axisItem.seriesDataIndices,axisItem.valueLabelOpt),axisSectionMarkup=createTooltipMarkup("section",{header:axisValueLabel,noHeader:!trim$1(axisValueLabel),sortBlocks:!0,blocks:[]});articleMarkup.blocks.push(axisSectionMarkup),each$f(axisItem.seriesDataIndices,function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex),dataIndex=idxItem.dataIndexInside,cbParams=series.getDataParams(dataIndex);if(!(cbParams.dataIndex&lt;0)){cbParams.axisDim=axisItem.axisDim,cbParams.axisIndex=axisItem.axisIndex,cbParams.axisType=axisItem.axisType,cbParams.axisId=axisItem.axisId,cbParams.axisValue=getAxisRawValue(axisModel.axis,{value:axisValue}),cbParams.axisValueLabel=axisValueLabel,cbParams.marker=markupStyleCreator.makeTooltipMarker("item",convertToColorString(cbParams.color),renderMode);var seriesTooltipResult=normalizeTooltipFormatResult(series.formatTooltip(dataIndex,!0,null)),frag=seriesTooltipResult.frag;if(frag){var valueFormatter=buildTooltipModel([series],globalTooltipModel).get("valueFormatter");axisSectionMarkup.blocks.push(valueFormatter?extend({valueFormatter:valueFormatter},frag):frag)}seriesTooltipResult.text&amp;&amp;markupTextArrLegacy.push(seriesTooltipResult.text),cbParamsList.push(cbParams)}})}})}),articleMarkup.blocks.reverse(),markupTextArrLegacy.reverse();var positionExpr=e2.position,orderMode=singleTooltipModel.get("order"),builtMarkupText=buildTooltipMarkup(articleMarkup,markupStyleCreator,renderMode,orderMode,ecModel.get("useUTC"),singleTooltipModel.get("textStyle"));builtMarkupText&amp;&amp;markupTextArrLegacy.unshift(builtMarkupText);var blockBreak="richText"===renderMode?"\n\n":"&lt;br/&gt;",allMarkupText=markupTextArrLegacy.join(blockBreak);this._showOrMove(singleTooltipModel,function(){this._updateContentNotChangedOnAxis(dataByCoordSys,cbParamsList)?this._updatePosition(singleTooltipModel,positionExpr,point[0],point[1],this._tooltipContent,cbParamsList):this._showTooltipContent(singleTooltipModel,allMarkupText,cbParamsList,Math.random()+"",point[0],point[1],positionExpr,null,markupStyleCreator)})},TooltipView2.prototype._showSeriesItemTooltip=function(e2,dispatcher,dispatchAction2){var ecModel=this._ecModel,ecData=getECData(dispatcher),seriesIndex=ecData.seriesIndex,seriesModel=ecModel.getSeriesByIndex(seriesIndex),dataModel=ecData.dataModel||seriesModel,dataIndex=ecData.dataIndex,dataType=ecData.dataType,data=dataModel.getData(dataType),renderMode=this._renderMode,positionDefault=e2.positionDefault,tooltipModel=buildTooltipModel([data.getItemModel(dataIndex),dataModel,seriesModel&amp;&amp;(seriesModel.coordinateSystem||{}).model],this._tooltipModel,positionDefault?{position:positionDefault}:null),tooltipTrigger=tooltipModel.get("trigger");if(null==tooltipTrigger||"item"===tooltipTrigger){var params=dataModel.getDataParams(dataIndex,dataType),markupStyleCreator=new TooltipMarkupStyleCreator;params.marker=markupStyleCreator.makeTooltipMarker("item",convertToColorString(params.color),renderMode);var seriesTooltipResult=normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex,!1,dataType)),orderMode=tooltipModel.get("order"),valueFormatter=tooltipModel.get("valueFormatter"),frag=seriesTooltipResult.frag,markupText=frag?buildTooltipMarkup(valueFormatter?extend({valueFormatter:valueFormatter},frag):frag,markupStyleCreator,renderMode,orderMode,ecModel.get("useUTC"),tooltipModel.get("textStyle")):seriesTooltipResult.text,asyncTicket="item_"+dataModel.name+"_"+dataIndex;this._showOrMove(tooltipModel,function(){this._showTooltipContent(tooltipModel,markupText,params,asyncTicket,e2.offsetX,e2.offsetY,e2.position,e2.target,markupStyleCreator)}),dispatchAction2({type:"showTip",dataIndexInside:dataIndex,dataIndex:data.getRawIndex(dataIndex),seriesIndex:seriesIndex,from:this.uid})}},TooltipView2.prototype._showComponentItemTooltip=function(e2,el,dispatchAction2){var isHTMLRenderMode="html"===this._renderMode,ecData=getECData(el),tooltipOpt=ecData.tooltipConfig.option||{},encodeHTMLContent=tooltipOpt.encodeHTMLContent;if(isString(tooltipOpt)){tooltipOpt={content:tooltipOpt,formatter:tooltipOpt},encodeHTMLContent=!0}encodeHTMLContent&amp;&amp;isHTMLRenderMode&amp;&amp;tooltipOpt.content&amp;&amp;((tooltipOpt=clone$4(tooltipOpt)).content=encodeHTML(tooltipOpt.content));var tooltipModelCascade=[tooltipOpt],cmpt=this._ecModel.getComponent(ecData.componentMainType,ecData.componentIndex);cmpt&amp;&amp;tooltipModelCascade.push(cmpt),tooltipModelCascade.push({formatter:tooltipOpt.content});var positionDefault=e2.positionDefault,subTooltipModel=buildTooltipModel(tooltipModelCascade,this._tooltipModel,positionDefault?{position:positionDefault}:null),defaultHtml=subTooltipModel.get("content"),asyncTicket=Math.random()+"",markupStyleCreator=new TooltipMarkupStyleCreator;this._showOrMove(subTooltipModel,function(){var formatterParams=clone$4(subTooltipModel.get("formatterParams")||{});this._showTooltipContent(subTooltipModel,defaultHtml,formatterParams,asyncTicket,e2.offsetX,e2.offsetY,e2.position,el,markupStyleCreator)}),dispatchAction2({type:"showTip",from:this.uid})},TooltipView2.prototype._showTooltipContent=function(tooltipModel,defaultHtml,params,asyncTicket,x,y,positionExpr,el,markupStyleCreator){if(this._ticket="",tooltipModel.get("showContent")&amp;&amp;tooltipModel.get("show")){var tooltipContent=this._tooltipContent;tooltipContent.setEnterable(tooltipModel.get("enterable"));var formatter=tooltipModel.get("formatter");positionExpr=positionExpr||tooltipModel.get("position");var html=defaultHtml,nearPointColor=this._getNearestPoint([x,y],params,tooltipModel.get("trigger"),tooltipModel.get("borderColor")).color;if(formatter)if(isString(formatter)){var useUTC=tooltipModel.ecModel.get("useUTC"),params0=isArray$1(params)?params[0]:params;html=formatter,params0&amp;&amp;params0.axisType&amp;&amp;params0.axisType.indexOf("time")&gt;=0&amp;&amp;(html=format$1(params0.axisValue,html,useUTC)),html=formatTpl(html,params,!0)}else if(isFunction(formatter)){var callback=bind$1(function(cbTicket,html2){cbTicket===this._ticket&amp;&amp;(tooltipContent.setContent(html2,markupStyleCreator,tooltipModel,nearPointColor,positionExpr),this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el))},this);this._ticket=asyncTicket,html=formatter(params,asyncTicket,callback)}else html=formatter;tooltipContent.setContent(html,markupStyleCreator,tooltipModel,nearPointColor,positionExpr),tooltipContent.show(tooltipModel,nearPointColor),this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el)}},TooltipView2.prototype._getNearestPoint=function(point,tooltipDataParams,trigger2,borderColor){return"axis"===trigger2||isArray$1(tooltipDataParams)?{color:borderColor||("html"===this._renderMode?"#fff":"none")}:isArray$1(tooltipDataParams)?void 0:{color:borderColor||tooltipDataParams.color||tooltipDataParams.borderColor}},TooltipView2.prototype._updatePosition=function(tooltipModel,positionExpr,x,y,content,params,el){var viewWidth=this._api.getWidth(),viewHeight=this._api.getHeight();positionExpr=positionExpr||tooltipModel.get("position");var contentSize=content.getSize(),align=tooltipModel.get("align"),vAlign=tooltipModel.get("verticalAlign"),rect=el&amp;&amp;el.getBoundingRect().clone();if(el&amp;&amp;rect.applyTransform(el.transform),isFunction(positionExpr)&amp;&amp;(positionExpr=positionExpr([x,y],params,content.el,rect,{viewSize:[viewWidth,viewHeight],contentSize:contentSize.slice()})),isArray$1(positionExpr))x=parsePercent(positionExpr[0],viewWidth),y=parsePercent(positionExpr[1],viewHeight);else if(isObject$3(positionExpr)){var boxLayoutPosition=positionExpr;boxLayoutPosition.width=contentSize[0],boxLayoutPosition.height=contentSize[1];var layoutRect=getLayoutRect(boxLayoutPosition,{width:viewWidth,height:viewHeight});x=layoutRect.x,y=layoutRect.y,align=null,vAlign=null}else if(isString(positionExpr)&amp;&amp;el){var pos=function calcTooltipPosition(position2,rect,contentSize,borderWidth){var domWidth=contentSize[0],domHeight=contentSize[1],offset=Math.ceil(Math.SQRT2*borderWidth)+8,x=0,y=0,rectWidth=rect.width,rectHeight=rect.height;switch(position2){case"inside":x=rect.x+rectWidth/2-domWidth/2,y=rect.y+rectHeight/2-domHeight/2;break;case"top":x=rect.x+rectWidth/2-domWidth/2,y=rect.y-domHeight-offset;break;case"bottom":x=rect.x+rectWidth/2-domWidth/2,y=rect.y+rectHeight+offset;break;case"left":x=rect.x-domWidth-offset,y=rect.y+rectHeight/2-domHeight/2;break;case"right":x=rect.x+rectWidth+offset,y=rect.y+rectHeight/2-domHeight/2}return[x,y]}(positionExpr,rect,contentSize,tooltipModel.get("borderWidth"));x=pos[0],y=pos[1]}else{pos=function refixTooltipPosition(x,y,content,viewWidth,viewHeight,gapH,gapV){var size=content.getSize(),width=size[0],height=size[1];null!=gapH&amp;&amp;(x+width+gapH+2&gt;viewWidth?x-=width+gapH:x+=gapH);null!=gapV&amp;&amp;(y+height+gapV&gt;viewHeight?y-=height+gapV:y+=gapV);return[x,y]}(x,y,content,viewWidth,viewHeight,align?null:20,vAlign?null:20);x=pos[0],y=pos[1]}if(align&amp;&amp;(x-=isCenterAlign(align)?contentSize[0]/2:"right"===align?contentSize[0]:0),vAlign&amp;&amp;(y-=isCenterAlign(vAlign)?contentSize[1]/2:"bottom"===vAlign?contentSize[1]:0),shouldTooltipConfine(tooltipModel)){pos=function confineTooltipPosition(x,y,content,viewWidth,viewHeight){var size=content.getSize(),width=size[0],height=size[1];return x=Math.min(x+width,viewWidth)-width,y=Math.min(y+height,viewHeight)-height,x=Math.max(x,0),y=Math.max(y,0),[x,y]}(x,y,content,viewWidth,viewHeight);x=pos[0],y=pos[1]}content.moveTo(x,y)},TooltipView2.prototype._updateContentNotChangedOnAxis=function(dataByCoordSys,cbParamsList){var lastCoordSys=this._lastDataByCoordSys,lastCbParamsList=this._cbParamsList,contentNotChanged=!!lastCoordSys&amp;&amp;lastCoordSys.length===dataByCoordSys.length;return contentNotChanged&amp;&amp;each$f(lastCoordSys,function(lastItemCoordSys,indexCoordSys){var lastDataByAxis=lastItemCoordSys.dataByAxis||[],thisDataByAxis=(dataByCoordSys[indexCoordSys]||{}).dataByAxis||[];(contentNotChanged=contentNotChanged&amp;&amp;lastDataByAxis.length===thisDataByAxis.length)&amp;&amp;each$f(lastDataByAxis,function(lastItem,indexAxis){var thisItem=thisDataByAxis[indexAxis]||{},lastIndices=lastItem.seriesDataIndices||[],newIndices=thisItem.seriesDataIndices||[];(contentNotChanged=contentNotChanged&amp;&amp;lastItem.value===thisItem.value&amp;&amp;lastItem.axisType===thisItem.axisType&amp;&amp;lastItem.axisId===thisItem.axisId&amp;&amp;lastIndices.length===newIndices.length)&amp;&amp;each$f(lastIndices,function(lastIdxItem,j){var newIdxItem=newIndices[j];contentNotChanged=contentNotChanged&amp;&amp;lastIdxItem.seriesIndex===newIdxItem.seriesIndex&amp;&amp;lastIdxItem.dataIndex===newIdxItem.dataIndex}),lastCbParamsList&amp;&amp;each$f(lastItem.seriesDataIndices,function(idxItem){var seriesIdx=idxItem.seriesIndex,cbParams=cbParamsList[seriesIdx],lastCbParams=lastCbParamsList[seriesIdx];cbParams&amp;&amp;lastCbParams&amp;&amp;lastCbParams.data!==cbParams.data&amp;&amp;(contentNotChanged=!1)})})}),this._lastDataByCoordSys=dataByCoordSys,this._cbParamsList=cbParamsList,!!contentNotChanged},TooltipView2.prototype._hide=function(dispatchAction2){this._lastDataByCoordSys=null,dispatchAction2({type:"hideTip",from:this.uid})},TooltipView2.prototype.dispose=function(ecModel,api){!env.node&amp;&amp;api.getDom()&amp;&amp;(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",api))},TooltipView2.type="tooltip",TooltipView2}(ComponentView);function buildTooltipModel(modelCascade,globalTooltipModel,defaultTooltipOption){var resultModel,ecModel=globalTooltipModel.ecModel;defaultTooltipOption?(resultModel=new Model(defaultTooltipOption,ecModel,ecModel),resultModel=new Model(globalTooltipModel.option,resultModel,ecModel)):resultModel=globalTooltipModel;for(var i=modelCascade.length-1;i&gt;=0;i--){var tooltipOpt=modelCascade[i];tooltipOpt&amp;&amp;(tooltipOpt instanceof Model&amp;&amp;(tooltipOpt=tooltipOpt.get("tooltip",!0)),isString(tooltipOpt)&amp;&amp;(tooltipOpt={formatter:tooltipOpt}),tooltipOpt&amp;&amp;(resultModel=new Model(tooltipOpt,resultModel,ecModel)))}return resultModel}function makeDispatchAction(payload,api){return payload.dispatchAction||bind$1(api.dispatchAction,api)}function isCenterAlign(align){return"center"===align||"middle"===align}function install$i(registers){use(install$q),registers.registerComponentModel(TooltipModel),registers.registerComponentView(TooltipView),registers.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),registers.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(option,isNew){var brushComponents=normalizeToArray(option?option.brush:[]);if(brushComponents.length){var brushComponentSpecifiedBtns=[];each$f(brushComponents,function(brushOpt){var tbs=brushOpt.hasOwnProperty("toolbox")?brushOpt.toolbox:[];tbs instanceof Array&amp;&amp;(brushComponentSpecifiedBtns=brushComponentSpecifiedBtns.concat(tbs))});var toolbox=option&amp;&amp;option.toolbox;isArray$1(toolbox)&amp;&amp;(toolbox=toolbox[0]),toolbox||(toolbox={feature:{}},option.toolbox=[toolbox]);var toolboxFeature=toolbox.feature||(toolbox.feature={}),toolboxBrush=toolboxFeature.brush||(toolboxFeature.brush={}),brushTypes=toolboxBrush.type||(toolboxBrush.type=[]);brushTypes.push.apply(brushTypes,brushComponentSpecifiedBtns),function removeDuplicate(arr){var map2={};each$f(arr,function(val){map2[val]=1}),arr.length=0,each$f(map2,function(flag,val){arr.push(val)})}(brushTypes),isNew&amp;&amp;!brushTypes.length&amp;&amp;brushTypes.push.apply(brushTypes,DEFAULT_TOOLBOX_BTNS)}}var each$4=each$f;function hasKeys(obj){if(obj)for(var name_1 in obj)if(obj.hasOwnProperty(name_1))return!0}function createVisualMappings(option,stateList,supplementVisualOption){var visualMappings={};return each$4(stateList,function(state){var mappings=visualMappings[state]=function createMappings(){var Creater=function(){};return Creater.prototype.__hidden=Creater.prototype,new Creater}();each$4(option[state],function(visualData,visualType){if(VisualMapping.isValidType(visualType)){var mappingOption={type:visualType,visual:visualData};supplementVisualOption&amp;&amp;supplementVisualOption(mappingOption,state),mappings[visualType]=new VisualMapping(mappingOption),"opacity"===visualType&amp;&amp;((mappingOption=clone$4(mappingOption)).type="colorAlpha",mappings.__hidden.__alphaForOpacity=new VisualMapping(mappingOption))}})}),visualMappings}function replaceVisualOption(thisOption,newOption,keys2){var has2;each$f(keys2,function(key){newOption.hasOwnProperty(key)&amp;&amp;hasKeys(newOption[key])&amp;&amp;(has2=!0)}),has2&amp;&amp;each$f(keys2,function(key){newOption.hasOwnProperty(key)&amp;&amp;hasKeys(newOption[key])?thisOption[key]=clone$4(newOption[key]):delete thisOption[key]})}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(itemLayout,selectors,area){return itemLayout&amp;&amp;area.boundingRect.contain(itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){return itemLayout&amp;&amp;area.boundingRect.intersect(itemLayout)}},polygon:{point:function(itemLayout,selectors,area){return itemLayout&amp;&amp;area.boundingRect.contain(itemLayout[0],itemLayout[1])&amp;&amp;contain(area.range,itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){var points2=area.range;if(!itemLayout||points2.length&lt;=1)return!1;var x=itemLayout.x,y=itemLayout.y,width=itemLayout.width,height=itemLayout.height,p=points2[0];return!!(contain(points2,x,y)||contain(points2,x+width,y)||contain(points2,x,y+height)||contain(points2,x+width,y+height)||BoundingRect.create(itemLayout).contain(p[0],p[1])||linePolygonIntersect(x,y,x+width,y,points2)||linePolygonIntersect(x,y,x,y+height,points2)||linePolygonIntersect(x+width,y,x+width,y+height,points2)||linePolygonIntersect(x,y+height,x+width,y+height,points2))||void 0}}};function getLineSelectors(xyIndex){var xy=["x","y"],wh=["width","height"];return{point:function(itemLayout,selectors,area){if(itemLayout){var range=area.range;return inLineRange(itemLayout[xyIndex],range)}},rect:function(itemLayout,selectors,area){if(itemLayout){var range=area.range,layoutRange=[itemLayout[xy[xyIndex]],itemLayout[xy[xyIndex]]+itemLayout[wh[xyIndex]]];return layoutRange[1]&lt;layoutRange[0]&amp;&amp;layoutRange.reverse(),inLineRange(layoutRange[0],range)||inLineRange(layoutRange[1],range)||inLineRange(range[0],layoutRange)||inLineRange(range[1],layoutRange)}}}}function inLineRange(p,range){return range[0]&lt;=p&amp;&amp;p&lt;=range[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(ecModel){ecModel.eachComponent({mainType:"brush"},function(brushModel){(brushModel.brushTargetManager=new BrushTargetManager(brushModel.option,ecModel)).setInputRanges(brushModel.areas,ecModel)})}function brushVisual(ecModel,api,payload){var throttleType,throttleDelay,brushSelected=[];ecModel.eachComponent({mainType:"brush"},function(brushModel){payload&amp;&amp;"takeGlobalCursor"===payload.type&amp;&amp;brushModel.setBrushOption("brush"===payload.key?payload.brushOption:{brushType:!1})}),layoutCovers(ecModel),ecModel.eachComponent({mainType:"brush"},function(brushModel,brushIndex){var thisBrushSelected={brushId:brushModel.id,brushIndex:brushIndex,brushName:brushModel.name,areas:clone$4(brushModel.areas),selected:[]};brushSelected.push(thisBrushSelected);var brushOption=brushModel.option,brushLink=brushOption.brushLink,linkedSeriesMap=[],selectedDataIndexForLink=[],rangeInfoBySeries=[],hasBrushExists=!1;brushIndex||(throttleType=brushOption.throttleType,throttleDelay=brushOption.throttleDelay);var areas=map$1(brushModel.areas,function(area){var builder=boundingRectBuilders[area.brushType],selectableArea=defaults({boundingRect:builder?builder(area):void 0},area);return selectableArea.selectors=function makeBrushCommonSelectorForSeries(area){var brushType=area.brushType,selectors={point:function(itemLayout){return selector[brushType].point(itemLayout,selectors,area)},rect:function(itemLayout){return selector[brushType].rect(itemLayout,selectors,area)}};return selectors}(selectableArea),selectableArea}),visualMappings=createVisualMappings(brushModel.option,STATE_LIST,function(mappingOption){mappingOption.mappingMethod="fixed"});function linkOthers(seriesIndex){return"all"===brushLink||!!linkedSeriesMap[seriesIndex]}function brushed(rangeInfoList){return!!rangeInfoList.length}isArray$1(brushLink)&amp;&amp;each$f(brushLink,function(seriesIndex){linkedSeriesMap[seriesIndex]=1}),ecModel.eachSeries(function(seriesModel,seriesIndex){var rangeInfoList=rangeInfoBySeries[seriesIndex]=[];"parallel"===seriesModel.subType?function stepAParallel(seriesModel,seriesIndex){var coordSys=seriesModel.coordinateSystem;hasBrushExists=hasBrushExists||coordSys.hasAxisBrushed(),linkOthers(seriesIndex)&amp;&amp;coordSys.eachActiveState(seriesModel.getData(),function(activeState,dataIndex){"active"===activeState&amp;&amp;(selectedDataIndexForLink[dataIndex]=1)})}(seriesModel,seriesIndex):function stepAOthers(seriesModel,seriesIndex,rangeInfoList){if(!seriesModel.brushSelector||function brushModelNotControll(brushModel,seriesIndex){var seriesIndices=brushModel.option.seriesIndex;return null!=seriesIndices&amp;&amp;"all"!==seriesIndices&amp;&amp;(isArray$1(seriesIndices)?indexOf(seriesIndices,seriesIndex)&lt;0:seriesIndex!==seriesIndices)}(brushModel,seriesIndex))return;if(each$f(areas,function(area){brushModel.brushTargetManager.controlSeries(area,seriesModel,ecModel)&amp;&amp;rangeInfoList.push(area),hasBrushExists=hasBrushExists||brushed(rangeInfoList)}),linkOthers(seriesIndex)&amp;&amp;brushed(rangeInfoList)){var data_1=seriesModel.getData();data_1.each(function(dataIndex){checkInRange(seriesModel,rangeInfoList,data_1,dataIndex)&amp;&amp;(selectedDataIndexForLink[dataIndex]=1)})}}(seriesModel,seriesIndex,rangeInfoList)}),ecModel.eachSeries(function(seriesModel,seriesIndex){var seriesBrushSelected={seriesId:seriesModel.id,seriesIndex:seriesIndex,seriesName:seriesModel.name,dataIndex:[]};thisBrushSelected.selected.push(seriesBrushSelected);var rangeInfoList=rangeInfoBySeries[seriesIndex],data=seriesModel.getData(),getValueState=linkOthers(seriesIndex)?function(dataIndex){return selectedDataIndexForLink[dataIndex]?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"}:function(dataIndex){return checkInRange(seriesModel,rangeInfoList,data,dataIndex)?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"};(linkOthers(seriesIndex)?hasBrushExists:brushed(rangeInfoList))&amp;&amp;function applyVisual(stateList,visualMappings,data,getValueState,scope,dimension){var dataIndex,visualTypesMap={};function getVisual(key){return getItemVisualFromData(data,dataIndex,key)}function setVisual(key,value){setItemVisualFromData(data,dataIndex,key,value)}each$f(stateList,function(state){var visualTypes=VisualMapping.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes}),data.each(function eachItem(valueOrIndex,index){dataIndex=valueOrIndex;var rawDataItem=data.getRawDataItem(dataIndex);if(!rawDataItem||!1!==rawDataItem.visualMap)for(var valueState=getValueState.call(scope,valueOrIndex),mappings=visualMappings[valueState],visualTypes=visualTypesMap[valueState],i=0,len2=visualTypes.length;i&lt;len2;i++){var type=visualTypes[i];mappings[type]&amp;&amp;mappings[type].applyVisual(valueOrIndex,getVisual,setVisual)}})}(STATE_LIST,visualMappings,data,getValueState)})}),function dispatchAction$1(api,throttleType,throttleDelay,brushSelected,payload){if(!payload)return;var zr=api.getZr();if(zr[DISPATCH_FLAG])return;zr.__ecBrushSelect||(zr.__ecBrushSelect=doDispatch);var fn=createOrUpdate(zr,"__ecBrushSelect",throttleDelay,throttleType);fn(api,brushSelected)}(api,throttleType,throttleDelay,brushSelected,payload)}function doDispatch(api,brushSelected){if(!api.isDisposed()){var zr=api.getZr();zr[DISPATCH_FLAG]=!0,api.dispatchAction({type:"brushSelect",batch:brushSelected}),zr[DISPATCH_FLAG]=!1}}function checkInRange(seriesModel,rangeInfoList,data,dataIndex){for(var i=0,len2=rangeInfoList.length;i&lt;len2;i++){var area=rangeInfoList[i];if(seriesModel.brushSelector(dataIndex,data,area.selectors,area))return!0}}var boundingRectBuilders={rect:function(area){return getBoundingRectFromMinMax(area.range)},polygon:function(area){for(var minMax,range=area.range,i=0,len2=range.length;i&lt;len2;i++){minMax=minMax||[[1/0,-1/0],[1/0,-1/0]];var rg=range[i];rg[0]&lt;minMax[0][0]&amp;&amp;(minMax[0][0]=rg[0]),rg[0]&gt;minMax[0][1]&amp;&amp;(minMax[0][1]=rg[0]),rg[1]&lt;minMax[1][0]&amp;&amp;(minMax[1][0]=rg[1]),rg[1]&gt;minMax[1][1]&amp;&amp;(minMax[1][1]=rg[1])}return minMax&amp;&amp;getBoundingRectFromMinMax(minMax)}};function getBoundingRectFromMinMax(minMax){return new BoundingRect(minMax[0][0],minMax[1][0],minMax[0][1]-minMax[0][0],minMax[1][1]-minMax[1][0])}var BrushView=function(_super){function BrushView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=BrushView2.type,_this}return __extends$1(BrushView2,_super),BrushView2.prototype.init=function(ecModel,api){this.ecModel=ecModel,this.api=api,this.model,(this._brushController=new BrushController(api.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},BrushView2.prototype.render=function(brushModel,ecModel,api,payload){this.model=brushModel,this._updateController(brushModel,ecModel,api,payload)},BrushView2.prototype.updateTransform=function(brushModel,ecModel,api,payload){layoutCovers(ecModel),this._updateController(brushModel,ecModel,api,payload)},BrushView2.prototype.updateVisual=function(brushModel,ecModel,api,payload){this.updateTransform(brushModel,ecModel,api,payload)},BrushView2.prototype.updateView=function(brushModel,ecModel,api,payload){this._updateController(brushModel,ecModel,api,payload)},BrushView2.prototype._updateController=function(brushModel,ecModel,api,payload){(!payload||payload.$from!==brushModel.id)&amp;&amp;this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice())},BrushView2.prototype.dispose=function(){this._brushController.dispose()},BrushView2.prototype._onBrush=function(eventParam){var modelId=this.model.id,areas=this.model.brushTargetManager.setOutputRanges(eventParam.areas,this.ecModel);(!eventParam.isEnd||eventParam.removeOnClick)&amp;&amp;this.api.dispatchAction({type:"brush",brushId:modelId,areas:clone$4(areas),$from:modelId}),eventParam.isEnd&amp;&amp;this.api.dispatchAction({type:"brushEnd",brushId:modelId,areas:clone$4(areas),$from:modelId})},BrushView2.type="brush",BrushView2}(ComponentView),BrushModel=function(_super){function BrushModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=BrushModel2.type,_this.areas=[],_this.brushOption={},_this}return __extends$1(BrushModel2,_super),BrushModel2.prototype.optionUpdated=function(newOption,isInit){var thisOption=this.option;!isInit&amp;&amp;replaceVisualOption(thisOption,newOption,["inBrush","outOfBrush"]);var inBrush=thisOption.inBrush=thisOption.inBrush||{};thisOption.outOfBrush=thisOption.outOfBrush||{color:"#ddd"},inBrush.hasOwnProperty("liftZ")||(inBrush.liftZ=5)},BrushModel2.prototype.setAreas=function(areas){areas&amp;&amp;(this.areas=map$1(areas,function(area){return generateBrushOption(this.option,area)},this))},BrushModel2.prototype.setBrushOption=function(brushOption){this.brushOption=generateBrushOption(this.option,brushOption),this.brushType=this.brushOption.brushType},BrushModel2.type="brush",BrushModel2.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],BrushModel2.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},BrushModel2}(ComponentModel);function generateBrushOption(option,brushOption){return merge({brushType:option.brushType,brushMode:option.brushMode,transformable:option.transformable,brushStyle:new Model(option.brushStyle).getItemStyle(),removeOnClick:option.removeOnClick,z:option.z},brushOption,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(_super){function BrushFeature2(){return null!==_super&amp;&amp;_super.apply(this,arguments)||this}return __extends$1(BrushFeature2,_super),BrushFeature2.prototype.render=function(featureModel,ecModel,api){var brushType,brushMode,isBrushed;ecModel.eachComponent({mainType:"brush"},function(brushModel){brushType=brushModel.brushType,brushMode=brushModel.brushOption.brushMode||"single",isBrushed=isBrushed||!!brushModel.areas.length}),this._brushType=brushType,this._brushMode=brushMode,each$f(featureModel.get("type",!0),function(type){featureModel.setIconStatus(type,("keep"===type?"multiple"===brushMode:"clear"===type?isBrushed:type===brushType)?"emphasis":"normal")})},BrushFeature2.prototype.updateView=function(featureModel,ecModel,api){this.render(featureModel,ecModel,api)},BrushFeature2.prototype.getIcons=function(){var model=this.model,availableIcons=model.get("icon",!0),icons={};return each$f(model.get("type",!0),function(type){availableIcons[type]&amp;&amp;(icons[type]=availableIcons[type])}),icons},BrushFeature2.prototype.onclick=function(ecModel,api,type){var brushType=this._brushType,brushMode=this._brushMode;"clear"===type?(api.dispatchAction({type:"axisAreaSelect",intervals:[]}),api.dispatchAction({type:"brush",command:"clear",areas:[]})):api.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===type?brushType:brushType!==type&amp;&amp;type,brushMode:"keep"===type?"multiple"===brushMode?"single":"multiple":brushMode}})},BrushFeature2.getDefaultOption=function(ecModel){return{show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:ecModel.getLocaleModel().get(["toolbox","brush","title"])}},BrushFeature2}(ToolboxFeature);var TitleModel=function(_super){function TitleModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TitleModel2.type,_this.layoutMode={type:"box",ignoreSize:!0},_this}return __extends$1(TitleModel2,_super),TitleModel2.type="title",TitleModel2.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},TitleModel2}(ComponentModel),TitleView=function(_super){function TitleView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TitleView2.type,_this}return __extends$1(TitleView2,_super),TitleView2.prototype.render=function(titleModel,ecModel,api){if(this.group.removeAll(),titleModel.get("show")){var group=this.group,textStyleModel=titleModel.getModel("textStyle"),subtextStyleModel=titleModel.getModel("subtextStyle"),textAlign=titleModel.get("textAlign"),textVerticalAlign=retrieve2(titleModel.get("textBaseline"),titleModel.get("textVerticalAlign")),textEl=new ZRText({style:createTextStyle$1(textStyleModel,{text:titleModel.get("text"),fill:textStyleModel.getTextColor()},{disableBox:!0}),z2:10}),textRect=textEl.getBoundingRect(),subText=titleModel.get("subtext"),subTextEl=new ZRText({style:createTextStyle$1(subtextStyleModel,{text:subText,fill:subtextStyleModel.getTextColor(),y:textRect.height+titleModel.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),link=titleModel.get("link"),sublink=titleModel.get("sublink"),triggerEvent=titleModel.get("triggerEvent",!0);textEl.silent=!link&amp;&amp;!triggerEvent,subTextEl.silent=!sublink&amp;&amp;!triggerEvent,link&amp;&amp;textEl.on("click",function(){windowOpen(link,"_"+titleModel.get("target"))}),sublink&amp;&amp;subTextEl.on("click",function(){windowOpen(sublink,"_"+titleModel.get("subtarget"))}),getECData(textEl).eventData=getECData(subTextEl).eventData=triggerEvent?{componentType:"title",componentIndex:titleModel.componentIndex}:null,group.add(textEl),subText&amp;&amp;group.add(subTextEl);var groupRect=group.getBoundingRect(),layoutOption=titleModel.getBoxLayoutParams();layoutOption.width=groupRect.width,layoutOption.height=groupRect.height;var layoutRect=getLayoutRect(layoutOption,{width:api.getWidth(),height:api.getHeight()},titleModel.get("padding"));textAlign||("middle"===(textAlign=titleModel.get("left")||titleModel.get("right"))&amp;&amp;(textAlign="center"),"right"===textAlign?layoutRect.x+=layoutRect.width:"center"===textAlign&amp;&amp;(layoutRect.x+=layoutRect.width/2)),textVerticalAlign||("center"===(textVerticalAlign=titleModel.get("top")||titleModel.get("bottom"))&amp;&amp;(textVerticalAlign="middle"),"bottom"===textVerticalAlign?layoutRect.y+=layoutRect.height:"middle"===textVerticalAlign&amp;&amp;(layoutRect.y+=layoutRect.height/2),textVerticalAlign=textVerticalAlign||"top"),group.x=layoutRect.x,group.y=layoutRect.y,group.markRedraw();var alignStyle={align:textAlign,verticalAlign:textVerticalAlign};textEl.setStyle(alignStyle),subTextEl.setStyle(alignStyle),groupRect=group.getBoundingRect();var padding=layoutRect.margin,style=titleModel.getItemStyle(["color","opacity"]);style.fill=titleModel.get("backgroundColor");var rect=new Rect$2({shape:{x:groupRect.x-padding[3],y:groupRect.y-padding[0],width:groupRect.width+padding[1]+padding[3],height:groupRect.height+padding[0]+padding[2],r:titleModel.get("borderRadius")},style:style,subPixelOptimize:!0,silent:!0});group.add(rect)}},TitleView2.type="title",TitleView2}(ComponentView);function install$g(registers){registers.registerComponentModel(TitleModel),registers.registerComponentView(TitleView)}var TimelineModel=function(_super){function TimelineModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TimelineModel2.type,_this.layoutMode="box",_this}return __extends$1(TimelineModel2,_super),TimelineModel2.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),this._initData()},TimelineModel2.prototype.mergeOption=function(option){_super.prototype.mergeOption.apply(this,arguments),this._initData()},TimelineModel2.prototype.setCurrentIndex=function(currentIndex){null==currentIndex&amp;&amp;(currentIndex=this.option.currentIndex);var count2=this._data.count();this.option.loop?currentIndex=(currentIndex%count2+count2)%count2:(currentIndex&gt;=count2&amp;&amp;(currentIndex=count2-1),currentIndex&lt;0&amp;&amp;(currentIndex=0)),this.option.currentIndex=currentIndex},TimelineModel2.prototype.getCurrentIndex=function(){return this.option.currentIndex},TimelineModel2.prototype.isIndexMax=function(){return this.getCurrentIndex()&gt;=this._data.count()-1},TimelineModel2.prototype.setPlayState=function(state){this.option.autoPlay=!!state},TimelineModel2.prototype.getPlayState=function(){return!!this.option.autoPlay},TimelineModel2.prototype._initData=function(){var processedDataArr,thisOption=this.option,dataArr=thisOption.data||[],axisType=thisOption.axisType,names=this._names=[];"category"===axisType?(processedDataArr=[],each$f(dataArr,function(item,index){var newItem,value=convertOptionIdName(getDataItemValue(item),"");isObject$3(item)?(newItem=clone$4(item)).value=index:newItem=index,processedDataArr.push(newItem),names.push(value)})):processedDataArr=dataArr;var dimType={category:"ordinal",time:"time",value:"number"}[axisType]||"number";(this._data=new SeriesData([{name:"value",type:dimType}],this)).initData(processedDataArr,names)},TimelineModel2.prototype.getData=function(){return this._data},TimelineModel2.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},TimelineModel2.type="timeline",TimelineModel2.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},TimelineModel2}(ComponentModel),SliderTimelineModel=function(_super){function SliderTimelineModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SliderTimelineModel2.type,_this}return __extends$1(SliderTimelineModel2,_super),SliderTimelineModel2.type="timeline.slider",SliderTimelineModel2.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),SliderTimelineModel2}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(_super){function TimelineView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=TimelineView2.type,_this}return __extends$1(TimelineView2,_super),TimelineView2.type="timeline",TimelineView2}(ComponentView),TimelineAxis=function(_super){function TimelineAxis2(dim,scale2,coordExtent,axisType){var _this=_super.call(this,dim,scale2,coordExtent)||this;return _this.type=axisType||"value",_this}return __extends$1(TimelineAxis2,_super),TimelineAxis2.prototype.getLabelModel=function(){return this.model.getModel("label")},TimelineAxis2.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},TimelineAxis2}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(_super){function SliderTimelineView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SliderTimelineView2.type,_this}return __extends$1(SliderTimelineView2,_super),SliderTimelineView2.prototype.init=function(ecModel,api){this.api=api},SliderTimelineView2.prototype.render=function(timelineModel,ecModel,api){if(this.model=timelineModel,this.api=api,this.ecModel=ecModel,this.group.removeAll(),timelineModel.get("show",!0)){var layoutInfo_1=this._layout(timelineModel,api),mainGroup_1=this._createGroup("_mainGroup"),labelGroup=this._createGroup("_labelGroup"),axis_1=this._axis=this._createAxis(layoutInfo_1,timelineModel);timelineModel.formatTooltip=function(dataIndex){return createTooltipMarkup("nameValue",{noName:!0,value:axis_1.scale.getLabel({value:dataIndex})})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(name){this["_render"+name](layoutInfo_1,mainGroup_1,axis_1,timelineModel)},this),this._renderAxisLabel(layoutInfo_1,labelGroup,axis_1,timelineModel),this._position(layoutInfo_1,timelineModel)}this._doPlayStop(),this._updateTicksStatus()},SliderTimelineView2.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},SliderTimelineView2.prototype.dispose=function(){this._clearTimer()},SliderTimelineView2.prototype._layout=function(timelineModel,api){var parsedLabelPos,playPosition,prevBtnPosition,nextBtnPosition,labelPosOpt=timelineModel.get(["label","position"]),orient=timelineModel.get("orient"),viewRect2=function getViewRect(model,api){return getLayoutRect(model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()},model.get("padding"))}(timelineModel,api),labelAlignMap={horizontal:"center",vertical:(parsedLabelPos=null==labelPosOpt||"auto"===labelPosOpt?"horizontal"===orient?viewRect2.y+viewRect2.height/2&lt;api.getHeight()/2?"-":"+":viewRect2.x+viewRect2.width/2&lt;api.getWidth()/2?"+":"-":isString(labelPosOpt)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[orient][labelPosOpt]:labelPosOpt)&gt;=0||"+"===parsedLabelPos?"left":"right"},labelBaselineMap={horizontal:parsedLabelPos&gt;=0||"+"===parsedLabelPos?"top":"bottom",vertical:"middle"},rotationMap={horizontal:0,vertical:PI/2},mainLength="vertical"===orient?viewRect2.height:viewRect2.width,controlModel=timelineModel.getModel("controlStyle"),showControl=controlModel.get("show",!0),controlSize=showControl?controlModel.get("itemSize"):0,controlGap=showControl?controlModel.get("itemGap"):0,sizePlusGap=controlSize+controlGap,labelRotation=timelineModel.get(["label","rotate"])||0;labelRotation=labelRotation*PI/180;var controlPosition=controlModel.get("position",!0),showPlayBtn=showControl&amp;&amp;controlModel.get("showPlayBtn",!0),showPrevBtn=showControl&amp;&amp;controlModel.get("showPrevBtn",!0),showNextBtn=showControl&amp;&amp;controlModel.get("showNextBtn",!0),xLeft=0,xRight=mainLength;"left"===controlPosition||"bottom"===controlPosition?(showPlayBtn&amp;&amp;(playPosition=[0,0],xLeft+=sizePlusGap),showPrevBtn&amp;&amp;(prevBtnPosition=[xLeft,0],xLeft+=sizePlusGap),showNextBtn&amp;&amp;(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)):(showPlayBtn&amp;&amp;(playPosition=[xRight-controlSize,0],xRight-=sizePlusGap),showPrevBtn&amp;&amp;(prevBtnPosition=[0,0],xLeft+=sizePlusGap),showNextBtn&amp;&amp;(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap));var axisExtent=[xLeft,xRight];return timelineModel.get("inverse")&amp;&amp;axisExtent.reverse(),{viewRect:viewRect2,mainLength:mainLength,orient:orient,rotation:rotationMap[orient],labelRotation:labelRotation,labelPosOpt:parsedLabelPos,labelAlign:timelineModel.get(["label","align"])||labelAlignMap[orient],labelBaseline:timelineModel.get(["label","verticalAlign"])||timelineModel.get(["label","baseline"])||labelBaselineMap[orient],playPosition:playPosition,prevBtnPosition:prevBtnPosition,nextBtnPosition:nextBtnPosition,axisExtent:axisExtent,controlSize:controlSize,controlGap:controlGap}},SliderTimelineView2.prototype._position=function(layoutInfo,timelineModel){var mainGroup=this._mainGroup,labelGroup=this._labelGroup,viewRect2=layoutInfo.viewRect;if("vertical"===layoutInfo.orient){var m2=[1,0,0,1,0,0],rotateOriginX=viewRect2.x,rotateOriginY=viewRect2.y+viewRect2.height;translate(m2,m2,[-rotateOriginX,-rotateOriginY]),rotate(m2,m2,-PI/2),translate(m2,m2,[rotateOriginX,rotateOriginY]),(viewRect2=viewRect2.clone()).applyTransform(m2)}var viewBound=getBound(viewRect2),mainBound=getBound(mainGroup.getBoundingRect()),labelBound=getBound(labelGroup.getBoundingRect()),mainPosition=[mainGroup.x,mainGroup.y],labelsPosition=[labelGroup.x,labelGroup.y];labelsPosition[0]=mainPosition[0]=viewBound[0][0];var mainBoundIdx,labelPosOpt=layoutInfo.labelPosOpt;null==labelPosOpt||isString(labelPosOpt)?(toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx="+"===labelPosOpt?0:1),toBound(labelsPosition,labelBound,viewBound,1,1-mainBoundIdx)):(toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx=labelPosOpt&gt;=0?0:1),labelsPosition[1]=mainPosition[1]+labelPosOpt);function setOrigin(targetGroup){targetGroup.originX=viewBound[0][0]-targetGroup.x,targetGroup.originY=viewBound[1][0]-targetGroup.y}function getBound(rect){return[[rect.x,rect.x+rect.width],[rect.y,rect.y+rect.height]]}function toBound(fromPos,from,to,dimIdx,boundIdx){fromPos[dimIdx]+=to[dimIdx][boundIdx]-from[dimIdx][boundIdx]}mainGroup.setPosition(mainPosition),labelGroup.setPosition(labelsPosition),mainGroup.rotation=labelGroup.rotation=layoutInfo.rotation,setOrigin(mainGroup),setOrigin(labelGroup)},SliderTimelineView2.prototype._createAxis=function(layoutInfo,timelineModel){var data=timelineModel.getData(),axisType=timelineModel.get("axisType"),scale2=function createScaleByModel(model,axisType){if(axisType=axisType||model.get("type"),axisType)switch(axisType){case"category":return new OrdinalScale({ordinalMeta:model.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:model.ecModel.getLocaleModel(),useUTC:model.ecModel.get("useUTC")});default:return new IntervalScale}}(timelineModel,axisType);scale2.getTicks=function(){return data.mapArray(["value"],function(value){return{value:value}})};var dataExtent=data.getDataExtent("value");scale2.setExtent(dataExtent[0],dataExtent[1]),scale2.calcNiceTicks();var axis=new TimelineAxis("value",scale2,layoutInfo.axisExtent,axisType);return axis.model=timelineModel,axis},SliderTimelineView2.prototype._createGroup=function(key){var newGroup=this[key]=new Group$3;return this.group.add(newGroup),newGroup},SliderTimelineView2.prototype._renderAxisLine=function(layoutInfo,group,axis,timelineModel){var axisExtent=axis.getExtent();if(timelineModel.get(["lineStyle","show"])){var line=new Line$1({shape:{x1:axisExtent[0],y1:0,x2:axisExtent[1],y2:0},style:extend({lineCap:"round"},timelineModel.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});group.add(line);var progressLine=this._progressLine=new Line$1({shape:{x1:axisExtent[0],x2:this._currentPointer?this._currentPointer.x:axisExtent[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:line.style.lineWidth},timelineModel.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});group.add(progressLine)}},SliderTimelineView2.prototype._renderAxisTick=function(layoutInfo,group,axis,timelineModel){var _this=this,data=timelineModel.getData(),ticks=axis.scale.getTicks();this._tickSymbols=[],each$f(ticks,function(tick){var tickCoord=axis.dataToCoord(tick.value),itemModel=data.getItemModel(tick.value),itemStyleModel=itemModel.getModel("itemStyle"),hoverStyleModel=itemModel.getModel(["emphasis","itemStyle"]),progressStyleModel=itemModel.getModel(["progress","itemStyle"]),symbolOpt={x:tickCoord,y:0,onclick:bind$1(_this._changeTimeline,_this,tick.value)},el=giveSymbol(itemModel,itemStyleModel,group,symbolOpt);el.ensureState("emphasis").style=hoverStyleModel.getItemStyle(),el.ensureState("progress").style=progressStyleModel.getItemStyle(),enableHoverEmphasis(el);var ecData=getECData(el);itemModel.get("tooltip")?(ecData.dataIndex=tick.value,ecData.dataModel=timelineModel):ecData.dataIndex=ecData.dataModel=null,_this._tickSymbols.push(el)})},SliderTimelineView2.prototype._renderAxisLabel=function(layoutInfo,group,axis,timelineModel){var _this=this;if(axis.getLabelModel().get("show")){var data=timelineModel.getData(),labels=axis.getViewLabels();this._tickLabels=[],each$f(labels,function(labelItem){var dataIndex=labelItem.tickValue,itemModel=data.getItemModel(dataIndex),normalLabelModel=itemModel.getModel("label"),hoverLabelModel=itemModel.getModel(["emphasis","label"]),progressLabelModel=itemModel.getModel(["progress","label"]),tickCoord=axis.dataToCoord(labelItem.tickValue),textEl=new ZRText({x:tickCoord,y:0,rotation:layoutInfo.labelRotation-layoutInfo.rotation,onclick:bind$1(_this._changeTimeline,_this,dataIndex),silent:!1,style:createTextStyle$1(normalLabelModel,{text:labelItem.formattedLabel,align:layoutInfo.labelAlign,verticalAlign:layoutInfo.labelBaseline})});textEl.ensureState("emphasis").style=createTextStyle$1(hoverLabelModel),textEl.ensureState("progress").style=createTextStyle$1(progressLabelModel),group.add(textEl),enableHoverEmphasis(textEl),labelDataIndexStore(textEl).dataIndex=dataIndex,_this._tickLabels.push(textEl)})}},SliderTimelineView2.prototype._renderControl=function(layoutInfo,group,axis,timelineModel){var controlSize=layoutInfo.controlSize,rotation=layoutInfo.rotation,itemStyle=timelineModel.getModel("controlStyle").getItemStyle(),hoverStyle=timelineModel.getModel(["emphasis","controlStyle"]).getItemStyle(),playState=timelineModel.getPlayState(),inverse=timelineModel.get("inverse",!0);function makeBtn(position2,iconName,onclick,willRotate){if(position2){var iconSize=parsePercent$1(retrieve2(timelineModel.get(["controlStyle",iconName+"BtnSize"]),controlSize),controlSize),btn=function makeControlIcon(timelineModel,objPath,rect,opts){var style=opts.style,icon=createIcon(timelineModel.get(["controlStyle",objPath]),opts||{},new BoundingRect(rect[0],rect[1],rect[2],rect[3]));style&amp;&amp;icon.setStyle(style);return icon}(timelineModel,iconName+"Icon",[0,-iconSize/2,iconSize,iconSize],{x:position2[0],y:position2[1],originX:controlSize/2,originY:0,rotation:willRotate?-rotation:0,rectHover:!0,style:itemStyle,onclick:onclick});btn.ensureState("emphasis").style=hoverStyle,group.add(btn),enableHoverEmphasis(btn)}}makeBtn(layoutInfo.nextBtnPosition,"next",bind$1(this._changeTimeline,this,inverse?"-":"+")),makeBtn(layoutInfo.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,inverse?"+":"-")),makeBtn(layoutInfo.playPosition,playState?"stop":"play",bind$1(this._handlePlayClick,this,!playState),!0)},SliderTimelineView2.prototype._renderCurrentPointer=function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData(),currentIndex=timelineModel.getCurrentIndex(),pointerModel=data.getItemModel(currentIndex).getModel("checkpointStyle"),me=this,callback={onCreate:function(pointer){pointer.draggable=!0,pointer.drift=bind$1(me._handlePointerDrag,me),pointer.ondragend=bind$1(me._handlePointerDragend,me),pointerMoveTo(pointer,me._progressLine,currentIndex,axis,timelineModel,!0)},onUpdate:function(pointer){pointerMoveTo(pointer,me._progressLine,currentIndex,axis,timelineModel)}};this._currentPointer=giveSymbol(pointerModel,pointerModel,this._mainGroup,{},this._currentPointer,callback)},SliderTimelineView2.prototype._handlePlayClick=function(nextState){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:nextState,from:this.uid})},SliderTimelineView2.prototype._handlePointerDrag=function(dx,dy,e2){this._clearTimer(),this._pointerChangeTimeline([e2.offsetX,e2.offsetY])},SliderTimelineView2.prototype._handlePointerDragend=function(e2){this._pointerChangeTimeline([e2.offsetX,e2.offsetY],!0)},SliderTimelineView2.prototype._pointerChangeTimeline=function(mousePos,trigger2){var toCoord=this._toAxisCoord(mousePos)[0],axisExtent=asc$2(this._axis.getExtent().slice());toCoord&gt;axisExtent[1]&amp;&amp;(toCoord=axisExtent[1]),toCoord&lt;axisExtent[0]&amp;&amp;(toCoord=axisExtent[0]),this._currentPointer.x=toCoord,this._currentPointer.markRedraw();var progressLine=this._progressLine;progressLine&amp;&amp;(progressLine.shape.x2=toCoord,progressLine.dirty());var targetDataIndex=this._findNearestTick(toCoord),timelineModel=this.model;(trigger2||targetDataIndex!==timelineModel.getCurrentIndex()&amp;&amp;timelineModel.get("realtime"))&amp;&amp;this._changeTimeline(targetDataIndex)},SliderTimelineView2.prototype._doPlayStop=function(){var _this=this;this._clearTimer(),this.model.getPlayState()&amp;&amp;(this._timer=setTimeout(function(){var timelineModel=_this.model;_this._changeTimeline(timelineModel.getCurrentIndex()+(timelineModel.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},SliderTimelineView2.prototype._toAxisCoord=function(vertex){return applyTransform(vertex,this._mainGroup.getLocalTransform(),!0)},SliderTimelineView2.prototype._findNearestTick=function(axisCoord){var targetDataIndex,data=this.model.getData(),dist2=1/0,axis=this._axis;return data.each(["value"],function(value,dataIndex){var coord=axis.dataToCoord(value),d=Math.abs(coord-axisCoord);d&lt;dist2&amp;&amp;(dist2=d,targetDataIndex=dataIndex)}),targetDataIndex},SliderTimelineView2.prototype._clearTimer=function(){this._timer&amp;&amp;(clearTimeout(this._timer),this._timer=null)},SliderTimelineView2.prototype._changeTimeline=function(nextIndex){var currentIndex=this.model.getCurrentIndex();"+"===nextIndex?nextIndex=currentIndex+1:"-"===nextIndex&amp;&amp;(nextIndex=currentIndex-1),this.api.dispatchAction({type:"timelineChange",currentIndex:nextIndex,from:this.uid})},SliderTimelineView2.prototype._updateTicksStatus=function(){var currentIndex=this.model.getCurrentIndex(),tickSymbols=this._tickSymbols,tickLabels=this._tickLabels;if(tickSymbols)for(var i=0;i&lt;tickSymbols.length;i++)tickSymbols&amp;&amp;tickSymbols[i]&amp;&amp;tickSymbols[i].toggleState("progress",i&lt;currentIndex);if(tickLabels)for(i=0;i&lt;tickLabels.length;i++)tickLabels&amp;&amp;tickLabels[i]&amp;&amp;tickLabels[i].toggleState("progress",labelDataIndexStore(tickLabels[i]).dataIndex&lt;=currentIndex)},SliderTimelineView2.type="timeline.slider",SliderTimelineView2}(TimelineView);function giveSymbol(hostModel,itemStyleModel,group,opt,symbol,callback){var color2=itemStyleModel.get("color");symbol?(symbol.setColor(color2),group.add(symbol),callback&amp;&amp;callback.onUpdate(symbol)):((symbol=createSymbol$1(hostModel.get("symbol"),-1,-1,2,2,color2)).setStyle("strokeNoScale",!0),group.add(symbol),callback&amp;&amp;callback.onCreate(symbol));var itemStyle=itemStyleModel.getItemStyle(["color"]);symbol.setStyle(itemStyle),opt=merge({rectHover:!0,z2:100},opt,!0);var symbolSize=normalizeSymbolSize(hostModel.get("symbolSize"));opt.scaleX=symbolSize[0]/2,opt.scaleY=symbolSize[1]/2;var symbolOffset=normalizeSymbolOffset(hostModel.get("symbolOffset"),symbolSize);symbolOffset&amp;&amp;(opt.x=(opt.x||0)+symbolOffset[0],opt.y=(opt.y||0)+symbolOffset[1]);var symbolRotate=hostModel.get("symbolRotate");return opt.rotation=(symbolRotate||0)*Math.PI/180||0,symbol.attr(opt),symbol.updateTransform(),symbol}function pointerMoveTo(pointer,progressLine,dataIndex,axis,timelineModel,noAnimation){if(!pointer.dragging){var pointerModel=timelineModel.getModel("checkpointStyle"),toCoord=axis.dataToCoord(timelineModel.getData().get("value",dataIndex));if(noAnimation||!pointerModel.get("animation",!0))pointer.attr({x:toCoord,y:0}),progressLine&amp;&amp;progressLine.attr({shape:{x2:toCoord}});else{var animationCfg={duration:pointerModel.get("animationDuration",!0),easing:pointerModel.get("animationEasing",!0)};pointer.stopAnimation(null,!0),pointer.animateTo({x:toCoord,y:0},animationCfg),progressLine&amp;&amp;progressLine.animateTo({shape:{x2:toCoord}},animationCfg)}}}function timelinePreprocessor(option){var timelineOpt=option&amp;&amp;option.timeline;isArray$1(timelineOpt)||(timelineOpt=timelineOpt?[timelineOpt]:[]),each$f(timelineOpt,function(opt){opt&amp;&amp;function compatibleEC2(opt){var type=opt.type,ec2Types={number:"value",time:"time"};ec2Types[type]&amp;&amp;(opt.axisType=ec2Types[type],delete opt.type);if(transferItem(opt),has$1(opt,"controlPosition")){var controlStyle=opt.controlStyle||(opt.controlStyle={});has$1(controlStyle,"position")||(controlStyle.position=opt.controlPosition),"none"!==controlStyle.position||has$1(controlStyle,"show")||(controlStyle.show=!1,delete controlStyle.position),delete opt.controlPosition}each$f(opt.data||[],function(dataItem){isObject$3(dataItem)&amp;&amp;!isArray$1(dataItem)&amp;&amp;(!has$1(dataItem,"value")&amp;&amp;has$1(dataItem,"name")&amp;&amp;(dataItem.value=dataItem.name),transferItem(dataItem))})}(opt)})}function transferItem(opt){var itemStyle=opt.itemStyle||(opt.itemStyle={}),itemStyleEmphasis=itemStyle.emphasis||(itemStyle.emphasis={}),label=opt.label||opt.label||{},labelNormal=label.normal||(label.normal={}),excludeLabelAttr={normal:1,emphasis:1};each$f(label,function(value,name){excludeLabelAttr[name]||has$1(labelNormal,name)||(labelNormal[name]=value)}),itemStyleEmphasis.label&amp;&amp;!has$1(label,"emphasis")&amp;&amp;(label.emphasis=itemStyleEmphasis.label,delete itemStyleEmphasis.label)}function has$1(obj,attr){return obj.hasOwnProperty(attr)}function checkMarkerInSeries(seriesOpts,markerType){if(!seriesOpts)return!1;for(var seriesOptArr=isArray$1(seriesOpts)?seriesOpts:[seriesOpts],idx=0;idx&lt;seriesOptArr.length;idx++)if(seriesOptArr[idx]&amp;&amp;seriesOptArr[idx][markerType])return!0;return!1}function fillLabel(opt){defaultEmphasis(opt,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(_super){function MarkerModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkerModel2.type,_this.createdBySelf=!1,_this}return __extends$1(MarkerModel2,_super),MarkerModel2.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),this._mergeOption(option,ecModel,!1,!0)},MarkerModel2.prototype.isAnimationEnabled=function(){if(env.node)return!1;var hostSeries=this.__hostSeries;return this.getShallow("animation")&amp;&amp;hostSeries&amp;&amp;hostSeries.isAnimationEnabled()},MarkerModel2.prototype.mergeOption=function(newOpt,ecModel){this._mergeOption(newOpt,ecModel,!1,!1)},MarkerModel2.prototype._mergeOption=function(newOpt,ecModel,createdBySelf,isInit){var componentType=this.mainType;createdBySelf||ecModel.eachSeries(function(seriesModel){var markerOpt=seriesModel.get(this.mainType,!0),markerModel=inner$5(seriesModel)[componentType];markerOpt&amp;&amp;markerOpt.data?(markerModel?markerModel._mergeOption(markerOpt,ecModel,!0):(isInit&amp;&amp;fillLabel(markerOpt),each$f(markerOpt.data,function(item){item instanceof Array?(fillLabel(item[0]),fillLabel(item[1])):fillLabel(item)}),extend(markerModel=this.createMarkerModelFromSeries(markerOpt,this,ecModel),{mainType:this.mainType,seriesIndex:seriesModel.seriesIndex,name:seriesModel.name,createdBySelf:!0}),markerModel.__hostSeries=seriesModel),inner$5(seriesModel)[componentType]=markerModel):inner$5(seriesModel)[componentType]=null},this)},MarkerModel2.prototype.formatTooltip=function(dataIndex,multipleSeries,dataType){var data=this.getData(),value=this.getRawValue(dataIndex),itemName=data.getName(dataIndex);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:itemName,value:value,noName:!itemName,noValue:null==value})]})},MarkerModel2.prototype.getData=function(){return this._data},MarkerModel2.prototype.setData=function(data){this._data=data},MarkerModel2.prototype.getDataParams=function(dataIndex,dataType){var params=DataFormatMixin.prototype.getDataParams.call(this,dataIndex,dataType),hostSeries=this.__hostSeries;return hostSeries&amp;&amp;(params.seriesId=hostSeries.id,params.seriesName=hostSeries.name,params.seriesType=hostSeries.subType),params},MarkerModel2.getMarkerModelFromSeries=function(seriesModel,componentType){return inner$5(seriesModel)[componentType]},MarkerModel2.type="marker",MarkerModel2.dependencies=["series","grid","polar","geo"],MarkerModel2}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(_super){function MarkPointModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkPointModel2.type,_this}return __extends$1(MarkPointModel2,_super),MarkPointModel2.prototype.createMarkerModelFromSeries=function(markerOpt,masterMarkerModel,ecModel){return new MarkPointModel2(markerOpt,masterMarkerModel,ecModel)},MarkPointModel2.type="markPoint",MarkPointModel2.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},MarkPointModel2}(MarkerModel);function hasXOrY(item){return!(isNaN(parseFloat(item.x))&amp;&amp;isNaN(parseFloat(item.y)))}function markerTypeCalculatorWithExtent(markerType,data,otherDataDim,targetDataDim,otherCoordIndex,targetCoordIndex){var coordArr=[],calcDataDim=isDimensionStacked(data,targetDataDim)?data.getCalculationInfo("stackResultDimension"):targetDataDim,value=numCalculate(data,calcDataDim,markerType),dataIndex=data.indicesOfNearest(calcDataDim,value)[0];coordArr[otherCoordIndex]=data.get(otherDataDim,dataIndex),coordArr[targetCoordIndex]=data.get(calcDataDim,dataIndex);var coordArrValue=data.get(targetDataDim,dataIndex),precision=getPrecision(data.get(targetDataDim,dataIndex));return(precision=Math.min(precision,20))&gt;=0&amp;&amp;(coordArr[targetCoordIndex]=+coordArr[targetCoordIndex].toFixed(precision)),[coordArr,coordArrValue]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(seriesModel,item){if(item){var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem,dims=coordSys&amp;&amp;coordSys.dimensions;if(!function hasXAndY(item){return!isNaN(parseFloat(item.x))&amp;&amp;!isNaN(parseFloat(item.y))}(item)&amp;&amp;!isArray$1(item.coord)&amp;&amp;isArray$1(dims)){var axisInfo=getAxisInfo(item,data,coordSys,seriesModel);if((item=clone$4(item)).type&amp;&amp;markerTypeCalculator[item.type]&amp;&amp;axisInfo.baseAxis&amp;&amp;axisInfo.valueAxis){var otherCoordIndex=indexOf(dims,axisInfo.baseAxis.dim),targetCoordIndex=indexOf(dims,axisInfo.valueAxis.dim),coordInfo=markerTypeCalculator[item.type](data,axisInfo.baseDataDim,axisInfo.valueDataDim,otherCoordIndex,targetCoordIndex);item.coord=coordInfo[0],item.value=coordInfo[1]}else item.coord=[null!=item.xAxis?item.xAxis:item.radiusAxis,null!=item.yAxis?item.yAxis:item.angleAxis]}if(null!=item.coord&amp;&amp;isArray$1(dims))for(var coord=item.coord,i=0;i&lt;2;i++)markerTypeCalculator[coord[i]]&amp;&amp;(coord[i]=numCalculate(data,data.mapDimension(dims[i]),coord[i]));else item.coord=[];return item}}function getAxisInfo(item,data,coordSys,seriesModel){var ret={};return null!=item.valueIndex||null!=item.valueDim?(ret.valueDataDim=null!=item.valueIndex?data.getDimension(item.valueIndex):item.valueDim,ret.valueAxis=coordSys.getAxis(function dataDimToCoordDim(seriesModel,dataDim){var dimItem=seriesModel.getData().getDimensionInfo(dataDim);return dimItem&amp;&amp;dimItem.coordDim}(seriesModel,ret.valueDataDim)),ret.baseAxis=coordSys.getOtherAxis(ret.valueAxis),ret.baseDataDim=data.mapDimension(ret.baseAxis.dim)):(ret.baseAxis=seriesModel.getBaseAxis(),ret.valueAxis=coordSys.getOtherAxis(ret.baseAxis),ret.baseDataDim=data.mapDimension(ret.baseAxis.dim),ret.valueDataDim=data.mapDimension(ret.valueAxis.dim)),ret}function dataFilter(coordSys,item){return!(coordSys&amp;&amp;coordSys.containData&amp;&amp;item.coord&amp;&amp;!hasXOrY(item))||coordSys.containData(item.coord)}function createMarkerDimValueGetter(inCoordSys,dims){return inCoordSys?function(item,dimName,dataIndex,dimIndex){return parseDataValue(dimIndex&lt;2?item.coord&amp;&amp;item.coord[dimIndex]:item.value,dims[dimIndex])}:function(item,dimName,dataIndex,dimIndex){return parseDataValue(item.value,dims[dimIndex])}}function numCalculate(data,valueDataDim,type){if("average"===type){var sum_1=0,count_1=0;return data.each(valueDataDim,function(val,idx){isNaN(val)||(sum_1+=val,count_1++)}),sum_1/count_1}return"median"===type?data.getMedian(valueDataDim):data.getDataExtent(valueDataDim)["max"===type?1:0]}var inner$4=makeInner(),MarkerView=function(_super){function MarkerView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkerView2.type,_this}return __extends$1(MarkerView2,_super),MarkerView2.prototype.init=function(){this.markerGroupMap=createHashMap()},MarkerView2.prototype.render=function(markerModel,ecModel,api){var _this=this,markerGroupMap=this.markerGroupMap;markerGroupMap.each(function(item){inner$4(item).keep=!1}),ecModel.eachSeries(function(seriesModel){var markerModel2=MarkerModel.getMarkerModelFromSeries(seriesModel,_this.type);markerModel2&amp;&amp;_this.renderSeries(seriesModel,markerModel2,ecModel,api)}),markerGroupMap.each(function(item){!inner$4(item).keep&amp;&amp;_this.group.remove(item.group)})},MarkerView2.prototype.markKeep=function(drawGroup){inner$4(drawGroup).keep=!0},MarkerView2.prototype.toggleBlurSeries=function(seriesModelList,isBlur){var _this=this;each$f(seriesModelList,function(seriesModel){var markerModel=MarkerModel.getMarkerModelFromSeries(seriesModel,_this.type);markerModel&amp;&amp;markerModel.getData().eachItemGraphicEl(function(el){el&amp;&amp;(isBlur?enterBlur(el):leaveBlur(el))})})},MarkerView2.type="marker",MarkerView2}(ComponentView);function updateMarkerLayout(mpData,seriesModel,api){var coordSys=seriesModel.coordinateSystem;mpData.each(function(idx){var point,itemModel=mpData.getItemModel(idx),xPx=parsePercent(itemModel.get("x"),api.getWidth()),yPx=parsePercent(itemModel.get("y"),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions,idx));else if(coordSys){var x=mpData.get(coordSys.dimensions[0],idx),y=mpData.get(coordSys.dimensions[1],idx);point=coordSys.dataToPoint([x,y])}}else point=[xPx,yPx];isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx),mpData.setItemLayout(idx,point)})}var MarkPointView=function(_super){function MarkPointView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkPointView2.type,_this}return __extends$1(MarkPointView2,_super),MarkPointView2.prototype.updateTransform=function(markPointModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mpModel=MarkerModel.getMarkerModelFromSeries(seriesModel,"markPoint");mpModel&amp;&amp;(updateMarkerLayout(mpModel.getData(),seriesModel,api),this.markerGroupMap.get(seriesModel.id).updateLayout())},this)},MarkPointView2.prototype.renderSeries=function(seriesModel,mpModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesId=seriesModel.id,seriesData=seriesModel.getData(),symbolDrawMap=this.markerGroupMap,symbolDraw=symbolDrawMap.get(seriesId)||symbolDrawMap.set(seriesId,new SymbolDraw),mpData=function createData(coordSys,seriesModel,mpModel){var coordDimsInfos;coordDimsInfos=coordSys?map$1(coordSys&amp;&amp;coordSys.dimensions,function(coordDim){return extend(extend({},seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim))||{}),{name:coordDim,ordinalMeta:null})}):[{name:"value",type:"float"}];var mpData=new SeriesData(coordDimsInfos,mpModel),dataOpt=map$1(mpModel.get("data"),curry$1(dataTransform,seriesModel));coordSys&amp;&amp;(dataOpt=filter(dataOpt,curry$1(dataFilter,coordSys)));var dimValueGetter=createMarkerDimValueGetter(!!coordSys,coordDimsInfos);return mpData.initData(dataOpt,null,dimValueGetter),mpData}(coordSys,seriesModel,mpModel);mpModel.setData(mpData),updateMarkerLayout(mpModel.getData(),seriesModel,api),mpData.each(function(idx){var itemModel=mpData.getItemModel(idx),symbol=itemModel.getShallow("symbol"),symbolSize=itemModel.getShallow("symbolSize"),symbolRotate=itemModel.getShallow("symbolRotate"),symbolOffset=itemModel.getShallow("symbolOffset"),symbolKeepAspect=itemModel.getShallow("symbolKeepAspect");if(isFunction(symbol)||isFunction(symbolSize)||isFunction(symbolRotate)||isFunction(symbolOffset)){var rawIdx=mpModel.getRawValue(idx),dataParams=mpModel.getDataParams(idx);isFunction(symbol)&amp;&amp;(symbol=symbol(rawIdx,dataParams)),isFunction(symbolSize)&amp;&amp;(symbolSize=symbolSize(rawIdx,dataParams)),isFunction(symbolRotate)&amp;&amp;(symbolRotate=symbolRotate(rawIdx,dataParams)),isFunction(symbolOffset)&amp;&amp;(symbolOffset=symbolOffset(rawIdx,dataParams))}var style=itemModel.getModel("itemStyle").getItemStyle(),color2=getVisualFromData(seriesData,"color");style.fill||(style.fill=color2),mpData.setItemVisual(idx,{symbol:symbol,symbolSize:symbolSize,symbolRotate:symbolRotate,symbolOffset:symbolOffset,symbolKeepAspect:symbolKeepAspect,style:style})}),symbolDraw.updateData(mpData),this.group.add(symbolDraw.group),mpData.eachItemGraphicEl(function(el){el.traverse(function(child){getECData(child).dataModel=mpModel})}),this.markKeep(symbolDraw),symbolDraw.group.silent=mpModel.get("silent")||seriesModel.get("silent")},MarkPointView2.type="markPoint",MarkPointView2}(MarkerView);var MarkLineModel=function(_super){function MarkLineModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkLineModel2.type,_this}return __extends$1(MarkLineModel2,_super),MarkLineModel2.prototype.createMarkerModelFromSeries=function(markerOpt,masterMarkerModel,ecModel){return new MarkLineModel2(markerOpt,masterMarkerModel,ecModel)},MarkLineModel2.type="markLine",MarkLineModel2.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},MarkLineModel2}(MarkerModel),inner$3=makeInner(),markLineTransform=function(seriesModel,coordSys,mlModel,item){var itemArray,data=seriesModel.getData();if(isArray$1(item))itemArray=item;else{var mlType=item.type;if("min"===mlType||"max"===mlType||"average"===mlType||"median"===mlType||null!=item.xAxis||null!=item.yAxis){var valueAxis2=void 0,value=void 0;if(null!=item.yAxis||null!=item.xAxis)valueAxis2=coordSys.getAxis(null!=item.yAxis?"y":"x"),value=retrieve(item.yAxis,item.xAxis);else{var axisInfo=getAxisInfo(item,data,coordSys,seriesModel);valueAxis2=axisInfo.valueAxis,value=numCalculate(data,getStackedDimension(data,axisInfo.valueDataDim),mlType)}var valueIndex="x"===valueAxis2.dim?0:1,baseIndex=1-valueIndex,mlFrom=clone$4(item),mlTo={coord:[]};mlFrom.type=null,mlFrom.coord=[],mlFrom.coord[baseIndex]=-1/0,mlTo.coord[baseIndex]=1/0;var precision=mlModel.get("precision");precision&gt;=0&amp;&amp;isNumber(value)&amp;&amp;(value=+value.toFixed(Math.min(precision,20))),mlFrom.coord[valueIndex]=mlTo.coord[valueIndex]=value,itemArray=[mlFrom,mlTo,{type:mlType,valueIndex:item.valueIndex,value:value}]}else itemArray=[]}var normalizedItem=[dataTransform(seriesModel,itemArray[0]),dataTransform(seriesModel,itemArray[1]),extend({},itemArray[2])];return normalizedItem[2].type=normalizedItem[2].type||null,merge(normalizedItem[2],normalizedItem[0]),merge(normalizedItem[2],normalizedItem[1]),normalizedItem};function isInfinity$1(val){return!isNaN(val)&amp;&amp;!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex,dimName=coordSys.dimensions[dimIndex];return isInfinity$1(fromCoord[otherDimIndex])&amp;&amp;isInfinity$1(toCoord[otherDimIndex])&amp;&amp;fromCoord[dimIndex]===toCoord[dimIndex]&amp;&amp;coordSys.getAxis(dimName).containData(fromCoord[dimIndex])}function markLineFilter(coordSys,item){if("cartesian2d"===coordSys.type){var fromCoord=item[0].coord,toCoord=item[1].coord;if(fromCoord&amp;&amp;toCoord&amp;&amp;(ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys)))return!0}return dataFilter(coordSys,item[0])&amp;&amp;dataFilter(coordSys,item[1])}function updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api){var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=parsePercent(itemModel.get("x"),api.getWidth()),yPx=parsePercent(itemModel.get("y"),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(data.getValues(data.dimensions,idx));else{var dims=coordSys.dimensions,x=data.get(dims[0],idx),y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y])}if(isCoordinateSystemType(coordSys,"cartesian2d")){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y");dims=coordSys.dimensions;isInfinity$1(data.get(dims[0],idx))?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[isFrom?0:1]):isInfinity$1(data.get(dims[1],idx))&amp;&amp;(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[isFrom?0:1]))}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];data.setItemLayout(idx,point)}var MarkLineView=function(_super){function MarkLineView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkLineView2.type,_this}return __extends$1(MarkLineView2,_super),MarkLineView2.prototype.updateTransform=function(markLineModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mlModel=MarkerModel.getMarkerModelFromSeries(seriesModel,"markLine");if(mlModel){var mlData_1=mlModel.getData(),fromData_1=inner$3(mlModel).from,toData_1=inner$3(mlModel).to;fromData_1.each(function(idx){updateSingleMarkerEndLayout(fromData_1,idx,!0,seriesModel,api),updateSingleMarkerEndLayout(toData_1,idx,!1,seriesModel,api)}),mlData_1.each(function(idx){mlData_1.setItemLayout(idx,[fromData_1.getItemLayout(idx),toData_1.getItemLayout(idx)])}),this.markerGroupMap.get(seriesModel.id).updateLayout()}},this)},MarkLineView2.prototype.renderSeries=function(seriesModel,mlModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesId=seriesModel.id,seriesData=seriesModel.getData(),lineDrawMap=this.markerGroupMap,lineDraw=lineDrawMap.get(seriesId)||lineDrawMap.set(seriesId,new LineDraw);this.group.add(lineDraw.group);var mlData=function createList$1(coordSys,seriesModel,mlModel){var coordDimsInfos;coordDimsInfos=coordSys?map$1(coordSys&amp;&amp;coordSys.dimensions,function(coordDim){return extend(extend({},seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim))||{}),{name:coordDim,ordinalMeta:null})}):[{name:"value",type:"float"}];var fromData=new SeriesData(coordDimsInfos,mlModel),toData=new SeriesData(coordDimsInfos,mlModel),lineData=new SeriesData([],mlModel),optData=map$1(mlModel.get("data"),curry$1(markLineTransform,seriesModel,coordSys,mlModel));coordSys&amp;&amp;(optData=filter(optData,curry$1(markLineFilter,coordSys)));var dimValueGetter=createMarkerDimValueGetter(!!coordSys,coordDimsInfos);return fromData.initData(map$1(optData,function(item){return item[0]}),null,dimValueGetter),toData.initData(map$1(optData,function(item){return item[1]}),null,dimValueGetter),lineData.initData(map$1(optData,function(item){return item[2]})),lineData.hasItemOption=!0,{from:fromData,to:toData,line:lineData}}(coordSys,seriesModel,mlModel),fromData=mlData.from,toData=mlData.to,lineData=mlData.line;inner$3(mlModel).from=fromData,inner$3(mlModel).to=toData,mlModel.setData(lineData);var symbolType=mlModel.get("symbol"),symbolSize=mlModel.get("symbolSize"),symbolRotate=mlModel.get("symbolRotate"),symbolOffset=mlModel.get("symbolOffset");function updateDataVisualAndLayout(data,idx,isFrom){var itemModel=data.getItemModel(idx);updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api);var style=itemModel.getModel("itemStyle").getItemStyle();null==style.fill&amp;&amp;(style.fill=getVisualFromData(seriesData,"color")),data.setItemVisual(idx,{symbolKeepAspect:itemModel.get("symbolKeepAspect"),symbolOffset:retrieve2(itemModel.get("symbolOffset",!0),symbolOffset[isFrom?0:1]),symbolRotate:retrieve2(itemModel.get("symbolRotate",!0),symbolRotate[isFrom?0:1]),symbolSize:retrieve2(itemModel.get("symbolSize"),symbolSize[isFrom?0:1]),symbol:retrieve2(itemModel.get("symbol",!0),symbolType[isFrom?0:1]),style:style})}isArray$1(symbolType)||(symbolType=[symbolType,symbolType]),isArray$1(symbolSize)||(symbolSize=[symbolSize,symbolSize]),isArray$1(symbolRotate)||(symbolRotate=[symbolRotate,symbolRotate]),isArray$1(symbolOffset)||(symbolOffset=[symbolOffset,symbolOffset]),mlData.from.each(function(idx){updateDataVisualAndLayout(fromData,idx,!0),updateDataVisualAndLayout(toData,idx,!1)}),lineData.each(function(idx){var lineStyle=lineData.getItemModel(idx).getModel("lineStyle").getLineStyle();lineData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)]),null==lineStyle.stroke&amp;&amp;(lineStyle.stroke=fromData.getItemVisual(idx,"style").fill),lineData.setItemVisual(idx,{fromSymbolKeepAspect:fromData.getItemVisual(idx,"symbolKeepAspect"),fromSymbolOffset:fromData.getItemVisual(idx,"symbolOffset"),fromSymbolRotate:fromData.getItemVisual(idx,"symbolRotate"),fromSymbolSize:fromData.getItemVisual(idx,"symbolSize"),fromSymbol:fromData.getItemVisual(idx,"symbol"),toSymbolKeepAspect:toData.getItemVisual(idx,"symbolKeepAspect"),toSymbolOffset:toData.getItemVisual(idx,"symbolOffset"),toSymbolRotate:toData.getItemVisual(idx,"symbolRotate"),toSymbolSize:toData.getItemVisual(idx,"symbolSize"),toSymbol:toData.getItemVisual(idx,"symbol"),style:lineStyle})}),lineDraw.updateData(lineData),mlData.line.eachItemGraphicEl(function(el){getECData(el).dataModel=mlModel,el.traverse(function(child){getECData(child).dataModel=mlModel})}),this.markKeep(lineDraw),lineDraw.group.silent=mlModel.get("silent")||seriesModel.get("silent")},MarkLineView2.type="markLine",MarkLineView2}(MarkerView);var MarkAreaModel=function(_super){function MarkAreaModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkAreaModel2.type,_this}return __extends$1(MarkAreaModel2,_super),MarkAreaModel2.prototype.createMarkerModelFromSeries=function(markerOpt,masterMarkerModel,ecModel){return new MarkAreaModel2(markerOpt,masterMarkerModel,ecModel)},MarkAreaModel2.type="markArea",MarkAreaModel2.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},MarkAreaModel2}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(seriesModel,coordSys,maModel,item){var item0=item[0],item1=item[1];if(item0&amp;&amp;item1){var lt2=dataTransform(seriesModel,item0),rb2=dataTransform(seriesModel,item1),ltCoord=lt2.coord,rbCoord=rb2.coord;ltCoord[0]=retrieve(ltCoord[0],-1/0),ltCoord[1]=retrieve(ltCoord[1],-1/0),rbCoord[0]=retrieve(rbCoord[0],1/0),rbCoord[1]=retrieve(rbCoord[1],1/0);var result=mergeAll([{},lt2,rb2]);return result.coord=[lt2.coord,rb2.coord],result.x0=lt2.x,result.y0=lt2.y,result.x1=rb2.x,result.y1=rb2.y,result}};function isInfinity(val){return!isNaN(val)&amp;&amp;!isFinite(val)}function ifMarkAreaHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex;return isInfinity(fromCoord[otherDimIndex])&amp;&amp;isInfinity(toCoord[otherDimIndex])}function markAreaFilter(coordSys,item){var fromCoord=item.coord[0],toCoord=item.coord[1],item0={coord:fromCoord,x:item.x0,y:item.y0},item1={coord:toCoord,x:item.x1,y:item.y1};return isCoordinateSystemType(coordSys,"cartesian2d")?!(!fromCoord||!toCoord||!ifMarkAreaHasOnlyDim(1,fromCoord,toCoord)&amp;&amp;!ifMarkAreaHasOnlyDim(0,fromCoord,toCoord))||function zoneFilter(coordSys,item1,item2){return!(coordSys&amp;&amp;coordSys.containZone&amp;&amp;item1.coord&amp;&amp;item2.coord&amp;&amp;!hasXOrY(item1)&amp;&amp;!hasXOrY(item2))||coordSys.containZone(item1.coord,item2.coord)}(coordSys,item0,item1):dataFilter(coordSys,item0)||dataFilter(coordSys,item1)}function getSingleMarkerEndPoint(data,idx,dims,seriesModel,api){var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=parsePercent(itemModel.get(dims[0]),api.getWidth()),yPx=parsePercent(itemModel.get(dims[1]),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition){var pointValue0=data.getValues(["x0","y0"],idx),pointValue1=data.getValues(["x1","y1"],idx),clampPointValue0=coordSys.clampData(pointValue0),clampPointValue1=coordSys.clampData(pointValue1),pointValue=[];"x0"===dims[0]?pointValue[0]=clampPointValue0[0]&gt;clampPointValue1[0]?pointValue1[0]:pointValue0[0]:pointValue[0]=clampPointValue0[0]&gt;clampPointValue1[0]?pointValue0[0]:pointValue1[0],"y0"===dims[1]?pointValue[1]=clampPointValue0[1]&gt;clampPointValue1[1]?pointValue1[1]:pointValue0[1]:pointValue[1]=clampPointValue0[1]&gt;clampPointValue1[1]?pointValue0[1]:pointValue1[1],point=seriesModel.getMarkerPosition(pointValue,dims,!0)}else{var pt=[x=data.get(dims[0],idx),y=data.get(dims[1],idx)];coordSys.clampData&amp;&amp;coordSys.clampData(pt,pt),point=coordSys.dataToPoint(pt,!0)}if(isCoordinateSystemType(coordSys,"cartesian2d")){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y"),x=data.get(dims[0],idx),y=data.get(dims[1],idx);isInfinity(x)?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()["x0"===dims[0]?0:1]):isInfinity(y)&amp;&amp;(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()["y0"===dims[1]?0:1]))}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];return point}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(_super){function MarkAreaView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=MarkAreaView2.type,_this}return __extends$1(MarkAreaView2,_super),MarkAreaView2.prototype.updateTransform=function(markAreaModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var maModel=MarkerModel.getMarkerModelFromSeries(seriesModel,"markArea");if(maModel){var areaData_1=maModel.getData();areaData_1.each(function(idx){var points2=map$1(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData_1,idx,dim,seriesModel,api)});areaData_1.setItemLayout(idx,points2),areaData_1.getItemGraphicEl(idx).setShape("points",points2)})}},this)},MarkAreaView2.prototype.renderSeries=function(seriesModel,maModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesId=seriesModel.id,seriesData=seriesModel.getData(),areaGroupMap=this.markerGroupMap,polygonGroup=areaGroupMap.get(seriesId)||areaGroupMap.set(seriesId,{group:new Group$3});this.group.add(polygonGroup.group),this.markKeep(polygonGroup);var areaData=function createList(coordSys,seriesModel,maModel){var areaData,dataDims,dims=["x0","y0","x1","y1"];if(coordSys){var coordDimsInfos_1=map$1(coordSys&amp;&amp;coordSys.dimensions,function(coordDim){var data=seriesModel.getData();return extend(extend({},data.getDimensionInfo(data.mapDimension(coordDim))||{}),{name:coordDim,ordinalMeta:null})});dataDims=map$1(dims,function(dim,idx){return{name:dim,type:coordDimsInfos_1[idx%2].type}}),areaData=new SeriesData(dataDims,maModel)}else areaData=new SeriesData(dataDims=[{name:"value",type:"float"}],maModel);var optData=map$1(maModel.get("data"),curry$1(markAreaTransform,seriesModel,coordSys,maModel));coordSys&amp;&amp;(optData=filter(optData,curry$1(markAreaFilter,coordSys)));var dimValueGetter=coordSys?function(item,dimName,dataIndex,dimIndex){return parseDataValue(item.coord[Math.floor(dimIndex/2)][dimIndex%2],dataDims[dimIndex])}:function(item,dimName,dataIndex,dimIndex){return parseDataValue(item.value,dataDims[dimIndex])};return areaData.initData(optData,null,dimValueGetter),areaData.hasItemOption=!0,areaData}(coordSys,seriesModel,maModel);maModel.setData(areaData),areaData.each(function(idx){var points2=map$1(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)}),xAxisScale=coordSys.getAxis("x").scale,yAxisScale=coordSys.getAxis("y").scale,xAxisExtent=xAxisScale.getExtent(),yAxisExtent=yAxisScale.getExtent(),xPointExtent=[xAxisScale.parse(areaData.get("x0",idx)),xAxisScale.parse(areaData.get("x1",idx))],yPointExtent=[yAxisScale.parse(areaData.get("y0",idx)),yAxisScale.parse(areaData.get("y1",idx))];asc$2(xPointExtent),asc$2(yPointExtent);var allClipped=!!(xAxisExtent[0]&gt;xPointExtent[1]||xAxisExtent[1]&lt;xPointExtent[0]||yAxisExtent[0]&gt;yPointExtent[1]||yAxisExtent[1]&lt;yPointExtent[0]);areaData.setItemLayout(idx,{points:points2,allClipped:allClipped});var style=areaData.getItemModel(idx).getModel("itemStyle").getItemStyle(),color$1=getVisualFromData(seriesData,"color");style.fill||(style.fill=color$1,isString(style.fill)&amp;&amp;(style.fill=modifyAlpha(style.fill,.4))),style.stroke||(style.stroke=color$1),areaData.setItemVisual(idx,"style",style)}),areaData.diff(inner$2(polygonGroup).data).add(function(idx){var layout2=areaData.getItemLayout(idx);if(!layout2.allClipped){var polygon=new Polygon({shape:{points:layout2.points}});areaData.setItemGraphicEl(idx,polygon),polygonGroup.group.add(polygon)}}).update(function(newIdx,oldIdx){var polygon=inner$2(polygonGroup).data.getItemGraphicEl(oldIdx),layout2=areaData.getItemLayout(newIdx);layout2.allClipped?polygon&amp;&amp;polygonGroup.group.remove(polygon):(polygon?updateProps$1(polygon,{shape:{points:layout2.points}},maModel,newIdx):polygon=new Polygon({shape:{points:layout2.points}}),areaData.setItemGraphicEl(newIdx,polygon),polygonGroup.group.add(polygon))}).remove(function(idx){var polygon=inner$2(polygonGroup).data.getItemGraphicEl(idx);polygonGroup.group.remove(polygon)}).execute(),areaData.eachItemGraphicEl(function(polygon,idx){var itemModel=areaData.getItemModel(idx),style=areaData.getItemVisual(idx,"style");polygon.useStyle(areaData.getItemVisual(idx,"style")),setLabelStyle(polygon,getLabelStatesModels(itemModel),{labelFetcher:maModel,labelDataIndex:idx,defaultText:areaData.getName(idx)||"",inheritColor:isString(style.fill)?modifyAlpha(style.fill,1):"#000"}),setStatesStylesFromModel(polygon,itemModel),toggleHoverEmphasis(polygon,null,null,itemModel.get(["emphasis","disabled"])),getECData(polygon).dataModel=maModel}),inner$2(polygonGroup).data=areaData,polygonGroup.group.silent=maModel.get("silent")||seriesModel.get("silent")},MarkAreaView2.type="markArea",MarkAreaView2}(MarkerView);var LegendModel=function(_super){function LegendModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=LegendModel2.type,_this.layoutMode={type:"box",ignoreSize:!0},_this}return __extends$1(LegendModel2,_super),LegendModel2.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),option.selected=option.selected||{},this._updateSelector(option)},LegendModel2.prototype.mergeOption=function(option,ecModel){_super.prototype.mergeOption.call(this,option,ecModel),this._updateSelector(option)},LegendModel2.prototype._updateSelector=function(option){var selector2=option.selector,ecModel=this.ecModel;!0===selector2&amp;&amp;(selector2=option.selector=["all","inverse"]),isArray$1(selector2)&amp;&amp;each$f(selector2,function(item,index){isString(item)&amp;&amp;(item={type:item}),selector2[index]=merge(item,function(ecModel,type){return"all"===type?{type:"all",title:ecModel.getLocaleModel().get(["legend","selector","all"])}:"inverse"===type?{type:"inverse",title:ecModel.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(ecModel,item.type))})},LegendModel2.prototype.optionUpdated=function(){this._updateData(this.ecModel);var legendData=this._data;if(legendData[0]&amp;&amp;"single"===this.get("selectedMode")){for(var hasSelected=!1,i=0;i&lt;legendData.length;i++){var name_1=legendData[i].get("name");if(this.isSelected(name_1)){this.select(name_1),hasSelected=!0;break}}!hasSelected&amp;&amp;this.select(legendData[0].get("name"))}},LegendModel2.prototype._updateData=function(ecModel){var potentialData=[],availableNames=[];ecModel.eachRawSeries(function(seriesModel){var isPotential,seriesName=seriesModel.name;if(availableNames.push(seriesName),seriesModel.legendVisualProvider){var names=seriesModel.legendVisualProvider.getAllNames();ecModel.isSeriesFiltered(seriesModel)||(availableNames=availableNames.concat(names)),names.length?potentialData=potentialData.concat(names):isPotential=!0}else isPotential=!0;isPotential&amp;&amp;isNameSpecified(seriesModel)&amp;&amp;potentialData.push(seriesModel.name)}),this._availableNames=availableNames;var rawData=this.get("data")||potentialData,legendNameMap=createHashMap(),legendData=map$1(rawData,function(dataItem){return(isString(dataItem)||isNumber(dataItem))&amp;&amp;(dataItem={name:dataItem}),legendNameMap.get(dataItem.name)?null:(legendNameMap.set(dataItem.name,!0),new Model(dataItem,this,this.ecModel))},this);this._data=filter(legendData,function(item){return!!item})},LegendModel2.prototype.getData=function(){return this._data},LegendModel2.prototype.select=function(name){var selected=this.option.selected;"single"===this.get("selectedMode")&amp;&amp;each$f(this._data,function(dataItem){selected[dataItem.get("name")]=!1});selected[name]=!0},LegendModel2.prototype.unSelect=function(name){"single"!==this.get("selectedMode")&amp;&amp;(this.option.selected[name]=!1)},LegendModel2.prototype.toggleSelected=function(name){var selected=this.option.selected;selected.hasOwnProperty(name)||(selected[name]=!0),this[selected[name]?"unSelect":"select"](name)},LegendModel2.prototype.allSelect=function(){var data=this._data,selected=this.option.selected;each$f(data,function(dataItem){selected[dataItem.get("name",!0)]=!0})},LegendModel2.prototype.inverseSelect=function(){var data=this._data,selected=this.option.selected;each$f(data,function(dataItem){var name=dataItem.get("name",!0);selected.hasOwnProperty(name)||(selected[name]=!0),selected[name]=!selected[name]})},LegendModel2.prototype.isSelected=function(name){var selected=this.option.selected;return!(selected.hasOwnProperty(name)&amp;&amp;!selected[name])&amp;&amp;indexOf(this._availableNames,name)&gt;=0},LegendModel2.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},LegendModel2.type="legend.plain",LegendModel2.dependencies=["series"],LegendModel2.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},LegendModel2}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(_super){function LegendView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=LegendView2.type,_this.newlineDisabled=!1,_this}return __extends$1(LegendView2,_super),LegendView2.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},LegendView2.prototype.getContentGroup=function(){return this._contentGroup},LegendView2.prototype.getSelectorGroup=function(){return this._selectorGroup},LegendView2.prototype.render=function(legendModel,ecModel,api){var isFirstRender=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),legendModel.get("show",!0)){var itemAlign=legendModel.get("align"),orient=legendModel.get("orient");itemAlign&amp;&amp;"auto"!==itemAlign||(itemAlign="right"===legendModel.get("left")&amp;&amp;"vertical"===orient?"right":"left");var selector2=legendModel.get("selector",!0),selectorPosition=legendModel.get("selectorPosition",!0);!selector2||selectorPosition&amp;&amp;"auto"!==selectorPosition||(selectorPosition="horizontal"===orient?"end":"start"),this.renderInner(itemAlign,legendModel,ecModel,api,selector2,orient,selectorPosition);var positionInfo=legendModel.getBoxLayoutParams(),viewportSize={width:api.getWidth(),height:api.getHeight()},padding=legendModel.get("padding"),maxSize=getLayoutRect(positionInfo,viewportSize,padding),mainRect=this.layoutInner(legendModel,itemAlign,maxSize,isFirstRender,selector2,selectorPosition),layoutRect=getLayoutRect(defaults({width:mainRect.width,height:mainRect.height},positionInfo),viewportSize,padding);this.group.x=layoutRect.x-mainRect.x,this.group.y=layoutRect.y-mainRect.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(mainRect,legendModel))}},LegendView2.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&amp;&amp;this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},LegendView2.prototype.renderInner=function(itemAlign,legendModel,ecModel,api,selector2,orient,selectorPosition){var contentGroup=this.getContentGroup(),legendDrawnMap=createHashMap(),selectMode=legendModel.get("selectedMode"),excludeSeriesId=[];ecModel.eachRawSeries(function(seriesModel){!seriesModel.get("legendHoverLink")&amp;&amp;excludeSeriesId.push(seriesModel.id)}),each$3(legendModel.getData(),function(legendItemModel,dataIndex){var name=legendItemModel.get("name");if(!this.newlineDisabled&amp;&amp;(""===name||"\n"===name)){var g=new Group$1;return g.newline=!0,void contentGroup.add(g)}var seriesModel=ecModel.getSeriesByName(name)[0];if(!legendDrawnMap.get(name))if(seriesModel){var data=seriesModel.getData(),lineVisualStyle=data.getVisual("legendLineStyle")||{},legendIcon=data.getVisual("legendIcon"),style=data.getVisual("style"),itemGroup=this._createItem(seriesModel,name,dataIndex,legendItemModel,legendModel,itemAlign,lineVisualStyle,style,legendIcon,selectMode,api);itemGroup.on("click",curry(dispatchSelectAction,name,null,api,excludeSeriesId)).on("mouseover",curry(dispatchHighlightAction,seriesModel.name,null,api,excludeSeriesId)).on("mouseout",curry(dispatchDownplayAction,seriesModel.name,null,api,excludeSeriesId)),ecModel.ssr&amp;&amp;itemGroup.eachChild(function(child){var ecData=getECData(child);ecData.seriesIndex=seriesModel.seriesIndex,ecData.dataIndex=dataIndex,ecData.ssrType="legend"}),legendDrawnMap.set(name,!0)}else ecModel.eachRawSeries(function(seriesModel2){if(!legendDrawnMap.get(name)&amp;&amp;seriesModel2.legendVisualProvider){var provider=seriesModel2.legendVisualProvider;if(!provider.containName(name))return;var idx=provider.indexOfName(name),style2=provider.getItemVisual(idx,"style"),legendIcon2=provider.getItemVisual(idx,"legendIcon"),colorArr=parse(style2.fill);colorArr&amp;&amp;0===colorArr[3]&amp;&amp;(colorArr[3]=.2,style2=extend(extend({},style2),{fill:stringify(colorArr,"rgba")}));var itemGroup2=this._createItem(seriesModel2,name,dataIndex,legendItemModel,legendModel,itemAlign,{},style2,legendIcon2,selectMode,api);itemGroup2.on("click",curry(dispatchSelectAction,null,name,api,excludeSeriesId)).on("mouseover",curry(dispatchHighlightAction,null,name,api,excludeSeriesId)).on("mouseout",curry(dispatchDownplayAction,null,name,api,excludeSeriesId)),ecModel.ssr&amp;&amp;itemGroup2.eachChild(function(child){var ecData=getECData(child);ecData.seriesIndex=seriesModel2.seriesIndex,ecData.dataIndex=dataIndex,ecData.ssrType="legend"}),legendDrawnMap.set(name,!0)}},this)},this),selector2&amp;&amp;this._createSelector(selector2,legendModel,api,orient,selectorPosition)},LegendView2.prototype._createSelector=function(selector2,legendModel,api,orient,selectorPosition){var selectorGroup=this.getSelectorGroup();each$3(selector2,function createSelectorButton(selectorItem){var type=selectorItem.type,labelText=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){api.dispatchAction({type:"all"===type?"legendAllSelect":"legendInverseSelect",legendId:legendModel.id})}});selectorGroup.add(labelText),setLabelStyle(labelText,{normal:legendModel.getModel("selectorLabel"),emphasis:legendModel.getModel(["emphasis","selectorLabel"])},{defaultText:selectorItem.title}),enableHoverEmphasis(labelText)})},LegendView2.prototype._createItem=function(seriesModel,name,dataIndex,legendItemModel,legendModel,itemAlign,lineVisualStyle,itemVisualStyle,legendIcon,selectMode,api){var drawType=seriesModel.visualDrawType,itemWidth=legendModel.get("itemWidth"),itemHeight=legendModel.get("itemHeight"),isSelected=legendModel.isSelected(name),iconRotate=legendItemModel.get("symbolRotate"),symbolKeepAspect=legendItemModel.get("symbolKeepAspect"),legendIconType=legendItemModel.get("icon"),style=function getLegendStyle(iconType,legendItemModel,lineVisualStyle,itemVisualStyle,drawType,isSelected,api){function handleCommonProps(style,visualStyle){"auto"===style.lineWidth&amp;&amp;(style.lineWidth=visualStyle.lineWidth&gt;0?2:0),each$3(style,function(propVal,propName){"inherit"===style[propName]&amp;&amp;(style[propName]=visualStyle[propName])})}var itemStyleModel=legendItemModel.getModel("itemStyle"),itemStyle=itemStyleModel.getItemStyle(),iconBrushType=0===iconType.lastIndexOf("empty",0)?"fill":"stroke",decalStyle=itemStyleModel.getShallow("decal");itemStyle.decal=decalStyle&amp;&amp;"inherit"!==decalStyle?createOrUpdatePatternFromDecal(decalStyle,api):itemVisualStyle.decal,"inherit"===itemStyle.fill&amp;&amp;(itemStyle.fill=itemVisualStyle[drawType]);"inherit"===itemStyle.stroke&amp;&amp;(itemStyle.stroke=itemVisualStyle[iconBrushType]);"inherit"===itemStyle.opacity&amp;&amp;(itemStyle.opacity=("fill"===drawType?itemVisualStyle:lineVisualStyle).opacity);handleCommonProps(itemStyle,itemVisualStyle);var legendLineModel=legendItemModel.getModel("lineStyle"),lineStyle=legendLineModel.getLineStyle();if(handleCommonProps(lineStyle,lineVisualStyle),"auto"===itemStyle.fill&amp;&amp;(itemStyle.fill=itemVisualStyle.fill),"auto"===itemStyle.stroke&amp;&amp;(itemStyle.stroke=itemVisualStyle.fill),"auto"===lineStyle.stroke&amp;&amp;(lineStyle.stroke=itemVisualStyle.fill),!isSelected){var borderWidth=legendItemModel.get("inactiveBorderWidth"),visualHasBorder=itemStyle[iconBrushType];itemStyle.lineWidth="auto"===borderWidth?itemVisualStyle.lineWidth&gt;0&amp;&amp;visualHasBorder?2:0:itemStyle.lineWidth,itemStyle.fill=legendItemModel.get("inactiveColor"),itemStyle.stroke=legendItemModel.get("inactiveBorderColor"),lineStyle.stroke=legendLineModel.get("inactiveColor"),lineStyle.lineWidth=legendLineModel.get("inactiveWidth")}return{itemStyle:itemStyle,lineStyle:lineStyle}}(legendIcon=legendIconType||legendIcon||"roundRect",legendItemModel,lineVisualStyle,itemVisualStyle,drawType,isSelected,api),itemGroup=new Group$1,textStyleModel=legendItemModel.getModel("textStyle");if(!isFunction(seriesModel.getLegendIcon)||legendIconType&amp;&amp;"inherit"!==legendIconType){var rotate2="inherit"===legendIconType&amp;&amp;seriesModel.getData().getVisual("symbol")?"inherit"===iconRotate?seriesModel.getData().getVisual("symbolRotate"):iconRotate:0;itemGroup.add(function getDefaultLegendIcon(opt){var symboType=opt.icon||"roundRect",icon=createSymbol$1(symboType,0,0,opt.itemWidth,opt.itemHeight,opt.itemStyle.fill,opt.symbolKeepAspect);icon.setStyle(opt.itemStyle),icon.rotation=(opt.iconRotate||0)*Math.PI/180,icon.setOrigin([opt.itemWidth/2,opt.itemHeight/2]),symboType.indexOf("empty")&gt;-1&amp;&amp;(icon.style.stroke=icon.style.fill,icon.style.fill="#fff",icon.style.lineWidth=2);return icon}({itemWidth:itemWidth,itemHeight:itemHeight,icon:legendIcon,iconRotate:rotate2,itemStyle:style.itemStyle,symbolKeepAspect:symbolKeepAspect}))}else itemGroup.add(seriesModel.getLegendIcon({itemWidth:itemWidth,itemHeight:itemHeight,icon:legendIcon,iconRotate:iconRotate,itemStyle:style.itemStyle,lineStyle:style.lineStyle,symbolKeepAspect:symbolKeepAspect}));var textX="left"===itemAlign?itemWidth+5:-5,textAlign=itemAlign,formatter=legendModel.get("formatter"),content=name;isString(formatter)&amp;&amp;formatter?content=formatter.replace("{name}",null!=name?name:""):isFunction(formatter)&amp;&amp;(content=formatter(name));var textColor=isSelected?textStyleModel.getTextColor():legendItemModel.get("inactiveColor");itemGroup.add(new ZRText({style:createTextStyle$1(textStyleModel,{text:content,x:textX,y:itemHeight/2,fill:textColor,align:textAlign,verticalAlign:"middle"},{inheritColor:textColor})}));var hitRect=new Rect$2({shape:itemGroup.getBoundingRect(),style:{fill:"transparent"}}),tooltipModel=legendItemModel.getModel("tooltip");return tooltipModel.get("show")&amp;&amp;setTooltipConfig({el:hitRect,componentModel:legendModel,itemName:name,itemTooltipOption:tooltipModel.option}),itemGroup.add(hitRect),itemGroup.eachChild(function(child){child.silent=!0}),hitRect.silent=!selectMode,this.getContentGroup().add(itemGroup),enableHoverEmphasis(itemGroup),itemGroup.__legendDataIndex=dataIndex,itemGroup},LegendView2.prototype.layoutInner=function(legendModel,itemAlign,maxSize,isFirstRender,selector2,selectorPosition){var contentGroup=this.getContentGroup(),selectorGroup=this.getSelectorGroup();box(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),maxSize.width,maxSize.height);var contentRect=contentGroup.getBoundingRect(),contentPos=[-contentRect.x,-contentRect.y];if(selectorGroup.markRedraw(),contentGroup.markRedraw(),selector2){box("horizontal",selectorGroup,legendModel.get("selectorItemGap",!0));var selectorRect=selectorGroup.getBoundingRect(),selectorPos=[-selectorRect.x,-selectorRect.y],selectorButtonGap=legendModel.get("selectorButtonGap",!0),orientIdx=legendModel.getOrient().index,wh=0===orientIdx?"width":"height",hw=0===orientIdx?"height":"width",yx=0===orientIdx?"y":"x";"end"===selectorPosition?selectorPos[orientIdx]+=contentRect[wh]+selectorButtonGap:contentPos[orientIdx]+=selectorRect[wh]+selectorButtonGap,selectorPos[1-orientIdx]+=contentRect[hw]/2-selectorRect[hw]/2,selectorGroup.x=selectorPos[0],selectorGroup.y=selectorPos[1],contentGroup.x=contentPos[0],contentGroup.y=contentPos[1];var mainRect={x:0,y:0};return mainRect[wh]=contentRect[wh]+selectorButtonGap+selectorRect[wh],mainRect[hw]=Math.max(contentRect[hw],selectorRect[hw]),mainRect[yx]=Math.min(0,selectorRect[yx]+selectorPos[1-orientIdx]),mainRect}return contentGroup.x=contentPos[0],contentGroup.y=contentPos[1],this.group.getBoundingRect()},LegendView2.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},LegendView2.type="legend.plain",LegendView2}(ComponentView);function dispatchSelectAction(seriesName,dataName,api,excludeSeriesId){dispatchDownplayAction(seriesName,dataName,api,excludeSeriesId),api.dispatchAction({type:"legendToggleSelect",name:null!=seriesName?seriesName:dataName}),dispatchHighlightAction(seriesName,dataName,api,excludeSeriesId)}function isUseHoverLayer(api){for(var emphasisState,list=api.getZr().storage.getDisplayList(),i=0,len2=list.length;i&lt;len2&amp;&amp;!(emphasisState=list[i].states.emphasis);)i++;return emphasisState&amp;&amp;emphasisState.hoverLayer}function dispatchHighlightAction(seriesName,dataName,api,excludeSeriesId){isUseHoverLayer(api)||api.dispatchAction({type:"highlight",seriesName:seriesName,name:dataName,excludeSeriesId:excludeSeriesId})}function dispatchDownplayAction(seriesName,dataName,api,excludeSeriesId){isUseHoverLayer(api)||api.dispatchAction({type:"downplay",seriesName:seriesName,name:dataName,excludeSeriesId:excludeSeriesId})}function legendFilter(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&amp;&amp;legendModels.length&amp;&amp;ecModel.filterSeries(function(series){for(var i=0;i&lt;legendModels.length;i++)if(!legendModels[i].isSelected(series.name))return!1;return!0})}function legendSelectActionHandler(methodName,payload,ecModel){var isAllSelect="allSelect"===methodName||"inverseSelect"===methodName,selectedMap={},actionLegendIndices=[];ecModel.eachComponent({mainType:"legend",query:payload},function(legendModel){isAllSelect?legendModel[methodName]():legendModel[methodName](payload.name),makeSelectedMap(legendModel,selectedMap),actionLegendIndices.push(legendModel.componentIndex)});var allSelectedMap={};return ecModel.eachComponent("legend",function(legendModel){each$f(selectedMap,function(isSelected,name){legendModel[isSelected?"select":"unSelect"](name)}),makeSelectedMap(legendModel,allSelectedMap)}),isAllSelect?{selected:allSelectedMap,legendIndex:actionLegendIndices}:{name:payload.name,selected:allSelectedMap}}function makeSelectedMap(legendModel,out2){var selectedMap=out2||{};return each$f(legendModel.getData(),function(model){var name=model.get("name");if("\n"!==name&amp;&amp;""!==name){var isItemSelected=legendModel.isSelected(name);hasOwn(selectedMap,name)?selectedMap[name]=selectedMap[name]&amp;&amp;isItemSelected:selectedMap[name]=isItemSelected}}),selectedMap}function install$b(registers){registers.registerComponentModel(LegendModel),registers.registerComponentView(LegendView),registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),registers.registerSubTypeDefaulter("legend",function(){return"plain"}),function installLegendAction(registers){registers.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),registers.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),registers.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),registers.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),registers.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}(registers)}var ScrollableLegendModel=function(_super){function ScrollableLegendModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ScrollableLegendModel2.type,_this}return __extends$1(ScrollableLegendModel2,_super),ScrollableLegendModel2.prototype.setScrollDataIndex=function(scrollDataIndex){this.option.scrollDataIndex=scrollDataIndex},ScrollableLegendModel2.prototype.init=function(option,parentModel,ecModel){var inputPositionParams=getLayoutParams(option);_super.prototype.init.call(this,option,parentModel,ecModel),mergeAndNormalizeLayoutParams(this,option,inputPositionParams)},ScrollableLegendModel2.prototype.mergeOption=function(option,ecModel){_super.prototype.mergeOption.call(this,option,ecModel),mergeAndNormalizeLayoutParams(this,this.option,option)},ScrollableLegendModel2.type="legend.scroll",ScrollableLegendModel2.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),ScrollableLegendModel2}(LegendModel);function mergeAndNormalizeLayoutParams(legendModel,target,raw){var ignoreSize=[1,1];ignoreSize[legendModel.getOrient().index]=0,mergeLayoutParam(target,raw,{type:"box",ignoreSize:!!ignoreSize})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(_super){function ScrollableLegendView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ScrollableLegendView2.type,_this.newlineDisabled=!0,_this._currentIndex=0,_this}return __extends$1(ScrollableLegendView2,_super),ScrollableLegendView2.prototype.init=function(){_super.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},ScrollableLegendView2.prototype.resetInner=function(){_super.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},ScrollableLegendView2.prototype.renderInner=function(itemAlign,legendModel,ecModel,api,selector2,orient,selectorPosition){var self2=this;_super.prototype.renderInner.call(this,itemAlign,legendModel,ecModel,api,selector2,orient,selectorPosition);var controllerGroup=this._controllerGroup,pageIconSize=legendModel.get("pageIconSize",!0),pageIconSizeArr=isArray$1(pageIconSize)?pageIconSize:[pageIconSize,pageIconSize];createPageButton("pagePrev",0);var pageTextStyleModel=legendModel.getModel("pageTextStyle");function createPageButton(name,iconIdx){var pageDataIndexName=name+"DataIndex",icon=createIcon(legendModel.get("pageIcons",!0)[legendModel.getOrient().name][iconIdx],{onclick:bind$1(self2._pageGo,self2,pageDataIndexName,legendModel,api)},{x:-pageIconSizeArr[0]/2,y:-pageIconSizeArr[1]/2,width:pageIconSizeArr[0],height:pageIconSizeArr[1]});icon.name=name,controllerGroup.add(icon)}controllerGroup.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:pageTextStyleModel.getTextColor(),font:pageTextStyleModel.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),createPageButton("pageNext",1)},ScrollableLegendView2.prototype.layoutInner=function(legendModel,itemAlign,maxSize,isFirstRender,selector2,selectorPosition){var selectorGroup=this.getSelectorGroup(),orientIdx=legendModel.getOrient().index,wh=WH[orientIdx],xy=XY[orientIdx],hw=WH[1-orientIdx],yx=XY[1-orientIdx];selector2&amp;&amp;box("horizontal",selectorGroup,legendModel.get("selectorItemGap",!0));var selectorButtonGap=legendModel.get("selectorButtonGap",!0),selectorRect=selectorGroup.getBoundingRect(),selectorPos=[-selectorRect.x,-selectorRect.y],processMaxSize=clone$4(maxSize);selector2&amp;&amp;(processMaxSize[wh]=maxSize[wh]-selectorRect[wh]-selectorButtonGap);var mainRect=this._layoutContentAndController(legendModel,isFirstRender,processMaxSize,orientIdx,wh,hw,yx,xy);if(selector2){if("end"===selectorPosition)selectorPos[orientIdx]+=mainRect[wh]+selectorButtonGap;else{var offset=selectorRect[wh]+selectorButtonGap;selectorPos[orientIdx]-=offset,mainRect[xy]-=offset}mainRect[wh]+=selectorRect[wh]+selectorButtonGap,selectorPos[1-orientIdx]+=mainRect[yx]+mainRect[hw]/2-selectorRect[hw]/2,mainRect[hw]=Math.max(mainRect[hw],selectorRect[hw]),mainRect[yx]=Math.min(mainRect[yx],selectorRect[yx]+selectorPos[1-orientIdx]),selectorGroup.x=selectorPos[0],selectorGroup.y=selectorPos[1],selectorGroup.markRedraw()}return mainRect},ScrollableLegendView2.prototype._layoutContentAndController=function(legendModel,isFirstRender,maxSize,orientIdx,wh,hw,yx,xy){var contentGroup=this.getContentGroup(),containerGroup=this._containerGroup,controllerGroup=this._controllerGroup;box(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),orientIdx?maxSize.width:null,orientIdx?null:maxSize.height),box("horizontal",controllerGroup,legendModel.get("pageButtonItemGap",!0));var contentRect=contentGroup.getBoundingRect(),controllerRect=controllerGroup.getBoundingRect(),showController=this._showController=contentRect[wh]&gt;maxSize[wh],contentPos=[-contentRect.x,-contentRect.y];isFirstRender||(contentPos[orientIdx]=contentGroup[xy]);var containerPos=[0,0],controllerPos=[-controllerRect.x,-controllerRect.y],pageButtonGap=retrieve2(legendModel.get("pageButtonGap",!0),legendModel.get("itemGap",!0));showController&amp;&amp;("end"===legendModel.get("pageButtonPosition",!0)?controllerPos[orientIdx]+=maxSize[wh]-controllerRect[wh]:containerPos[orientIdx]+=controllerRect[wh]+pageButtonGap);controllerPos[1-orientIdx]+=contentRect[hw]/2-controllerRect[hw]/2,contentGroup.setPosition(contentPos),containerGroup.setPosition(containerPos),controllerGroup.setPosition(controllerPos);var mainRect={x:0,y:0};if(mainRect[wh]=showController?maxSize[wh]:contentRect[wh],mainRect[hw]=Math.max(contentRect[hw],controllerRect[hw]),mainRect[yx]=Math.min(0,controllerRect[yx]+controllerPos[1-orientIdx]),containerGroup.__rectSize=maxSize[wh],showController){var clipShape={x:0,y:0};clipShape[wh]=Math.max(maxSize[wh]-controllerRect[wh]-pageButtonGap,0),clipShape[hw]=mainRect[hw],containerGroup.setClipPath(new Rect$2({shape:clipShape})),containerGroup.__rectSize=clipShape[wh]}else controllerGroup.eachChild(function(child){child.attr({invisible:!0,silent:!0})});var pageInfo=this._getPageInfo(legendModel);return null!=pageInfo.pageIndex&amp;&amp;updateProps$1(contentGroup,{x:pageInfo.contentPosition[0],y:pageInfo.contentPosition[1]},showController?legendModel:null),this._updatePageInfoView(legendModel,pageInfo),mainRect},ScrollableLegendView2.prototype._pageGo=function(to,legendModel,api){var scrollDataIndex=this._getPageInfo(legendModel)[to];null!=scrollDataIndex&amp;&amp;api.dispatchAction({type:"legendScroll",scrollDataIndex:scrollDataIndex,legendId:legendModel.id})},ScrollableLegendView2.prototype._updatePageInfoView=function(legendModel,pageInfo){var controllerGroup=this._controllerGroup;each$f(["pagePrev","pageNext"],function(name){var canJump=null!=pageInfo[name+"DataIndex"],icon=controllerGroup.childOfName(name);icon&amp;&amp;(icon.setStyle("fill",canJump?legendModel.get("pageIconColor",!0):legendModel.get("pageIconInactiveColor",!0)),icon.cursor=canJump?"pointer":"default")});var pageText=controllerGroup.childOfName("pageText"),pageFormatter=legendModel.get("pageFormatter"),pageIndex=pageInfo.pageIndex,current=null!=pageIndex?pageIndex+1:0,total=pageInfo.pageCount;pageText&amp;&amp;pageFormatter&amp;&amp;pageText.setStyle("text",isString(pageFormatter)?pageFormatter.replace("{current}",null==current?"":current+"").replace("{total}",null==total?"":total+""):pageFormatter({current:current,total:total}))},ScrollableLegendView2.prototype._getPageInfo=function(legendModel){var scrollDataIndex=legendModel.get("scrollDataIndex",!0),contentGroup=this.getContentGroup(),containerRectSize=this._containerGroup.__rectSize,orientIdx=legendModel.getOrient().index,wh=WH[orientIdx],xy=XY[orientIdx],targetItemIndex=this._findTargetItemIndex(scrollDataIndex),children=contentGroup.children(),targetItem=children[targetItemIndex],itemCount=children.length,pCount=itemCount?1:0,result={contentPosition:[contentGroup.x,contentGroup.y],pageCount:pCount,pageIndex:pCount-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!targetItem)return result;var targetItemInfo=getItemInfo(targetItem);result.contentPosition[orientIdx]=-targetItemInfo.s;for(var i=targetItemIndex+1,winStartItemInfo=targetItemInfo,winEndItemInfo=targetItemInfo,currItemInfo=null;i&lt;=itemCount;++i)(!(currItemInfo=getItemInfo(children[i]))&amp;&amp;winEndItemInfo.e&gt;winStartItemInfo.s+containerRectSize||currItemInfo&amp;&amp;!intersect2(currItemInfo,winStartItemInfo.s))&amp;&amp;(winStartItemInfo=winEndItemInfo.i&gt;winStartItemInfo.i?winEndItemInfo:currItemInfo)&amp;&amp;(null==result.pageNextDataIndex&amp;&amp;(result.pageNextDataIndex=winStartItemInfo.i),++result.pageCount),winEndItemInfo=currItemInfo;for(i=targetItemIndex-1,winStartItemInfo=targetItemInfo,winEndItemInfo=targetItemInfo,currItemInfo=null;i&gt;=-1;--i)(currItemInfo=getItemInfo(children[i]))&amp;&amp;intersect2(winEndItemInfo,currItemInfo.s)||!(winStartItemInfo.i&lt;winEndItemInfo.i)||(winEndItemInfo=winStartItemInfo,null==result.pagePrevDataIndex&amp;&amp;(result.pagePrevDataIndex=winStartItemInfo.i),++result.pageCount,++result.pageIndex),winStartItemInfo=currItemInfo;return result;function getItemInfo(el){if(el){var itemRect=el.getBoundingRect(),start2=itemRect[xy]+el[xy];return{s:start2,e:start2+itemRect[wh],i:el.__legendDataIndex}}}function intersect2(itemInfo,winStart){return itemInfo.e&gt;=winStart&amp;&amp;itemInfo.s&lt;=winStart+containerRectSize}},ScrollableLegendView2.prototype._findTargetItemIndex=function(targetDataIndex){return this._showController?(this.getContentGroup().eachChild(function(child,idx){var legendDataIdx=child.__legendDataIndex;null==defaultIndex&amp;&amp;null!=legendDataIdx&amp;&amp;(defaultIndex=idx),legendDataIdx===targetDataIndex&amp;&amp;(index=idx)}),null!=index?index:defaultIndex):0;var index,defaultIndex},ScrollableLegendView2.type="legend.scroll",ScrollableLegendView2}(LegendView);function install$a(registers){use(install$b),registers.registerComponentModel(ScrollableLegendModel),registers.registerComponentView(ScrollableLegendView),function installScrollableLegendAction(registers){registers.registerAction("legendScroll","legendscroll",function(payload,ecModel){var scrollDataIndex=payload.scrollDataIndex;null!=scrollDataIndex&amp;&amp;ecModel.eachComponent({mainType:"legend",subType:"scroll",query:payload},function(legendModel){legendModel.setScrollDataIndex(scrollDataIndex)})})}(registers)}function install$9(registers){use(install$b),use(install$a)}var InsideZoomModel=function(_super){function InsideZoomModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=InsideZoomModel2.type,_this}return __extends$1(InsideZoomModel2,_super),InsideZoomModel2.type="dataZoom.inside",InsideZoomModel2.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),InsideZoomModel2}(DataZoomModel),inner$1=makeInner();function disposeCoordSysRecord(coordSysRecordMap,coordSysRecord){if(coordSysRecord){coordSysRecordMap.removeKey(coordSysRecord.model.uid);var controller=coordSysRecord.controller;controller&amp;&amp;controller.dispose()}}function dispatchAction(api,batch){api.isDisposed()||api.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:batch})}function containsPoint(coordSysModel,e2,x,y){return coordSysModel.coordinateSystem.containPoint([x,y])}function installDataZoomRoamProcessor(registers){registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER,function(ecModel,api){var apiInner=inner$1(api),coordSysRecordMap=apiInner.coordSysRecordMap||(apiInner.coordSysRecordMap=createHashMap());coordSysRecordMap.each(function(coordSysRecord){coordSysRecord.dataZoomInfoMap=null}),ecModel.eachComponent({mainType:"dataZoom",subType:"inside"},function(dataZoomModel){each$f(collectReferCoordSysModelInfo(dataZoomModel).infoList,function(dzCoordSysInfo){var coordSysUid=dzCoordSysInfo.model.uid,coordSysRecord=coordSysRecordMap.get(coordSysUid)||coordSysRecordMap.set(coordSysUid,function createCoordSysRecord(api,coordSysModel){var coordSysRecord={model:coordSysModel,containsPoint:curry$1(containsPoint,coordSysModel),dispatchAction:curry$1(dispatchAction,api),dataZoomInfoMap:null,controller:null},controller=coordSysRecord.controller=new RoamController(api.getZr());return each$f(["pan","zoom","scrollMove"],function(eventName){controller.on(eventName,function(event){var batch=[];coordSysRecord.dataZoomInfoMap.each(function(dzInfo){if(event.isAvailableBehavior(dzInfo.model.option)){var method=(dzInfo.getRange||{})[eventName],range=method&amp;&amp;method(dzInfo.dzReferCoordSysInfo,coordSysRecord.model.mainType,coordSysRecord.controller,event);!dzInfo.model.get("disabled",!0)&amp;&amp;range&amp;&amp;batch.push({dataZoomId:dzInfo.model.id,start:range[0],end:range[1]})}}),batch.length&amp;&amp;coordSysRecord.dispatchAction(batch)})}),coordSysRecord}(api,dzCoordSysInfo.model));(coordSysRecord.dataZoomInfoMap||(coordSysRecord.dataZoomInfoMap=createHashMap())).set(dataZoomModel.uid,{dzReferCoordSysInfo:dzCoordSysInfo,model:dataZoomModel,getRange:null})})}),coordSysRecordMap.each(function(coordSysRecord){var firstDzInfo,controller=coordSysRecord.controller,dataZoomInfoMap=coordSysRecord.dataZoomInfoMap;if(dataZoomInfoMap){var firstDzKey=dataZoomInfoMap.keys()[0];null!=firstDzKey&amp;&amp;(firstDzInfo=dataZoomInfoMap.get(firstDzKey))}if(firstDzInfo){var controllerParams=function mergeControllerParams(dataZoomInfoMap){var controlType,typePriority={type_true:2,type_move:1,type_false:0,type_undefined:-1},preventDefaultMouseMove=!0;return dataZoomInfoMap.each(function(dataZoomInfo){var dataZoomModel=dataZoomInfo.model,oneType=!dataZoomModel.get("disabled",!0)&amp;&amp;(!dataZoomModel.get("zoomLock",!0)||"move");typePriority["type_"+oneType]&gt;typePriority["type_"+controlType]&amp;&amp;(controlType=oneType),preventDefaultMouseMove=preventDefaultMouseMove&amp;&amp;dataZoomModel.get("preventDefaultMouseMove",!0)}),{controlType:controlType,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!preventDefaultMouseMove}}}(dataZoomInfoMap);controller.enable(controllerParams.controlType,controllerParams.opt),controller.setPointerChecker(coordSysRecord.containsPoint),createOrUpdate(coordSysRecord,"dispatchAction",firstDzInfo.model.get("throttle",!0),"fixRate")}else disposeCoordSysRecord(coordSysRecordMap,coordSysRecord)})})}var InsideZoomView=function(_super){function InsideZoomView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="dataZoom.inside",_this}return __extends$1(InsideZoomView2,_super),InsideZoomView2.prototype.render=function(dataZoomModel,ecModel,api){_super.prototype.render.apply(this,arguments),dataZoomModel.noTarget()?this._clear():(this.range=dataZoomModel.getPercentRange(),function setViewInfoToCoordSysRecord(api,dataZoomModel,getRange){inner$1(api).coordSysRecordMap.each(function(coordSysRecord){var dzInfo=coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);dzInfo&amp;&amp;(dzInfo.getRange=getRange)})}(api,dataZoomModel,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)}))},InsideZoomView2.prototype.dispose=function(){this._clear(),_super.prototype.dispose.apply(this,arguments)},InsideZoomView2.prototype._clear=function(){!function disposeCoordSysRecordIfNeeded(api,dataZoomModel){for(var coordSysRecordMap=inner$1(api).coordSysRecordMap,coordSysKeyArr=coordSysRecordMap.keys(),i=0;i&lt;coordSysKeyArr.length;i++){var coordSysKey=coordSysKeyArr[i],coordSysRecord=coordSysRecordMap.get(coordSysKey),dataZoomInfoMap=coordSysRecord.dataZoomInfoMap;if(dataZoomInfoMap){var dzUid=dataZoomModel.uid;dataZoomInfoMap.get(dzUid)&amp;&amp;(dataZoomInfoMap.removeKey(dzUid),dataZoomInfoMap.keys().length||disposeCoordSysRecord(coordSysRecordMap,coordSysRecord))}}}(this.api,this.dataZoomModel),this.range=null},InsideZoomView2.type="dataZoom.inside",InsideZoomView2}(DataZoomView),getRangeHandlers={zoom:function(coordSysInfo,coordSysMainType,controller,e2){var lastRange=this.range,range=lastRange.slice(),axisModel=coordSysInfo.axisModels[0];if(axisModel){var directionInfo=getDirectionInfo[coordSysMainType](null,[e2.originX,e2.originY],axisModel,controller,coordSysInfo),percentPoint=(directionInfo.signal&gt;0?directionInfo.pixelStart+directionInfo.pixelLength-directionInfo.pixel:directionInfo.pixel-directionInfo.pixelStart)/directionInfo.pixelLength*(range[1]-range[0])+range[0],scale2=Math.max(1/e2.scale,0);range[0]=(range[0]-percentPoint)*scale2+percentPoint,range[1]=(range[1]-percentPoint)*scale2+percentPoint;var minMaxSpan=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return sliderMove(0,range,[0,100],0,minMaxSpan.minSpan,minMaxSpan.maxSpan),this.range=range,lastRange[0]!==range[0]||lastRange[1]!==range[1]?range:void 0}},pan:makeMover(function(range,axisModel,coordSysInfo,coordSysMainType,controller,e2){var directionInfo=getDirectionInfo[coordSysMainType]([e2.oldX,e2.oldY],[e2.newX,e2.newY],axisModel,controller,coordSysInfo);return directionInfo.signal*(range[1]-range[0])*directionInfo.pixel/directionInfo.pixelLength}),scrollMove:makeMover(function(range,axisModel,coordSysInfo,coordSysMainType,controller,e2){return getDirectionInfo[coordSysMainType]([0,0],[e2.scrollDelta,e2.scrollDelta],axisModel,controller,coordSysInfo).signal*(range[1]-range[0])*e2.scrollDelta})};function makeMover(getPercentDelta){return function(coordSysInfo,coordSysMainType,controller,e2){var lastRange=this.range,range=lastRange.slice(),axisModel=coordSysInfo.axisModels[0];if(axisModel)return sliderMove(getPercentDelta(range,axisModel,coordSysInfo,coordSysMainType,controller,e2),range,[0,100],"all"),this.range=range,lastRange[0]!==range[0]||lastRange[1]!==range[1]?range:void 0}}var getDirectionInfo={grid:function(oldPoint,newPoint,axisModel,controller,coordSysInfo){var axis=axisModel.axis,ret={},rect=coordSysInfo.model.coordinateSystem.getRect();return oldPoint=oldPoint||[0,0],"x"===axis.dim?(ret.pixel=newPoint[0]-oldPoint[0],ret.pixelLength=rect.width,ret.pixelStart=rect.x,ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],ret.pixelLength=rect.height,ret.pixelStart=rect.y,ret.signal=axis.inverse?-1:1),ret},polar:function(oldPoint,newPoint,axisModel,controller,coordSysInfo){var axis=axisModel.axis,ret={},polar=coordSysInfo.model.coordinateSystem,radiusExtent=polar.getRadiusAxis().getExtent(),angleExtent=polar.getAngleAxis().getExtent();return oldPoint=oldPoint?polar.pointToCoord(oldPoint):[0,0],newPoint=polar.pointToCoord(newPoint),"radiusAxis"===axisModel.mainType?(ret.pixel=newPoint[0]-oldPoint[0],ret.pixelLength=radiusExtent[1]-radiusExtent[0],ret.pixelStart=radiusExtent[0],ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],ret.pixelLength=angleExtent[1]-angleExtent[0],ret.pixelStart=angleExtent[0],ret.signal=axis.inverse?-1:1),ret},singleAxis:function(oldPoint,newPoint,axisModel,controller,coordSysInfo){var axis=axisModel.axis,rect=coordSysInfo.model.coordinateSystem.getRect(),ret={};return oldPoint=oldPoint||[0,0],"horizontal"===axis.orient?(ret.pixel=newPoint[0]-oldPoint[0],ret.pixelLength=rect.width,ret.pixelStart=rect.x,ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],ret.pixelLength=rect.height,ret.pixelStart=rect.y,ret.signal=axis.inverse?-1:1),ret}};function install$8(registers){installCommon$1(registers),registers.registerComponentModel(InsideZoomModel),registers.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(registers)}var SliderZoomModel=function(_super){function SliderZoomModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SliderZoomModel2.type,_this}return __extends$1(SliderZoomModel2,_super),SliderZoomModel2.type="dataZoom.slider",SliderZoomModel2.layoutMode="box",SliderZoomModel2.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),SliderZoomModel2}(DataZoomModel),Rect=Rect$2,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(_super){function SliderZoomView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=SliderZoomView2.type,_this._displayables={},_this}return __extends$1(SliderZoomView2,_super),SliderZoomView2.prototype.init=function(ecModel,api){this.api=api,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},SliderZoomView2.prototype.render=function(dataZoomModel,ecModel,api,payload){if(_super.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",dataZoomModel.get("throttle"),"fixRate"),this._orient=dataZoomModel.getOrient(),!1!==dataZoomModel.get("show")){if(dataZoomModel.noTarget())return this._clear(),void this.group.removeAll();payload&amp;&amp;"dataZoom"===payload.type&amp;&amp;payload.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},SliderZoomView2.prototype.dispose=function(){this._clear(),_super.prototype.dispose.apply(this,arguments)},SliderZoomView2.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var zr=this.api.getZr();zr.off("mousemove",this._onBrush),zr.off("mouseup",this._onBrushEnd)},SliderZoomView2.prototype._buildView=function(){var thisGroup=this.group;thisGroup.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var barGroup=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),thisGroup.add(barGroup),this._positionGroup()},SliderZoomView2.prototype._resetLocation=function(){var dataZoomModel=this.dataZoomModel,api=this.api,moveHandleSize=dataZoomModel.get("brushSelect")?7:0,coordRect=this._findCoordRect(),ecSize={width:api.getWidth(),height:api.getHeight()},positionInfo="horizontal"===this._orient?{right:ecSize.width-coordRect.x-coordRect.width,top:ecSize.height-30-7-moveHandleSize,width:coordRect.width,height:30}:{right:7,top:coordRect.y,width:30,height:coordRect.height},layoutParams=getLayoutParams(dataZoomModel.option);each$f(["right","top","width","height"],function(name){"ph"===layoutParams[name]&amp;&amp;(layoutParams[name]=positionInfo[name])});var layoutRect=getLayoutRect(layoutParams,ecSize);this._location={x:layoutRect.x,y:layoutRect.y},this._size=[layoutRect.width,layoutRect.height],"vertical"===this._orient&amp;&amp;this._size.reverse()},SliderZoomView2.prototype._positionGroup=function(){var thisGroup=this.group,location=this._location,orient=this._orient,targetAxisModel=this.dataZoomModel.getFirstTargetAxisModel(),inverse=targetAxisModel&amp;&amp;targetAxisModel.get("inverse"),sliderGroup=this._displayables.sliderGroup,otherAxisInverse=(this._dataShadowInfo||{}).otherAxisInverse;sliderGroup.attr("horizontal"!==orient||inverse?"horizontal"===orient&amp;&amp;inverse?{scaleY:otherAxisInverse?1:-1,scaleX:-1}:"vertical"!==orient||inverse?{scaleY:otherAxisInverse?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:otherAxisInverse?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:otherAxisInverse?1:-1,scaleX:1});var rect=thisGroup.getBoundingRect([sliderGroup]);thisGroup.x=location.x-rect.x,thisGroup.y=location.y-rect.y,thisGroup.markRedraw()},SliderZoomView2.prototype._getViewExtent=function(){return[0,this._size[0]]},SliderZoomView2.prototype._renderBackground=function(){var dataZoomModel=this.dataZoomModel,size=this._size,barGroup=this._displayables.sliderGroup,brushSelect=dataZoomModel.get("brushSelect");barGroup.add(new Rect({silent:!0,shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:dataZoomModel.get("backgroundColor")},z2:-40}));var clickPanel=new Rect({shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),zr=this.api.getZr();brushSelect?(clickPanel.on("mousedown",this._onBrushStart,this),clickPanel.cursor="crosshair",zr.on("mousemove",this._onBrush),zr.on("mouseup",this._onBrushEnd)):(zr.off("mousemove",this._onBrush),zr.off("mouseup",this._onBrushEnd)),barGroup.add(clickPanel)},SliderZoomView2.prototype._renderDataShadow=function(){var info=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],info){var size=this._size,oldSize=this._shadowSize||[],seriesModel=info.series,data=seriesModel.getRawData(),candlestickDim=seriesModel.getShadowDim&amp;&amp;seriesModel.getShadowDim(),otherDim=candlestickDim&amp;&amp;data.getDimensionInfo(candlestickDim)?seriesModel.getShadowDim():info.otherDim;if(null!=otherDim){var polygonPts=this._shadowPolygonPts,polylinePts=this._shadowPolylinePts;if(data!==this._shadowData||otherDim!==this._shadowDim||size[0]!==oldSize[0]||size[1]!==oldSize[1]){var otherDataExtent_1=data.getDataExtent(otherDim),otherOffset=.3*(otherDataExtent_1[1]-otherDataExtent_1[0]);otherDataExtent_1=[otherDataExtent_1[0]-otherOffset,otherDataExtent_1[1]+otherOffset];var lastIsEmpty_1,otherShadowExtent_1=[0,size[1]],thisShadowExtent=[0,size[0]],areaPoints_1=[[size[0],0],[0,0]],linePoints_1=[],step_1=thisShadowExtent[1]/(data.count()-1),thisCoord_1=0,stride_1=Math.round(data.count()/size[0]);data.each([otherDim],function(value,index){if(stride_1&gt;0&amp;&amp;index%stride_1)thisCoord_1+=step_1;else{var isEmpty=null==value||isNaN(value)||""===value,otherCoord=isEmpty?0:linearMap$2(value,otherDataExtent_1,otherShadowExtent_1,!0);isEmpty&amp;&amp;!lastIsEmpty_1&amp;&amp;index?(areaPoints_1.push([areaPoints_1[areaPoints_1.length-1][0],0]),linePoints_1.push([linePoints_1[linePoints_1.length-1][0],0])):!isEmpty&amp;&amp;lastIsEmpty_1&amp;&amp;(areaPoints_1.push([thisCoord_1,0]),linePoints_1.push([thisCoord_1,0])),areaPoints_1.push([thisCoord_1,otherCoord]),linePoints_1.push([thisCoord_1,otherCoord]),thisCoord_1+=step_1,lastIsEmpty_1=isEmpty}}),polygonPts=this._shadowPolygonPts=areaPoints_1,polylinePts=this._shadowPolylinePts=linePoints_1}this._shadowData=data,this._shadowDim=otherDim,this._shadowSize=[size[0],size[1]];for(var dataZoomModel=this.dataZoomModel,i=0;i&lt;3;i++){var group=createDataShadowGroup(1===i);this._displayables.sliderGroup.add(group),this._displayables.dataShadowSegs.push(group)}}}function createDataShadowGroup(isSelectedArea){var model=dataZoomModel.getModel(isSelectedArea?"selectedDataBackground":"dataBackground"),group2=new Group$3,polygon=new Polygon({shape:{points:polygonPts},segmentIgnoreThreshold:1,style:model.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),polyline=new Polyline$1({shape:{points:polylinePts},segmentIgnoreThreshold:1,style:model.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return group2.add(polygon),group2.add(polyline),group2}},SliderZoomView2.prototype._prepareDataShadowInfo=function(){var dataZoomModel=this.dataZoomModel,showDataShadow=dataZoomModel.get("showDataShadow");if(!1!==showDataShadow){var result,ecModel=this.ecModel;return dataZoomModel.eachTargetAxis(function(axisDim,axisIndex){each$f(dataZoomModel.getAxisProxy(axisDim,axisIndex).getTargetSeriesModels(),function(seriesModel){if(!(result||!0!==showDataShadow&amp;&amp;indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,seriesModel.get("type"))&lt;0)){var otherAxisInverse,thisAxis=ecModel.getComponent(getAxisMainType(axisDim),axisIndex).axis,otherDim=function getOtherDim(thisDim){return{x:"y",y:"x",radius:"angle",angle:"radius"}[thisDim]}(axisDim),coordSys=seriesModel.coordinateSystem;null!=otherDim&amp;&amp;coordSys.getOtherAxis&amp;&amp;(otherAxisInverse=coordSys.getOtherAxis(thisAxis).inverse),otherDim=seriesModel.getData().mapDimension(otherDim),result={thisAxis:thisAxis,series:seriesModel,thisDim:axisDim,otherDim:otherDim,otherAxisInverse:otherAxisInverse}}},this)},this),result}},SliderZoomView2.prototype._renderHandle=function(){var thisGroup=this.group,displayables=this._displayables,handles=displayables.handles=[null,null],handleLabels=displayables.handleLabels=[null,null],sliderGroup=this._displayables.sliderGroup,size=this._size,dataZoomModel=this.dataZoomModel,api=this.api,borderRadius=dataZoomModel.get("borderRadius")||0,brushSelect=dataZoomModel.get("brushSelect"),filler=displayables.filler=new Rect({silent:brushSelect,style:{fill:dataZoomModel.get("fillerColor")},textConfig:{position:"inside"}});sliderGroup.add(filler),sliderGroup.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:size[0],height:size[1],r:borderRadius},style:{stroke:dataZoomModel.get("dataBackgroundColor")||dataZoomModel.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(handleIndex){var iconStr=dataZoomModel.get("handleIcon");!symbolBuildProxies[iconStr]&amp;&amp;iconStr.indexOf("path://")&lt;0&amp;&amp;iconStr.indexOf("image://")&lt;0&amp;&amp;(iconStr="path://"+iconStr);var path=createSymbol$1(iconStr,-1,0,2,2,null,!0);path.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,handleIndex),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var bRect=path.getBoundingRect(),handleSize=dataZoomModel.get("handleSize");this._handleHeight=parsePercent(handleSize,this._size[1]),this._handleWidth=bRect.width/bRect.height*this._handleHeight,path.setStyle(dataZoomModel.getModel("handleStyle").getItemStyle()),path.style.strokeNoScale=!0,path.rectHover=!0,path.ensureState("emphasis").style=dataZoomModel.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(path);var handleColor=dataZoomModel.get("handleColor");null!=handleColor&amp;&amp;(path.style.fill=handleColor),sliderGroup.add(handles[handleIndex]=path);var textStyleModel=dataZoomModel.getModel("textStyle"),handleLabelShow=(dataZoomModel.get("handleLabel")||{}).show||!1;thisGroup.add(handleLabels[handleIndex]=new ZRText({silent:!0,invisible:!handleLabelShow,style:createTextStyle$1(textStyleModel,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:textStyleModel.getTextColor(),font:textStyleModel.getFont()}),z2:10}))},this);var actualMoveZone=filler;if(brushSelect){var moveHandleHeight=parsePercent(dataZoomModel.get("moveHandleSize"),size[1]),moveHandle_1=displayables.moveHandle=new Rect$2({style:dataZoomModel.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:size[1]-.5,height:moveHandleHeight}}),iconSize=.8*moveHandleHeight,moveHandleIcon=displayables.moveHandleIcon=createSymbol$1(dataZoomModel.get("moveHandleIcon"),-iconSize/2,-iconSize/2,iconSize,iconSize,"#fff",!0);moveHandleIcon.silent=!0,moveHandleIcon.y=size[1]+moveHandleHeight/2-.5,moveHandle_1.ensureState("emphasis").style=dataZoomModel.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var moveZoneExpandSize=Math.min(size[1]/2,Math.max(moveHandleHeight,10));(actualMoveZone=displayables.moveZone=new Rect$2({invisible:!0,shape:{y:size[1]-moveZoneExpandSize,height:moveHandleHeight+moveZoneExpandSize}})).on("mouseover",function(){api.enterEmphasis(moveHandle_1)}).on("mouseout",function(){api.leaveEmphasis(moveHandle_1)}),sliderGroup.add(moveHandle_1),sliderGroup.add(moveHandleIcon),sliderGroup.add(actualMoveZone)}actualMoveZone.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},SliderZoomView2.prototype._resetInterval=function(){var range=this._range=this.dataZoomModel.getPercentRange(),viewExtent=this._getViewExtent();this._handleEnds=[linearMap$2(range[0],[0,100],viewExtent,!0),linearMap$2(range[1],[0,100],viewExtent,!0)]},SliderZoomView2.prototype._updateInterval=function(handleIndex,delta){var dataZoomModel=this.dataZoomModel,handleEnds=this._handleEnds,viewExtend=this._getViewExtent(),minMaxSpan=dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan(),percentExtent=[0,100];sliderMove(delta,handleEnds,viewExtend,dataZoomModel.get("zoomLock")?"all":handleIndex,null!=minMaxSpan.minSpan?linearMap$2(minMaxSpan.minSpan,percentExtent,viewExtend,!0):null,null!=minMaxSpan.maxSpan?linearMap$2(minMaxSpan.maxSpan,percentExtent,viewExtend,!0):null);var lastRange=this._range,range=this._range=asc$2([linearMap$2(handleEnds[0],viewExtend,percentExtent,!0),linearMap$2(handleEnds[1],viewExtend,percentExtent,!0)]);return!lastRange||lastRange[0]!==range[0]||lastRange[1]!==range[1]},SliderZoomView2.prototype._updateView=function(nonRealtime){var displaybles=this._displayables,handleEnds=this._handleEnds,handleInterval=asc$2(handleEnds.slice()),size=this._size;each$f([0,1],function(handleIndex){var handle=displaybles.handles[handleIndex],handleHeight=this._handleHeight;handle.attr({scaleX:handleHeight/2,scaleY:handleHeight/2,x:handleEnds[handleIndex]+(handleIndex?-1:1),y:size[1]/2-handleHeight/2})},this),displaybles.filler.setShape({x:handleInterval[0],y:0,width:handleInterval[1]-handleInterval[0],height:size[1]});var viewExtent={x:handleInterval[0],width:handleInterval[1]-handleInterval[0]};displaybles.moveHandle&amp;&amp;(displaybles.moveHandle.setShape(viewExtent),displaybles.moveZone.setShape(viewExtent),displaybles.moveZone.getBoundingRect(),displaybles.moveHandleIcon&amp;&amp;displaybles.moveHandleIcon.attr("x",viewExtent.x+viewExtent.width/2));for(var dataShadowSegs=displaybles.dataShadowSegs,segIntervals=[0,handleInterval[0],handleInterval[1],size[0]],i=0;i&lt;dataShadowSegs.length;i++){var segGroup=dataShadowSegs[i],clipPath=segGroup.getClipPath();clipPath||(clipPath=new Rect$2,segGroup.setClipPath(clipPath)),clipPath.setShape({x:segIntervals[i],y:0,width:segIntervals[i+1]-segIntervals[i],height:size[1]})}this._updateDataInfo(nonRealtime)},SliderZoomView2.prototype._updateDataInfo=function(nonRealtime){var dataZoomModel=this.dataZoomModel,displaybles=this._displayables,handleLabels=displaybles.handleLabels,orient=this._orient,labelTexts=["",""];if(dataZoomModel.get("showDetail")){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();if(axisProxy){var axis=axisProxy.getAxisModel().axis,range=this._range,dataInterval=nonRealtime?axisProxy.calculateDataWindow({start:range[0],end:range[1]}).valueWindow:axisProxy.getDataValueWindow();labelTexts=[this._formatLabel(dataInterval[0],axis),this._formatLabel(dataInterval[1],axis)]}}var orderedHandleEnds=asc$2(this._handleEnds.slice());function setLabel(handleIndex){var barTransform=getTransform$1(displaybles.handles[handleIndex].parent,this.group),direction=transformDirection(0===handleIndex?"right":"left",barTransform),offset=this._handleWidth/2+5,textPoint=applyTransform([orderedHandleEnds[handleIndex]+(0===handleIndex?-offset:offset),this._size[1]/2],barTransform);handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],verticalAlign:"horizontal"===orient?"middle":direction,align:"horizontal"===orient?direction:"center",text:labelTexts[handleIndex]})}setLabel.call(this,0),setLabel.call(this,1)},SliderZoomView2.prototype._formatLabel=function(value,axis){var dataZoomModel=this.dataZoomModel,labelFormatter=dataZoomModel.get("labelFormatter"),labelPrecision=dataZoomModel.get("labelPrecision");null!=labelPrecision&amp;&amp;"auto"!==labelPrecision||(labelPrecision=axis.getPixelPrecision());var valueStr=null==value||isNaN(value)?"":"category"===axis.type||"time"===axis.type?axis.scale.getLabel({value:Math.round(value)}):value.toFixed(Math.min(labelPrecision,20));return isFunction(labelFormatter)?labelFormatter(value,valueStr):isString(labelFormatter)?labelFormatter.replace("{value}",valueStr):valueStr},SliderZoomView2.prototype._showDataInfo=function(isEmphasis){var normalShow=(this.dataZoomModel.get("handleLabel")||{}).show||!1,emphasisShow=this.dataZoomModel.getModel(["emphasis","handleLabel"]).get("show")||!1,toShow=isEmphasis||this._dragging?emphasisShow:normalShow,displayables=this._displayables,handleLabels=displayables.handleLabels;handleLabels[0].attr("invisible",!toShow),handleLabels[1].attr("invisible",!toShow),displayables.moveHandle&amp;&amp;this.api[toShow?"enterEmphasis":"leaveEmphasis"](displayables.moveHandle,1)},SliderZoomView2.prototype._onDragMove=function(handleIndex,dx,dy,event){this._dragging=!0,stop(event.event);var vertex=applyTransform([dx,dy],this._displayables.sliderGroup.getLocalTransform(),!0),changed=this._updateInterval(handleIndex,vertex[0]),realtime=this.dataZoomModel.get("realtime");this._updateView(!realtime),changed&amp;&amp;realtime&amp;&amp;this._dispatchZoomAction(!0)},SliderZoomView2.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&amp;&amp;this._dispatchZoomAction(!1)},SliderZoomView2.prototype._onClickPanel=function(e2){var size=this._size,localPoint=this._displayables.sliderGroup.transformCoordToLocal(e2.offsetX,e2.offsetY);if(!(localPoint[0]&lt;0||localPoint[0]&gt;size[0]||localPoint[1]&lt;0||localPoint[1]&gt;size[1])){var handleEnds=this._handleEnds,center2=(handleEnds[0]+handleEnds[1])/2,changed=this._updateInterval("all",localPoint[0]-center2);this._updateView(),changed&amp;&amp;this._dispatchZoomAction(!1)}},SliderZoomView2.prototype._onBrushStart=function(e2){var x=e2.offsetX,y=e2.offsetY;this._brushStart=new Point(x,y),this._brushing=!0,this._brushStartTime=+new Date},SliderZoomView2.prototype._onBrushEnd=function(e2){if(this._brushing){var brushRect=this._displayables.brushRect;if(this._brushing=!1,brushRect){brushRect.attr("ignore",!0);var brushShape=brushRect.shape;if(!(+new Date-this._brushStartTime&lt;200&amp;&amp;Math.abs(brushShape.width)&lt;5)){var viewExtend=this._getViewExtent(),percentExtent=[0,100];this._range=asc$2([linearMap$2(brushShape.x,viewExtend,percentExtent,!0),linearMap$2(brushShape.x+brushShape.width,viewExtend,percentExtent,!0)]),this._handleEnds=[brushShape.x,brushShape.x+brushShape.width],this._updateView(),this._dispatchZoomAction(!1)}}}},SliderZoomView2.prototype._onBrush=function(e2){this._brushing&amp;&amp;(stop(e2.event),this._updateBrushRect(e2.offsetX,e2.offsetY))},SliderZoomView2.prototype._updateBrushRect=function(mouseX,mouseY){var displayables=this._displayables,dataZoomModel=this.dataZoomModel,brushRect=displayables.brushRect;brushRect||(brushRect=displayables.brushRect=new Rect({silent:!0,style:dataZoomModel.getModel("brushStyle").getItemStyle()}),displayables.sliderGroup.add(brushRect)),brushRect.attr("ignore",!1);var brushStart=this._brushStart,sliderGroup=this._displayables.sliderGroup,endPoint=sliderGroup.transformCoordToLocal(mouseX,mouseY),startPoint=sliderGroup.transformCoordToLocal(brushStart.x,brushStart.y),size=this._size;endPoint[0]=Math.max(Math.min(size[0],endPoint[0]),0),brushRect.setShape({x:startPoint[0],y:0,width:endPoint[0]-startPoint[0],height:size[1]})},SliderZoomView2.prototype._dispatchZoomAction=function(realtime){var range=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:realtime?REALTIME_ANIMATION_CONFIG:null,start:range[0],end:range[1]})},SliderZoomView2.prototype._findCoordRect=function(){var rect,coordSysInfoList=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!rect&amp;&amp;coordSysInfoList.length){var coordSys=coordSysInfoList[0].model.coordinateSystem;rect=coordSys.getRect&amp;&amp;coordSys.getRect()}if(!rect){var width=this.api.getWidth(),height=this.api.getHeight();rect={x:.2*width,y:.2*height,width:.6*width,height:.6*height}}return rect},SliderZoomView2.type="dataZoom.slider",SliderZoomView2}(DataZoomView);function getCursor$1(orient){return"vertical"===orient?"ns-resize":"ew-resize"}function install$7(registers){registers.registerComponentModel(SliderZoomModel),registers.registerComponentView(SliderZoomView),installCommon$1(registers)}function install$6(registers){use(install$8),use(install$7)}var visualDefault_get=function(visualType,key,isCategory2){var value=clone$4((defaultOption[visualType]||{})[key]);return isCategory2&amp;&amp;isArray$1(value)?value[value.length-1]:value},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(_super){function VisualMapModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=VisualMapModel2.type,_this.stateList=["inRange","outOfRange"],_this.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],_this.layoutMode={type:"box",ignoreSize:!0},_this.dataBound=[-1/0,1/0],_this.targetVisuals={},_this.controllerVisuals={},_this}return __extends$1(VisualMapModel2,_super),VisualMapModel2.prototype.init=function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel)},VisualMapModel2.prototype.optionUpdated=function(newOption,isInit){var thisOption=this.option;!isInit&amp;&amp;replaceVisualOption(thisOption,newOption,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},VisualMapModel2.prototype.resetVisual=function(supplementVisualOption){var stateList=this.stateList;supplementVisualOption=bind$1(supplementVisualOption,this),this.controllerVisuals=createVisualMappings(this.option.controller,stateList,supplementVisualOption),this.targetVisuals=createVisualMappings(this.option.target,stateList,supplementVisualOption)},VisualMapModel2.prototype.getItemSymbol=function(){return null},VisualMapModel2.prototype.getTargetSeriesIndices=function(){var optionSeriesIndex=this.option.seriesIndex,seriesIndices=[];return null==optionSeriesIndex||"all"===optionSeriesIndex?this.ecModel.eachSeries(function(seriesModel,index){seriesIndices.push(index)}):seriesIndices=normalizeToArray(optionSeriesIndex),seriesIndices},VisualMapModel2.prototype.eachTargetSeries=function(callback,context){each$f(this.getTargetSeriesIndices(),function(seriesIndex){var seriesModel=this.ecModel.getSeriesByIndex(seriesIndex);seriesModel&amp;&amp;callback.call(context,seriesModel)},this)},VisualMapModel2.prototype.isTargetSeries=function(seriesModel){var is=!1;return this.eachTargetSeries(function(model){model===seriesModel&amp;&amp;(is=!0)}),is},VisualMapModel2.prototype.formatValueText=function(value,isCategory2,edgeSymbols){var isMinMax,option=this.option,precision=option.precision,dataBound=this.dataBound,formatter=option.formatter;edgeSymbols=edgeSymbols||["&lt;","&gt;"],isArray$1(value)&amp;&amp;(value=value.slice(),isMinMax=!0);var textValue=isCategory2?value:isMinMax?[toFixed(value[0]),toFixed(value[1])]:toFixed(value);return isString(formatter)?formatter.replace("{value}",isMinMax?textValue[0]:textValue).replace("{value2}",isMinMax?textValue[1]:textValue):isFunction(formatter)?isMinMax?formatter(value[0],value[1]):formatter(value):isMinMax?value[0]===dataBound[0]?edgeSymbols[0]+" "+textValue[1]:value[1]===dataBound[1]?edgeSymbols[1]+" "+textValue[0]:textValue[0]+" - "+textValue[1]:textValue;function toFixed(val){return val===dataBound[0]?"min":val===dataBound[1]?"max":(+val).toFixed(Math.min(precision,20))}},VisualMapModel2.prototype.resetExtent=function(){var thisOption=this.option,extent3=asc([thisOption.min,thisOption.max]);this._dataExtent=extent3},VisualMapModel2.prototype.getDataDimensionIndex=function(data){var optDim=this.option.dimension;if(null!=optDim)return data.getDimensionIndex(optDim);for(var dimNames=data.dimensions,i=dimNames.length-1;i&gt;=0;i--){var dimName=dimNames[i],dimInfo=data.getDimensionInfo(dimName);if(!dimInfo.isCalculationCoord)return dimInfo.storeDimIndex}},VisualMapModel2.prototype.getExtent=function(){return this._dataExtent.slice()},VisualMapModel2.prototype.completeVisualOption=function(){var ecModel=this.ecModel,thisOption=this.option,base2={inRange:thisOption.inRange,outOfRange:thisOption.outOfRange},target=thisOption.target||(thisOption.target={}),controller=thisOption.controller||(thisOption.controller={});merge(target,base2),merge(controller,base2);var isCategory2=this.isCategory();function completeSingle(base3){isArray(thisOption.color)&amp;&amp;!base3.inRange&amp;&amp;(base3.inRange={color:thisOption.color.slice().reverse()}),base3.inRange=base3.inRange||{color:ecModel.get("gradientColor")}}completeSingle.call(this,target),completeSingle.call(this,controller),function completeInactive(base3,stateExist,stateAbsent){var optExist=base3[stateExist],optAbsent=base3[stateAbsent];optExist&amp;&amp;!optAbsent&amp;&amp;(optAbsent=base3[stateAbsent]={},each$2(optExist,function(visualData,visualType){if(VisualMapping.isValidType(visualType)){var defa=visualDefault_get(visualType,"inactive",isCategory2);null!=defa&amp;&amp;(optAbsent[visualType]=defa,"color"!==visualType||optAbsent.hasOwnProperty("opacity")||optAbsent.hasOwnProperty("colorAlpha")||(optAbsent.opacity=[0,0]))}}))}.call(this,target,"inRange","outOfRange"),function completeController(controller2){var symbolExists=(controller2.inRange||{}).symbol||(controller2.outOfRange||{}).symbol,symbolSizeExists=(controller2.inRange||{}).symbolSize||(controller2.outOfRange||{}).symbolSize,inactiveColor=this.get("inactiveColor"),defaultSymbol=this.getItemSymbol()||"roundRect";each$2(this.stateList,function(state){var itemSize=this.itemSize,visuals=controller2[state];visuals||(visuals=controller2[state]={color:isCategory2?inactiveColor:[inactiveColor]}),null==visuals.symbol&amp;&amp;(visuals.symbol=symbolExists&amp;&amp;clone$4(symbolExists)||(isCategory2?defaultSymbol:[defaultSymbol])),null==visuals.symbolSize&amp;&amp;(visuals.symbolSize=symbolSizeExists&amp;&amp;clone$4(symbolSizeExists)||(isCategory2?itemSize[0]:[itemSize[0],itemSize[0]])),visuals.symbol=mapVisual(visuals.symbol,function(symbol){return"none"===symbol?defaultSymbol:symbol});var symbolSize=visuals.symbolSize;if(null!=symbolSize){var max_1=-1/0;eachVisual(symbolSize,function(value){value&gt;max_1&amp;&amp;(max_1=value)}),visuals.symbolSize=mapVisual(symbolSize,function(value){return linearMap$1(value,[0,max_1],[0,itemSize[0]],!0)})}},this)}.call(this,controller)},VisualMapModel2.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},VisualMapModel2.prototype.isCategory=function(){return!!this.option.categories},VisualMapModel2.prototype.setSelected=function(selected){},VisualMapModel2.prototype.getSelected=function(){return null},VisualMapModel2.prototype.getValueState=function(value){return null},VisualMapModel2.prototype.getVisualMeta=function(getColorVisual2){return null},VisualMapModel2.type="visualMap",VisualMapModel2.dependencies=["series"],VisualMapModel2.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},VisualMapModel2}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(_super){function ContinuousModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ContinuousModel2.type,_this}return __extends$1(ContinuousModel2,_super),ContinuousModel2.prototype.optionUpdated=function(newOption,isInit){_super.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(mappingOption){mappingOption.mappingMethod="linear",mappingOption.dataExtent=this.getExtent()}),this._resetRange()},ContinuousModel2.prototype.resetItemSize=function(){_super.prototype.resetItemSize.apply(this,arguments);var itemSize=this.itemSize;(null==itemSize[0]||isNaN(itemSize[0]))&amp;&amp;(itemSize[0]=DEFAULT_BAR_BOUND[0]),(null==itemSize[1]||isNaN(itemSize[1]))&amp;&amp;(itemSize[1]=DEFAULT_BAR_BOUND[1])},ContinuousModel2.prototype._resetRange=function(){var dataExtent=this.getExtent(),range=this.option.range;!range||range.auto?(dataExtent.auto=1,this.option.range=dataExtent):isArray$1(range)&amp;&amp;(range[0]&gt;range[1]&amp;&amp;range.reverse(),range[0]=Math.max(range[0],dataExtent[0]),range[1]=Math.min(range[1],dataExtent[1]))},ContinuousModel2.prototype.completeVisualOption=function(){_super.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(state){var symbolSize=this.option.controller[state].symbolSize;symbolSize&amp;&amp;symbolSize[0]!==symbolSize[1]&amp;&amp;(symbolSize[0]=symbolSize[1]/3)},this)},ContinuousModel2.prototype.setSelected=function(selected){this.option.range=selected.slice(),this._resetRange()},ContinuousModel2.prototype.getSelected=function(){var dataExtent=this.getExtent(),dataInterval=asc$2((this.get("range")||[]).slice());return dataInterval[0]&gt;dataExtent[1]&amp;&amp;(dataInterval[0]=dataExtent[1]),dataInterval[1]&gt;dataExtent[1]&amp;&amp;(dataInterval[1]=dataExtent[1]),dataInterval[0]&lt;dataExtent[0]&amp;&amp;(dataInterval[0]=dataExtent[0]),dataInterval[1]&lt;dataExtent[0]&amp;&amp;(dataInterval[1]=dataExtent[0]),dataInterval},ContinuousModel2.prototype.getValueState=function(value){var range=this.option.range,dataExtent=this.getExtent();return(range[0]&lt;=dataExtent[0]||range[0]&lt;=value)&amp;&amp;(range[1]&gt;=dataExtent[1]||value&lt;=range[1])?"inRange":"outOfRange"},ContinuousModel2.prototype.findTargetDataIndices=function(range){var result=[];return this.eachTargetSeries(function(seriesModel){var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimensionIndex(data),function(value,dataIndex){range[0]&lt;=value&amp;&amp;value&lt;=range[1]&amp;&amp;dataIndices.push(dataIndex)},this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this),result},ContinuousModel2.prototype.getVisualMeta=function(getColorVisual2){var oVals=getColorStopValues(this,"outOfRange",this.getExtent()),iVals=getColorStopValues(this,"inRange",this.option.range.slice()),stops=[];function setStop(value,valueState){stops.push({value:value,color:getColorVisual2(value,valueState)})}for(var iIdx=0,oIdx=0,iLen=iVals.length,oLen=oVals.length;oIdx&lt;oLen&amp;&amp;(!iVals.length||oVals[oIdx]&lt;=iVals[0]);oIdx++)oVals[oIdx]&lt;iVals[iIdx]&amp;&amp;setStop(oVals[oIdx],"outOfRange");for(var first=1;iIdx&lt;iLen;iIdx++,first=0)first&amp;&amp;stops.length&amp;&amp;setStop(iVals[iIdx],"outOfRange"),setStop(iVals[iIdx],"inRange");for(first=1;oIdx&lt;oLen;oIdx++)(!iVals.length||iVals[iVals.length-1]&lt;oVals[oIdx])&amp;&amp;(first&amp;&amp;(stops.length&amp;&amp;setStop(stops[stops.length-1].value,"outOfRange"),first=0),setStop(oVals[oIdx],"outOfRange"));var stopsLen=stops.length;return{stops:stops,outerColors:[stopsLen?stops[0].color:"transparent",stopsLen?stops[stopsLen-1].color:"transparent"]}},ContinuousModel2.type="visualMap.continuous",ContinuousModel2.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),ContinuousModel2}(VisualMapModel);function getColorStopValues(visualMapModel,valueState,dataExtent){if(dataExtent[0]===dataExtent[1])return dataExtent.slice();for(var step=(dataExtent[1]-dataExtent[0])/200,value=dataExtent[0],stopValues=[],i=0;i&lt;=200&amp;&amp;value&lt;dataExtent[1];i++)stopValues.push(value),value+=step;return stopValues.push(dataExtent[1]),stopValues}var VisualMapView=function(_super){function VisualMapView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=VisualMapView2.type,_this.autoPositionValues={left:1,right:1,top:1,bottom:1},_this}return __extends$1(VisualMapView2,_super),VisualMapView2.prototype.init=function(ecModel,api){this.ecModel=ecModel,this.api=api},VisualMapView2.prototype.render=function(visualMapModel,ecModel,api,payload){this.visualMapModel=visualMapModel,!1!==visualMapModel.get("show")?this.doRender(visualMapModel,ecModel,api,payload):this.group.removeAll()},VisualMapView2.prototype.renderBackground=function(group){var visualMapModel=this.visualMapModel,padding=normalizeCssArray(visualMapModel.get("padding")||0),rect=group.getBoundingRect();group.add(new Rect$2({z2:-1,silent:!0,shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[3]+padding[1],height:rect.height+padding[0]+padding[2]},style:{fill:visualMapModel.get("backgroundColor"),stroke:visualMapModel.get("borderColor"),lineWidth:visualMapModel.get("borderWidth")}}))},VisualMapView2.prototype.getControllerVisual=function(targetValue,visualCluster,opts){var forceState=(opts=opts||{}).forceState,visualMapModel=this.visualMapModel,visualObj={};if("color"===visualCluster){var defaultColor=visualMapModel.get("contentColor");visualObj.color=defaultColor}function getter(key){return visualObj[key]}function setter(key,value){visualObj[key]=value}var mappings=visualMapModel.controllerVisuals[forceState||visualMapModel.getValueState(targetValue)];return each$f(VisualMapping.prepareVisualTypes(mappings),function(type){var visualMapping=mappings[type];opts.convertOpacityToAlpha&amp;&amp;"opacity"===type&amp;&amp;(type="colorAlpha",visualMapping=mappings.__alphaForOpacity),VisualMapping.dependsOn(type,visualCluster)&amp;&amp;visualMapping&amp;&amp;visualMapping.applyVisual(targetValue,getter,setter)}),visualObj[visualCluster]},VisualMapView2.prototype.positionGroup=function(group){var model=this.visualMapModel,api=this.api;positionElement(group,model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})},VisualMapView2.prototype.doRender=function(visualMapModel,ecModel,api,payload){},VisualMapView2.type="visualMap",VisualMapView2}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(visualMapModel,api,itemSize){var modelOption=visualMapModel.option,itemAlign=modelOption.align;if(null!=itemAlign&amp;&amp;"auto"!==itemAlign)return itemAlign;for(var ecSize={width:api.getWidth(),height:api.getHeight()},realIndex="horizontal"===modelOption.orient?1:0,reals=paramsSet[realIndex],fakeValue=[0,null,10],layoutInput={},i=0;i&lt;3;i++)layoutInput[paramsSet[1-realIndex][i]]=fakeValue[i],layoutInput[reals[i]]=2===i?itemSize[0]:modelOption[reals[i]];var rParam=[["x","width",3],["y","height",0]][realIndex],rect=getLayoutRect(layoutInput,ecSize,modelOption.padding);return reals[(rect.margin[rParam[2]]||0)+rect[rParam[0]]+.5*rect[rParam[1]]&lt;.5*ecSize[rParam[1]]?0:1]}function makeHighDownBatch(batch,visualMapModel){return each$f(batch||[],function(batchItem){null!=batchItem.dataIndex&amp;&amp;(batchItem.dataIndexInside=batchItem.dataIndex,batchItem.dataIndex=null),batchItem.highlightKey="visualMap"+(visualMapModel?visualMapModel.componentIndex:"")}),batch}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,ContinuousView=function(_super){function ContinuousView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=ContinuousView2.type,_this._shapes={},_this._dataInterval=[],_this._handleEnds=[],_this._hoverLinkDataIndices=[],_this}return __extends$1(ContinuousView2,_super),ContinuousView2.prototype.init=function(ecModel,api){_super.prototype.init.call(this,ecModel,api),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},ContinuousView2.prototype.doRender=function(visualMapModel,ecModel,api,payload){payload&amp;&amp;"selectDataRange"===payload.type&amp;&amp;payload.from===this.uid||this._buildView()},ContinuousView2.prototype._buildView=function(){this.group.removeAll();var visualMapModel=this.visualMapModel,thisGroup=this.group;this._orient=visualMapModel.get("orient"),this._useHandle=visualMapModel.get("calculable"),this._resetInterval(),this._renderBar(thisGroup);var dataRangeText=visualMapModel.get("text");this._renderEndsText(thisGroup,dataRangeText,0),this._renderEndsText(thisGroup,dataRangeText,1),this._updateView(!0),this.renderBackground(thisGroup),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(thisGroup)},ContinuousView2.prototype._renderEndsText=function(group,dataRangeText,endsIndex){if(dataRangeText){var text=dataRangeText[1-endsIndex];text=null!=text?text+"":"";var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),itemSize=visualMapModel.itemSize,barGroup=this._shapes.mainGroup,position2=this._applyTransform([itemSize[0]/2,0===endsIndex?-textGap:itemSize[1]+textGap],barGroup),align=this._applyTransform(0===endsIndex?"bottom":"top",barGroup),orient=this._orient,textStyleModel=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(textStyleModel,{x:position2[0],y:position2[1],verticalAlign:"horizontal"===orient?"middle":align,align:"horizontal"===orient?align:"center",text:text})}))}},ContinuousView2.prototype._renderBar=function(targetGroup){var visualMapModel=this.visualMapModel,shapes=this._shapes,itemSize=visualMapModel.itemSize,orient=this._orient,useHandle=this._useHandle,itemAlign=getItemAlign(visualMapModel,this.api,itemSize),mainGroup=shapes.mainGroup=this._createBarGroup(itemAlign),gradientBarGroup=new Group$3;mainGroup.add(gradientBarGroup),gradientBarGroup.add(shapes.outOfRange=createPolygon()),gradientBarGroup.add(shapes.inRange=createPolygon(null,useHandle?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),gradientBarGroup.setClipPath(new Rect$2({shape:{x:0,y:0,width:itemSize[0],height:itemSize[1],r:3}}));var textRect=visualMapModel.textStyleModel.getTextRect("国"),textSize=mathMax(textRect.width,textRect.height);useHandle&amp;&amp;(shapes.handleThumbs=[],shapes.handleLabels=[],shapes.handleLabelPoints=[],this._createHandle(visualMapModel,mainGroup,0,itemSize,textSize,orient),this._createHandle(visualMapModel,mainGroup,1,itemSize,textSize,orient)),this._createIndicator(visualMapModel,mainGroup,itemSize,textSize,orient),targetGroup.add(mainGroup)},ContinuousView2.prototype._createHandle=function(visualMapModel,mainGroup,handleIndex,itemSize,textSize,orient){var onDrift=bind$1(this._dragHandle,this,handleIndex,!1),onDragEnd=bind$1(this._dragHandle,this,handleIndex,!0),handleSize=parsePercent$1(visualMapModel.get("handleSize"),itemSize[0]),handleThumb=createSymbol$1(visualMapModel.get("handleIcon"),-handleSize/2,-handleSize/2,handleSize,handleSize,null,!0),cursor=getCursor(this._orient);handleThumb.attr({cursor:cursor,draggable:!0,drift:onDrift,ondragend:onDragEnd,onmousemove:function(e2){stop(e2.event)}}),handleThumb.x=itemSize[0]/2,handleThumb.useStyle(visualMapModel.getModel("handleStyle").getItemStyle()),handleThumb.setStyle({strokeNoScale:!0,strokeFirst:!0}),handleThumb.style.lineWidth*=2,handleThumb.ensureState("emphasis").style=visualMapModel.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(handleThumb,!0),mainGroup.add(handleThumb);var textStyleModel=this.visualMapModel.textStyleModel,handleLabel=new ZRText({cursor:cursor,draggable:!0,drift:onDrift,onmousemove:function(e2){stop(e2.event)},ondragend:onDragEnd,style:createTextStyle$1(textStyleModel,{x:0,y:0,text:""})});handleLabel.ensureState("blur").style={opacity:.1},handleLabel.stateTransition={duration:200},this.group.add(handleLabel);var handleLabelPoint=[handleSize,0],shapes=this._shapes;shapes.handleThumbs[handleIndex]=handleThumb,shapes.handleLabelPoints[handleIndex]=handleLabelPoint,shapes.handleLabels[handleIndex]=handleLabel},ContinuousView2.prototype._createIndicator=function(visualMapModel,mainGroup,itemSize,textSize,orient){var scale2=parsePercent$1(visualMapModel.get("indicatorSize"),itemSize[0]),indicator=createSymbol$1(visualMapModel.get("indicatorIcon"),-scale2/2,-scale2/2,scale2,scale2,null,!0);indicator.attr({cursor:"move",invisible:!0,silent:!0,x:itemSize[0]/2});var indicatorStyle=visualMapModel.getModel("indicatorStyle").getItemStyle();if(indicator instanceof ZRImage){var pathStyle=indicator.style;indicator.useStyle(extend({image:pathStyle.image,x:pathStyle.x,y:pathStyle.y,width:pathStyle.width,height:pathStyle.height},indicatorStyle))}else indicator.useStyle(indicatorStyle);mainGroup.add(indicator);var textStyleModel=this.visualMapModel.textStyleModel,indicatorLabel=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(textStyleModel,{x:0,y:0,text:""})});this.group.add(indicatorLabel);var indicatorLabelPoint=[("horizontal"===orient?textSize/2:6)+itemSize[0]/2,0],shapes=this._shapes;shapes.indicator=indicator,shapes.indicatorLabel=indicatorLabel,shapes.indicatorLabelPoint=indicatorLabelPoint,this._firstShowIndicator=!0},ContinuousView2.prototype._dragHandle=function(handleIndex,isEnd,dx,dy){if(this._useHandle){if(this._dragging=!isEnd,!isEnd){var vertex=this._applyTransform([dx,dy],this._shapes.mainGroup,!0);this._updateInterval(handleIndex,vertex[1]),this._hideIndicator(),this._updateView()}isEnd===!this.visualMapModel.get("realtime")&amp;&amp;this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),isEnd?!this._hovering&amp;&amp;this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&amp;&amp;this._doHoverLinkToSeries(this._handleEnds[handleIndex],!1)}},ContinuousView2.prototype._resetInterval=function(){var visualMapModel=this.visualMapModel,dataInterval=this._dataInterval=visualMapModel.getSelected(),dataExtent=visualMapModel.getExtent(),sizeExtent=[0,visualMapModel.itemSize[1]];this._handleEnds=[linearMap(dataInterval[0],dataExtent,sizeExtent,!0),linearMap(dataInterval[1],dataExtent,sizeExtent,!0)]},ContinuousView2.prototype._updateInterval=function(handleIndex,delta){delta=delta||0;var visualMapModel=this.visualMapModel,handleEnds=this._handleEnds,sizeExtent=[0,visualMapModel.itemSize[1]];sliderMove(delta,handleEnds,sizeExtent,handleIndex,0);var dataExtent=visualMapModel.getExtent();this._dataInterval=[linearMap(handleEnds[0],sizeExtent,dataExtent,!0),linearMap(handleEnds[1],sizeExtent,dataExtent,!0)]},ContinuousView2.prototype._updateView=function(forSketch){var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),shapes=this._shapes,outOfRangeHandleEnds=[0,visualMapModel.itemSize[1]],inRangeHandleEnds=forSketch?outOfRangeHandleEnds:this._handleEnds,visualInRange=this._createBarVisual(this._dataInterval,dataExtent,inRangeHandleEnds,"inRange"),visualOutOfRange=this._createBarVisual(dataExtent,dataExtent,outOfRangeHandleEnds,"outOfRange");shapes.inRange.setStyle({fill:visualInRange.barColor}).setShape("points",visualInRange.barPoints),shapes.outOfRange.setStyle({fill:visualOutOfRange.barColor}).setShape("points",visualOutOfRange.barPoints),this._updateHandle(inRangeHandleEnds,visualInRange)},ContinuousView2.prototype._createBarVisual=function(dataInterval,dataExtent,handleEnds,forceState){var opts={forceState:forceState,convertOpacityToAlpha:!0},colorStops=this._makeColorGradient(dataInterval,opts),symbolSizes=[this.getControllerVisual(dataInterval[0],"symbolSize",opts),this.getControllerVisual(dataInterval[1],"symbolSize",opts)],barPoints=this._createBarPoints(handleEnds,symbolSizes);return{barColor:new LinearGradient(0,0,0,1,colorStops),barPoints:barPoints,handlesColor:[colorStops[0].color,colorStops[colorStops.length-1].color]}},ContinuousView2.prototype._makeColorGradient=function(dataInterval,opts){var colorStops=[],step=(dataInterval[1]-dataInterval[0])/100;colorStops.push({color:this.getControllerVisual(dataInterval[0],"color",opts),offset:0});for(var i=1;i&lt;100;i++){var currValue=dataInterval[0]+step*i;if(currValue&gt;dataInterval[1])break;colorStops.push({color:this.getControllerVisual(currValue,"color",opts),offset:i/100})}return colorStops.push({color:this.getControllerVisual(dataInterval[1],"color",opts),offset:1}),colorStops},ContinuousView2.prototype._createBarPoints=function(handleEnds,symbolSizes){var itemSize=this.visualMapModel.itemSize;return[[itemSize[0]-symbolSizes[0],handleEnds[0]],[itemSize[0],handleEnds[0]],[itemSize[0],handleEnds[1]],[itemSize[0]-symbolSizes[1],handleEnds[1]]]},ContinuousView2.prototype._createBarGroup=function(itemAlign){var orient=this._orient,inverse=this.visualMapModel.get("inverse");return new Group$3("horizontal"!==orient||inverse?"horizontal"===orient&amp;&amp;inverse?{scaleX:"bottom"===itemAlign?-1:1,rotation:-Math.PI/2}:"vertical"!==orient||inverse?{scaleX:"left"===itemAlign?1:-1}:{scaleX:"left"===itemAlign?1:-1,scaleY:-1}:{scaleX:"bottom"===itemAlign?1:-1,rotation:Math.PI/2})},ContinuousView2.prototype._updateHandle=function(handleEnds,visualInRange){if(this._useHandle){var shapes=this._shapes,visualMapModel=this.visualMapModel,handleThumbs=shapes.handleThumbs,handleLabels=shapes.handleLabels,itemSize=visualMapModel.itemSize,dataExtent=visualMapModel.getExtent(),align=this._applyTransform("left",shapes.mainGroup);each$1([0,1],function(handleIndex){var handleThumb=handleThumbs[handleIndex];handleThumb.setStyle("fill",visualInRange.handlesColor[handleIndex]),handleThumb.y=handleEnds[handleIndex];var val=linearMap(handleEnds[handleIndex],[0,itemSize[1]],dataExtent,!0),symbolSize=this.getControllerVisual(val,"symbolSize");handleThumb.scaleX=handleThumb.scaleY=symbolSize/itemSize[0],handleThumb.x=itemSize[0]-symbolSize/2;var textPoint=applyTransform(shapes.handleLabelPoints[handleIndex],getTransform$1(handleThumb,this.group));if("horizontal"===this._orient){var minimumOffset="left"===align||"top"===align?(itemSize[0]-symbolSize)/2:(itemSize[0]-symbolSize)/-2;textPoint[1]+=minimumOffset}handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],text:visualMapModel.formatValueText(this._dataInterval[handleIndex]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",shapes.mainGroup):"center"})},this)}},ContinuousView2.prototype._showIndicator=function(cursorValue,textValue,rangeSymbol,halfHoverLinkSize){var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),itemSize=visualMapModel.itemSize,sizeExtent=[0,itemSize[1]],shapes=this._shapes,indicator=shapes.indicator;if(indicator){indicator.attr("invisible",!1);var color2=this.getControllerVisual(cursorValue,"color",{convertOpacityToAlpha:!0}),symbolSize=this.getControllerVisual(cursorValue,"symbolSize"),y=linearMap(cursorValue,dataExtent,sizeExtent,!0),x=itemSize[0]-symbolSize/2,oldIndicatorPos={x:indicator.x,y:indicator.y};indicator.y=y,indicator.x=x;var textPoint=applyTransform(shapes.indicatorLabelPoint,getTransform$1(indicator,this.group)),indicatorLabel=shapes.indicatorLabel;indicatorLabel.attr("invisible",!1);var align=this._applyTransform("left",shapes.mainGroup),isHorizontal="horizontal"===this._orient;indicatorLabel.setStyle({text:(rangeSymbol||"")+visualMapModel.formatValueText(textValue),verticalAlign:isHorizontal?align:"middle",align:isHorizontal?"center":align});var indicatorNewProps={x:x,y:y,style:{fill:color2}},labelNewProps={style:{x:textPoint[0],y:textPoint[1]}};if(visualMapModel.ecModel.isAnimationEnabled()&amp;&amp;!this._firstShowIndicator){var animationCfg={duration:100,easing:"cubicInOut",additive:!0};indicator.x=oldIndicatorPos.x,indicator.y=oldIndicatorPos.y,indicator.animateTo(indicatorNewProps,animationCfg),indicatorLabel.animateTo(labelNewProps,animationCfg)}else indicator.attr(indicatorNewProps),indicatorLabel.attr(labelNewProps);this._firstShowIndicator=!1;var handleLabels=this._shapes.handleLabels;if(handleLabels)for(var i=0;i&lt;handleLabels.length;i++)this.api.enterBlur(handleLabels[i])}},ContinuousView2.prototype._enableHoverLinkToSeries=function(){var self2=this;this._shapes.mainGroup.on("mousemove",function(e2){if(self2._hovering=!0,!self2._dragging){var itemSize=self2.visualMapModel.itemSize,pos=self2._applyTransform([e2.offsetX,e2.offsetY],self2._shapes.mainGroup,!0,!0);pos[1]=mathMin(mathMax(0,pos[1]),itemSize[1]),self2._doHoverLinkToSeries(pos[1],0&lt;=pos[0]&amp;&amp;pos[0]&lt;=itemSize[0])}}).on("mouseout",function(){self2._hovering=!1,!self2._dragging&amp;&amp;self2._clearHoverLinkToSeries()})},ContinuousView2.prototype._enableHoverLinkFromSeries=function(){var zr=this.api.getZr();this.visualMapModel.option.hoverLink?(zr.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),zr.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},ContinuousView2.prototype._doHoverLinkToSeries=function(cursorPos,hoverOnBar){var visualMapModel=this.visualMapModel,itemSize=visualMapModel.itemSize;if(visualMapModel.option.hoverLink){var sizeExtent=[0,itemSize[1]],dataExtent=visualMapModel.getExtent();cursorPos=mathMin(mathMax(sizeExtent[0],cursorPos),sizeExtent[1]);var halfHoverLinkSize=function getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent){var halfHoverLinkSize=6,hoverLinkDataSize=visualMapModel.get("hoverLinkDataSize");hoverLinkDataSize&amp;&amp;(halfHoverLinkSize=linearMap(hoverLinkDataSize,dataExtent,sizeExtent,!0)/2);return halfHoverLinkSize}(visualMapModel,dataExtent,sizeExtent),hoverRange=[cursorPos-halfHoverLinkSize,cursorPos+halfHoverLinkSize],cursorValue=linearMap(cursorPos,sizeExtent,dataExtent,!0),valueRange=[linearMap(hoverRange[0],sizeExtent,dataExtent,!0),linearMap(hoverRange[1],sizeExtent,dataExtent,!0)];hoverRange[0]&lt;sizeExtent[0]&amp;&amp;(valueRange[0]=-1/0),hoverRange[1]&gt;sizeExtent[1]&amp;&amp;(valueRange[1]=1/0),hoverOnBar&amp;&amp;(valueRange[0]===-1/0?this._showIndicator(cursorValue,valueRange[1],"&lt; ",halfHoverLinkSize):valueRange[1]===1/0?this._showIndicator(cursorValue,valueRange[0],"&gt; ",halfHoverLinkSize):this._showIndicator(cursorValue,cursorValue,"≈ ",halfHoverLinkSize));var oldBatch=this._hoverLinkDataIndices,newBatch=[];(hoverOnBar||useHoverLinkOnHandle(visualMapModel))&amp;&amp;(newBatch=this._hoverLinkDataIndices=visualMapModel.findTargetDataIndices(valueRange));var resultBatches=function compressBatches(batchA,batchB){var mapA={},mapB={};return makeMap(batchA||[],mapA),makeMap(batchB||[],mapB,mapA),[mapToArray(mapA),mapToArray(mapB)];function makeMap(sourceBatch,map2,otherMap){for(var i=0,len2=sourceBatch.length;i&lt;len2;i++){var seriesId=convertOptionIdName(sourceBatch[i].seriesId,null);if(null==seriesId)return;for(var dataIndices=normalizeToArray(sourceBatch[i].dataIndex),otherDataIndices=otherMap&amp;&amp;otherMap[seriesId],j=0,lenj=dataIndices.length;j&lt;lenj;j++){var dataIndex=dataIndices[j];otherDataIndices&amp;&amp;otherDataIndices[dataIndex]?otherDataIndices[dataIndex]=null:(map2[seriesId]||(map2[seriesId]={}))[dataIndex]=1}}}function mapToArray(map2,isData){var result=[];for(var i in map2)if(map2.hasOwnProperty(i)&amp;&amp;null!=map2[i])if(isData)result.push(+i);else{var dataIndices=mapToArray(map2[i],!0);dataIndices.length&amp;&amp;result.push({seriesId:i,dataIndex:dataIndices})}return result}}(oldBatch,newBatch);this._dispatchHighDown("downplay",makeHighDownBatch(resultBatches[0],visualMapModel)),this._dispatchHighDown("highlight",makeHighDownBatch(resultBatches[1],visualMapModel))}},ContinuousView2.prototype._hoverLinkFromSeriesMouseOver=function(e2){var ecData;if(findEventDispatcher(e2.target,function(target){var currECData=getECData(target);if(null!=currECData.dataIndex)return ecData=currECData,!0},!0),ecData){var dataModel=this.ecModel.getSeriesByIndex(ecData.seriesIndex),visualMapModel=this.visualMapModel;if(visualMapModel.isTargetSeries(dataModel)){var data=dataModel.getData(ecData.dataType),value=data.getStore().get(visualMapModel.getDataDimensionIndex(data),ecData.dataIndex);isNaN(value)||this._showIndicator(value,value)}}},ContinuousView2.prototype._hideIndicator=function(){var shapes=this._shapes;shapes.indicator&amp;&amp;shapes.indicator.attr("invisible",!0),shapes.indicatorLabel&amp;&amp;shapes.indicatorLabel.attr("invisible",!0);var handleLabels=this._shapes.handleLabels;if(handleLabels)for(var i=0;i&lt;handleLabels.length;i++)this.api.leaveBlur(handleLabels[i])},ContinuousView2.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var indices=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(indices,this.visualMapModel)),indices.length=0},ContinuousView2.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var zr=this.api.getZr();zr.off("mouseover",this._hoverLinkFromSeriesMouseOver),zr.off("mouseout",this._hideIndicator)},ContinuousView2.prototype._applyTransform=function(vertex,element,inverse,global){var transform2=getTransform$1(element,global?null:this.group);return isArray$1(vertex)?applyTransform(vertex,transform2,inverse):transformDirection(vertex,transform2,inverse)},ContinuousView2.prototype._dispatchHighDown=function(type,batch){batch&amp;&amp;batch.length&amp;&amp;this.api.dispatchAction({type:type,batch:batch})},ContinuousView2.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},ContinuousView2.type="visualMap.continuous",ContinuousView2}(VisualMapView);function createPolygon(points2,cursor,onDrift,onDragEnd){return new Polygon({shape:{points:points2},draggable:!!onDrift,cursor:cursor,drift:onDrift,onmousemove:function(e2){stop(e2.event)},ondragend:onDragEnd})}function useHoverLinkOnHandle(visualMapModel){var hoverLinkOnHandle=visualMapModel.get("hoverLinkOnHandle");return!!(null==hoverLinkOnHandle?visualMapModel.get("realtime"):hoverLinkOnHandle)}function getCursor(orient){return"vertical"===orient?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(payload,ecModel){ecModel.eachComponent({mainType:"visualMap",query:payload},function(model){model.setSelected(payload.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(seriesModel,ecModel){var resetDefines=[];return ecModel.eachComponent("visualMap",function(visualMapModel){var pipelineContext=seriesModel.pipelineContext;!visualMapModel.isTargetSeries(seriesModel)||pipelineContext&amp;&amp;pipelineContext.large||resetDefines.push(function incrementalApplyVisual(stateList,visualMappings,getValueState,dim){var visualTypesMap={};return each$f(stateList,function(state){var visualTypes=VisualMapping.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes}),{progress:function progress(params,data){var dimIndex,dataIndex;function getVisual(key){return getItemVisualFromData(data,dataIndex,key)}function setVisual(key,value2){setItemVisualFromData(data,dataIndex,key,value2)}null!=dim&amp;&amp;(dimIndex=data.getDimensionIndex(dim));for(var store=data.getStore();null!=(dataIndex=params.next());){var rawDataItem=data.getRawDataItem(dataIndex);if(!rawDataItem||!1!==rawDataItem.visualMap)for(var value=null!=dim?store.get(dimIndex,dataIndex):dataIndex,valueState=getValueState(value),mappings=visualMappings[valueState],visualTypes=visualTypesMap[valueState],i=0,len2=visualTypes.length;i&lt;len2;i++){var type=visualTypes[i];mappings[type]&amp;&amp;mappings[type].applyVisual(value,getVisual,setVisual)}}}}}(visualMapModel.stateList,visualMapModel.targetVisuals,bind$1(visualMapModel.getValueState,visualMapModel),visualMapModel.getDataDimensionIndex(seriesModel.getData())))}),resetDefines}},{createOnAllSeries:!0,reset:function(seriesModel,ecModel){var data=seriesModel.getData(),visualMetaList=[];ecModel.eachComponent("visualMap",function(visualMapModel){if(visualMapModel.isTargetSeries(seriesModel)){var visualMeta=visualMapModel.getVisualMeta(bind$1(getColorVisual,null,seriesModel,visualMapModel))||{stops:[],outerColors:[]},dimIdx=visualMapModel.getDataDimensionIndex(data);dimIdx&gt;=0&amp;&amp;(visualMeta.dimension=dimIdx,visualMetaList.push(visualMeta))}}),seriesModel.getData().setVisual("visualMeta",visualMetaList)}}];function getColorVisual(seriesModel,visualMapModel,value,valueState){for(var mappings=visualMapModel.targetVisuals[valueState],visualTypes=VisualMapping.prepareVisualTypes(mappings),resultVisual={color:getVisualFromData(seriesModel.getData(),"color")},i=0,len2=visualTypes.length;i&lt;len2;i++){var type=visualTypes[i],mapping=mappings["opacity"===type?"__alphaForOpacity":type];mapping&amp;&amp;mapping.applyVisual(value,getVisual,setVisual)}return resultVisual.color;function getVisual(key){return resultVisual[key]}function setVisual(key,value2){resultVisual[key]=value2}}var each=each$f;function visualMapPreprocessor(option){var visualMap=option&amp;&amp;option.visualMap;isArray$1(visualMap)||(visualMap=visualMap?[visualMap]:[]),each(visualMap,function(opt){if(opt){has(opt,"splitList")&amp;&amp;!has(opt,"pieces")&amp;&amp;(opt.pieces=opt.splitList,delete opt.splitList);var pieces=opt.pieces;pieces&amp;&amp;isArray$1(pieces)&amp;&amp;each(pieces,function(piece){isObject$3(piece)&amp;&amp;(has(piece,"start")&amp;&amp;!has(piece,"min")&amp;&amp;(piece.min=piece.start),has(piece,"end")&amp;&amp;!has(piece,"max")&amp;&amp;(piece.max=piece.end))})}})}function has(obj,name){return obj&amp;&amp;obj.hasOwnProperty&amp;&amp;obj.hasOwnProperty(name)}var installed=!1;function installCommon(registers){installed||(installed=!0,registers.registerSubTypeDefaulter("visualMap",function(option){return option.categories||(option.pieces?option.pieces.length&gt;0:option.splitNumber&gt;0)&amp;&amp;!option.calculable?"piecewise":"continuous"}),registers.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(handler){registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT,handler)}),registers.registerPreprocessor(visualMapPreprocessor))}function install$5(registers){registers.registerComponentModel(ContinuousModel),registers.registerComponentView(ContinuousView),installCommon(registers)}var PiecewiseModel=function(_super){function PiecewiseModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=PiecewiseModel2.type,_this._pieceList=[],_this}return __extends$1(PiecewiseModel2,_super),PiecewiseModel2.prototype.optionUpdated=function(newOption,isInit){_super.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var mode=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(newOption,isInit);var categories=this.option.categories;this.resetVisual(function(mappingOption,state){"categories"===mode?(mappingOption.mappingMethod="category",mappingOption.categories=clone$4(categories)):(mappingOption.dataExtent=this.getExtent(),mappingOption.mappingMethod="piecewise",mappingOption.pieceList=map$1(this._pieceList,function(piece){return piece=clone$4(piece),"inRange"!==state&amp;&amp;(piece.visual=null),piece}))})},PiecewiseModel2.prototype.completeVisualOption=function(){var option=this.option,visualTypesInPieces={},visualTypes=VisualMapping.listVisualTypes(),isCategory2=this.isCategory();function has2(obj,state,visualType){return obj&amp;&amp;obj[state]&amp;&amp;obj[state].hasOwnProperty(visualType)}each$f(option.pieces,function(piece){each$f(visualTypes,function(visualType){piece.hasOwnProperty(visualType)&amp;&amp;(visualTypesInPieces[visualType]=1)})}),each$f(visualTypesInPieces,function(v,visualType){var exists=!1;each$f(this.stateList,function(state){exists=exists||has2(option,state,visualType)||has2(option.target,state,visualType)},this),!exists&amp;&amp;each$f(this.stateList,function(state){(option[state]||(option[state]={}))[visualType]=visualDefault_get(visualType,"inRange"===state?"active":"inactive",isCategory2)})},this),_super.prototype.completeVisualOption.apply(this,arguments)},PiecewiseModel2.prototype._resetSelected=function(newOption,isInit){var thisOption=this.option,pieceList=this._pieceList,selected=(isInit?thisOption:newOption).selected||{};if(thisOption.selected=selected,each$f(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);selected.hasOwnProperty(key)||(selected[key]=!0)},this),"single"===thisOption.selectedMode){var hasSel_1=!1;each$f(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);selected[key]&amp;&amp;(hasSel_1?selected[key]=!1:hasSel_1=!0)},this)}},PiecewiseModel2.prototype.getItemSymbol=function(){return this.get("itemSymbol")},PiecewiseModel2.prototype.getSelectedMapKey=function(piece){return"categories"===this._mode?piece.value+"":piece.index+""},PiecewiseModel2.prototype.getPieceList=function(){return this._pieceList},PiecewiseModel2.prototype._determineMode=function(){var option=this.option;return option.pieces&amp;&amp;option.pieces.length&gt;0?"pieces":this.option.categories?"categories":"splitNumber"},PiecewiseModel2.prototype.setSelected=function(selected){this.option.selected=clone$4(selected)},PiecewiseModel2.prototype.getValueState=function(value){var index=VisualMapping.findPieceIndex(value,this._pieceList);return null!=index&amp;&amp;this.option.selected[this.getSelectedMapKey(this._pieceList[index])]?"inRange":"outOfRange"},PiecewiseModel2.prototype.findTargetDataIndices=function(pieceIndex){var result=[],pieceList=this._pieceList;return this.eachTargetSeries(function(seriesModel){var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimensionIndex(data),function(value,dataIndex){VisualMapping.findPieceIndex(value,pieceList)===pieceIndex&amp;&amp;dataIndices.push(dataIndex)},this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this),result},PiecewiseModel2.prototype.getRepresentValue=function(piece){var representValue;if(this.isCategory())representValue=piece.value;else if(null!=piece.value)representValue=piece.value;else{var pieceInterval=piece.interval||[];representValue=pieceInterval[0]===-1/0&amp;&amp;pieceInterval[1]===1/0?0:(pieceInterval[0]+pieceInterval[1])/2}return representValue},PiecewiseModel2.prototype.getVisualMeta=function(getColorVisual2){if(!this.isCategory()){var stops=[],outerColors=["",""],visualMapModel=this,pieceList=this._pieceList.slice();if(pieceList.length){var edge=pieceList[0].interval[0];edge!==-1/0&amp;&amp;pieceList.unshift({interval:[-1/0,edge]}),(edge=pieceList[pieceList.length-1].interval[1])!==1/0&amp;&amp;pieceList.push({interval:[edge,1/0]})}else pieceList.push({interval:[-1/0,1/0]});var curr=-1/0;return each$f(pieceList,function(piece){var interval=piece.interval;interval&amp;&amp;(interval[0]&gt;curr&amp;&amp;setStop([curr,interval[0]],"outOfRange"),setStop(interval.slice()),curr=interval[1])},this),{stops:stops,outerColors:outerColors}}function setStop(interval,valueState){var representValue=visualMapModel.getRepresentValue({interval:interval});valueState||(valueState=visualMapModel.getValueState(representValue));var color2=getColorVisual2(representValue,valueState);interval[0]===-1/0?outerColors[0]=color2:interval[1]===1/0?outerColors[1]=color2:stops.push({value:interval[0],color:color2},{value:interval[1],color:color2})}},PiecewiseModel2.type="visualMap.piecewise",PiecewiseModel2.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),PiecewiseModel2}(VisualMapModel),resetMethods={splitNumber:function(outPieceList){var thisOption=this.option,precision=Math.min(thisOption.precision,20),dataExtent=this.getExtent(),splitNumber=thisOption.splitNumber;splitNumber=Math.max(parseInt(splitNumber,10),1),thisOption.splitNumber=splitNumber;for(var splitStep=(dataExtent[1]-dataExtent[0])/splitNumber;+splitStep.toFixed(precision)!==splitStep&amp;&amp;precision&lt;5;)precision++;thisOption.precision=precision,splitStep=+splitStep.toFixed(precision),thisOption.minOpen&amp;&amp;outPieceList.push({interval:[-1/0,dataExtent[0]],close:[0,0]});for(var index=0,curr=dataExtent[0];index&lt;splitNumber;curr+=splitStep,index++){var max3=index===splitNumber-1?dataExtent[1]:curr+splitStep;outPieceList.push({interval:[curr,max3],close:[1,1]})}thisOption.maxOpen&amp;&amp;outPieceList.push({interval:[dataExtent[1],1/0],close:[0,0]}),reformIntervals(outPieceList),each$f(outPieceList,function(piece,index2){piece.index=index2,piece.text=this.formatValueText(piece.interval)},this)},categories:function(outPieceList){var thisOption=this.option;each$f(thisOption.categories,function(cate){outPieceList.push({text:this.formatValueText(cate,!0),value:cate})},this),normalizeReverse(thisOption,outPieceList)},pieces:function(outPieceList){var thisOption=this.option;each$f(thisOption.pieces,function(pieceListItem,index){isObject$3(pieceListItem)||(pieceListItem={value:pieceListItem});var item={text:"",index:index};if(null!=pieceListItem.label&amp;&amp;(item.text=pieceListItem.label),pieceListItem.hasOwnProperty("value")){var value=item.value=pieceListItem.value;item.interval=[value,value],item.close=[1,1]}else{for(var interval=item.interval=[],close_1=item.close=[0,0],closeList=[1,0,1],infinityList=[-1/0,1/0],useMinMax=[],lg=0;lg&lt;2;lg++){for(var names=[["gte","gt","min"],["lte","lt","max"]][lg],i=0;i&lt;3&amp;&amp;null==interval[lg];i++)interval[lg]=pieceListItem[names[i]],close_1[lg]=closeList[i],useMinMax[lg]=2===i;null==interval[lg]&amp;&amp;(interval[lg]=infinityList[lg])}useMinMax[0]&amp;&amp;interval[1]===1/0&amp;&amp;(close_1[0]=0),useMinMax[1]&amp;&amp;interval[0]===-1/0&amp;&amp;(close_1[1]=0),interval[0]===interval[1]&amp;&amp;close_1[0]&amp;&amp;close_1[1]&amp;&amp;(item.value=interval[0])}item.visual=VisualMapping.retrieveVisuals(pieceListItem),outPieceList.push(item)},this),normalizeReverse(thisOption,outPieceList),reformIntervals(outPieceList),each$f(outPieceList,function(piece){var close=piece.close,edgeSymbols=[["&lt;","≤"][close[1]],["&gt;","≥"][close[0]]];piece.text=piece.text||this.formatValueText(null!=piece.value?piece.value:piece.interval,!1,edgeSymbols)},this)}};function normalizeReverse(thisOption,pieceList){var inverse=thisOption.inverse;("vertical"===thisOption.orient?!inverse:inverse)&amp;&amp;pieceList.reverse()}var PiecewiseVisualMapView=function(_super){function PiecewiseVisualMapView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type=PiecewiseVisualMapView2.type,_this}return __extends$1(PiecewiseVisualMapView2,_super),PiecewiseVisualMapView2.prototype.doRender=function(){var thisGroup=this.group;thisGroup.removeAll();var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),textStyleModel=visualMapModel.textStyleModel,textFont=textStyleModel.getFont(),textFill=textStyleModel.getTextColor(),itemAlign=this._getItemAlign(),itemSize=visualMapModel.itemSize,viewData=this._getViewData(),endsText=viewData.endsText,showLabel=retrieve(visualMapModel.get("showLabel",!0),!endsText),silent=!visualMapModel.get("selectedMode");endsText&amp;&amp;this._renderEndsText(thisGroup,endsText[0],itemSize,showLabel,itemAlign),each$f(viewData.viewPieceList,function(item){var piece=item.piece,itemGroup=new Group$3;itemGroup.onclick=bind$1(this._onItemClick,this,piece),this._enableHoverLink(itemGroup,item.indexInModelPieceList);var representValue=visualMapModel.getRepresentValue(piece);if(this._createItemSymbol(itemGroup,representValue,[0,0,itemSize[0],itemSize[1]],silent),showLabel){var visualState=this.visualMapModel.getValueState(representValue);itemGroup.add(new ZRText({style:{x:"right"===itemAlign?-textGap:itemSize[0]+textGap,y:itemSize[1]/2,text:piece.text,verticalAlign:"middle",align:itemAlign,font:textFont,fill:textFill,opacity:"outOfRange"===visualState?.5:1},silent:silent}))}thisGroup.add(itemGroup)},this),endsText&amp;&amp;this._renderEndsText(thisGroup,endsText[1],itemSize,showLabel,itemAlign),box(visualMapModel.get("orient"),thisGroup,visualMapModel.get("itemGap")),this.renderBackground(thisGroup),this.positionGroup(thisGroup)},PiecewiseVisualMapView2.prototype._enableHoverLink=function(itemGroup,pieceIndex){var _this=this;itemGroup.on("mouseover",function(){return onHoverLink("highlight")}).on("mouseout",function(){return onHoverLink("downplay")});var onHoverLink=function(method){var visualMapModel=_this.visualMapModel;visualMapModel.option.hoverLink&amp;&amp;_this.api.dispatchAction({type:method,batch:makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex),visualMapModel)})}},PiecewiseVisualMapView2.prototype._getItemAlign=function(){var visualMapModel=this.visualMapModel,modelOption=visualMapModel.option;if("vertical"===modelOption.orient)return getItemAlign(visualMapModel,this.api,visualMapModel.itemSize);var align=modelOption.align;return align&amp;&amp;"auto"!==align||(align="left"),align},PiecewiseVisualMapView2.prototype._renderEndsText=function(group,text,itemSize,showLabel,itemAlign){if(text){var itemGroup=new Group$3,textStyleModel=this.visualMapModel.textStyleModel;itemGroup.add(new ZRText({style:createTextStyle$1(textStyleModel,{x:showLabel?"right"===itemAlign?itemSize[0]:0:itemSize[0]/2,y:itemSize[1]/2,verticalAlign:"middle",align:showLabel?itemAlign:"center",text:text})})),group.add(itemGroup)}},PiecewiseVisualMapView2.prototype._getViewData=function(){var visualMapModel=this.visualMapModel,viewPieceList=map$1(visualMapModel.getPieceList(),function(piece,index){return{piece:piece,indexInModelPieceList:index}}),endsText=visualMapModel.get("text"),orient=visualMapModel.get("orient"),inverse=visualMapModel.get("inverse");return("horizontal"===orient?inverse:!inverse)?viewPieceList.reverse():endsText&amp;&amp;(endsText=endsText.slice().reverse()),{viewPieceList:viewPieceList,endsText:endsText}},PiecewiseVisualMapView2.prototype._createItemSymbol=function(group,representValue,shapeParam,silent){var itemSymbol=createSymbol$1(this.getControllerVisual(representValue,"symbol"),shapeParam[0],shapeParam[1],shapeParam[2],shapeParam[3],this.getControllerVisual(representValue,"color"));itemSymbol.silent=silent,group.add(itemSymbol)},PiecewiseVisualMapView2.prototype._onItemClick=function(piece){var visualMapModel=this.visualMapModel,option=visualMapModel.option,selectedMode=option.selectedMode;if(selectedMode){var selected=clone$4(option.selected),newKey=visualMapModel.getSelectedMapKey(piece);"single"===selectedMode||!0===selectedMode?(selected[newKey]=!0,each$f(selected,function(o,key){selected[key]=key===newKey})):selected[newKey]=!selected[newKey],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:selected})}},PiecewiseVisualMapView2.type="visualMap.piecewise",PiecewiseVisualMapView2}(VisualMapView);function install$4(registers){registers.registerComponentModel(PiecewiseModel),registers.registerComponentView(PiecewiseVisualMapView),installCommon(registers)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(ecModel,api){var ariaModel=ecModel.getModel("aria");if(ariaModel.get("enabled")){var defaultOption2=clone$4(DEFAULT_OPTION);merge(defaultOption2.label,ecModel.getLocaleModel().get("aria"),!1),merge(ariaModel.option,defaultOption2,!1),function setDecal(){if(ariaModel.getModel("decal").get("show")){var paletteScopeGroupByType_1=createHashMap();ecModel.eachSeries(function(seriesModel){if(!seriesModel.isColorBySeries()){var decalScope=paletteScopeGroupByType_1.get(seriesModel.type);decalScope||(decalScope={},paletteScopeGroupByType_1.set(seriesModel.type,decalScope)),inner(seriesModel).scope=decalScope}}),ecModel.eachRawSeries(function(seriesModel){if(!ecModel.isSeriesFiltered(seriesModel))if(isFunction(seriesModel.enableAriaDecal))seriesModel.enableAriaDecal();else{var data=seriesModel.getData();if(seriesModel.isColorBySeries()){var paletteDecal=getDecalFromPalette(seriesModel.ecModel,seriesModel.name,decalPaletteScope,ecModel.getSeriesCount()),specifiedDecal=data.getVisual("decal");data.setVisual("decal",mergeDecal(specifiedDecal,paletteDecal))}else{var dataAll_1=seriesModel.getRawData(),idxMap_1={},decalScope_1=inner(seriesModel).scope;data.each(function(idx){var rawIdx=data.getRawIndex(idx);idxMap_1[rawIdx]=idx});var dataCount_1=dataAll_1.count();dataAll_1.each(function(rawIdx){var idx=idxMap_1[rawIdx],name=dataAll_1.getName(rawIdx)||rawIdx+"",paletteDecal2=getDecalFromPalette(seriesModel.ecModel,name,decalScope_1,dataCount_1),specifiedDecal2=data.getItemVisual(idx,"decal");data.setItemVisual(idx,"decal",mergeDecal(specifiedDecal2,paletteDecal2))})}}function mergeDecal(specifiedDecal2,paletteDecal2){var resultDecal=specifiedDecal2?extend(extend({},paletteDecal2),specifiedDecal2):paletteDecal2;return resultDecal.dirty=!0,resultDecal}})}}(),function setLabel(){var dom=api.getZr().dom;if(!dom)return;var labelLocale=ecModel.getLocaleModel().get("aria"),labelModel=ariaModel.getModel("label");if(labelModel.option=defaults(labelModel.option,labelLocale),!labelModel.get("enabled"))return;if(dom.setAttribute("role","img"),labelModel.get("description"))return void dom.setAttribute("aria-label",labelModel.get("description"));var ariaLabel,seriesCnt=ecModel.getSeriesCount(),maxDataCnt=labelModel.get(["data","maxCount"])||10,maxSeriesCnt=labelModel.get(["series","maxCount"])||10,displaySeriesCnt=Math.min(seriesCnt,maxSeriesCnt);if(seriesCnt&lt;1)return;var title=function getTitle(){var title=ecModel.get("title");title&amp;&amp;title.length&amp;&amp;(title=title[0]);return title&amp;&amp;title.text}();ariaLabel=title?replace(labelModel.get(["general","withTitle"]),{title:title}):labelModel.get(["general","withoutTitle"]);var seriesLabels_1=[];ariaLabel+=replace(seriesCnt&gt;1?labelModel.get(["series","multiple","prefix"]):labelModel.get(["series","single","prefix"]),{seriesCount:seriesCnt}),ecModel.eachSeries(function(seriesModel,idx){if(idx&lt;displaySeriesCnt){var seriesLabel=void 0,withName=seriesModel.get("name")?"withName":"withoutName";seriesLabel=replace(seriesLabel=seriesCnt&gt;1?labelModel.get(["series","multiple",withName]):labelModel.get(["series","single",withName]),{seriesId:seriesModel.seriesIndex,seriesName:seriesModel.get("name"),seriesType:(type=seriesModel.subType,typeNames=ecModel.getLocaleModel().get(["series","typeNames"]),typeNames[type]||typeNames.chart)});var data=seriesModel.getData();if(data.count()&gt;maxDataCnt)seriesLabel+=replace(labelModel.get(["data","partialData"]),{displayCnt:maxDataCnt});else seriesLabel+=labelModel.get(["data","allData"]);for(var middleSeparator_1=labelModel.get(["data","separator","middle"]),endSeparator_1=labelModel.get(["data","separator","end"]),excludeDimensionId_1=labelModel.get(["data","excludeDimensionId"]),dataLabels=[],i=0;i&lt;data.count();i++)if(i&lt;maxDataCnt){var name_1=data.getName(i),value=excludeDimensionId_1?filter(data.getValues(i),function(v,j){return-1===indexOf(excludeDimensionId_1,j)}):data.getValues(i),dataLabel=labelModel.get(["data",name_1?"withName":"withoutName"]);dataLabels.push(replace(dataLabel,{name:name_1,value:value.join(middleSeparator_1)}))}seriesLabel+=dataLabels.join(middleSeparator_1)+endSeparator_1,seriesLabels_1.push(seriesLabel)}var type,typeNames});var separatorModel=labelModel.getModel(["series","multiple","separator"]),middleSeparator=separatorModel.get("middle"),endSeparator=separatorModel.get("end");ariaLabel+=seriesLabels_1.join(middleSeparator)+endSeparator,dom.setAttribute("aria-label",ariaLabel)}()}function replace(str,keyValues){if(!isString(str))return str;var result=str;return each$f(keyValues,function(value,key){result=result.replace(new RegExp("\\{\\s*"+key+"\\s*\\}","g"),value)}),result}}function ariaPreprocessor(option){if(option&amp;&amp;option.aria){var aria=option.aria;null!=aria.show&amp;&amp;(aria.enabled=aria.show),aria.label=aria.label||{},each$f(["description","general","series","data"],function(name){null!=aria[name]&amp;&amp;(aria.label[name]=aria[name])})}}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","&lt;":"lt","&lt;=":"lte","&gt;":"gt","&gt;=":"gte","=":"eq","!=":"ne","&lt;&gt;":"ne"},RegExpEvaluator=function(){function RegExpEvaluator2(rVal){if(null==(this._condVal=isString(rVal)?new RegExp(rVal):isRegExp(rVal)?rVal:null)){throwError("")}}return RegExpEvaluator2.prototype.evaluate=function(lVal){var type=typeof lVal;return isString(type)?this._condVal.test(lVal):!!isNumber(type)&amp;&amp;this._condVal.test(lVal+"")},RegExpEvaluator2}(),ConstConditionInternal=function(){function ConstConditionInternal2(){}return ConstConditionInternal2.prototype.evaluate=function(){return this.value},ConstConditionInternal2}(),AndConditionInternal=function(){function AndConditionInternal2(){}return AndConditionInternal2.prototype.evaluate=function(){for(var children=this.children,i=0;i&lt;children.length;i++)if(!children[i].evaluate())return!1;return!0},AndConditionInternal2}(),OrConditionInternal=function(){function OrConditionInternal2(){}return OrConditionInternal2.prototype.evaluate=function(){for(var children=this.children,i=0;i&lt;children.length;i++)if(children[i].evaluate())return!0;return!1},OrConditionInternal2}(),NotConditionInternal=function(){function NotConditionInternal2(){}return NotConditionInternal2.prototype.evaluate=function(){return!this.child.evaluate()},NotConditionInternal2}(),RelationalConditionInternal=function(){function RelationalConditionInternal2(){}return RelationalConditionInternal2.prototype.evaluate=function(){for(var needParse=!!this.valueParser,tarValRaw=(0,this.getValue)(this.valueGetterParam),tarValParsed=needParse?this.valueParser(tarValRaw):null,i=0;i&lt;this.subCondList.length;i++)if(!this.subCondList[i].evaluate(needParse?tarValParsed:tarValRaw))return!1;return!0},RelationalConditionInternal2}();function parseOption(exprOption,getters){if(!0===exprOption||!1===exprOption){var cond=new ConstConditionInternal;return cond.value=exprOption,cond}return isObjectNotArray(exprOption)||throwError(""),exprOption.and?parseAndOrOption("and",exprOption,getters):exprOption.or?parseAndOrOption("or",exprOption,getters):exprOption.not?function parseNotOption(exprOption,getters){var subOption=exprOption.not,errMsg="";isObjectNotArray(subOption)||throwError(errMsg);var cond=new NotConditionInternal;cond.child=parseOption(subOption,getters),cond.child||throwError(errMsg);return cond}(exprOption,getters):function parseRelationalOption(exprOption,getters){for(var errMsg="",valueGetterParam=getters.prepareGetValue(exprOption),subCondList=[],exprKeys=keys(exprOption),parserName=exprOption.parser,valueParser=parserName?getRawValueParser(parserName):null,i=0;i&lt;exprKeys.length;i++){var keyRaw=exprKeys[i];if("parser"!==keyRaw&amp;&amp;!getters.valueGetterAttrMap.get(keyRaw)){var op=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,keyRaw)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[keyRaw]:keyRaw,condValueRaw=exprOption[keyRaw],condValueParsed=valueParser?valueParser(condValueRaw):condValueRaw,evaluator=createFilterComparator(op,condValueParsed)||"reg"===op&amp;&amp;new RegExpEvaluator(condValueParsed);evaluator||throwError(errMsg),subCondList.push(evaluator)}}subCondList.length||throwError(errMsg);var cond=new RelationalConditionInternal;return cond.valueGetterParam=valueGetterParam,cond.valueParser=valueParser,cond.getValue=getters.getValue,cond.subCondList=subCondList,cond}(exprOption,getters)}function parseAndOrOption(op,exprOption,getters){var subOptionArr=exprOption[op];isArray$1(subOptionArr)||throwError(""),subOptionArr.length||throwError("");var cond="and"===op?new AndConditionInternal:new OrConditionInternal;return cond.children=map$1(subOptionArr,function(subOption){return parseOption(subOption,getters)}),cond.children.length||throwError(""),cond}function isObjectNotArray(val){return isObject$3(val)&amp;&amp;!isArrayLike(val)}var ConditionalExpressionParsed=function(){function ConditionalExpressionParsed2(exprOption,getters){this._cond=parseOption(exprOption,getters)}return ConditionalExpressionParsed2.prototype.evaluate=function(){return this._cond.evaluate()},ConditionalExpressionParsed2}();var filterTransform={type:"echarts:filter",transform:function(params){for(var rawItem,upstream=params.upstream,condition=function parseConditionalExpression(exprOption,getters){return new ConditionalExpressionParsed(exprOption,getters)}(params.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(exprOption){var dimLoose=exprOption.dimension;hasOwn(exprOption,"dimension")||throwError("");var dimInfo=upstream.getDimensionInfo(dimLoose);return dimInfo||throwError(""),{dimIdx:dimInfo.index}},getValue:function(param){return upstream.retrieveValueFromItem(rawItem,param.dimIdx)}}),resultData=[],i=0,len2=upstream.count();i&lt;len2;i++)rawItem=upstream.getRawDataItem(i),condition.evaluate()&amp;&amp;resultData.push(rawItem);return{data:resultData}}},sortTransform={type:"echarts:sort",transform:function(params){var upstream=params.upstream,config=params.config,orderExprList=normalizeToArray(config);orderExprList.length||throwError("");var orderDefList=[];each$f(orderExprList,function(orderExpr){var dimLoose=orderExpr.dimension,order=orderExpr.order,parserName=orderExpr.parser,incomparable=orderExpr.incomparable;if(null==dimLoose&amp;&amp;throwError(""),"asc"!==order&amp;&amp;"desc"!==order&amp;&amp;throwError(""),incomparable&amp;&amp;"min"!==incomparable&amp;&amp;"max"!==incomparable){throwError("")}if("asc"!==order&amp;&amp;"desc"!==order){throwError("")}var dimInfo=upstream.getDimensionInfo(dimLoose);dimInfo||throwError("");var parser=parserName?getRawValueParser(parserName):null;parserName&amp;&amp;!parser&amp;&amp;throwError(""),orderDefList.push({dimIdx:dimInfo.index,parser:parser,comparator:new SortOrderComparator(order,incomparable)})});var sourceFormat=upstream.sourceFormat;"arrayRows"!==sourceFormat&amp;&amp;"objectRows"!==sourceFormat&amp;&amp;throwError("");for(var resultData=[],i=0,len2=upstream.count();i&lt;len2;i++)resultData.push(upstream.getRawDataItem(i));return resultData.sort(function(item0,item1){for(var i2=0;i2&lt;orderDefList.length;i2++){var orderDef=orderDefList[i2],val0=upstream.retrieveValueFromItem(item0,orderDef.dimIdx),val1=upstream.retrieveValueFromItem(item1,orderDef.dimIdx);orderDef.parser&amp;&amp;(val0=orderDef.parser(val0),val1=orderDef.parser(val1));var result=orderDef.comparator.evaluate(val0,val1);if(0!==result)return result}return 0}),{data:resultData}}};var DatasetModel=function(_super){function DatasetModel2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="dataset",_this}return __extends$1(DatasetModel2,_super),DatasetModel2.prototype.init=function(option,parentModel,ecModel){_super.prototype.init.call(this,option,parentModel,ecModel),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},DatasetModel2.prototype.mergeOption=function(newOption,ecModel){_super.prototype.mergeOption.call(this,newOption,ecModel),disableTransformOptionMerge(this)},DatasetModel2.prototype.optionUpdated=function(){this._sourceManager.dirty()},DatasetModel2.prototype.getSourceManager=function(){return this._sourceManager},DatasetModel2.type="dataset",DatasetModel2.defaultOption={seriesLayoutBy:"column"},DatasetModel2}(ComponentModel),DatasetView=function(_super){function DatasetView2(){var _this=null!==_super&amp;&amp;_super.apply(this,arguments)||this;return _this.type="dataset",_this}return __extends$1(DatasetView2,_super),DatasetView2.type="dataset",DatasetView2}(ComponentView);function install(registers){registers.registerComponentModel(DatasetModel),registers.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(a,b){return Math.abs(a-b)&lt;1e-5}function pathToBezierCurves(path){var currentSubpath,x1,y1,x2,y2,data=path.data,len2=path.len(),bezierArrayGroups=[],xi=0,yi=0,x0=0,y0=0;function createNewSubpath(x,y){currentSubpath&amp;&amp;currentSubpath.length&gt;2&amp;&amp;bezierArrayGroups.push(currentSubpath),currentSubpath=[x,y]}function addLine(x02,y02,x12,y12){aroundEqual(x02,x12)&amp;&amp;aroundEqual(y02,y12)||currentSubpath.push(x02,y02,x12,y12,x12,y12)}function addArc(startAngle2,endAngle2,cx2,cy2,rx2,ry2){var delta=Math.abs(endAngle2-startAngle2),len3=4*Math.tan(delta/4)/3,dir3=endAngle2&lt;startAngle2?-1:1,c1=Math.cos(startAngle2),s1=Math.sin(startAngle2),c2=Math.cos(endAngle2),s2=Math.sin(endAngle2),x12=c1*rx2+cx2,y12=s1*ry2+cy2,x4=c2*rx2+cx2,y4=s2*ry2+cy2,hx=rx2*len3*dir3,hy=ry2*len3*dir3;currentSubpath.push(x12-hx*s1,y12+hy*c1,x4+hx*s2,y4-hy*c2,x4,y4)}for(var i=0;i&lt;len2;){var cmd=data[i++],isFirst=1===i;switch(isFirst&amp;&amp;(x0=xi=data[i],y0=yi=data[i+1],cmd!==CMD.L&amp;&amp;cmd!==CMD.C&amp;&amp;cmd!==CMD.Q||(currentSubpath=[x0,y0])),cmd){case CMD.M:xi=x0=data[i++],yi=y0=data[i++],createNewSubpath(x0,y0);break;case CMD.L:addLine(xi,yi,x1=data[i++],y1=data[i++]),xi=x1,yi=y1;break;case CMD.C:currentSubpath.push(data[i++],data[i++],data[i++],data[i++],xi=data[i++],yi=data[i++]);break;case CMD.Q:x1=data[i++],y1=data[i++],x2=data[i++],y2=data[i++],currentSubpath.push(xi+2/3*(x1-xi),yi+2/3*(y1-yi),x2+2/3*(x1-x2),y2+2/3*(y1-y2),x2,y2),xi=x2,yi=y2;break;case CMD.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++],endAngle=data[i++]+startAngle;i+=1;var anticlockwise=!data[i++];x1=Math.cos(startAngle)*rx+cx,y1=Math.sin(startAngle)*ry+cy,isFirst?createNewSubpath(x0=x1,y0=y1):addLine(xi,yi,x1,y1),xi=Math.cos(endAngle)*rx+cx,yi=Math.sin(endAngle)*ry+cy;for(var step=(anticlockwise?-1:1)*Math.PI/2,angle=startAngle;anticlockwise?angle&gt;endAngle:angle&lt;endAngle;angle+=step){addArc(angle,anticlockwise?Math.max(angle+step,endAngle):Math.min(angle+step,endAngle),cx,cy,rx,ry)}break;case CMD.R:x0=xi=data[i++],y0=yi=data[i++],x1=x0+data[i++],y1=y0+data[i++],createNewSubpath(x1,y0),addLine(x1,y0,x1,y1),addLine(x1,y1,x0,y1),addLine(x0,y1,x0,y0),addLine(x0,y0,x1,y0);break;case CMD.Z:currentSubpath&amp;&amp;addLine(xi,yi,x0,y0),xi=x0,yi=y0}}return currentSubpath&amp;&amp;currentSubpath.length&gt;2&amp;&amp;bezierArrayGroups.push(currentSubpath),bezierArrayGroups}function adpativeBezier(x0,y0,x1,y1,x2,y2,x3,y3,out2,scale2){if(aroundEqual(x0,x1)&amp;&amp;aroundEqual(y0,y1)&amp;&amp;aroundEqual(x2,x3)&amp;&amp;aroundEqual(y2,y3))out2.push(x3,y3);else{var PIXEL_DISTANCE=2/scale2,PIXEL_DISTANCE_SQR=PIXEL_DISTANCE*PIXEL_DISTANCE,dx=x3-x0,dy=y3-y0,d=Math.sqrt(dx*dx+dy*dy);dx/=d,dy/=d;var dx1=x1-x0,dy1=y1-y0,dx2=x2-x3,dy2=y2-y3,cp1LenSqr=dx1*dx1+dy1*dy1,cp2LenSqr=dx2*dx2+dy2*dy2;if(cp1LenSqr&lt;PIXEL_DISTANCE_SQR&amp;&amp;cp2LenSqr&lt;PIXEL_DISTANCE_SQR)out2.push(x3,y3);else{var projLen1=dx*dx1+dy*dy1,projLen2=-dx*dx2-dy*dy2;if(cp1LenSqr-projLen1*projLen1&lt;PIXEL_DISTANCE_SQR&amp;&amp;projLen1&gt;=0&amp;&amp;cp2LenSqr-projLen2*projLen2&lt;PIXEL_DISTANCE_SQR&amp;&amp;projLen2&gt;=0)out2.push(x3,y3);else{var tmpSegX=[],tmpSegY=[];cubicSubdivide(x0,x1,x2,x3,.5,tmpSegX),cubicSubdivide(y0,y1,y2,y3,.5,tmpSegY),adpativeBezier(tmpSegX[0],tmpSegY[0],tmpSegX[1],tmpSegY[1],tmpSegX[2],tmpSegY[2],tmpSegX[3],tmpSegY[3],out2,scale2),adpativeBezier(tmpSegX[4],tmpSegY[4],tmpSegX[5],tmpSegY[5],tmpSegX[6],tmpSegY[6],tmpSegX[7],tmpSegY[7],out2,scale2)}}}}function getDividingGrids(dimSize,rowDim,count2){var rowSize=dimSize[rowDim],columnSize=dimSize[1-rowDim],ratio=Math.abs(rowSize/columnSize),rowCount=Math.ceil(Math.sqrt(ratio*count2)),columnCount=Math.floor(count2/rowCount);0===columnCount&amp;&amp;(columnCount=1,rowCount=count2);for(var grids=[],i=0;i&lt;rowCount;i++)grids.push(columnCount);var remained=count2-rowCount*columnCount;if(remained&gt;0)for(i=0;i&lt;remained;i++)grids[i%rowCount]+=1;return grids}function divideSector(sectorShape,count2,outShapes){for(var r0=sectorShape.r0,r=sectorShape.r,startAngle=sectorShape.startAngle,endAngle=sectorShape.endAngle,angle=Math.abs(endAngle-startAngle),arcLen=angle*r,deltaR=r-r0,isAngleRow=arcLen&gt;Math.abs(deltaR),grids=getDividingGrids([arcLen,deltaR],isAngleRow?0:1,count2),rowSize=(isAngleRow?angle:deltaR)/grids.length,row=0;row&lt;grids.length;row++)for(var columnSize=(isAngleRow?deltaR:angle)/grids[row],column=0;column&lt;grids[row];column++){var newShape={};isAngleRow?(newShape.startAngle=startAngle+rowSize*row,newShape.endAngle=startAngle+rowSize*(row+1),newShape.r0=r0+columnSize*column,newShape.r=r0+columnSize*(column+1)):(newShape.startAngle=startAngle+columnSize*column,newShape.endAngle=startAngle+columnSize*(column+1),newShape.r0=r0+rowSize*row,newShape.r=r0+rowSize*(row+1)),newShape.clockwise=sectorShape.clockwise,newShape.cx=sectorShape.cx,newShape.cy=sectorShape.cy,outShapes.push(newShape)}}function crossProduct2d(x1,y1,x2,y2){return x1*y2-x2*y1}function lineLineIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){var mx=a2x-a1x,my=a2y-a1y,nx=b2x-b1x,ny=b2y-b1y,nmCrossProduct=crossProduct2d(nx,ny,mx,my);if(Math.abs(nmCrossProduct)&lt;1e-6)return null;var p=crossProduct2d(a1x-b1x,a1y-b1y,nx,ny)/nmCrossProduct;return p&lt;0||p&gt;1?null:new Point(p*mx+a1x,p*my+a1y)}function projPtOnLine(pt,lineA,lineB){var dir3=new Point;Point.sub(dir3,lineB,lineA),dir3.normalize();var dir22=new Point;return Point.sub(dir22,pt,lineA),dir22.dot(dir3)}function addToPoly(poly,pt){var last=poly[poly.length-1];last&amp;&amp;last[0]===pt[0]&amp;&amp;last[1]===pt[1]||poly.push(pt)}function binaryDividePolygon(polygonShape){var points2=polygonShape.points,min3=[],max3=[];fromPoints(points2,min3,max3);var boundingRect=new BoundingRect(min3[0],min3[1],max3[0]-min3[0],max3[1]-min3[1]),width=boundingRect.width,height=boundingRect.height,x=boundingRect.x,y=boundingRect.y,pt02=new Point,pt12=new Point;return width&gt;height?(pt02.x=pt12.x=x+width/2,pt02.y=y,pt12.y=y+height):(pt02.y=pt12.y=y+height/2,pt02.x=x,pt12.x=x+width),function splitPolygonByLine(points2,lineA,lineB){for(var len2=points2.length,intersections=[],i=0;i&lt;len2;i++){var p0=points2[i],p1=points2[(i+1)%len2],intersectionPt=lineLineIntersect(p0[0],p0[1],p1[0],p1[1],lineA.x,lineA.y,lineB.x,lineB.y);intersectionPt&amp;&amp;intersections.push({projPt:projPtOnLine(intersectionPt,lineA,lineB),pt:intersectionPt,idx:i})}if(intersections.length&lt;2)return[{points:points2},{points:points2}];intersections.sort(function(a,b){return a.projPt-b.projPt});var splitPt0=intersections[0],splitPt1=intersections[intersections.length-1];if(splitPt1.idx&lt;splitPt0.idx){var tmp=splitPt0;splitPt0=splitPt1,splitPt1=tmp}var splitPt0Arr=[splitPt0.pt.x,splitPt0.pt.y],splitPt1Arr=[splitPt1.pt.x,splitPt1.pt.y],newPolyA=[splitPt0Arr],newPolyB=[splitPt1Arr];for(i=splitPt0.idx+1;i&lt;=splitPt1.idx;i++)addToPoly(newPolyA,points2[i].slice());for(addToPoly(newPolyA,splitPt1Arr),addToPoly(newPolyA,splitPt0Arr),i=splitPt1.idx+1;i&lt;=splitPt0.idx+len2;i++)addToPoly(newPolyB,points2[i%len2].slice());return addToPoly(newPolyB,splitPt0Arr),addToPoly(newPolyB,splitPt1Arr),[{points:newPolyA},{points:newPolyB}]}(points2,pt02,pt12)}function binaryDivideRecursive(divider,shape,count2,out2){if(1===count2)out2.push(shape);else{var mid=Math.floor(count2/2),sub2=divider(shape);binaryDivideRecursive(divider,sub2[0],mid,out2),binaryDivideRecursive(divider,sub2[1],count2-mid,out2)}return out2}function copyPathProps(source,target){target.setStyle(source.style),target.z=source.z,target.z2=source.z2,target.zlevel=source.zlevel}function split(path,count2){var OutShapeCtor,outShapes=[],shape=path.shape;switch(path.type){case"rect":!function divideRect(rectShape,count2,outShapes){for(var width=rectShape.width,height=rectShape.height,isHorizontalRow=width&gt;height,grids=getDividingGrids([width,height],isHorizontalRow?0:1,count2),rowSizeDim=isHorizontalRow?"width":"height",columnSizeDim=isHorizontalRow?"height":"width",rowDim=isHorizontalRow?"x":"y",columnDim=isHorizontalRow?"y":"x",rowSize=rectShape[rowSizeDim]/grids.length,row=0;row&lt;grids.length;row++)for(var columnSize=rectShape[columnSizeDim]/grids[row],column=0;column&lt;grids[row];column++){var newShape={};newShape[rowDim]=row*rowSize,newShape[columnDim]=column*columnSize,newShape[rowSizeDim]=rowSize,newShape[columnSizeDim]=columnSize,newShape.x+=rectShape.x,newShape.y+=rectShape.y,outShapes.push(newShape)}}(shape,count2,outShapes),OutShapeCtor=Rect$2;break;case"sector":divideSector(shape,count2,outShapes),OutShapeCtor=Sector;break;case"circle":divideSector({r0:0,r:shape.r,startAngle:0,endAngle:2*Math.PI,cx:shape.cx,cy:shape.cy},count2,outShapes),OutShapeCtor=Sector;break;default:var m2=path.getComputedTransform(),scale2=m2?Math.sqrt(Math.max(m2[0]*m2[0]+m2[1]*m2[1],m2[2]*m2[2]+m2[3]*m2[3])):1,polygons=map$1(function pathToPolygons(path,scale2){var bezierArrayGroups=pathToBezierCurves(path),polygons=[];scale2=scale2||1;for(var i=0;i&lt;bezierArrayGroups.length;i++){var beziers=bezierArrayGroups[i],polygon=[],x0=beziers[0],y0=beziers[1];polygon.push(x0,y0);for(var k=2;k&lt;beziers.length;){var x1=beziers[k++],y1=beziers[k++],x2=beziers[k++],y2=beziers[k++],x3=beziers[k++],y3=beziers[k++];adpativeBezier(x0,y0,x1,y1,x2,y2,x3,y3,polygon,scale2),x0=x3,y0=y3}polygons.push(polygon)}return polygons}(path.getUpdatedPathProxy(),scale2),function(poly){return function polygonConvert(points2){for(var out2=[],i=0;i&lt;points2.length;)out2.push([points2[i++],points2[i++]]);return out2}(poly)}),polygonCount=polygons.length;if(0===polygonCount)binaryDivideRecursive(binaryDividePolygon,{points:polygons[0]},count2,outShapes);else if(polygonCount===count2)for(var i=0;i&lt;polygonCount;i++)outShapes.push({points:polygons[i]});else{var totalArea_1=0,items=map$1(polygons,function(poly){var min3=[],max3=[];fromPoints(poly,min3,max3);var area=(max3[1]-min3[1])*(max3[0]-min3[0]);return totalArea_1+=area,{poly:poly,area:area}});items.sort(function(a,b){return b.area-a.area});var left=count2;for(i=0;i&lt;polygonCount;i++){var item=items[i];if(left&lt;=0)break;var selfCount=i===polygonCount-1?left:Math.ceil(item.area/totalArea_1*count2);selfCount&lt;0||(binaryDivideRecursive(binaryDividePolygon,{points:item.poly},selfCount,outShapes),left-=selfCount)}}OutShapeCtor=Polygon}if(!OutShapeCtor)return function clone(path,count2){for(var paths=[],i=0;i&lt;count2;i++)paths.push(clonePath(path));return paths}(path,count2);var out2=[];for(i=0;i&lt;outShapes.length;i++){var subPath=new OutShapeCtor;subPath.setShape(outShapes[i]),copyPathProps(path,subPath),out2.push(subPath)}return out2}function alignSubpath(subpath1,subpath2){var len1=subpath1.length,len2=subpath2.length;if(len1===len2)return[subpath1,subpath2];for(var tmpSegX=[],tmpSegY=[],shorterPath=len1&lt;len2?subpath1:subpath2,shorterLen=Math.min(len1,len2),diff=Math.abs(len2-len1)/6,shorterBezierCount=(shorterLen-2)/6,eachCurveSubDivCount=Math.ceil(diff/shorterBezierCount)+1,newSubpath=[shorterPath[0],shorterPath[1]],remained=diff,i=2;i&lt;shorterLen;){var x0=shorterPath[i-2],y0=shorterPath[i-1],x1=shorterPath[i++],y1=shorterPath[i++],x2=shorterPath[i++],y2=shorterPath[i++],x3=shorterPath[i++],y3=shorterPath[i++];if(remained&lt;=0)newSubpath.push(x1,y1,x2,y2,x3,y3);else{for(var actualSubDivCount=Math.min(remained,eachCurveSubDivCount-1)+1,k=1;k&lt;=actualSubDivCount;k++){var p=k/actualSubDivCount;cubicSubdivide(x0,x1,x2,x3,p,tmpSegX),cubicSubdivide(y0,y1,y2,y3,p,tmpSegY),x0=tmpSegX[3],y0=tmpSegY[3],newSubpath.push(tmpSegX[1],tmpSegY[1],tmpSegX[2],tmpSegY[2],x0,y0),x1=tmpSegX[5],y1=tmpSegY[5],x2=tmpSegX[6],y2=tmpSegY[6]}remained-=actualSubDivCount-1}}return shorterPath===subpath1?[newSubpath,subpath2]:[subpath1,newSubpath]}function createSubpath(lastSubpathSubpath,otherSubpath){for(var len2=lastSubpathSubpath.length,lastX=lastSubpathSubpath[len2-2],lastY=lastSubpathSubpath[len2-1],newSubpath=[],i=0;i&lt;otherSubpath.length;)newSubpath[i++]=lastX,newSubpath[i++]=lastY;return newSubpath}function centroid(array){for(var signedArea=0,cx=0,cy=0,len2=array.length,i=0,j=len2-2;i&lt;len2;j=i,i+=2){var x0=array[j],y0=array[j+1],x1=array[i],y1=array[i+1],a=x0*y1-x1*y0;signedArea+=a,cx+=(x0+x1)*a,cy+=(y0+y1)*a}return 0===signedArea?[array[0]||0,array[1]||0]:[cx/signedArea/3,cy/signedArea/3,signedArea]}function findBestRingOffset(fromSubBeziers,toSubBeziers,fromCp,toCp){for(var bezierCount=(fromSubBeziers.length-2)/6,bestScore=1/0,bestOffset=0,len2=fromSubBeziers.length,len22=len2-2,offset=0;offset&lt;bezierCount;offset++){for(var cursorOffset=6*offset,score=0,k=0;k&lt;len2;k+=2){var idx=0===k?cursorOffset:(cursorOffset+k-2)%len22+2,x0=fromSubBeziers[idx]-fromCp[0],y0=fromSubBeziers[idx+1]-fromCp[1],dx=toSubBeziers[k]-toCp[0]-x0,dy=toSubBeziers[k+1]-toCp[1]-y0;score+=dx*dx+dy*dy}score&lt;bestScore&amp;&amp;(bestScore=score,bestOffset=offset)}return bestOffset}function reverse(array){for(var newArr=[],len2=array.length,i=0;i&lt;len2;i+=2)newArr[i]=array[len2-i-2],newArr[i+1]=array[len2-i-1];return newArr}function isCombineMorphing(path){return path.__isCombineMorphing}function saveAndModifyMethod(obj,methodName,modifiers){var savedMethodName="__mOriginal_"+methodName,originalMethod=obj[savedMethodName]||obj[methodName];obj[savedMethodName]||(obj[savedMethodName]=obj[methodName]);var replace=modifiers.replace,after=modifiers.after,before=modifiers.before;obj[methodName]=function(){var res,args=arguments;return before&amp;&amp;before.apply(this,args),res=replace?replace.apply(this,args):originalMethod.apply(this,args),after&amp;&amp;after.apply(this,args),res}}function restoreMethod(obj,methodName){var savedMethodName="__mOriginal_"+methodName;obj[savedMethodName]&amp;&amp;(obj[methodName]=obj[savedMethodName],obj[savedMethodName]=null)}function applyTransformOnBeziers(bezierCurves,mm){for(var i=0;i&lt;bezierCurves.length;i++)for(var subBeziers=bezierCurves[i],k=0;k&lt;subBeziers.length;){var x=subBeziers[k],y=subBeziers[k+1];subBeziers[k++]=mm[0]*x+mm[2]*y+mm[4],subBeziers[k++]=mm[1]*x+mm[3]*y+mm[5]}}function prepareMorphPath(fromPath,toPath){var fromPathProxy=fromPath.getUpdatedPathProxy(),toPathProxy=toPath.getUpdatedPathProxy(),_a2=function alignBezierCurves(array1,array2){for(var _a2,lastSubpath1,lastSubpath2,newArray1=[],newArray2=[],i=0;i&lt;Math.max(array1.length,array2.length);i++){var subpath1=array1[i],subpath2=array2[i],newSubpath1=void 0,newSubpath2=void 0;subpath1?subpath2?(lastSubpath1=newSubpath1=(_a2=alignSubpath(subpath1,subpath2))[0],lastSubpath2=newSubpath2=_a2[1]):(newSubpath2=createSubpath(lastSubpath2||subpath1,subpath1),newSubpath1=subpath1):(newSubpath1=createSubpath(lastSubpath1||subpath2,subpath2),newSubpath2=subpath2),newArray1.push(newSubpath1),newArray2.push(newSubpath2)}return[newArray1,newArray2]}(pathToBezierCurves(fromPathProxy),pathToBezierCurves(toPathProxy)),fromBezierCurves=_a2[0],toBezierCurves=_a2[1],fromPathTransform=fromPath.getComputedTransform(),toPathTransform=toPath.getComputedTransform();fromPathTransform&amp;&amp;applyTransformOnBeziers(fromBezierCurves,fromPathTransform),toPathTransform&amp;&amp;applyTransformOnBeziers(toBezierCurves,toPathTransform),saveAndModifyMethod(toPath,"updateTransform",{replace:function updateIdentityTransform(){this.transform=null}}),toPath.transform=null;var morphingData=function findBestMorphingRotation(fromArr,toArr2,searchAngleIteration,searchAngleRange){for(var fromNeedsReverse,result=[],i=0;i&lt;fromArr.length;i++){var fromSubpathBezier=fromArr[i],toSubpathBezier=toArr2[i],fromCp=centroid(fromSubpathBezier),toCp=centroid(toSubpathBezier);null==fromNeedsReverse&amp;&amp;(fromNeedsReverse=fromCp[2]&lt;0!=toCp[2]&lt;0);var newFromSubpathBezier=[],newToSubpathBezier=[],bestAngle=0,bestScore=1/0,tmpArr2=[],len2=fromSubpathBezier.length;fromNeedsReverse&amp;&amp;(fromSubpathBezier=reverse(fromSubpathBezier));for(var offset=6*findBestRingOffset(fromSubpathBezier,toSubpathBezier,fromCp,toCp),len22=len2-2,k=0;k&lt;len22;k+=2){var idx=(offset+k)%len22+2;newFromSubpathBezier[k+2]=fromSubpathBezier[idx]-fromCp[0],newFromSubpathBezier[k+3]=fromSubpathBezier[idx+1]-fromCp[1]}newFromSubpathBezier[0]=fromSubpathBezier[offset]-fromCp[0],newFromSubpathBezier[1]=fromSubpathBezier[offset+1]-fromCp[1];for(var step=searchAngleRange/searchAngleIteration,angle=-searchAngleRange/2;angle&lt;=searchAngleRange/2;angle+=step){var sa=Math.sin(angle),ca=Math.cos(angle),score=0;for(k=0;k&lt;fromSubpathBezier.length;k+=2){var x0=newFromSubpathBezier[k],y0=newFromSubpathBezier[k+1],x1=toSubpathBezier[k]-toCp[0],y1=toSubpathBezier[k+1]-toCp[1],newX1=x1*ca-y1*sa,newY1=x1*sa+y1*ca;tmpArr2[k]=newX1,tmpArr2[k+1]=newY1;var dx=newX1-x0,dy=newY1-y0;score+=dx*dx+dy*dy}if(score&lt;bestScore){bestScore=score,bestAngle=angle;for(var m2=0;m2&lt;tmpArr2.length;m2++)newToSubpathBezier[m2]=tmpArr2[m2]}}result.push({from:newFromSubpathBezier,to:newToSubpathBezier,fromCp:fromCp,toCp:toCp,rotation:-bestAngle})}return result}(fromBezierCurves,toBezierCurves,10,Math.PI),tmpArr2=[];saveAndModifyMethod(toPath,"buildPath",{replace:function(path){for(var t=toPath.__morphT,onet=1-t,newCp=[],i=0;i&lt;morphingData.length;i++){var item=morphingData[i],from=item.from,to=item.to,angle=item.rotation*t,fromCp=item.fromCp,toCp=item.toCp,sa=Math.sin(angle),ca=Math.cos(angle);lerp$1(newCp,fromCp,toCp,t);for(var m2=0;m2&lt;from.length;m2+=2){var x0_1=from[m2],y0_1=from[m2+1],x=x0_1*onet+(x1=to[m2])*t,y=y0_1*onet+(y1=to[m2+1])*t;tmpArr2[m2]=x*ca-y*sa+newCp[0],tmpArr2[m2+1]=x*sa+y*ca+newCp[1]}var x0=tmpArr2[0],y0=tmpArr2[1];path.moveTo(x0,y0);for(m2=2;m2&lt;from.length;){var x1=tmpArr2[m2++],y1=tmpArr2[m2++],x2=tmpArr2[m2++],y2=tmpArr2[m2++],x3=tmpArr2[m2++],y3=tmpArr2[m2++];x0===x1&amp;&amp;y0===y1&amp;&amp;x2===x3&amp;&amp;y2===y3?path.lineTo(x3,y3):path.bezierCurveTo(x1,y1,x2,y2,x3,y3),x0=x3,y0=y3}}}})}function morphPath(fromPath,toPath,animationOpts){if(!fromPath||!toPath)return toPath;var oldDone=animationOpts.done,oldDuring=animationOpts.during;return prepareMorphPath(fromPath,toPath),toPath.__morphT=0,toPath.animateTo({__morphT:1},defaults({during:function(p){toPath.dirtyShape(),oldDuring&amp;&amp;oldDuring(p)},done:function(){!function restoreToPath(){restoreMethod(toPath,"buildPath"),restoreMethod(toPath,"updateTransform"),toPath.__morphT=-1,toPath.createPathProxy(),toPath.dirtyShape()}(),oldDone&amp;&amp;oldDone()}},animationOpts)),toPath}function hilbert(x,y,minX,minY,maxX,maxY){x=maxX===minX?0:Math.round(32767*(x-minX)/(maxX-minX)),y=maxY===minY?0:Math.round(32767*(y-minY)/(maxY-minY));for(var tmp,d=0,s=32768;s&gt;0;s/=2){var rx=0,ry=0;(x&amp;s)&gt;0&amp;&amp;(rx=1),(y&amp;s)&gt;0&amp;&amp;(ry=1),d+=s*s*(3*rx^ry),0===ry&amp;&amp;(1===rx&amp;&amp;(x=s-1-x,y=s-1-y),tmp=x,x=y,y=tmp)}return d}function sortPaths(pathList){var xMin=1/0,yMin=1/0,xMax=-1/0,yMax=-1/0,cps=map$1(pathList,function(path){var rect=path.getBoundingRect(),m2=path.getComputedTransform(),x=rect.x+rect.width/2+(m2?m2[4]:0),y=rect.y+rect.height/2+(m2?m2[5]:0);return xMin=Math.min(x,xMin),yMin=Math.min(y,yMin),xMax=Math.max(x,xMax),yMax=Math.max(y,yMax),[x,y]});return map$1(cps,function(cp,idx){return{cp:cp,z:hilbert(cp[0],cp[1],xMin,yMin,xMax,yMax),path:pathList[idx]}}).sort(function(a,b){return a.z-b.z}).map(function(item){return item.path})}function defaultDividePath(param){return split(param.path,param.count)}function isMultiple(elements){return isArray$1(elements[0])}function prepareMorphBatches(one,many){for(var batches=[],batchCount=one.length,i=0;i&lt;batchCount;i++)batches.push({one:one[i],many:[]});for(i=0;i&lt;many.length;i++){var len2=many[i].length,k=void 0;for(k=0;k&lt;len2;k++)batches[k%batchCount].many.push(many[i][k])}var off=0;for(i=batchCount-1;i&gt;=0;i--)if(!batches[i].many.length){var moveFrom=batches[off].many;if(moveFrom.length&lt;=1){if(!off)return batches;off=0}len2=moveFrom.length;var mid=Math.ceil(len2/2);batches[i].many=moveFrom.slice(mid,len2),batches[off].many=moveFrom.slice(0,mid),off++}return batches}var pathDividers={clone:function(params){for(var ret=[],approxOpacity=1-Math.pow(1-params.path.style.opacity,1/params.count),i=0;i&lt;params.count;i++){var cloned=clonePath(params.path);cloned.setStyle("opacity",approxOpacity),ret.push(cloned)}return ret},split:null};function applyMorphAnimation(from,to,divideShape,seriesModel,dataIndex,animateOtherProps){if(from.length&amp;&amp;to.length){var updateAnimationCfg=getAnimationConfig("update",seriesModel,dataIndex);if(updateAnimationCfg&amp;&amp;updateAnimationCfg.duration&gt;0){var many,one,animationDelay=seriesModel.getModel("universalTransition").get("delay"),animationCfg=Object.assign({setToFinal:!0},updateAnimationCfg);isMultiple(from)&amp;&amp;(many=from,one=to),isMultiple(to)&amp;&amp;(many=to,one=from);for(var fromIsMany=many?many===from:from.length&gt;to.length,morphBatches=many?prepareMorphBatches(one,many):prepareMorphBatches(fromIsMany?to:from,[fromIsMany?from:to]),animateCount=0,i=0;i&lt;morphBatches.length;i++)animateCount+=morphBatches[i].many.length;var animateIndex=0;for(i=0;i&lt;morphBatches.length;i++)morphOneBatch(morphBatches[i],fromIsMany,animateIndex,animateCount),animateIndex+=morphBatches[i].many.length}}function morphOneBatch(batch,fromIsMany2,animateIndex2,animateCount2,forceManyOne){var batchMany=batch.many,batchOne=batch.one;if(1!==batchMany.length||forceManyOne)for(var separateAnimationCfg=defaults({dividePath:pathDividers[divideShape],individualDelay:animationDelay&amp;&amp;function(idx,count3,fromPath,toPath){return animationDelay(idx+animateIndex2,animateCount2)}},animationCfg),_a2=fromIsMany2?function combineMorph(fromList,toPath,animationOpts){var fromPathList=[];!function addFromPath(fromList2){for(var i2=0;i2&lt;fromList2.length;i2++){var from2=fromList2[i2];isCombineMorphing(from2)?addFromPath(from2.childrenRef()):from2 instanceof Path&amp;&amp;fromPathList.push(from2)}}(fromList);var separateCount=fromPathList.length;if(!separateCount)return{fromIndividuals:[],toIndividuals:[],count:0};var toSubPathList=(animationOpts.dividePath||defaultDividePath)({path:toPath,count:separateCount});if(toSubPathList.length!==separateCount)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};fromPathList=sortPaths(fromPathList),toSubPathList=sortPaths(toSubPathList);for(var oldDone=animationOpts.done,oldDuring=animationOpts.during,individualDelay=animationOpts.individualDelay,identityTransform=new Transformable,i=0;i&lt;separateCount;i++){var from=fromPathList[i],to=toSubPathList[i];to.parent=toPath,to.copyTransform(identityTransform),individualDelay||prepareMorphPath(from,to)}function addToSubPathListToZr(zr){for(var i2=0;i2&lt;toSubPathList.length;i2++)toSubPathList[i2].addSelfToZr(zr)}function restoreToPath(){toPath.__isCombineMorphing=!1,toPath.__morphT=-1,toPath.childrenRef=null,restoreMethod(toPath,"addSelfToZr"),restoreMethod(toPath,"removeSelfFromZr")}toPath.__isCombineMorphing=!0,toPath.childrenRef=function(){return toSubPathList},saveAndModifyMethod(toPath,"addSelfToZr",{after:function(zr){addToSubPathListToZr(zr)}}),saveAndModifyMethod(toPath,"removeSelfFromZr",{after:function(zr){for(var i2=0;i2&lt;toSubPathList.length;i2++)toSubPathList[i2].removeSelfFromZr(zr)}});var toLen=toSubPathList.length;if(individualDelay){var animating_1=toLen,eachDone=function(){0===--animating_1&amp;&amp;(restoreToPath(),oldDone&amp;&amp;oldDone())};for(i=0;i&lt;toLen;i++){var indivdualAnimationOpts=individualDelay?defaults({delay:(animationOpts.delay||0)+individualDelay(i,toLen,fromPathList[i],toSubPathList[i]),done:eachDone},animationOpts):animationOpts;morphPath(fromPathList[i],toSubPathList[i],indivdualAnimationOpts)}}else toPath.__morphT=0,toPath.animateTo({__morphT:1},defaults({during:function(p){for(var i2=0;i2&lt;toLen;i2++){var child=toSubPathList[i2];child.__morphT=toPath.__morphT,child.dirtyShape()}oldDuring&amp;&amp;oldDuring(p)},done:function(){restoreToPath();for(var i2=0;i2&lt;fromList.length;i2++)restoreMethod(fromList[i2],"updateTransform");oldDone&amp;&amp;oldDone()}},animationOpts));return toPath.__zr&amp;&amp;addToSubPathListToZr(toPath.__zr),{fromIndividuals:fromPathList,toIndividuals:toSubPathList,count:toLen}}(batchMany,batchOne,separateAnimationCfg):function separateMorph(fromPath,toPathList,animationOpts){var toLen=toPathList.length,fromPathList=[],dividePath=animationOpts.dividePath||defaultDividePath;if(isCombineMorphing(fromPath)){!function addFromPath(fromList){for(var i2=0;i2&lt;fromList.length;i2++){var from=fromList[i2];isCombineMorphing(from)?addFromPath(from.childrenRef()):from instanceof Path&amp;&amp;fromPathList.push(from)}}(fromPath.childrenRef());var fromLen=fromPathList.length;if(fromLen&lt;toLen)for(var k=0,i=fromLen;i&lt;toLen;i++)fromPathList.push(clonePath(fromPathList[k++%fromLen]));fromPathList.length=toLen}else{fromPathList=dividePath({path:fromPath,count:toLen});var fromPathTransform=fromPath.getComputedTransform();for(i=0;i&lt;fromPathList.length;i++)fromPathList[i].setLocalTransform(fromPathTransform);if(fromPathList.length!==toLen)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}fromPathList=sortPaths(fromPathList),toPathList=sortPaths(toPathList);var individualDelay=animationOpts.individualDelay;for(i=0;i&lt;toLen;i++){var indivdualAnimationOpts=individualDelay?defaults({delay:(animationOpts.delay||0)+individualDelay(i,toLen,fromPathList[i],toPathList[i])},animationOpts):animationOpts;morphPath(fromPathList[i],toPathList[i],indivdualAnimationOpts)}return{fromIndividuals:fromPathList,toIndividuals:toPathList,count:toPathList.length}}(batchOne,batchMany,separateAnimationCfg),fromIndividuals=_a2.fromIndividuals,toIndividuals=_a2.toIndividuals,count2=fromIndividuals.length,k=0;k&lt;count2;k++){individualAnimationCfg=animationDelay?defaults({delay:animationDelay(k,count2)},animationCfg):animationCfg;animateOtherProps(fromIndividuals[k],toIndividuals[k],fromIsMany2?batchMany[k]:batch.one,fromIsMany2?batch.one:batchMany[k],individualAnimationCfg)}else{var individualAnimationCfg,batchFrom=fromIsMany2?batchMany[0]:batchOne,batchTo=fromIsMany2?batchOne:batchMany[0];if(isCombineMorphing(batchFrom))morphOneBatch({many:[batchFrom],one:batchTo},!0,animateIndex2,animateCount2,!0);else morphPath(batchFrom,batchTo,individualAnimationCfg=animationDelay?defaults({delay:animationDelay(animateIndex2,animateCount2)},animationCfg):animationCfg),animateOtherProps(batchFrom,batchTo,batchFrom,batchTo,individualAnimationCfg)}}}function getPathList(elements){if(!elements)return[];if(isArray$1(elements)){for(var pathList_1=[],i=0;i&lt;elements.length;i++)pathList_1.push(getPathList(elements[i]));return pathList_1}var pathList=[];return elements.traverse(function(el){el instanceof Path&amp;&amp;!el.disableMorphing&amp;&amp;!el.invisible&amp;&amp;!el.ignore&amp;&amp;pathList.push(el)}),pathList}var getUniversalTransitionGlobalStore=makeInner();function getGroupId(data,dataIndex,dataGroupId,isChild){var groupIdDim=function getDimension(data,visualDimension){for(var dimensions=data.dimensions,i=0;i&lt;dimensions.length;i++){var dimInfo=data.getDimensionInfo(dimensions[i]);if(dimInfo&amp;&amp;0===dimInfo.otherDims[visualDimension])return dimensions[i]}}(data,isChild?"itemChildGroupId":"itemGroupId");if(groupIdDim){var groupId=function getValueByDimension(data,dataIndex,dimension){var dimInfo=data.getDimensionInfo(dimension),dimOrdinalMeta=dimInfo&amp;&amp;dimInfo.ordinalMeta;if(dimInfo){var value=data.get(dimInfo.name,dataIndex);return dimOrdinalMeta&amp;&amp;dimOrdinalMeta.categories[value]||value+""}}(data,dataIndex,groupIdDim);return groupId}var rawDataItem=data.getRawDataItem(dataIndex),property=isChild?"childGroupId":"groupId";return rawDataItem&amp;&amp;rawDataItem[property]?rawDataItem[property]+"":isChild?void 0:dataGroupId||data.getId(dataIndex)}function flattenDataDiffItems(list){var items=[];return each$f(list,function(seriesInfo){var data=seriesInfo.data,dataGroupId=seriesInfo.dataGroupId;if(!(data.count()&gt;1e4))for(var indices=data.getIndices(),dataIndex=0;dataIndex&lt;indices.length;dataIndex++)items.push({data:data,groupId:getGroupId(data,dataIndex,dataGroupId,!1),childGroupId:getGroupId(data,dataIndex,dataGroupId,!0),divide:seriesInfo.divide,dataIndex:dataIndex})}),items}function fadeInElement(newEl2,newSeries,newIndex){newEl2.traverse(function(el){el instanceof Path&amp;&amp;initProps(el,{style:{opacity:0}},newSeries,{dataIndex:newIndex,isFrom:!0})})}function removeEl(el){if(el.parent){var computedTransform=el.getComputedTransform();el.setLocalTransform(computedTransform),el.parent.remove(el)}}function stopAnimation(el){el.stopAnimation(),el.isGroup&amp;&amp;el.traverse(function(child){child.stopAnimation()})}function animateElementStyles(el,dataIndex,seriesModel){var animationConfig=getAnimationConfig("update",seriesModel,dataIndex);animationConfig&amp;&amp;el.traverse(function(child){if(child instanceof Displayable){var oldStyle=function getOldStyle(el){return transitionStore(el).oldStyle}(child);oldStyle&amp;&amp;child.animateFrom({style:oldStyle},animationConfig)}})}function transitionBetween(oldList,newList,api){var oldDiffItems=flattenDataDiffItems(oldList),newDiffItems=flattenDataDiffItems(newList);function updateMorphingPathProps(from,to,rawFrom,rawTo,animationCfg){(rawFrom||from)&amp;&amp;to.animateFrom({style:rawFrom&amp;&amp;rawFrom!==from?extend(extend({},rawFrom.style),from.style):from.style},animationCfg)}var hasMorphAnimation=!1,direction=0,oldGroupIds=createHashMap(),oldChildGroupIds=createHashMap();oldDiffItems.forEach(function(item){item.groupId&amp;&amp;oldGroupIds.set(item.groupId,!0),item.childGroupId&amp;&amp;oldChildGroupIds.set(item.childGroupId,!0)});for(var i=0;i&lt;newDiffItems.length;i++){var newGroupId=newDiffItems[i].groupId;if(oldChildGroupIds.get(newGroupId)){direction=1;break}var newChildGroupId=newDiffItems[i].childGroupId;if(newChildGroupId&amp;&amp;oldGroupIds.get(newChildGroupId)){direction=2;break}}function createKeyGetter(isOld,onlyGetId){return function(diffItem){var data=diffItem.data,dataIndex=diffItem.dataIndex;return onlyGetId?data.getId(dataIndex):isOld?1===direction?diffItem.childGroupId:diffItem.groupId:2===direction?diffItem.childGroupId:diffItem.groupId}}var useId=function isAllIdSame(oldDiffItems,newDiffItems){var len2=oldDiffItems.length;if(len2!==newDiffItems.length)return!1;for(var i=0;i&lt;len2;i++){var oldItem=oldDiffItems[i],newItem=newDiffItems[i];if(oldItem.data.getId(oldItem.dataIndex)!==newItem.data.getId(newItem.dataIndex))return!1}return!0}(oldDiffItems,newDiffItems),isElementStillInChart={};if(!useId)for(i=0;i&lt;newDiffItems.length;i++){var newItem=newDiffItems[i],el=newItem.data.getItemGraphicEl(newItem.dataIndex);el&amp;&amp;(isElementStillInChart[el.id]=!0)}function updateOneToOne(newIndex,oldIndex){var oldItem=oldDiffItems[oldIndex],newItem2=newDiffItems[newIndex],newSeries=newItem2.data.hostModel,oldEl=oldItem.data.getItemGraphicEl(oldItem.dataIndex),newEl2=newItem2.data.getItemGraphicEl(newItem2.dataIndex);oldEl!==newEl2?oldEl&amp;&amp;isElementStillInChart[oldEl.id]||newEl2&amp;&amp;(stopAnimation(newEl2),oldEl?(stopAnimation(oldEl),removeEl(oldEl),hasMorphAnimation=!0,applyMorphAnimation(getPathList(oldEl),getPathList(newEl2),newItem2.divide,newSeries,newIndex,updateMorphingPathProps)):fadeInElement(newEl2,newSeries,newIndex)):newEl2&amp;&amp;animateElementStyles(newEl2,newItem2.dataIndex,newSeries)}new DataDiffer(oldDiffItems,newDiffItems,createKeyGetter(!0,useId),createKeyGetter(!1,useId),null,"multiple").update(updateOneToOne).updateManyToOne(function(newIndex,oldIndices){var newItem2=newDiffItems[newIndex],newData=newItem2.data,newSeries=newData.hostModel,newEl2=newData.getItemGraphicEl(newItem2.dataIndex),oldElsList=filter(map$1(oldIndices,function(idx){return oldDiffItems[idx].data.getItemGraphicEl(oldDiffItems[idx].dataIndex)}),function(oldEl){return oldEl&amp;&amp;oldEl!==newEl2&amp;&amp;!isElementStillInChart[oldEl.id]});newEl2&amp;&amp;(stopAnimation(newEl2),oldElsList.length?(each$f(oldElsList,function(oldEl){stopAnimation(oldEl),removeEl(oldEl)}),hasMorphAnimation=!0,applyMorphAnimation(getPathList(oldElsList),getPathList(newEl2),newItem2.divide,newSeries,newIndex,updateMorphingPathProps)):fadeInElement(newEl2,newSeries,newItem2.dataIndex))}).updateOneToMany(function(newIndices,oldIndex){var oldItem=oldDiffItems[oldIndex],oldEl=oldItem.data.getItemGraphicEl(oldItem.dataIndex);if(!oldEl||!isElementStillInChart[oldEl.id]){var newElsList=filter(map$1(newIndices,function(idx){return newDiffItems[idx].data.getItemGraphicEl(newDiffItems[idx].dataIndex)}),function(el2){return el2&amp;&amp;el2!==oldEl}),newSeris=newDiffItems[newIndices[0]].data.hostModel;newElsList.length&amp;&amp;(each$f(newElsList,function(newEl2){return stopAnimation(newEl2)}),oldEl?(stopAnimation(oldEl),removeEl(oldEl),hasMorphAnimation=!0,applyMorphAnimation(getPathList(oldEl),getPathList(newElsList),oldItem.divide,newSeris,newIndices[0],updateMorphingPathProps)):each$f(newElsList,function(newEl2){return fadeInElement(newEl2,newSeris,newIndices[0])}))}}).updateManyToMany(function(newIndices,oldIndices){new DataDiffer(oldIndices,newIndices,function(rawIdx){return oldDiffItems[rawIdx].data.getId(oldDiffItems[rawIdx].dataIndex)},function(rawIdx){return newDiffItems[rawIdx].data.getId(newDiffItems[rawIdx].dataIndex)}).update(function(newIndex,oldIndex){updateOneToOne(newIndices[newIndex],oldIndices[oldIndex])}).execute()}).execute(),hasMorphAnimation&amp;&amp;each$f(newList,function(_a2){var seriesModel=_a2.data.hostModel,view=seriesModel&amp;&amp;api.getViewOfSeriesModel(seriesModel),animationCfg=getAnimationConfig("update",seriesModel,0);view&amp;&amp;seriesModel.isAnimationEnabled()&amp;&amp;animationCfg&amp;&amp;animationCfg.duration&gt;0&amp;&amp;view.group.traverse(function(el2){el2 instanceof Path&amp;&amp;!el2.animators.length&amp;&amp;el2.animateFrom({style:{opacity:0}},animationCfg)})})}function getSeriesTransitionKey(series){var seriesKey=series.getModel("universalTransition").get("seriesKey");return seriesKey||series.id}function convertArraySeriesKeyToString(seriesKey){return isArray$1(seriesKey)?seriesKey.sort().join(","):seriesKey}function getDivideShapeFromData(data){if(data.hostModel)return data.hostModel.getModel("universalTransition").get("divideShape")}function querySeries(series,finder){for(var i=0;i&lt;series.length;i++){if(null!=finder.seriesIndex&amp;&amp;finder.seriesIndex===series[i].seriesIndex||null!=finder.seriesId&amp;&amp;finder.seriesId===series[i].id)return i}}use([install$R]),use([function install$S(registers){registers.registerPainter("svg",SVGPainter)}]),use([install$Q,install$P,install$O,function install$M(registers){use(install$N),registers.registerSeriesModel(ScatterSeriesModel),registers.registerChartView(ScatterView),registers.registerLayout(pointsLayout("scatter"))},function install$K(registers){use(install$L),registers.registerChartView(RadarView$1),registers.registerSeriesModel(RadarSeriesModel),registers.registerLayout(radarLayout),registers.registerProcessor(dataFilter$1("radar")),registers.registerPreprocessor(radarBackwardCompat)},function install$I(registers){use(install$J),registers.registerChartView(MapView),registers.registerSeriesModel(MapSeries),registers.registerLayout(mapSymbolLayout),registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",registers.registerAction)},function install$H(registers){registers.registerChartView(TreeView),registers.registerSeriesModel(TreeSeriesModel),registers.registerLayout(treeLayout),registers.registerVisual(treeVisual),function installTreeAction(registers){registers.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"tree",query:payload},function(seriesModel){var dataIndex=payload.dataIndex,node=seriesModel.getData().tree.getNodeByDataIndex(dataIndex);node.isExpand=!node.isExpand})}),registers.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(payload,ecModel,api){ecModel.eachComponent({mainType:"series",subType:"tree",query:payload},function(seriesModel){var res=updateCenterAndZoom(seriesModel.coordinateSystem,payload,void 0,api);seriesModel.setCenter&amp;&amp;seriesModel.setCenter(res.center),seriesModel.setZoom&amp;&amp;seriesModel.setZoom(res.zoom)})})}(registers)},function install$G(registers){registers.registerSeriesModel(TreemapSeriesModel),registers.registerChartView(TreemapView),registers.registerVisual(treemapVisual),registers.registerLayout(treemapLayout),function installTreemapAction(registers){for(var i=0;i&lt;actionTypes.length;i++)registers.registerAction({type:actionTypes[i],update:"updateView"},noop);registers.registerAction({type:"treemapRootToNode",update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"treemap",query:payload},function handleRootToNode(model,index){var targetInfo=retrieveTargetInfo(payload,["treemapZoomToNode","treemapRootToNode"],model);if(targetInfo){var originViewRoot=model.getViewRoot();originViewRoot&amp;&amp;(payload.direction=aboveViewRoot(originViewRoot,targetInfo.node)?"rollUp":"drillDown"),model.resetViewRoot(targetInfo.node)}})})}(registers)},function install$F(registers){registers.registerChartView(GraphView),registers.registerSeriesModel(GraphSeriesModel),registers.registerProcessor(categoryFilter),registers.registerVisual(categoryVisual),registers.registerVisual(graphEdgeVisual),registers.registerLayout(graphSimpleLayout),registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),registers.registerLayout(graphForceLayout),registers.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),registers.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),registers.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),registers.registerAction(actionInfo$1,function(payload,ecModel,api){ecModel.eachComponent({mainType:"series",query:payload},function(seriesModel){var res=updateCenterAndZoom(seriesModel.coordinateSystem,payload,void 0,api);seriesModel.setCenter&amp;&amp;seriesModel.setCenter(res.center),seriesModel.setZoom&amp;&amp;seriesModel.setZoom(res.zoom)})})},function install$E(registers){registers.registerChartView(GaugeView),registers.registerSeriesModel(GaugeSeriesModel)},function install$D(registers){registers.registerChartView(FunnelView),registers.registerSeriesModel(FunnelSeriesModel),registers.registerLayout(funnelLayout),registers.registerProcessor(dataFilter$1("funnel"))},function install$B(registers){use(install$C),registers.registerChartView(ParallelView$1),registers.registerSeriesModel(ParallelSeriesModel),registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH,parallelVisual)},function install$A(registers){registers.registerChartView(SankeyView),registers.registerSeriesModel(SankeySeriesModel),registers.registerLayout(sankeyLayout),registers.registerVisual(sankeyVisual),registers.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sankey",query:payload},function(seriesModel){seriesModel.setNodePosition(payload.dataIndex,[payload.localX,payload.localY])})})},function install$z(registers){registers.registerSeriesModel(BoxplotSeriesModel),registers.registerChartView(BoxplotView),registers.registerLayout(boxplotLayout),registers.registerTransform(boxplotTransform)},function install$y(registers){registers.registerChartView(CandlestickView),registers.registerSeriesModel(CandlestickSeriesModel),registers.registerPreprocessor(candlestickPreprocessor),registers.registerVisual(candlestickVisual),registers.registerLayout(candlestickLayout)},function install$x(registers){registers.registerChartView(EffectScatterView),registers.registerSeriesModel(EffectScatterSeriesModel),registers.registerLayout(pointsLayout("effectScatter"))},function install$w(registers){registers.registerChartView(LinesView),registers.registerSeriesModel(LinesSeriesModel),registers.registerLayout(linesLayout),registers.registerVisual(linesVisual)},install$v,function install$u(registers){registers.registerChartView(PictorialBarView),registers.registerSeriesModel(PictorialBarSeriesModel),registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))},function install$t(registers){registers.registerChartView(ThemeRiverView),registers.registerSeriesModel(ThemeRiverSeriesModel),registers.registerLayout(themeRiverLayout),registers.registerProcessor(dataFilter$1("themeRiver"))},function install$s(registers){registers.registerChartView(SunburstView),registers.registerSeriesModel(SunburstSeriesModel),registers.registerLayout(curry$1(sunburstLayout,"sunburst")),registers.registerProcessor(curry$1(dataFilter$1,"sunburst")),registers.registerVisual(sunburstVisual),function installSunburstAction(registers){registers.registerAction({type:"sunburstRootToNode",update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"sunburst",query:payload},function handleRootToNode(model,index){var targetInfo=retrieveTargetInfo(payload,["sunburstRootToNode"],model);if(targetInfo){var originViewRoot=model.getViewRoot();originViewRoot&amp;&amp;(payload.direction=aboveViewRoot(originViewRoot,targetInfo.node)?"rollUp":"drillDown"),model.resetViewRoot(targetInfo.node)}})}),registers.registerAction({type:"sunburstHighlight",update:"none"},function(payload,ecModel,api){payload=extend({},payload),ecModel.eachComponent({mainType:"series",subType:"sunburst",query:payload},function handleHighlight(model){var targetInfo=retrieveTargetInfo(payload,["sunburstHighlight"],model);targetInfo&amp;&amp;(payload.dataIndex=targetInfo.node.dataIndex)}),api.dispatchAction(extend(payload,{type:"highlight"}))}),registers.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(payload,ecModel,api){payload=extend({},payload),api.dispatchAction(extend(payload,{type:"downplay"}))})}(registers)},function install$r(registers){registers.registerChartView(CustomChartView),registers.registerSeriesModel(CustomSeriesModel)}]),use(install$p),use(function install$o(registers){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),registers.registerCoordinateSystem("polar",polarCreator),registers.registerComponentModel(PolarModel),registers.registerComponentView(PolarView),axisModelCreator(registers,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(registers,"radius",RadiusAxisModel,radiusAxisExtraOption),registers.registerComponentView(AngleAxisView),registers.registerComponentView(RadiusAxisView),registers.registerLayout(curry$1(barLayoutPolar,"bar"))}),use(install$J),use(function install$n(registers){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),registers.registerComponentView(SingleView),registers.registerComponentView(SingleAxisView),registers.registerComponentModel(SingleAxisModel),axisModelCreator(registers,"single",SingleAxisModel,SingleAxisModel.defaultOption),registers.registerCoordinateSystem("single",singleCreator)}),use(install$C),use(function install$m(registers){registers.registerComponentModel(CalendarModel),registers.registerComponentView(CalendarView),registers.registerCoordinateSystem("calendar",Calendar)}),use(function install$l(registers){registers.registerComponentModel(GraphicComponentModel),registers.registerComponentView(GraphicComponentView),registers.registerPreprocessor(function(option){var graphicOption=option.graphic;isArray$1(graphicOption)?graphicOption[0]&amp;&amp;graphicOption[0].elements?option.graphic=[option.graphic[0]]:option.graphic=[{elements:graphicOption}]:graphicOption&amp;&amp;!graphicOption.elements&amp;&amp;(option.graphic=[{elements:[graphicOption]}])})}),use(function install$j(registers){registers.registerComponentModel(ToolboxModel),registers.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}),use(install$i),use(install$q),use(function install$h(registers){registers.registerComponentView(BrushView),registers.registerComponentModel(BrushModel),registers.registerPreprocessor(brushPreprocessor),registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH,brushVisual),registers.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(payload,ecModel){ecModel.eachComponent({mainType:"brush",query:payload},function(brushModel){brushModel.setAreas(payload.areas)})}),registers.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),registers.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}),use(install$g),use(function install$f(registers){registers.registerComponentModel(SliderTimelineModel),registers.registerComponentView(SliderTimelineView),registers.registerSubTypeDefaulter("timeline",function(){return"slider"}),function installTimelineAction(registers){registers.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(payload,ecModel,api){var timelineModel=ecModel.getComponent("timeline");return timelineModel&amp;&amp;null!=payload.currentIndex&amp;&amp;(timelineModel.setCurrentIndex(payload.currentIndex),!timelineModel.get("loop",!0)&amp;&amp;timelineModel.isIndexMax()&amp;&amp;timelineModel.getPlayState()&amp;&amp;(timelineModel.setPlayState(!1),api.dispatchAction({type:"timelinePlayChange",playState:!1,from:payload.from}))),ecModel.resetOption("timeline",{replaceMerge:timelineModel.get("replaceMerge",!0)}),defaults({currentIndex:timelineModel.option.currentIndex},payload)}),registers.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");timelineModel&amp;&amp;null!=payload.playState&amp;&amp;timelineModel.setPlayState(payload.playState)})}(registers),registers.registerPreprocessor(timelinePreprocessor)}),use(function install$e(registers){registers.registerComponentModel(MarkPointModel),registers.registerComponentView(MarkPointView),registers.registerPreprocessor(function(opt){checkMarkerInSeries(opt.series,"markPoint")&amp;&amp;(opt.markPoint=opt.markPoint||{})})}),use(function install$d(registers){registers.registerComponentModel(MarkLineModel),registers.registerComponentView(MarkLineView),registers.registerPreprocessor(function(opt){checkMarkerInSeries(opt.series,"markLine")&amp;&amp;(opt.markLine=opt.markLine||{})})}),use(function install$c(registers){registers.registerComponentModel(MarkAreaModel),registers.registerComponentView(MarkAreaView),registers.registerPreprocessor(function(opt){checkMarkerInSeries(opt.series,"markArea")&amp;&amp;(opt.markArea=opt.markArea||{})})}),use(install$9),use(install$6),use(install$8),use(install$7),use(function install$3(registers){use(install$5),use(install$4)}),use(install$5),use(install$4),use(function install$2(registers){registers.registerPreprocessor(ariaPreprocessor),registers.registerVisual(registers.PRIORITY.VISUAL.ARIA,ariaVisual)}),use(function install$1(registers){registers.registerTransform(filterTransform),registers.registerTransform(sortTransform)}),use(install),use(function installUniversalTransition(registers){registers.registerUpdateLifecycle("series:beforeupdate",function(ecMOdel,api,params){each$f(normalizeToArray(params.seriesTransition),function(transOpt){each$f(normalizeToArray(transOpt.to),function(finder){for(var series=params.updatedSeries,i=0;i&lt;series.length;i++)(null!=finder.seriesIndex&amp;&amp;finder.seriesIndex===series[i].seriesIndex||null!=finder.seriesId&amp;&amp;finder.seriesId===series[i].id)&amp;&amp;(series[i].__universalTransitionEnabled=!0)})})}),registers.registerUpdateLifecycle("series:transition",function(ecModel,api,params){var globalStore=getUniversalTransitionGlobalStore(api);if(globalStore.oldSeries&amp;&amp;params.updatedSeries&amp;&amp;params.optionChanged){var transitionOpt=params.seriesTransition;if(transitionOpt)each$f(normalizeToArray(transitionOpt),function(opt){!function transitionSeriesFromOpt(transitionOpt,globalStore,params,api){var from=[],to=[];each$f(normalizeToArray(transitionOpt.from),function(finder){var idx=querySeries(globalStore.oldSeries,finder);idx&gt;=0&amp;&amp;from.push({dataGroupId:globalStore.oldDataGroupIds[idx],data:globalStore.oldData[idx],divide:getDivideShapeFromData(globalStore.oldData[idx]),groupIdDim:finder.dimension})}),each$f(normalizeToArray(transitionOpt.to),function(finder){var idx=querySeries(params.updatedSeries,finder);if(idx&gt;=0){var data=params.updatedSeries[idx].getData();to.push({dataGroupId:globalStore.oldDataGroupIds[idx],data:data,divide:getDivideShapeFromData(data),groupIdDim:finder.dimension})}}),from.length&gt;0&amp;&amp;to.length&gt;0&amp;&amp;transitionBetween(from,to,api)}(opt,globalStore,params,api)});else{var updateBatches_1=function findTransitionSeriesBatches(globalStore,params){var updateBatches=createHashMap(),oldDataMap=createHashMap(),oldDataMapForSplit=createHashMap();return each$f(globalStore.oldSeries,function(series,idx){var oldDataGroupId=globalStore.oldDataGroupIds[idx],oldData=globalStore.oldData[idx],transitionKey=getSeriesTransitionKey(series),transitionKeyStr=convertArraySeriesKeyToString(transitionKey);oldDataMap.set(transitionKeyStr,{dataGroupId:oldDataGroupId,data:oldData}),isArray$1(transitionKey)&amp;&amp;each$f(transitionKey,function(key){oldDataMapForSplit.set(key,{key:transitionKeyStr,dataGroupId:oldDataGroupId,data:oldData})})}),each$f(params.updatedSeries,function(series){if(series.isUniversalTransitionEnabled()&amp;&amp;series.isAnimationEnabled()){var newDataGroupId=series.get("dataGroupId"),newData=series.getData(),transitionKey=getSeriesTransitionKey(series),transitionKeyStr=convertArraySeriesKeyToString(transitionKey),oldData=oldDataMap.get(transitionKeyStr);if(oldData)updateBatches.set(transitionKeyStr,{oldSeries:[{dataGroupId:oldData.dataGroupId,divide:getDivideShapeFromData(oldData.data),data:oldData.data}],newSeries:[{dataGroupId:newDataGroupId,divide:getDivideShapeFromData(newData),data:newData}]});else if(isArray$1(transitionKey)){var oldSeries_1=[];each$f(transitionKey,function(key){var oldData2=oldDataMap.get(key);oldData2.data&amp;&amp;oldSeries_1.push({dataGroupId:oldData2.dataGroupId,divide:getDivideShapeFromData(oldData2.data),data:oldData2.data})}),oldSeries_1.length&amp;&amp;updateBatches.set(transitionKeyStr,{oldSeries:oldSeries_1,newSeries:[{dataGroupId:newDataGroupId,data:newData,divide:getDivideShapeFromData(newData)}]})}else{var oldData_1=oldDataMapForSplit.get(transitionKey);if(oldData_1){var batch=updateBatches.get(oldData_1.key);batch||(batch={oldSeries:[{dataGroupId:oldData_1.dataGroupId,data:oldData_1.data,divide:getDivideShapeFromData(oldData_1.data)}],newSeries:[]},updateBatches.set(oldData_1.key,batch)),batch.newSeries.push({dataGroupId:newDataGroupId,data:newData,divide:getDivideShapeFromData(newData)})}}}}),updateBatches}(globalStore,params);each$f(updateBatches_1.keys(),function(key){var batch=updateBatches_1.get(key);transitionBetween(batch.oldSeries,batch.newSeries,api)})}each$f(params.updatedSeries,function(series){series.__universalTransitionEnabled&amp;&amp;(series.__universalTransitionEnabled=!1)})}for(var allSeries=ecModel.getSeries(),savedSeries=globalStore.oldSeries=[],savedDataGroupIds=globalStore.oldDataGroupIds=[],savedData=globalStore.oldData=[],i=0;i&lt;allSeries.length;i++){var data=allSeries[i].getData();data.count()&lt;1e4&amp;&amp;(savedSeries.push(allSeries[i]),savedDataGroupIds.push(allSeries[i].get("dataGroupId")),savedData.push(data))}})}),use(installLabelLayout);const echarts$1=Object.freeze(Object.defineProperty({__proto__:null,Axis:Axis,ChartView:ChartView,ComponentModel:ComponentModel,ComponentView:ComponentView,List:SeriesData,Model:Model,PRIORITY:PRIORITY,SeriesModel:SeriesModel,color:color,connect:connect,dataTool:dataTool,dependencies:dependencies,disConnect:disConnect,disconnect:disconnect,dispose:dispose,env:env,extendChartView:extendChartView,extendComponentModel:extendComponentModel,extendComponentView:extendComponentView,extendSeriesModel:extendSeriesModel,format:format,getCoordinateSystemDimensions:getCoordinateSystemDimensions,getInstanceByDom:getInstanceByDom,getInstanceById:getInstanceById,getMap:getMap,graphic:graphic,helper:helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix:matrix,number:number,parseGeoJSON:parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction:registerAction,registerCoordinateSystem:registerCoordinateSystem,registerLayout:registerLayout,registerLoading:registerLoading,registerLocale:registerLocale,registerMap:registerMap$1,registerPostInit:registerPostInit,registerPostUpdate:registerPostUpdate,registerPreprocessor:registerPreprocessor,registerProcessor:registerProcessor,registerTheme:registerTheme,registerTransform:registerTransform,registerUpdateLifecycle:registerUpdateLifecycle,registerVisual:registerVisual,setCanvasCreator:setCanvasCreator,setPlatformAPI:setPlatformAPI,throttle:throttle,time:time,use:use,util:util,vector:vector,version:"5.6.0",zrUtil:util$1,zrender:zrender},Symbol.toStringTag,{value:"Module"}));use([install$R,install]),use(installLabelLayout);var geoCoordMap={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function fixGeoCoords(mapType,region){if("world"===mapType){var geoCoord2=geoCoordMap[region.name];if(geoCoord2){var cp=[geoCoord2[0],geoCoord2[1]];region.setCenter(cp)}}}const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis:Axis,ChartView:ChartView,ComponentModel:ComponentModel,ComponentView:ComponentView,List:SeriesData,Model:Model,PRIORITY:PRIORITY,SeriesModel:SeriesModel,color:color,connect:connect,dataTool:dataTool,dependencies:dependencies,disConnect:disConnect,disconnect:disconnect,dispose:dispose,env:env,extendChartView:extendChartView,extendComponentModel:extendComponentModel,extendComponentView:extendComponentView,extendSeriesModel:extendSeriesModel,format:format,getCoordinateSystemDimensions:getCoordinateSystemDimensions,getInstanceByDom:getInstanceByDom,getInstanceById:getInstanceById,getMap:getMap,graphic:graphic,helper:helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix:matrix,number:number,parseGeoJSON:parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction:registerAction,registerCoordinateSystem:registerCoordinateSystem,registerLayout:registerLayout,registerLoading:registerLoading,registerLocale:registerLocale,registerMap:registerMap$1,registerPostInit:registerPostInit,registerPostUpdate:registerPostUpdate,registerPreprocessor:registerPreprocessor,registerProcessor:registerProcessor,registerTheme:registerTheme,registerTransform:registerTransform,registerUpdateLifecycle:registerUpdateLifecycle,registerVisual:registerVisual,setCanvasCreator:setCanvasCreator,setPlatformAPI:setPlatformAPI,throttle:throttle,time:time,use:use,util:util,vector:vector,version:"5.6.0",zrUtil:util$1,zrender:zrender},Symbol.toStringTag,{value:"Module"}));export{ChartView as $,Animator as A,use as B,ComponentModel as C,getMap as D,createDimensions as E,lift as F,BoundingRect as G,parseGeoJSON as H,fixTextCoords as I,fixGeoCoords as J,reduce as K,LRU as L,Model as M,parseDate as N,OrdinalMeta as O,dataStack as P,formatTpl as Q,Rect$2 as R,SeriesData as S,encodeHTML as T,addCommas as U,isObject$3 as V,getTooltipMarker as W,formatTime as X,getCoordinateSystemDimensions as Y,ZRImage as Z,SeriesModel as _,indexOf as a,containStroke$4 as a0,createSymbol$1 as a1,round$3 as a2,createList$2 as a3,create$1 as a4,invert as a5,applyTransform$1 as a6,Graph as a7,linkSeriesData as a8,linearMap$2 as a9,extend as aa,concatArray as ab,echarts$1 as ac,install$v as ad,LinearGradient as ae,echarts as af,install$Q as ag,install$p as ah,install$i as ai,install$9 as aj,install$6 as ak,install$R as al,install$O as am,install$P as an,install$g as ao,init$1 as ap,connect as aq,disconnect as ar,registerPostInit as b,registerPostUpdate as c,registerPreprocessor as d,each$f as e,merge as f,getECData as g,defaults as h,isArray$1 as i,init$2 as j,brushSingle as k,ZRText as l,map$1 as m,createTextStyle$1 as n,ComponentView as o,parse as p,getPrecisionSafe as q,requestAnimationFrame as r,Cartesian as s,inherits as t,Axis as u,getLayoutRect as v,createScale as w,mixinAxisModelCommonMethods as x,clone$4 as y,curry$1 as z};</span></span></span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-10-16T12:41:31.984Z
            </div>
        <script src="../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../sorter.js"></script>
        <script src="../../../../block-navigation.js"></script>
    </body>
</html>
    