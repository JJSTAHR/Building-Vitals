
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for Building Vitals/Building-Vitals/build/js/index-B81B1q_K.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../index.html">All files</a> / <a href="index.html">Building Vitals/Building-Vitals/build/js</a> index-B81B1q_K.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/2</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/2</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/pages-B2aUeQ7z.js","js/app-core-rH6lZf1X.js","js/vendor-CFMRQ_Yt.js","js/data-vendor-DBrFxduC.js","js/echarts-vendor-xTKhTmAz.js","assets/vendor-BOltB2Hq.css","js/services-B0KkmCks.js","js/firebase-vendor-DFJ8_Xw5.js","js/utils-CrQ8UdBz.js","js/date-vendor-BU9txqBG.js","js/components-DaeLY-_K.js","assets/components-DgQfaczj.css","assets/pages-Dea-4gHF.css"])))=&gt;i.map(i=&gt;d[i]);</span></span></span>
<span class="cstat-no" title="statement not covered" >var _a,_b,_c,_d,_e,_f;import{n as reactExports,q as jsxRuntimeExports,v as alpha,b as createTheme,ee as DndProvider,ef as HTML5Backend,eg as QueryClientProvider,eh as BrowserRouter,ei as Routes,ej as Route,dr as Navigate,E as Box,at as useLocation,O as React,ah as CircularProgress,ek as ReactDOM,el as Provider_default,em as PersistGate}from"./vendor-CFMRQ_Yt.js";import{ba as getBrowserTimezone,bb as createLazyRoute,bc as setupGlobalErrorHandlers,bd as preloadCriticalIcons,be as retryFirestoreOperation,bf as cleanupStuckOverlays,bg as handleFirestorePersistenceError,bh as enableChartDebugMode,bi as initializeConsoleEnhancer,bj as setupGlobalErrorHandlers$1}from"./utils-CrQ8UdBz.js";import{s as sesColorPalette,g as glassEffect,$ as sesDarkTheme,O as createLogger,b as useAppDispatch,u as useAppSelector,_ as __vitePreload,a0 as updateDirectApiToken,c as auth,a1 as authFailure,a2 as authStart,a3 as setFirebaseUser,a4 as loadProfileStart,x as db,E as store,a5 as setDarkMode,a6 as setUserProfile,U as tokenLoadComplete,a7 as BatchingProvider,a8 as SnackbarProvider,a9 as persistor}from"./app-core-rH6lZf1X.js";import{c as QueryClient}from"./data-vendor-DBrFxduC.js";import{l as ErrorBoundary,A as AccessibilityProvider,P as ParticleBackground,N as NetworkStatus,n as PointPreloadIndicator,o as NotificationProvider,L as Layout,T as TokenExpirationBanner,M as MigrationBanner,C as CircuitBreakerStatus,p as PWAInstallPrompt}from"./components-DaeLY-_K.js";import{y as getSiteTimezoneWithFallback,z as errorTracker,A as setUser,B as tokenExpirationMonitor}from"./services-B0KkmCks.js";import{K as onAuthStateChanged,l as doc,m as getDoc,u as updateDoc,s as setDoc,o as serverTimestamp}from"./firebase-vendor-DFJ8_Xw5.js";import"./echarts-vendor-xTKhTmAz.js";import"./date-vendor-BU9txqBG.js";!function polyfill(){const relList=document.createElement("link").relList;if(!(relList&amp;&amp;relList.supports&amp;&amp;relList.supports("modulepreload"))){for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver(mutations=&gt;{for(const mutation of mutations)if("childList"===mutation.type)for(const node of mutation.addedNodes)"LINK"===node.tagName&amp;&amp;"modulepreload"===node.rel&amp;&amp;processPreload(node)}).observe(document,{childList:!0,subtree:!0})}function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=function getFetchOpts(link){const fetchOpts={};return link.integrity&amp;&amp;(fetchOpts.integrity=link.integrity),link.referrerPolicy&amp;&amp;(fetchOpts.referrerPolicy=link.referrerPolicy),"use-credentials"===link.crossOrigin?fetchOpts.credentials="include":"anonymous"===link.crossOrigin?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}(link);fetch(link.href,fetchOpts)}}();const TimezoneContext=reactExports.createContext(void 0),TimezoneProvider=({children:children})=&gt;{const[currentSite,setCurrentSite]=reactExports.useState(null),[siteTimezone,setSiteTimezone]=reactExports.useState(""),[browserTimezone,setBrowserTimezone]=reactExports.useState("");reactExports.useEffect(()=&gt;{const override=localStorage.getItem("userTimezoneOverride");let tz;if(override)try{const{enabled:enabled,timezone:timezone}=JSON.parse(override);enabled&amp;&amp;timezone?(tz=timezone,console.log("[TimezoneContext] Using overridden user timezone:",tz)):tz=getBrowserTimezone()}catch(e){console.error("[TimezoneContext] Invalid timezone override:",e),tz=getBrowserTimezone()}else tz=getBrowserTimezone();setBrowserTimezone(tz),siteTimezone||setSiteTimezone(tz)},[]),reactExports.useEffect(()=&gt;{if(currentSite){const tz=getSiteTimezoneWithFallback(currentSite,browserTimezone);setSiteTimezone(tz)}else setSiteTimezone(browserTimezone||getBrowserTimezone())},[currentSite,browserTimezone]);const value={currentSite:currentSite,siteTimezone:siteTimezone,browserTimezone:browserTimezone,isTimezoneMismatch:siteTimezone!==browserTimezone&amp;&amp;!!currentSite,setCurrentSite:setCurrentSite,overrideSiteTimezone:timezone=&gt;{setSiteTimezone(timezone)},getCurrentTime:()=&gt;{const now=new Date,utc=new Date(now.toISOString()),siteDate=new Date(now.toLocaleString("en-US",{timeZone:siteTimezone}));return{browser:now,site:siteDate,utc:utc}}};return jsxRuntimeExports.jsx(TimezoneContext.Provider,{value:value,children:children})};(new Date).toISOString();const enhancedPalette={gradients:{glass:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",radial:`radial-gradient(circle at 30% 30%, ${alpha(sesColorPalette.primary,.3)} 0%, transparent 70%)`,mesh:`\n      radial-gradient(at 0% 0%, ${alpha(sesColorPalette.primary,.15)} 0px, transparent 50%),\n      radial-gradient(at 90% 10%, ${alpha(sesColorPalette.secondary,.1)} 0px, transparent 50%),\n      radial-gradient(at 50% 50%, ${alpha(sesColorPalette.accent,.08)} 0px, transparent 50%),\n      radial-gradient(at 100% 100%, ${alpha(sesColorPalette.primaryDark,.12)} 0px, transparent 50%)\n    `},glass:{ultra:{backgroundColor:"rgba(15, 15, 17, 0.4)",backdropFilter:"blur(40px) saturate(200%)",WebkitBackdropFilter:"blur(40px) saturate(200%)",border:`1px solid ${alpha(sesColorPalette.primary,.15)}`,boxShadow:`\n        0 8px 32px ${alpha("#000000",.4)},\n        inset 0 1px 0 ${alpha("#ffffff",.1)},\n        inset 0 -1px 0 ${alpha("#000000",.2)}\n      `},card:{backgroundColor:alpha(sesColorPalette.backgroundPaper,.7),backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",border:`1px solid ${alpha(sesColorPalette.primary,.1)}`,boxShadow:`\n        0 10px 40px ${alpha("#000000",.3)},\n        inset 0 1px 0 ${alpha("#ffffff",.08)}\n      `,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&amp;:hover":{backgroundColor:alpha(sesColorPalette.backgroundPaper,.8),boxShadow:`\n          0 20px 60px ${alpha("#000000",.4)},\n          inset 0 1px 0 ${alpha("#ffffff",.12)},\n          0 0 0 1px ${alpha(sesColorPalette.primary,.2)}\n        `,transform:"translateY(-2px)"}},button:{background:`linear-gradient(135deg, ${alpha(sesColorPalette.primary,.9)} 0%, ${alpha(sesColorPalette.primaryLight,.8)} 100%)`,backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:`1px solid ${alpha("#ffffff",.15)}`,boxShadow:`\n        0 4px 16px ${alpha(sesColorPalette.primary,.3)},\n        inset 0 1px 0 ${alpha("#ffffff",.2)},\n        inset 0 -1px 0 ${alpha("#000000",.1)}\n      `,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&amp;:hover":{background:`linear-gradient(135deg, ${sesColorPalette.primary} 0%, ${sesColorPalette.primaryLight} 100%)`,boxShadow:`\n          0 8px 24px ${alpha(sesColorPalette.primary,.4)},\n          inset 0 1px 0 ${alpha("#ffffff",.3)},\n          0 0 20px ${alpha(sesColorPalette.primary,.2)}\n        `,transform:"translateY(-1px) scale(1.02)"},"&amp;:active":{transform:"translateY(0) scale(0.98)"}}},neon:{primary:{textShadow:`\n        0 0 10px ${sesColorPalette.primary},\n        0 0 20px ${sesColorPalette.primary},\n        0 0 30px ${sesColorPalette.primary}\n      `,boxShadow:`\n        0 0 10px ${sesColorPalette.primary},\n        0 0 20px ${alpha(sesColorPalette.primary,.8)},\n        inset 0 0 10px ${alpha(sesColorPalette.primary,.3)}\n      `},secondary:{boxShadow:`\n        0 0 10px ${sesColorPalette.secondary},\n        0 0 20px ${alpha(sesColorPalette.secondary,.8)}\n      `}}};createTheme({...sesDarkTheme,components:{...sesDarkTheme.components,MuiCssBaseline:{styleOverrides:{body:{backgroundColor:sesColorPalette.backgroundDark,backgroundImage:enhancedPalette.gradients.mesh,backgroundAttachment:"fixed",position:"relative","&amp;::before":{content:'""',position:"fixed",top:0,left:0,right:0,bottom:0,background:enhancedPalette.gradients.radial,opacity:.5,animation:"float 20s ease-in-out infinite",pointerEvents:"none"}},"@keyframes float":{"0%, 100%":{transform:"translate(0, 0) scale(1)"},"33%":{transform:"translate(30px, -30px) scale(1.1)"},"66%":{transform:"translate(-20px, 20px) scale(0.9)"}},"@keyframes pulse":{"0%, 100%":{opacity:1},"50%":{opacity:.8}},"@keyframes shimmer":{"0%":{backgroundPosition:"-200% center"},"100%":{backgroundPosition:"200% center"}}}},MuiPaper:{styleOverrides:{root:{...enhancedPalette.glass.card,backgroundImage:"none",overflow:"hidden",position:"relative","&amp;::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"1px",background:`linear-gradient(90deg, transparent, ${alpha("#ffffff",.2)}, transparent)`,animation:"shimmer 3s linear infinite"}},elevation1:{...enhancedPalette.glass.card},elevation2:{...enhancedPalette.glass.ultra}}},MuiButton:{...null==(_a=sesDarkTheme.components)?void 0:_a.MuiButton,styleOverrides:{...null==(_c=null==(_b=sesDarkTheme.components)?void 0:_b.MuiButton)?void 0:_c.styleOverrides,root:{...null==(_f=null==(_e=null==(_d=sesDarkTheme.components)?void 0:_d.MuiButton)?void 0:_e.styleOverrides)?void 0:_f.root,position:"relative",overflow:"hidden","&amp;::after":{content:'""',position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`linear-gradient(45deg, transparent 30%, ${alpha("#ffffff",.1)} 50%, transparent 70%)`,transform:"rotate(45deg) translate(-100%, -100%)",transition:"transform 0.6s"},"&amp;:hover::after":{transform:"rotate(45deg) translate(100%, 100%)"}},contained:{...enhancedPalette.glass.button},outlined:{borderWidth:1.5,borderImage:`linear-gradient(135deg, ${sesColorPalette.primary}, ${sesColorPalette.primaryLight}) 1`,"&amp;:hover":{borderWidth:2,...enhancedPalette.neon.primary}}}},MuiCard:{styleOverrides:{root:{...enhancedPalette.glass.card,position:"relative","&amp;::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:enhancedPalette.gradients.glass,opacity:0,transition:"opacity 0.3s",pointerEvents:"none"},"&amp;:hover::after":{opacity:1}}}},MuiTextField:{styleOverrides:{root:{"&amp; .MuiOutlinedInput-root":{...enhancedPalette.glass.ultra,"&amp; fieldset":{borderColor:alpha(sesColorPalette.primary,.2),borderWidth:1.5},"&amp;:hover fieldset":{borderColor:alpha(sesColorPalette.primary,.4)},"&amp;.Mui-focused":{"&amp; fieldset":{borderColor:sesColorPalette.primary,borderWidth:2,boxShadow:`0 0 0 3px ${alpha(sesColorPalette.primary,.1)}`},...enhancedPalette.neon.primary}}}}},MuiAppBar:{styleOverrides:{root:{...enhancedPalette.glass.ultra,borderBottom:`1px solid ${alpha(sesColorPalette.primary,.2)}`,boxShadow:`0 4px 30px ${alpha("#000000",.5)}`}}},MuiTooltip:{styleOverrides:{tooltip:{...enhancedPalette.glass.ultra,fontSize:"0.8rem",fontWeight:500,padding:"8px 12px",maxWidth:300},arrow:{color:alpha(sesColorPalette.backgroundPaper,.9)}}},MuiDialog:{styleOverrides:{paper:{...enhancedPalette.glass.ultra,boxShadow:`\n            0 24px 48px ${alpha("#000000",.5)},\n            0 0 0 1px ${alpha(sesColorPalette.primary,.1)}\n          `},backdrop:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",backgroundColor:alpha("#000000",.6)}}},MuiChip:{styleOverrides:{root:{...glassEffect.light,borderColor:alpha(sesColorPalette.primary,.2),"&amp;:hover":{backgroundColor:alpha(sesColorPalette.primary,.15),borderColor:alpha(sesColorPalette.primary,.4),transform:"scale(1.05)"}},filled:{background:`linear-gradient(135deg, ${alpha(sesColorPalette.primary,.2)}, ${alpha(sesColorPalette.primaryLight,.15)})`}}},MuiSwitch:{styleOverrides:{root:{"&amp; .MuiSwitch-track":{backgroundColor:alpha(sesColorPalette.primary,.2),border:`1px solid ${alpha(sesColorPalette.primary,.3)}`},"&amp; .Mui-checked":{"&amp; + .MuiSwitch-track":{backgroundColor:alpha(sesColorPalette.primary,.4),border:`1px solid ${sesColorPalette.primary}`,...enhancedPalette.neon.primary}}},thumb:{backgroundColor:"#ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}}},MuiFab:{styleOverrides:{root:{...enhancedPalette.glass.button,"&amp;:hover":{...enhancedPalette.glass.button["&amp;:hover"],...enhancedPalette.neon.primary}},primary:{background:`linear-gradient(135deg, ${sesColorPalette.primary}, ${sesColorPalette.primaryLight})`}}}}});const appLogger=createLogger("App"),Settings=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./pages-B2aUeQ7z.js").then(n=&gt;n.S),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),["idle"]),Login=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./pages-B2aUeQ7z.js").then(n=&gt;n.L),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Dashboard=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./pages-B2aUeQ7z.js").then(n=&gt;n.D),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),["hover","idle"]),MissingTokenPage=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./pages-B2aUeQ7z.js").then(n=&gt;n.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Admin=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./pages-B2aUeQ7z.js").then(n=&gt;n.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),HelpPage=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./pages-B2aUeQ7z.js").then(n=&gt;n.H),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),["idle"]),SharedDashboard=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./pages-B2aUeQ7z.js").then(n=&gt;n.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),RootRedirect=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./components-DaeLY-_K.js").then(n=&gt;n.r),__vite__mapDeps([10,2,3,4,5,1,6,7,8,9,11]))),DeviceDeviationHeatmapTest=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./components-DaeLY-_K.js").then(n=&gt;n.s),__vite__mapDeps([10,2,3,4,5,1,6,7,8,9,11]))),MonitoringDashboard=createLazyRoute(()=&gt;__vitePreload(()=&gt;import("./components-DaeLY-_K.js").then(n=&gt;n.t),__vite__mapDeps([10,2,3,4,5,1,6,7,8,9,11])),["idle"]);setupGlobalErrorHandlers();const protectedRouteLogger=createLogger("ProtectedRoute"),ProtectedRoute=({children:children,requiresToken:requiresToken=!0,requiresAdmin:requiresAdmin=!1})=&gt;{const location=useLocation(),{isAuthenticated:isAuthenticated,loading:loading,loadingProfile:loadingProfile,tokenLoading:tokenLoading,userProfile:userProfile,aceToken:aceToken}=useAppSelector(state=&gt;state.auth);React.useEffect(()=&gt;{const timer=setTimeout(()=&gt;{cleanupStuckOverlays(),enableChartDebugMode()},100);return()=&gt;clearTimeout(timer)},[]),React.useEffect(()=&gt;{protectedRouteLogger.debug("Route protection check",{loading:loading,loadingProfile:loadingProfile,tokenLoading:tokenLoading,isAuthenticated:isAuthenticated,hasAceToken:!!aceToken,requiresToken:requiresToken,requiresAdmin:requiresAdmin,pathname:location.pathname})},[loading,loadingProfile,tokenLoading,isAuthenticated,aceToken,requiresToken,requiresAdmin,location.pathname]);const[tokenTimeout,setTokenTimeout]=React.useState(!1);return React.useEffect(()=&gt;{if(tokenLoading&amp;&amp;requiresToken){const timer=setTimeout(()=&gt;{protectedRouteLogger.warn("Token loading timeout - proceeding without token",{timeoutDuration:3e3,requiresToken:requiresToken}),setTokenTimeout(!0)},3e3);return()=&gt;clearTimeout(timer)}},[tokenLoading,requiresToken]),loading||loadingProfile||requiresToken&amp;&amp;tokenLoading&amp;&amp;!tokenTimeout?jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:jsxRuntimeExports.jsx(CircularProgress,{})})}):isAuthenticated?requiresAdmin&amp;&amp;"admin"!==(null==userProfile?void 0:userProfile.role)?jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx(Navigate,{replace:!0,to:"/"})}):requiresToken&amp;&amp;!aceToken?(protectedRouteLogger.info("Redirecting to settings - ACE Token required but not found",{isAuthenticated:isAuthenticated,userProfile:null==userProfile?void 0:userProfile.email,redirectTo:"/settings?setup=token"}),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx(Navigate,{replace:!0,to:"/settings?setup=token"})})):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:children}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx(Navigate,{replace:!0,state:{from:location},to:"/login"})})},queryClient=new QueryClient({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:2,refetchOnWindowFocus:!0,refetchOnReconnect:"always"},mutations:{retry:1}}}),App=()=&gt;{const dispatch=useAppDispatch(),{isAuthenticated:isAuthenticated,firebaseUser:firebaseUser,aceToken:aceToken}=useAppSelector(state=&gt;state.auth),{darkMode:darkMode,theme:selectedTheme="accessible"}=useAppSelector(state=&gt;state.ui);return reactExports.useEffect(()=&gt;{errorTracker.initialize({environment:"production",release:"1.0.0"})},[]),reactExports.useEffect(()=&gt;{const timer=setTimeout(async()=&gt;{try{const lastFixAttempt=localStorage.getItem("indexeddb-fix-attempt");if(lastFixAttempt){const timeSinceLastFix=Date.now()-parseInt(lastFixAttempt);if(timeSinceLastFix&lt;3e5)return void appLogger.debug("IndexedDB fix was attempted recently, skipping check",{timeSinceLastFix:timeSinceLastFix,lastFixAttempt:lastFixAttempt})}const{autoFixIndexedDB:autoFixIndexedDB}=await __vitePreload(async()=&gt;{const{autoFixIndexedDB:autoFixIndexedDB2}=await import("./utils-CrQ8UdBz.js").then(n=&gt;n.bk);return{autoFixIndexedDB:autoFixIndexedDB2}},__vite__mapDeps([8,4,1,2,3,5,6,7,9,10,11])),testDb=indexedDB.open("test-db-check",1);testDb.onerror=async()=&gt;{appLogger.warn("IndexedDB appears to be corrupted, attempting auto-fix"),localStorage.setItem("indexeddb-fix-attempt",Date.now().toString());try{await autoFixIndexedDB()}catch(error){appLogger.error("Failed to auto-fix IndexedDB",{error:error.message})}},testDb.onsuccess=()=&gt;{testDb.result.close(),indexedDB.deleteDatabase("test-db-check")}}catch(error){appLogger.error("Error checking IndexedDB",{error:error.message})}},1e3);return()=&gt;clearTimeout(timer)},[]),reactExports.useEffect(()=&gt;{setUser(isAuthenticated&amp;&amp;firebaseUser?{id:firebaseUser.uid,email:firebaseUser.email||void 0}:null)},[isAuthenticated,firebaseUser]),reactExports.useEffect(()=&gt;{preloadCriticalIcons().catch(err=&gt;{appLogger.warn("Failed to preload critical icons",{error:err.message})})},[]),reactExports.useEffect(()=&gt;(isAuthenticated&amp;&amp;aceToken&amp;&amp;(appLogger.info("Starting token expiration monitoring",{isAuthenticated:isAuthenticated,hasToken:!!aceToken}),tokenExpirationMonitor.startMonitoring(),tokenExpirationMonitor.checkNow()),()=&gt;{tokenExpirationMonitor.stopMonitoring()}),[isAuthenticated,aceToken]),reactExports.useEffect(()=&gt;{isAuthenticated&amp;&amp;firebaseUser&amp;&amp;__vitePreload(async()=&gt;{const{initializeTokenMigration:initializeTokenMigration}=await import("./services-B0KkmCks.js").then(n=&gt;n.F);return{initializeTokenMigration:initializeTokenMigration}},__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11])).then(({initializeTokenMigration:initializeTokenMigration})=&gt;{initializeTokenMigration()}).catch(err=&gt;{appLogger.warn("Failed to initialize token migration",{error:err.message})})},[isAuthenticated,firebaseUser]),reactExports.useEffect(()=&gt;{__vitePreload(async()=&gt;{const{getAceApiToken:getAceApiToken}=await import("./services-B0KkmCks.js").then(n=&gt;n.E);return{getAceApiToken:getAceApiToken}},__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11])).then(({getAceApiToken:getAceApiToken})=&gt;{const aceApiToken=getAceApiToken();aceApiToken&amp;&amp;(updateDirectApiToken(aceApiToken),__vitePreload(async()=&gt;{const{setAceToken:setAceToken2}=await import("./app-core-rH6lZf1X.js").then(n=&gt;n.ah);return{setAceToken:setAceToken2}},__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11])).then(({setAceToken:setAceToken2})=&gt;{setAceToken2(aceApiToken)}).catch(err=&gt;{appLogger.error("Failed to update axios instance with token",{error:err.message})}))}).catch(err=&gt;{appLogger.error("Failed to import aceTokenResolver",{error:err.message})}),aceToken||__vitePreload(async()=&gt;{const{setAceToken:setAceToken2}=await import("./app-core-rH6lZf1X.js").then(n=&gt;n.ah);return{setAceToken:setAceToken2}},__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11])).then(({setAceToken:setAceToken2})=&gt;{setAceToken2(null)}).catch(err=&gt;{appLogger.error("Failed to clear axios instance token",{error:err.message})})},[aceToken,dispatch]),reactExports.useEffect(()=&gt;{if(!auth)return void dispatch(authFailure("Unable to connect to authentication service. Please refresh the page and try again."));dispatch(authStart());const authTimeout=setTimeout(()=&gt;{dispatch(authFailure("Authentication is taking longer than expected. Please refresh the page."))},5e3),unsubscribe=onAuthStateChanged(auth,async user=&gt;{var _a2,_b2,_c2;if(clearTimeout(authTimeout),user){dispatch(setFirebaseUser({uid:user.uid,email:user.email,displayName:user.displayName,photoURL:user.photoURL,providerId:(null==(_a2=user.providerData[0])?void 0:_a2.providerId)||null})),dispatch(loadProfileStart());const{secureStorage:secureStorage}=await __vitePreload(async()=&gt;{const{secureStorage:secureStorage2}=await import("./services-B0KkmCks.js").then(n=&gt;n.D);return{secureStorage:secureStorage2}},__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11]));secureStorage.setUserId(user.uid);try{if(!db)throw new Error("Firestore not initialized");const userDocRef=doc(db,"users",user.uid),userDocSnap=await getDoc(userDocRef);let profileData;if(userDocSnap.exists()){const firestoreData=userDocSnap.data(),{default:tokenManager}=await __vitePreload(async()=&gt;{const{default:tokenManager2}=await import("./app-core-rH6lZf1X.js").then(n=&gt;n.af);return{default:tokenManager2}},__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11])),{tokenLoadStart:tokenLoadStart,tokenLoadComplete:tokenLoadComplete2}=await __vitePreload(async()=&gt;{const{tokenLoadStart:tokenLoadStart2,tokenLoadComplete:tokenLoadComplete22}=await import("./app-core-rH6lZf1X.js").then(n=&gt;n.aa);return{tokenLoadStart:tokenLoadStart2,tokenLoadComplete:tokenLoadComplete22}},__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11]));dispatch(tokenLoadStart());const tokenLoadPromise=tokenManager.loadTokenFromFirestore(),timeoutPromise=new Promise((_,reject)=&gt;setTimeout(()=&gt;reject(new Error("Token load timeout")),5e3));try{await Promise.race([tokenLoadPromise,timeoutPromise]),appLogger.info("Token loaded from Firestore successfully");const currentToken=store.getState().auth.aceToken;currentToken&amp;&amp;__vitePreload(async()=&gt;{const{pointPreloadService:pointPreloadService}=await import("./services-B0KkmCks.js").then(n=&gt;n.G);return{pointPreloadService:pointPreloadService}},__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11])).then(({pointPreloadService:pointPreloadService})=&gt;(appLogger.info("Starting background point preloading"),pointPreloadService.startPreloading(currentToken,{priority:"recent",maxConcurrent:3,onProgress:progress=&gt;{appLogger.debug("Point preload progress",{loaded:progress.loadedSites,total:progress.totalSites,points:progress.totalPoints})}}))).catch(error=&gt;{appLogger.warn("Failed to start point preloading",{error:error.message})})}catch(error){appLogger.warn("Token load failed or timed out",{error:error.message})}finally{dispatch(tokenLoadComplete2())}store.getState().auth.aceToken;const savedDarkMode=firestoreData.darkMode;dispatch(setDarkMode("boolean"!=typeof savedDarkMode||savedDarkMode)),profileData={role:firestoreData.role||"user",requiresPasswordChange:firestoreData.requiresPasswordChange??!1,provider:firestoreData.provider||(null==(_b2=user.providerData[0])?void 0:_b2.providerId)||"password",photoURL:firestoreData.photoURL||user.photoURL},dispatch(setUserProfile({profile:profileData})),"boolean"!=typeof savedDarkMode&amp;&amp;await retryFirestoreOperation(async()=&gt;{await updateDoc(userDocRef,{darkMode:!0})})}else{dispatch(tokenLoadComplete());const adminEmails="kennyr@specializedeng.com,abutler@specializedeng.com,rcarnahan@specializedeng.com,clancaster@specializedeng.com,jstahr@specializedeng.com".split(",").map(email=&gt;email.trim())||[],isAdmin=user.email&amp;&amp;adminEmails.includes(user.email),provider=(null==(_c2=user.providerData[0])?void 0:_c2.providerId)||"password";profileData={role:isAdmin?"admin":"user",requiresPasswordChange:"password"===provider,provider:provider,photoURL:user.photoURL},await retryFirestoreOperation(async()=&gt;{await setDoc(userDocRef,{uid:user.uid,email:user.email,displayName:user.displayName,photoURL:user.photoURL,provider:provider,role:profileData.role,requiresPasswordChange:profileData.requiresPasswordChange,aceJwt:null,darkMode:!0,createdAt:serverTimestamp(),lastLoginAt:serverTimestamp()},{merge:!0})}),dispatch(setUserProfile({profile:profileData})),dispatch(setDarkMode(!0))}setTimeout(()=&gt;{cleanupStuckOverlays()},500)}catch(_error){appLogger.error("Error fetching/creating user profile or setting ACE token",{error:_error.message});const fallbackProfile={role:"user",requiresPasswordChange:!1};dispatch(setUserProfile({profile:fallbackProfile}));let errorMessage="Unable to load your profile. ";if(_error instanceof Error)if(_error.message.includes("permission"))errorMessage="You do not have permission to access this resource. Please contact your administrator.";else if(_error.message.includes("network"))errorMessage="Network error. Please check your connection and try again.";else if(_error.message.includes("token"))errorMessage="There was an issue with your authentication token. Please try logging in again.";else{if(_error.message.includes("unavailable")||handleFirestorePersistenceError(_error))return errorMessage="Database is temporarily unavailable. You can still use the app but some features may be limited.",dispatch(setUserProfile({profile:fallbackProfile})),dispatch(tokenLoadComplete()),void setTimeout(async()=&gt;{try{const{FirestoreRecovery:FirestoreRecovery}=await __vitePreload(async()=&gt;{const{FirestoreRecovery:FirestoreRecovery2}=await import("./utils-CrQ8UdBz.js").then(n=&gt;n.bl);return{FirestoreRecovery:FirestoreRecovery2}},__vite__mapDeps([8,4,1,2,3,5,6,7,9,10,11]));await FirestoreRecovery.recoverAuth(),appLogger.info("Background auth recovery completed")}catch(recoveryError){appLogger.error("Background recovery failed",{error:recoveryError.message}),handleFirestorePersistenceError(recoveryError)&amp;&amp;appLogger.warn("Persistent IndexedDB issues detected. Run clearFirestorePersistence() to reset.")}},5e3);errorMessage+="Please try refreshing the page."}dispatch(tokenLoadComplete()),dispatch(authFailure(errorMessage))}}else dispatch(setFirebaseUser(null))});return()=&gt;{clearTimeout(authTimeout),unsubscribe()}},[dispatch]),reactExports.useEffect(()=&gt;{if(null==firebaseUser?void 0:firebaseUser.uid){if(!db)return;const userDocRef=doc(db,"users",firebaseUser.uid);retryFirestoreOperation(async()=&gt;{await updateDoc(userDocRef,{darkMode:darkMode})}).then(()=&gt;{}).catch(_error=&gt;{handleFirestorePersistenceError(_error)&amp;&amp;appLogger.warn("Failed to save theme preference due to persistence issues")})}},[darkMode,null==firebaseUser?void 0:firebaseUser.uid,dispatch]),reactExports.useEffect(()=&gt;(window.disablePythonMonitoring=!0,()=&gt;{}),[]),jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(DndProvider,{backend:HTML5Backend,children:jsxRuntimeExports.jsxs(AccessibilityProvider,{initialSettings:{theme:"highContrast"===selectedTheme?"highContrast":darkMode?"dark":"light"},showSkipLinks:!0,skipLinksVariant:"global",children:[jsxRuntimeExports.jsx(ParticleBackground,{}),jsxRuntimeExports.jsx(NetworkStatus,{}),jsxRuntimeExports.jsx(PointPreloadIndicator,{}),jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(TimezoneProvider,{children:jsxRuntimeExports.jsx(BatchingProvider,{children:jsxRuntimeExports.jsx(SnackbarProvider,{children:jsxRuntimeExports.jsx(NotificationProvider,{children:jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}),children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{element:isAuthenticated?jsxRuntimeExports.jsx(Navigate,{replace:!0,to:"/dashboard"}):jsxRuntimeExports.jsx(Login,{}),path:"/login"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(SharedDashboard,{}),path:"/shared/:shareId"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{requiresToken:!1,children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(MissingTokenPage,{})})}),path:"/missing-token"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{requiresToken:!1,children:jsxRuntimeExports.jsxs(Layout,{children:[jsxRuntimeExports.jsx(Box,{sx:{width:"100%",maxWidth:"1200px",mx:"auto",mt:2},children:jsxRuntimeExports.jsx(TokenExpirationBanner,{showAlways:!0})}),jsxRuntimeExports.jsx(Settings,{})]})}),path:"/settings"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{requiresAdmin:!0,requiresToken:!1,children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(Admin,{})})}),path:"/admin"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{requiresToken:!1,children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(HelpPage,{})})}),path:"/help"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{requiresToken:!1,children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(MonitoringDashboard,{})})}),path:"/monitoring"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{requiresToken:!0,children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(DeviceDeviationHeatmapTest,{})})}),path:"/test/device-deviation-heatmap"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{requiresToken:!0,children:jsxRuntimeExports.jsxs(Layout,{children:[jsxRuntimeExports.jsx(Box,{sx:{position:"sticky",top:0,zIndex:1200,width:"100%"},children:jsxRuntimeExports.jsx(MigrationBanner,{})}),jsxRuntimeExports.jsx(Dashboard,{})]})}),path:"/dashboard"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(RootRedirect,{}),path:"/"}),jsxRuntimeExports.jsx(Route,{element:jsxRuntimeExports.jsx(Navigate,{replace:!0,to:"/"}),path:"*"})]})}),jsxRuntimeExports.jsx(CircuitBreakerStatus,{}),jsxRuntimeExports.jsx(PWAInstallPrompt,{})]})})})})})})]})})})},isLocalhost=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(registration=&gt;{console.info("Service Worker registered successfully"),registration.onupdatefound=()=&gt;{const installingWorker=registration.installing;null!=installingWorker&amp;&amp;(installingWorker.onstatechange=()=&gt;{"installed"===installingWorker.state&amp;&amp;(navigator.serviceWorker.controller?(console.info("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),(null==config?void 0:config.onUpdate)&amp;&amp;config.onUpdate(registration)):(console.info("Content is cached for offline use."),(null==config?void 0:config.onSuccess)&amp;&amp;config.onSuccess(registration)))})}}).catch(error=&gt;{console.error("Error during service worker registration:",error)})}console.log("Application starting..."),console.log("Environment:","production"),console.log("Build time:",(new Date).toISOString()),"undefined"!=typeof window&amp;&amp;(window.__REDUX_STORE__=store),console.log("Using simple ECharts initialization..."),initializeConsoleEnhancer(),setupGlobalErrorHandlers$1(),console.log("Global error handlers initialized"),console.log("Creating React root...");const rootElement=document.getElementById("root");if(!rootElement)throw console.error("Root element not found!"),new Error("Root element not found");const root=ReactDOM.createRoot(rootElement);console.log("Rendering React app..."),root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(Provider_default,{store:store,children:jsxRuntimeExports.jsx(PersistGate,{loading:null,persistor:persistor,children:jsxRuntimeExports.jsx(App,{})})})})),console.log("React app rendered"),setTimeout(()=&gt;{const loader=document.getElementById("app-loader");loader&amp;&amp;(console.log("Removing loading indicator..."),loader.style.opacity="0",loader.style.transition="opacity 0.3s ease-out",setTimeout(()=&gt;{loader.remove(),console.log("Loading indicator removed")},300))},100),"serviceWorker"in navigator?(console.log("Service Worker API available"),function register(config){if("serviceWorker"in navigator){if(new URL("/",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=&gt;{const swUrl="/service-worker.js".replace(/\/+/g,"/");isLocalhost?(function checkValidServiceWorker(swUrl,config){fetch(swUrl,{headers:{"Service-Worker":"script"}}).then(response=&gt;{const contentType=response.headers.get("content-type");console.log("[SW] Checking service worker:",{url:swUrl,status:response.status,contentType:contentType}),404===response.status||null!=contentType&amp;&amp;-1===contentType.indexOf("javascript")?(console.warn("[SW] Invalid service worker detected:",{status:response.status,contentType:contentType}),navigator.serviceWorker.ready.then(registration=&gt;{registration.unregister().then(()=&gt;{console.warn("[SW] Service worker unregistered due to invalid state"),console.warn("[SW] Manual refresh may be needed to re-register service worker"),"undefined"!=typeof window&amp;&amp;window.alert&amp;&amp;(sessionStorage.getItem("sw_alert_shown")||(sessionStorage.setItem("sw_alert_shown","true"),console.error("[SW] Service worker registration failed. The app may not work offline.")))})})):(console.log("[SW] Valid service worker found, registering..."),registerValidSW(swUrl,config))}).catch(error=&gt;{console.info("[SW] No internet connection or fetch failed:",error),console.info("App is running in offline mode.")})}(swUrl,config),navigator.serviceWorker.ready.then(()=&gt;{console.info("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):registerValidSW(swUrl,config)})}}({onSuccess:registration=&gt;{console.log("App is ready for offline use!",registration)},onUpdate:registration=&gt;{console.log("New app update available!",registration)}}),window.addEventListener("load",()=&gt;{console.log("Registering Firebase Service Worker..."),navigator.serviceWorker.register("/firebase-messaging-sw.js").then(registration=&gt;{console.log("Firebase Service Worker registered with scope:",registration.scope)}).catch(error=&gt;{console.error("Firebase Service Worker registration failed:",error)})})):console.warn("Service Worker API not available");</span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-10-16T12:41:31.984Z
            </div>
        <script src="../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../sorter.js"></script>
        <script src="../../../../block-navigation.js"></script>
    </body>
</html>
    